const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EmojiInput-D8KWfRV_.js","assets/typing-BufvpwMT.js","assets/_plugin-vue_export-helper-C3nsX_5G.js","assets/Validators-CZIHjraj.js","assets/index-DN3rM4CW.js","assets/index-t2tzl-7Z.js","assets/_commonjsHelpers-BosuxZz1.js","assets/vue-dompurify-html-CEAHYyWB.js","assets/utils.esm-DpfOb1Dc.js","assets/exports-V5h9smXw.js","assets/module-Ck6XLLJX.js","assets/Icon-CRdbOzdg.js","assets/EmojiInput-BDAJffYh.css","assets/PortalsArticlesIndexPage-DjoV6-w5.js","assets/globalConfig-D1kZOfR7.js","assets/globalConfig-CMyFmk17.css","assets/HelpCenterLayout-Bu_Qq_7a.js","assets/index-TZ-fjR_v.js","assets/DashboardIcon-Bs9yUtWf.js","assets/js.cookie-Cz0CWeBA.js","assets/CategoryHeaderControls-BWIm7k-d.js","assets/CategoryHeaderControls-BbwDINhF.css","assets/index-BtuGy7By.js","assets/useKeyboardNavigableList-JF8ah1-F.js","assets/helper-q29O9VCT.js","assets/Thumbnail-DwWGrtq5.js","assets/Thumbnail-DQHTm6FS.css","assets/BarChart-BUTp9Twj.js","assets/constants-lVAyZKq6.js","assets/IframeLoader-CqC8ndkM.js","assets/PortalsArticlesIndexPage-BpskOyNP.css","assets/PortalsArticlesNewPage-1g9Na3Nu.js","assets/ArticleEditor-Cxf8LjTo.js","assets/ArticleEditor-BMQHlbBo.css","assets/PortalsArticlesEditPage-BLJglxRV.js","assets/PortalsCategoriesIndexPage-Bt__mTkm.js","assets/PortalsLocalesIndexPage-CkbMu3AV.js","assets/PortalsSettingsIndexPage-BXVZGaDJ.js","assets/PortalsSettingsIndexPage-35Ovlo8w.css","assets/commandbar-DKjEa-ys.js","assets/commandbar-BN43hILO.css","assets/Sidebar-BHigZuPS.js","assets/Sidebar-DIueEN67.css"])))=>i.map(i=>d[i]);
var H2=Object.defineProperty;var W2=(e,t,n)=>t in e?H2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zt=(e,t,n)=>W2(e,typeof t!="symbol"?t+"":t,n);import{d as yo,h as yn,r as X,w as ct,c as C,a as $,o as p,b as We,e as y,f as Fe,g as w,i as re,v as Jt,F as pe,j as Ne,t as A,k as kn,T as qs,l as K,m as Re,_ as Ae,n as v,p as h,q as se,s as M,u as t0,x as n0,y as fs,z as Ht,A as tn,B as s0,C as a0,D as o0,E as i0,G as r0,H as N,I as qe,J as Ad,K as ju,L as yf,M as z2,N as j2,O as K2,P as dt,Q as Id,R as Cd,S as da,U as hn,V as wn,W as mt,X as Is,Y as Pn,Z as _o,$ as Sc,a0 as zo,a1 as vs,a2 as gn,a3 as Od,a4 as l0,a5 as vo,a6 as ls,a7 as pn,a8 as Sf,a9 as Af,aa as c0,ab as If,ac as Y2,ad as X2,ae as q2,af as Cf,ag as Op,ah as Nd,ai as Z2,aj as Q2,ak as Mr}from"./_plugin-vue_export-helper-C3nsX_5G.js";import{g as jo,u as Me,m as lt,e as wt,S as bs,M as J2,C as fi,a as gi,b as Of,c as So,A as eC,d as Ks,f as tC,h as nC,i as sC,j as u0,k as xm,l as $m,n as Np,_ as Ao,o as Vl,p as fa,q as aC}from"./globalConfig-D1kZOfR7.js";import{a as oC}from"./index-BtuGy7By.js";import{g as Nf,a as iC,c as rC}from"./_commonjsHelpers-BosuxZz1.js";import{a as tc,s as Fo,e as ro,i as lC,p as $l,u as nn,b as pt,c as Oe,B as cC,d as uC,g as dC,t as pC,f as M_,h as L_,j as hC,F as mC,k as Xs,l as Ku,m as Yu,n as co,o as fC,M as so,q as gC,r as _C,v as vC,w as bC}from"./index-t2tzl-7Z.js";import{_ as oe,r as d0,d as p0,c as Mm,a as EC,b as h0,e as TC,i as wp,f as yC,g as Rt,h as Qi,j as li,k as uo,l as SC,P as AC,m as IC,D as CC,n as OC,S as k_,E as NC,o as wC,M as D_,p as Rp,q as RC,s as xC,t as nc,u as $C,v as MC,w as LC,x as kC,y as DC,z as Xu,A as Ac,R as wf,B as gs,C as rs,F as P_,G as sc,H as PC,I as m0,J as Rf,K as BC,L as f0,N as FC}from"./typing-BufvpwMT.js";import{u as ce,a as Pt,A as UC}from"./index-TZ-fjR_v.js";import{r as Ye,u as bt,m as Qt,e as Ii,c as Hl,a as Ic,s as xf,b as el,d as g0,f as GC,g as qu,n as VC}from"./exports-V5h9smXw.js";import{u as $s,a as _0,h as HC,b as WC,i as zC,c as jC,d as KC,e as YC,L as XC,k as qC,f as ZC}from"./useKeyboardNavigableList-JF8ah1-F.js";import{c as xa,g as v0,a as b0}from"./helper-q29O9VCT.js";import{g as QC,c as JC,f as $f,a as eO,d as Uo,b as E0,e as tO,h as T0,i as nO,r as sO,j as aO,t as oO,k as iO,l as rO,m as lO,n as cO,o as Mf,p as uO,q as dO,s as pO}from"./utils.esm-DpfOb1Dc.js";import{B as jt,i as lo,d as y0,f as ms,s as Ys,u as sn,L as va,a as xn,g as Lf,b as kf,c as B_,e as hO,h as mO,j as Ml,k as fO,l as F_,m as gO,n as _O,o as vO}from"./Validators-CZIHjraj.js";import{T as Hn,r as bO,A as EO,h as TO}from"./Thumbnail-DwWGrtq5.js";import{r as En,t as un,a as On}from"./index-DN3rM4CW.js";import{g as yO,a as Df,h as Pf,R as Gn,C as Rs,b as Lr,c as SO,P as kr,L as Na,S as AO,d as IO,A as Kr,D as CO,e as Io,i as OO,_ as _i,f as At,w as It,j as NO,k as ua,u as wO,l as po,m as tl,s as RO,n as xO,p as Bf,I as yt,o as $O,q as MO,r as LO,t as Kc,v as Fr,x as Cc,y as kO,z as DO,B as PO,E as BO,M as vl,F as FO,G as UO,N as GO,H as U_,J as VO,K as HO,O as WO,Q as nr,T as sr,U as zO,V as Ff,W as jO,X as KO,Y as YO,Z as XO,$ as qO,a0 as S0,a1 as Zu,a2 as Ts,a3 as G_,a4 as ZO,a5 as Oc,a6 as nl,a7 as A0,a8 as ar,a9 as QO,aa as Nc,ab as wc,ac as Lm,ad as Ur,ae as Uf,af as ji,ag as JO,ah as V_,ai as I0,aj as eN,ak as C0,al as tN,am as nN,an as sN,ao as aN,ap as oN,aq as iN,ar as rN,as as lN,at as cN}from"./DashboardIcon-Bs9yUtWf.js";import{g as uN,l as Gf,a as dN}from"./Icon-CRdbOzdg.js";import{u as ya,M as wd,k as pN}from"./vue-dompurify-html-CEAHYyWB.js";import{F as xp,d as hN,a as mN}from"./module-Ck6XLLJX.js";import{_ as O0}from"./BarChart-BUTp9Twj.js";import{M as H_}from"./constants-lVAyZKq6.js";import{_ as fN}from"./IframeLoader-CqC8ndkM.js";import"./js.cookie-Cz0CWeBA.js";function N0(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const n=e[t],s=typeof n;(s==="object"||s==="function")&&!Object.isFrozen(n)&&N0(n)}),e}class W_{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function w0(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function ci(e,...t){const n=Object.create(null);for(const s in e)n[s]=e[s];return t.forEach(function(s){for(const o in s)n[o]=s[o]}),n}const gN="</span>",z_=e=>!!e.scope,_N=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((s,o)=>`${s}${"_".repeat(o+1)}`)].join(" ")}return`${t}${e}`};class vN{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=w0(t)}openNode(t){if(!z_(t))return;const n=_N(t.scope,{prefix:this.classPrefix});this.span(n)}closeNode(t){z_(t)&&(this.buffer+=gN)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const j_=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class Vf{constructor(){this.rootNode=j_(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=j_({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(s=>this._walk(t,s)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{Vf._collapse(n)}))}}class bN extends Vf{constructor(t){super(),this.options=t}addText(t){t!==""&&this.add(t)}startScope(t){this.openNode(t)}endScope(){this.closeNode()}__addSublanguage(t,n){const s=t.root;n&&(s.scope=`language:${n}`),this.add(s)}toHTML(){return new vN(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function ac(e){return e?typeof e=="string"?e:e.source:null}function R0(e){return ir("(?=",e,")")}function EN(e){return ir("(?:",e,")*")}function TN(e){return ir("(?:",e,")?")}function ir(...e){return e.map(n=>ac(n)).join("")}function yN(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Hf(...e){return"("+(yN(e).capture?"":"?:")+e.map(s=>ac(s)).join("|")+")"}function x0(e){return new RegExp(e.toString()+"|").exec("").length-1}function SN(e,t){const n=e&&e.exec(t);return n&&n.index===0}const AN=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Wf(e,{joinWith:t}){let n=0;return e.map(s=>{n+=1;const o=n;let a=ac(s),i="";for(;a.length>0;){const r=AN.exec(a);if(!r){i+=a;break}i+=a.substring(0,r.index),a=a.substring(r.index+r[0].length),r[0][0]==="\\"&&r[1]?i+="\\"+String(Number(r[1])+o):(i+=r[0],r[0]==="("&&n++)}return i}).map(s=>`(${s})`).join(t)}const IN=/\b\B/,$0="[a-zA-Z]\\w*",zf="[a-zA-Z_]\\w*",M0="\\b\\d+(\\.\\d+)?",L0="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",k0="\\b(0b[01]+)",CN="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",ON=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=ir(t,/.*\b/,e.binary,/\b.*/)),ci({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,s)=>{n.index!==0&&s.ignoreMatch()}},e)},oc={begin:"\\\\[\\s\\S]",relevance:0},NN={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[oc]},wN={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[oc]},RN={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Rd=function(e,t,n={}){const s=ci({scope:"comment",begin:e,end:t,contains:[]},n);s.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const o=Hf("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return s.contains.push({begin:ir(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),s},xN=Rd("//","$"),$N=Rd("/\\*","\\*/"),MN=Rd("#","$"),LN={scope:"number",begin:M0,relevance:0},kN={scope:"number",begin:L0,relevance:0},DN={scope:"number",begin:k0,relevance:0},PN={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[oc,{begin:/\[/,end:/\]/,relevance:0,contains:[oc]}]},BN={scope:"title",begin:$0,relevance:0},FN={scope:"title",begin:zf,relevance:0},UN={begin:"\\.\\s*"+zf,relevance:0},GN=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var Yc=Object.freeze({__proto__:null,APOS_STRING_MODE:NN,BACKSLASH_ESCAPE:oc,BINARY_NUMBER_MODE:DN,BINARY_NUMBER_RE:k0,COMMENT:Rd,C_BLOCK_COMMENT_MODE:$N,C_LINE_COMMENT_MODE:xN,C_NUMBER_MODE:kN,C_NUMBER_RE:L0,END_SAME_AS_BEGIN:GN,HASH_COMMENT_MODE:MN,IDENT_RE:$0,MATCH_NOTHING_RE:IN,METHOD_GUARD:UN,NUMBER_MODE:LN,NUMBER_RE:M0,PHRASAL_WORDS_MODE:RN,QUOTE_STRING_MODE:wN,REGEXP_MODE:PN,RE_STARTERS_RE:CN,SHEBANG:ON,TITLE_MODE:BN,UNDERSCORE_IDENT_RE:zf,UNDERSCORE_TITLE_MODE:FN});function VN(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function HN(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function WN(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=VN,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function zN(e,t){Array.isArray(e.illegal)&&(e.illegal=Hf(...e.illegal))}function jN(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function KN(e,t){e.relevance===void 0&&(e.relevance=1)}const YN=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(s=>{delete e[s]}),e.keywords=n.keywords,e.begin=ir(n.beforeMatch,R0(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},XN=["of","and","for","in","not","or","if","then","parent","list","value"],qN="keyword";function D0(e,t,n=qN){const s=Object.create(null);return typeof e=="string"?o(n,e.split(" ")):Array.isArray(e)?o(n,e):Object.keys(e).forEach(function(a){Object.assign(s,D0(e[a],t,a))}),s;function o(a,i){t&&(i=i.map(r=>r.toLowerCase())),i.forEach(function(r){const l=r.split("|");s[l[0]]=[a,ZN(l[0],l[1])]})}}function ZN(e,t){return t?Number(t):QN(e)?0:1}function QN(e){return XN.includes(e.toLowerCase())}const K_={},Ji=e=>{console.error(e)},Y_=(e,...t)=>{console.log(`WARN: ${e}`,...t)},br=(e,t)=>{K_[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),K_[`${e}/${t}`]=!0)},Qu=new Error;function P0(e,t,{key:n}){let s=0;const o=e[n],a={},i={};for(let r=1;r<=t.length;r++)i[r+s]=o[r],a[r+s]=!0,s+=x0(t[r-1]);e[n]=i,e[n]._emit=a,e[n]._multi=!0}function JN(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Ji("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Qu;if(typeof e.beginScope!="object"||e.beginScope===null)throw Ji("beginScope must be object"),Qu;P0(e,e.begin,{key:"beginScope"}),e.begin=Wf(e.begin,{joinWith:""})}}function ew(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Ji("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Qu;if(typeof e.endScope!="object"||e.endScope===null)throw Ji("endScope must be object"),Qu;P0(e,e.end,{key:"endScope"}),e.end=Wf(e.end,{joinWith:""})}}function tw(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function nw(e){tw(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),JN(e),ew(e)}function sw(e){function t(i,r){return new RegExp(ac(i),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(r?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(r,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,r]),this.matchAt+=x0(r)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const r=this.regexes.map(l=>l[1]);this.matcherRe=t(Wf(r,{joinWith:"|"}),!0),this.lastIndex=0}exec(r){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(r);if(!l)return null;const c=l.findIndex((d,m)=>m>0&&d!==void 0),u=this.matchIndexes[c];return l.splice(0,c),Object.assign(l,u)}}class s{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(r){if(this.multiRegexes[r])return this.multiRegexes[r];const l=new n;return this.rules.slice(r).forEach(([c,u])=>l.addRule(c,u)),l.compile(),this.multiRegexes[r]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(r,l){this.rules.push([r,l]),l.type==="begin"&&this.count++}exec(r){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let c=l.exec(r);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,c=u.exec(r)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function o(i){const r=new s;return i.contains.forEach(l=>r.addRule(l.begin,{rule:l,type:"begin"})),i.terminatorEnd&&r.addRule(i.terminatorEnd,{type:"end"}),i.illegal&&r.addRule(i.illegal,{type:"illegal"}),r}function a(i,r){const l=i;if(i.isCompiled)return l;[HN,jN,nw,YN].forEach(u=>u(i,r)),e.compilerExtensions.forEach(u=>u(i,r)),i.__beforeBegin=null,[WN,zN,KN].forEach(u=>u(i,r)),i.isCompiled=!0;let c=null;return typeof i.keywords=="object"&&i.keywords.$pattern&&(i.keywords=Object.assign({},i.keywords),c=i.keywords.$pattern,delete i.keywords.$pattern),c=c||/\w+/,i.keywords&&(i.keywords=D0(i.keywords,e.case_insensitive)),l.keywordPatternRe=t(c,!0),r&&(i.begin||(i.begin=/\B|\b/),l.beginRe=t(l.begin),!i.end&&!i.endsWithParent&&(i.end=/\B|\b/),i.end&&(l.endRe=t(l.end)),l.terminatorEnd=ac(l.end)||"",i.endsWithParent&&r.terminatorEnd&&(l.terminatorEnd+=(i.end?"|":"")+r.terminatorEnd)),i.illegal&&(l.illegalRe=t(i.illegal)),i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map(function(u){return aw(u==="self"?i:u)})),i.contains.forEach(function(u){a(u,l)}),i.starts&&a(i.starts,r),l.matcher=o(l),l}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=ci(e.classNameAliases||{}),a(e)}function B0(e){return e?e.endsWithParent||B0(e.starts):!1}function aw(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return ci(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:B0(e)?ci(e,{starts:e.starts?ci(e.starts):null}):Object.isFrozen(e)?ci(e):e}var ow="11.10.0";class iw extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const $p=w0,X_=ci,q_=Symbol("nomatch"),rw=7,F0=function(e){const t=Object.create(null),n=Object.create(null),s=[];let o=!0;const a="Could not find the language '{}', did you forget to load/include a language module?",i={disableAutodetect:!0,name:"Plain text",contains:[]};let r={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:bN};function l(z){return r.noHighlightRe.test(z)}function c(z){let Y=z.className+" ";Y+=z.parentNode?z.parentNode.className:"";const te=r.languageDetectRe.exec(Y);if(te){const Z=F(te[1]);return Z||(Y_(a.replace("{}",te[1])),Y_("Falling back to no-highlight mode for this block.",z)),Z?te[1]:"no-highlight"}return Y.split(/\s+/).find(Z=>l(Z)||F(Z))}function u(z,Y,te){let Z="",G="";typeof Y=="object"?(Z=z,te=Y.ignoreIllegals,G=Y.language):(br("10.7.0","highlight(lang, code, ...args) has been deprecated."),br("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),G=z,Z=Y),te===void 0&&(te=!0);const H={code:Z,language:G};U("before:highlight",H);const W=H.result?H.result:d(H.language,H.code,te);return W.code=H.code,U("after:highlight",W),W}function d(z,Y,te,Z){const G=Object.create(null);function H(De,Ue){return De.keywords[Ue]}function W(){if(!q.keywords){ie.addText(be);return}let De=0;q.keywordPatternRe.lastIndex=0;let Ue=q.keywordPatternRe.exec(be),de="";for(;Ue;){de+=be.substring(De,Ue.index);const Ce=at.case_insensitive?Ue[0].toLowerCase():Ue[0],Pe=H(q,Ce);if(Pe){const[Q,ne]=Pe;if(ie.addText(de),de="",G[Ce]=(G[Ce]||0)+1,G[Ce]<=rw&&(fe+=ne),Q.startsWith("_"))de+=Ue[0];else{const ue=at.classNameAliases[Q]||Q;ge(Ue[0],ue)}}else de+=Ue[0];De=q.keywordPatternRe.lastIndex,Ue=q.keywordPatternRe.exec(be)}de+=be.substring(De),ie.addText(de)}function J(){if(be==="")return;let De=null;if(typeof q.subLanguage=="string"){if(!t[q.subLanguage]){ie.addText(be);return}De=d(q.subLanguage,be,!0,ae[q.subLanguage]),ae[q.subLanguage]=De._top}else De=f(be,q.subLanguage.length?q.subLanguage:null);q.relevance>0&&(fe+=De.relevance),ie.__addSublanguage(De._emitter,De.language)}function ee(){q.subLanguage!=null?J():W(),be=""}function ge(De,Ue){De!==""&&(ie.startScope(Ue),ie.addText(De),ie.endScope())}function Ee(De,Ue){let de=1;const Ce=Ue.length-1;for(;de<=Ce;){if(!De._emit[de]){de++;continue}const Pe=at.classNameAliases[De[de]]||De[de],Q=Ue[de];Pe?ge(Q,Pe):(be=Q,W(),be=""),de++}}function le(De,Ue){return De.scope&&typeof De.scope=="string"&&ie.openNode(at.classNameAliases[De.scope]||De.scope),De.beginScope&&(De.beginScope._wrap?(ge(be,at.classNameAliases[De.beginScope._wrap]||De.beginScope._wrap),be=""):De.beginScope._multi&&(Ee(De.beginScope,Ue),be="")),q=Object.create(De,{parent:{value:q}}),q}function _e(De,Ue,de){let Ce=SN(De.endRe,de);if(Ce){if(De["on:end"]){const Pe=new W_(De);De["on:end"](Ue,Pe),Pe.isMatchIgnored&&(Ce=!1)}if(Ce){for(;De.endsParent&&De.parent;)De=De.parent;return De}}if(De.endsWithParent)return _e(De.parent,Ue,de)}function $e(De){return q.matcher.regexIndex===0?(be+=De[0],1):(ke=!0,0)}function He(De){const Ue=De[0],de=De.rule,Ce=new W_(de),Pe=[de.__beforeBegin,de["on:begin"]];for(const Q of Pe)if(Q&&(Q(De,Ce),Ce.isMatchIgnored))return $e(Ue);return de.skip?be+=Ue:(de.excludeBegin&&(be+=Ue),ee(),!de.returnBegin&&!de.excludeBegin&&(be=Ue)),le(de,De),de.returnBegin?0:Ue.length}function Je(De){const Ue=De[0],de=Y.substring(De.index),Ce=_e(q,De,de);if(!Ce)return q_;const Pe=q;q.endScope&&q.endScope._wrap?(ee(),ge(Ue,q.endScope._wrap)):q.endScope&&q.endScope._multi?(ee(),Ee(q.endScope,De)):Pe.skip?be+=Ue:(Pe.returnEnd||Pe.excludeEnd||(be+=Ue),ee(),Pe.excludeEnd&&(be=Ue));do q.scope&&ie.closeNode(),!q.skip&&!q.subLanguage&&(fe+=q.relevance),q=q.parent;while(q!==Ce.parent);return Ce.starts&&le(Ce.starts,De),Pe.returnEnd?0:Ue.length}function Xe(){const De=[];for(let Ue=q;Ue!==at;Ue=Ue.parent)Ue.scope&&De.unshift(Ue.scope);De.forEach(Ue=>ie.openNode(Ue))}let Qe={};function rt(De,Ue){const de=Ue&&Ue[0];if(be+=De,de==null)return ee(),0;if(Qe.type==="begin"&&Ue.type==="end"&&Qe.index===Ue.index&&de===""){if(be+=Y.slice(Ue.index,Ue.index+1),!o){const Ce=new Error(`0 width match regex (${z})`);throw Ce.languageName=z,Ce.badRule=Qe.rule,Ce}return 1}if(Qe=Ue,Ue.type==="begin")return He(Ue);if(Ue.type==="illegal"&&!te){const Ce=new Error('Illegal lexeme "'+de+'" for mode "'+(q.scope||"<unnamed>")+'"');throw Ce.mode=q,Ce}else if(Ue.type==="end"){const Ce=Je(Ue);if(Ce!==q_)return Ce}if(Ue.type==="illegal"&&de==="")return 1;if(Le>1e5&&Le>Ue.index*3)throw new Error("potential infinite loop, way more iterations than matches");return be+=de,de.length}const at=F(z);if(!at)throw Ji(a.replace("{}",z)),new Error('Unknown language: "'+z+'"');const Et=sw(at);let Lt="",q=Z||Et;const ae={},ie=new r.__emitter(r);Xe();let be="",fe=0,Se=0,Le=0,ke=!1;try{if(at.__emitTokens)at.__emitTokens(Y,ie);else{for(q.matcher.considerAll();;){Le++,ke?ke=!1:q.matcher.considerAll(),q.matcher.lastIndex=Se;const De=q.matcher.exec(Y);if(!De)break;const Ue=Y.substring(Se,De.index),de=rt(Ue,De);Se=De.index+de}rt(Y.substring(Se))}return ie.finalize(),Lt=ie.toHTML(),{language:z,value:Lt,relevance:fe,illegal:!1,_emitter:ie,_top:q}}catch(De){if(De.message&&De.message.includes("Illegal"))return{language:z,value:$p(Y),illegal:!0,relevance:0,_illegalBy:{message:De.message,index:Se,context:Y.slice(Se-100,Se+100),mode:De.mode,resultSoFar:Lt},_emitter:ie};if(o)return{language:z,value:$p(Y),illegal:!1,relevance:0,errorRaised:De,_emitter:ie,_top:q};throw De}}function m(z){const Y={value:$p(z),illegal:!1,relevance:0,_top:i,_emitter:new r.__emitter(r)};return Y._emitter.addText(z),Y}function f(z,Y){Y=Y||r.languages||Object.keys(t);const te=m(z),Z=Y.filter(F).filter(V).map(ee=>d(ee,z,!1));Z.unshift(te);const G=Z.sort((ee,ge)=>{if(ee.relevance!==ge.relevance)return ge.relevance-ee.relevance;if(ee.language&&ge.language){if(F(ee.language).supersetOf===ge.language)return 1;if(F(ge.language).supersetOf===ee.language)return-1}return 0}),[H,W]=G,J=H;return J.secondBest=W,J}function g(z,Y,te){const Z=Y&&n[Y]||te;z.classList.add("hljs"),z.classList.add(`language-${Z}`)}function T(z){let Y=null;const te=c(z);if(l(te))return;if(U("before:highlightElement",{el:z,language:te}),z.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",z);return}if(z.children.length>0&&(r.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(z)),r.throwUnescapedHTML))throw new iw("One of your code blocks includes unescaped HTML.",z.innerHTML);Y=z;const Z=Y.textContent,G=te?u(Z,{language:te,ignoreIllegals:!0}):f(Z);z.innerHTML=G.value,z.dataset.highlighted="yes",g(z,te,G.language),z.result={language:G.language,re:G.relevance,relevance:G.relevance},G.secondBest&&(z.secondBest={language:G.secondBest.language,relevance:G.secondBest.relevance}),U("after:highlightElement",{el:z,result:G,text:Z})}function S(z){r=X_(r,z)}const _=()=>{I(),br("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function E(){I(),br("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let b=!1;function I(){if(document.readyState==="loading"){b=!0;return}document.querySelectorAll(r.cssSelector).forEach(T)}function R(){b&&I()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",R,!1);function O(z,Y){let te=null;try{te=Y(e)}catch(Z){if(Ji("Language definition for '{}' could not be registered.".replace("{}",z)),o)Ji(Z);else throw Z;te=i}te.name||(te.name=z),t[z]=te,te.rawDefinition=Y.bind(null,e),te.aliases&&D(te.aliases,{languageName:z})}function x(z){delete t[z];for(const Y of Object.keys(n))n[Y]===z&&delete n[Y]}function L(){return Object.keys(t)}function F(z){return z=(z||"").toLowerCase(),t[z]||t[n[z]]}function D(z,{languageName:Y}){typeof z=="string"&&(z=[z]),z.forEach(te=>{n[te.toLowerCase()]=Y})}function V(z){const Y=F(z);return Y&&!Y.disableAutodetect}function B(z){z["before:highlightBlock"]&&!z["before:highlightElement"]&&(z["before:highlightElement"]=Y=>{z["before:highlightBlock"](Object.assign({block:Y.el},Y))}),z["after:highlightBlock"]&&!z["after:highlightElement"]&&(z["after:highlightElement"]=Y=>{z["after:highlightBlock"](Object.assign({block:Y.el},Y))})}function P(z){B(z),s.push(z)}function k(z){const Y=s.indexOf(z);Y!==-1&&s.splice(Y,1)}function U(z,Y){const te=z;s.forEach(function(Z){Z[te]&&Z[te](Y)})}function j(z){return br("10.7.0","highlightBlock will be removed entirely in v12.0"),br("10.7.0","Please use highlightElement now."),T(z)}Object.assign(e,{highlight:u,highlightAuto:f,highlightAll:I,highlightElement:T,highlightBlock:j,configure:S,initHighlighting:_,initHighlightingOnLoad:E,registerLanguage:O,unregisterLanguage:x,listLanguages:L,getLanguage:F,registerAliases:D,autoDetection:V,inherit:X_,addPlugin:P,removePlugin:k}),e.debugMode=function(){o=!1},e.safeMode=function(){o=!0},e.versionString=ow,e.regex={concat:ir,lookahead:R0,either:Hf,optional:TN,anyNumberOfTimes:EN};for(const z in Yc)typeof Yc[z]=="object"&&N0(Yc[z]);return Object.assign(e,Yc),e},Yr=F0({});Yr.newInstance=()=>F0({});var U0=Yr;Yr.HighlightJS=Yr;Yr.default=Yr;const Mp=Nf(U0);var Z_=yo({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(e){var t=X(e.language);ct(function(){return e.language},function(o){t.value=o});var n=C(function(){return e.autodetect||!t.value}),s=C(function(){return!n.value&&!Mp.getLanguage(t.value)});return{className:C(function(){return s.value?"":"hljs "+t.value}),highlightedCode:C(function(){var o;if(s.value)return console.warn('The language "'+t.value+'" you specified could not be found.'),e.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(n.value){var a=Mp.highlightAuto(e.code);return t.value=(o=a.language)!==null&&o!==void 0?o:"",a.value}return(a=Mp.highlight(e.code,{language:t.value,ignoreIllegals:e.ignoreIllegals})).value})}},render:function(){return yn("pre",{},[yn("code",{class:this.className,innerHTML:this.highlightedCode})])}}),lw={install:function(e){e.component("highlightjs",Z_)},component:Z_};function Lp(e){return e===0?!1:Array.isArray(e)&&e.length===0?!0:!e}function cw(e){return(...t)=>!e(...t)}function uw(e,t){return e===void 0&&(e="undefined"),e===null&&(e="null"),e===!1&&(e="false"),e.toString().toLowerCase().indexOf(t.trim())!==-1}function G0(e,t,n,s){return t?e.filter(o=>uw(s(o,n),t)).sort((o,a)=>s(o,n).length-s(a,n).length):e}function dw(e){return e.filter(t=>!t.$isLabel)}function kp(e,t){return n=>n.reduce((s,o)=>o[e]&&o[e].length?(s.push({$groupLabel:o[t],$isLabel:!0}),s.concat(o[e])):s,[])}function pw(e,t,n,s,o){return a=>a.map(i=>{if(!i[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const r=G0(i[n],e,t,o);return r.length?{[s]:i[s],[n]:r}:[]})}const Q_=(...e)=>t=>e.reduce((n,s)=>s(n),t);var hw={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,t){return Lp(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",t=e.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,t,this.label):G0(n,t,this.label,this.customLabel):n=this.groupValues?kp(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(cw(this.isSelected)):n,this.taggable&&t.length&&!this.isExistingOption(t)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:e}):n.unshift({isTag:!0,label:e})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(t=>this.customLabel(t,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(e,t,n){return Q_(pw(t,n,this.groupValues,this.groupLabel,this.customLabel),kp(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return Q_(kp(this.groupValues,this.groupLabel),dw)(e)},updateSearch(e){this.search=e},isExistingOption(e){return this.options?this.optionKeys.indexOf(e)>-1:!1},isSelected(e){const t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(Lp(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const t=this.customLabel(e,this.label);return Lp(t)?"":t},select(e,t){if(e.$isLabel&&this.groupSelect){this.selectGroup(e);return}if(!(this.blockKeys.indexOf(t)!==-1||this.disabled||e.$isDisabled||e.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(t==="Tab"&&!this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e)){t!=="Tab"&&this.removeElement(e);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const t=this.options.find(n=>n[this.groupLabel]===e.$groupLabel);if(t){if(this.wholeGroupSelected(t)){this.$emit("remove",t[this.groupValues],this.id);const n=this.trackBy?t[this.groupValues].map(o=>o[this.trackBy]):t[this.groupValues],s=this.internalValue.filter(o=>n.indexOf(this.trackBy?o[this.trackBy]:o)===-1);this.$emit("update:modelValue",s)}else{let n=t[this.groupValues].filter(s=>!(this.isOptionDisabled(s)||this.isSelected(s)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(t=>this.isSelected(t)||this.isOptionDisabled(t))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,t=!0){if(this.disabled||e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof e=="object"?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const s=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",s)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&t&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom;t>this.maxHeight||t>e||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}},mw={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight(e,t){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":t.$isLabel}];const n=this.options.find(s=>s[this.groupLabel]===t.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},V0={name:"vue-multiselect",mixins:[hw,mw],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0},required:{type:Boolean,default:!1}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const fw={ref:"tags",class:"multiselect__tags"},gw={class:"multiselect__tags-wrap"},_w={class:"multiselect__spinner"},vw={key:0},bw={class:"multiselect__option"},Ew={class:"multiselect__option"},Tw=Re("No elements found. Consider changing the search query."),yw={class:"multiselect__option"},Sw=Re("List is empty.");function Aw(e,t,n,s,o,a){return p(),$("div",{tabindex:e.searchable?-1:n.tabindex,class:[{"multiselect--active":e.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":a.isAbove,"multiselect--has-options-group":a.hasOptionGroup},"multiselect"],onFocus:t[14]||(t[14]=i=>e.activate()),onBlur:t[15]||(t[15]=i=>e.searchable?!1:e.deactivate()),onKeydown:[t[16]||(t[16]=kn(Fe(i=>e.pointerForward(),["self","prevent"]),["down"])),t[17]||(t[17]=kn(Fe(i=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:t[18]||(t[18]=kn(Fe(i=>e.addPointerElement(i),["stop","self"]),["enter","tab"])),onKeyup:t[19]||(t[19]=kn(i=>e.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+e.id},[We(e.$slots,"caret",{toggle:e.toggle},()=>[y("div",{onMousedown:t[1]||(t[1]=Fe(i=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),We(e.$slots,"clear",{search:e.search}),y("div",fw,[We(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:a.visibleValues,isOpen:e.isOpen},()=>[re(y("div",gw,[(p(!0),$(pe,null,Ne(a.visibleValues,(i,r)=>We(e.$slots,"tag",{option:i,search:e.search,remove:e.removeElement},()=>[(p(),$("span",{class:"multiselect__tag",key:r},[y("span",{textContent:A(e.getOptionLabel(i))},null,8,["textContent"]),y("i",{tabindex:"1",onKeypress:kn(Fe(l=>e.removeElement(i),["prevent"]),["enter"]),onMousedown:Fe(l=>e.removeElement(i),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[Jt,a.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>n.limit?We(e.$slots,"limit",{key:0},()=>[y("strong",{class:"multiselect__strong",textContent:A(n.limitText(e.internalValue.length-n.limit))},null,8,["textContent"])]):w("v-if",!0)]),y(qs,{name:"multiselect__loading"},{default:K(()=>[We(e.$slots,"loading",{},()=>[re(y("div",_w,null,512),[[Jt,n.loading]])])]),_:3}),e.searchable?(p(),$("input",{key:0,ref:"search",name:n.name,id:e.id,type:"text",autocomplete:"off",spellcheck:n.spellcheck,placeholder:e.placeholder,required:n.required,style:a.inputStyle,value:e.search,disabled:n.disabled,tabindex:n.tabindex,onInput:t[2]||(t[2]=i=>e.updateSearch(i.target.value)),onFocus:t[3]||(t[3]=Fe(i=>e.activate(),["prevent"])),onBlur:t[4]||(t[4]=Fe(i=>e.deactivate(),["prevent"])),onKeyup:t[5]||(t[5]=kn(i=>e.deactivate(),["esc"])),onKeydown:[t[6]||(t[6]=kn(Fe(i=>e.pointerForward(),["prevent"]),["down"])),t[7]||(t[7]=kn(Fe(i=>e.pointerBackward(),["prevent"]),["up"])),t[9]||(t[9]=kn(Fe(i=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:t[8]||(t[8]=kn(Fe(i=>e.addPointerElement(i),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,["name","id","spellcheck","placeholder","required","value","disabled","tabindex","aria-controls"])):w("v-if",!0),a.isSingleLabelVisible?(p(),$("span",{key:1,class:"multiselect__single",onMousedown:t[10]||(t[10]=Fe((...i)=>e.toggle&&e.toggle(...i),["prevent"]))},[We(e.$slots,"singleLabel",{option:a.singleValue},()=>[Re(A(e.currentOptionLabel),1)])],32)):w("v-if",!0),a.isPlaceholderVisible?(p(),$("span",{key:2,class:"multiselect__placeholder",onMousedown:t[11]||(t[11]=Fe((...i)=>e.toggle&&e.toggle(...i),["prevent"]))},[We(e.$slots,"placeholder",{},()=>[Re(A(e.placeholder),1)])],32)):w("v-if",!0)],512),y(qs,{name:"multiselect"},{default:K(()=>[re(y("div",{class:"multiselect__content-wrapper",onFocus:t[12]||(t[12]=(...i)=>e.activate&&e.activate(...i)),tabindex:"-1",onMousedown:t[13]||(t[13]=Fe(()=>{},["prevent"])),style:{maxHeight:e.optimizedHeight+"px"},ref:"list"},[y("ul",{class:"multiselect__content",style:a.contentStyle,role:"listbox",id:"listbox-"+e.id,"aria-multiselectable":e.multiple},[We(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(p(),$("li",vw,[y("span",bw,[We(e.$slots,"maxElements",{},()=>[Re("Maximum of "+A(e.max)+" options selected. First remove a selected option to select another.",1)])])])):w("v-if",!0),!e.max||e.internalValue.length<e.max?(p(!0),$(pe,{key:1},Ne(e.filteredOptions,(i,r)=>(p(),$("li",{class:"multiselect__element",key:r,"aria-selected":e.isSelected(i),id:e.id+"-"+r,role:i&&(i.$isLabel||i.$isDisabled)?null:"option"},[i&&(i.$isLabel||i.$isDisabled)?w("v-if",!0):(p(),$("span",{key:0,class:[e.optionHighlight(r,i),"multiselect__option"],onClick:Fe(l=>e.select(i),["stop"]),onMouseenter:Fe(l=>e.pointerSet(r),["self"]),"data-select":i&&i.isTag?e.tagPlaceholder:a.selectLabelText,"data-selected":a.selectedLabelText,"data-deselect":a.deselectLabelText},[We(e.$slots,"option",{option:i,search:e.search,index:r},()=>[y("span",null,A(e.getOptionLabel(i)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),i&&(i.$isLabel||i.$isDisabled)?(p(),$("span",{key:1,"data-select":e.groupSelect&&a.selectGroupLabelText,"data-deselect":e.groupSelect&&a.deselectGroupLabelText,class:[e.groupHighlight(r,i),"multiselect__option"],onMouseenter:Fe(l=>e.groupSelect&&e.pointerSet(r),["self"]),onMousedown:Fe(l=>e.selectGroup(i),["prevent"])},[We(e.$slots,"option",{option:i,search:e.search,index:r},()=>[y("span",null,A(e.getOptionLabel(i)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):w("v-if",!0)],8,["aria-selected","id","role"]))),128)):w("v-if",!0),re(y("li",null,[y("span",Ew,[We(e.$slots,"noResult",{search:e.search},()=>[Tw])])],512),[[Jt,n.showNoResults&&e.filteredOptions.length===0&&e.search&&!n.loading]]),re(y("li",null,[y("span",yw,[We(e.$slots,"noOptions",{},()=>[Sw])])],512),[[Jt,n.showNoOptions&&(e.options.length===0||a.hasOptionGroup===!0&&e.filteredOptions.length===0)&&!e.search&&!n.loading]]),We(e.$slots,"afterList")],12,["id","aria-multiselectable"])],36),[[Jt,e.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}V0.render=Aw;const Iw={props:{modelValue:{type:Boolean,default:!1},size:{type:String,default:""}},emits:["update:modelValue","input"],methods:{onClick(){this.$emit("update:modelValue",!this.modelValue),this.$emit("input",!this.modelValue)}}},Cw=["aria-checked"];function Ow(e,t,n,s,o,a){return p(),v("button",{type:"button",class:se(["toggle-button p-0",{active:n.modelValue,small:n.size==="small"}]),role:"switch","aria-checked":n.modelValue.toString(),onClick:t[0]||(t[0]=(...i)=>a.onClick&&a.onClick(...i))},[h("span",{"aria-hidden":"true",class:se({active:n.modelValue})},null,2)],10,Cw)}const Nw=Ae(Iw,[["render",Ow],["__scopeId","data-v-9c141475"]]),ww={mixins:[jo],props:{items:{type:Array,default:()=>[]}},computed:{classObject(){return"w-full"},activeIndex(){return this.items.findIndex(e=>e.route===this.$route.name)}},methods:{isActive(e){return this.items.indexOf(e)===this.activeIndex},isOver(e){return this.items.indexOf(e)<this.activeIndex}}},Rw={class:"flex items-center"},xw={class:"text-slate-800 dark:text-slate-100 text-base font-medium pl-6 overflow-hidden whitespace-nowrap mb-1.5 text-ellipsis leading-tight"},$w={key:0,class:"ml-1 text-green-500 dark:text-green-500"},Mw={class:"step"},Lw={class:"pl-6 m-0 text-sm text-slate-600 dark:text-slate-300"};function kw(e,t,n,s,o,a){const i=M("fluent-icon");return p(),$(t0,{name:"wizard-items",tag:"div",class:se(["wizard-box",a.classObject])},{default:K(()=>[(p(!0),v(pe,null,Ne(n.items,r=>(p(),v("div",{key:r.route,class:se(["item",{active:a.isActive(r),over:a.isOver(r)}])},[h("div",Rw,[h("h3",xw,A(r.title),1),a.isOver(r)?(p(),v("span",$w,[y(i,{icon:"checkmark"})])):w("",!0)]),h("span",Mw,A(n.items.indexOf(r)+1),1),h("p",Lw,A(r.body),1)],2))),128))]),_:1},8,["class"])}const Dw=Ae(ww,[["render",kw],["__scopeId","data-v-7cd546ca"]]),Pw=["top","right","bottom","left"],J_=["start","end"],ev=Pw.reduce((e,t)=>e.concat(t,t+"-"+J_[0],t+"-"+J_[1]),[]),Ki=Math.min,Wi=Math.max,Bw={left:"right",right:"left",bottom:"top",top:"bottom"},Fw={start:"end",end:"start"};function km(e,t,n){return Wi(e,Ki(t,n))}function rr(e,t){return typeof e=="function"?e(t):e}function bo(e){return e.split("-")[0]}function Ka(e){return e.split("-")[1]}function H0(e){return e==="x"?"y":"x"}function jf(e){return e==="y"?"height":"width"}function or(e){return["top","bottom"].includes(bo(e))?"y":"x"}function Kf(e){return H0(or(e))}function W0(e,t,n){n===void 0&&(n=!1);const s=Ka(e),o=Kf(e),a=jf(o);let i=o==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=ed(i)),[i,ed(i)]}function Uw(e){const t=ed(e);return[Ju(e),t,Ju(t)]}function Ju(e){return e.replace(/start|end/g,t=>Fw[t])}function Gw(e,t,n){const s=["left","right"],o=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:s:t?s:o;case"left":case"right":return t?a:i;default:return[]}}function Vw(e,t,n,s){const o=Ka(e);let a=Gw(bo(e),n==="start",s);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(Ju)))),a}function ed(e){return e.replace(/left|right|bottom|top/g,t=>Bw[t])}function Hw(e){return{top:0,right:0,bottom:0,left:0,...e}}function z0(e){return typeof e!="number"?Hw(e):{top:e,right:e,bottom:e,left:e}}function Wl(e){const{x:t,y:n,width:s,height:o}=e;return{width:s,height:o,top:n,left:t,right:t+s,bottom:n+o,x:t,y:n}}function tv(e,t,n){let{reference:s,floating:o}=e;const a=or(t),i=Kf(t),r=jf(i),l=bo(t),c=a==="y",u=s.x+s.width/2-o.width/2,d=s.y+s.height/2-o.height/2,m=s[r]/2-o[r]/2;let f;switch(l){case"top":f={x:u,y:s.y-o.height};break;case"bottom":f={x:u,y:s.y+s.height};break;case"right":f={x:s.x+s.width,y:d};break;case"left":f={x:s.x-o.width,y:d};break;default:f={x:s.x,y:s.y}}switch(Ka(t)){case"start":f[i]-=m*(n&&c?-1:1);break;case"end":f[i]+=m*(n&&c?-1:1);break}return f}const Ww=async(e,t,n)=>{const{placement:s="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,r=a.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=tv(c,s,l),m=s,f={},g=0;for(let T=0;T<r.length;T++){const{name:S,fn:_}=r[T],{x:E,y:b,data:I,reset:R}=await _({x:u,y:d,initialPlacement:s,placement:m,strategy:o,middlewareData:f,rects:c,platform:i,elements:{reference:e,floating:t}});u=E??u,d=b??d,f={...f,[S]:{...f[S],...I}},R&&g<=50&&(g++,typeof R=="object"&&(R.placement&&(m=R.placement),R.rects&&(c=R.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):R.rects),{x:u,y:d}=tv(c,m,l)),T=-1)}return{x:u,y:d,placement:m,strategy:o,middlewareData:f}};async function xd(e,t){var n;t===void 0&&(t={});const{x:s,y:o,platform:a,rects:i,elements:r,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:m=!1,padding:f=0}=rr(t,e),g=z0(f),S=r[m?d==="floating"?"reference":"floating":d],_=Wl(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(S)))==null||n?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(r.floating)),boundary:c,rootBoundary:u,strategy:l})),E=d==="floating"?{x:s,y:o,width:i.floating.width,height:i.floating.height}:i.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(r.floating)),I=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},R=Wl(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:r,rect:E,offsetParent:b,strategy:l}):E);return{top:(_.top-R.top+g.top)/I.y,bottom:(R.bottom-_.bottom+g.bottom)/I.y,left:(_.left-R.left+g.left)/I.x,right:(R.right-_.right+g.right)/I.x}}const zw=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:o,rects:a,platform:i,elements:r,middlewareData:l}=t,{element:c,padding:u=0}=rr(e,t)||{};if(c==null)return{};const d=z0(u),m={x:n,y:s},f=Kf(o),g=jf(f),T=await i.getDimensions(c),S=f==="y",_=S?"top":"left",E=S?"bottom":"right",b=S?"clientHeight":"clientWidth",I=a.reference[g]+a.reference[f]-m[f]-a.floating[g],R=m[f]-a.reference[f],O=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let x=O?O[b]:0;(!x||!await(i.isElement==null?void 0:i.isElement(O)))&&(x=r.floating[b]||a.floating[g]);const L=I/2-R/2,F=x/2-T[g]/2-1,D=Ki(d[_],F),V=Ki(d[E],F),B=D,P=x-T[g]-V,k=x/2-T[g]/2+L,U=km(B,k,P),j=!l.arrow&&Ka(o)!=null&&k!==U&&a.reference[g]/2-(k<B?D:V)-T[g]/2<0,z=j?k<B?k-B:k-P:0;return{[f]:m[f]+z,data:{[f]:U,centerOffset:k-U-z,...j&&{alignmentOffset:z}},reset:j}}});function jw(e,t,n){return(e?[...n.filter(o=>Ka(o)===e),...n.filter(o=>Ka(o)!==e)]:n.filter(o=>bo(o)===o)).filter(o=>e?Ka(o)===e||(t?Ju(o)!==o:!1):!0)}const Kw=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,s,o;const{rects:a,middlewareData:i,placement:r,platform:l,elements:c}=t,{crossAxis:u=!1,alignment:d,allowedPlacements:m=ev,autoAlignment:f=!0,...g}=rr(e,t),T=d!==void 0||m===ev?jw(d||null,f,m):m,S=await xd(t,g),_=((n=i.autoPlacement)==null?void 0:n.index)||0,E=T[_];if(E==null)return{};const b=W0(E,a,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(r!==E)return{reset:{placement:T[0]}};const I=[S[bo(E)],S[b[0]],S[b[1]]],R=[...((s=i.autoPlacement)==null?void 0:s.overflows)||[],{placement:E,overflows:I}],O=T[_+1];if(O)return{data:{index:_+1,overflows:R},reset:{placement:O}};const x=R.map(D=>{const V=Ka(D.placement);return[D.placement,V&&u?D.overflows.slice(0,2).reduce((B,P)=>B+P,0):D.overflows[0],D.overflows]}).sort((D,V)=>D[1]-V[1]),F=((o=x.filter(D=>D[2].slice(0,Ka(D[0])?2:3).every(V=>V<=0))[0])==null?void 0:o[0])||x[0][0];return F!==r?{data:{index:_+1,overflows:R},reset:{placement:F}}:{}}}},Yw=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:o,middlewareData:a,rects:i,initialPlacement:r,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:T=!0,...S}=rr(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const _=bo(o),E=or(r),b=bo(r)===r,I=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=m||(b||!T?[ed(r)]:Uw(r)),O=g!=="none";!m&&O&&R.push(...Vw(r,T,g,I));const x=[r,...R],L=await xd(t,S),F=[];let D=((s=a.flip)==null?void 0:s.overflows)||[];if(u&&F.push(L[_]),d){const k=W0(o,i,I);F.push(L[k[0]],L[k[1]])}if(D=[...D,{placement:o,overflows:F}],!F.every(k=>k<=0)){var V,B;const k=(((V=a.flip)==null?void 0:V.index)||0)+1,U=x[k];if(U)return{data:{index:k,overflows:D},reset:{placement:U}};let j=(B=D.filter(z=>z.overflows[0]<=0).sort((z,Y)=>z.overflows[1]-Y.overflows[1])[0])==null?void 0:B.placement;if(!j)switch(f){case"bestFit":{var P;const z=(P=D.filter(Y=>{if(O){const te=or(Y.placement);return te===E||te==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(te=>te>0).reduce((te,Z)=>te+Z,0)]).sort((Y,te)=>Y[1]-te[1])[0])==null?void 0:P[0];z&&(j=z);break}case"initialPlacement":j=r;break}if(o!==j)return{reset:{placement:j}}}return{}}}};async function Xw(e,t){const{placement:n,platform:s,elements:o}=e,a=await(s.isRTL==null?void 0:s.isRTL(o.floating)),i=bo(n),r=Ka(n),l=or(n)==="y",c=["left","top"].includes(i)?-1:1,u=a&&l?-1:1,d=rr(t,e);let{mainAxis:m,crossAxis:f,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return r&&typeof g=="number"&&(f=r==="end"?g*-1:g),l?{x:f*u,y:m*c}:{x:m*c,y:f*u}}const qw=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:o,y:a,placement:i,middlewareData:r}=t,l=await Xw(t,e);return i===((n=r.offset)==null?void 0:n.placement)&&(s=r.arrow)!=null&&s.alignmentOffset?{}:{x:o+l.x,y:a+l.y,data:{...l,placement:i}}}}},Zw=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:r={fn:S=>{let{x:_,y:E}=S;return{x:_,y:E}}},...l}=rr(e,t),c={x:n,y:s},u=await xd(t,l),d=or(bo(o)),m=H0(d);let f=c[m],g=c[d];if(a){const S=m==="y"?"top":"left",_=m==="y"?"bottom":"right",E=f+u[S],b=f-u[_];f=km(E,f,b)}if(i){const S=d==="y"?"top":"left",_=d==="y"?"bottom":"right",E=g+u[S],b=g-u[_];g=km(E,g,b)}const T=r.fn({...t,[m]:f,[d]:g});return{...T,data:{x:T.x-n,y:T.y-s}}}}},Qw=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:s,platform:o,elements:a}=t,{apply:i=()=>{},...r}=rr(e,t),l=await xd(t,r),c=bo(n),u=Ka(n),d=or(n)==="y",{width:m,height:f}=s.floating;let g,T;c==="top"||c==="bottom"?(g=c,T=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(T=c,g=u==="end"?"top":"bottom");const S=f-l.top-l.bottom,_=m-l.left-l.right,E=Ki(f-l[g],S),b=Ki(m-l[T],_),I=!t.middlewareData.shift;let R=E,O=b;if(d?O=u||I?Ki(b,_):_:R=u||I?Ki(E,S):S,I&&!u){const L=Wi(l.left,0),F=Wi(l.right,0),D=Wi(l.top,0),V=Wi(l.bottom,0);d?O=m-2*(L!==0||F!==0?L+F:Wi(l.left,l.right)):R=f-2*(D!==0||V!==0?D+V:Wi(l.top,l.bottom))}await i({...t,availableWidth:O,availableHeight:R});const x=await o.getDimensions(a.floating);return m!==x.width||f!==x.height?{reset:{rects:!0}}:{}}}};function Oa(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ho(e){return Oa(e).getComputedStyle(e)}const nv=Math.min,zl=Math.max,td=Math.round;function j0(e){const t=ho(e);let n=parseFloat(t.width),s=parseFloat(t.height);const o=e.offsetWidth,a=e.offsetHeight,i=td(n)!==o||td(s)!==a;return i&&(n=o,s=a),{width:n,height:s,fallback:i}}function Ti(e){return Y0(e)?(e.nodeName||"").toLowerCase():""}let Xc;function K0(){if(Xc)return Xc;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Xc=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Xc):navigator.userAgent}function mo(e){return e instanceof Oa(e).HTMLElement}function vi(e){return e instanceof Oa(e).Element}function Y0(e){return e instanceof Oa(e).Node}function sv(e){return typeof ShadowRoot>"u"?!1:e instanceof Oa(e).ShadowRoot||e instanceof ShadowRoot}function $d(e){const{overflow:t,overflowX:n,overflowY:s,display:o}=ho(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(o)}function Jw(e){return["table","td","th"].includes(Ti(e))}function Dm(e){const t=/firefox/i.test(K0()),n=ho(e),s=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!s&&s!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(o=>n.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const a=n.contain;return a!=null&&a.includes(o)})}function X0(){return!/^((?!chrome|android).)*safari/i.test(K0())}function Yf(e){return["html","body","#document"].includes(Ti(e))}function q0(e){return vi(e)?e:e.contextElement}const Z0={x:1,y:1};function Gr(e){const t=q0(e);if(!mo(t))return Z0;const n=t.getBoundingClientRect(),{width:s,height:o,fallback:a}=j0(t);let i=(a?td(n.width):n.width)/s,r=(a?td(n.height):n.height)/o;return i&&Number.isFinite(i)||(i=1),r&&Number.isFinite(r)||(r=1),{x:i,y:r}}function ic(e,t,n,s){var o,a;t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=q0(e);let l=Z0;t&&(s?vi(s)&&(l=Gr(s)):l=Gr(e));const c=r?Oa(r):window,u=!X0()&&n;let d=(i.left+(u&&((o=c.visualViewport)==null?void 0:o.offsetLeft)||0))/l.x,m=(i.top+(u&&((a=c.visualViewport)==null?void 0:a.offsetTop)||0))/l.y,f=i.width/l.x,g=i.height/l.y;if(r){const T=Oa(r),S=s&&vi(s)?Oa(s):s;let _=T.frameElement;for(;_&&s&&S!==T;){const E=Gr(_),b=_.getBoundingClientRect(),I=getComputedStyle(_);b.x+=(_.clientLeft+parseFloat(I.paddingLeft))*E.x,b.y+=(_.clientTop+parseFloat(I.paddingTop))*E.y,d*=E.x,m*=E.y,f*=E.x,g*=E.y,d+=b.x,m+=b.y,_=Oa(_).frameElement}}return{width:f,height:g,top:m,right:d+f,bottom:m+g,left:d,x:d,y:m}}function bi(e){return((Y0(e)?e.ownerDocument:e.document)||window.document).documentElement}function Md(e){return vi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Q0(e){return ic(bi(e)).left+Md(e).scrollLeft}function rc(e){if(Ti(e)==="html")return e;const t=e.assignedSlot||e.parentNode||sv(e)&&e.host||bi(e);return sv(t)?t.host:t}function J0(e){const t=rc(e);return Yf(t)?t.ownerDocument.body:mo(t)&&$d(t)?t:J0(t)}function nd(e,t){var n;t===void 0&&(t=[]);const s=J0(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),a=Oa(s);return o?t.concat(a,a.visualViewport||[],$d(s)?s:[]):t.concat(s,nd(s))}function av(e,t,n){return t==="viewport"?Wl(function(s,o){const a=Oa(s),i=bi(s),r=a.visualViewport;let l=i.clientWidth,c=i.clientHeight,u=0,d=0;if(r){l=r.width,c=r.height;const m=X0();(m||!m&&o==="fixed")&&(u=r.offsetLeft,d=r.offsetTop)}return{width:l,height:c,x:u,y:d}}(e,n)):vi(t)?Wl(function(s,o){const a=ic(s,!0,o==="fixed"),i=a.top+s.clientTop,r=a.left+s.clientLeft,l=mo(s)?Gr(s):{x:1,y:1};return{width:s.clientWidth*l.x,height:s.clientHeight*l.y,x:r*l.x,y:i*l.y}}(t,n)):Wl(function(s){const o=bi(s),a=Md(s),i=s.ownerDocument.body,r=zl(o.scrollWidth,o.clientWidth,i.scrollWidth,i.clientWidth),l=zl(o.scrollHeight,o.clientHeight,i.scrollHeight,i.clientHeight);let c=-a.scrollLeft+Q0(s);const u=-a.scrollTop;return ho(i).direction==="rtl"&&(c+=zl(o.clientWidth,i.clientWidth)-r),{width:r,height:l,x:c,y:u}}(bi(e)))}function ov(e){return mo(e)&&ho(e).position!=="fixed"?e.offsetParent:null}function iv(e){const t=Oa(e);let n=ov(e);for(;n&&Jw(n)&&ho(n).position==="static";)n=ov(n);return n&&(Ti(n)==="html"||Ti(n)==="body"&&ho(n).position==="static"&&!Dm(n))?t:n||function(s){let o=rc(s);for(;mo(o)&&!Yf(o);){if(Dm(o))return o;o=rc(o)}return null}(e)||t}function eR(e,t,n){const s=mo(t),o=bi(t),a=ic(e,!0,n==="fixed",t);let i={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if(s||!s&&n!=="fixed")if((Ti(t)!=="body"||$d(o))&&(i=Md(t)),mo(t)){const l=ic(t,!0);r.x=l.x+t.clientLeft,r.y=l.y+t.clientTop}else o&&(r.x=Q0(o));return{x:a.left+i.scrollLeft-r.x,y:a.top+i.scrollTop-r.y,width:a.width,height:a.height}}const tR={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:s,strategy:o}=e;const a=n==="clippingAncestors"?function(c,u){const d=u.get(c);if(d)return d;let m=nd(c).filter(S=>vi(S)&&Ti(S)!=="body"),f=null;const g=ho(c).position==="fixed";let T=g?rc(c):c;for(;vi(T)&&!Yf(T);){const S=ho(T),_=Dm(T);(g?_||f:_||S.position!=="static"||!f||!["absolute","fixed"].includes(f.position))?f=S:m=m.filter(E=>E!==T),T=rc(T)}return u.set(c,m),m}(t,this._c):[].concat(n),i=[...a,s],r=i[0],l=i.reduce((c,u)=>{const d=av(t,u,o);return c.top=zl(d.top,c.top),c.right=nv(d.right,c.right),c.bottom=nv(d.bottom,c.bottom),c.left=zl(d.left,c.left),c},av(t,r,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:s}=e;const o=mo(n),a=bi(n);if(n===a)return t;let i={scrollLeft:0,scrollTop:0},r={x:1,y:1};const l={x:0,y:0};if((o||!o&&s!=="fixed")&&((Ti(n)!=="body"||$d(a))&&(i=Md(n)),mo(n))){const c=ic(n);r=Gr(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:t.width*r.x,height:t.height*r.y,x:t.x*r.x-i.scrollLeft*r.x+l.x,y:t.y*r.y-i.scrollTop*r.y+l.y}},isElement:vi,getDimensions:function(e){return mo(e)?j0(e):e.getBoundingClientRect()},getOffsetParent:iv,getDocumentElement:bi,getScale:Gr,async getElementRects(e){let{reference:t,floating:n,strategy:s}=e;const o=this.getOffsetParent||iv,a=this.getDimensions;return{reference:eR(t,await o(n),s),floating:{x:0,y:0,...await a(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>ho(e).direction==="rtl"},nR=(e,t,n)=>{const s=new Map,o={platform:tR,...n},a={...o.platform,_c:s};return Ww(e,t,{...o,platform:a})};function eT(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]=="object"&&e[n]?eT(e[n],t[n]):e[n]=t[n])}const Ya={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:e=>[...e,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function lc(e,t){let n=Ya.themes[e]||{},s;do s=n[t],typeof s>"u"?n.$extend?n=Ya.themes[n.$extend]||{}:(n=null,s=Ya[t]):n=null;while(n);return s}function sR(e){const t=[e];let n=Ya.themes[e]||{};do n.$extend&&!n.$resetCss?(t.push(n.$extend),n=Ya.themes[n.$extend]||{}):n=null;while(n);return t.map(s=>`v-popper--theme-${s}`)}function rv(e){const t=[e];let n=Ya.themes[e]||{};do n.$extend?(t.push(n.$extend),n=Ya.themes[n.$extend]||{}):n=null;while(n);return t}let Xr=!1;if(typeof window<"u"){Xr=!1;try{const e=Object.defineProperty({},"passive",{get(){Xr=!0}});window.addEventListener("test",null,e)}catch{}}let tT=!1;typeof window<"u"&&typeof navigator<"u"&&(tT=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const nT=["auto","top","bottom","left","right"].reduce((e,t)=>e.concat([t,`${t}-start`,`${t}-end`]),[]),lv={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},cv={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function uv(e,t){const n=e.indexOf(t);n!==-1&&e.splice(n,1)}function Dp(){return new Promise(e=>requestAnimationFrame(()=>{requestAnimationFrame(e)}))}const za=[];let ki=null;const dv={};function pv(e){let t=dv[e];return t||(t=dv[e]=[]),t}let Pm=function(){};typeof window<"u"&&(Pm=window.Element);function an(e){return function(t){return lc(t.theme,e)}}const Pp="__floating-vue__popper",sT=()=>yo({name:"VPopper",provide(){return{[Pp]:{parentPopper:this}}},inject:{[Pp]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:an("disabled")},positioningDisabled:{type:Boolean,default:an("positioningDisabled")},placement:{type:String,default:an("placement"),validator:e=>nT.includes(e)},delay:{type:[String,Number,Object],default:an("delay")},distance:{type:[Number,String],default:an("distance")},skidding:{type:[Number,String],default:an("skidding")},triggers:{type:Array,default:an("triggers")},showTriggers:{type:[Array,Function],default:an("showTriggers")},hideTriggers:{type:[Array,Function],default:an("hideTriggers")},popperTriggers:{type:Array,default:an("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:an("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:an("popperHideTriggers")},container:{type:[String,Object,Pm,Boolean],default:an("container")},boundary:{type:[String,Pm],default:an("boundary")},strategy:{type:String,validator:e=>["absolute","fixed"].includes(e),default:an("strategy")},autoHide:{type:[Boolean,Function],default:an("autoHide")},handleResize:{type:Boolean,default:an("handleResize")},instantMove:{type:Boolean,default:an("instantMove")},eagerMount:{type:Boolean,default:an("eagerMount")},popperClass:{type:[String,Array,Object],default:an("popperClass")},computeTransformOrigin:{type:Boolean,default:an("computeTransformOrigin")},autoMinSize:{type:Boolean,default:an("autoMinSize")},autoSize:{type:[Boolean,String],default:an("autoSize")},autoMaxSize:{type:Boolean,default:an("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:an("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:an("preventOverflow")},overflowPadding:{type:[Number,String],default:an("overflowPadding")},arrowPadding:{type:[Number,String],default:an("arrowPadding")},arrowOverflow:{type:Boolean,default:an("arrowOverflow")},flip:{type:Boolean,default:an("flip")},shift:{type:Boolean,default:an("shift")},shiftCrossAxis:{type:Boolean,default:an("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:an("noAutoFocus")},disposeTimeout:{type:Number,default:an("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(e=>e.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var e;return(e=this[Pp])==null?void 0:e.parentPopper},hasPopperShowTriggerHover(){var e,t;return((e=this.popperTriggers)==null?void 0:e.includes("hover"))||((t=this.popperShowTriggers)==null?void 0:t.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(e){e?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((e,t)=>(e[t]="$_computePosition",e),{})},created(){this.autoMinSize&&console.warn('[floating-vue] `autoMinSize` option is deprecated. Use `autoSize="min"` instead.'),this.autoMaxSize&&console.warn("[floating-vue] `autoMaxSize` option is deprecated. Use `autoBoundaryMaxSize` instead.")},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:e=null,skipDelay:t=!1,force:n=!1}={}){var s,o;(s=this.parentPopper)!=null&&s.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(n||!this.disabled)&&(((o=this.parentPopper)==null?void 0:o.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(e,t),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:e=null,skipDelay:t=!1}={}){var n;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:t}),this.parentPopper.lockedChild=null)},1e3));return}((n=this.parentPopper)==null?void 0:n.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(e,t),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var e;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((e=this.referenceNode)==null?void 0:e.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(t=>t.nodeType===t.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const e={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&e.middleware.push(qw({mainAxis:this.distance,crossAxis:this.skidding}));const t=this.placement.startsWith("auto");if(t?e.middleware.push(Kw({alignment:this.placement.split("-")[1]??""})):e.placement=this.placement,this.preventOverflow&&(this.shift&&e.middleware.push(Zw({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!t&&this.flip&&e.middleware.push(Yw({padding:this.overflowPadding,boundary:this.boundary}))),e.middleware.push(zw({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&e.middleware.push({name:"arrowOverflow",fn:({placement:s,rects:o,middlewareData:a})=>{let i;const{centerOffset:r}=a.arrow;return s.startsWith("top")||s.startsWith("bottom")?i=Math.abs(r)>o.reference.width/2:i=Math.abs(r)>o.reference.height/2,{data:{overflow:i}}}}),this.autoMinSize||this.autoSize){const s=this.autoSize?this.autoSize:this.autoMinSize?"min":null;e.middleware.push({name:"autoSize",fn:({rects:o,placement:a,middlewareData:i})=>{var r;if((r=i.autoSize)!=null&&r.skip)return{};let l,c;return a.startsWith("top")||a.startsWith("bottom")?l=o.reference.width:c=o.reference.height,this.$_innerNode.style[s==="min"?"minWidth":s==="max"?"maxWidth":"width"]=l!=null?`${l}px`:null,this.$_innerNode.style[s==="min"?"minHeight":s==="max"?"maxHeight":"height"]=c!=null?`${c}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,e.middleware.push(Qw({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:s,availableHeight:o})=>{this.$_innerNode.style.maxWidth=s!=null?`${s}px`:null,this.$_innerNode.style.maxHeight=o!=null?`${o}px`:null}})));const n=await nR(this.$_referenceNode,this.$_popperNode,e);Object.assign(this.result,{x:n.x,y:n.y,placement:n.placement,strategy:n.strategy,arrow:{...n.middlewareData.arrow,...n.middlewareData.arrowOverflow}})},$_scheduleShow(e,t=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),ki&&this.instantMove&&ki.instantMove&&ki!==this.parentPopper){ki.$_applyHide(!0),this.$_applyShow(!0);return}t?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(e,t=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(ki=this),t?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(e){const t=this.delay;return parseInt(t&&t[e]||t||0)},async $_applyShow(e=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=e,!this.isShown&&(this.$_ensureTeleport(),await Dp(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...nd(this.$_referenceNode),...nd(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const t=this.$_referenceNode.getBoundingClientRect(),n=this.$_popperNode.querySelector(".v-popper__wrapper"),s=n.parentNode.getBoundingClientRect(),o=t.x+t.width/2-(s.left+n.offsetLeft),a=t.y+t.height/2-(s.top+n.offsetTop);this.result.transformOrigin=`${o}px ${a}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const e=this.showGroup;if(e){let t;for(let n=0;n<za.length;n++)t=za[n],t.showGroup!==e&&(t.hide(),t.$emit("close-group"))}za.push(this),document.body.classList.add("v-popper--some-open");for(const t of rv(this.theme))pv(t).push(this),document.body.classList.add(`v-popper--some-open--${t}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await Dp(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(e=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=e,uv(za,this),za.length===0&&document.body.classList.remove("v-popper--some-open");for(const n of rv(this.theme)){const s=pv(n);uv(s,this),s.length===0&&document.body.classList.remove(`v-popper--some-open--${n}`)}ki===this&&(ki=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const t=this.disposeTimeout;t!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},t)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await Dp(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let e=this.container;if(typeof e=="string"?e=window.document.querySelector(e):e===!1&&(e=this.$_targetNodes[0].parentNode),!e)throw new Error("No container for popover: "+this.container);e.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const e=n=>{this.isShown&&!this.$_hideInProgress||(n.usedByTooltip=!0,!this.$_preventShow&&this.show({event:n}))};this.$_registerTriggerListeners(this.$_targetNodes,lv,this.triggers,this.showTriggers,e),this.$_registerTriggerListeners([this.$_popperNode],lv,this.popperTriggers,this.popperShowTriggers,e);const t=n=>{n.usedByTooltip||this.hide({event:n})};this.$_registerTriggerListeners(this.$_targetNodes,cv,this.triggers,this.hideTriggers,t),this.$_registerTriggerListeners([this.$_popperNode],cv,this.popperTriggers,this.popperHideTriggers,t)},$_registerEventListeners(e,t,n){this.$_events.push({targetNodes:e,eventType:t,handler:n}),e.forEach(s=>s.addEventListener(t,n,Xr?{passive:!0}:void 0))},$_registerTriggerListeners(e,t,n,s,o){let a=n;s!=null&&(a=typeof s=="function"?s(a):s),a.forEach(i=>{const r=t[i];r&&this.$_registerEventListeners(e,r,o)})},$_removeEventListeners(e){const t=[];this.$_events.forEach(n=>{const{targetNodes:s,eventType:o,handler:a}=n;!e||e===o?s.forEach(i=>i.removeEventListener(o,a)):t.push(n)}),this.$_events=t},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(e,t=!1){this.$_showFrameLocked||(this.hide({event:e}),e.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),t&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(e,t){for(const n of this.$_targetNodes){const s=n.getAttribute(e);s&&(n.removeAttribute(e),n.setAttribute(t,s))}},$_applyAttrsToTarget(e){for(const t of this.$_targetNodes)for(const n in e){const s=e[n];s==null?t.removeAttribute(n):t.setAttribute(n,s)}},$_updateParentShownChildren(e){let t=this.parentPopper;for(;t;)e?t.shownChildren.add(this.randomId):(t.shownChildren.delete(this.randomId),t.pendingHide&&t.hide()),t=t.parentPopper},$_isAimingPopper(){const e=this.$_referenceNode.getBoundingClientRect();if(jl>=e.left&&jl<=e.right&&Kl>=e.top&&Kl<=e.bottom){const t=this.$_popperNode.getBoundingClientRect(),n=jl-si,s=Kl-ai,o=t.left+t.width/2-si+(t.top+t.height/2)-ai+t.width+t.height,a=si+n*o,i=ai+s*o;return qc(si,ai,a,i,t.left,t.top,t.left,t.bottom)||qc(si,ai,a,i,t.left,t.top,t.right,t.top)||qc(si,ai,a,i,t.right,t.top,t.right,t.bottom)||qc(si,ai,a,i,t.left,t.bottom,t.right,t.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(tT){const e=Xr?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",t=>hv(t,!0),e),document.addEventListener("touchend",t=>mv(t,!0),e)}else window.addEventListener("mousedown",e=>hv(e,!1),!0),window.addEventListener("click",e=>mv(e,!1),!0);window.addEventListener("resize",oR)}function hv(e,t){if(Ya.autoHideOnMousedown)aT(e,t);else for(let n=0;n<za.length;n++){const s=za[n];try{s.mouseDownContains=s.popperNode().contains(e.target)}catch{}}}function mv(e,t){Ya.autoHideOnMousedown||aT(e,t)}function aT(e,t){const n={};for(let s=za.length-1;s>=0;s--){const o=za[s];try{const a=o.containsGlobalTarget=o.mouseDownContains||o.popperNode().contains(e.target);o.pendingHide=!1,requestAnimationFrame(()=>{if(o.pendingHide=!1,!n[o.randomId]&&fv(o,a,e)){if(o.$_handleGlobalClose(e,t),!e.closeAllPopover&&e.closePopover&&a){let r=o.parentPopper;for(;r;)n[r.randomId]=!0,r=r.parentPopper;return}let i=o.parentPopper;for(;i&&fv(i,i.containsGlobalTarget,e);)i.$_handleGlobalClose(e,t),i=i.parentPopper}})}catch{}}}function fv(e,t,n){return n.closeAllPopover||n.closePopover&&t||aR(e,n)&&!t}function aR(e,t){if(typeof e.autoHide=="function"){const n=e.autoHide(t);return e.lastAutoHide=n,n}return e.autoHide}function oR(){for(let e=0;e<za.length;e++)za[e].$_computePosition()}let si=0,ai=0,jl=0,Kl=0;typeof window<"u"&&window.addEventListener("mousemove",e=>{si=jl,ai=Kl,jl=e.clientX,Kl=e.clientY},Xr?{passive:!0}:void 0);function qc(e,t,n,s,o,a,i,r){const l=((i-o)*(t-a)-(r-a)*(e-o))/((r-a)*(n-e)-(i-o)*(s-t)),c=((n-e)*(t-a)-(s-t)*(e-o))/((r-a)*(n-e)-(i-o)*(s-t));return l>=0&&l<=1&&c>=0&&c<=1}const iR={extends:sT()},Ld=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};function rR(e,t,n,s,o,a){return p(),v("div",{ref:"reference",class:se(["v-popper",{"v-popper--shown":e.slotData.isShown}])},[We(e.$slots,"default",i0(r0(e.slotData)))],2)}const lR=Ld(iR,[["render",rR]]);function cR(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var o=e.indexOf("Edge/");return o>0?parseInt(e.substring(o+5,e.indexOf(".",o)),10):-1}let Lu;function Bm(){Bm.init||(Bm.init=!0,Lu=cR()!==-1)}var kd={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Bm(),tn(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",Lu&&this.$el.appendChild(e),e.data="about:blank",Lu||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Lu&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const uR=o0();s0("data-v-b329ee4c");const dR={class:"resize-observer",tabindex:"-1"};a0();const pR=uR((e,t,n,s,o,a)=>(p(),$("div",dR)));kd.render=pR;kd.__scopeId="data-v-b329ee4c";kd.__file="src/components/ResizeObserver.vue";const oT=(e="theme")=>({computed:{themeClass(){return sR(this[e])}}}),hR=yo({name:"VPopperContent",components:{ResizeObserver:kd},mixins:[oT()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(e){return e!=null&&!isNaN(e)?`${e}px`:null}}}),mR=["id","aria-hidden","tabindex","data-popper-placement"],fR={ref:"inner",class:"v-popper__inner"},gR=h("div",{class:"v-popper__arrow-outer"},null,-1),_R=h("div",{class:"v-popper__arrow-inner"},null,-1),vR=[gR,_R];function bR(e,t,n,s,o,a){const i=M("ResizeObserver");return p(),v("div",{id:e.popperId,ref:"popover",class:se(["v-popper__popper",[e.themeClass,e.classes.popperClass,{"v-popper__popper--shown":e.shown,"v-popper__popper--hidden":!e.shown,"v-popper__popper--show-from":e.classes.showFrom,"v-popper__popper--show-to":e.classes.showTo,"v-popper__popper--hide-from":e.classes.hideFrom,"v-popper__popper--hide-to":e.classes.hideTo,"v-popper__popper--skip-transition":e.skipTransition,"v-popper__popper--arrow-overflow":e.result&&e.result.arrow.overflow,"v-popper__popper--no-positioning":!e.result}]]),style:Ht(e.result?{position:e.result.strategy,transform:`translate3d(${Math.round(e.result.x)}px,${Math.round(e.result.y)}px,0)`}:void 0),"aria-hidden":e.shown?"false":"true",tabindex:e.autoHide?0:void 0,"data-popper-placement":e.result?e.result.placement:void 0,onKeyup:t[2]||(t[2]=kn(r=>e.autoHide&&e.$emit("hide"),["esc"]))},[h("div",{class:"v-popper__backdrop",onClick:t[0]||(t[0]=r=>e.autoHide&&e.$emit("hide"))}),h("div",{class:"v-popper__wrapper",style:Ht(e.result?{transformOrigin:e.result.transformOrigin}:void 0)},[h("div",fR,[e.mounted?(p(),v(pe,{key:0},[h("div",null,[We(e.$slots,"default")]),e.handleResize?(p(),$(i,{key:0,onNotify:t[1]||(t[1]=r=>e.$emit("resize",r))})):w("",!0)],64)):w("",!0)],512),h("div",{ref:"arrow",class:"v-popper__arrow-container",style:Ht(e.result?{left:e.toPx(e.result.arrow.x),top:e.toPx(e.result.arrow.y)}:void 0)},vR,4)],4)],46,mR)}const iT=Ld(hR,[["render",bR]]),rT={methods:{show(...e){return this.$refs.popper.show(...e)},hide(...e){return this.$refs.popper.hide(...e)},dispose(...e){return this.$refs.popper.dispose(...e)},onResize(...e){return this.$refs.popper.onResize(...e)}}};let Fm=function(){};typeof window<"u"&&(Fm=window.Element);const ER=yo({name:"VPopperWrapper",components:{Popper:lR,PopperContent:iT},mixins:[rT,oT("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,Fm,Boolean],default:void 0},boundary:{type:[String,Fm],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(e=>e!==this.$refs.popperContent.$el)}}});function TR(e,t,n,s,o,a){const i=M("PopperContent"),r=M("Popper");return p(),$(r,fs({ref:"popper"},e.$props,{theme:e.finalTheme,"target-nodes":e.getTargetNodes,"popper-node":()=>e.$refs.popperContent.$el,class:[e.themeClass],onShow:t[0]||(t[0]=()=>e.$emit("show")),onHide:t[1]||(t[1]=()=>e.$emit("hide")),"onUpdate:shown":t[2]||(t[2]=l=>e.$emit("update:shown",l)),onApplyShow:t[3]||(t[3]=()=>e.$emit("apply-show")),onApplyHide:t[4]||(t[4]=()=>e.$emit("apply-hide")),onCloseGroup:t[5]||(t[5]=()=>e.$emit("close-group")),onCloseDirective:t[6]||(t[6]=()=>e.$emit("close-directive")),onAutoHide:t[7]||(t[7]=()=>e.$emit("auto-hide")),onResize:t[8]||(t[8]=()=>e.$emit("resize"))}),{default:K(({popperId:l,isShown:c,shouldMountContent:u,skipTransition:d,autoHide:m,show:f,hide:g,handleResize:T,onResize:S,classes:_,result:E})=>[We(e.$slots,"default",{shown:c,show:f,hide:g}),y(i,{ref:"popperContent","popper-id":l,theme:e.finalTheme,shown:c,mounted:u,"skip-transition":d,"auto-hide":m,"handle-resize":T,classes:_,result:E,onHide:g,onResize:S},{default:K(()=>[We(e.$slots,"popper",{shown:c,hide:g})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const Xf=Ld(ER,[["render",TR]]),yR={...Xf,name:"VDropdown",vPopperTheme:"dropdown"},SR={...Xf,name:"VMenu",vPopperTheme:"menu"},AR={...Xf,name:"VTooltip",vPopperTheme:"tooltip"},IR=yo({name:"VTooltipDirective",components:{Popper:sT(),PopperContent:iT},mixins:[rT],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:e=>lc(e.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:e=>lc(e.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(e){if(typeof this.content=="function"&&this.$_isShown&&(e||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const t=++this.$_fetchId,n=this.content(this);n.then?n.then(s=>this.onResult(t,s)):this.onResult(t,n)}},onResult(e,t){e===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=t)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),CR=["innerHTML"],OR=["textContent"];function NR(e,t,n,s,o,a){const i=M("PopperContent"),r=M("Popper");return p(),$(r,fs({ref:"popper"},e.$attrs,{theme:e.theme,"target-nodes":e.targetNodes,"popper-node":()=>e.$refs.popperContent.$el,onApplyShow:e.onShow,onApplyHide:e.onHide}),{default:K(({popperId:l,isShown:c,shouldMountContent:u,skipTransition:d,autoHide:m,hide:f,handleResize:g,onResize:T,classes:S,result:_})=>[y(i,{ref:"popperContent",class:se({"v-popper--tooltip-loading":e.loading}),"popper-id":l,theme:e.theme,shown:c,mounted:u,"skip-transition":d,"auto-hide":m,"handle-resize":g,classes:S,result:_,onHide:f,onResize:T},{default:K(()=>[e.html?(p(),v("div",{key:0,innerHTML:e.finalContent},null,8,CR)):(p(),v("div",{key:1,textContent:A(e.finalContent)},null,8,OR))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const wR=Ld(IR,[["render",NR]]),lT="v-popper--has-tooltip";function RR(e,t){let n=e.placement;if(!n&&t)for(const s of nT)t[s]&&(n=s);return n||(n=lc(e.theme||"tooltip","placement")),n}function cT(e,t,n){let s;const o=typeof t;return o==="string"?s={content:t}:t&&o==="object"?s=t:s={content:!1},s.placement=RR(s,n),s.targetNodes=()=>[e],s.referenceNode=()=>e,s}let Bp,cc,xR=0;function $R(){if(Bp)return;cc=X([]),Bp=n0({name:"VTooltipDirectiveApp",setup(){return{directives:cc}},render(){return this.directives.map(t=>yn(wR,{...t.options,shown:t.shown||t.options.shown,key:t.id}))},devtools:{hide:!0}});const e=document.createElement("div");document.body.appendChild(e),Bp.mount(e)}function MR(e,t,n){$R();const s=X(cT(e,t,n)),o=X(!1),a={id:xR++,options:s,shown:o};return cc.value.push(a),e.classList&&e.classList.add(lT),e.$_popper={options:s,item:a,show(){o.value=!0},hide(){o.value=!1}}}function uT(e){if(e.$_popper){const t=cc.value.indexOf(e.$_popper.item);t!==-1&&cc.value.splice(t,1),delete e.$_popper,delete e.$_popperOldShown,delete e.$_popperMountTarget}e.classList&&e.classList.remove(lT)}function gv(e,{value:t,modifiers:n}){const s=cT(e,t,n);if(!s.content||lc(s.theme||"tooltip","disabled"))uT(e);else{let o;e.$_popper?(o=e.$_popper,o.options.value=s):o=MR(e,t,n),typeof t.shown<"u"&&t.shown!==e.$_popperOldShown&&(e.$_popperOldShown=t.shown,t.shown?o.show():o.hide())}}const LR={beforeMount:gv,updated:gv,beforeUnmount(e){uT(e)}};function _v(e){e.addEventListener("mousedown",sd),e.addEventListener("click",sd),e.addEventListener("touchstart",dT,Xr?{passive:!0}:!1)}function vv(e){e.removeEventListener("mousedown",sd),e.removeEventListener("click",sd),e.removeEventListener("touchstart",dT),e.removeEventListener("touchend",pT),e.removeEventListener("touchcancel",hT)}function sd(e){const t=e.currentTarget;e.closePopover=!t.$_vclosepopover_touch,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}function dT(e){if(e.changedTouches.length===1){const t=e.currentTarget;t.$_vclosepopover_touch=!0;const n=e.changedTouches[0];t.$_vclosepopover_touchPoint=n,t.addEventListener("touchend",pT),t.addEventListener("touchcancel",hT)}}function pT(e){const t=e.currentTarget;if(t.$_vclosepopover_touch=!1,e.changedTouches.length===1){const n=e.changedTouches[0],s=t.$_vclosepopover_touchPoint;e.closePopover=Math.abs(n.screenY-s.screenY)<20&&Math.abs(n.screenX-s.screenX)<20,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}}function hT(e){const t=e.currentTarget;t.$_vclosepopover_touch=!1}const kR={beforeMount(e,{value:t,modifiers:n}){e.$_closePopoverModifiers=n,(typeof t>"u"||t)&&_v(e)},updated(e,{value:t,oldValue:n,modifiers:s}){e.$_closePopoverModifiers=s,t!==n&&(typeof t>"u"||t?_v(e):vv(e))},beforeUnmount(e){vv(e)}};function DR(e,t={}){e.$_vTooltipInstalled||(e.$_vTooltipInstalled=!0,eT(Ya,t),e.directive("tooltip",LR),e.directive("close-popper",kR),e.component("VTooltip",AR),e.component("VDropdown",yR),e.component("VMenu",SR))}const PR={version:"5.2.2",install:DR,options:Ya},BR={components:{NextButton:oe},props:{label:{type:String,default:""},src:{type:String,default:""},usernameAvatar:{type:String,default:""},deleteAvatar:{type:Boolean,default:!1}},emits:["onAvatarSelect","onAvatarDelete"],watch:{},methods:{handleImageUpload(e){const[t]=e.target.files;this.$emit("onAvatarSelect",{file:t,url:t?URL.createObjectURL(t):null})},onAvatarDelete(){this.$refs.file.value=null,this.$emit("onAvatarDelete")}}},FR={key:0},UR={key:1,class:"avatar-delete-btn"};function GR(e,t,n,s,o,a){const i=M("woot-thumbnail"),r=M("NextButton");return p(),v("div",null,[h("label",null,[n.label?(p(),v("span",FR,A(n.label),1)):w("",!0)]),n.src?(p(),$(i,{key:0,size:"80px",src:n.src,username:n.usernameAvatar},null,8,["src","username"])):w("",!0),n.src&&n.deleteAvatar?(p(),v("div",UR,[y(r,{outline:"",xs:"",ruby:"",label:e.$t("INBOX_MGMT.DELETE.AVATAR_DELETE_BUTTON_TEXT"),onClick:a.onAvatarDelete},null,8,["label","onClick"])])):w("",!0),h("label",null,[h("input",{id:"file",ref:"file",type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",onChange:t[0]||(t[0]=(...l)=>a.handleImageUpload&&a.handleImageUpload(...l))},null,544),We(e.$slots,"default",{},void 0,!0)])])}const VR=Ae(BR,[["render",GR],["__scopeId","data-v-07d5600d"]]);var Fp,bv;function HR(){if(bv)return Fp;bv=1;function e(t){const n=t.regex,s=n.concat(/[\p{L}_]/u,n.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),o=/[\p{L}0-9._:-]+/u,a={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},r=t.inherit(i,{begin:/\(/,end:/\)/}),l=t.inherit(t.APOS_STRING_MODE,{className:"string"}),c=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:o,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[a]},{begin:/'/,end:/'/,contains:[a]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,c,l,r,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,r,c,l]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},a,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:n.concat(/</,n.lookahead(n.concat(s,n.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:s,relevance:0,starts:u}]},{className:"tag",begin:n.concat(/<\//,n.lookahead(n.concat(s,/>/))),contains:[{className:"name",begin:s,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}return Fp=e,Fp}var Up,Ev;function WR(){if(Ev)return Up;Ev=1;function e(t){const n=t.regex,s={},o={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[s]}]};Object.assign(s,{className:"variable",variants:[{begin:n.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},o]});const a={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},i=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),r={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},l={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,s,a]};a.contains.push(l);const c={match:/\\"/},u={className:"string",begin:/'/,end:/'/},d={match:/\\'/},m={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,s]},f=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],g=t.SHEBANG({binary:`(${f.join("|")})`,relevance:10}),T={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},S=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],_=["true","false"],E={match:/(\/[a-z._-]+)+/},b=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],I=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],R=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],O=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:S,literal:_,built_in:[...b,...I,"set","shopt",...R,...O]},contains:[g,t.SHEBANG(),T,m,i,r,E,l,c,u,d,s]}}return Up=e,Up}var Gp,Tv;function zR(){if(Tv)return Gp;Tv=1;function e(t){const n=t.regex,s=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),o="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",r="("+o+"|"+n.optional(a)+"[a-zA-Z_]\\w*"+n.optional("<[^<>]+>")+")",l={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},m={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},s,t.C_BLOCK_COMMENT_MODE]},f={className:"title",begin:n.optional(a)+t.IDENT_RE,relevance:0},g=n.optional(a)+t.IDENT_RE+"\\s*\\(",_={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},E=[m,l,s,t.C_BLOCK_COMMENT_MODE,d,u],b={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:_,contains:E.concat([{begin:/\(/,end:/\)/,keywords:_,contains:E.concat(["self"]),relevance:0}]),relevance:0},I={begin:"("+r+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:_,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:o,keywords:_,relevance:0},{begin:g,returnBegin:!0,contains:[t.inherit(f,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:_,relevance:0,contains:[s,t.C_BLOCK_COMMENT_MODE,u,d,l,{begin:/\(/,end:/\)/,keywords:_,relevance:0,contains:["self",s,t.C_BLOCK_COMMENT_MODE,u,d,l]}]},l,s,t.C_BLOCK_COMMENT_MODE,m]};return{name:"C",aliases:["h"],keywords:_,disableAutodetect:!0,illegal:"</",contains:[].concat(b,I,E,[m,{begin:t.IDENT_RE+"::",keywords:_},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:m,strings:u,keywords:_}}}return Gp=e,Gp}var Vp,yv;function jR(){if(yv)return Vp;yv=1;function e(t){const n=t.regex,s=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),o="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",r="(?!struct)("+o+"|"+n.optional(a)+"[a-zA-Z_]\\w*"+n.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},m={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},s,t.C_BLOCK_COMMENT_MODE]},f={className:"title",begin:n.optional(a)+t.IDENT_RE,relevance:0},g=n.optional(a)+t.IDENT_RE+"\\s*\\(",T=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],S=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],_=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],E=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],R={type:S,keyword:T,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:_},O={className:"function.dispatch",relevance:0,keywords:{_hint:E},begin:n.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,n.lookahead(/(<[^<>]+>|)\s*\(/))},x=[O,m,l,s,t.C_BLOCK_COMMENT_MODE,d,u],L={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:R,contains:x.concat([{begin:/\(/,end:/\)/,keywords:R,contains:x.concat(["self"]),relevance:0}]),relevance:0},F={className:"function",begin:"("+r+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:R,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:o,keywords:R,relevance:0},{begin:g,returnBegin:!0,contains:[f],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:R,relevance:0,contains:[s,t.C_BLOCK_COMMENT_MODE,u,d,l,{begin:/\(/,end:/\)/,keywords:R,relevance:0,contains:["self",s,t.C_BLOCK_COMMENT_MODE,u,d,l]}]},l,s,t.C_BLOCK_COMMENT_MODE,m]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:R,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(L,F,O,x,[m,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:R,contains:["self",l]},{begin:t.IDENT_RE+"::",keywords:R},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}return Vp=e,Vp}var Hp,Sv;function KR(){if(Sv)return Hp;Sv=1;function e(t){const n=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],s=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],o=["default","false","null","true"],a=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],i=["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"],r={keyword:a.concat(i),built_in:n,literal:o},l=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),c={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},d={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},m=t.inherit(d,{illegal:/\n/}),f={className:"subst",begin:/\{/,end:/\}/,keywords:r},g=t.inherit(f,{illegal:/\n/}),T={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,g]},S={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},f]},_=t.inherit(S,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]});f.contains=[S,T,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,c,t.C_BLOCK_COMMENT_MODE],g.contains=[_,T,m,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,c,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const E={variants:[u,S,T,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},b={begin:"<",end:">",contains:[{beginKeywords:"in out"},l]},I=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",R={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:r,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},E,c,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},l,b,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,b,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+I+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:r,contains:[{beginKeywords:s.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,b],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,relevance:0,contains:[E,c,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},R]}}return Hp=e,Hp}var Wp,Av;function YR(){if(Av)return Wp;Av=1;const e=c=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:c.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:c.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],o=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),a=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),i=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),r=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function l(c){const u=c.regex,d=e(c),m={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},f="and or not only",g=/@-?\w[\w]*(-\w+)*/,T="[a-zA-Z-][a-zA-Z0-9_-]*",S=[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[d.BLOCK_COMMENT,m,d.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+T,relevance:0},d.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+a.join("|")+")"},{begin:":(:)?("+i.join("|")+")"}]},d.CSS_VARIABLE,{className:"attribute",begin:"\\b("+r.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[d.BLOCK_COMMENT,d.HEXCOLOR,d.IMPORTANT,d.CSS_NUMBER_MODE,...S,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...S,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},d.FUNCTION_DISPATCH]},{begin:u.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:g},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:f,attribute:o.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...S,d.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+s.join("|")+")\\b"}]}}return Wp=l,Wp}var zp,Iv;function XR(){if(Iv)return zp;Iv=1;function e(t){const n=t.regex,s={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},o={begin:"^[-\\*]{3,}",end:"$"},a={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},r={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:n.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},d={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},m=t.inherit(u,{contains:[]}),f=t.inherit(d,{contains:[]});u.contains.push(f),d.contains.push(m);let g=[s,c];return[u,d,m,f].forEach(E=>{E.contains=E.contains.concat(g)}),g=g.concat(u,d),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:g},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:g}]}]},s,i,u,d,{className:"quote",begin:"^>\\s+",contains:g,end:"$"},a,o,c,r,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}return zp=e,zp}var jp,Cv;function qR(){if(Cv)return jp;Cv=1;function e(t){const n=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:n.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:n.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}return jp=e,jp}var Kp,Ov;function ZR(){if(Ov)return Kp;Ov=1;function e(t){const n=t.regex,s="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",o=n.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),a=n.concat(o,/(::\w+)*/),r={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},l={className:"doctag",begin:"@[A-Za-z]+"},c={begin:"#<",end:">"},u=[t.COMMENT("#","$",{contains:[l]}),t.COMMENT("^=begin","^=end",{contains:[l],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],d={className:"subst",begin:/#\{/,end:/\}/,keywords:r},m={className:"string",contains:[t.BACKSLASH_ESCAPE,d],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:n.concat(/<<[-~]?'?/,n.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,d]})]}]},f="[1-9](_?[0-9])*|0",g="[0-9](_?[0-9])*",T={className:"number",relevance:0,variants:[{begin:`\\b(${f})(\\.(${g}))?([eE][+-]?(${g})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},S={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:r}]},x=[m,{variants:[{match:[/class\s+/,a,/\s+<\s+/,a]},{match:[/\b(class|module)\s+/,a]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:r},{match:[/(include|extend)\s+/,a],scope:{2:"title.class"},keywords:r},{relevance:0,match:[a,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:o,scope:"title.class"},{match:[/def/,/\s+/,s],scope:{1:"keyword",3:"title.function"},contains:[S]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[m,{begin:s}],relevance:0},T,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:r},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,d],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(c,u),relevance:0}].concat(c,u);d.contains=x,S.contains=x;const V=[{begin:/^\s*=>/,starts:{end:"$",contains:x}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:r,contains:x}}];return u.unshift(c),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:r,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(V).concat(u).concat(x)}}return Kp=e,Kp}var Yp,Nv;function QR(){if(Nv)return Yp;Nv=1;function e(t){const i={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:i,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,illegal:/["']/}]}]}}return Yp=e,Yp}var Xp,wv;function JR(){if(wv)return Xp;wv=1;function e(t){const n=t.regex,s=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:n.concat(s,n.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}return Xp=e,Xp}var qp,Rv;function ex(){if(Rv)return qp;Rv=1;function e(t){const n=t.regex,s={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},o=t.COMMENT();o.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const a={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},r={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},l={begin:/\[/,end:/\]/,contains:[o,i,a,r,s,"self"],relevance:0},c=/[A-Za-z0-9_-]+/,u=/"(\\"|[^"])*"/,d=/'[^']*'/,m=n.either(c,u,d),f=n.concat(m,"(\\s*\\.\\s*",m,")*",n.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[o,{className:"section",begin:/\[+/,end:/\]+/},{begin:f,className:"attr",starts:{end:/$/,contains:[o,l,i,a,r,s]}}]}}return qp=e,qp}var Zp,xv;function tx(){if(xv)return Zp;xv=1;var e="[0-9](_*[0-9])*",t=`\\.(${e})`,n="[0-9a-fA-F](_*[0-9a-fA-F])*",s={className:"number",variants:[{begin:`(\\b(${e})((${t})|\\.)?|(${t}))[eE][+-]?(${e})[fFdD]?\\b`},{begin:`\\b(${e})((${t})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t})[fFdD]?\\b`},{begin:`\\b(${e})[fFdD]\\b`},{begin:`\\b0[xX]((${n})\\.?|(${n})?\\.(${n}))[pP][+-]?(${e})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${n})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function o(i,r,l){return l===-1?"":i.replace(r,c=>o(i,r,l-1))}function a(i){const r=i.regex,l="[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*",c=l+o("(?:<"+l+"~~~(?:\\s*,\\s*"+l+"~~~)*>)?",/~~~/g,2),g={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},T={className:"meta",begin:"@"+l,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},S={className:"params",begin:/\(/,end:/\)/,keywords:g,relevance:0,contains:[i.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:g,illegal:/<\/|#/,contains:[i.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},i.C_LINE_COMMENT_MODE,i.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[i.BACKSLASH_ESCAPE]},i.APOS_STRING_MODE,i.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,l],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[r.concat(/(?!else)/,l),/\s+/,l,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,l],className:{1:"keyword",3:"title.class"},contains:[S,i.C_LINE_COMMENT_MODE,i.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+c+"\\s+)",i.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:g,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:g,relevance:0,contains:[T,i.APOS_STRING_MODE,i.QUOTE_STRING_MODE,s,i.C_BLOCK_COMMENT_MODE]},i.C_LINE_COMMENT_MODE,i.C_BLOCK_COMMENT_MODE]},s,T]}}return Zp=a,Zp}var Qp,$v;function nx(){if($v)return Qp;$v=1;const e="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],n=["true","false","null","undefined","NaN","Infinity"],s=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],o=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],a=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],i=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],r=[].concat(a,s,o);function l(c){const u=c.regex,d=(Ee,{after:le})=>{const _e="</"+Ee[0].slice(1);return Ee.input.indexOf(_e,le)!==-1},m=e,f={begin:"<>",end:"</>"},g=/<[A-Za-z0-9\\._:-]+\s*\/>/,T={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Ee,le)=>{const _e=Ee[0].length+Ee.index,$e=Ee.input[_e];if($e==="<"||$e===","){le.ignoreMatch();return}$e===">"&&(d(Ee,{after:_e})||le.ignoreMatch());let He;const Je=Ee.input.substring(_e);if(He=Je.match(/^\s*=/)){le.ignoreMatch();return}if((He=Je.match(/^\s+extends\s+/))&&He.index===0){le.ignoreMatch();return}}},S={$pattern:e,keyword:t,literal:n,built_in:r,"variable.language":i},_="[0-9](_?[0-9])*",E=`\\.(${_})`,b="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",I={className:"number",variants:[{begin:`(\\b(${b})((${E})|\\.)?|(${E}))[eE][+-]?(${_})\\b`},{begin:`\\b(${b})\\b((${E})\\b|\\.)?|(${E})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},R={className:"subst",begin:"\\$\\{",end:"\\}",keywords:S,contains:[]},O={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,R],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,R],subLanguage:"css"}},L={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,R],subLanguage:"graphql"}},F={className:"string",begin:"`",end:"`",contains:[c.BACKSLASH_ESCAPE,R]},V={className:"comment",variants:[c.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:m+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),c.C_BLOCK_COMMENT_MODE,c.C_LINE_COMMENT_MODE]},B=[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE,O,x,L,F,{match:/\$\d+/},I];R.contains=B.concat({begin:/\{/,end:/\}/,keywords:S,contains:["self"].concat(B)});const P=[].concat(V,R.contains),k=P.concat([{begin:/(\s*)\(/,end:/\)/,keywords:S,contains:["self"].concat(P)}]),U={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:S,contains:k},j={variants:[{match:[/class/,/\s+/,m,/\s+/,/extends/,/\s+/,u.concat(m,"(",u.concat(/\./,m),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,m],scope:{1:"keyword",3:"title.class"}}]},z={relevance:0,match:u.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...s,...o]}},Y={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},te={variants:[{match:[/function/,/\s+/,m,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[U],illegal:/%/},Z={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function G(Ee){return u.concat("(?!",Ee.join("|"),")")}const H={match:u.concat(/\b/,G([...a,"super","import"].map(Ee=>`${Ee}\\s*\\(`)),m,u.lookahead(/\s*\(/)),className:"title.function",relevance:0},W={begin:u.concat(/\./,u.lookahead(u.concat(m,/(?![0-9A-Za-z$_(])/))),end:m,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},J={match:[/get|set/,/\s+/,m,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},U]},ee="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+c.UNDERSCORE_IDENT_RE+")\\s*=>",ge={match:[/const|var|let/,/\s+/,m,/\s*/,/=\s*/,/(async\s*)?/,u.lookahead(ee)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[U]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:S,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:z},illegal:/#(?![$_A-z])/,contains:[c.SHEBANG({label:"shebang",binary:"node",relevance:5}),Y,c.APOS_STRING_MODE,c.QUOTE_STRING_MODE,O,x,L,F,V,{match:/\$\d+/},I,z,{className:"attr",begin:m+u.lookahead(":"),relevance:0},ge,{begin:"("+c.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[V,c.REGEXP_MODE,{className:"function",begin:ee,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:c.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:S,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:f.begin,end:f.end},{match:g},{begin:T.begin,"on:begin":T.isTrulyOpeningTag,end:T.end}],subLanguage:"xml",contains:[{begin:T.begin,end:T.end,skip:!0,contains:["self"]}]}]},te,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+c.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[U,c.inherit(c.TITLE_MODE,{begin:m,className:"title.function"})]},{match:/\.\.\./,relevance:0},W,{match:"\\$"+m,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[U]},H,Z,j,J,{match:/\$[(.]/}]}}return Qp=l,Qp}var Jp,Mv;function sx(){if(Mv)return Jp;Mv=1;function e(t){const n={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},s={match:/[{}[\],:]/,className:"punctuation",relevance:0},o=["true","false","null"],a={scope:"literal",beginKeywords:o.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:o},contains:[n,s,t.QUOTE_STRING_MODE,a,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}return Jp=e,Jp}var eh,Lv;function ax(){if(Lv)return eh;Lv=1;var e="[0-9](_*[0-9])*",t=`\\.(${e})`,n="[0-9a-fA-F](_*[0-9a-fA-F])*",s={className:"number",variants:[{begin:`(\\b(${e})((${t})|\\.)?|(${t}))[eE][+-]?(${e})[fFdD]?\\b`},{begin:`\\b(${e})((${t})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t})[fFdD]?\\b`},{begin:`\\b(${e})[fFdD]\\b`},{begin:`\\b0[xX]((${n})\\.?|(${n})?\\.(${n}))[pP][+-]?(${e})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${n})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function o(a){const i={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},r={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},l={className:"symbol",begin:a.UNDERSCORE_IDENT_RE+"@"},c={className:"subst",begin:/\$\{/,end:/\}/,contains:[a.C_NUMBER_MODE]},u={className:"variable",begin:"\\$"+a.UNDERSCORE_IDENT_RE},d={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[u,c]},{begin:"'",end:"'",illegal:/\n/,contains:[a.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[a.BACKSLASH_ESCAPE,u,c]}]};c.contains.push(d);const m={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+a.UNDERSCORE_IDENT_RE+")?"},f={className:"meta",begin:"@"+a.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[a.inherit(d,{className:"string"}),"self"]}]},g=s,T=a.COMMENT("/\\*","\\*/",{contains:[a.C_BLOCK_COMMENT_MODE]}),S={variants:[{className:"type",begin:a.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},_=S;return _.variants[1].contains=[S],S.variants[1].contains=[_],{name:"Kotlin",aliases:["kt","kts"],keywords:i,contains:[a.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),a.C_LINE_COMMENT_MODE,T,r,l,m,f,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:i,relevance:5,contains:[{begin:a.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[a.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[S,a.C_LINE_COMMENT_MODE,T],relevance:0},a.C_LINE_COMMENT_MODE,T,m,f,d,a.C_NUMBER_MODE]},T]},{begin:[/class|interface|trait/,/\s+/,a.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},a.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},m,f]},d,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},g]}}return eh=o,eh}var th,kv;function ox(){if(kv)return th;kv=1;const e=u=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:u.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[u.APOS_STRING_MODE,u.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:u.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],o=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),a=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),i=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),r=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse(),l=a.concat(i).sort().reverse();function c(u){const d=e(u),m=l,f="and or not only",g="[\\w-]+",T="("+g+"|@\\{"+g+"\\})",S=[],_=[],E=function(P){return{className:"string",begin:"~?"+P+".*?"+P}},b=function(P,k,U){return{className:P,begin:k,relevance:U}},I={$pattern:/[a-z-]+/,keyword:f,attribute:o.join(" ")},R={begin:"\\(",end:"\\)",contains:_,keywords:I,relevance:0};_.push(u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,E("'"),E('"'),d.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},d.HEXCOLOR,R,b("variable","@@?"+g,10),b("variable","@\\{"+g+"\\}"),b("built_in","~?`[^`]*?`"),{className:"attribute",begin:g+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},d.IMPORTANT,{beginKeywords:"and not"},d.FUNCTION_DISPATCH);const O=_.concat({begin:/\{/,end:/\}/,contains:S}),x={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(_)},L={begin:T+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},d.CSS_VARIABLE,{className:"attribute",begin:"\\b("+r.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:_}}]},F={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:I,returnEnd:!0,contains:_,relevance:0}},D={className:"variable",variants:[{begin:"@"+g+"\\s*:",relevance:15},{begin:"@"+g}],starts:{end:"[;}]",returnEnd:!0,contains:O}},V={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:T,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,x,b("keyword","all\\b"),b("variable","@\\{"+g+"\\}"),{begin:"\\b("+s.join("|")+")\\b",className:"selector-tag"},d.CSS_NUMBER_MODE,b("selector-tag",T,0),b("selector-id","#"+T),b("selector-class","\\."+T,0),b("selector-tag","&",0),d.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+a.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+i.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:O},{begin:"!important"},d.FUNCTION_DISPATCH]},B={begin:g+`:(:)?(${m.join("|")})`,returnBegin:!0,contains:[V]};return S.push(u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,F,D,B,L,V,x,d.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:S}}return th=c,th}var nh,Dv;function ix(){if(Dv)return nh;Dv=1;function e(t){const n="\\[=*\\[",s="\\]=*\\]",o={begin:n,end:s,contains:["self"]},a=[t.COMMENT("--(?!"+n+")","$"),t.COMMENT("--"+n,s,{contains:[o],relevance:10})];return{name:"Lua",keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:a.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:a}].concat(a)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:n,end:s,contains:[o],relevance:5}])}}return nh=e,nh}var sh,Pv;function rx(){if(Pv)return sh;Pv=1;function e(t){const n={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},s={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n]},o={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[n]},a={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},i={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},r={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[n]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,n,s,o,a,i,r]}}return sh=e,sh}var ah,Bv;function lx(){if(Bv)return ah;Bv=1;function e(t){const n=t.regex,s=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],o=/[dualxmsipngr]{0,12}/,a={$pattern:/[\w.]+/,keyword:s.join(" ")},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:a},r={begin:/->\{/,end:/\}/},l={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},c={scope:"variable",variants:[{begin:/\$\d/},{begin:n.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[l]},u={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},d=[t.BACKSLASH_ESCAPE,i,c],m=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],f=(S,_,E="\\1")=>{const b=E==="\\1"?E:n.concat(E,_);return n.concat(n.concat("(?:",S,")"),_,/(?:\\.|[^\\\/])*?/,b,/(?:\\.|[^\\\/])*?/,E,o)},g=(S,_,E)=>n.concat(n.concat("(?:",S,")"),_,/(?:\\.|[^\\\/])*?/,E,o),T=[c,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),r,{className:"string",contains:d,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},u,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:f("s|tr|y",n.either(...m,{capture:!0}))},{begin:f("s|tr|y","\\(","\\)")},{begin:f("s|tr|y","\\[","\\]")},{begin:f("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:g("(?:m|qr)?",/\//,/\//)},{begin:g("m|qr",n.either(...m,{capture:!0}),/\1/)},{begin:g("m|qr",/\(/,/\)/)},{begin:g("m|qr",/\[/,/\]/)},{begin:g("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,l]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,l,u]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return i.contains=T,r.contains=T,{name:"Perl",aliases:["pl","pm"],keywords:a,contains:T}}return ah=e,ah}var oh,Fv;function cx(){if(Fv)return oh;Fv=1;function e(t){const n={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},s=/[a-zA-Z@][a-zA-Z0-9_]*/,l={"variable.language":["this","super"],$pattern:s,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},c={$pattern:s,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:l,illegal:"</",contains:[n,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+c.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:c,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}return oh=e,oh}var ih,Uv;function ux(){if(Uv)return ih;Uv=1;function e(t){const n=t.regex,s=/(?![A-Za-z0-9])(?![$])/,o=n.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,s),a=n.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,s),i={scope:"variable",match:"\\$+"+o},r={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=t.inherit(t.APOS_STRING_MODE,{illegal:null}),u=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(l)}),d={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(k,U)=>{U.data._beginMatch=k[1]||k[2]},"on:end":(k,U)=>{U.data._beginMatch!==k[1]&&U.ignoreMatch()}},m=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),f=`[ 	
]`,g={scope:"string",variants:[u,c,d,m]},T={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},S=["false","null","true"],_=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],E=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],I={keyword:_,literal:(k=>{const U=[];return k.forEach(j=>{U.push(j),j.toLowerCase()===j?U.push(j.toUpperCase()):U.push(j.toLowerCase())}),U})(S),built_in:E},R=k=>k.map(U=>U.replace(/\|\d+$/,"")),O={variants:[{match:[/new/,n.concat(f,"+"),n.concat("(?!",R(E).join("\\b|"),"\\b)"),a],scope:{1:"keyword",4:"title.class"}}]},x=n.concat(o,"\\b(?!\\()"),L={variants:[{match:[n.concat(/::/,n.lookahead(/(?!class\b)/)),x],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[a,n.concat(/::/,n.lookahead(/(?!class\b)/)),x],scope:{1:"title.class",3:"variable.constant"}},{match:[a,n.concat("::",n.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[a,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},F={scope:"attr",match:n.concat(o,n.lookahead(":"),n.lookahead(/(?!::)/))},D={relevance:0,begin:/\(/,end:/\)/,keywords:I,contains:[F,i,L,t.C_BLOCK_COMMENT_MODE,g,T,O]},V={relevance:0,match:[/\b/,n.concat("(?!fn\\b|function\\b|",R(_).join("\\b|"),"|",R(E).join("\\b|"),"\\b)"),o,n.concat(f,"*"),n.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[D]};D.contains.push(V);const B=[F,L,t.C_BLOCK_COMMENT_MODE,g,T,O],P={begin:n.concat(/#\[\s*/,a),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:S,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:S,keyword:["new","array"]},contains:["self",...B]},...B,{scope:"meta",match:a}]};return{case_insensitive:!1,keywords:I,contains:[P,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},r,{scope:"variable.language",match:/\$this\b/},i,V,L,{match:[/const/,/\s/,o],scope:{1:"keyword",3:"variable.constant"}},O,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:I,contains:["self",i,L,t.C_BLOCK_COMMENT_MODE,g,T]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},g,T]}}return ih=e,ih}var rh,Gv;function dx(){if(Gv)return rh;Gv=1;function e(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}return rh=e,rh}var lh,Vv;function px(){if(Vv)return lh;Vv=1;function e(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}return lh=e,lh}var ch,Hv;function hx(){if(Hv)return ch;Hv=1;function e(t){const n=t.regex,s=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),o=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:o,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},d={begin:/\{\{/,relevance:0},m={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c,d,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,d,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},f="[0-9](_?[0-9])*",g=`(\\b(${f}))?\\.(${f})|\\b(${f})\\.`,T=`\\b|${o.join("|")}`,S={className:"number",relevance:0,variants:[{begin:`(\\b(${f})|(${g}))[eE][+-]?(${f})[jJ]?(?=${T})`},{begin:`(${g})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${T})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${T})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${T})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${T})`},{begin:`\\b(${f})[jJ](?=${T})`}]},_={className:"comment",begin:n.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},E={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",c,S,m,t.HASH_COMMENT_MODE]}]};return u.contains=[m,S,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[c,S,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},m,_,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,s],scope:{1:"keyword",3:"title.function"},contains:[E]},{variants:[{match:[/\bclass/,/\s+/,s,/\s*/,/\(\s*/,s,/\s*\)/]},{match:[/\bclass/,/\s+/,s]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[S,E,m]}]}}return ch=e,ch}var uh,Wv;function mx(){if(Wv)return uh;Wv=1;function e(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}return uh=e,uh}var dh,zv;function fx(){if(zv)return dh;zv=1;function e(t){const n=t.regex,s=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,o=n.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),a=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,i=n.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:s,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:n.lookahead(n.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:s},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[a,o]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,o]},{scope:{1:"punctuation",2:"number"},match:[i,o]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,o]}]},{scope:{3:"operator"},match:[s,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:a},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:i},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}return dh=e,dh}var ph,jv;function gx(){if(jv)return ph;jv=1;function e(t){const n=t.regex,s=/(r#)?/,o=n.concat(s,t.UNDERSCORE_IDENT_RE),a=n.concat(s,t.IDENT_RE),i={className:"title.function.invoke",relevance:0,begin:n.concat(/\b/,/(?!let|for|while|if|else|match\b)/,a,n.lookahead(/\s*\(/))},r="([ui](8|16|32|64|128|size)|f(32|64))?",l=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],c=["true","false","Some","None","Ok","Err"],u=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],d=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:d,keyword:l,literal:c,built_in:u},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+r},{begin:"\\b0o([0-7_]+)"+r},{begin:"\\b0x([A-Fa-f0-9_]+)"+r},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+r}],relevance:0},{begin:[/fn/,/\s+/,o],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,o],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,o,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,o],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,o],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:u,type:d}},{className:"punctuation",begin:"->"},i]}}return ph=e,ph}var hh,Kv;function _x(){if(Kv)return hh;Kv=1;const e=c=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:c.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:c.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],o=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),a=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),i=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),r=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function l(c){const u=e(c),d=i,m=a,f="@[a-z-]+",g="and or not only",S={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[c.C_LINE_COMMENT_MODE,c.C_BLOCK_COMMENT_MODE,u.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},u.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+s.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+m.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+d.join("|")+")"},S,{begin:/\(/,end:/\)/,contains:[u.CSS_NUMBER_MODE]},u.CSS_VARIABLE,{className:"attribute",begin:"\\b("+r.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[u.BLOCK_COMMENT,S,u.HEXCOLOR,u.CSS_NUMBER_MODE,c.QUOTE_STRING_MODE,c.APOS_STRING_MODE,u.IMPORTANT,u.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:f,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:g,attribute:o.join(" ")},contains:[{begin:f,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},S,c.QUOTE_STRING_MODE,c.APOS_STRING_MODE,u.HEXCOLOR,u.CSS_NUMBER_MODE]},u.FUNCTION_DISPATCH]}}return hh=l,hh}var mh,Yv;function vx(){if(Yv)return mh;Yv=1;function e(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}return mh=e,mh}var fh,Xv;function bx(){if(Xv)return fh;Xv=1;function e(t){const n=t.regex,s=t.COMMENT("--","$"),o={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},a={begin:/"/,end:/"/,contains:[{begin:/""/}]},i=["true","false","unknown"],r=["double precision","large object","with timezone","without timezone"],l=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],c=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],d=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],m=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],f=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],g=d,T=[...u,...c].filter(I=>!d.includes(I)),S={className:"variable",begin:/@[a-z0-9][a-z0-9_]*/},_={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},E={begin:n.concat(/\b/,n.either(...g),/\s*\(/),relevance:0,keywords:{built_in:g}};function b(I,{exceptions:R,when:O}={}){const x=O;return R=R||[],I.map(L=>L.match(/\|\d+$/)||R.includes(L)?L:x(L)?`${L}|0`:L)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:b(T,{when:I=>I.length<3}),literal:i,type:l,built_in:m},contains:[{begin:n.either(...f),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:T.concat(f),literal:i,type:l}},{className:"type",begin:n.either(...r)},E,S,o,a,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,s,_]}}return fh=e,fh}var gh,qv;function Ex(){if(qv)return gh;qv=1;function e(L){return L?typeof L=="string"?L:L.source:null}function t(L){return n("(?=",L,")")}function n(...L){return L.map(D=>e(D)).join("")}function s(L){const F=L[L.length-1];return typeof F=="object"&&F.constructor===Object?(L.splice(L.length-1,1),F):{}}function o(...L){return"("+(s(L).capture?"":"?:")+L.map(V=>e(V)).join("|")+")"}const a=L=>n(/\b/,L,/\w$/.test(L)?/\b/:/\B/),i=["Protocol","Type"].map(a),r=["init","self"].map(a),l=["Any","Self"],c=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],u=["false","nil","true"],d=["assignment","associativity","higherThan","left","lowerThan","none","right"],m=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],f=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],g=o(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),T=o(g,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),S=n(g,T,"*"),_=o(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),E=o(_,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),b=n(_,E,"*"),I=n(/[A-Z]/,E,"*"),R=["attached","autoclosure",n(/convention\(/,o("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",n(/objc\(/,b,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],O=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function x(L){const F={match:/\s+/,relevance:0},D=L.COMMENT("/\\*","\\*/",{contains:["self"]}),V=[L.C_LINE_COMMENT_MODE,D],B={match:[/\./,o(...i,...r)],className:{2:"keyword"}},P={match:n(/\./,o(...c)),relevance:0},k=c.filter(Te=>typeof Te=="string").concat(["_|0"]),U=c.filter(Te=>typeof Te!="string").concat(l).map(a),j={variants:[{className:"keyword",match:o(...U,...r)}]},z={$pattern:o(/\b\w+/,/#\w+/),keyword:k.concat(m),literal:u},Y=[B,P,j],te={match:n(/\./,o(...f)),relevance:0},Z={className:"built_in",match:n(/\b/,o(...f),/(?=\()/)},G=[te,Z],H={match:/->/,relevance:0},W={className:"operator",relevance:0,variants:[{match:S},{match:`\\.(\\.|${T})+`}]},J=[H,W],ee="([0-9]_*)+",ge="([0-9a-fA-F]_*)+",Ee={className:"number",relevance:0,variants:[{match:`\\b(${ee})(\\.(${ee}))?([eE][+-]?(${ee}))?\\b`},{match:`\\b0x(${ge})(\\.(${ge}))?([pP][+-]?(${ee}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},le=(Te="")=>({className:"subst",variants:[{match:n(/\\/,Te,/[0\\tnr"']/)},{match:n(/\\/,Te,/u\{[0-9a-fA-F]{1,8}\}/)}]}),_e=(Te="")=>({className:"subst",match:n(/\\/,Te,/[\t ]*(?:[\r\n]|\r\n)/)}),$e=(Te="")=>({className:"subst",label:"interpol",begin:n(/\\/,Te,/\(/),end:/\)/}),He=(Te="")=>({begin:n(Te,/"""/),end:n(/"""/,Te),contains:[le(Te),_e(Te),$e(Te)]}),Je=(Te="")=>({begin:n(Te,/"/),end:n(/"/,Te),contains:[le(Te),$e(Te)]}),Xe={className:"string",variants:[He(),He("#"),He("##"),He("###"),Je(),Je("#"),Je("##"),Je("###")]},Qe=[L.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[L.BACKSLASH_ESCAPE]}],rt={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:Qe},at=Te=>{const Ie=n(Te,/\//),ye=n(/\//,Te);return{begin:Ie,end:ye,contains:[...Qe,{scope:"comment",begin:`#(?!.*${ye})`,end:/$/}]}},Et={scope:"regexp",variants:[at("###"),at("##"),at("#"),rt]},Lt={match:n(/`/,b,/`/)},q={className:"variable",match:/\$\d+/},ae={className:"variable",match:`\\$${E}+`},ie=[Lt,q,ae],be={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:O,contains:[...J,Ee,Xe]}]}},fe={scope:"keyword",match:n(/@/,o(...R),t(o(/\(/,/\s+/)))},Se={scope:"meta",match:n(/@/,b)},Le=[be,fe,Se],ke={match:t(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:n(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,E,"+")},{className:"type",match:I,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:n(/\s+&\s+/,t(I)),relevance:0}]},De={begin:/</,end:/>/,keywords:z,contains:[...V,...Y,...Le,H,ke]};ke.contains.push(De);const Ue={match:n(b,/\s*:/),keywords:"_|0",relevance:0},de={begin:/\(/,end:/\)/,relevance:0,keywords:z,contains:["self",Ue,...V,Et,...Y,...G,...J,Ee,Xe,...ie,...Le,ke]},Ce={begin:/</,end:/>/,keywords:"repeat each",contains:[...V,ke]},Pe={begin:o(t(n(b,/\s*:/)),t(n(b,/\s+/,b,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:b}]},Q={begin:/\(/,end:/\)/,keywords:z,contains:[Pe,...V,...Y,...J,Ee,Xe,...Le,ke,de],endsParent:!0,illegal:/["']/},ne={match:[/(func|macro)/,/\s+/,o(Lt.match,b,S)],className:{1:"keyword",3:"title.function"},contains:[Ce,Q,F],illegal:[/\[/,/%/]},ue={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Ce,Q,F],illegal:/\[|%/},ve={match:[/operator/,/\s+/,S],className:{1:"keyword",3:"title"}},we={begin:[/precedencegroup/,/\s+/,I],className:{1:"keyword",3:"title"},contains:[ke],keywords:[...d,...u],end:/}/},he={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,b,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:z,contains:[Ce,...Y,{begin:/:/,end:/\{/,keywords:z,contains:[{scope:"title.class.inherited",match:I},...Y],relevance:0}]};for(const Te of Xe.variants){const Ie=Te.contains.find(Be=>Be.label==="interpol");Ie.keywords=z;const ye=[...Y,...G,...J,Ee,Xe,...ie];Ie.contains=[...ye,{begin:/\(/,end:/\)/,contains:["self",...ye]}]}return{name:"Swift",keywords:z,contains:[...V,ne,ue,he,ve,we,{beginKeywords:"import",end:/$/,contains:[...V],relevance:0},Et,...Y,...G,...J,Ee,Xe,...ie,...Le,ke,de]}}return gh=x,gh}var _h,Zv;function Tx(){if(Zv)return _h;Zv=1;function e(t){const n="true false yes no null",s="[\\w#;/?:@&=+$,.~*'()[\\]]+",o={className:"attr",variants:[{begin:/\w[\w :()\./-]*:(?=[ \t]|$)/},{begin:/"\w[\w :()\./-]*":(?=[ \t]|$)/},{begin:/'\w[\w :()\./-]*':(?=[ \t]|$)/}]},a={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,a]},r=t.inherit(i,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),m={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},f={end:",",endsWithParent:!0,excludeEnd:!0,keywords:n,relevance:0},g={begin:/\{/,end:/\}/,contains:[f],illegal:"\\n",relevance:0},T={begin:"\\[",end:"\\]",contains:[f],illegal:"\\n",relevance:0},S=[o,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+s},{className:"type",begin:"!<"+s+">"},{className:"type",begin:"!"+s},{className:"type",begin:"!!"+s},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:n,keywords:{literal:n}},m,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},g,T,i],_=[...S];return _.pop(),_.push(r),f.contains=_,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:S}}return _h=e,_h}var vh,Qv;function yx(){if(Qv)return vh;Qv=1;const e="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],n=["true","false","null","undefined","NaN","Infinity"],s=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],o=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],a=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],i=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],r=[].concat(a,s,o);function l(u){const d=u.regex,m=(le,{after:_e})=>{const $e="</"+le[0].slice(1);return le.input.indexOf($e,_e)!==-1},f=e,g={begin:"<>",end:"</>"},T=/<[A-Za-z0-9\\._:-]+\s*\/>/,S={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(le,_e)=>{const $e=le[0].length+le.index,He=le.input[$e];if(He==="<"||He===","){_e.ignoreMatch();return}He===">"&&(m(le,{after:$e})||_e.ignoreMatch());let Je;const Xe=le.input.substring($e);if(Je=Xe.match(/^\s*=/)){_e.ignoreMatch();return}if((Je=Xe.match(/^\s+extends\s+/))&&Je.index===0){_e.ignoreMatch();return}}},_={$pattern:e,keyword:t,literal:n,built_in:r,"variable.language":i},E="[0-9](_?[0-9])*",b=`\\.(${E})`,I="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",R={className:"number",variants:[{begin:`(\\b(${I})((${b})|\\.)?|(${b}))[eE][+-]?(${E})\\b`},{begin:`\\b(${I})\\b((${b})\\b|\\.)?|(${b})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},O={className:"subst",begin:"\\$\\{",end:"\\}",keywords:_,contains:[]},x={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,O],subLanguage:"xml"}},L={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,O],subLanguage:"css"}},F={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,O],subLanguage:"graphql"}},D={className:"string",begin:"`",end:"`",contains:[u.BACKSLASH_ESCAPE,O]},B={className:"comment",variants:[u.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:f+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),u.C_BLOCK_COMMENT_MODE,u.C_LINE_COMMENT_MODE]},P=[u.APOS_STRING_MODE,u.QUOTE_STRING_MODE,x,L,F,D,{match:/\$\d+/},R];O.contains=P.concat({begin:/\{/,end:/\}/,keywords:_,contains:["self"].concat(P)});const k=[].concat(B,O.contains),U=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:_,contains:["self"].concat(k)}]),j={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:_,contains:U},z={variants:[{match:[/class/,/\s+/,f,/\s+/,/extends/,/\s+/,d.concat(f,"(",d.concat(/\./,f),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,f],scope:{1:"keyword",3:"title.class"}}]},Y={relevance:0,match:d.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...s,...o]}},te={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},Z={variants:[{match:[/function/,/\s+/,f,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[j],illegal:/%/},G={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function H(le){return d.concat("(?!",le.join("|"),")")}const W={match:d.concat(/\b/,H([...a,"super","import"].map(le=>`${le}\\s*\\(`)),f,d.lookahead(/\s*\(/)),className:"title.function",relevance:0},J={begin:d.concat(/\./,d.lookahead(d.concat(f,/(?![0-9A-Za-z$_(])/))),end:f,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},ee={match:[/get|set/,/\s+/,f,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},j]},ge="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+u.UNDERSCORE_IDENT_RE+")\\s*=>",Ee={match:[/const|var|let/,/\s+/,f,/\s*/,/=\s*/,/(async\s*)?/,d.lookahead(ge)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[j]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:_,exports:{PARAMS_CONTAINS:U,CLASS_REFERENCE:Y},illegal:/#(?![$_A-z])/,contains:[u.SHEBANG({label:"shebang",binary:"node",relevance:5}),te,u.APOS_STRING_MODE,u.QUOTE_STRING_MODE,x,L,F,D,B,{match:/\$\d+/},R,Y,{className:"attr",begin:f+d.lookahead(":"),relevance:0},Ee,{begin:"("+u.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[B,u.REGEXP_MODE,{className:"function",begin:ge,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:u.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:_,contains:U}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:g.begin,end:g.end},{match:T},{begin:S.begin,"on:begin":S.isTrulyOpeningTag,end:S.end}],subLanguage:"xml",contains:[{begin:S.begin,end:S.end,skip:!0,contains:["self"]}]}]},Z,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+u.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[j,u.inherit(u.TITLE_MODE,{begin:f,className:"title.function"})]},{match:/\.\.\./,relevance:0},J,{match:"\\$"+f,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[j]},W,G,z,ee,{match:/\$[(.]/}]}}function c(u){const d=l(u),m=e,f=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],g={begin:[/namespace/,/\s+/,u.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},T={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:f},contains:[d.exports.CLASS_REFERENCE]},S={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},_=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],E={$pattern:e,keyword:t.concat(_),literal:n,built_in:r.concat(f),"variable.language":i},b={className:"meta",begin:"@"+m},I=(x,L,F)=>{const D=x.contains.findIndex(V=>V.label===L);if(D===-1)throw new Error("can not find mode to replace");x.contains.splice(D,1,F)};Object.assign(d.keywords,E),d.exports.PARAMS_CONTAINS.push(b);const R=d.contains.find(x=>x.className==="attr");d.exports.PARAMS_CONTAINS.push([d.exports.CLASS_REFERENCE,R]),d.contains=d.contains.concat([b,g,T]),I(d,"shebang",u.SHEBANG()),I(d,"use_strict",S);const O=d.contains.find(x=>x.label==="func.def");return O.relevance=0,Object.assign(d,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),d}return vh=c,vh}var bh,Jv;function Sx(){if(Jv)return bh;Jv=1;function e(t){const n=t.regex,s={className:"string",begin:/"(""|[^/n])"C\b/},o={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},a=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,r=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,l=/\d{1,2}(:\d{1,2}){1,2}/,c={className:"literal",variants:[{begin:n.concat(/# */,n.either(i,a),/ *#/)},{begin:n.concat(/# */,l,/ *#/)},{begin:n.concat(/# */,r,/ *#/)},{begin:n.concat(/# */,n.either(i,a),/ +/,n.either(r,l),/ *#/)}]},u={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},d={className:"label",begin:/^\w+:/},m=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),f=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[s,o,c,u,d,m,f,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[f]}]}}return bh=e,bh}var Eh,eb;function Ax(){if(eb)return Eh;eb=1;function e(t){t.regex;const n=t.COMMENT(/\(;/,/;\)/);n.contains.push("self");const s=t.COMMENT(/;;/,/$/),o=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],a={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},i={className:"variable",begin:/\$[\w_]+/},r={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},l={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},c={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},u={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:o},contains:[s,n,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},i,r,a,t.QUOTE_STRING_MODE,c,u,l]}}return Eh=e,Eh}var qt=U0;qt.registerLanguage("xml",HR());qt.registerLanguage("bash",WR());qt.registerLanguage("c",zR());qt.registerLanguage("cpp",jR());qt.registerLanguage("csharp",KR());qt.registerLanguage("css",YR());qt.registerLanguage("markdown",XR());qt.registerLanguage("diff",qR());qt.registerLanguage("ruby",ZR());qt.registerLanguage("go",QR());qt.registerLanguage("graphql",JR());qt.registerLanguage("ini",ex());qt.registerLanguage("java",tx());qt.registerLanguage("javascript",nx());qt.registerLanguage("json",sx());qt.registerLanguage("kotlin",ax());qt.registerLanguage("less",ox());qt.registerLanguage("lua",ix());qt.registerLanguage("makefile",rx());qt.registerLanguage("perl",lx());qt.registerLanguage("objectivec",cx());qt.registerLanguage("php",ux());qt.registerLanguage("php-template",dx());qt.registerLanguage("plaintext",px());qt.registerLanguage("python",hx());qt.registerLanguage("python-repl",mx());qt.registerLanguage("r",fx());qt.registerLanguage("rust",gx());qt.registerLanguage("scss",_x());qt.registerLanguage("shell",vx());qt.registerLanguage("sql",bx());qt.registerLanguage("swift",Ex());qt.registerLanguage("yaml",Tx());qt.registerLanguage("typescript",yx());qt.registerLanguage("vbnet",Sx());qt.registerLanguage("wasm",Ax());qt.HighlightJS=qt;qt.default=qt;const Go=async e=>{try{await navigator.clipboard.writeText(e)}catch(t){throw new Error(`Unable to copy text to clipboard: ${t.message}`)}},Ix={class:"relative text-left"},Cx={class:"top-1.5 absolute right-1.5 flex items-center gap-1"},Ox={key:0,class:"flex items-center",action:"https://codepen.io/pen/define",method:"POST",target:"_blank"},Nx=["value"],wx={__name:"Code",props:{script:{type:String,default:""},lang:{type:String,default:"javascript"},enableCodePen:{type:Boolean,default:!1},codepenTitle:{type:String,default:"Chatwoot Codepen"}},setup(e){const t=e,{t:n}=Me(),s=C(()=>{const r=t.script.replace(/^\s*[\r\n]/gm,"").split(`
`),l=r.reduce((c,u)=>{if(u.trim().length===0)return c;const d=u.match(/^\s*/)[0].length;return Math.min(c,d)},1/0);return r.map(c=>c.slice(l)).join(`
`)}),o=C(()=>{const i=t.lang==="javascript"?"js":t.lang;return JSON.stringify({title:t.codepenTitle,private:!0,[i]:s.value})}),a=async i=>{i.preventDefault(),await Go(s.value),ce(n("COMPONENTS.CODE.COPY_SUCCESSFUL"))};return(i,r)=>{const l=M("highlightjs");return p(),v("div",Ix,[h("div",Cx,[e.enableCodePen?(p(),v("form",Ox,[h("input",{type:"hidden",name:"data",value:o.value},null,8,Nx),y(oe,{slate:"",xs:"",type:"submit",faded:"",label:N(n)("COMPONENTS.CODE.CODEPEN")},null,8,["label"])])):w("",!0),y(oe,{slate:"",xs:"",faded:"",label:N(n)("COMPONENTS.CODE.BUTTON_TEXT"),onClick:a},null,8,["label"])]),e.script?(p(),$(l,{key:0,language:e.lang,code:s.value},null,8,["language","code"])):w("",!0)])}}};var mT={exports:{}};(function(e){(function(){var t={9662:function(a,i,r){var l=r(7854),c=r(614),u=r(6330),d=l.TypeError;a.exports=function(m){if(c(m))return m;throw d(u(m)+" is not a function")}},6077:function(a,i,r){var l=r(7854),c=r(614),u=l.String,d=l.TypeError;a.exports=function(m){if(typeof m=="object"||c(m))return m;throw d("Can't set "+u(m)+" as a prototype")}},9670:function(a,i,r){var l=r(7854),c=r(111),u=l.String,d=l.TypeError;a.exports=function(m){if(c(m))return m;throw d(u(m)+" is not an object")}},1318:function(a,i,r){var l=r(5656),c=r(1400),u=r(6244),d=function(m){return function(f,g,T){var S=l(f),_=u(S),E=c(T,_),b;if(m&&g!=g){for(;_>E;)if(b=S[E++],b!=b)return!0}else for(;_>E;E++)if((m||E in S)&&S[E]===g)return m||E||0;return!m&&-1}};a.exports={includes:d(!0),indexOf:d(!1)}},4326:function(a,i,r){var l=r(1702),c=l({}.toString),u=l("".slice);a.exports=function(d){return u(c(d),8,-1)}},648:function(a,i,r){var l=r(7854),c=r(1694),u=r(614),d=r(4326),m=r(5112),f=m("toStringTag"),g=l.Object,T=d(function(){return arguments}())=="Arguments",S=function(_,E){try{return _[E]}catch{}};a.exports=c?d:function(_){var E,b,I;return _===void 0?"Undefined":_===null?"Null":typeof(b=S(E=g(_),f))=="string"?b:T?d(E):(I=d(E))=="Object"&&u(E.callee)?"Arguments":I}},7741:function(a,i,r){var l=r(1702),c=l("".replace),u=function(f){return String(Error(f).stack)}("zxcasd"),d=/\n\s*at [^:]*:[^\n]*/,m=d.test(u);a.exports=function(f,g){if(m&&typeof f=="string")for(;g--;)f=c(f,d,"");return f}},9920:function(a,i,r){var l=r(2597),c=r(3887),u=r(1236),d=r(3070);a.exports=function(m,f,g){for(var T=c(f),S=d.f,_=u.f,E=0;E<T.length;E++){var b=T[E];!l(m,b)&&!(g&&l(g,b))&&S(m,b,_(f,b))}}},8880:function(a,i,r){var l=r(9781),c=r(3070),u=r(9114);a.exports=l?function(d,m,f){return c.f(d,m,u(1,f))}:function(d,m,f){return d[m]=f,d}},9114:function(a){a.exports=function(i,r){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:r}}},9781:function(a,i,r){var l=r(7293);a.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:function(a,i,r){var l=r(7854),c=r(111),u=l.document,d=c(u)&&c(u.createElement);a.exports=function(m){return d?u.createElement(m):{}}},8113:function(a,i,r){var l=r(5005);a.exports=l("navigator","userAgent")||""},7392:function(a,i,r){var l=r(7854),c=r(8113),u=l.process,d=l.Deno,m=u&&u.versions||d&&d.version,f=m&&m.v8,g,T;f&&(g=f.split("."),T=g[0]>0&&g[0]<4?1:+(g[0]+g[1])),!T&&c&&(g=c.match(/Edge\/(\d+)/),(!g||g[1]>=74)&&(g=c.match(/Chrome\/(\d+)/),g&&(T=+g[1]))),a.exports=T},748:function(a){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(a,i,r){var l=r(7293),c=r(9114);a.exports=!l(function(){var u=Error("a");return"stack"in u?(Object.defineProperty(u,"stack",c(1,7)),u.stack!==7):!0})},2109:function(a,i,r){var l=r(7854),c=r(1236).f,u=r(8880),d=r(1320),m=r(3505),f=r(9920),g=r(4705);a.exports=function(T,S){var _=T.target,E=T.global,b=T.stat,I,R,O,x,L,F;if(E?R=l:b?R=l[_]||m(_,{}):R=(l[_]||{}).prototype,R)for(O in S){if(L=S[O],T.noTargetGet?(F=c(R,O),x=F&&F.value):x=R[O],I=g(E?O:_+(b?".":"#")+O,T.forced),!I&&x!==void 0){if(typeof L==typeof x)continue;f(L,x)}(T.sham||x&&x.sham)&&u(L,"sham",!0),d(R,O,L,T)}}},7293:function(a){a.exports=function(i){try{return!!i()}catch{return!0}}},2104:function(a,i,r){var l=r(4374),c=Function.prototype,u=c.apply,d=c.call;a.exports=typeof Reflect=="object"&&Reflect.apply||(l?d.bind(u):function(){return d.apply(u,arguments)})},4374:function(a,i,r){var l=r(7293);a.exports=!l(function(){var c=(function(){}).bind();return typeof c!="function"||c.hasOwnProperty("prototype")})},6916:function(a,i,r){var l=r(4374),c=Function.prototype.call;a.exports=l?c.bind(c):function(){return c.apply(c,arguments)}},6530:function(a,i,r){var l=r(9781),c=r(2597),u=Function.prototype,d=l&&Object.getOwnPropertyDescriptor,m=c(u,"name"),f=m&&(function(){}).name==="something",g=m&&(!l||l&&d(u,"name").configurable);a.exports={EXISTS:m,PROPER:f,CONFIGURABLE:g}},1702:function(a,i,r){var l=r(4374),c=Function.prototype,u=c.bind,d=c.call,m=l&&u.bind(d,d);a.exports=l?function(f){return f&&m(f)}:function(f){return f&&function(){return d.apply(f,arguments)}}},5005:function(a,i,r){var l=r(7854),c=r(614),u=function(d){return c(d)?d:void 0};a.exports=function(d,m){return arguments.length<2?u(l[d]):l[d]&&l[d][m]}},8173:function(a,i,r){var l=r(9662);a.exports=function(c,u){var d=c[u];return d==null?void 0:l(d)}},7854:function(a,i,r){var l=function(c){return c&&c.Math==Math&&c};a.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof r.g=="object"&&r.g)||function(){return this}()||Function("return this")()},2597:function(a,i,r){var l=r(1702),c=r(7908),u=l({}.hasOwnProperty);a.exports=Object.hasOwn||function(m,f){return u(c(m),f)}},3501:function(a){a.exports={}},4664:function(a,i,r){var l=r(9781),c=r(7293),u=r(317);a.exports=!l&&!c(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},8361:function(a,i,r){var l=r(7854),c=r(1702),u=r(7293),d=r(4326),m=l.Object,f=c("".split);a.exports=u(function(){return!m("z").propertyIsEnumerable(0)})?function(g){return d(g)=="String"?f(g,""):m(g)}:m},9587:function(a,i,r){var l=r(614),c=r(111),u=r(7674);a.exports=function(d,m,f){var g,T;return u&&l(g=m.constructor)&&g!==f&&c(T=g.prototype)&&T!==f.prototype&&u(d,T),d}},2788:function(a,i,r){var l=r(1702),c=r(614),u=r(5465),d=l(Function.toString);c(u.inspectSource)||(u.inspectSource=function(m){return d(m)}),a.exports=u.inspectSource},8340:function(a,i,r){var l=r(111),c=r(8880);a.exports=function(u,d){l(d)&&"cause"in d&&c(u,"cause",d.cause)}},9909:function(a,i,r){var l=r(8536),c=r(7854),u=r(1702),d=r(111),m=r(8880),f=r(2597),g=r(5465),T=r(6200),S=r(3501),_="Object already initialized",E=c.TypeError,b=c.WeakMap,I,R,O,x=function(k){return O(k)?R(k):I(k,{})},L=function(k){return function(U){var j;if(!d(U)||(j=R(U)).type!==k)throw E("Incompatible receiver, "+k+" required");return j}};if(l||g.state){var F=g.state||(g.state=new b),D=u(F.get),V=u(F.has),B=u(F.set);I=function(k,U){if(V(F,k))throw new E(_);return U.facade=k,B(F,k,U),U},R=function(k){return D(F,k)||{}},O=function(k){return V(F,k)}}else{var P=T("state");S[P]=!0,I=function(k,U){if(f(k,P))throw new E(_);return U.facade=k,m(k,P,U),U},R=function(k){return f(k,P)?k[P]:{}},O=function(k){return f(k,P)}}a.exports={set:I,get:R,has:O,enforce:x,getterFor:L}},614:function(a){a.exports=function(i){return typeof i=="function"}},4705:function(a,i,r){var l=r(7293),c=r(614),u=/#|\.prototype\./,d=function(S,_){var E=f[m(S)];return E==T?!0:E==g?!1:c(_)?l(_):!!_},m=d.normalize=function(S){return String(S).replace(u,".").toLowerCase()},f=d.data={},g=d.NATIVE="N",T=d.POLYFILL="P";a.exports=d},111:function(a,i,r){var l=r(614);a.exports=function(c){return typeof c=="object"?c!==null:l(c)}},1913:function(a){a.exports=!1},2190:function(a,i,r){var l=r(7854),c=r(5005),u=r(614),d=r(7976),m=r(3307),f=l.Object;a.exports=m?function(g){return typeof g=="symbol"}:function(g){var T=c("Symbol");return u(T)&&d(T.prototype,f(g))}},6244:function(a,i,r){var l=r(7466);a.exports=function(c){return l(c.length)}},133:function(a,i,r){var l=r(7392),c=r(7293);a.exports=!!Object.getOwnPropertySymbols&&!c(function(){var u=Symbol();return!String(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&l&&l<41})},8536:function(a,i,r){var l=r(7854),c=r(614),u=r(2788),d=l.WeakMap;a.exports=c(d)&&/native code/.test(u(d))},6277:function(a,i,r){var l=r(1340);a.exports=function(c,u){return c===void 0?arguments.length<2?"":u:l(c)}},3070:function(a,i,r){var l=r(7854),c=r(9781),u=r(4664),d=r(3353),m=r(9670),f=r(4948),g=l.TypeError,T=Object.defineProperty,S=Object.getOwnPropertyDescriptor,_="enumerable",E="configurable",b="writable";i.f=c?d?function(R,O,x){if(m(R),O=f(O),m(x),typeof R=="function"&&O==="prototype"&&"value"in x&&b in x&&!x[b]){var L=S(R,O);L&&L[b]&&(R[O]=x.value,x={configurable:E in x?x[E]:L[E],enumerable:_ in x?x[_]:L[_],writable:!1})}return T(R,O,x)}:T:function(R,O,x){if(m(R),O=f(O),m(x),u)try{return T(R,O,x)}catch{}if("get"in x||"set"in x)throw g("Accessors not supported");return"value"in x&&(R[O]=x.value),R}},1236:function(a,i,r){var l=r(9781),c=r(6916),u=r(5296),d=r(9114),m=r(5656),f=r(4948),g=r(2597),T=r(4664),S=Object.getOwnPropertyDescriptor;i.f=l?S:function(E,b){if(E=m(E),b=f(b),T)try{return S(E,b)}catch{}if(g(E,b))return d(!c(u.f,E,b),E[b])}},8006:function(a,i,r){var l=r(6324),c=r(748),u=c.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(m){return l(m,u)}},5181:function(a,i){i.f=Object.getOwnPropertySymbols},7976:function(a,i,r){var l=r(1702);a.exports=l({}.isPrototypeOf)},6324:function(a,i,r){var l=r(1702),c=r(2597),u=r(5656),d=r(1318).indexOf,m=r(3501),f=l([].push);a.exports=function(g,T){var S=u(g),_=0,E=[],b;for(b in S)!c(m,b)&&c(S,b)&&f(E,b);for(;T.length>_;)c(S,b=T[_++])&&(~d(E,b)||f(E,b));return E}},5296:function(a,i){var r={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!r.call({1:2},1);i.f=c?function(d){var m=l(this,d);return!!m&&m.enumerable}:r},7674:function(a,i,r){var l=r(1702),c=r(9670),u=r(6077);a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,m={},f;try{f=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),f(m,[]),d=m instanceof Array}catch{}return function(T,S){return c(T),u(S),d?f(T,S):T.__proto__=S,T}}():void 0)},2140:function(a,i,r){var l=r(7854),c=r(6916),u=r(614),d=r(111),m=l.TypeError;a.exports=function(f,g){var T,S;if(g==="string"&&u(T=f.toString)&&!d(S=c(T,f))||u(T=f.valueOf)&&!d(S=c(T,f))||g!=="string"&&u(T=f.toString)&&!d(S=c(T,f)))return S;throw m("Can't convert object to primitive value")}},3887:function(a,i,r){var l=r(5005),c=r(1702),u=r(8006),d=r(5181),m=r(9670),f=c([].concat);a.exports=l("Reflect","ownKeys")||function(T){var S=u.f(m(T)),_=d.f;return _?f(S,_(T)):S}},1320:function(a,i,r){var l=r(7854),c=r(614),u=r(2597),d=r(8880),m=r(3505),f=r(2788),g=r(9909),T=r(6530).CONFIGURABLE,S=g.get,_=g.enforce,E=String(String).split("String");(a.exports=function(b,I,R,O){var x=O?!!O.unsafe:!1,L=O?!!O.enumerable:!1,F=O?!!O.noTargetGet:!1,D=O&&O.name!==void 0?O.name:I,V;if(c(R)&&(String(D).slice(0,7)==="Symbol("&&(D="["+String(D).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!u(R,"name")||T&&R.name!==D)&&d(R,"name",D),V=_(R),V.source||(V.source=E.join(typeof D=="string"?D:""))),b===l){L?b[I]=R:m(I,R);return}else x?!F&&b[I]&&(L=!0):delete b[I];L?b[I]=R:d(b,I,R)})(Function.prototype,"toString",function(){return c(this)&&S(this).source||f(this)})},4488:function(a,i,r){var l=r(7854),c=l.TypeError;a.exports=function(u){if(u==null)throw c("Can't call method on "+u);return u}},3505:function(a,i,r){var l=r(7854),c=Object.defineProperty;a.exports=function(u,d){try{c(l,u,{value:d,configurable:!0,writable:!0})}catch{l[u]=d}return d}},6200:function(a,i,r){var l=r(2309),c=r(9711),u=l("keys");a.exports=function(d){return u[d]||(u[d]=c(d))}},5465:function(a,i,r){var l=r(7854),c=r(3505),u="__core-js_shared__",d=l[u]||c(u,{});a.exports=d},2309:function(a,i,r){var l=r(1913),c=r(5465);(a.exports=function(u,d){return c[u]||(c[u]=d!==void 0?d:{})})("versions",[]).push({version:"3.21.1",mode:l?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:function(a,i,r){var l=r(9303),c=Math.max,u=Math.min;a.exports=function(d,m){var f=l(d);return f<0?c(f+m,0):u(f,m)}},5656:function(a,i,r){var l=r(8361),c=r(4488);a.exports=function(u){return l(c(u))}},9303:function(a){var i=Math.ceil,r=Math.floor;a.exports=function(l){var c=+l;return c!==c||c===0?0:(c>0?r:i)(c)}},7466:function(a,i,r){var l=r(9303),c=Math.min;a.exports=function(u){return u>0?c(l(u),9007199254740991):0}},7908:function(a,i,r){var l=r(7854),c=r(4488),u=l.Object;a.exports=function(d){return u(c(d))}},7593:function(a,i,r){var l=r(7854),c=r(6916),u=r(111),d=r(2190),m=r(8173),f=r(2140),g=r(5112),T=l.TypeError,S=g("toPrimitive");a.exports=function(_,E){if(!u(_)||d(_))return _;var b=m(_,S),I;if(b){if(E===void 0&&(E="default"),I=c(b,_,E),!u(I)||d(I))return I;throw T("Can't convert object to primitive value")}return E===void 0&&(E="number"),f(_,E)}},4948:function(a,i,r){var l=r(7593),c=r(2190);a.exports=function(u){var d=l(u,"string");return c(d)?d:d+""}},1694:function(a,i,r){var l=r(5112),c=l("toStringTag"),u={};u[c]="z",a.exports=String(u)==="[object z]"},1340:function(a,i,r){var l=r(7854),c=r(648),u=l.String;a.exports=function(d){if(c(d)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return u(d)}},6330:function(a,i,r){var l=r(7854),c=l.String;a.exports=function(u){try{return c(u)}catch{return"Object"}}},9711:function(a,i,r){var l=r(1702),c=0,u=Math.random(),d=l(1 .toString);a.exports=function(m){return"Symbol("+(m===void 0?"":m)+")_"+d(++c+u,36)}},3307:function(a,i,r){var l=r(133);a.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:function(a,i,r){var l=r(9781),c=r(7293);a.exports=l&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},5112:function(a,i,r){var l=r(7854),c=r(2309),u=r(2597),d=r(9711),m=r(133),f=r(3307),g=c("wks"),T=l.Symbol,S=T&&T.for,_=f?T:T&&T.withoutSetter||d;a.exports=function(E){if(!u(g,E)||!(m||typeof g[E]=="string")){var b="Symbol."+E;m&&u(T,E)?g[E]=T[E]:f&&S?g[E]=S(b):g[E]=_(b)}return g[E]}},9191:function(a,i,r){var l=r(5005),c=r(2597),u=r(8880),d=r(7976),m=r(7674),f=r(9920),g=r(9587),T=r(6277),S=r(8340),_=r(7741),E=r(2914),b=r(1913);a.exports=function(I,R,O,x){var L=x?2:1,F=I.split("."),D=F[F.length-1],V=l.apply(null,F);if(V){var B=V.prototype;if(!b&&c(B,"cause")&&delete B.cause,!O)return V;var P=l("Error"),k=R(function(U,j){var z=T(x?j:U,void 0),Y=x?new V(U):new V;return z!==void 0&&u(Y,"message",z),E&&u(Y,"stack",_(Y.stack,2)),this&&d(B,this)&&g(Y,this,k),arguments.length>L&&S(Y,arguments[L]),Y});if(k.prototype=B,D!=="Error"&&(m?m(k,P):f(k,P,{name:!0})),f(k,V),!b)try{B.name!==D&&u(B,"name",D),B.constructor=k}catch{}return k}}},1703:function(a,i,r){var l=r(2109),c=r(7854),u=r(2104),d=r(9191),m="WebAssembly",f=c[m],g=Error("e",{cause:7}).cause!==7,T=function(_,E){var b={};b[_]=d(_,E,g),l({global:!0,forced:g},b)},S=function(_,E){if(f&&f[_]){var b={};b[_]=d(m+"."+_,E,g),l({target:m,stat:!0,forced:g},b)}};T("Error",function(_){return function(b){return u(_,this,arguments)}}),T("EvalError",function(_){return function(b){return u(_,this,arguments)}}),T("RangeError",function(_){return function(b){return u(_,this,arguments)}}),T("ReferenceError",function(_){return function(b){return u(_,this,arguments)}}),T("SyntaxError",function(_){return function(b){return u(_,this,arguments)}}),T("TypeError",function(_){return function(b){return u(_,this,arguments)}}),T("URIError",function(_){return function(b){return u(_,this,arguments)}}),S("CompileError",function(_){return function(b){return u(_,this,arguments)}}),S("LinkError",function(_){return function(b){return u(_,this,arguments)}}),S("RuntimeError",function(_){return function(b){return u(_,this,arguments)}})},6095:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-chrome{background:#fff;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.3),0 4px 8px rgba(0,0,0,.3);box-sizing:initial;width:225px;font-family:Menlo;background-color:#fff}.vc-chrome-controls{display:flex}.vc-chrome-color-wrap{position:relative;width:36px}.vc-chrome-active-color{position:relative;width:30px;height:30px;border-radius:15px;overflow:hidden;z-index:1}.vc-chrome-color-wrap .vc-checkerboard{width:30px;height:30px;border-radius:15px;background-size:auto}.vc-chrome-sliders{flex:1}.vc-chrome-fields-wrap{display:flex;padding-top:16px}.vc-chrome-fields{display:flex;margin-left:-6px;flex:1}.vc-chrome-field{padding-left:6px;width:100%}.vc-chrome-toggle-btn{width:32px;text-align:right;position:relative}.vc-chrome-toggle-icon{margin-right:-4px;margin-top:12px;cursor:pointer;position:relative;z-index:2}.vc-chrome-toggle-icon-highlight{position:absolute;width:24px;height:28px;background:#eee;border-radius:4px;top:10px;left:12px}.vc-chrome-hue-wrap{margin-bottom:8px}.vc-chrome-alpha-wrap,.vc-chrome-hue-wrap{position:relative;height:10px}.vc-chrome-alpha-wrap .vc-alpha-gradient,.vc-chrome-hue-wrap .vc-hue{border-radius:2px}.vc-chrome-alpha-wrap .vc-alpha-picker,.vc-chrome-hue-wrap .vc-hue-picker{width:12px;height:12px;border-radius:6px;transform:translate(-6px,-2px);background-color:#f8f8f8;box-shadow:0 1px 4px 0 rgba(0,0,0,.37)}.vc-chrome-body{padding:16px 16px 12px;background-color:#fff}.vc-chrome-saturation-wrap{width:100%;padding-bottom:55%;position:relative;border-radius:2px 2px 0 0;overflow:hidden}.vc-chrome-saturation-wrap .vc-saturation-circle{width:12px;height:12px}.vc-chrome-fields .vc-input__input{font-size:11px;color:#333;width:100%;border-radius:2px;border:none;box-shadow:inset 0 0 0 1px #dadada;height:21px;text-align:center}.vc-chrome-fields .vc-input__label{text-transform:uppercase;font-size:11px;line-height:11px;color:#969696;text-align:center;display:block;margin-top:12px}.vc-chrome__disable-alpha .vc-chrome-active-color{width:18px;height:18px}.vc-chrome__disable-alpha .vc-chrome-color-wrap{width:30px}.vc-chrome__disable-alpha .vc-chrome-hue-wrap{margin-top:4px;margin-bottom:4px}",""]),i.default=m},6047:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-compact{padding-top:5px;padding-left:5px;width:245px;border-radius:2px;box-sizing:border-box;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16);background-color:#fff}.vc-compact-colors{overflow:hidden;padding:0;margin:0}.vc-compact-color-item{list-style:none;width:15px;height:15px;float:left;margin-right:5px;margin-bottom:5px;position:relative;cursor:pointer}.vc-compact-color-item--white{box-shadow:inset 0 0 0 1px #ddd}.vc-compact-color-item--white .vc-compact-dot{background:#000}.vc-compact-dot{position:absolute;top:5px;right:5px;bottom:5px;left:5px;border-radius:50%;opacity:1;background:#fff}",""]),i.default=m},9481:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-grayscale{width:125px;border-radius:2px;box-shadow:0 2px 15px rgba(0,0,0,.12),0 2px 10px rgba(0,0,0,.16);background-color:#fff}.vc-grayscale-colors{border-radius:2px;overflow:hidden;padding:0;margin:0}.vc-grayscale-color-item{list-style:none;width:25px;height:25px;float:left;position:relative;cursor:pointer}.vc-grayscale-color-item--white .vc-grayscale-dot{background:#000}.vc-grayscale-dot{position:absolute;top:50%;left:50%;width:6px;height:6px;margin:-3px 0 0 -2px;border-radius:50%;opacity:1;background:#fff}",""]),i.default=m},5186:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-material{width:98px;height:98px;padding:16px;font-family:Roboto;position:relative;border-radius:2px;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16);background-color:#fff}.vc-material .vc-input__input{width:100%;margin-top:12px;font-size:15px;color:#333;height:30px}.vc-material .vc-input__label{position:absolute;top:0;left:0;font-size:11px;color:#999;text-transform:capitalize}.vc-material-hex{border-bottom-width:2px;border-bottom-style:solid}.vc-material-split{display:flex;margin-right:-10px;padding-top:11px}.vc-material-third{flex:1;padding-right:10px}",""]),i.default=m},3695:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,'.vc-photoshop{background:#dcdcdc;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.25),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;width:513px;font-family:Roboto}.vc-photoshop__disable-fields{width:390px}.vc-ps-head{background-image:linear-gradient(-180deg,#f0f0f0,#d4d4d4);border-bottom:1px solid #b1b1b1;box-shadow:inset 0 1px 0 0 hsla(0,0%,100%,.2),inset 0 -1px 0 0 rgba(0,0,0,.02);height:23px;line-height:24px;border-radius:4px 4px 0 0;font-size:13px;color:#4d4d4d;text-align:center}.vc-ps-body{padding:15px;display:flex}.vc-ps-saturation-wrap{width:256px;height:256px;position:relative;border:2px solid #b3b3b3;border-bottom:2px solid #f0f0f0;overflow:hidden}.vc-ps-saturation-wrap .vc-saturation-circle{width:12px;height:12px}.vc-ps-hue-wrap{height:256px;width:19px;margin-left:10px;border:2px solid #b3b3b3;border-bottom:2px solid #f0f0f0}.vc-ps-hue-pointer,.vc-ps-hue-wrap{position:relative}.vc-ps-hue-pointer--left,.vc-ps-hue-pointer--right{position:absolute;width:0;height:0;border-style:solid;border-width:5px 0 5px 8px;border-color:transparent transparent transparent #555}.vc-ps-hue-pointer--left:after,.vc-ps-hue-pointer--right:after{content:"";width:0;height:0;border-style:solid;border-width:4px 0 4px 6px;border-color:transparent transparent transparent #fff;position:absolute;top:1px;left:1px;transform:translate(-8px,-5px)}.vc-ps-hue-pointer--left{transform:translate(-13px,-4px)}.vc-ps-hue-pointer--right{transform:translate(20px,-4px) rotate(180deg)}.vc-ps-controls{width:180px;margin-left:10px;display:flex}.vc-ps-controls__disable-fields{width:auto}.vc-ps-actions{margin-left:20px;flex:1}.vc-ps-ac-btn{cursor:pointer;background-image:linear-gradient(-180deg,#fff,#e6e6e6);border:1px solid #878787;border-radius:2px;height:20px;box-shadow:0 1px 0 0 #eaeaea;font-size:14px;color:#000;line-height:20px;text-align:center;margin-bottom:10px}.vc-ps-previews{width:60px}.vc-ps-previews__swatches{border:1px solid #b3b3b3;border-bottom:1px solid #f0f0f0;margin-bottom:2px;margin-top:1px}.vc-ps-previews__pr-color{height:34px;box-shadow:inset 1px 0 0 #000,inset -1px 0 0 #000,inset 0 1px 0 #000}.vc-ps-previews__label{font-size:14px;color:#000;text-align:center}.vc-ps-fields{padding-top:5px;padding-bottom:9px;width:80px;position:relative}.vc-ps-fields .vc-input__input{margin-left:40%;width:40%;height:18px;border:1px solid #888;box-shadow:inset 0 1px 1px rgba(0,0,0,.1),0 1px 0 0 #ececec;margin-bottom:5px;font-size:13px;padding-left:3px;margin-right:10px}.vc-ps-fields .vc-input__desc,.vc-ps-fields .vc-input__label{top:0;text-transform:uppercase;font-size:13px;height:18px;line-height:22px;position:absolute}.vc-ps-fields .vc-input__label{left:0;width:34px}.vc-ps-fields .vc-input__desc{right:0;width:0}.vc-ps-fields__divider{height:5px}.vc-ps-fields__hex .vc-input__input{margin-left:20%;width:80%;height:18px;border:1px solid #888;box-shadow:inset 0 1px 1px rgba(0,0,0,.1),0 1px 0 0 #ececec;margin-bottom:6px;font-size:13px;padding-left:3px}.vc-ps-fields__hex .vc-input__label{position:absolute;top:0;left:0;width:14px;text-transform:uppercase;font-size:13px;height:18px;line-height:22px}',""]),i.default=m},7279:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-sketch{position:relative;width:200px;padding:10px 10px 0;box-sizing:initial;background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15)}.vc-sketch-saturation-wrap{width:100%;padding-bottom:75%;position:relative;overflow:hidden}.vc-sketch-controls{display:flex}.vc-sketch-sliders{padding:4px 0;flex:1}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{position:relative;height:10px}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{width:24px;height:24px;position:relative;margin-top:4px;margin-left:4px;border-radius:3px}.vc-sketch-active-color{position:absolute;top:0;left:0;right:0;bottom:0;border-radius:2px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{width:90%;padding:4px 0 3px 10%;border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px}.vc-sketch-field .vc-input__label{display:block;text-align:center;font-size:11px;color:#222;padding-top:3px;padding-bottom:4px;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{margin-right:-10px;margin-left:-10px;padding-left:10px;padding-top:10px;border-top:1px solid #eee}.vc-sketch-presets-color{overflow:hidden;position:relative;display:inline-block;margin:0 10px 10px 0;vertical-align:top;cursor:pointer;width:16px;height:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}",""]),i.default=m},6278:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-slider{position:relative;width:410px}.vc-slider-hue-warp{height:12px;position:relative}.vc-slider-hue-warp .vc-hue-picker{width:14px;height:14px;border-radius:6px;transform:translate(-7px,-2px);background-color:#f8f8f8;box-shadow:0 1px 4px 0 rgba(0,0,0,.37)}.vc-slider-swatches{display:flex;margin-top:20px}.vc-slider-swatch{margin-right:1px;flex:1;width:20%}.vc-slider-swatch:first-child{margin-right:1px}.vc-slider-swatch:first-child .vc-slider-swatch-picker{border-radius:2px 0 0 2px}.vc-slider-swatch:last-child{margin-right:0}.vc-slider-swatch:last-child .vc-slider-swatch-picker{border-radius:0 2px 2px 0}.vc-slider-swatch-picker{cursor:pointer;height:12px}.vc-slider-swatch:nth-child(n) .vc-slider-swatch-picker.vc-slider-swatch-picker--active{transform:scaleY(1.8);border-radius:3.6px/2px}.vc-slider-swatch-picker--white{box-shadow:inset 0 0 0 1px #ddd}.vc-slider-swatch-picker--active.vc-slider-swatch-picker--white{box-shadow:inset 0 0 0 .6px #ddd}",""]),i.default=m},3468:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-swatches{width:320px;height:240px;overflow-y:scroll;background-color:#fff;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16)}.vc-swatches-box{padding:16px 0 6px 16px;overflow:hidden}.vc-swatches-color-group{padding-bottom:10px;width:40px;float:left;margin-right:10px}.vc-swatches-color-it{box-sizing:border-box;width:40px;height:24px;cursor:pointer;background:#880e4f;margin-bottom:1px;overflow:hidden;border-radius:2px 2px 0 0}.vc-swatches-color--white{border:1px solid #ddd}.vc-swatches-pick{fill:#fff;margin-left:8px;display:block}.vc-swatches-color--white .vc-swatches-pick{fill:#333}",""]),i.default=m},5689:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-twitter{background:#fff;border:0 solid rgba(0,0,0,.25);box-shadow:0 1px 4px rgba(0,0,0,.25);border-radius:4px;position:relative}.vc-twitter-triangle{border-color:transparent transparent #fff transparent}.vc-twitter-triangle,.vc-twitter-triangle-shadow{width:0;height:0;border-style:solid;border-width:0 9px 10px 9px;position:absolute}.vc-twitter-triangle-shadow{border-color:transparent transparent rgba(0,0,0,.1) transparent}.vc-twitter-body{padding:15px 9px 9px 15px}.vc-twitter .vc-editable-input{position:relative}.vc-twitter .vc-editable-input input{width:100px;font-size:14px;color:#666;border:0;outline:none;height:28px;box-shadow:inset 0 0 0 1px #f0f0f0;box-sizing:content-box;border-radius:0 4px 4px 0;float:left;padding:1px;padding-left:8px}.vc-twitter .vc-editable-input span{display:none}.vc-twitter-hash{background:#f0f0f0;height:30px;width:30px;border-radius:4px 0 0 4px;float:left;color:#98a1a4;display:flex;align-items:center;justify-content:center}.vc-twitter-swatch{width:30px;height:30px;float:left;border-radius:4px;margin:0 6px 6px 0;cursor:pointer;position:relative;outline:none}.vc-twitter-clear{clear:both}.vc-twitter-hide-triangle .vc-twitter-triangle,.vc-twitter-hide-triangle .vc-twitter-triangle-shadow{display:none}.vc-twitter-top-left-triangle .vc-twitter-triangle{top:-10px;left:12px}.vc-twitter-top-left-triangle .vc-twitter-triangle-shadow{top:-11px;left:12px}.vc-twitter-top-right-triangle .vc-twitter-triangle{top:-10px;right:12px}.vc-twitter-top-right-triangle .vc-twitter-triangle-shadow{top:-11px;right:12px}",""]),i.default=m},2410:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-alpha,.vc-alpha-checkboard-wrap{position:absolute;top:0;right:0;bottom:0;left:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{position:absolute;top:0;right:0;bottom:0;left:0}.vc-alpha-container{cursor:pointer;position:relative;z-index:2;height:100%;margin:0 3px}.vc-alpha-pointer{z-index:2;position:absolute}.vc-alpha-picker{cursor:pointer;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px rgba(0,0,0,.6);background:#fff;margin-top:1px;transform:translateX(-2px)}",""]),i.default=m},3142:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-checkerboard{position:absolute;top:0;right:0;bottom:0;left:0;background-size:contain}",""]),i.default=m},7953:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-editable-input{position:relative}.vc-input__input{padding:0;border:0;outline:none}.vc-input__label{text-transform:capitalize}",""]),i.default=m},3097:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-hue{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:2px}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;margin:0 2px;position:relative;height:100%}.vc-hue-pointer{z-index:2;position:absolute}.vc-hue-picker{cursor:pointer;margin-top:1px;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px rgba(0,0,0,.6);background:#fff;transform:translateX(-2px)}",""]),i.default=m},4339:function(a,i,r){r.r(i);var l=r(8081),c=r.n(l),u=r(3645),d=r.n(u),m=d()(c());m.push([a.id,".vc-saturation,.vc-saturation--black,.vc-saturation--white{cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{cursor:head;width:4px;height:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;transform:translate(-2px,-2px)}",""]),i.default=m},3645:function(a){a.exports=function(i){var r=[];return r.toString=function(){return this.map(function(c){var u="",d=typeof c[5]<"u";return c[4]&&(u+="@supports (".concat(c[4],") {")),c[2]&&(u+="@media ".concat(c[2]," {")),d&&(u+="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {")),u+=i(c),d&&(u+="}"),c[2]&&(u+="}"),c[4]&&(u+="}"),u}).join("")},r.i=function(c,u,d,m,f){typeof c=="string"&&(c=[[null,c,void 0]]);var g={};if(d)for(var T=0;T<this.length;T++){var S=this[T][0];S!=null&&(g[S]=!0)}for(var _=0;_<c.length;_++){var E=[].concat(c[_]);d&&g[E[0]]||(typeof f<"u"&&(typeof E[5]>"u"||(E[1]="@layer".concat(E[5].length>0?" ".concat(E[5]):""," {").concat(E[1],"}")),E[5]=f),u&&(E[2]&&(E[1]="@media ".concat(E[2]," {").concat(E[1],"}")),E[2]=u),m&&(E[4]?(E[1]="@supports (".concat(E[4],") {").concat(E[1],"}"),E[4]=m):E[4]="".concat(m)),r.push(E))}},r}},8081:function(a){a.exports=function(i){return i[1]}},9428:function(a){a.exports=i;function i(r,l,c){return l<c?r<l?l:r>c?c:r:r<c?c:r>l?l:r}},9016:function(a,i,r){var l=r(9159),c=l.Symbol;a.exports=c},6423:function(a,i,r){var l=r(9016),c=r(2366),u=r(2886),d="[object Null]",m="[object Undefined]",f=l?l.toStringTag:void 0;function g(T){return T==null?T===void 0?m:d:f&&f in Object(T)?c(T):u(T)}a.exports=g},6009:function(a,i,r){var l=r(1626),c=/^\s+/;function u(d){return d&&d.slice(0,l(d)+1).replace(c,"")}a.exports=u},791:function(a,i,r){var l=typeof r.g=="object"&&r.g&&r.g.Object===Object&&r.g;a.exports=l},2366:function(a,i,r){var l=r(9016),c=Object.prototype,u=c.hasOwnProperty,d=c.toString,m=l?l.toStringTag:void 0;function f(g){var T=u.call(g,m),S=g[m];try{g[m]=void 0;var _=!0}catch{}var E=d.call(g);return _&&(T?g[m]=S:delete g[m]),E}a.exports=f},2886:function(a){var i=Object.prototype,r=i.toString;function l(c){return r.call(c)}a.exports=l},9159:function(a,i,r){var l=r(791),c=typeof self=="object"&&self&&self.Object===Object&&self,u=l||c||Function("return this")();a.exports=u},1626:function(a){var i=/\s/;function r(l){for(var c=l.length;c--&&i.test(l.charAt(c)););return c}a.exports=r},3738:function(a,i,r){r(1703);var l=r(150),c=r(657),u=r(2012),d="Expected a function",m=Math.max,f=Math.min;function g(T,S,_){var E,b,I,R,O,x,L=0,F=!1,D=!1,V=!0;if(typeof T!="function")throw new TypeError(d);S=u(S)||0,l(_)&&(F=!!_.leading,D="maxWait"in _,I=D?m(u(_.maxWait)||0,S):I,V="trailing"in _?!!_.trailing:V);function B(G){var H=E,W=b;return E=b=void 0,L=G,R=T.apply(W,H),R}function P(G){return L=G,O=setTimeout(j,S),F?B(G):R}function k(G){var H=G-x,W=G-L,J=S-H;return D?f(J,I-W):J}function U(G){var H=G-x,W=G-L;return x===void 0||H>=S||H<0||D&&W>=I}function j(){var G=c();if(U(G))return z(G);O=setTimeout(j,k(G))}function z(G){return O=void 0,V&&E?B(G):(E=b=void 0,R)}function Y(){O!==void 0&&clearTimeout(O),L=0,E=x=b=O=void 0}function te(){return O===void 0?R:z(c())}function Z(){var G=c(),H=U(G);if(E=arguments,b=this,x=G,H){if(O===void 0)return P(x);if(D)return clearTimeout(O),O=setTimeout(j,S),B(x)}return O===void 0&&(O=setTimeout(j,S)),R}return Z.cancel=Y,Z.flush=te,Z}a.exports=g},150:function(a){function i(r){var l=typeof r;return r!=null&&(l=="object"||l=="function")}a.exports=i},4430:function(a){function i(r){return r!=null&&typeof r=="object"}a.exports=i},7691:function(a,i,r){var l=r(6423),c=r(4430),u="[object Symbol]";function d(m){return typeof m=="symbol"||c(m)&&l(m)==u}a.exports=d},657:function(a,i,r){var l=r(9159),c=function(){return l.Date.now()};a.exports=c},9289:function(a,i,r){r(1703);var l=r(3738),c=r(150),u="Expected a function";function d(m,f,g){var T=!0,S=!0;if(typeof m!="function")throw new TypeError(u);return c(g)&&(T="leading"in g?!!g.leading:T,S="trailing"in g?!!g.trailing:S),l(m,f,{leading:T,maxWait:f,trailing:S})}a.exports=d},2012:function(a,i,r){var l=r(6009),c=r(150),u=r(7691),d=NaN,m=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,g=/^0o[0-7]+$/i,T=parseInt;function S(_){if(typeof _=="number")return _;if(u(_))return d;if(c(_)){var E=typeof _.valueOf=="function"?_.valueOf():_;_=c(E)?E+"":E}if(typeof _!="string")return _===0?_:+_;_=l(_);var b=f.test(_);return b||g.test(_)?T(_.slice(2),b?2:8):m.test(_)?d:+_}a.exports=S},7013:function(a,i,r){var l;(function(c){var u=/^\s+/,d=/\s+$/,m=0,f=c.round,g=c.min,T=c.max,S=c.random;function _(ie,be){if(ie=ie||"",be=be||{},ie instanceof _)return ie;if(!(this instanceof _))return new _(ie,be);var fe=E(ie);this._originalInput=ie,this._r=fe.r,this._g=fe.g,this._b=fe.b,this._a=fe.a,this._roundA=f(100*this._a)/100,this._format=be.format||fe.format,this._gradientType=be.gradientType,this._r<1&&(this._r=f(this._r)),this._g<1&&(this._g=f(this._g)),this._b<1&&(this._b=f(this._b)),this._ok=fe.ok,this._tc_id=m++}_.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ie=this.toRgb();return(ie.r*299+ie.g*587+ie.b*114)/1e3},getLuminance:function(){var ie=this.toRgb(),be,fe,Se,Le,ke,De;return be=ie.r/255,fe=ie.g/255,Se=ie.b/255,be<=.03928?Le=be/12.92:Le=c.pow((be+.055)/1.055,2.4),fe<=.03928?ke=fe/12.92:ke=c.pow((fe+.055)/1.055,2.4),Se<=.03928?De=Se/12.92:De=c.pow((Se+.055)/1.055,2.4),.2126*Le+.7152*ke+.0722*De},setAlpha:function(ie){return this._a=Ee(ie),this._roundA=f(100*this._a)/100,this},toHsv:function(){var ie=O(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,v:ie.v,a:this._a}},toHsvString:function(){var ie=O(this._r,this._g,this._b),be=f(ie.h*360),fe=f(ie.s*100),Se=f(ie.v*100);return this._a==1?"hsv("+be+", "+fe+"%, "+Se+"%)":"hsva("+be+", "+fe+"%, "+Se+"%, "+this._roundA+")"},toHsl:function(){var ie=I(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,l:ie.l,a:this._a}},toHslString:function(){var ie=I(this._r,this._g,this._b),be=f(ie.h*360),fe=f(ie.s*100),Se=f(ie.l*100);return this._a==1?"hsl("+be+", "+fe+"%, "+Se+"%)":"hsla("+be+", "+fe+"%, "+Se+"%, "+this._roundA+")"},toHex:function(ie){return L(this._r,this._g,this._b,ie)},toHexString:function(ie){return"#"+this.toHex(ie)},toHex8:function(ie){return F(this._r,this._g,this._b,this._a,ie)},toHex8String:function(ie){return"#"+this.toHex8(ie)},toRgb:function(){return{r:f(this._r),g:f(this._g),b:f(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+f(this._r)+", "+f(this._g)+", "+f(this._b)+")":"rgba("+f(this._r)+", "+f(this._g)+", "+f(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:f(le(this._r,255)*100)+"%",g:f(le(this._g,255)*100)+"%",b:f(le(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+f(le(this._r,255)*100)+"%, "+f(le(this._g,255)*100)+"%, "+f(le(this._b,255)*100)+"%)":"rgba("+f(le(this._r,255)*100)+"%, "+f(le(this._g,255)*100)+"%, "+f(le(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ee[L(this._r,this._g,this._b,!0)]||!1},toFilter:function(ie){var be="#"+D(this._r,this._g,this._b,this._a),fe=be,Se=this._gradientType?"GradientType = 1, ":"";if(ie){var Le=_(ie);fe="#"+D(Le._r,Le._g,Le._b,Le._a)}return"progid:DXImageTransform.Microsoft.gradient("+Se+"startColorstr="+be+",endColorstr="+fe+")"},toString:function(ie){var be=!!ie;ie=ie||this._format;var fe=!1,Se=this._a<1&&this._a>=0,Le=!be&&Se&&(ie==="hex"||ie==="hex6"||ie==="hex3"||ie==="hex4"||ie==="hex8"||ie==="name");return Le?ie==="name"&&this._a===0?this.toName():this.toRgbString():(ie==="rgb"&&(fe=this.toRgbString()),ie==="prgb"&&(fe=this.toPercentageRgbString()),(ie==="hex"||ie==="hex6")&&(fe=this.toHexString()),ie==="hex3"&&(fe=this.toHexString(!0)),ie==="hex4"&&(fe=this.toHex8String(!0)),ie==="hex8"&&(fe=this.toHex8String()),ie==="name"&&(fe=this.toName()),ie==="hsl"&&(fe=this.toHslString()),ie==="hsv"&&(fe=this.toHsvString()),fe||this.toHexString())},clone:function(){return _(this.toString())},_applyModification:function(ie,be){var fe=ie.apply(null,[this].concat([].slice.call(be)));return this._r=fe._r,this._g=fe._g,this._b=fe._b,this.setAlpha(fe._a),this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(U,arguments)},darken:function(){return this._applyModification(j,arguments)},desaturate:function(){return this._applyModification(V,arguments)},saturate:function(){return this._applyModification(B,arguments)},greyscale:function(){return this._applyModification(P,arguments)},spin:function(){return this._applyModification(z,arguments)},_applyCombination:function(ie,be){return ie.apply(null,[this].concat([].slice.call(be)))},analogous:function(){return this._applyCombination(H,arguments)},complement:function(){return this._applyCombination(Y,arguments)},monochromatic:function(){return this._applyCombination(W,arguments)},splitcomplement:function(){return this._applyCombination(G,arguments)},triad:function(){return this._applyCombination(te,arguments)},tetrad:function(){return this._applyCombination(Z,arguments)}},_.fromRatio=function(ie,be){if(typeof ie=="object"){var fe={};for(var Se in ie)ie.hasOwnProperty(Se)&&(Se==="a"?fe[Se]=ie[Se]:fe[Se]=Qe(ie[Se]));ie=fe}return _(ie,be)};function E(ie){var be={r:0,g:0,b:0},fe=1,Se=null,Le=null,ke=null,De=!1,Ue=!1;return typeof ie=="string"&&(ie=q(ie)),typeof ie=="object"&&(Lt(ie.r)&&Lt(ie.g)&&Lt(ie.b)?(be=b(ie.r,ie.g,ie.b),De=!0,Ue=String(ie.r).substr(-1)==="%"?"prgb":"rgb"):Lt(ie.h)&&Lt(ie.s)&&Lt(ie.v)?(Se=Qe(ie.s),Le=Qe(ie.v),be=x(ie.h,Se,Le),De=!0,Ue="hsv"):Lt(ie.h)&&Lt(ie.s)&&Lt(ie.l)&&(Se=Qe(ie.s),ke=Qe(ie.l),be=R(ie.h,Se,ke),De=!0,Ue="hsl"),ie.hasOwnProperty("a")&&(fe=ie.a)),fe=Ee(fe),{ok:De,format:ie.format||Ue,r:g(255,T(be.r,0)),g:g(255,T(be.g,0)),b:g(255,T(be.b,0)),a:fe}}function b(ie,be,fe){return{r:le(ie,255)*255,g:le(be,255)*255,b:le(fe,255)*255}}function I(ie,be,fe){ie=le(ie,255),be=le(be,255),fe=le(fe,255);var Se=T(ie,be,fe),Le=g(ie,be,fe),ke,De,Ue=(Se+Le)/2;if(Se==Le)ke=De=0;else{var de=Se-Le;switch(De=Ue>.5?de/(2-Se-Le):de/(Se+Le),Se){case ie:ke=(be-fe)/de+(be<fe?6:0);break;case be:ke=(fe-ie)/de+2;break;case fe:ke=(ie-be)/de+4;break}ke/=6}return{h:ke,s:De,l:Ue}}function R(ie,be,fe){var Se,Le,ke;ie=le(ie,360),be=le(be,100),fe=le(fe,100);function De(Ce,Pe,Q){return Q<0&&(Q+=1),Q>1&&(Q-=1),Q<.16666666666666666?Ce+(Pe-Ce)*6*Q:Q<.5?Pe:Q<.6666666666666666?Ce+(Pe-Ce)*(.6666666666666666-Q)*6:Ce}if(be===0)Se=Le=ke=fe;else{var Ue=fe<.5?fe*(1+be):fe+be-fe*be,de=2*fe-Ue;Se=De(de,Ue,ie+.3333333333333333),Le=De(de,Ue,ie),ke=De(de,Ue,ie-.3333333333333333)}return{r:Se*255,g:Le*255,b:ke*255}}function O(ie,be,fe){ie=le(ie,255),be=le(be,255),fe=le(fe,255);var Se=T(ie,be,fe),Le=g(ie,be,fe),ke,De,Ue=Se,de=Se-Le;if(De=Se===0?0:de/Se,Se==Le)ke=0;else{switch(Se){case ie:ke=(be-fe)/de+(be<fe?6:0);break;case be:ke=(fe-ie)/de+2;break;case fe:ke=(ie-be)/de+4;break}ke/=6}return{h:ke,s:De,v:Ue}}function x(ie,be,fe){ie=le(ie,360)*6,be=le(be,100),fe=le(fe,100);var Se=c.floor(ie),Le=ie-Se,ke=fe*(1-be),De=fe*(1-Le*be),Ue=fe*(1-(1-Le)*be),de=Se%6,Ce=[fe,De,ke,ke,Ue,fe][de],Pe=[Ue,fe,fe,De,ke,ke][de],Q=[ke,ke,Ue,fe,fe,De][de];return{r:Ce*255,g:Pe*255,b:Q*255}}function L(ie,be,fe,Se){var Le=[Xe(f(ie).toString(16)),Xe(f(be).toString(16)),Xe(f(fe).toString(16))];return Se&&Le[0].charAt(0)==Le[0].charAt(1)&&Le[1].charAt(0)==Le[1].charAt(1)&&Le[2].charAt(0)==Le[2].charAt(1)?Le[0].charAt(0)+Le[1].charAt(0)+Le[2].charAt(0):Le.join("")}function F(ie,be,fe,Se,Le){var ke=[Xe(f(ie).toString(16)),Xe(f(be).toString(16)),Xe(f(fe).toString(16)),Xe(rt(Se))];return Le&&ke[0].charAt(0)==ke[0].charAt(1)&&ke[1].charAt(0)==ke[1].charAt(1)&&ke[2].charAt(0)==ke[2].charAt(1)&&ke[3].charAt(0)==ke[3].charAt(1)?ke[0].charAt(0)+ke[1].charAt(0)+ke[2].charAt(0)+ke[3].charAt(0):ke.join("")}function D(ie,be,fe,Se){var Le=[Xe(rt(Se)),Xe(f(ie).toString(16)),Xe(f(be).toString(16)),Xe(f(fe).toString(16))];return Le.join("")}_.equals=function(ie,be){return!ie||!be?!1:_(ie).toRgbString()==_(be).toRgbString()},_.random=function(){return _.fromRatio({r:S(),g:S(),b:S()})};function V(ie,be){be=be===0?0:be||10;var fe=_(ie).toHsl();return fe.s-=be/100,fe.s=_e(fe.s),_(fe)}function B(ie,be){be=be===0?0:be||10;var fe=_(ie).toHsl();return fe.s+=be/100,fe.s=_e(fe.s),_(fe)}function P(ie){return _(ie).desaturate(100)}function k(ie,be){be=be===0?0:be||10;var fe=_(ie).toHsl();return fe.l+=be/100,fe.l=_e(fe.l),_(fe)}function U(ie,be){be=be===0?0:be||10;var fe=_(ie).toRgb();return fe.r=T(0,g(255,fe.r-f(255*-(be/100)))),fe.g=T(0,g(255,fe.g-f(255*-(be/100)))),fe.b=T(0,g(255,fe.b-f(255*-(be/100)))),_(fe)}function j(ie,be){be=be===0?0:be||10;var fe=_(ie).toHsl();return fe.l-=be/100,fe.l=_e(fe.l),_(fe)}function z(ie,be){var fe=_(ie).toHsl(),Se=(fe.h+be)%360;return fe.h=Se<0?360+Se:Se,_(fe)}function Y(ie){var be=_(ie).toHsl();return be.h=(be.h+180)%360,_(be)}function te(ie){var be=_(ie).toHsl(),fe=be.h;return[_(ie),_({h:(fe+120)%360,s:be.s,l:be.l}),_({h:(fe+240)%360,s:be.s,l:be.l})]}function Z(ie){var be=_(ie).toHsl(),fe=be.h;return[_(ie),_({h:(fe+90)%360,s:be.s,l:be.l}),_({h:(fe+180)%360,s:be.s,l:be.l}),_({h:(fe+270)%360,s:be.s,l:be.l})]}function G(ie){var be=_(ie).toHsl(),fe=be.h;return[_(ie),_({h:(fe+72)%360,s:be.s,l:be.l}),_({h:(fe+216)%360,s:be.s,l:be.l})]}function H(ie,be,fe){be=be||6,fe=fe||30;var Se=_(ie).toHsl(),Le=360/fe,ke=[_(ie)];for(Se.h=(Se.h-(Le*be>>1)+720)%360;--be;)Se.h=(Se.h+Le)%360,ke.push(_(Se));return ke}function W(ie,be){be=be||6;for(var fe=_(ie).toHsv(),Se=fe.h,Le=fe.s,ke=fe.v,De=[],Ue=1/be;be--;)De.push(_({h:Se,s:Le,v:ke})),ke=(ke+Ue)%1;return De}_.mix=function(ie,be,fe){fe=fe===0?0:fe||50;var Se=_(ie).toRgb(),Le=_(be).toRgb(),ke=fe/100,De={r:(Le.r-Se.r)*ke+Se.r,g:(Le.g-Se.g)*ke+Se.g,b:(Le.b-Se.b)*ke+Se.b,a:(Le.a-Se.a)*ke+Se.a};return _(De)},_.readability=function(ie,be){var fe=_(ie),Se=_(be);return(c.max(fe.getLuminance(),Se.getLuminance())+.05)/(c.min(fe.getLuminance(),Se.getLuminance())+.05)},_.isReadable=function(ie,be,fe){var Se=_.readability(ie,be),Le,ke;switch(ke=!1,Le=ae(fe),Le.level+Le.size){case"AAsmall":case"AAAlarge":ke=Se>=4.5;break;case"AAlarge":ke=Se>=3;break;case"AAAsmall":ke=Se>=7;break}return ke},_.mostReadable=function(ie,be,fe){var Se=null,Le=0,ke,De,Ue,de;fe=fe||{},De=fe.includeFallbackColors,Ue=fe.level,de=fe.size;for(var Ce=0;Ce<be.length;Ce++)ke=_.readability(ie,be[Ce]),ke>Le&&(Le=ke,Se=_(be[Ce]));return _.isReadable(ie,Se,{level:Ue,size:de})||!De?Se:(fe.includeFallbackColors=!1,_.mostReadable(ie,["#fff","#000"],fe))};var J=_.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ee=_.hexNames=ge(J);function ge(ie){var be={};for(var fe in ie)ie.hasOwnProperty(fe)&&(be[ie[fe]]=fe);return be}function Ee(ie){return ie=parseFloat(ie),(isNaN(ie)||ie<0||ie>1)&&(ie=1),ie}function le(ie,be){He(ie)&&(ie="100%");var fe=Je(ie);return ie=g(be,T(0,parseFloat(ie))),fe&&(ie=parseInt(ie*be,10)/100),c.abs(ie-be)<1e-6?1:ie%be/parseFloat(be)}function _e(ie){return g(1,T(0,ie))}function $e(ie){return parseInt(ie,16)}function He(ie){return typeof ie=="string"&&ie.indexOf(".")!=-1&&parseFloat(ie)===1}function Je(ie){return typeof ie=="string"&&ie.indexOf("%")!=-1}function Xe(ie){return ie.length==1?"0"+ie:""+ie}function Qe(ie){return ie<=1&&(ie=ie*100+"%"),ie}function rt(ie){return c.round(parseFloat(ie)*255).toString(16)}function at(ie){return $e(ie)/255}var Et=function(){var ie="[-\\+]?\\d+%?",be="[-\\+]?\\d*\\.\\d+%?",fe="(?:"+be+")|(?:"+ie+")",Se="[\\s|\\(]+("+fe+")[,|\\s]+("+fe+")[,|\\s]+("+fe+")\\s*\\)?",Le="[\\s|\\(]+("+fe+")[,|\\s]+("+fe+")[,|\\s]+("+fe+")[,|\\s]+("+fe+")\\s*\\)?";return{CSS_UNIT:new RegExp(fe),rgb:new RegExp("rgb"+Se),rgba:new RegExp("rgba"+Le),hsl:new RegExp("hsl"+Se),hsla:new RegExp("hsla"+Le),hsv:new RegExp("hsv"+Se),hsva:new RegExp("hsva"+Le),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Lt(ie){return!!Et.CSS_UNIT.exec(ie)}function q(ie){ie=ie.replace(u,"").replace(d,"").toLowerCase();var be=!1;if(J[ie])ie=J[ie],be=!0;else if(ie=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var fe;return(fe=Et.rgb.exec(ie))?{r:fe[1],g:fe[2],b:fe[3]}:(fe=Et.rgba.exec(ie))?{r:fe[1],g:fe[2],b:fe[3],a:fe[4]}:(fe=Et.hsl.exec(ie))?{h:fe[1],s:fe[2],l:fe[3]}:(fe=Et.hsla.exec(ie))?{h:fe[1],s:fe[2],l:fe[3],a:fe[4]}:(fe=Et.hsv.exec(ie))?{h:fe[1],s:fe[2],v:fe[3]}:(fe=Et.hsva.exec(ie))?{h:fe[1],s:fe[2],v:fe[3],a:fe[4]}:(fe=Et.hex8.exec(ie))?{r:$e(fe[1]),g:$e(fe[2]),b:$e(fe[3]),a:at(fe[4]),format:be?"name":"hex8"}:(fe=Et.hex6.exec(ie))?{r:$e(fe[1]),g:$e(fe[2]),b:$e(fe[3]),format:be?"name":"hex"}:(fe=Et.hex4.exec(ie))?{r:$e(fe[1]+""+fe[1]),g:$e(fe[2]+""+fe[2]),b:$e(fe[3]+""+fe[3]),a:at(fe[4]+""+fe[4]),format:be?"name":"hex8"}:(fe=Et.hex3.exec(ie))?{r:$e(fe[1]+""+fe[1]),g:$e(fe[2]+""+fe[2]),b:$e(fe[3]+""+fe[3]),format:be?"name":"hex"}:!1}function ae(ie){var be,fe;return ie=ie||{level:"AA",size:"small"},be=(ie.level||"AA").toUpperCase(),fe=(ie.size||"small").toLowerCase(),be!=="AA"&&be!=="AAA"&&(be="AA"),fe!=="small"&&fe!=="large"&&(fe="small"),{level:be,size:fe}}a.exports?a.exports=_:(l=(function(){return _}).call(i,r,i,a),l!==void 0&&(a.exports=l))})(Math)},89:function(a,i){i.Z=(r,l)=>{const c=r.__vccOpts||r;for(const[u,d]of l)c[u]=d;return c}},3647:function(a,i,r){var l=r(6095);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("29397b9c",l,!0,{sourceMap:!1,shadowMode:!1})},325:function(a,i,r){var l=r(6047);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("479d8be0",l,!0,{sourceMap:!1,shadowMode:!1})},5208:function(a,i,r){var l=r(9481);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("1e383f72",l,!0,{sourceMap:!1,shadowMode:!1})},1425:function(a,i,r){var l=r(5186);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("3855edf0",l,!0,{sourceMap:!1,shadowMode:!1})},1902:function(a,i,r){var l=r(3695);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("2f73e1a8",l,!0,{sourceMap:!1,shadowMode:!1})},5815:function(a,i,r){var l=r(7279);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("36c086c2",l,!0,{sourceMap:!1,shadowMode:!1})},8016:function(a,i,r){var l=r(6278);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("8bcdd408",l,!0,{sourceMap:!1,shadowMode:!1})},193:function(a,i,r){var l=r(3468);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("17a63672",l,!0,{sourceMap:!1,shadowMode:!1})},1113:function(a,i,r){var l=r(5689);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("39c50172",l,!0,{sourceMap:!1,shadowMode:!1})},6320:function(a,i,r){var l=r(2410);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("5c6f2742",l,!0,{sourceMap:!1,shadowMode:!1})},3205:function(a,i,r){var l=r(3142);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("90803b82",l,!0,{sourceMap:!1,shadowMode:!1})},1979:function(a,i,r){var l=r(7953);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("418ed5a2",l,!0,{sourceMap:!1,shadowMode:!1})},6547:function(a,i,r){var l=r(3097);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("1f7c089b",l,!0,{sourceMap:!1,shadowMode:!1})},5233:function(a,i,r){var l=r(4339);l.__esModule&&(l=l.default),typeof l=="string"&&(l=[[a.id,l,""]]),l.locals&&(a.exports=l.locals);var c=r(7037).Z;c("491ed8fe",l,!0,{sourceMap:!1,shadowMode:!1})},7037:function(a,i,r){r.d(i,{Z:function(){return b}});function l(D,V){for(var B=[],P={},k=0;k<V.length;k++){var U=V[k],j=U[0],z=U[1],Y=U[2],te=U[3],Z={id:D+":"+k,css:z,media:Y,sourceMap:te};P[j]?P[j].parts.push(Z):B.push(P[j]={id:j,parts:[Z]})}return B}var c=typeof document<"u";if(typeof DEBUG<"u"&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u={},d=c&&(document.head||document.getElementsByTagName("head")[0]),m=null,f=0,g=!1,T=function(){},S=null,_="data-vue-ssr-id",E=typeof navigator<"u"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function b(D,V,B,P){g=B,S=P||{};var k=l(D,V);return I(k),function(j){for(var z=[],Y=0;Y<k.length;Y++){var te=k[Y],Z=u[te.id];Z.refs--,z.push(Z)}j?(k=l(D,j),I(k)):k=[];for(var Y=0;Y<z.length;Y++){var Z=z[Y];if(Z.refs===0){for(var G=0;G<Z.parts.length;G++)Z.parts[G]();delete u[Z.id]}}}}function I(D){for(var V=0;V<D.length;V++){var B=D[V],P=u[B.id];if(P){P.refs++;for(var k=0;k<P.parts.length;k++)P.parts[k](B.parts[k]);for(;k<B.parts.length;k++)P.parts.push(O(B.parts[k]));P.parts.length>B.parts.length&&(P.parts.length=B.parts.length)}else{for(var U=[],k=0;k<B.parts.length;k++)U.push(O(B.parts[k]));u[B.id]={id:B.id,refs:1,parts:U}}}}function R(){var D=document.createElement("style");return D.type="text/css",d.appendChild(D),D}function O(D){var V,B,P=document.querySelector("style["+_+'~="'+D.id+'"]');if(P){if(g)return T;P.parentNode.removeChild(P)}if(E){var k=f++;P=m||(m=R()),V=L.bind(null,P,k,!1),B=L.bind(null,P,k,!0)}else P=R(),V=F.bind(null,P),B=function(){P.parentNode.removeChild(P)};return V(D),function(j){if(j){if(j.css===D.css&&j.media===D.media&&j.sourceMap===D.sourceMap)return;V(D=j)}else B()}}var x=function(){var D=[];return function(V,B){return D[V]=B,D.filter(Boolean).join(`
`)}}();function L(D,V,B,P){var k=B?"":P.css;if(D.styleSheet)D.styleSheet.cssText=x(V,k);else{var U=document.createTextNode(k),j=D.childNodes;j[V]&&D.removeChild(j[V]),j.length?D.insertBefore(U,j[V]):D.appendChild(U)}}function F(D,V){var B=V.css,P=V.media,k=V.sourceMap;if(P&&D.setAttribute("media",P),S.ssrId&&D.setAttribute(_,V.id),k&&(B+=`
/*# sourceURL=`+k.sources[0]+" */",B+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(k))))+" */"),D.styleSheet)D.styleSheet.cssText=B;else{for(;D.firstChild;)D.removeChild(D.firstChild);D.appendChild(document.createTextNode(B))}}}},n={};function s(a){var i=n[a];if(i!==void 0)return i.exports;var r=n[a]={id:a,exports:{}};return t[a](r,r.exports,s),r.exports}(function(){s.n=function(a){var i=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(i,{a:i}),i}})(),function(){s.d=function(a,i){for(var r in i)s.o(i,r)&&!s.o(a,r)&&Object.defineProperty(a,r,{enumerable:!0,get:i[r]})}}(),function(){s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){s.o=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)}}(),function(){s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){s.p=""}();var o={};(function(){if(s.r(o),s.d(o,{Alpha:function(){return jc},Checkboard:function(){return _l},Chrome:function(){return w_},ColorMixin:function(){return _},Compact:function(){return O},EditableInput:function(){return _e},Grayscale:function(){return U},Hue:function(){return Se},Material:function(){return Je},Photoshop:function(){return O_},Saturation:function(){return no},Sketch:function(){return N_},Slider:function(){return Ue},Swatches:function(){return Ls},Twitter:function(){return R_},default:function(){return V2},version:function(){return x_}}),typeof window<"u"){var a=window.document.currentScript,i=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(s.p=i[1])}var r={i8:"3.0.6"},l=d0;const c={role:"application","aria-label":"Compact color picker",class:"vc-compact"},u={class:"vc-compact-colors",role:"listbox"},d=["aria-label","aria-selected","onClick"],m={class:"vc-compact-dot"};function f(me,Ke,it,xt,kt,ze){return(0,l.openBlock)(),(0,l.createElementBlock)("div",c,[(0,l.createElementVNode)("ul",u,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(me.paletteUpperCase(it.palette),Nt=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{role:"option","aria-label":"color:"+Nt,"aria-selected":Nt===ze.pick,class:(0,l.normalizeClass)(["vc-compact-color-item",{"vc-compact-color-item--white":Nt==="#FFFFFF"}]),key:Nt,style:(0,l.normalizeStyle)({background:Nt}),onClick:Gt=>ze.handlerClick(Nt)},[(0,l.withDirectives)((0,l.createElementVNode)("div",m,null,512),[[l.vShow,Nt===ze.pick]])],14,d))),128))])])}var g=s(7013),T=s.n(g);function S(me={},Ke=0){const it=me&&me.a;let xt;me&&me.hsl?xt=T()(me.hsl):me&&me.hex&&me.hex.length>0?xt=T()(me.hex):me&&me.hsv?xt=T()(me.hsv):me&&me.rgba?xt=T()(me.rgba):me&&me.rgb?xt=T()(me.rgb):xt=T()(me),xt&&(xt._a===void 0||xt._a===null)&&xt.setAlpha(it||1);const kt=xt.toHsl(),ze=xt.toHsv();return kt.s===0&&(ze.h=kt.h=me.h||me.hsl&&me.hsl.h||Ke||0),{hsl:kt,hex:xt.toHexString().toUpperCase(),hex8:xt.toHex8String().toUpperCase(),rgba:xt.toRgb(),hsv:ze,oldHue:me.h||Ke||kt.h,source:me.source,a:me.a||xt.getAlpha()}}var _={props:["modelValue"],data(){return{val:S(this.modelValue)}},computed:{colors:{get(){return this.val},set(me){this.val=me,this.$emit("update:modelValue",me)}}},watch:{modelValue(me){this.val=S(me)}},methods:{colorChange(me,Ke){this.oldHue=this.colors.hsl.h,this.colors=S(me,Ke||this.oldHue)},isValidHex(me){return T()(me).isValid()},simpleCheckForValidColor(me){const Ke=["r","g","b","a","h","s","l","v"];let it=0,xt=0;for(let kt=0;kt<Ke.length;kt++){const ze=Ke[kt];me[ze]&&(it++,isNaN(me[ze])||xt++)}if(it===xt)return me},paletteUpperCase(me){return me.map(Ke=>Ke.toUpperCase())},isTransparent(me){return T()(me).getAlpha()===0}}};const E=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"];var b={name:"Compact",mixins:[_],props:{palette:{type:Array,default(){return E}}},components:{},computed:{pick(){return this.colors.hex.toUpperCase()}},methods:{handlerClick(me){this.colorChange({hex:me,source:"hex"})}}};s(325);var I=s(89),O=(0,I.Z)(b,[["render",f]]);const x={role:"application","aria-label":"Grayscale color picker",class:"vc-grayscale"},L={class:"vc-grayscale-colors",role:"listbox"},F=["aria-label","aria-selected","onClick"],D={class:"vc-grayscale-dot"};function V(me,Ke,it,xt,kt,ze){return(0,l.openBlock)(),(0,l.createElementBlock)("div",x,[(0,l.createElementVNode)("ul",L,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(me.paletteUpperCase(it.palette),Nt=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{role:"option","aria-label":"Color:"+Nt,"aria-selected":Nt===ze.pick,key:Nt,class:(0,l.normalizeClass)(["vc-grayscale-color-item",{"vc-grayscale-color-item--white":Nt=="#FFFFFF"}]),style:(0,l.normalizeStyle)({background:Nt}),onClick:Gt=>ze.handlerClick(Nt)},[(0,l.withDirectives)((0,l.createElementVNode)("div",D,null,512),[[l.vShow,Nt===ze.pick]])],14,F))),128))])])}const B=["#FFFFFF","#F2F2F2","#E6E6E6","#D9D9D9","#CCCCCC","#BFBFBF","#B3B3B3","#A6A6A6","#999999","#8C8C8C","#808080","#737373","#666666","#595959","#4D4D4D","#404040","#333333","#262626","#0D0D0D","#000000"];var P={name:"Grayscale",mixins:[_],props:{palette:{type:Array,default(){return B}}},components:{},computed:{pick(){return this.colors.hex.toUpperCase()}},methods:{handlerClick(me){this.colorChange({hex:me,source:"hex"})}}};s(5208);var U=(0,I.Z)(P,[["render",V]]);const j={role:"application","aria-label":"Material color picker",class:"vc-material"},z={class:"vc-material-split"},Y={class:"vc-material-third"},te={class:"vc-material-third"},Z={class:"vc-material-third"};function G(me,Ke,it,xt,kt,ze){const Nt=(0,l.resolveComponent)("ed-in");return(0,l.openBlock)(),(0,l.createElementBlock)("div",j,[(0,l.createVNode)(Nt,{class:"vc-material-hex",label:"hex",modelValue:me.colors.hex,"onUpdate:modelValue":Ke[0]||(Ke[0]=Gt=>me.colors.hex=Gt),style:(0,l.normalizeStyle)({borderColor:me.colors.hex}),onChange:ze.onChange},null,8,["modelValue","style","onChange"]),(0,l.createElementVNode)("div",z,[(0,l.createElementVNode)("div",Y,[(0,l.createVNode)(Nt,{label:"r",modelValue:me.colors.rgba.r,"onUpdate:modelValue":Ke[1]||(Ke[1]=Gt=>me.colors.rgba.r=Gt),onChange:ze.onChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",te,[(0,l.createVNode)(Nt,{label:"g",modelValue:me.colors.rgba.g,"onUpdate:modelValue":Ke[2]||(Ke[2]=Gt=>me.colors.rgba.g=Gt),onChange:ze.onChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",Z,[(0,l.createVNode)(Nt,{label:"b",modelValue:me.colors.rgba.b,"onUpdate:modelValue":Ke[3]||(Ke[3]=Gt=>me.colors.rgba.b=Gt),onChange:ze.onChange},null,8,["modelValue","onChange"])])])])}const H={class:"vc-editable-input"},W=["aria-labelledby"],J=["for","id"],ee={class:"vc-input__desc"};function ge(me,Ke,it,xt,kt,ze){return(0,l.openBlock)(),(0,l.createElementBlock)("div",H,[(0,l.withDirectives)((0,l.createElementVNode)("input",{"aria-labelledby":ze.labelId,class:"vc-input__input","onUpdate:modelValue":Ke[0]||(Ke[0]=Nt=>ze.val=Nt),onKeydown:Ke[1]||(Ke[1]=(...Nt)=>ze.handleKeyDown&&ze.handleKeyDown(...Nt)),onInput:Ke[2]||(Ke[2]=(...Nt)=>ze.update&&ze.update(...Nt)),ref:"input"},null,40,W),[[l.vModelText,ze.val]]),(0,l.createElementVNode)("span",{for:it.label,class:"vc-input__label",id:ze.labelId},(0,l.toDisplayString)(ze.labelSpanText),9,J),(0,l.createElementVNode)("span",ee,(0,l.toDisplayString)(it.desc),1)])}var Ee={name:"editableInput",props:{label:String,labelText:String,desc:String,modelValue:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.modelValue},set(me){if(this.max!==void 0&&+me>this.max)this.$refs.input.value=this.max;else return me}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(me){this.handleChange(me.target.value)},handleChange(me){const Ke={};Ke[this.label]=me,Ke.hex===void 0&&Ke["#"]===void 0?this.$emit("change",Ke):me.length>5&&this.$emit("change",Ke)},handleKeyDown(me){let Ke=this.val;const it=Number(Ke);if(it){const xt=this.arrowOffset||1;me.keyCode===38&&(Ke=it+xt,this.handleChange(Ke),me.preventDefault()),me.keyCode===40&&(Ke=it-xt,this.handleChange(Ke),me.preventDefault())}}}};s(1979);var _e=(0,I.Z)(Ee,[["render",ge]]),$e={name:"Material",mixins:[_],components:{"ed-in":_e},methods:{onChange(me){me&&(me.hex?this.isValidHex(me.hex)&&this.colorChange({hex:me.hex,source:"hex"}):(me.r||me.g||me.b)&&this.colorChange({r:me.r||this.colors.rgba.r,g:me.g||this.colors.rgba.g,b:me.b||this.colors.rgba.b,a:me.a||this.colors.rgba.a,source:"rgba"}))}}};s(1425);var Je=(0,I.Z)($e,[["render",G]]);const Xe={role:"application","aria-label":"Slider color picker",class:"vc-slider"},Qe={class:"vc-slider-hue-warp"},rt={class:"vc-slider-swatches",role:"group"},at=["data-index","aria-label","onClick"];function Et(me,Ke,it,xt,kt,ze){const Nt=(0,l.resolveComponent)("hue");return(0,l.openBlock)(),(0,l.createElementBlock)("div",Xe,[(0,l.createElementVNode)("div",Qe,[(0,l.createVNode)(Nt,{modelValue:me.colors,"onUpdate:modelValue":Ke[0]||(Ke[0]=Gt=>me.colors=Gt),onChange:ze.hueChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",rt,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(ze.normalizedSwatches,(Gt,mn)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"vc-slider-swatch",key:mn,"data-index":mn,"aria-label":"color:"+me.colors.hex,role:"button",onClick:Mn=>ze.handleSwClick(mn,Gt)},[(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["vc-slider-swatch-picker",{"vc-slider-swatch-picker--active":ze.isActive(Gt,mn),"vc-slider-swatch-picker--white":Gt.l===1}]),style:(0,l.normalizeStyle)({background:"hsl("+me.colors.hsl.h+", "+Gt.s*100+"%, "+Gt.l*100+"%)"})},null,6)],8,at))),128))])])}const Lt=["aria-valuenow"],ae=[(0,l.createElementVNode)("div",{class:"vc-hue-picker"},null,-1)];function ie(me,Ke,it,xt,kt,ze){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:(0,l.normalizeClass)(["vc-hue",ze.directionClass])},[(0,l.createElementVNode)("div",{class:"vc-hue-container",role:"slider","aria-valuenow":ze.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",ref:"container",onMousedown:Ke[0]||(Ke[0]=(...Nt)=>ze.handleMouseDown&&ze.handleMouseDown(...Nt)),onTouchmove:Ke[1]||(Ke[1]=(...Nt)=>ze.handleChange&&ze.handleChange(...Nt)),onTouchstart:Ke[2]||(Ke[2]=(...Nt)=>ze.handleChange&&ze.handleChange(...Nt))},[(0,l.createElementVNode)("div",{class:"vc-hue-pointer",style:(0,l.normalizeStyle)({top:ze.pointerTop,left:ze.pointerLeft}),role:"presentation"},ae,4)],40,Lt)],2)}var be={name:"Hue",props:{modelValue:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){const me=this.modelValue.hsl.h;return me!==0&&me-this.oldHue>0&&(this.pullDirection="right"),me!==0&&me-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=me,this.modelValue},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:-(this.colors.hsl.h*100/360)+100+"%":0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":this.colors.hsl.h*100/360+"%"}},methods:{handleChange(me,Ke){!Ke&&me.preventDefault();const it=this.$refs.container;if(!it)return;const xt=it.clientWidth,kt=it.clientHeight,ze=it.getBoundingClientRect().left+window.pageXOffset,Nt=it.getBoundingClientRect().top+window.pageYOffset,Gt=me.pageX||(me.touches?me.touches[0].pageX:0),mn=me.pageY||(me.touches?me.touches[0].pageY:0),Mn=Gt-ze,jn=mn-Nt;let Xt,ei;this.direction==="vertical"?(jn<0?Xt=360:jn>kt?Xt=0:(ei=-(jn*100/kt)+100,Xt=360*ei/100),this.colors.hsl.h!==Xt&&this.$emit("change",{h:Xt,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(Mn<0?Xt=0:Mn>xt?Xt=360:(ei=Mn*100/xt,Xt=360*ei/100),this.colors.hsl.h!==Xt&&this.$emit("change",{h:Xt,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(me){this.handleChange(me,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(me){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(6547);var Se=(0,I.Z)(be,[["render",ie]]);const Le=.5;var ke={name:"Slider",mixins:[_],props:{swatches:{type:Array,default(){return[{s:Le,l:.8},{s:Le,l:.65},{s:Le,l:.5},{s:Le,l:.35},{s:Le,l:.2}]}}},components:{hue:Se},computed:{normalizedSwatches(){return this.swatches.map(Ke=>typeof Ke!="object"?{s:Le,l:Ke}:Ke)}},methods:{isActive(me,Ke){const it=this.colors.hsl;return it.l===1&&me.l===1||it.l===0&&me.l===0?!0:Math.abs(it.l-me.l)<.01&&Math.abs(it.s-me.s)<.01},hueChange(me){this.colorChange(me)},handleSwClick(me,Ke){this.colorChange({h:this.colors.hsl.h,s:Ke.s,l:Ke.l,source:"hsl"})}}};s(8016);var Ue=(0,I.Z)(ke,[["render",Et]]);const de=["data-pick"],Ce={class:"vc-swatches-box",role:"listbox"},Pe=["aria-label","aria-selected","data-color","onClick"],Q={class:"vc-swatches-pick"},ue=[(0,l.createElementVNode)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},[(0,l.createElementVNode)("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})],-1)];function ve(me,Ke,it,xt,kt,ze){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{role:"application","aria-label":"Swatches color picker",class:"vc-swatches","data-pick":ze.pick},[(0,l.createElementVNode)("div",Ce,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(it.palette,(Nt,Gt)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"vc-swatches-color-group",key:Gt},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(Nt,mn=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{class:(0,l.normalizeClass)(["vc-swatches-color-it",{"vc-swatches-color--white":mn==="#FFFFFF"}]),role:"option","aria-label":"Color:"+mn,"aria-selected":ze.equal(mn),key:mn,"data-color":mn,style:(0,l.normalizeStyle)({background:mn}),onClick:Mn=>ze.handlerClick(mn)},[(0,l.withDirectives)((0,l.createElementVNode)("div",Q,ue,512),[[l.vShow,ze.equal(mn)]])],14,Pe))),128))]))),128))])],8,de)}var we={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},he={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Te={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Ie={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},ye={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Be={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},xe={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},Ge={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},ot={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Tt={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},Ze={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},St={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},Ve={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},ft={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Bt={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},et={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},gt={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},tt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},Ct={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},vn={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},ut={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},$t={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},Mt={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},Tn="#ffffff",Os="#000000",$n={red:we,pink:he,purple:Te,deepPurple:Ie,indigo:ye,blue:Be,lightBlue:xe,cyan:Ge,teal:ot,green:Tt,lightGreen:Ze,lime:St,yellow:Ve,amber:ft,orange:Bt,deepOrange:et,brown:gt,grey:tt,blueGrey:Ct,darkText:vn,lightText:ut,darkIcons:$t,lightIcons:Mt,white:Tn,black:Os};const Sn=["red","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","blueGrey","black"],_s=["900","700","500","300","100"],Ns=(()=>{const me=[];return Sn.forEach(Ke=>{let it=[];Ke.toLowerCase()==="black"||Ke.toLowerCase()==="white"?it=it.concat(["#000000","#FFFFFF"]):_s.forEach(xt=>{const kt=$n[Ke][xt];it.push(kt.toUpperCase())}),me.push(it)}),me})();var Es={name:"Swatches",mixins:[_],props:{palette:{type:Array,default(){return Ns}}},computed:{pick(){return this.colors.hex}},methods:{equal(me){return me.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick(me){this.colorChange({hex:me,source:"hex"})}}};s(193);var Ls=(0,I.Z)(Es,[["render",ve]]);const us={role:"heading",class:"vc-ps-head"},sa={class:"vc-ps-body"},to={class:"vc-ps-saturation-wrap"},No={class:"vc-ps-hue-wrap"},mr=(0,l.createElementVNode)("div",{class:"vc-ps-hue-pointer"},[(0,l.createElementVNode)("i",{class:"vc-ps-hue-pointer--left"}),(0,l.createElementVNode)("i",{class:"vc-ps-hue-pointer--right"})],-1),fr={class:"vc-ps-previews"},Jo={class:"vc-ps-previews__label"},dn={class:"vc-ps-previews__swatches"},gr=["aria-label"],_r=["aria-label"],nt={class:"vc-ps-previews__label"},vt={key:0,class:"vc-ps-actions"},Yt=["aria-label"],ds=["aria-label"],Pa={class:"vc-ps-fields"},In=(0,l.createElementVNode)("div",{class:"vc-ps-fields__divider"},null,-1),Sa=(0,l.createElementVNode)("div",{class:"vc-ps-fields__divider"},null,-1);function xi(me,Ke,it,xt,kt,ze){const Nt=(0,l.resolveComponent)("saturation"),Gt=(0,l.resolveComponent)("hue"),mn=(0,l.resolveComponent)("ed-in");return(0,l.openBlock)(),(0,l.createElementBlock)("div",{role:"application","aria-label":"PhotoShop color picker",class:(0,l.normalizeClass)(["vc-photoshop",it.disableFields?"vc-photoshop__disable-fields":""])},[(0,l.createElementVNode)("div",us,(0,l.toDisplayString)(it.head),1),(0,l.createElementVNode)("div",sa,[(0,l.createElementVNode)("div",to,[(0,l.createVNode)(Nt,{modelValue:me.colors,"onUpdate:modelValue":Ke[0]||(Ke[0]=Mn=>me.colors=Mn),onChange:ze.childChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",No,[(0,l.createVNode)(Gt,{modelValue:me.colors,"onUpdate:modelValue":Ke[1]||(Ke[1]=Mn=>me.colors=Mn),onChange:ze.childChange,direction:"vertical"},{default:(0,l.withCtx)(()=>[mr]),_:1},8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["vc-ps-controls",it.disableFields?"vc-ps-controls__disable-fields":""])},[(0,l.createElementVNode)("div",fr,[(0,l.createElementVNode)("div",Jo,(0,l.toDisplayString)(it.newLabel),1),(0,l.createElementVNode)("div",dn,[(0,l.createElementVNode)("div",{class:"vc-ps-previews__pr-color","aria-label":`New color is ${me.colors.hex}`,style:(0,l.normalizeStyle)({background:me.colors.hex})},null,12,gr),(0,l.createElementVNode)("div",{class:"vc-ps-previews__pr-color","aria-label":`Current color is ${kt.currentColor}`,style:(0,l.normalizeStyle)({background:kt.currentColor}),onClick:Ke[2]||(Ke[2]=(...Mn)=>ze.clickCurrentColor&&ze.clickCurrentColor(...Mn))},null,12,_r)]),(0,l.createElementVNode)("div",nt,(0,l.toDisplayString)(it.currentLabel),1)]),it.disableFields?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",vt,[(0,l.createElementVNode)("div",{class:"vc-ps-ac-btn",role:"button","aria-label":it.acceptLabel,onClick:Ke[3]||(Ke[3]=(...Mn)=>ze.handleAccept&&ze.handleAccept(...Mn))},(0,l.toDisplayString)(it.acceptLabel),9,Yt),(0,l.createElementVNode)("div",{class:"vc-ps-ac-btn",role:"button","aria-label":it.cancelLabel,onClick:Ke[4]||(Ke[4]=(...Mn)=>ze.handleCancel&&ze.handleCancel(...Mn))},(0,l.toDisplayString)(it.cancelLabel),9,ds),(0,l.createElementVNode)("div",Pa,[(0,l.createVNode)(mn,{label:"h",desc:"°",modelValue:ze.hsv.h,onChange:ze.inputChange},null,8,["modelValue","onChange"]),(0,l.createVNode)(mn,{label:"s",desc:"%",modelValue:ze.hsv.s,max:100,onChange:ze.inputChange},null,8,["modelValue","onChange"]),(0,l.createVNode)(mn,{label:"v",desc:"%",modelValue:ze.hsv.v,max:100,onChange:ze.inputChange},null,8,["modelValue","onChange"]),In,(0,l.createVNode)(mn,{label:"r",modelValue:me.colors.rgba.r,onChange:ze.inputChange},null,8,["modelValue","onChange"]),(0,l.createVNode)(mn,{label:"g",modelValue:me.colors.rgba.g,onChange:ze.inputChange},null,8,["modelValue","onChange"]),(0,l.createVNode)(mn,{label:"b",modelValue:me.colors.rgba.b,onChange:ze.inputChange},null,8,["modelValue","onChange"]),Sa,(0,l.createVNode)(mn,{label:"#",class:"vc-ps-fields__hex",modelValue:ze.hex,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),it.hasResetButton?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,class:"vc-ps-ac-btn","aria-label":"reset",onClick:Ke[5]||(Ke[5]=(...Mn)=>ze.handleReset&&ze.handleReset(...Mn))},(0,l.toDisplayString)(it.resetLabel),1)):(0,l.createCommentVNode)("",!0)]))],2)])],2)}const ml=(0,l.createElementVNode)("div",{class:"vc-saturation--white"},null,-1),ks=(0,l.createElementVNode)("div",{class:"vc-saturation--black"},null,-1),wo=[(0,l.createElementVNode)("div",{class:"vc-saturation-circle"},null,-1)];function fl(me,Ke,it,xt,kt,ze){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"vc-saturation",style:(0,l.normalizeStyle)({background:ze.bgColor}),ref:"container",onMousedown:Ke[0]||(Ke[0]=(...Nt)=>ze.handleMouseDown&&ze.handleMouseDown(...Nt)),onTouchmove:Ke[1]||(Ke[1]=(...Nt)=>ze.handleChange&&ze.handleChange(...Nt)),onTouchstart:Ke[2]||(Ke[2]=(...Nt)=>ze.handleChange&&ze.handleChange(...Nt))},[ml,ks,(0,l.createElementVNode)("div",{class:"vc-saturation-pointer",style:(0,l.normalizeStyle)({top:ze.pointerTop,left:ze.pointerLeft})},wo,4)],36)}var Ro=s(9428),$i=s.n(Ro),Mi=s(9289),Li={name:"Saturation",props:{modelValue:Object},computed:{colors(){return this.modelValue},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return-(this.colors.hsv.v*100)+1+100+"%"},pointerLeft(){return this.colors.hsv.s*100+"%"}},methods:{throttle:Mi((me,Ke)=>{me(Ke)},20,{leading:!0,trailing:!1}),handleChange(me,Ke){!Ke&&me.preventDefault();const it=this.$refs.container;if(!it)return;const xt=it.clientWidth,kt=it.clientHeight,ze=it.getBoundingClientRect().left+window.pageXOffset,Nt=it.getBoundingClientRect().top+window.pageYOffset,Gt=me.pageX||(me.touches?me.touches[0].pageX:0),mn=me.pageY||(me.touches?me.touches[0].pageY:0),Mn=$i()(Gt-ze,0,xt),jn=$i()(mn-Nt,0,kt),Xt=Mn/xt,ei=$i()(-(jn/kt)+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:Xt,v:ei,a:this.colors.hsv.a,source:"hsva"})},onChange(me){this.$emit("change",me)},handleMouseDown(me){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(me){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(5233);var no=(0,I.Z)(Li,[["render",fl]]),xI={name:"Photoshop",mixins:[_],props:{head:{type:String,default:"Color Picker"},disableFields:{type:Boolean,default:!1},hasResetButton:{type:Boolean,default:!1},acceptLabel:{type:String,default:"OK"},cancelLabel:{type:String,default:"Cancel"},resetLabel:{type:String,default:"Reset"},newLabel:{type:String,default:"new"},currentLabel:{type:String,default:"current"}},components:{saturation:no,hue:Se,"ed-in":_e},data(){return{currentColor:"#FFF"}},computed:{hsv(){const me=this.colors.hsv;return{h:me.h.toFixed(),s:(me.s*100).toFixed(),v:(me.v*100).toFixed()}},hex(){const me=this.colors.hex;return me&&me.replace("#","")}},created(){this.currentColor=this.colors.hex},methods:{childChange(me){this.colorChange(me)},inputChange(me){me&&(me["#"]?this.isValidHex(me["#"])&&this.colorChange({hex:me["#"],source:"hex"}):me.r||me.g||me.b||me.a?this.colorChange({r:me.r||this.colors.rgba.r,g:me.g||this.colors.rgba.g,b:me.b||this.colors.rgba.b,a:me.a||this.colors.rgba.a,source:"rgba"}):(me.h||me.s||me.v)&&this.colorChange({h:me.h||this.colors.hsv.h,s:me.s/100||this.colors.hsv.s,v:me.v/100||this.colors.hsv.v,source:"hsv"}))},clickCurrentColor(){this.colorChange({hex:this.currentColor,source:"hex"})},handleAccept(){this.$emit("ok")},handleCancel(){this.$emit("cancel")},handleReset(){this.$emit("reset")}}};s(1902);var O_=(0,I.Z)(xI,[["render",xi]]);const $I={class:"vc-sketch-saturation-wrap"},MI={class:"vc-sketch-controls"},LI={class:"vc-sketch-sliders"},kI={class:"vc-sketch-hue-wrap"},DI={key:0,class:"vc-sketch-alpha-wrap"},PI={class:"vc-sketch-color-wrap"},BI=["aria-label"],FI={key:0,class:"vc-sketch-field"},UI={class:"vc-sketch-field--double"},GI={class:"vc-sketch-field--single"},VI={class:"vc-sketch-field--single"},HI={class:"vc-sketch-field--single"},WI={key:0,class:"vc-sketch-field--single"},zI={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},jI=["aria-label","onClick"],KI=["aria-label","onClick"];function YI(me,Ke,it,xt,kt,ze){const Nt=(0,l.resolveComponent)("saturation"),Gt=(0,l.resolveComponent)("hue"),mn=(0,l.resolveComponent)("alpha"),Mn=(0,l.resolveComponent)("checkboard"),jn=(0,l.resolveComponent)("ed-in");return(0,l.openBlock)(),(0,l.createElementBlock)("div",{role:"application","aria-label":"Sketch color picker",class:(0,l.normalizeClass)(["vc-sketch",it.disableAlpha?"vc-sketch__disable-alpha":""])},[(0,l.createElementVNode)("div",$I,[(0,l.createVNode)(Nt,{modelValue:me.colors,"onUpdate:modelValue":Ke[0]||(Ke[0]=Xt=>me.colors=Xt),onChange:ze.childChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",MI,[(0,l.createElementVNode)("div",LI,[(0,l.createElementVNode)("div",kI,[(0,l.createVNode)(Gt,{modelValue:me.colors,"onUpdate:modelValue":Ke[1]||(Ke[1]=Xt=>me.colors=Xt),onChange:ze.childChange},null,8,["modelValue","onChange"])]),it.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",DI,[(0,l.createVNode)(mn,{modelValue:me.colors,"onUpdate:modelValue":Ke[2]||(Ke[2]=Xt=>me.colors=Xt),onChange:ze.childChange},null,8,["modelValue","onChange"])]))]),(0,l.createElementVNode)("div",PI,[(0,l.createElementVNode)("div",{"aria-label":`Current color is ${ze.activeColor}`,class:"vc-sketch-active-color",style:(0,l.normalizeStyle)({background:ze.activeColor})},null,12,BI),(0,l.createVNode)(Mn)])]),it.disableFields?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",FI,[(0,l.createElementVNode)("div",UI,[(0,l.createVNode)(jn,{label:"hex",modelValue:ze.hex,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",GI,[(0,l.createVNode)(jn,{label:"r",modelValue:me.colors.rgba.r,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",VI,[(0,l.createVNode)(jn,{label:"g",modelValue:me.colors.rgba.g,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",HI,[(0,l.createVNode)(jn,{label:"b",modelValue:me.colors.rgba.b,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),it.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",WI,[(0,l.createVNode)(jn,{label:"a",modelValue:me.colors.a,"arrow-offset":.01,max:1,onChange:ze.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))])),(0,l.createElementVNode)("div",zI,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(it.presetColors,Xt=>((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,[me.isTransparent(Xt)?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:"else-"+Xt,"aria-label":"Color:"+Xt,class:"vc-sketch-presets-color",onClick:ei=>ze.handlePreset(Xt)},[(0,l.createVNode)(Mn)],8,KI)):((0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"vc-sketch-presets-color","aria-label":"Color:"+Xt,key:"if-"+Xt,style:(0,l.normalizeStyle)({background:Xt}),onClick:ei=>ze.handlePreset(Xt)},null,12,jI))],64))),256))])],2)}const XI={class:"vc-alpha"},qI={class:"vc-alpha-checkboard-wrap"},ZI=[(0,l.createElementVNode)("div",{class:"vc-alpha-picker"},null,-1)];function QI(me,Ke,it,xt,kt,ze){const Nt=(0,l.resolveComponent)("checkboard");return(0,l.openBlock)(),(0,l.createElementBlock)("div",XI,[(0,l.createElementVNode)("div",qI,[(0,l.createVNode)(Nt)]),(0,l.createElementVNode)("div",{class:"vc-alpha-gradient",style:(0,l.normalizeStyle)({background:ze.gradientColor})},null,4),(0,l.createElementVNode)("div",{class:"vc-alpha-container",ref:"container",onMousedown:Ke[0]||(Ke[0]=(...Gt)=>ze.handleMouseDown&&ze.handleMouseDown(...Gt)),onTouchmove:Ke[1]||(Ke[1]=(...Gt)=>ze.handleChange&&ze.handleChange(...Gt)),onTouchstart:Ke[2]||(Ke[2]=(...Gt)=>ze.handleChange&&ze.handleChange(...Gt))},[(0,l.createElementVNode)("div",{class:"vc-alpha-pointer",style:(0,l.normalizeStyle)({left:ze.colors.a*100+"%"})},ZI,4)],544)])}function JI(me,Ke,it,xt,kt,ze){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"vc-checkerboard",style:(0,l.normalizeStyle)(ze.bgStyle)},null,4)}const Cp={};var e2={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":"url("+n2(this.white,this.grey,this.size)+")"}}}};function t2(me,Ke,it){if(typeof document>"u")return null;const xt=document.createElement("canvas");xt.width=xt.height=it*2;const kt=xt.getContext("2d");return kt?(kt.fillStyle=me,kt.fillRect(0,0,xt.width,xt.height),kt.fillStyle=Ke,kt.fillRect(0,0,it,it),kt.translate(it,it),kt.fillRect(0,0,it,it),xt.toDataURL()):null}function n2(me,Ke,it){const xt=me+","+Ke+","+it;if(Cp[xt])return Cp[xt];{const kt=t2(me,Ke,it);return Cp[xt]=kt,kt}}s(3205);var _l=(0,I.Z)(e2,[["render",JI]]),s2={name:"Alpha",props:{modelValue:Object,onChange:Function},components:{checkboard:_l},computed:{colors(){return this.modelValue},gradientColor(){const me=this.colors.rgba,Ke=[me.r,me.g,me.b].join(",");return"linear-gradient(to right, rgba("+Ke+", 0) 0%, rgba("+Ke+", 1) 100%)"}},methods:{handleChange(me,Ke){!Ke&&me.preventDefault();const it=this.$refs.container;if(!it)return;const xt=it.clientWidth,kt=it.getBoundingClientRect().left+window.pageXOffset,Nt=(me.pageX||(me.touches?me.touches[0].pageX:0))-kt;let Gt;Nt<0?Gt=0:Nt>xt?Gt=1:Gt=Math.round(Nt*100/xt)/100,this.colors.a!==Gt&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:Gt,source:"rgba"})},handleMouseDown(me){this.handleChange(me,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(6320);var jc=(0,I.Z)(s2,[["render",QI]]);const a2=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var o2={name:"Sketch",mixins:[_],components:{saturation:no,hue:Se,alpha:jc,"ed-in":_e,checkboard:_l},props:{presetColors:{type:Array,default(){return a2}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let me;return this.colors.a<1?me=this.colors.hex8:me=this.colors.hex,me.replace("#","")},activeColor(){const me=this.colors.rgba;return"rgba("+[me.r,me.g,me.b,me.a].join(",")+")"}},methods:{handlePreset(me){this.colorChange({hex:me,source:"hex"})},childChange(me){this.colorChange(me)},inputChange(me){me&&(me.hex?this.isValidHex(me.hex)&&this.colorChange({hex:me.hex,source:"hex"}):(me.r||me.g||me.b||me.a)&&this.colorChange({r:me.r||this.colors.rgba.r,g:me.g||this.colors.rgba.g,b:me.b||this.colors.rgba.b,a:me.a||this.colors.rgba.a,source:"rgba"}))}}};s(5815);var N_=(0,I.Z)(o2,[["render",YI]]);const i2={class:"vc-chrome-saturation-wrap"},r2={class:"vc-chrome-body"},l2={class:"vc-chrome-controls"},c2={class:"vc-chrome-color-wrap"},u2=["aria-label"],d2={class:"vc-chrome-sliders"},p2={class:"vc-chrome-hue-wrap"},h2={key:0,class:"vc-chrome-alpha-wrap"},m2={key:0,class:"vc-chrome-fields-wrap"},f2={class:"vc-chrome-fields"},g2={class:"vc-chrome-field"},_2={class:"vc-chrome-fields"},v2={class:"vc-chrome-field"},b2={class:"vc-chrome-field"},E2={class:"vc-chrome-field"},T2={key:0,class:"vc-chrome-field"},y2={class:"vc-chrome-fields"},S2={class:"vc-chrome-field"},A2={class:"vc-chrome-field"},I2={class:"vc-chrome-field"},C2={key:0,class:"vc-chrome-field"},O2={class:"vc-chrome-toggle-icon"},N2=[(0,l.createElementVNode)("path",{fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"},null,-1)],w2={class:"vc-chrome-toggle-icon-highlight"};function R2(me,Ke,it,xt,kt,ze){const Nt=(0,l.resolveComponent)("saturation"),Gt=(0,l.resolveComponent)("checkboard"),mn=(0,l.resolveComponent)("hue"),Mn=(0,l.resolveComponent)("alpha"),jn=(0,l.resolveComponent)("ed-in");return(0,l.openBlock)(),(0,l.createElementBlock)("div",{role:"application","aria-label":"Chrome color picker",class:(0,l.normalizeClass)(["vc-chrome",it.disableAlpha?"vc-chrome__disable-alpha":""])},[(0,l.createElementVNode)("div",i2,[(0,l.createVNode)(Nt,{modelValue:me.colors,"onUpdate:modelValue":Ke[0]||(Ke[0]=Xt=>me.colors=Xt),onChange:ze.childChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",r2,[(0,l.createElementVNode)("div",l2,[(0,l.createElementVNode)("div",c2,[(0,l.createElementVNode)("div",{"aria-label":`current color is ${me.colors.hex}`,class:"vc-chrome-active-color",style:(0,l.normalizeStyle)({background:ze.activeColor})},null,12,u2),it.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createBlock)(Gt,{key:0}))]),(0,l.createElementVNode)("div",d2,[(0,l.createElementVNode)("div",p2,[(0,l.createVNode)(mn,{modelValue:me.colors,"onUpdate:modelValue":Ke[1]||(Ke[1]=Xt=>me.colors=Xt),onChange:ze.childChange},null,8,["modelValue","onChange"])]),it.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",h2,[(0,l.createVNode)(Mn,{modelValue:me.colors,"onUpdate:modelValue":Ke[2]||(Ke[2]=Xt=>me.colors=Xt),onChange:ze.childChange},null,8,["modelValue","onChange"])]))])]),it.disableFields?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",m2,[(0,l.withDirectives)((0,l.createElementVNode)("div",f2,[(0,l.createElementVNode)("div",g2,[ze.hasAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createBlock)(jn,{key:0,label:"hex",modelValue:me.colors.hex,onChange:ze.inputChange},null,8,["modelValue","onChange"])),ze.hasAlpha?((0,l.openBlock)(),(0,l.createBlock)(jn,{key:1,label:"hex",modelValue:me.colors.hex8,onChange:ze.inputChange},null,8,["modelValue","onChange"])):(0,l.createCommentVNode)("",!0)])],512),[[l.vShow,kt.fieldsIndex===0]]),(0,l.withDirectives)((0,l.createElementVNode)("div",_2,[(0,l.createElementVNode)("div",v2,[(0,l.createVNode)(jn,{label:"r",modelValue:me.colors.rgba.r,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",b2,[(0,l.createVNode)(jn,{label:"g",modelValue:me.colors.rgba.g,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",E2,[(0,l.createVNode)(jn,{label:"b",modelValue:me.colors.rgba.b,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),it.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",T2,[(0,l.createVNode)(jn,{label:"a",modelValue:me.colors.a,"arrow-offset":.01,max:1,onChange:ze.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))],512),[[l.vShow,kt.fieldsIndex===1]]),(0,l.withDirectives)((0,l.createElementVNode)("div",y2,[(0,l.createElementVNode)("div",S2,[(0,l.createVNode)(jn,{label:"h",modelValue:ze.hsl.h,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",A2,[(0,l.createVNode)(jn,{label:"s",modelValue:ze.hsl.s,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),(0,l.createElementVNode)("div",I2,[(0,l.createVNode)(jn,{label:"l",modelValue:ze.hsl.l,onChange:ze.inputChange},null,8,["modelValue","onChange"])]),it.disableAlpha?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",C2,[(0,l.createVNode)(jn,{label:"a",modelValue:me.colors.a,"arrow-offset":.01,max:1,onChange:ze.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))],512),[[l.vShow,kt.fieldsIndex===2]]),(0,l.createElementVNode)("div",{class:"vc-chrome-toggle-btn",role:"button","aria-label":"Change another color definition",onClick:Ke[6]||(Ke[6]=(...Xt)=>ze.toggleViews&&ze.toggleViews(...Xt))},[(0,l.createElementVNode)("div",O2,[((0,l.openBlock)(),(0,l.createElementBlock)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24",onMouseover:Ke[3]||(Ke[3]=(...Xt)=>ze.showHighlight&&ze.showHighlight(...Xt)),onMouseenter:Ke[4]||(Ke[4]=(...Xt)=>ze.showHighlight&&ze.showHighlight(...Xt)),onMouseout:Ke[5]||(Ke[5]=(...Xt)=>ze.hideHighlight&&ze.hideHighlight(...Xt))},N2,32))]),(0,l.withDirectives)((0,l.createElementVNode)("div",w2,null,512),[[l.vShow,kt.highlight]])])]))])],2)}var x2={name:"Chrome",mixins:[_],props:{disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},components:{saturation:no,hue:Se,alpha:jc,"ed-in":_e,checkboard:_l},data(){return{fieldsIndex:0,highlight:!1}},computed:{hsl(){const{h:me,s:Ke,l:it}=this.colors.hsl;return{h:me.toFixed(),s:`${(Ke*100).toFixed()}%`,l:`${(it*100).toFixed()}%`}},activeColor(){const me=this.colors.rgba;return"rgba("+[me.r,me.g,me.b,me.a].join(",")+")"},hasAlpha(){return this.colors.a<1}},methods:{childChange(me){this.colorChange(me)},inputChange(me){if(me){if(me.hex)this.isValidHex(me.hex)&&this.colorChange({hex:me.hex,source:"hex"});else if(me.r||me.g||me.b||me.a)this.colorChange({r:me.r||this.colors.rgba.r,g:me.g||this.colors.rgba.g,b:me.b||this.colors.rgba.b,a:me.a||this.colors.rgba.a,source:"rgba"});else if(me.h||me.s||me.l){const Ke=me.s?me.s.replace("%","")/100:this.colors.hsl.s,it=me.l?me.l.replace("%","")/100:this.colors.hsl.l;this.colorChange({h:me.h||this.colors.hsl.h,s:Ke,l:it,source:"hsl"})}}},toggleViews(){if(this.fieldsIndex>=2){this.fieldsIndex=0;return}this.fieldsIndex++},showHighlight(){this.highlight=!0},hideHighlight(){this.highlight=!1}}};s(3647);var w_=(0,I.Z)(x2,[["render",R2]]);const $2=(0,l.createElementVNode)("div",{class:"vc-twitter-triangle-shadow"},null,-1),M2=(0,l.createElementVNode)("div",{class:"vc-twitter-triangle"},null,-1),L2={class:"vc-twitter-body"},k2=["onClick"],D2=(0,l.createElementVNode)("div",{class:"vc-twitter-hash"},"#",-1),P2=(0,l.createElementVNode)("div",{class:"vc-twitter-clear"},null,-1);function B2(me,Ke,it,xt,kt,ze){const Nt=(0,l.resolveComponent)("editable-input");return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:(0,l.normalizeClass)(["vc-twitter",{"vc-twitter-hide-triangle ":it.triangle==="hide","vc-twitter-top-left-triangle ":it.triangle==="top-left","vc-twitter-top-right-triangle ":it.triangle==="top-right"}]),style:(0,l.normalizeStyle)({width:typeof it.width=="number"?`${it.width}px`:it.width})},[$2,M2,(0,l.createElementVNode)("div",L2,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(it.defaultColors,(Gt,mn)=>((0,l.openBlock)(),(0,l.createElementBlock)("span",{class:"vc-twitter-swatch",style:(0,l.normalizeStyle)({background:Gt,boxShadow:`0 0 4px ${ze.equal(Gt)?Gt:"transparent"}`}),key:mn,onClick:Mn=>ze.handlerClick(Gt)},null,12,k2))),128)),D2,(0,l.createVNode)(Nt,{label:"#",modelValue:ze.hex,onChange:ze.inputChange},null,8,["modelValue","onChange"]),P2])],6)}const F2=["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"];var U2={name:"Twitter",mixins:[_],components:{editableInput:_e},props:{width:{type:[String,Number],default:276},defaultColors:{type:Array,default(){return F2}},triangle:{default:"top-left",validator(me){return["hide","top-left","top-right"].includes(me)}}},computed:{hsv(){const me=this.colors.hsv;return{h:me.h.toFixed(),s:(me.s*100).toFixed(),v:(me.v*100).toFixed()}},hex(){const me=this.colors.hex;return me&&me.replace("#","")}},methods:{equal(me){return me.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick(me){this.colorChange({hex:me,source:"hex"})},inputChange(me){me&&(me["#"]?this.isValidHex(me["#"])&&this.colorChange({hex:me["#"],source:"hex"}):me.r||me.g||me.b||me.a?this.colorChange({r:me.r||this.colors.rgba.r,g:me.g||this.colors.rgba.g,b:me.b||this.colors.rgba.b,a:me.a||this.colors.rgba.a,source:"rgba"}):(me.h||me.s||me.v)&&this.colorChange({h:me.h||this.colors.hsv.h,s:me.s/100||this.colors.hsv.s,v:me.v/100||this.colors.hsv.v,source:"hsv"}))}}};s(1113);var R_=(0,I.Z)(U2,[["render",B2]]);const x_=r.i8,$_={version:x_,Compact:O,Grayscale:U,Twitter:R_,Material:Je,Slider:Ue,Swatches:Ls,Photoshop:O_,Sketch:N_,Chrome:w_,Alpha:jc,Checkboard:_l,EditableInput:_e,Hue:Se,Saturation:no,ColorMixin:_};typeof process=="object"&&String(process)==="[object process]"||(window.VueColor=$_);var G2=$_,V2=G2})(),e.exports=o})()})(mT);var Rx=mT.exports;const xx={components:{Chrome:Rx.Chrome},props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],data(){return{isPickerOpen:!1}},methods:{closeTogglePicker(){this.isPickerOpen&&this.toggleColorPicker()},toggleColorPicker(){this.isPickerOpen=!this.isPickerOpen},updateColor(e){this.$emit("update:modelValue",e.hex)}}},$x={class:"colorpicker"};function Mx(e,t,n,s,o,a){const i=M("Chrome"),r=qe("on-clickaway");return p(),v("div",$x,[h("div",{class:"colorpicker--selected",style:Ht(`background-color: ${n.modelValue}`),onClick:t[0]||(t[0]=Fe((...l)=>a.toggleColorPicker&&a.toggleColorPicker(...l),["prevent"]))},null,4),o.isPickerOpen?re((p(),$(i,{key:0,"disable-alpha":"","model-value":n.modelValue,class:"colorpicker--chrome","onUpdate:modelValue":a.updateColor},null,8,["model-value","onUpdate:modelValue"])),[[r,a.closeTogglePicker]]):w("",!0)])}const Lx=Ae(xx,[["render",Mx],["__scopeId","data-v-31787e8f"]]);function $a(e){return j2()?(K2(e),!0):!1}function Rn(e){return typeof e=="function"?e():N(e)}const qr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const fT=e=>e!=null,kx=Object.prototype.toString,gT=e=>kx.call(e)==="[object Object]",wa=()=>{},Zr=Dx();function Dx(){var e,t;return qr&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Px(e,t){function n(...s){return new Promise((o,a)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(o).catch(a)})}return n}const _T=e=>e();function Bx(e=_T){const t=X(!0);function n(){t.value=!1}function s(){t.value=!0}const o=(...a)=>{t.value&&e(...a)};return{isActive:yf(t),pause:n,resume:s,eventFilter:o}}function Fx(e){return Id()}function vT(...e){if(e.length!==1)return ju(...e);const t=e[0];return typeof t=="function"?yf(z2(()=>({get:t,set:wa}))):X(t)}function Ux(e,t,n={}){const{eventFilter:s=_T,...o}=n;return ct(e,Px(s,t),o)}function Gx(e,t,n={}){const{eventFilter:s,...o}=n,{eventFilter:a,pause:i,resume:r,isActive:l}=Bx(s);return{stop:Ux(e,t,{...o,eventFilter:a}),pause:i,resume:r,isActive:l}}function Dd(e,t=!0,n){Fx()?dt(e,n):t?e():tn(e)}function Vx(e,t=1e3,n={}){const{immediate:s=!0,immediateCallback:o=!1}=n;let a=null;const i=X(!1);function r(){a&&(clearInterval(a),a=null)}function l(){i.value=!1,r()}function c(){const u=Rn(t);u<=0||(i.value=!0,o&&e(),r(),i.value&&(a=setInterval(e,u)))}if(s&&qr&&c(),Ad(t)||typeof t=="function"){const u=ct(t,()=>{i.value&&qr&&c()});$a(u)}return $a(l),{isActive:i,pause:l,resume:c}}function Hx(e,t,n={}){const{immediate:s=!0}=n,o=X(!1);let a=null;function i(){a&&(clearTimeout(a),a=null)}function r(){o.value=!1,i()}function l(...c){i(),o.value=!0,a=setTimeout(()=>{o.value=!1,a=null,e(...c)},Rn(t))}return s&&(o.value=!0,qr&&l()),$a(r),{isPending:yf(o),start:l,stop:r}}function es(e=!1,t={}){const{truthyValue:n=!0,falsyValue:s=!1}=t,o=Ad(e),a=X(e);function i(r){if(arguments.length)return a.value=r,a.value;{const l=Rn(n);return a.value=a.value===l?Rn(s):l,a.value}}return o?i:[a,i]}const Eo=qr?window:void 0;function xs(e){var t;const n=Rn(e);return(t=n==null?void 0:n.$el)!=null?t:n}function Zs(...e){let t,n,s,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,o]=e,t=Eo):[t,n,s,o]=e,!t)return wa;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const a=[],i=()=>{a.forEach(u=>u()),a.length=0},r=(u,d,m,f)=>(u.addEventListener(d,m,f),()=>u.removeEventListener(d,m,f)),l=ct(()=>[xs(t),Rn(o)],([u,d])=>{if(i(),!u)return;const m=gT(d)?{...d}:d;a.push(...n.flatMap(f=>s.map(g=>r(u,f,g,m))))},{immediate:!0,flush:"post"}),c=()=>{l(),i()};return $a(c),c}let tb=!1;function Wx(e,t,n={}){const{window:s=Eo,ignore:o=[],capture:a=!0,detectIframe:i=!1}=n;if(!s)return wa;Zr&&!tb&&(tb=!0,Array.from(s.document.body.children).forEach(T=>T.addEventListener("click",wa)),s.document.documentElement.addEventListener("click",wa));let r=!0;const l=T=>Rn(o).some(S=>{if(typeof S=="string")return Array.from(s.document.querySelectorAll(S)).some(_=>_===T.target||T.composedPath().includes(_));{const _=xs(S);return _&&(T.target===_||T.composedPath().includes(_))}});function c(T){const S=Rn(T);return S&&S.$.subTree.shapeFlag===16}function u(T,S){const _=Rn(T),E=_.$.subTree&&_.$.subTree.children;return E==null||!Array.isArray(E)?!1:E.some(b=>b.el===S.target||S.composedPath().includes(b.el))}const d=T=>{const S=xs(e);if(T.target!=null&&!(!(S instanceof Element)&&c(e)&&u(e,T))&&!(!S||S===T.target||T.composedPath().includes(S))){if(T.detail===0&&(r=!l(T)),!r){r=!0;return}t(T)}};let m=!1;const f=[Zs(s,"click",T=>{m||(m=!0,setTimeout(()=>{m=!1},0),d(T))},{passive:!0,capture:a}),Zs(s,"pointerdown",T=>{const S=xs(e);r=!l(T)&&!!(S&&!T.composedPath().includes(S))},{passive:!0}),i&&Zs(s,"blur",T=>{setTimeout(()=>{var S;const _=xs(e);((S=s.document.activeElement)==null?void 0:S.tagName)==="IFRAME"&&!(_!=null&&_.contains(s.document.activeElement))&&t(T)},0)})].filter(Boolean);return()=>f.forEach(T=>T())}function zx(){const e=X(!1),t=Id();return t&&dt(()=>{e.value=!0},t),e}function Pd(e){const t=zx();return C(()=>(t.value,!!e()))}function jx(e,t,n={}){const{window:s=Eo,...o}=n;let a;const i=Pd(()=>s&&"MutationObserver"in s),r=()=>{a&&(a.disconnect(),a=void 0)},l=C(()=>{const m=Rn(e),f=(Array.isArray(m)?m:[m]).map(xs).filter(fT);return new Set(f)}),c=ct(()=>l.value,m=>{r(),i.value&&m.size&&(a=new MutationObserver(t),m.forEach(f=>a.observe(f,o)))},{immediate:!0,flush:"post"}),u=()=>a==null?void 0:a.takeRecords(),d=()=>{c(),r()};return $a(d),{isSupported:i,stop:d,takeRecords:u}}function Kx(e,t={}){const{window:n=Eo}=t,s=Pd(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let o;const a=X(!1),i=c=>{a.value=c.matches},r=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",i):o.removeListener(i))},l=da(()=>{s.value&&(r(),o=n.matchMedia(Rn(e)),"addEventListener"in o?o.addEventListener("change",i):o.addListener(i),a.value=o.matches)});return $a(()=>{l(),r(),o=void 0}),a}const Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qc="__vueuse_ssr_handlers__",Yx=Xx();function Xx(){return Qc in Zc||(Zc[Qc]=Zc[Qc]||{}),Zc[Qc]}function qx(e,t){return Yx[e]||t}function Zx(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Qx={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},nb="vueuse-storage";function Jx(e,t,n,s={}){var o;const{flush:a="pre",deep:i=!0,listenToStorageChanges:r=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:u,window:d=Eo,eventFilter:m,onError:f=D=>{console.error(D)},initOnMounted:g}=s,T=(u?Cd:X)(t);if(!n)try{n=qx("getDefaultStorage",()=>{var D;return(D=Eo)==null?void 0:D.localStorage})()}catch(D){f(D)}if(!n)return T;const S=Rn(t),_=Zx(S),E=(o=s.serializer)!=null?o:Qx[_],{pause:b,resume:I}=Gx(T,()=>O(T.value),{flush:a,deep:i,eventFilter:m});d&&r&&Dd(()=>{n instanceof Storage?Zs(d,"storage",L):Zs(d,nb,F),g&&L()}),g||L();function R(D,V){if(d){const B={key:e,oldValue:D,newValue:V,storageArea:n};d.dispatchEvent(n instanceof Storage?new StorageEvent("storage",B):new CustomEvent(nb,{detail:B}))}}function O(D){try{const V=n.getItem(e);if(D==null)R(V,null),n.removeItem(e);else{const B=E.write(D);V!==B&&(n.setItem(e,B),R(V,B))}}catch(V){f(V)}}function x(D){const V=D?D.newValue:n.getItem(e);if(V==null)return l&&S!=null&&n.setItem(e,E.write(S)),S;if(!D&&c){const B=E.read(V);return typeof c=="function"?c(B,S):_==="object"&&!Array.isArray(B)?{...S,...B}:B}else return typeof V!="string"?V:E.read(V)}function L(D){if(!(D&&D.storageArea!==n)){if(D&&D.key==null){T.value=S;return}if(!(D&&D.key!==e)){b();try{(D==null?void 0:D.newValue)!==E.write(T.value)&&(T.value=x(D))}catch(V){f(V)}finally{D?tn(I):I()}}}}function F(D){L(D.detail)}return T}function bT(e,t,n={}){const{window:s=Eo,...o}=n;let a;const i=Pd(()=>s&&"ResizeObserver"in s),r=()=>{a&&(a.disconnect(),a=void 0)},l=C(()=>{const d=Rn(e);return Array.isArray(d)?d.map(m=>xs(m)):[xs(d)]}),c=ct(l,d=>{if(r(),i.value&&s){a=new ResizeObserver(t);for(const m of d)m&&a.observe(m,o)}},{immediate:!0,flush:"post"}),u=()=>{r(),c()};return $a(u),{isSupported:i,stop:u}}function ad(e,t={}){const{reset:n=!0,windowResize:s=!0,windowScroll:o=!0,immediate:a=!0,updateTiming:i="sync"}=t,r=X(0),l=X(0),c=X(0),u=X(0),d=X(0),m=X(0),f=X(0),g=X(0);function T(){const _=xs(e);if(!_){n&&(r.value=0,l.value=0,c.value=0,u.value=0,d.value=0,m.value=0,f.value=0,g.value=0);return}const E=_.getBoundingClientRect();r.value=E.height,l.value=E.bottom,c.value=E.left,u.value=E.right,d.value=E.top,m.value=E.width,f.value=E.x,g.value=E.y}function S(){i==="sync"?T():i==="next-frame"&&requestAnimationFrame(()=>T())}return bT(e,S),ct(()=>xs(e),_=>!_&&S()),jx(e,S,{attributeFilter:["style","class"]}),o&&Zs("scroll",S,{capture:!0,passive:!0}),s&&Zs("resize",S,{passive:!0}),Dd(()=>{a&&S()}),{height:r,bottom:l,left:c,right:u,top:d,width:m,x:f,y:g,update:S}}function uc(e,t={width:0,height:0},n={}){const{window:s=Eo,box:o="content-box"}=n,a=C(()=>{var d,m;return(m=(d=xs(e))==null?void 0:d.namespaceURI)==null?void 0:m.includes("svg")}),i=X(t.width),r=X(t.height),{stop:l}=bT(e,([d])=>{const m=o==="border-box"?d.borderBoxSize:o==="content-box"?d.contentBoxSize:d.devicePixelContentBoxSize;if(s&&a.value){const f=xs(e);if(f){const g=f.getBoundingClientRect();i.value=g.width,r.value=g.height}}else if(m){const f=Array.isArray(m)?m:[m];i.value=f.reduce((g,{inlineSize:T})=>g+T,0),r.value=f.reduce((g,{blockSize:T})=>g+T,0)}else i.value=d.contentRect.width,r.value=d.contentRect.height},n);Dd(()=>{const d=xs(e);d&&(i.value="offsetWidth"in d?d.offsetWidth:t.width,r.value="offsetHeight"in d?d.offsetHeight:t.height)});const c=ct(()=>xs(e),d=>{i.value=d?t.width:0,r.value=d?t.height:0});function u(){l(),c()}return{width:i,height:r,stop:u}}function e$(e,t,n={}){const{root:s,rootMargin:o="0px",threshold:a=0,window:i=Eo,immediate:r=!0}=n,l=Pd(()=>i&&"IntersectionObserver"in i),c=C(()=>{const g=Rn(e);return(Array.isArray(g)?g:[g]).map(xs).filter(fT)});let u=wa;const d=X(r),m=l.value?ct(()=>[c.value,xs(s),d.value],([g,T])=>{if(u(),!d.value||!g.length)return;const S=new IntersectionObserver(t,{root:xs(T),rootMargin:o,threshold:a});g.forEach(_=>_&&S.observe(_)),u=()=>{S.disconnect(),u=wa}},{immediate:r,flush:"post"}):wa,f=()=>{u(),m(),d.value=!1};return $a(f),{isSupported:l,isActive:d,pause(){u(),d.value=!1},resume(){d.value=!0},stop:f}}function Th(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function ET(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:ET(n)}}function t$(e){const t=e||window.event,n=t.target;return ET(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const yh=new WeakMap;function n$(e,t=!1){const n=X(t);let s=null,o="";ct(vT(e),r=>{const l=Th(Rn(r));if(l){const c=l;if(yh.get(c)||yh.set(c,c.style.overflow),c.style.overflow!=="hidden"&&(o=c.style.overflow),c.style.overflow==="hidden")return n.value=!0;if(n.value)return c.style.overflow="hidden"}},{immediate:!0});const a=()=>{const r=Th(Rn(e));!r||n.value||(Zr&&(s=Zs(r,"touchmove",l=>{t$(l)},{passive:!1})),r.style.overflow="hidden",n.value=!0)},i=()=>{const r=Th(Rn(e));!r||!n.value||(Zr&&(s==null||s()),r.style.overflow=o,yh.delete(r),n.value=!1)};return $a(i),C({get(){return n.value},set(r){r?a():i()}})}function qf(e={}){const{window:t=Eo,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:s=Number.POSITIVE_INFINITY,listenOrientation:o=!0,includeScrollbar:a=!0,type:i="inner"}=e,r=X(n),l=X(s),c=()=>{t&&(i==="outer"?(r.value=t.outerWidth,l.value=t.outerHeight):a?(r.value=t.innerWidth,l.value=t.innerHeight):(r.value=t.document.documentElement.clientWidth,l.value=t.document.documentElement.clientHeight))};if(c(),Dd(c),Zs("resize",c,{passive:!0}),o){const u=Kx("(orientation: portrait)");ct(u,()=>c())}return{width:r,height:l}}const sl={__name:"Modal",props:hn({closeOnBackdropClick:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},onClose:{type:Function,required:!0},fullWidth:{type:Boolean,default:!1},modalType:{type:String,default:"centered"},size:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:hn(["close"],["update:show"]),setup(e,{emit:t}){const n=t,s=wn(e,"show"),o=C(()=>`modal-mask skip-context-menu ${{centered:"","right-aligned":"right-aligned"}[e.modalType]||""}`),a=X(!1),i=()=>{a.value=!0},r=()=>{s.value=!1,n("close"),e.onClose()},l=()=>{a.value&&(a.value=!1,e.closeOnBackdropClick&&r())},c=u=>{s.value&&u.code==="Escape"&&(r(),u.stopPropagation())};return Zs(document.body,"mouseup",l),Zs(document,"keydown",c),dt(()=>{}),(u,d)=>(p(),$(qs,{name:"modal-fade"},{default:K(()=>[s.value?(p(),v("div",{key:0,class:se(o.value),transition:"modal",onMousedown:i},[h("div",{class:se(["relative max-h-full overflow-auto bg-n-alpha-3 shadow-md modal-container rtl:text-right skip-context-menu",{"rounded-xl w-[37.5rem]":!e.fullWidth,"items-center rounded-none flex h-full justify-center w-full":e.fullWidth,[e.size]:!0}]),onMouse:d[0]||(d[0]=Fe(()=>{},["stop"])),onMousedown:d[1]||(d[1]=m=>m.stopPropagation())},[e.showCloseButton?(p(),$(oe,{key:0,ghost:"",slate:"",icon:"i-lucide-x",class:"absolute z-10 ltr:right-2 rtl:left-2 top-2",onClick:r})):w("",!0),We(u.$slots,"default")],34)],34)):w("",!0)]),_:3}))}},s$={components:{Modal:sl,NextButton:oe},props:{show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},confirmText:{type:String,default:""},rejectText:{type:String,default:""},confirmValue:{type:String,default:""},confirmPlaceHolderText:{type:String,default:""}},emits:["onClose","onConfirm","update:show"],setup(){return{v$:bt()}},data(){return{value:""}},validations:{value:{required:Ye,isEqual(e){return e===this.confirmValue}}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{closeModal(){this.value="",this.$emit("onClose")},onConfirm(){this.$emit("onConfirm")}}},a$={class:"flex items-center justify-end gap-2"};function o$(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("woot-input"),l=M("NextButton"),c=M("Modal");return p(),$(c,{show:a.localShow,"onUpdate:show":t[2]||(t[2]=u=>a.localShow=u),"on-close":a.closeModal},{default:K(()=>[y(i,{"header-title":n.title,"header-content":n.message},null,8,["header-title","header-content"]),h("form",{onSubmit:t[1]||(t[1]=Fe((...u)=>a.onConfirm&&a.onConfirm(...u),["prevent"]))},[y(r,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=u=>o.value=u),type:"text",class:se({error:s.v$.value.$error}),placeholder:n.confirmPlaceHolderText,onBlur:s.v$.value.$touch},null,8,["modelValue","class","placeholder","onBlur"]),h("div",a$,[y(l,{faded:"",slate:"",type:"reset",label:n.rejectText,onClick:Fe(a.closeModal,["prevent"])},null,8,["label","onClick"]),y(l,{ruby:"",type:"submit",label:n.confirmText,disabled:s.v$.value.$invalid},null,8,["label","disabled"])])],32)]),_:1},8,["show","on-close"])}const TT=Ae(s$,[["render",o$]]),i$={components:{Modal:sl,NextButton:oe},props:{title:{type:String,default:"This is a title"},description:{type:String,default:"This is your description"},confirmLabel:{type:String,default:"Yes"},cancelLabel:{type:String,default:"No"}},data:()=>({show:!1,resolvePromise:void 0,rejectPromise:void 0}),methods:{showConfirmation(){return this.show=!0,new Promise((e,t)=>{this.resolvePromise=e,this.rejectPromise=t})},confirm(){this.resolvePromise(!0),this.show=!1},cancel(){this.resolvePromise(!1),this.show=!1}}},r$={class:"h-auto overflow-auto flex flex-col"},l$={class:"flex flex-row justify-end gap-2 py-4 px-6 w-full"};function c$(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("NextButton"),l=M("Modal");return p(),$(l,{show:e.show,"onUpdate:show":t[0]||(t[0]=c=>e.show=c),"on-close":a.cancel},{default:K(()=>[h("div",r$,[y(i,{"header-title":n.title,"header-content":n.description},null,8,["header-title","header-content"]),h("div",l$,[y(r,{faded:"",type:"reset",label:n.cancelLabel,onClick:a.cancel},null,8,["label","onClick"]),y(r,{type:"submit",label:n.confirmLabel,onClick:a.confirm},null,8,["label","onClick"])])])]),_:1},8,["show","on-close"])}const u$=Ae(i$,[["render",c$]]),d$={class:"flex items-center justify-end gap-2 p-8"},p$={__name:"DeleteModal",props:hn({onClose:{type:Function,default:()=>{}},onConfirm:{type:Function,default:()=>{}},title:{type:String,default:""},message:{type:String,default:""},messageValue:{type:String,default:""},confirmText:{type:String,default:""},rejectText:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(e){const t=wn(e,"show");return(n,s)=>{const o=M("woot-modal-header");return p(),$(sl,{show:t.value,"onUpdate:show":s[0]||(s[0]=a=>t.value=a),"on-close":e.onClose},{default:K(()=>[y(o,{"header-title":e.title,"header-content":e.message,"header-content-value":e.messageValue},null,8,["header-title","header-content","header-content-value"]),h("div",d$,[y(oe,{faded:"",slate:"",type:"reset",label:e.rejectText,onClick:e.onClose},null,8,["label","onClick"]),y(oe,{ruby:"",type:"submit",label:e.confirmText,onClick:e.onConfirm},null,8,["label","onClick"])])]),_:1},8,["show","on-close"])}}},h$={name:"WootDropdownItem",componentName:"WootDropdownMenu",props:{disabled:{type:Boolean,default:!1}}},m$=["tabindex","aria-disabled"];function f$(e,t,n,s,o,a){return p(),v("li",{class:se(["mb-1 list-none dropdown-menu__item",{"is-disabled":n.disabled}]),tabindex:n.disabled?null:-1,"aria-disabled":n.disabled},[We(e.$slots,"default",{},void 0,!0)],10,m$)}const dc=Ae(h$,[["render",f$],["__scopeId","data-v-b011f158"]]),Bd={__name:"DropdownMenu",props:{placement:{type:String,default:"top"}},setup(e){const t=X(null),n=()=>t.value.querySelectorAll("ul.dropdown li.dropdown-menu__item .button"),s=l=>{const c=t.value.querySelector("ul.dropdown li.dropdown-menu__item .button:focus");return Array.from(l).indexOf(c)},o=(l,c)=>{l.length!==0&&l[c].focus()},a=l=>{const c=s(l),u=c>=1?c-1:l.length-1;o(l,u)},i=l=>{const c=s(l),u=c===l.length-1?0:c+1;o(l,u)};return $s({ArrowUp:{action:()=>a(n()),allowOnFocusedInput:!0},ArrowDown:{action:()=>i(n()),allowOnFocusedInput:!0}}),(l,c)=>(p(),v("ul",{ref_key:"dropdownMenuRef",ref:t,class:se(["dropdown menu vertical",[e.placement&&`dropdown--${e.placement}`]])},[We(l.$slots,"default")],2))}},g$={props:{featureKey:{type:String,required:!0}},computed:{...lt({isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",accountId:"getCurrentAccountId"}),isFeatureEnabled(){return this.isFeatureEnabledonAccount(this.accountId,this.featureKey)}}},_$={key:0};function v$(e,t,n,s,o,a){return a.isFeatureEnabled?(p(),v("div",_$,[We(e.$slots,"default")])):w("",!0)}const b$=Ae(g$,[["render",v$]]),E$={props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},helpText:{type:String,default:""},error:{type:String,default:""},readonly:{type:Boolean,default:!1},styles:{type:Object,default:()=>{}}},emits:["update:modelValue","input","blur"],mounted(){},methods:{onChange(e){this.$emit("input",e.target.value),this.$emit("update:modelValue",e.target.value)},onBlur(e){this.$emit("blur",e.target.value)}}},T$={class:"input-container"},y$={key:0},S$=["value","type","placeholder","readonly"],A$={key:1,class:"help-text"},I$={key:2,class:"message"};function C$(e,t,n,s,o,a){return p(),v("label",T$,[n.label?(p(),v("span",y$,A(n.label),1)):w("",!0),h("input",{value:n.modelValue,type:n.type,placeholder:n.placeholder,readonly:n.readonly,style:Ht(n.styles),onInput:t[0]||(t[0]=(...i)=>a.onChange&&a.onChange(...i)),onBlur:t[1]||(t[1]=(...i)=>a.onBlur&&a.onBlur(...i))},null,44,S$),n.helpText?(p(),v("p",A$,A(n.helpText),1)):w("",!0),n.error?(p(),v("span",I$,A(n.error),1)):w("",!0),We(e.$slots,"masked",{},void 0,!0)])}const O$=Ae(E$,[["render",C$],["__scopeId","data-v-9fe871f7"]]),N$={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","60\\d{8}|(?:1\\d|[39])\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:1[49]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","[56]94\\d{6}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",[6,7,8,9,10,11]],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[0135-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","596\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","38\\d{6}|[78]\\d{9,13}|(?:20|9\\d)\\d{8}",[8,10,11,12,13,14],[["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["3"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|80\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-5]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:3052(?:0[0-8]|[1-9]\\d)|5056(?:[0-35-9]\\d|4[468])|7302[0-4]\\d)\\d{4}|(?:305[3-9]|472[24]|505[2-57-9]|7306|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function Zf(e,t){var n=Array.prototype.slice.call(t);return n.push(N$),e.apply(this,n)}function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function w$(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function R$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pc(e,t)}function $$(e){var t=ST();return function(){var s=hc(e),o;if(t){var a=hc(this).constructor;o=Reflect.construct(s,arguments,a)}else o=s.apply(this,arguments);return M$(this,o)}}function M$(e,t){if(t&&(Um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yT(e)}function yT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gm(e){var t=typeof Map=="function"?new Map:void 0;return Gm=function(s){if(s===null||!L$(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(s))return t.get(s);t.set(s,o)}function o(){return ku(s,arguments,hc(this).constructor)}return o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),pc(o,s)},Gm(e)}function ku(e,t,n){return ST()?ku=Reflect.construct:ku=function(o,a,i){var r=[null];r.push.apply(r,a);var l=Function.bind.apply(o,r),c=new l;return i&&pc(c,i.prototype),c},ku.apply(null,arguments)}function ST(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L$(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function pc(e,t){return pc=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},pc(e,t)}function hc(e){return hc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},hc(e)}var Lo=function(e){x$(n,e);var t=$$(n);function n(s){var o;return R$(this,n),o=t.call(this,s),Object.setPrototypeOf(yT(o),n.prototype),o.name=o.constructor.name,o}return w$(n)}(Gm(Error)),Qf=2,k$=17,D$=3,qa="0-9０-９٠-٩۰-۹",P$="-‐-―−ー－",B$="／/",F$="．.",U$="  ­​⁠　",G$="()（）［］\\[\\]",V$="~⁓∼～",od="".concat(P$).concat(B$).concat(F$).concat(U$).concat(G$).concat(V$),Jf="+＋";function sb(e,t){e=e.split("-"),t=t.split("-");for(var n=e[0].split("."),s=t[0].split("."),o=0;o<3;o++){var a=Number(n[o]),i=Number(s[o]);if(a>i)return 1;if(i>a)return-1;if(!isNaN(a)&&isNaN(i))return 1;if(isNaN(a)&&!isNaN(i))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}var H$={}.constructor;function Du(e){return e!=null&&e.constructor===H$}function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function Fd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W$(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Ud(e,t,n){return t&&W$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var z$="1.2.0",j$="1.7.35",ab=" ext. ",K$=/^\d+$/,Qs=function(){function e(t){Fd(this,e),Z$(t),this.metadata=t,AT.call(this,t)}return Ud(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(n){return n!=="001"})}},{key:"getCountryMetadata",value:function(n){return this.metadata.countries[n]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(n){return this.getCountryMetadata(n)!==void 0}},{key:"hasCallingCode",value:function(n){if(this.getCountryCodesForCallingCode(n))return!0;if(this.nonGeographic()){if(this.nonGeographic()[n])return!0}else{var s=this.countryCallingCodes()[n];if(s&&s.length===1&&s[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(n){return this.nonGeographic()?!!this.nonGeographic()[n]:!this.getCountryCodesForCallingCode(n)}},{key:"country",value:function(n){return this.selectNumberingPlan(n)}},{key:"selectNumberingPlan",value:function(n,s){if(n&&K$.test(n)&&(s=n,n=null),n&&n!=="001"){if(!this.hasCountry(n))throw new Error("Unknown country: ".concat(n));this.numberingPlan=new ob(this.getCountryMetadata(n),this)}else if(s){if(!this.hasCallingCode(s))throw new Error("Unknown calling code: ".concat(s));this.numberingPlan=new ob(this.getNumberingPlanMetadata(s),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(n){var s=this.countryCallingCodes()[n];if(s)return s.length===1&&s[0].length===3?void 0:s}},{key:"getCountryCodeForCallingCode",value:function(n){var s=this.getCountryCodesForCallingCode(n);if(s)return s[0]}},{key:"getNumberingPlanMetadata",value:function(n){var s=this.getCountryCodeForCallingCode(n);if(s)return this.getCountryMetadata(s);if(this.nonGeographic()){var o=this.nonGeographic()[n];if(o)return o}else{var a=this.countryCallingCodes()[n];if(a&&a.length===1&&a[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(n){return this.numberingPlan.type(n)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(n){return this.selectNumberingPlan(n)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),e}(),ob=function(){function e(t,n){Fd(this,e),this.globalMetadataObject=n,this.metadata=t,AT.call(this,n.metadata)}return Ud(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(n){return n[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var n=this,s=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return s.map(function(o){return new Y$(o,n)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(n){return n[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(n){if(this.hasTypes()&&ib(this.types(),n))return new q$(ib(this.types(),n),this)}},{key:"ext",value:function(){return this.v1||this.v2?ab:this.metadata[13]||ab}}]),e}(),Y$=function(){function e(t,n){Fd(this,e),this._format=t,this.metadata=n}return Ud(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!X$.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),X$=/^\(?\$1\)?$/,q$=function(){function e(t,n){Fd(this,e),this.type=t,this.metadata=n}return Ud(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function ib(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}function Z$(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!Du(e)||!Du(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(Du(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+Q$(e)+": "+e,"."))}var Q$=function(t){return Vm(t)};function eg(e,t){if(t=new Qs(t),t.hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function J$(e,t){return t.countries.hasOwnProperty(e)}function AT(e){var t=e.version;typeof t=="number"?(this.v1=t===1,this.v2=t===2,this.v3=t===3,this.v4=t===4):t?sb(t,z$)===-1?this.v2=!0:sb(t,j$)===-1?this.v3=!0:this.v4=!0:this.v1=!0}var eM=";ext=",Er=function(t){return"([".concat(qa,"]{1,").concat(t,"})")};function IT(e){var t="20",n="15",s="9",o="6",a="[  \\t,]*",i="[:\\.．]?[  \\t,-]*",r="#?",l="(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|anexo)",c="(?:[xｘ#＃~～]|int|ｉｎｔ)",u="[- ]+",d="[  \\t]*",m="(?:,{2}|;)",f=eM+Er(t),g=a+l+i+Er(t)+r,T=a+c+i+Er(s)+r,S=u+Er(o)+"#",_=d+m+i+Er(n)+r,E=d+"(?:,)+"+i+Er(s)+r;return f+"|"+g+"|"+T+"|"+S+"|"+_+"|"+E}var tM="["+qa+"]{"+Qf+"}",nM="["+Jf+"]{0,1}(?:["+od+"]*["+qa+"]){3,}["+od+qa+"]*",sM=new RegExp("^["+Jf+"]{0,1}(?:["+od+"]*["+qa+"]){1,2}$","i"),aM=nM+"(?:"+IT()+")?",oM=new RegExp("^"+tM+"$|^"+aM+"$","i");function iM(e){return e.length>=Qf&&oM.test(e)}function rM(e){return sM.test(e)}var rb=new RegExp("(?:"+IT()+")$","i");function lM(e){var t=e.search(rb);if(t<0)return{};for(var n=e.slice(0,t),s=e.match(rb),o=1;o<s.length;){if(s[o])return{number:n,ext:s[o]};o++}}var cM={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};function uM(e){return cM[e]}function dM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=pM(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pM(e,t){if(e){if(typeof e=="string")return lb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lb(e,t)}}function lb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function cb(e){for(var t="",n=dM(e.split("")),s;!(s=n()).done;){var o=s.value;t+=hM(o,t)||""}return t}function hM(e,t,n){return e==="+"?t?void 0:"+":uM(e)}function tg(e,t){return mM(e,void 0,t)}function mM(e,t,n){var s=n.type(t),o=s&&s.possibleLengths()||n.possibleLengths();if(!o)return"IS_POSSIBLE";var a=e.length,i=o[0];return i===a?"IS_POSSIBLE":i>a?"TOO_SHORT":o[o.length-1]<a?"TOO_LONG":o.indexOf(a,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function fM(e,t,n){if(t===void 0&&(t={}),n=new Qs(n),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}}if(n.possibleLengths())return CT(e.phone||e.nationalNumber,n);if(e.countryCallingCode&&n.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function CT(e,t){switch(tg(e,t)){case"IS_POSSIBLE":return!0;default:return!1}}function Vo(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}function gM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=_M(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _M(e,t){if(e){if(typeof e=="string")return ub(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ub(e,t)}}function ub(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var vM=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function ng(e,t,n){if(t=t||{},!(!e.country&&!e.countryCallingCode)){n=new Qs(n),n.selectNumberingPlan(e.country,e.countryCallingCode);var s=t.v2?e.nationalNumber:e.phone;if(Vo(s,n.nationalNumberPattern())){if(Sh(s,"FIXED_LINE",n))return n.type("MOBILE")&&n.type("MOBILE").pattern()===""||!n.type("MOBILE")||Sh(s,"MOBILE",n)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var o=gM(vM),a;!(a=o()).done;){var i=a.value;if(Sh(s,i,n))return i}}}}function Sh(e,t,n){return t=n.type(t),!t||!t.pattern()||t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0?!1:Vo(e,t.pattern())}function bM(e,t,n){if(t=t||{},n=new Qs(n),n.selectNumberingPlan(e.country,e.countryCallingCode),n.hasTypes())return ng(e,t,n.metadata)!==void 0;var s=t.v2?e.nationalNumber:e.phone;return Vo(s,n.nationalNumberPattern())}function EM(e,t,n){var s=new Qs(n),o=s.getCountryCodesForCallingCode(e);return o?o.filter(function(a){return TM(t,a,n)}):[]}function TM(e,t,n){var s=new Qs(n);return s.selectNumberingPlan(t),s.numberingPlan.possibleLengths().indexOf(e.length)>=0}function yM(e){return e.replace(new RegExp("[".concat(od,"]+"),"g")," ").trim()}var SM=/(\$\d)/;function AM(e,t,n){var s=n.useInternationalFormat,o=n.withNationalPrefix,a=e.replace(new RegExp(t.pattern()),s?t.internationalFormat():o&&t.nationalPrefixFormattingRule()?t.format().replace(SM,t.nationalPrefixFormattingRule()):t.format());return s?yM(a):a}var IM=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function CM(e,t,n){var s=new Qs(n);if(s.selectNumberingPlan(e,t),s.defaultIDDPrefix())return s.defaultIDDPrefix();if(IM.test(s.IDDPrefix()))return s.IDDPrefix()}function OM(e){var t=e.number,n=e.ext;if(!t)return"";if(t[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(n?";ext="+n:"")}function NM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=wM(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wM(e,t){if(e){if(typeof e=="string")return db(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return db(e,t)}}function db(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function pb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function hb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pb(Object(n),!0).forEach(function(s){RM(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pb(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function RM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mb={formatExtension:function(t,n,s){return"".concat(t).concat(s.ext()).concat(n)}};function xM(e,t,n,s){if(n?n=hb(hb({},mb),n):n=mb,s=new Qs(s),e.country&&e.country!=="001"){if(!s.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));s.country(e.country)}else if(e.countryCallingCode)s.selectNumberingPlan(e.countryCallingCode);else return e.phone||"";var o=s.countryCallingCode(),a=n.v2?e.nationalNumber:e.phone,i;switch(t){case"NATIONAL":return a?(i=id(a,e.carrierCode,"NATIONAL",s,n),Ah(i,e.ext,s,n.formatExtension)):"";case"INTERNATIONAL":return a?(i=id(a,null,"INTERNATIONAL",s,n),i="+".concat(o," ").concat(i),Ah(i,e.ext,s,n.formatExtension)):"+".concat(o);case"E.164":return"+".concat(o).concat(a);case"RFC3966":return OM({number:"+".concat(o).concat(a),ext:e.ext});case"IDD":if(!n.fromCountry)return;var r=MM(a,e.carrierCode,o,n.fromCountry,s);return Ah(r,e.ext,s,n.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function id(e,t,n,s,o){var a=$M(s.formats(),e);return a?AM(e,a,{useInternationalFormat:n==="INTERNATIONAL",withNationalPrefix:!(a.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&o&&o.nationalPrefix===!1)}):e}function $M(e,t){for(var n=NM(e),s;!(s=n()).done;){var o=s.value;if(o.leadingDigitsPatterns().length>0){var a=o.leadingDigitsPatterns()[o.leadingDigitsPatterns().length-1];if(t.search(a)!==0)continue}if(Vo(t,o.pattern()))return o}}function Ah(e,t,n,s){return t?s(e,t,n):e}function MM(e,t,n,s,o){var a=eg(s,o.metadata);if(a===n){var i=id(e,t,"NATIONAL",o);return n==="1"?n+" "+i:i}var r=CM(s,void 0,o.metadata);if(r)return"".concat(r," ").concat(n," ").concat(id(e,null,"INTERNATIONAL",o))}function fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function gb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fb(Object(n),!0).forEach(function(s){LM(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fb(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function LM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function PM(e,t,n){return t&&DM(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var BM=function(){function e(t,n,s){if(kM(this,e),!t)throw new TypeError("`country` or `countryCallingCode` not passed");if(!n)throw new TypeError("`nationalNumber` not passed");if(!s)throw new TypeError("`metadata` not passed");var o=UM(t,s),a=o.country,i=o.countryCallingCode;this.country=a,this.countryCallingCode=i,this.nationalNumber=n,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return s}}return PM(e,[{key:"setExt",value:function(n){this.ext=n}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:EM(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return fM(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return bM(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var n=new Qs(this.getMetadata());return n.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(n){return this.number===n.number&&this.ext===n.ext}},{key:"getType",value:function(){return ng(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(n,s){return xM(this,n,s?gb(gb({},s),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(n){return this.format("NATIONAL",n)}},{key:"formatInternational",value:function(n){return this.format("INTERNATIONAL",n)}},{key:"getURI",value:function(n){return this.format("RFC3966",n)}}]),e}(),FM=function(t){return/^[A-Z]{2}$/.test(t)};function UM(e,t){var n,s,o=new Qs(t);return FM(e)?(n=e,o.selectNumberingPlan(n),s=o.countryCallingCode()):s=e,{country:n,countryCallingCode:s}}var GM=new RegExp("(["+qa+"])");function VM(e,t,n,s){if(t){var o=new Qs(s);o.selectNumberingPlan(t,n);var a=new RegExp(o.IDDPrefix());if(e.search(a)===0){e=e.slice(e.match(a)[0].length);var i=e.match(GM);if(!(i&&i[1]!=null&&i[1].length>0&&i[1]==="0"))return e}}}function HM(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var n=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),s=n.exec(e);if(s){var o,a,i=s.length-1,r=i>0&&s[i];if(t.nationalPrefixTransformRule()&&r)o=e.replace(n,t.nationalPrefixTransformRule()),i>1&&(a=s[1]);else{var l=s[0];o=e.slice(l.length),r&&(a=s[1])}var c;if(r){var u=e.indexOf(s[1]),d=e.slice(0,u);d===t.numberingPlan.nationalPrefix()&&(c=t.numberingPlan.nationalPrefix())}else c=s[0];return{nationalNumber:o,nationalPrefix:c,carrierCode:a}}}return{nationalNumber:e}}function Hm(e,t){var n=HM(e,t),s=n.carrierCode,o=n.nationalNumber;if(o!==e){if(!WM(e,o,t))return{nationalNumber:e};if(t.possibleLengths()&&!zM(o,t))return{nationalNumber:e}}return{nationalNumber:o,carrierCode:s}}function WM(e,t,n){return!(Vo(e,n.nationalNumberPattern())&&!Vo(t,n.nationalNumberPattern()))}function zM(e,t){switch(tg(e,t)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function jM(e,t,n,s){var o=t?eg(t,s):n;if(e.indexOf(o)===0){s=new Qs(s),s.selectNumberingPlan(t,n);var a=e.slice(o.length),i=Hm(a,s),r=i.nationalNumber,l=Hm(e,s),c=l.nationalNumber;if(!Vo(c,s.nationalNumberPattern())&&Vo(r,s.nationalNumberPattern())||tg(c,s)==="TOO_LONG")return{countryCallingCode:o,number:a}}return{number:e}}function KM(e,t,n,s){if(!e)return{};var o;if(e[0]!=="+"){var a=VM(e,t,n,s);if(a&&a!==e)o=!0,e="+"+a;else{if(t||n){var i=jM(e,t,n,s),r=i.countryCallingCode,l=i.number;if(r)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:r,number:l}}return{number:e}}}if(e[1]==="0")return{};s=new Qs(s);for(var c=2;c-1<=D$&&c<=e.length;){var u=e.slice(1,c);if(s.hasCallingCode(u))return s.selectNumberingPlan(u),{countryCallingCodeSource:o?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:u,number:e.slice(c)};c++}return{}}function YM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=XM(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XM(e,t){if(e){if(typeof e=="string")return _b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _b(e,t)}}function _b(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function qM(e,t){var n=t.countries,s=t.defaultCountry,o=t.metadata;o=new Qs(o);for(var a=[],i=YM(n),r;!(r=i()).done;){var l=r.value;if(o.country(l),o.leadingDigits()){if(e&&e.search(o.leadingDigits())===0)return l}else if(ng({phone:e,country:l},void 0,o.metadata))if(s){if(l===s)return l;a.push(l)}else return l}if(a.length>0)return a[0]}function ZM(e,t){var n=t.nationalNumber,s=t.defaultCountry,o=t.metadata,a=o.getCountryCodesForCallingCode(e);if(a)return a.length===1?a[0]:qM(n,{countries:a,defaultCountry:s,metadata:o.metadata})}var OT="+",QM="[\\-\\.\\(\\)]?",vb="(["+qa+"]|"+QM+")",JM="^\\"+OT+vb+"*["+qa+"]"+vb+"*$",e3=new RegExp(JM,"g"),Wm=qa,t3="["+Wm+"]+((\\-)*["+Wm+"])*",n3="a-zA-Z",s3="["+n3+"]+((\\-)*["+Wm+"])*",a3="^("+t3+"\\.)*"+s3+"\\.?$",o3=new RegExp(a3,"g"),bb="tel:",zm=";phone-context=",i3=";isub=";function r3(e){var t=e.indexOf(zm);if(t<0)return null;var n=t+zm.length;if(n>=e.length)return"";var s=e.indexOf(";",n);return s>=0?e.substring(n,s):e.substring(n)}function l3(e){return e===null?!0:e.length===0?!1:e3.test(e)||o3.test(e)}function c3(e,t){var n=t.extractFormattedPhoneNumber,s=r3(e);if(!l3(s))throw new Lo("NOT_A_NUMBER");var o;if(s===null)o=n(e)||"";else{o="",s.charAt(0)===OT&&(o+=s);var a=e.indexOf(bb),i;a>=0?i=a+bb.length:i=0;var r=e.indexOf(zm);o+=e.substring(i,r)}var l=o.indexOf(i3);if(l>0&&(o=o.substring(0,l)),o!=="")return o}var u3=250,d3=new RegExp("["+Jf+qa+"]"),p3=new RegExp("[^"+qa+"#]+$");function h3(e,t,n){if(t=t||{},n=new Qs(n),t.defaultCountry&&!n.hasCountry(t.defaultCountry))throw t.v2?new Lo("INVALID_COUNTRY"):new Error("Unknown country: ".concat(t.defaultCountry));var s=f3(e,t.v2,t.extract),o=s.number,a=s.ext,i=s.error;if(!o){if(t.v2)throw i==="TOO_SHORT"?new Lo("TOO_SHORT"):new Lo("NOT_A_NUMBER");return{}}var r=_3(o,t.defaultCountry,t.defaultCallingCode,n),l=r.country,c=r.nationalNumber,u=r.countryCallingCode,d=r.countryCallingCodeSource,m=r.carrierCode;if(!n.hasSelectedNumberingPlan()){if(t.v2)throw new Lo("INVALID_COUNTRY");return{}}if(!c||c.length<Qf){if(t.v2)throw new Lo("TOO_SHORT");return{}}if(c.length>k$){if(t.v2)throw new Lo("TOO_LONG");return{}}if(t.v2){var f=new BM(u,c,n.metadata);return l&&(f.country=l),m&&(f.carrierCode=m),a&&(f.ext=a),f.__countryCallingCodeSource=d,f}var g=(t.extended?n.hasSelectedNumberingPlan():l)?Vo(c,n.nationalNumberPattern()):!1;return t.extended?{country:l,countryCallingCode:u,carrierCode:m,valid:g,possible:g?!0:!!(t.extended===!0&&n.possibleLengths()&&CT(c,n)),phone:c,ext:a}:g?g3(l,c,a):{}}function m3(e,t,n){if(e){if(e.length>u3){if(n)throw new Lo("TOO_LONG");return}if(t===!1)return e;var s=e.search(d3);if(!(s<0))return e.slice(s).replace(p3,"")}}function f3(e,t,n){var s=c3(e,{extractFormattedPhoneNumber:function(i){return m3(i,n,t)}});if(!s)return{};if(!iM(s))return rM(s)?{error:"TOO_SHORT"}:{};var o=lM(s);return o.ext?o:{number:s}}function g3(e,t,n){var s={country:e,phone:t};return n&&(s.ext=n),s}function _3(e,t,n,s){var o=KM(cb(e),t,n,s.metadata),a=o.countryCallingCodeSource,i=o.countryCallingCode,r=o.number,l;if(i)s.selectNumberingPlan(i);else if(r&&(t||n))s.selectNumberingPlan(t,n),t&&(l=t),i=n||eg(t,s.metadata);else return{};if(!r)return{countryCallingCodeSource:a,countryCallingCode:i};var c=Hm(cb(r),s),u=c.nationalNumber,d=c.carrierCode,m=ZM(i,{nationalNumber:u,defaultCountry:t,metadata:s});return m&&(l=m,m==="001"||s.country(l)),{country:l,countryCallingCode:i,countryCallingCodeSource:a,nationalNumber:u,carrierCode:d}}function Eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function Tb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Eb(Object(n),!0).forEach(function(s){v3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eb(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function v3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NT(e,t,n){return h3(e,Tb(Tb({},t),{},{v2:!0}),n)}function yb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function b3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yb(Object(n),!0).forEach(function(s){E3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yb(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function E3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T3(e,t){return I3(e)||A3(e,t)||S3(e,t)||y3()}function y3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S3(e,t){if(e){if(typeof e=="string")return Sb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sb(e,t)}}function Sb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function A3(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s=[],o=!0,a=!1,i,r;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(s.push(i.value),!(t&&s.length===t));o=!0);}catch(l){a=!0,r=l}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw r}}return s}}function I3(e){if(Array.isArray(e))return e}function sg(e){var t=Array.prototype.slice.call(e),n=T3(t,4),s=n[0],o=n[1],a=n[2],i=n[3],r,l,c;if(typeof s=="string")r=s;else throw new TypeError("A text for parsing must be a string.");if(!o||typeof o=="string")i?(l=a,c=i):(l=void 0,c=a),o&&(l=b3({defaultCountry:o},l));else if(Du(o))a?(l=o,c=a):c=o;else throw new Error("Invalid second argument: ".concat(o));return{text:r,options:l,metadata:c}}function C3(){var e=sg(arguments),t=e.text,n=e.options,s=e.metadata;return NT(t,n,s)}function Ab(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function Ib(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ab(Object(n),!0).forEach(function(s){O3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ab(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function O3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wT(e,t,n){t&&t.defaultCountry&&!J$(t.defaultCountry,n)&&(t=Ib(Ib({},t),{},{defaultCountry:void 0}));try{return NT(e,t,n)}catch(s){if(!(s instanceof Lo))throw s}}function N3(){var e=sg(arguments),t=e.text,n=e.options,s=e.metadata;return wT(t,n,s)}function Cb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function Ob(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cb(Object(n),!0).forEach(function(s){w3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cb(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function w3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R3(){var e=sg(arguments),t=e.text,n=e.options,s=e.metadata;n=Ob(Ob({},n),{},{extract:!1});var o=wT(t,n,s);return o&&o.isValid()||!1}function x3(){return Zf(C3,arguments)}function rd(){return Zf(N3,arguments)}function $3(){return Zf(R3,arguments)}const M3={props:{modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},readonly:{type:Boolean,default:!1},styles:{type:Object,default:()=>{}},error:{type:Boolean,default:!1}},emits:["blur","setCode","update:modelValue"],data(){return{selectedIndex:-1,showDropdown:!1,searchCountry:"",activeCountryCode:b0(),activeDialCode:v0(),phoneNumber:this.modelValue}},computed:{countries(){return[{name:this.dropdownFirstItemName,dial_code:"",emoji:"",id:""},...xa]},dropdownFirstItemName(){return this.activeCountryCode?"Clear selection":"Select Country"},filteredCountriesBySearch(){return this.countries.filter(e=>{const{name:t,dial_code:n,id:s}=e,o=this.searchCountry.toLowerCase();return t.toLowerCase().includes(o)||n.toLowerCase().includes(o)||s.toLowerCase().includes(o)})},activeCountry(){return this.activeCountryCode?this.countries.find(e=>e.id===this.activeCountryCode):""}},watch:{modelValue(){const e=rd(this.modelValue);e&&(this.activeCountryCode=e.country,this.activeDialCode=`+${e.countryCallingCode}`,this.phoneNumber=this.modelValue.replace(`+${e.countryCallingCode}`,""))}},mounted(){this.setActiveCountry()},methods:{onOutsideClick(e){this.showDropdown&&e.target!==this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&this.closeDropdown()},onChange(e){this.phoneNumber=e.target.value,this.$emit("update:modelValue",e.target.value),this.$emit("setCode",this.activeDialCode)},onBlur(e){this.$emit("blur",e.target.value)},onSearchCountry(){this.selectedIndex=0},moveUp(){this.showDropdown&&(this.selectedIndex=Math.max(this.selectedIndex-1,0),this.scrollToSelected())},moveDown(){this.showDropdown&&(this.selectedIndex=Math.min(this.selectedIndex+1,this.filteredCountriesBySearch.length-1),this.scrollToSelected())},scrollToSelected(){this.$nextTick(()=>{const e=this.$refs.dropdown,t=this.$refs.dropdownItem[this.selectedIndex],n=40;if(t){const s=t.offsetTop;e.scrollTop=s-n}})},onSelectCountry(e){!e||!this.showDropdown||(this.activeCountryCode=e.id,this.searchCountry="",this.activeDialCode=e.dial_code,this.$emit("setCode",e.dial_code),this.closeDropdown(),this.$refs.phoneNumberInput.focus())},setActiveCountry(){const{phoneNumber:e}=this;if(!e)return;const t=rd(e);t&&(this.activeCountryCode=t.country,this.activeDialCode=t.countryCallingCode)},toggleCountryDropdown(){this.showDropdown=!this.showDropdown,this.selectedIndex=-1,this.showDropdown&&this.$nextTick(()=>{this.$refs.searchbar.focus()})},closeDropdown(){this.selectedIndex=-1,this.showDropdown=!1}}},L3={class:"relative phone-input--wrap"},k3={key:0,class:"mb-0"},D3={key:0,class:"flex py-2 pl-2 pr-0 text-base font-normal leading-normal text-n-slate-12"},P3=["value","placeholder","readonly"],B3={class:"sticky top-0 p-1 bg-white dark:bg-transparent backdrop-blur-[100px]"},F3=["placeholder"],U3=["onClick"],G3={class:"mr-1 text-base"},V3={class:"max-w-[7.5rem] overflow-hidden text-ellipsis whitespace-nowrap"},H3={class:"ml-1 text-xs text-n-slate-11"},W3={key:0},z3={class:"flex items-center justify-center mt-4 text-sm text-n-slate-10"};function j3(e,t,n,s,o,a){const i=M("fluent-icon"),r=qe("on-clickaway");return p(),v("div",L3,[h("div",{class:se(["flex items-center justify-start border-none outline outline-1 rounded-lg bg-n-alpha-black2",n.error?"outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 mb-1":"mb-4 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6"])},[h("div",{class:"cursor-pointer py-2 pr-1.5 pl-2 rounded-tl-lg rounded-bl-lg flex items-center justify-center gap-1.5 bg-n-solid-3 h-10 w-14",onClick:t[0]||(t[0]=Fe((...l)=>a.toggleCountryDropdown&&a.toggleCountryDropdown(...l),["prevent"]))},[a.activeCountry?(p(),v("h5",k3,A(a.activeCountry.emoji),1)):(p(),$(i,{key:1,icon:"globe",class:"fluent-icon",size:"16"})),y(i,{icon:"chevron-down",class:"fluent-icon",size:"12"})]),o.activeDialCode?(p(),v("span",D3,A(o.activeDialCode),1)):w("",!0),h("input",{ref:"phoneNumberInput",value:o.phoneNumber,type:"tel",class:"no-margin !rounded-tl-none !rounded-bl-none !outline-none !border-0 font-normal !w-full !bg-transparent text-base !px-1.5 placeholder:font-normal",placeholder:n.placeholder,readonly:n.readonly,style:Ht(n.styles),onInput:t[1]||(t[1]=(...l)=>a.onChange&&a.onChange(...l)),onBlur:t[2]||(t[2]=(...l)=>a.onBlur&&a.onBlur(...l))},null,44,P3)],2),o.showDropdown?re((p(),v("div",{key:0,ref:"dropdown",tabindex:"0",class:"z-10 absolute h-60 w-[12.5rem] shadow-md overflow-y-auto top-10 rounded-lg px-0 pt-0 pb-1 bg-n-alpha-3 backdrop-blur-[100px]",onKeydown:[t[5]||(t[5]=kn(Fe((...l)=>a.moveUp&&a.moveUp(...l),["prevent"]),["up"])),t[6]||(t[6]=kn(Fe((...l)=>a.moveDown&&a.moveDown(...l),["prevent"]),["down"])),t[7]||(t[7]=kn(Fe(l=>a.onSelectCountry(a.filteredCountriesBySearch[o.selectedIndex]),["prevent"]),["enter"]))]},[h("div",B3,[re(h("input",{ref:"searchbar","onUpdate:modelValue":t[3]||(t[3]=l=>o.searchCountry=l),type:"text",placeholder:e.$t("GENERAL.PHONE_INPUT.PLACEHOLDER"),class:"!h-8 !mb-0 !text-sm !outline-n-brand dark:!outline-n-brand",onInput:t[4]||(t[4]=(...l)=>a.onSearchCountry&&a.onSearchCountry(...l))},null,40,F3),[[mt,o.searchCountry]])]),(p(!0),v(pe,null,Ne(a.filteredCountriesBySearch,(l,c)=>(p(),v("div",{ref_for:!0,ref:"dropdownItem",key:c,class:se(["flex items-center px-1 py-0 cursor-pointer h-7 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2",{"bg-n-alpha-1 dark:bg-n-alpha-2":l.id===o.activeCountryCode,"bg-n-alpha-1 dark:bg-n-alpha-2":c===o.selectedIndex}]),onClick:u=>a.onSelectCountry(l)},[h("span",G3,A(l.emoji),1),h("span",V3,A(l.name),1),h("span",H3,A(l.dial_code),1)],10,U3))),128)),a.filteredCountriesBySearch.length===0?(p(),v("div",W3,[h("span",z3,A(e.$t("GENERAL.PHONE_INPUT.EMPTY_STATE")),1)])):w("",!0)],32)),[[r,a.onOutsideClick]]):w("",!0)])}const K3=Ae(M3,[["render",j3]]),Y3={props:{title:{type:String,required:!0},description:{type:String,default:""},href:{type:String,default:""},bgColor:{type:String,default:""},small:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},icon:{type:String,default:""},color:{type:String,default:""},colorScheme:{type:String,default:""},variant:{type:String,default:""}},emits:["remove"],computed:{textColor(){return this.variant==="smooth"||this.variant==="dashed"?"":this.color||QC(this.bgColor)},labelClass(){return`label ${this.colorScheme} ${this.variant} ${this.small?"small":""}`},labelStyle(){return this.bgColor?{background:this.bgColor,color:this.textColor,border:`1px solid ${this.bgColor}`}:{}},anchorStyle(){return this.bgColor?{color:this.textColor}:{}}},methods:{onClick(){this.$emit("remove",this.title)}}},X3=["title"],q3={key:0,class:"label-action--button"},Z3={key:2,class:"whitespace-nowrap text-ellipsis overflow-hidden"},Q3=["href"];function J3(e,t,n,s,o,a){const i=M("fluent-icon");return p(),v("div",{class:se(["inline-flex ltr:mr-1 rtl:ml-1 mb-1",a.labelClass]),style:Ht(a.labelStyle),title:n.description},[n.icon?(p(),v("span",q3,[y(i,{icon:n.icon,size:"12",class:"label--icon cursor-pointer"},null,8,["icon"])])):w("",!0),["smooth","dashed"].includes(n.variant)&&n.title&&!n.icon?(p(),v("span",{key:1,style:Ht({background:n.color}),class:"label-color-dot flex-shrink-0"},null,4)):w("",!0),n.href?(p(),v("a",{key:3,href:n.href,style:Ht(a.anchorStyle)},A(n.title),13,Q3)):(p(),v("span",Z3,A(n.title),1)),n.showClose?(p(),v("button",{key:4,class:"label-close--button p-0",style:Ht({color:a.textColor}),onClick:t[0]||(t[0]=(...r)=>a.onClick&&a.onClick(...r))},[y(i,{icon:"dismiss",size:"12",class:"close--icon"})],4)):w("",!0)],14,X3)}const eL=Ae(Y3,[["render",J3],["__scopeId","data-v-868b6e74"]]),tL={props:{message:{type:String,default:""}}},nL={class:"flex items-center justify-center p-8"},sL={class:"flex items-center gap-2 text-base text-center w-100 text-slate-800 dark:text-slate-300"},aL={class:"text-base font-medium text-slate-800 dark:text-slate-100"};function oL(e,t,n,s,o,a){return p(),v("div",nL,[h("h6",sL,[h("span",aL,A(n.message),1),t[0]||(t[0]=h("span",{class:"spinner"},null,-1))])])}const Rc=Ae(tL,[["render",oL]]),iL={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""},headerContentValue:{type:String,default:""},headerImage:{type:String,default:""}}},rL={class:"flex flex-col items-start px-8 pt-8 pb-0"},lL=["src"],cL={"data-test-id":"modal-header-title",class:"text-base font-semibold leading-6 text-slate-800 dark:text-slate-50"},uL={key:1,"data-test-id":"modal-header-content",class:"w-full mt-2 text-sm leading-5 break-words text-slate-600 dark:text-slate-300"},dL={key:0,class:"text-sm font-semibold text-slate-600 dark:text-slate-300"};function pL(e,t,n,s,o,a){return p(),v("div",rL,[n.headerImage?(p(),v("img",{key:0,src:n.headerImage,alt:"No image"},null,8,lL)):w("",!0),h("h2",cL,A(n.headerTitle),1),n.headerContent?(p(),v("p",uL,[Re(A(n.headerContent)+" ",1),n.headerContentValue?(p(),v("span",dL,A(n.headerContentValue),1)):w("",!0)])):w("",!0),We(e.$slots,"default")])}const hL=Ae(iL,[["render",pL]]),_t={AGENT_BOTS:"agent_bots",AGENT_MANAGEMENT:"agent_management",AUTO_RESOLVE_CONVERSATIONS:"auto_resolve_conversations",AUTOMATIONS:"automations",CAMPAIGNS:"campaigns",CANNED_RESPONSES:"canned_responses",CRM:"crm",CUSTOM_ATTRIBUTES:"custom_attributes",INBOX_MANAGEMENT:"inbox_management",INTEGRATIONS:"integrations",LABELS:"labels",MACROS:"macros",HELP_CENTER:"help_center",REPORTS:"reports",TEAM_MANAGEMENT:"team_management",VOICE_RECORDER:"voice_recorder",AUDIT_LOGS:"audit_logs",INBOX_VIEW:"inbox_view",SLA:"sla",RESPONSE_BOT:"response_bot",CHANNEL_EMAIL:"channel_email",CHANNEL_FACEBOOK:"channel_facebook",CHANNEL_TWITTER:"channel_twitter",CHANNEL_WEBSITE:"channel_website",CUSTOM_REPLY_DOMAIN:"custom_reply_domain",CUSTOM_REPLY_EMAIL:"custom_reply_email",DISABLE_BRANDING:"disable_branding",EMAIL_CONTINUITY_ON_API_CHANNEL:"email_continuity_on_api_channel",INBOUND_EMAILS:"inbound_emails",IP_LOOKUP:"ip_lookup",LINEAR:"linear_integration",CAPTAIN:"captain_integration",CUSTOM_ROLES:"custom_roles",CHATWOOT_V4:"chatwoot_v4",REPORT_V4:"report_v4",CHANNEL_INSTAGRAM:"channel_instagram",CONTACT_CHATWOOT_SUPPORT_TEAM:"contact_chatwoot_support_team"},mL=[_t.SLA,_t.CAPTAIN,_t.CUSTOM_ROLES,_t.AUDIT_LOGS,_t.HELP_CENTER],fL={components:{NextButton:oe},props:{size:{type:String,default:"sm"}},computed:{...lt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),hasNextSidebar(){return this.isFeatureEnabledonAccount(this.accountId,_t.CHATWOOT_V4)}},methods:{onMenuItemClick(){wt.emit(jt.TOGGLE_SIDEMENU)}}};function gL(e,t,n,s,o,a){const i=M("NextButton");return a.hasNextSidebar?w("",!0):(p(),$(i,{key:0,ghost:"",slate:"",size:n.size,icon:"i-lucide-menu",class:"-ml-3",onClick:a.onMenuItemClick},null,8,["size","onClick"]))}const _L=Ae(fL,[["render",gL]]),vL={__name:"Tabs",props:{index:{type:Number,default:0},border:{type:Boolean,default:!0},isCompact:{type:Boolean,default:!1}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,o=Is("tabsContainer"),a=Is("tabsList"),{width:i}=uc(o),{width:r}=uc(a),l=X(!1),c=C({get:()=>n.index,set:m=>{s("change",m)}});Pn("activeIndex",c),Pn("updateActiveIndex",m=>{c.value=m});const u=()=>{o.value&&a.value&&(l.value=a.value.scrollWidth>a.value.clientWidth)},d=m=>{if(o.value&&a.value){let f=a.value.scrollLeft;f+=m==="left"?-100:100,a.value.scrollTo({top:0,left:f,behavior:"smooth"})}};return ct([i,r],()=>{u()},{immediate:!0}),(m,f)=>{const g=M("fluent-icon");return p(),v("div",{ref_key:"tabsContainer",ref:o,class:se([{"tabs--container--with-border":e.border,"tabs--container--compact":e.isCompact},"tabs--container"])},[l.value?(p(),v("button",{key:0,class:"tabs--scroll-button button clear secondary button--only-icon",onClick:f[0]||(f[0]=T=>d("left"))},[y(g,{icon:"chevron-left",size:16})])):w("",!0),h("ul",{ref_key:"tabsList",ref:a,class:se([{"tabs--with-scroll":l.value},"tabs"])},[We(m.$slots,"default")],2),l.value?(p(),v("button",{key:1,class:"tabs--scroll-button button clear secondary button--only-icon",onClick:f[1]||(f[1]=T=>d("right"))},[y(g,{icon:"chevron-right",size:16})])):w("",!0)],2)}}},bL={key:0,class:"badge min-w-[20px]"},EL={__name:"TabsItem",props:{index:{type:Number,default:0},name:{type:String,required:!0},disabled:{type:Boolean,default:!1},count:{type:Number,default:0},showBadge:{type:Boolean,default:!0}},setup(e){const t=e,n=_o("activeIndex"),s=_o("updateActiveIndex"),o=C(()=>t.index===n.value),a=C(()=>t.count),i=r=>{r.preventDefault(),t.disabled||s(t.index)};return(r,l)=>(p(),v("li",{class:se(["tabs-title",{"is-active":o.value}])},[h("a",{onClick:i},[Re(A(e.name)+" ",1),e.showBadge?(p(),v("div",bL,[h("span",null,A(a.value),1)])):w("",!0)])],2))}};function ui(e,t){En(2,arguments);var n=un(e),s=On(t);if(isNaN(s))return new Date(NaN);if(!s)return n;var o=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+s+1,0);var i=a.getDate();return o>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),o),n)}function mc(e,t){if(En(2,arguments),!t||typeof t!="object")return new Date(NaN);var n="years"in t?On(t.years):0,s="months"in t?On(t.months):0,o="weeks"in t?On(t.weeks):0,a="days"in t?On(t.days):0,i="hours"in t?On(t.hours):0,r="minutes"in t?On(t.minutes):0,l="seconds"in t?On(t.seconds):0,c=un(e),u=s||n?ui(c,s+n*12):c,d=a||o?tc(u,a+o*7):u,m=r+i*60,f=l+m*60,g=f*1e3,T=new Date(d.getTime()+g);return T}function RT(e,t){En(1,arguments);var n=t||{},s=n.locale,o=s&&s.options&&s.options.weekStartsOn,a=o==null?0:On(o),i=n.weekStartsOn==null?a:On(n.weekStartsOn);if(!(i>=0&&i<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var r=un(e),l=r.getDay(),c=(l<i?7:0)+l-i;return r.setDate(r.getDate()-c),r.setHours(0,0,0,0),r}function TL(e,t){En(2,arguments);var n=On(t),s=n*7;return tc(e,s)}function ag(e,t){En(2,arguments);var n=On(t);return ui(e,n*12)}function yL(e,t){En(2,arguments);var n=un(e),s=un(t);return n.getFullYear()-s.getFullYear()}var SL=36e5;function AL(e,t){En(2,arguments);var n=p0(e,t)/SL;return n>0?Math.floor(n):Math.ceil(n)}var IL=6e4;function Pu(e,t){En(2,arguments);var n=p0(e,t)/IL;return n>0?Math.floor(n):Math.ceil(n)}function CL(e,t){En(2,arguments);var n=un(e),s=un(t),o=Mm(n,s),a=Math.abs(yL(n,s));n.setFullYear("1584"),s.setFullYear("1584");var i=Mm(n,s)===-o,r=o*(a-i);return r===0?0:r}function OL(e,t){En(1,arguments);var n=e||{},s=un(n.start),o=un(n.end),a=o.getTime();if(!(s.getTime()<=a))throw new RangeError("Invalid interval");var i=[],r=s;r.setHours(0,0,0,0);var l=1;if(isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;r.getTime()<=a;)i.push(un(r)),r.setDate(r.getDate()+l),r.setHours(0,0,0,0);return i}function Yi(e){En(1,arguments);var t=un(e);return t.setDate(1),t.setHours(0,0,0,0),t}function NL(e){En(1,arguments);var t=un(e),n=t.getDay();return n}function wL(e){En(1,arguments);var t=un(e),n=t.getFullYear(),s=t.getMonth(),o=new Date(0);return o.setFullYear(n,s+1,0),o.setHours(0,0,0,0),o.getDate()}function RL(e){En(1,arguments);var t=un(e),n=t.getMonth();return n}function Nb(e){En(1,arguments);var t=un(e),n=t.getFullYear();return n}function Vr(e,t){En(2,arguments);var n=On(t);return ui(e,-n)}function bl(e,t){if(En(2,arguments),!t||typeof t!="object")return new Date(NaN);var n="years"in t?On(t.years):0,s="months"in t?On(t.months):0,o="weeks"in t?On(t.weeks):0,a="days"in t?On(t.days):0,i="hours"in t?On(t.hours):0,r="minutes"in t?On(t.minutes):0,l="seconds"in t?On(t.seconds):0,c=Vr(un(e),s+n*12),u=Fo(c,a+o*7),d=r+i*60,m=l+d*60,f=m*1e3,g=new Date(u.getTime()-f);return g}function xL(e){var t=e.start,n=e.end;En(1,arguments);var s=un(t),o=un(n);if(!lo(s))throw new RangeError("Start Date is invalid");if(!lo(o))throw new RangeError("End Date is invalid");var a={years:0,months:0,days:0,hours:0,minutes:0,seconds:0},i=Mm(s,o);a.years=Math.abs(CL(s,o));var r=bl(s,{years:i*a.years});a.months=Math.abs(EC(r,o));var l=bl(r,{months:i*a.months});a.days=Math.abs(y0(l,o));var c=bl(l,{days:i*a.days});a.hours=Math.abs(AL(c,o));var u=bl(c,{hours:i*a.hours});a.minutes=Math.abs(Pu(u,o));var d=bl(u,{minutes:i*a.minutes});return a.seconds=Math.abs(h0(d,o)),a}function xT(e,t){En(2,arguments);var n=un(e),s=un(t);return n.getTime()>s.getTime()}function $T(e,t){En(2,arguments);var n=un(e),s=un(t);return n.getTime()<s.getTime()}function MT(e){return En(1,arguments),un(e).getDay()===1}function jm(e,t){En(2,arguments);var n=un(e),s=un(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function ld(e,t){En(2,arguments);var n=un(e).getTime(),s=un(t.start).getTime(),o=un(t.end).getTime();if(!(s<=o))throw new RangeError("Invalid interval");return n>=s&&n<=o}var LT=36e5,kT=6e4,$L=2,Jc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ML=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,LL=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,kL=/^([+-])(\d{2})(?::?(\d{2}))?$/;function DT(e,t){En(1,arguments);var n={},s=n.additionalDigits==null?$L:On(n.additionalDigits);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var o=DL(e),a;if(o.date){var i=PL(o.date,s);a=BL(i.restDateString,i.year)}if(isNaN(a)||!a)return new Date(NaN);var r=a.getTime(),l=0,c;if(o.time&&(l=FL(o.time),isNaN(l)||l===null))return new Date(NaN);if(o.timezone){if(c=UL(o.timezone),isNaN(c))return new Date(NaN)}else{var u=new Date(r+l),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return new Date(r+l+c)}function DL(e){var t={},n=e.split(Jc.dateTimeDelimiter),s;if(n.length>2)return t;if(/:/.test(n[0])?(t.date=null,s=n[0]):(t.date=n[0],s=n[1],Jc.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Jc.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){var o=Jc.timezone.exec(s);o?(t.time=s.replace(o[1],""),t.timezone=o[1]):t.time=s}return t}function PL(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(n);if(!s)return{year:null};var o=s[1]&&parseInt(s[1]),a=s[2]&&parseInt(s[2]);return{year:a==null?o:a*100,restDateString:e.slice((s[1]||s[2]).length)}}function BL(e,t){if(t===null)return null;var n=e.match(ML);if(!n)return null;var s=!!n[4],o=El(n[1]),a=El(n[2])-1,i=El(n[3]),r=El(n[4]),l=El(n[5])-1;if(s)return zL(t,r,l)?GL(t,r,l):new Date(NaN);var c=new Date(0);return!HL(t,a,i)||!WL(t,o)?new Date(NaN):(c.setUTCFullYear(t,a,Math.max(o,i)),c)}function El(e){return e?parseInt(e):1}function FL(e){var t=e.match(LL);if(!t)return null;var n=Ih(t[1]),s=Ih(t[2]),o=Ih(t[3]);return jL(n,s,o)?n*LT+s*kT+o*1e3:NaN}function Ih(e){return e&&parseFloat(e.replace(",","."))||0}function UL(e){if(e==="Z")return 0;var t=e.match(kL);if(!t)return 0;var n=t[1]==="+"?-1:1,s=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return KL(s,o)?n*(s*LT+o*kT):NaN}function GL(e,t,n){var s=new Date(0);s.setUTCFullYear(e,0,4);var o=s.getUTCDay()||7,a=(t-1)*7+n+1-o;return s.setUTCDate(s.getUTCDate()+a),s}var VL=[31,null,31,30,31,30,31,31,30,31,30,31];function PT(e){return e%400===0||e%4===0&&e%100}function HL(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(VL[t]||(PT(e)?29:28))}function WL(e,t){return t>=1&&t<=(PT(e)?366:365)}function zL(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function jL(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function KL(e,t){return t>=0&&t<=59}function BT(e,t){En(2,arguments);var n=un(e),s=On(t),o=n.getFullYear(),a=n.getDate(),i=new Date(0);i.setFullYear(o,s,15),i.setHours(0,0,0,0);var r=wL(i);return n.setMonth(s,Math.min(a,r)),n}function YL(e,t){En(2,arguments);var n=un(e),s=On(t);return n.setHours(s),n}function XL(e,t){En(2,arguments);var n=un(e),s=On(t);return n.setMinutes(s),n}function qL(e,t){En(2,arguments);var n=un(e),s=On(t);return n.setSeconds(s),n}function ZL(e,t){En(2,arguments);var n=un(e),s=On(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(s),n)}function FT(e,t){En(2,arguments);var n=On(t);return ag(e,-n)}const QL=[{id:1,label:"M"},{id:2,label:"T"},{id:3,label:"W"},{id:4,label:"T"},{id:5,label:"F"},{id:6,label:"S"},{id:7,label:"S"}],UT=[{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_7_DAYS",value:"last7days"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_30_DAYS",value:"last30days"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_3_MONTHS",value:"last3months"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_6_MONTHS",value:"last6months"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_YEAR",value:"lastYear"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.CUSTOM_RANGE",value:"custom"}],JL={LAST_7_DAYS:"last7days",LAST_30_DAYS:"last30days",CUSTOM_RANGE:"custom"},xc={START_CALENDAR:"start",END_CALENDAR:"end"},Gd={WEEK:"week",MONTH:"month",YEAR:"year"},ek=e=>ms(e,"MMMM"),GT=e=>ms(e,"yyyy"),wb=()=>{const s=new Date(2222,11,15);return new Intl.DateTimeFormat(navigator.language).format(s).replace("2222","yyyy").replace("12","MM").replace("15","dd")},tk=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(n,s)=>e.slice(s*t,s*t+t)),nk=(e,t=1)=>{const n=Yi(e),s=RT(n,{weekStartsOn:t}),o=tc(s,41);return tk(OL({start:s,end:o}),7)},sk=(e,t,n,s,o)=>{const i={month:{prev:Vr,next:ui},year:{prev:FT,next:ag}}[o][s];if(e==="start")return{start:i(t,1),end:n};const r=i(n,1);return{start:t,end:r}},ak=(e,t)=>t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear(),ok=(e,t)=>jm(e,t),ik=e=>{const t=TC(e);return e.getDate()===t.getDate()},Ch=(e,t,n)=>{if(!t||!n)return!1;let s=Ys(t),o=Ys(n);return s>o&&([s,o]=[o,s]),lC(e,s)||ld(e,{start:s,end:o})},rk=(e,t,n,s)=>n&&s&&t<=s?ld(e,{start:t,end:s}):!1,lk=(e,t,n,s)=>{if(t&&!n&&s){const o=tc(e,1);return ld(o,{start:t,end:s})}if(t&&n){const o=tc(e,1);return ld(o,{start:t,end:n})}return!1},ck=(e,t)=>({last7days:()=>({start:Ys(Fo(t,6)),end:ro(t)}),last30days:()=>({start:Ys(Fo(t,29)),end:ro(t)}),last3months:()=>({start:Ys(Vr(t,3)),end:ro(t)}),last6months:()=>({start:Ys(Vr(t,6)),end:ro(t)}),lastYear:()=>({start:Ys(Vr(t,12)),end:ro(t)}),custom:()=>({start:t,end:t})}[e]||(()=>({start:t,end:t})))(),uk={class:"text-sm font-medium text-slate-800 dark:text-slate-50"},dk={class:"text-sm font-medium text-slate-600 dark:text-slate-200"},pk={__name:"DatePickerButton",props:{selectedStartDate:Date,selectedEndDate:Date,selectedRange:{type:String,default:""}},emits:["open"],setup(e,{emit:t}){const n=e,s=t,o=C(()=>{const r=n.selectedStartDate,l=n.selectedEndDate;if(!lo(r)||!lo(l))return"Select a date range";const c=wp(r,l)?"MMM d":"MMM d yyyy";return wp(r,new Date)&&wp(l,new Date)?`${ms(r,"MMM d")} - ${ms(l,"MMM d")}`:`${ms(r,c)} - ${ms(l,c)}`}),a=C(()=>UT.find(r=>r.value===n.selectedRange).label),i=()=>{s("open")};return(r,l)=>{const c=M("fluent-icon");return p(),v("button",{class:"inline-flex relative items-center rounded-lg gap-2 py-1.5 px-3 h-8 bg-n-alpha-2 hover:bg-n-alpha-1 active:bg-n-alpha-1",onClick:i},[y(c,{class:"text-slate-800 dark:text-slate-50",icon:"calendar",size:"16"}),h("span",uk,A(r.$t(a.value)),1),h("span",dk,A(o.value),1),y(c,{class:"text-slate-800 dark:text-slate-50",icon:"chevron-down",size:"14"})])}}},hk={class:"h-[82px] flex flex-col items-start px-5 gap-1.5 pt-4 w-full"},mk={class:"text-sm font-medium text-slate-800 dark:text-slate-50"},fk=["placeholder","disabled"],gk={__name:"CalendarDateInput",props:{calendarType:{type:String,default:""},dateValue:Date,compareDate:Date,isDisabled:Boolean},emits:["update","validate","error"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:o,END_CALENDAR:a}=xc,i=C(()=>{var c;return(c=wb())==null?void 0:c.toUpperCase()}),r=C({get:()=>{var c;return((c=n.dateValue)==null?void 0:c.toLocaleDateString(navigator.language))||""},set:c=>{const u=wb(),d=$l(c,u,new Date);lo(d)&&s("update",d)}}),l=()=>{if(!lo(n.dateValue)){s("error",`Please enter the date in valid format: ${i.value}`);return}const{calendarType:c,compareDate:u,dateValue:d}=n,m=c===o,f=c===a;u&&m&&xT(d,u)?s("error","Start date must be before the end date."):u&&f&&$T(d,u)?s("error","End date must be after the start date."):s("validate",d)};return(c,u)=>(p(),v("div",hk,[h("span",mk,A(e.calendarType===N(o)?c.$t("DATE_PICKER.DATE_RANGE_INPUT.START"):c.$t("DATE_PICKER.DATE_RANGE_INPUT.END")),1),re(h("input",{"onUpdate:modelValue":u[0]||(u[0]=d=>r.value=d),type:"text",class:"!text-sm !mb-0 disabled:!outline-n-strong",placeholder:i.value,disabled:e.isDisabled,onKeypress:kn(l,["enter"])},null,40,fk),[[mt,r.value]])]))}},_k={class:"w-[200px] flex flex-col items-start"},vk={class:"w-full px-5 py-4 text-sm font-medium capitalize text-start text-n-slate-12"},bk={class:"flex flex-col items-start w-full"},Ek=["onClick"],Tk={__name:"CalendarDateRange",props:{selectedRange:{type:String,default:""}},emits:["setRange"],setup(e,{emit:t}){const n=t,s=o=>{n("setRange",o)};return(o,a)=>(p(),v("div",_k,[h("h4",vk,A(o.$t("DATE_PICKER.DATE_RANGE_OPTIONS.TITLE")),1),h("div",bk,[(p(!0),v(pe,null,Ne(N(UT),i=>(p(),v("button",{key:i.label,class:se(["w-full px-5 py-3 text-sm font-medium truncate border-none rounded-none text-start hover:bg-n-alpha-2 dark:hover:bg-n-solid-3",i.value===e.selectedRange?"text-n-slate-12 bg-n-alpha-1 dark:bg-n-solid-active":"text-n-slate-12"]),onClick:r=>s(i)},A(o.$t(i.label)),11,Ek))),128))])]))}},yk={class:"flex items-start justify-between w-full h-9"},Sk={class:"flex items-center gap-1"},og={__name:"CalendarAction",props:{calendarType:{type:String,default:"start"},firstButtonLabel:{type:String,default:""},buttonLabel:{type:String,default:""},viewMode:{type:String,default:""}},emits:["prev","next","setView"],setup(e,{emit:t}){const n=t,{YEAR:s}=Gd,o=r=>{n("prev",r)},a=r=>{n("next",r)},i=(r,l)=>{n("setView",r,l)};return(r,l)=>(p(),v("div",yk,[y(oe,{slate:"",ghost:"",xs:"",icon:"i-lucide-chevron-left",class:"rtl:rotate-180",onClick:l[0]||(l[0]=c=>o(e.calendarType))}),h("div",Sk,[e.firstButtonLabel?(p(),v("button",{key:0,class:"p-0 text-sm font-medium text-center text-n-slate-12 hover:text-n-brand",onClick:l[1]||(l[1]=c=>i(e.calendarType,e.viewMode))},A(e.firstButtonLabel),1)):w("",!0),e.buttonLabel?(p(),v("button",{key:1,class:se(["p-0 text-sm font-medium text-center text-n-slate-12",{"hover:text-n-brand":e.viewMode}]),onClick:l[2]||(l[2]=c=>i(e.calendarType,N(s)))},A(e.buttonLabel),3)):w("",!0)]),y(oe,{slate:"",ghost:"",xs:"",icon:"i-lucide-chevron-right",class:"rtl:rotate-180",onClick:l[3]||(l[3]=c=>a(e.calendarType))})]))}},Ak={class:"flex flex-col w-full gap-2 max-h-[312px]"},Ik={class:"grid grid-cols-2 gap-x-3 gap-y-2 w-full auto-rows-[47px]"},Ck=["onClick"],Ok={__name:"CalendarYear",props:{calendarType:{type:String,default:"start"},startCurrentDate:Date,endCurrentDate:Date},emits:["selectYear"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:o}=xc,i=X((g=>{const T=Nb(g);return T-T%10})(n.calendarType===o?n.startCurrentDate:n.endCurrentDate)),r=C(()=>Array.from({length:10},(g,T)=>i.value+T)),l=C(()=>r.value[0]),c=C(()=>r.value[r.value.length-1]),u=C(()=>{const g=n.calendarType===o?n.startCurrentDate:n.endCurrentDate;return Nb(g)}),d=()=>{i.value=FT(new Date(i.value,0,1),10).getFullYear()},m=()=>{i.value=ag(new Date(i.value,0,1),10).getFullYear()},f=g=>{s("selectYear",g)};return(g,T)=>(p(),v("div",Ak,[y(og,{"calendar-type":e.calendarType,"button-label":`${l.value} - ${c.value}`,onPrev:d,onNext:m},null,8,["calendar-type","button-label"]),h("div",Ik,[(p(!0),v(pe,null,Ne(r.value,S=>(p(),v("button",{key:S,class:se(["p-2 text-sm font-medium text-center text-n-slate-12 w-[144px] h-10 rounded-lg py-2.5 px-2",{"bg-n-brand text-white hover:bg-n-blue-10":S===u.value,"hover:bg-n-alpha-2 dark:hover:bg-n-solid-3":S!==u.value}]),onClick:_=>f(S)},A(S),11,Ck))),128))])]))}},Nk={class:"flex flex-col w-full gap-2 max-h-[312px]"},wk={class:"grid w-full grid-cols-3 gap-x-3 gap-y-2 auto-rows-[61px]"},Rk=["onClick"],xk={__name:"CalendarMonth",props:{calendarType:{type:String,default:"start"},startCurrentDate:Date,endCurrentDate:Date},emits:["selectMonth","prev","next","setView"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:o}=xc,{MONTH:a,YEAR:i}=Gd,r=Array.from({length:12},(f,g)=>ms(BT(Yi(new Date),g),"MMM")),l=C(()=>{const f=n.calendarType===o?n.startCurrentDate:n.endCurrentDate;return RL(f)}),c=(f,g)=>{s("setView",f,g)},u=()=>{s("prev")},d=()=>{s("next")},m=f=>{s("selectMonth",f)};return(f,g)=>(p(),v("div",Nk,[y(og,{"view-mode":N(i),"calendar-type":e.calendarType,"button-label":N(GT)(e.calendarType===N(o)?e.startCurrentDate:e.endCurrentDate,N(a)),onSetView:c,onPrev:u,onNext:d},null,8,["view-mode","calendar-type","button-label"]),h("div",wk,[(p(!0),v(pe,null,Ne(N(r),(T,S)=>(p(),v("button",{key:S,class:se(["p-2 text-sm font-medium text-center text-n-slate-12 w-[92px] h-10 rounded-lg py-2.5 px-2",{"bg-n-brand text-white hover:bg-n-blue-10":S===l.value,"hover:bg-n-alpha-2 dark:hover:bg-n-solid-3":S!==l.value}]),onClick:_=>m(S)},A(T),11,Rk))),128))])]))}},$k={class:"max-w-md mx-auto grid grid-cols-7 gap-2"},Mk={__name:"CalendarWeekLabel",setup(e){return(t,n)=>(p(),v("div",$k,[(p(!0),v(pe,null,Ne(N(QL),s=>(p(),v("div",{key:s.id,class:"flex items-center justify-center font-medium text-sm w-9 h-7 py-1.5 px-2"},A(s.label),1))),128))]))}},Lk={class:"flex flex-col w-full gap-2 max-h-[312px]"},kk=["onMouseenter","onClick"],Dk={key:0,class:"absolute bottom-0 w-6 h-8 ltr:-right-4 rtl:-left-4 bg-n-blue-4 dark:bg-n-blue-5 -z-10"},Pk={__name:"CalendarWeek",props:{calendarType:{type:String,default:"start"},currentDate:Date,startCurrentDate:Date,endCurrentDate:Date,selectedStartDate:Date,selectingEndDate:Boolean,selectedEndDate:Date,hoveredEndDate:Date},emits:["updateHoveredEndDate","selectDate","prev","next","setView"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:o}=xc,{MONTH:a}=Gd,i=E=>{s("updateHoveredEndDate",E)},r=E=>{s("selectDate",E)},l=()=>{s("prev")},c=()=>{s("next")},u=(E,b)=>{s("setView",E,b)},d=E=>nk(E===o?n.startCurrentDate:n.endCurrentDate),m=E=>Ch(E,n.selectedStartDate,n.selectedStartDate)||Ch(E,n.selectedEndDate,n.selectedEndDate),f=E=>Ch(E,n.selectedStartDate,n.selectedEndDate),g=E=>ok(E,n.calendarType===o?n.startCurrentDate:n.endCurrentDate),T=E=>rk(E,n.selectedStartDate,n.selectingEndDate,n.hoveredEndDate),S=E=>lk(E,n.selectedStartDate,n.selectedEndDate,n.hoveredEndDate),_=E=>({"text-n-slate-10 pointer-events-none":!g(E),"text-n-slate-12 hover:text-n-slate-12 hover:bg-n-blue-6 dark:hover:bg-n-blue-7":g(E),"bg-n-brand text-white":m(E)&&g(E),"bg-n-blue-4 dark:bg-n-blue-5":(f(E)||T(E))&&!m(E)&&g(E),"outline outline-1 outline-n-blue-8 -outline-offset-1 !text-n-blue-text":ak(n.currentDate,E)&&!m(E)});return(E,b)=>(p(),v("div",Lk,[y(og,{"view-mode":N(a),"calendar-type":e.calendarType,"first-button-label":N(ek)(e.calendarType===N(o)?e.startCurrentDate:e.endCurrentDate),"button-label":N(GT)(e.calendarType===N(o)?e.startCurrentDate:e.endCurrentDate),onPrev:l,onNext:c,onSetView:u},null,8,["view-mode","calendar-type","first-button-label","button-label"]),y(Mk),(p(!0),v(pe,null,Ne(d(e.calendarType),I=>(p(),v("div",{key:I[0].getTime(),class:"grid max-w-md grid-cols-7 gap-2 mx-auto overflow-hidden rounded-lg"},[(p(!0),v(pe,null,Ne(I,R=>(p(),v("div",{key:R.getTime(),class:se(["flex relative items-center justify-center w-9 h-8 py-1.5 px-2 font-medium text-sm rounded-lg cursor-pointer",_(R)]),onMouseenter:O=>i(R),onMouseleave:b[0]||(b[0]=O=>i(null)),onClick:O=>r(R)},[Re(A(R.getDate())+" ",1),(f(R)||T(R))&&S(R)&&!N(ik)(R)&&g(R)?(p(),v("span",Dk)):w("",!0)],42,kk))),128))]))),128))]))}},Bk={class:"h-[56px] flex justify-between gap-2 px-2 py-3 items-center"},Fk={__name:"CalendarFooter",emits:["clear","change"],setup(e,{emit:t}){const n=t,s=()=>{n("clear")},o=()=>{n("change")};return(a,i)=>(p(),v("div",Bk,[y(oe,{slate:"",ghost:"",sm:"",label:a.$t("DATE_PICKER.CLEAR_BUTTON"),onClick:s},null,8,["label"]),y(oe,{sm:"",ghost:"",label:a.$t("DATE_PICKER.APPLY_BUTTON"),onClick:o},null,8,["label"])]))}},Uk={class:"relative font-inter"},Gk={key:0,class:"flex absolute top-9 ltr:left-0 rtl:right-0 z-30 shadow-md select-none w-[880px] h-[490px] rounded-2xl bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container"},Vk={class:"flex flex-col w-[680px] ltr:border-l rtl:border-r border-n-strong"},Hk={class:"flex justify-around h-fit"},Wk={class:"py-5 border-b border-n-strong"},zk={__name:"DatePicker",emits:["dateRangeChanged"],setup(e,{emit:t}){const n=t,{LAST_7_DAYS:s,LAST_30_DAYS:o,CUSTOM_RANGE:a}=JL,{START_CALENDAR:i,END_CALENDAR:r}=xc,{WEEK:l,MONTH:c,YEAR:u}=Gd,d=X(!1),m=X({start:l,end:l}),f=X(new Date),g=X(Ys(Fo(f.value,6))),T=X(ro(f.value)),S=X(Ys(g.value)),_=X(jm(g.value,T.value)?Yi(ui(T.value,1)):Yi(T.value)),E=X(!1),b=X(s),I=X(null),R=X(g.value),O=X(T.value);ct(b,j=>{if(j!==a){const z=j===s||j===o;S.value=g.value,_.value=z&&jm(g.value,T.value)?Yi(ui(g.value,1)):T.value,E.value=!1}else E.value||(S.value=Ys(f.value))}),ct([g,T],([j,z])=>{lo(j)?R.value=j:R.value=g.value,lo(z)?O.value=z:O.value=T.value},{immediate:!0}),ct([S,_],([j,z],[Y,te])=>{const Z=yC(z,j);j!==Y&&(xT(j,z)||Z===0)&&(_.value=ui(j,1)),z!==te&&($T(z,j)||Z===0)&&(S.value=Vr(z,1))},{immediate:!0,deep:!0});const x=j=>{b.value=j.value;const{start:z,end:Y}=ck(j.value,f.value);g.value=z,T.value=Y},L=(j,z,Y=c)=>{const{start:te,end:Z}=sk(j,S.value,_.value,z,Y);S.value=te,_.value=Z},F=j=>{b.value=a,!E.value||j<g.value?(g.value=j,T.value=null,E.value=!0):(T.value=j,E.value=!1)},D=(j,z)=>{b.value=a,m.value[j]=z},V=(j,z,Y=c)=>{const te=z===i?S.value:_.value,Z=Y===c?BT(Yi(te),j):ZL(te,j);z===i?S.value=Z:_.value=Z,D(z,Y===c?l:c)},B=(j,z)=>{z===i?(g.value=j,S.value=j):(T.value=j,_.value=j),E.value=!1},P=j=>{ce(j)},k=()=>{S.value=Ys(f.value),_.value=ui(Ys(f.value),1),g.value=Ys(Fo(f.value,6)),T.value=ro(f.value),E.value=!1,b.value=s,m.value={start:l,end:l}},U=()=>{!lo(g.value)||!lo(T.value)?ce("Please select a valid time range"):(d.value=!1,n("dateRangeChanged",[g.value,T.value]))};return(j,z)=>(p(),v("div",Uk,[y(pk,{"selected-start-date":g.value,"selected-end-date":T.value,"selected-range":b.value,onOpen:z[0]||(z[0]=Y=>d.value=!d.value)},null,8,["selected-start-date","selected-end-date","selected-range"]),d.value?(p(),v("div",Gk,[y(Tk,{"selected-range":b.value,onSetRange:x},null,8,["selected-range"]),h("div",Vk,[h("div",Hk,[(p(!0),v(pe,null,Ne([N(i),N(r)],Y=>(p(),v("div",{key:`${Y}-calendar`,class:"flex flex-col items-center"},[y(gk,{"calendar-type":Y,"date-value":Y===N(i)?R.value:O.value,"compare-date":Y===N(i)?O.value:R.value,"is-disabled":b.value!==N(a),onUpdate:te=>Y===N(i)?R.value=te:O.value=te,onValidate:te=>B(te,Y),onError:z[1]||(z[1]=te=>P(te))},null,8,["calendar-type","date-value","compare-date","is-disabled","onUpdate","onValidate"]),h("div",Wk,[h("div",{class:se(["flex flex-col items-center gap-2 px-5 min-w-[340px] max-h-[352px]",Y===N(i)&&"ltr:border-r rtl:border-l border-n-strong"])},[m.value[Y]===N(u)?(p(),$(Ok,{key:0,"calendar-type":Y,"start-current-date":S.value,"end-current-date":_.value,onSelectYear:te=>V(te,Y,N(u))},null,8,["calendar-type","start-current-date","end-current-date","onSelectYear"])):m.value[Y]===N(c)?(p(),$(xk,{key:1,"calendar-type":Y,"start-current-date":S.value,"end-current-date":_.value,onSelectMonth:te=>V(te,Y),onSetView:D,onPrev:te=>L(Y,"prev",N(u)),onNext:te=>L(Y,"next",N(u))},null,8,["calendar-type","start-current-date","end-current-date","onSelectMonth","onPrev","onNext"])):m.value[Y]===N(l)?(p(),$(Pk,{key:2,"calendar-type":Y,"current-date":f.value,"start-current-date":S.value,"end-current-date":_.value,"selected-start-date":g.value,"selected-end-date":T.value,"selecting-end-date":E.value,"hovered-end-date":I.value,onUpdateHoveredEndDate:z[2]||(z[2]=te=>I.value=te),onSelectDate:F,onSetView:D,onPrev:te=>L(Y,"prev"),onNext:te=>L(Y,"next")},null,8,["calendar-type","current-date","start-current-date","end-current-date","selected-start-date","selected-end-date","selecting-end-date","hovered-end-date","onPrev","onNext"])):w("",!0)],2)])]))),128))]),y(Fk,{onChange:U,onClear:k})])])):w("",!0)]))}},VT={AvatarUploader:VR,Code:wx,ColorPicker:Lx,ConfirmDeleteModal:TT,ConfirmModal:u$,DeleteModal:p$,DropdownItem:dc,DropdownMenu:Bd,FeatureToggle:b$,Input:O$,PhoneInput:K3,Label:eL,LoadingState:Rc,Modal:sl,ModalHeader:hL,SidemenuIcon:_L,Spinner:bs,Tabs:vL,TabsItem:EL,Thumbnail:Hn,DatePicker:zk,install(e){const t=Object.keys(this);t.pop();let n=t.length;for(;n--;)e.component(`woot${t[n]}`,this[t[n]])}};typeof window<"u"&&window.Vue&&window.Vue.use(VT);const jk={components:{NextButton:oe},props:{show:{type:Boolean,default:!1},hasAccounts:{type:Boolean,default:!0}},emits:["closeAccountCreateModal"],setup(){return{v$:bt()}},data(){return{accountName:""}},validations(){return{accountName:{required:Ye,minLength:Qt(1)}}},computed:{...lt({uiFlags:"agents/getUIFlags"})},methods:{async addAccount(){try{const e=await this.$store.dispatch("accounts/create",{account_name:this.accountName});this.$emit("closeAccountCreateModal"),ce(this.$t("CREATE_ACCOUNT.API.SUCCESS_MESSAGE")),window.location=`/app/accounts/${e}/dashboard`}catch(e){e.response.status===422?ce(this.$t("CREATE_ACCOUNT.API.EXIST_MESSAGE")):ce(this.$t("CREATE_ACCOUNT.API.ERROR_MESSAGE"))}}}},Kk={class:"flex flex-col h-auto overflow-auto"},Yk={key:0,class:"mx-8 mt-6 mb-0 text-sm"},Xk={class:"flex items-center rounded-md alert"},qk={class:"ml-1 mr-3"},Zk={class:"w-full"},Qk=["placeholder"],Jk={class:"w-full flex justify-end gap-2 items-center"};function eD(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("fluent-icon"),l=M("NextButton"),c=M("woot-modal");return p(),$(c,{show:n.show,"on-close":()=>e.$emit("closeAccountCreateModal")},{default:K(()=>[h("div",Kk,[y(i,{"header-title":e.$t("CREATE_ACCOUNT.NEW_ACCOUNT"),"header-content":e.$t("CREATE_ACCOUNT.SELECTOR_SUBTITLE")},null,8,["header-title","header-content"]),n.hasAccounts?w("",!0):(p(),v("div",Yk,[h("div",Xk,[h("div",qk,[y(r,{icon:"warning"})]),Re(" "+A(e.$t("CREATE_ACCOUNT.NO_ACCOUNT_WARNING")),1)])])),h("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=Fe((...u)=>a.addAccount&&a.addAccount(...u),["prevent"]))},[h("div",Zk,[h("label",{class:se({error:s.v$.accountName.$error})},[Re(A(e.$t("CREATE_ACCOUNT.FORM.NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.accountName=u),type:"text",placeholder:e.$t("CREATE_ACCOUNT.FORM.NAME.PLACEHOLDER"),onInput:t[1]||(t[1]=(...u)=>s.v$.accountName.$touch&&s.v$.accountName.$touch(...u))},null,40,Qk),[[mt,o.accountName]])],2)]),h("div",Jk,[y(l,{faded:"",slate:"",type:"reset",label:e.$t("CREATE_ACCOUNT.FORM.CANCEL"),onClick:t[2]||(t[2]=Fe(()=>e.$emit("closeAccountCreateModal"),["prevent"]))},null,8,["label"]),y(l,{type:"submit",label:e.$t("CREATE_ACCOUNT.FORM.SUBMIT"),"is-loading":e.uiFlags.isCreating,disabled:s.v$.accountName.$invalid||s.v$.accountName.$invalid||e.uiFlags.isCreating},null,8,["label","is-loading","disabled"])])],32)])]),_:1},8,["show","on-close"])}const HT=Ae(jk,[["render",eD]]),Ei=(e,t)=>{const n=()=>{wt.off(e,t)};return dt(()=>{wt.on(e,t)}),Sc(n),n},tD=(e,t=[])=>{const{meta:{permissions:n=[]}={}}=e;return Pf(n,t)},nD=(e,t)=>{const{accountId:n}=e.params,o=[{permissions:[...Gn,...Rs],path:"dashboard"},{permissions:[Lr],path:"contacts"},{permissions:[SO],path:"reports/overview"},{permissions:[kr],path:"portals"}].find(({permissions:a})=>Pf(a,t));return`accounts/${n}/${o?o.path:"dashboard"}`},sD=(e,t)=>{const n=`accounts/${e.params.accountId}/dashboard`;if(e.name==="account_suspended")return n;const s=Df(t,e.params.accountId);return tD(e,s)?null:nD(e,s)},aD=(e,t)=>{const n=yO(t,Number(e.params.accountId));return n?n.status==="active"?sD(e,t):e.name!=="account_suspended"?`accounts/${e.params.accountId}/suspended`:null:"app/login"},ig=(e,t=!1,n=!0)=>{const s=["home","conversation_mentions","conversation_unattended","inbox_dashboard","label_conversations","team_conversations","folder_conversations","conversation_participating"],o=["inbox_conversation","conversation_through_mentions","conversation_through_unattended","conversation_through_inbox","conversations_through_label","conversations_through_team","conversations_through_folders","conversation_through_participating"];return[...t?s:[],...n?o:[]].includes(e)},oD=e=>{switch(e){case"inbox_conversation":return"home";case"conversation_through_mentions":return"conversation_mentions";case"conversation_through_unattended":return"conversation_unattended";case"conversations_through_label":return"label_conversations";case"conversations_through_team":return"team_conversations";case"conversations_through_folders":return"folder_conversations";case"conversation_through_participating":return"conversation_participating";case"conversation_through_inbox":return"inbox_dashboard";default:return null}},rg=(e,t=!1)=>{const n=["inbox_view"],s=["inbox_view_conversation"];return(t?[...n,...s]:s).includes(e)},WT=e=>e==="notifications_index",iD={class:"fixed z-50 top-2 left-2 group"},rD={class:"relative flex items-center justify-between w-full px-2 py-1 bg-n-amber-4 dark:bg-n-amber-8 rounded-lg shadow-lg"},lD={class:"px-2 text-xs font-medium tracking-wide text-n-amber-12"},cD=2e3,uD={__name:"NetworkNotification",setup(e){const{t}=Me(),n=sn(),s=X(!navigator.onLine),o=X(!1),a=X(!1),i=X(!1);let r=null;const l=C(()=>a.value?t("NETWORK.NOTIFICATION.RECONNECTING"):i.value?t("NETWORK.NOTIFICATION.RECONNECT_SUCCESS"):t("NETWORK.NOTIFICATION.OFFLINE")),c=C(()=>i.value?"wifi":"wifi-off"),u=C(()=>!a.value&&!i.value),d=()=>{window.location.reload()},m=()=>{s.value=!1,i.value=!1,clearTimeout(r)},f=E=>ig(E,!0)||rg(E,!0)||WT(E),g=()=>{o.value=!0,s.value=!0},T=()=>{o.value=!1,a.value=!1,i.value=!0,s.value=!0,r=setTimeout(m,cD)},S=()=>{f(n.name)?(a.value=!0,i.value=!1,s.value=!0):T()},_=E=>{E.type==="offline"?s.value=!0:E.type==="online"&&!o.value&&T()};return Zs("online",_),Zs("offline",_),Ei(jt.WEBSOCKET_DISCONNECT,g),Ei(jt.WEBSOCKET_RECONNECT_COMPLETED,T),Ei(jt.WEBSOCKET_RECONNECT,S),Sc(()=>{clearTimeout(r)}),(E,b)=>{const I=M("fluent-icon");return p(),$(qs,{name:"network-notification-fade",tag:"div"},{default:K(()=>[re(h("div",iD,[h("div",rD,[y(I,{icon:c.value,class:"text-n-amber-12",size:"18"},null,8,["icon"]),h("span",lD,A(l.value),1),u.value?(p(),$(oe,{key:0,ghost:"",sm:"",amber:"",icon:"i-lucide-refresh-ccw",title:E.$t("NETWORK.BUTTON.REFRESH"),class:"!text-n-amber-12 dark:!text-n-amber-9",onClick:d},null,8,["title"])):w("",!0),y(oe,{ghost:"",sm:"",amber:"",icon:"i-lucide-x",class:"!text-n-amber-12 dark:!text-n-amber-9",onClick:m})])],512),[[Jt,s.value]])]),_:1})}}},dD={components:{NextButton:oe},props:{bannerMessage:{type:String,default:""},hrefLink:{type:String,default:""},hrefLinkText:{type:String,default:""},hasActionButton:{type:Boolean,default:!1},actionButtonVariant:{type:String,default:"faded"},actionButtonLabel:{type:String,default:""},actionButtonIcon:{type:String,default:"i-lucide-arrow-right"},colorScheme:{type:String,default:""},hasCloseButton:{type:Boolean,default:!1}},emits:["primaryAction","close"],computed:{bannerClasses(){const e=[this.colorScheme];return(this.hasActionButton||this.hasCloseButton)&&e.push("has-button"),e},getButtonColor(){return{primary:"blue",secondary:"blue",alert:"ruby",warning:"amber"}[this.colorScheme]||"blue"}},methods:{onClick(e){this.$emit("primaryAction",e)},onClickClose(e){this.$emit("close",e)}}},pD={class:"banner-message"},hD=["href"],mD={class:"actions"};function fD(e,t,n,s,o,a){const i=M("NextButton");return p(),v("div",{class:se(["flex items-center justify-center h-12 gap-4 px-4 py-3 text-xs text-white banner dark:text-white woot-banner",a.bannerClasses])},[h("span",pD,[Re(A(n.bannerMessage)+" ",1),n.hrefLink?(p(),v("a",{key:0,href:n.hrefLink,rel:"noopener noreferrer nofollow",target:"_blank"},A(n.hrefLinkText),9,hD)):w("",!0)]),h("div",mD,[n.hasActionButton?(p(),$(i,{key:0,xs:"",icon:n.actionButtonIcon,variant:n.actionButtonVariant,color:a.getButtonColor,label:n.actionButtonLabel,onClick:a.onClick},null,8,["icon","variant","color","label","onClick"])):w("",!0),n.hasCloseButton?(p(),$(i,{key:1,xs:"",icon:"i-lucide-circle-x",color:a.getButtonColor,label:e.$t("GENERAL_SETTINGS.DISMISS"),onClick:a.onClickClose},null,8,["color","label","onClick"])):w("",!0)])],2)}const $c=Ae(dD,[["render",fD],["__scopeId","data-v-32e5d3c9"]]);function ka(){const e=nn(),t=C(()=>e.getCurrentRole.value);return{isAdmin:C(()=>t.value==="administrator")}}var Km={exports:{}};const gD="2.0.0",zT=256,_D=Number.MAX_SAFE_INTEGER||9007199254740991,vD=16,bD=zT-6,ED=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Vd={MAX_LENGTH:zT,MAX_SAFE_COMPONENT_LENGTH:vD,MAX_SAFE_BUILD_LENGTH:bD,MAX_SAFE_INTEGER:_D,RELEASE_TYPES:ED,SEMVER_SPEC_VERSION:gD,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Oh={};const TD=typeof process=="object"&&Oh&&Oh.NODE_DEBUG&&/\bsemver\b/i.test(Oh.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Hd=TD;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:o}=Vd,a=Hd;t=e.exports={};const i=t.re=[],r=t.safeRe=[],l=t.src=[],c=t.t={};let u=0;const d="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",o],[d,s]],f=T=>{for(const[S,_]of m)T=T.split(`${S}*`).join(`${S}{0,${_}}`).split(`${S}+`).join(`${S}{1,${_}}`);return T},g=(T,S,_)=>{const E=f(S),b=u++;a(T,b,S),c[T]=b,l[b]=S,i[b]=new RegExp(S,_?"g":void 0),r[b]=new RegExp(E,_?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),g("FULL",`^${l[c.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),g("LOOSE",`^${l[c.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),g("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",l[c.COERCE],!0),g("COERCERTLFULL",l[c.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Km,Km.exports);var Mc=Km.exports;const yD=Object.freeze({loose:!0}),SD=Object.freeze({}),AD=e=>e?typeof e!="object"?yD:e:SD;var lg=AD;const Rb=/^[0-9]+$/,jT=(e,t)=>{const n=Rb.test(e),s=Rb.test(t);return n&&s&&(e=+e,t=+t),e===t?0:n&&!s?-1:s&&!n?1:e<t?-1:1},ID=(e,t)=>jT(t,e);var KT={compareIdentifiers:jT,rcompareIdentifiers:ID};const eu=Hd,{MAX_LENGTH:xb,MAX_SAFE_INTEGER:tu}=Vd,{safeRe:$b,t:Mb}=Mc,CD=lg,{compareIdentifiers:Tr}=KT;let OD=class oo{constructor(t,n){if(n=CD(n),t instanceof oo){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>xb)throw new TypeError(`version is longer than ${xb} characters`);eu("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const s=t.trim().match(n.loose?$b[Mb.LOOSE]:$b[Mb.FULL]);if(!s)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>tu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>tu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>tu||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const a=+o;if(a>=0&&a<tu)return a}return o}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(eu("SemVer.compare",this.version,this.options,t),!(t instanceof oo)){if(typeof t=="string"&&t===this.version)return 0;t=new oo(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof oo||(t=new oo(t,this.options)),Tr(this.major,t.major)||Tr(this.minor,t.minor)||Tr(this.patch,t.patch)}comparePre(t){if(t instanceof oo||(t=new oo(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const s=this.prerelease[n],o=t.prerelease[n];if(eu("prerelease compare",n,s,o),s===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(s===void 0)return-1;if(s===o)continue;return Tr(s,o)}while(++n)}compareBuild(t){t instanceof oo||(t=new oo(t,this.options));let n=0;do{const s=this.build[n],o=t.build[n];if(eu("build compare",n,s,o),s===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(s===void 0)return-1;if(s===o)continue;return Tr(s,o)}while(++n)}inc(t,n,s){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,s),this.inc("pre",n,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,s),this.inc("pre",n,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const o=Number(s)?1:0;if(!n&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(n===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(n){let a=[n,o];s===!1&&(a=[n]),Tr(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Js=OD;const Lb=Js,ND=(e,t,n=!1)=>{if(e instanceof Lb)return e;try{return new Lb(e,t)}catch(s){if(!n)return null;throw s}};var al=ND;const wD=al,RD=(e,t)=>{const n=wD(e,t);return n?n.version:null};var xD=RD;const $D=al,MD=(e,t)=>{const n=$D(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var LD=MD;const kb=Js,kD=(e,t,n,s,o)=>{typeof n=="string"&&(o=s,s=n,n=void 0);try{return new kb(e instanceof kb?e.version:e,n).inc(t,s,o).version}catch{return null}};var DD=kD;const Db=al,PD=(e,t)=>{const n=Db(e,null,!0),s=Db(t,null,!0),o=n.compare(s);if(o===0)return null;const a=o>0,i=a?n:s,r=a?s:n,l=!!i.prerelease.length;if(!!r.prerelease.length&&!l)return!r.patch&&!r.minor?"major":i.patch?"patch":i.minor?"minor":"major";const u=l?"pre":"";return n.major!==s.major?u+"major":n.minor!==s.minor?u+"minor":n.patch!==s.patch?u+"patch":"prerelease"};var BD=PD;const FD=Js,UD=(e,t)=>new FD(e,t).major;var GD=UD;const VD=Js,HD=(e,t)=>new VD(e,t).minor;var WD=HD;const zD=Js,jD=(e,t)=>new zD(e,t).patch;var KD=jD;const YD=al,XD=(e,t)=>{const n=YD(e,t);return n&&n.prerelease.length?n.prerelease:null};var qD=XD;const Pb=Js,ZD=(e,t,n)=>new Pb(e,n).compare(new Pb(t,n));var Qa=ZD;const QD=Qa,JD=(e,t,n)=>QD(t,e,n);var e8=JD;const t8=Qa,n8=(e,t)=>t8(e,t,!0);var s8=n8;const Bb=Js,a8=(e,t,n)=>{const s=new Bb(e,n),o=new Bb(t,n);return s.compare(o)||s.compareBuild(o)};var cg=a8;const o8=cg,i8=(e,t)=>e.sort((n,s)=>o8(n,s,t));var r8=i8;const l8=cg,c8=(e,t)=>e.sort((n,s)=>l8(s,n,t));var u8=c8;const d8=Qa,p8=(e,t,n)=>d8(e,t,n)>0;var Wd=p8;const h8=Qa,m8=(e,t,n)=>h8(e,t,n)<0;var ug=m8;const f8=Qa,g8=(e,t,n)=>f8(e,t,n)===0;var YT=g8;const _8=Qa,v8=(e,t,n)=>_8(e,t,n)!==0;var XT=v8;const b8=Qa,E8=(e,t,n)=>b8(e,t,n)>=0;var dg=E8;const T8=Qa,y8=(e,t,n)=>T8(e,t,n)<=0;var pg=y8;const S8=YT,A8=XT,I8=Wd,C8=dg,O8=ug,N8=pg,w8=(e,t,n,s)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return S8(e,n,s);case"!=":return A8(e,n,s);case">":return I8(e,n,s);case">=":return C8(e,n,s);case"<":return O8(e,n,s);case"<=":return N8(e,n,s);default:throw new TypeError(`Invalid operator: ${t}`)}};var qT=w8;const R8=Js,x8=al,{safeRe:nu,t:su}=Mc,$8=(e,t)=>{if(e instanceof R8)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?nu[su.COERCEFULL]:nu[su.COERCE]);else{const l=t.includePrerelease?nu[su.COERCERTLFULL]:nu[su.COERCERTL];let c;for(;(c=l.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(n===null)return null;const s=n[2],o=n[3]||"0",a=n[4]||"0",i=t.includePrerelease&&n[5]?`-${n[5]}`:"",r=t.includePrerelease&&n[6]?`+${n[6]}`:"";return x8(`${s}.${o}.${a}${i}${r}`,t)};var M8=$8;class L8{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(t,n)}return this}}var k8=L8,Nh,Fb;function Ja(){if(Fb)return Nh;Fb=1;const e=/\s+/g;class t{constructor(U,j){if(j=o(j),U instanceof t)return U.loose===!!j.loose&&U.includePrerelease===!!j.includePrerelease?U:new t(U.raw,j);if(U instanceof a)return this.raw=U.value,this.set=[[U]],this.formatted=void 0,this;if(this.options=j,this.loose=!!j.loose,this.includePrerelease=!!j.includePrerelease,this.raw=U.trim().replace(e," "),this.set=this.raw.split("||").map(z=>this.parseRange(z.trim())).filter(z=>z.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const z=this.set[0];if(this.set=this.set.filter(Y=>!T(Y[0])),this.set.length===0)this.set=[z];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&S(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let U=0;U<this.set.length;U++){U>0&&(this.formatted+="||");const j=this.set[U];for(let z=0;z<j.length;z++)z>0&&(this.formatted+=" "),this.formatted+=j[z].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(U){const z=((this.options.includePrerelease&&f)|(this.options.loose&&g))+":"+U,Y=s.get(z);if(Y)return Y;const te=this.options.loose,Z=te?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];U=U.replace(Z,B(this.options.includePrerelease)),i("hyphen replace",U),U=U.replace(l[c.COMPARATORTRIM],u),i("comparator trim",U),U=U.replace(l[c.TILDETRIM],d),i("tilde trim",U),U=U.replace(l[c.CARETTRIM],m),i("caret trim",U);let G=U.split(" ").map(ee=>E(ee,this.options)).join(" ").split(/\s+/).map(ee=>V(ee,this.options));te&&(G=G.filter(ee=>(i("loose invalid filter",ee,this.options),!!ee.match(l[c.COMPARATORLOOSE])))),i("range list",G);const H=new Map,W=G.map(ee=>new a(ee,this.options));for(const ee of W){if(T(ee))return[ee];H.set(ee.value,ee)}H.size>1&&H.has("")&&H.delete("");const J=[...H.values()];return s.set(z,J),J}intersects(U,j){if(!(U instanceof t))throw new TypeError("a Range is required");return this.set.some(z=>_(z,j)&&U.set.some(Y=>_(Y,j)&&z.every(te=>Y.every(Z=>te.intersects(Z,j)))))}test(U){if(!U)return!1;if(typeof U=="string")try{U=new r(U,this.options)}catch{return!1}for(let j=0;j<this.set.length;j++)if(P(this.set[j],U,this.options))return!0;return!1}}Nh=t;const n=k8,s=new n,o=lg,a=zd(),i=Hd,r=Js,{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:m}=Mc,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:g}=Vd,T=k=>k.value==="<0.0.0-0",S=k=>k.value==="",_=(k,U)=>{let j=!0;const z=k.slice();let Y=z.pop();for(;j&&z.length;)j=z.every(te=>Y.intersects(te,U)),Y=z.pop();return j},E=(k,U)=>(i("comp",k,U),k=O(k,U),i("caret",k),k=I(k,U),i("tildes",k),k=L(k,U),i("xrange",k),k=D(k,U),i("stars",k),k),b=k=>!k||k.toLowerCase()==="x"||k==="*",I=(k,U)=>k.trim().split(/\s+/).map(j=>R(j,U)).join(" "),R=(k,U)=>{const j=U.loose?l[c.TILDELOOSE]:l[c.TILDE];return k.replace(j,(z,Y,te,Z,G)=>{i("tilde",k,z,Y,te,Z,G);let H;return b(Y)?H="":b(te)?H=`>=${Y}.0.0 <${+Y+1}.0.0-0`:b(Z)?H=`>=${Y}.${te}.0 <${Y}.${+te+1}.0-0`:G?(i("replaceTilde pr",G),H=`>=${Y}.${te}.${Z}-${G} <${Y}.${+te+1}.0-0`):H=`>=${Y}.${te}.${Z} <${Y}.${+te+1}.0-0`,i("tilde return",H),H})},O=(k,U)=>k.trim().split(/\s+/).map(j=>x(j,U)).join(" "),x=(k,U)=>{i("caret",k,U);const j=U.loose?l[c.CARETLOOSE]:l[c.CARET],z=U.includePrerelease?"-0":"";return k.replace(j,(Y,te,Z,G,H)=>{i("caret",k,Y,te,Z,G,H);let W;return b(te)?W="":b(Z)?W=`>=${te}.0.0${z} <${+te+1}.0.0-0`:b(G)?te==="0"?W=`>=${te}.${Z}.0${z} <${te}.${+Z+1}.0-0`:W=`>=${te}.${Z}.0${z} <${+te+1}.0.0-0`:H?(i("replaceCaret pr",H),te==="0"?Z==="0"?W=`>=${te}.${Z}.${G}-${H} <${te}.${Z}.${+G+1}-0`:W=`>=${te}.${Z}.${G}-${H} <${te}.${+Z+1}.0-0`:W=`>=${te}.${Z}.${G}-${H} <${+te+1}.0.0-0`):(i("no pr"),te==="0"?Z==="0"?W=`>=${te}.${Z}.${G}${z} <${te}.${Z}.${+G+1}-0`:W=`>=${te}.${Z}.${G}${z} <${te}.${+Z+1}.0-0`:W=`>=${te}.${Z}.${G} <${+te+1}.0.0-0`),i("caret return",W),W})},L=(k,U)=>(i("replaceXRanges",k,U),k.split(/\s+/).map(j=>F(j,U)).join(" ")),F=(k,U)=>{k=k.trim();const j=U.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return k.replace(j,(z,Y,te,Z,G,H)=>{i("xRange",k,z,Y,te,Z,G,H);const W=b(te),J=W||b(Z),ee=J||b(G),ge=ee;return Y==="="&&ge&&(Y=""),H=U.includePrerelease?"-0":"",W?Y===">"||Y==="<"?z="<0.0.0-0":z="*":Y&&ge?(J&&(Z=0),G=0,Y===">"?(Y=">=",J?(te=+te+1,Z=0,G=0):(Z=+Z+1,G=0)):Y==="<="&&(Y="<",J?te=+te+1:Z=+Z+1),Y==="<"&&(H="-0"),z=`${Y+te}.${Z}.${G}${H}`):J?z=`>=${te}.0.0${H} <${+te+1}.0.0-0`:ee&&(z=`>=${te}.${Z}.0${H} <${te}.${+Z+1}.0-0`),i("xRange return",z),z})},D=(k,U)=>(i("replaceStars",k,U),k.trim().replace(l[c.STAR],"")),V=(k,U)=>(i("replaceGTE0",k,U),k.trim().replace(l[U.includePrerelease?c.GTE0PRE:c.GTE0],"")),B=k=>(U,j,z,Y,te,Z,G,H,W,J,ee,ge)=>(b(z)?j="":b(Y)?j=`>=${z}.0.0${k?"-0":""}`:b(te)?j=`>=${z}.${Y}.0${k?"-0":""}`:Z?j=`>=${j}`:j=`>=${j}${k?"-0":""}`,b(W)?H="":b(J)?H=`<${+W+1}.0.0-0`:b(ee)?H=`<${W}.${+J+1}.0-0`:ge?H=`<=${W}.${J}.${ee}-${ge}`:k?H=`<${W}.${J}.${+ee+1}-0`:H=`<=${H}`,`${j} ${H}`.trim()),P=(k,U,j)=>{for(let z=0;z<k.length;z++)if(!k[z].test(U))return!1;if(U.prerelease.length&&!j.includePrerelease){for(let z=0;z<k.length;z++)if(i(k[z].semver),k[z].semver!==a.ANY&&k[z].semver.prerelease.length>0){const Y=k[z].semver;if(Y.major===U.major&&Y.minor===U.minor&&Y.patch===U.patch)return!0}return!1}return!0};return Nh}var wh,Ub;function zd(){if(Ub)return wh;Ub=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,d){if(d=n(d),u instanceof t){if(u.loose===!!d.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),i("comparator",u,d),this.options=d,this.loose=!!d.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(u){const d=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],m=u.match(d);if(!m)throw new TypeError(`Invalid comparator: ${u}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new r(m[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(i("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new r(u,this.options)}catch{return!1}return a(u,this.operator,this.semver,this.options)}intersects(u,d){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(u.value,d).test(this.value):u.operator===""?u.value===""?!0:new l(this.value,d).test(u.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||a(this.semver,"<",u.semver,d)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||a(this.semver,">",u.semver,d)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}wh=t;const n=lg,{safeRe:s,t:o}=Mc,a=qT,i=Hd,r=Js,l=Ja();return wh}const D8=Ja(),P8=(e,t,n)=>{try{t=new D8(t,n)}catch{return!1}return t.test(e)};var jd=P8;const B8=Ja(),F8=(e,t)=>new B8(e,t).set.map(n=>n.map(s=>s.value).join(" ").trim().split(" "));var U8=F8;const G8=Js,V8=Ja(),H8=(e,t,n)=>{let s=null,o=null,a=null;try{a=new V8(t,n)}catch{return null}return e.forEach(i=>{a.test(i)&&(!s||o.compare(i)===-1)&&(s=i,o=new G8(s,n))}),s};var W8=H8;const z8=Js,j8=Ja(),K8=(e,t,n)=>{let s=null,o=null,a=null;try{a=new j8(t,n)}catch{return null}return e.forEach(i=>{a.test(i)&&(!s||o.compare(i)===1)&&(s=i,o=new z8(s,n))}),s};var Y8=K8;const Rh=Js,X8=Ja(),Gb=Wd,q8=(e,t)=>{e=new X8(e,t);let n=new Rh("0.0.0");if(e.test(n)||(n=new Rh("0.0.0-0"),e.test(n)))return n;n=null;for(let s=0;s<e.set.length;++s){const o=e.set[s];let a=null;o.forEach(i=>{const r=new Rh(i.semver.version);switch(i.operator){case">":r.prerelease.length===0?r.patch++:r.prerelease.push(0),r.raw=r.format();case"":case">=":(!a||Gb(r,a))&&(a=r);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),a&&(!n||Gb(n,a))&&(n=a)}return n&&e.test(n)?n:null};var Z8=q8;const Q8=Ja(),J8=(e,t)=>{try{return new Q8(e,t).range||"*"}catch{return null}};var e4=J8;const t4=Js,ZT=zd(),{ANY:n4}=ZT,s4=Ja(),a4=jd,Vb=Wd,Hb=ug,o4=pg,i4=dg,r4=(e,t,n,s)=>{e=new t4(e,s),t=new s4(t,s);let o,a,i,r,l;switch(n){case">":o=Vb,a=o4,i=Hb,r=">",l=">=";break;case"<":o=Hb,a=i4,i=Vb,r="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a4(e,t,s))return!1;for(let c=0;c<t.set.length;++c){const u=t.set[c];let d=null,m=null;if(u.forEach(f=>{f.semver===n4&&(f=new ZT(">=0.0.0")),d=d||f,m=m||f,o(f.semver,d.semver,s)?d=f:i(f.semver,m.semver,s)&&(m=f)}),d.operator===r||d.operator===l||(!m.operator||m.operator===r)&&a(e,m.semver))return!1;if(m.operator===l&&i(e,m.semver))return!1}return!0};var hg=r4;const l4=hg,c4=(e,t,n)=>l4(e,t,">",n);var u4=c4;const d4=hg,p4=(e,t,n)=>d4(e,t,"<",n);var h4=p4;const Wb=Ja(),m4=(e,t,n)=>(e=new Wb(e,n),t=new Wb(t,n),e.intersects(t,n));var f4=m4;const g4=jd,_4=Qa;var v4=(e,t,n)=>{const s=[];let o=null,a=null;const i=e.sort((u,d)=>_4(u,d,n));for(const u of i)g4(u,t,n)?(a=u,o||(o=u)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const r=[];for(const[u,d]of s)u===d?r.push(u):!d&&u===i[0]?r.push("*"):d?u===i[0]?r.push(`<=${d}`):r.push(`${u} - ${d}`):r.push(`>=${u}`);const l=r.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return l.length<c.length?l:t};const zb=Ja(),mg=zd(),{ANY:xh}=mg,Tl=jd,fg=Qa,b4=(e,t,n={})=>{if(e===t)return!0;e=new zb(e,n),t=new zb(t,n);let s=!1;e:for(const o of e.set){for(const a of t.set){const i=T4(o,a,n);if(s=s||i!==null,i)continue e}if(s)return!1}return!0},E4=[new mg(">=0.0.0-0")],jb=[new mg(">=0.0.0")],T4=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===xh){if(t.length===1&&t[0].semver===xh)return!0;n.includePrerelease?e=E4:e=jb}if(t.length===1&&t[0].semver===xh){if(n.includePrerelease)return!0;t=jb}const s=new Set;let o,a;for(const f of e)f.operator===">"||f.operator===">="?o=Kb(o,f,n):f.operator==="<"||f.operator==="<="?a=Yb(a,f,n):s.add(f.semver);if(s.size>1)return null;let i;if(o&&a){if(i=fg(o.semver,a.semver,n),i>0)return null;if(i===0&&(o.operator!==">="||a.operator!=="<="))return null}for(const f of s){if(o&&!Tl(f,String(o),n)||a&&!Tl(f,String(a),n))return null;for(const g of t)if(!Tl(f,String(g),n))return!1;return!0}let r,l,c,u,d=a&&!n.includePrerelease&&a.semver.prerelease.length?a.semver:!1,m=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1;d&&d.prerelease.length===1&&a.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const f of t){if(u=u||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",o){if(m&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===m.major&&f.semver.minor===m.minor&&f.semver.patch===m.patch&&(m=!1),f.operator===">"||f.operator===">="){if(r=Kb(o,f,n),r===f&&r!==o)return!1}else if(o.operator===">="&&!Tl(o.semver,String(f),n))return!1}if(a){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(l=Yb(a,f,n),l===f&&l!==a)return!1}else if(a.operator==="<="&&!Tl(a.semver,String(f),n))return!1}if(!f.operator&&(a||o)&&i!==0)return!1}return!(o&&c&&!a&&i!==0||a&&u&&!o&&i!==0||m||d)},Kb=(e,t,n)=>{if(!e)return t;const s=fg(e.semver,t.semver,n);return s>0?e:s<0||t.operator===">"&&e.operator===">="?t:e},Yb=(e,t,n)=>{if(!e)return t;const s=fg(e.semver,t.semver,n);return s<0?e:s>0||t.operator==="<"&&e.operator==="<="?t:e};var y4=b4;const $h=Mc,Xb=Vd,S4=Js,qb=KT,A4=al,I4=xD,C4=LD,O4=DD,N4=BD,w4=GD,R4=WD,x4=KD,$4=qD,M4=Qa,L4=e8,k4=s8,D4=cg,P4=r8,B4=u8,F4=Wd,U4=ug,G4=YT,V4=XT,H4=dg,W4=pg,z4=qT,j4=M8,K4=zd(),Y4=Ja(),X4=jd,q4=U8,Z4=W8,Q4=Y8,J4=Z8,eP=e4,tP=hg,nP=u4,sP=h4,aP=f4,oP=v4,iP=y4;var rP={parse:A4,valid:I4,clean:C4,inc:O4,diff:N4,major:w4,minor:R4,patch:x4,prerelease:$4,compare:M4,rcompare:L4,compareLoose:k4,compareBuild:D4,sort:P4,rsort:B4,gt:F4,lt:U4,eq:G4,neq:V4,gte:H4,lte:W4,cmp:z4,coerce:j4,Comparator:K4,Range:Y4,satisfies:X4,toComparators:q4,maxSatisfying:Z4,minSatisfying:Q4,minVersion:J4,validRange:eP,outside:tP,gtr:nP,ltr:sP,intersects:aP,simplifyRange:oP,subset:iP,SemVer:S4,re:$h.re,src:$h.src,tokens:$h.t,SEMVER_SPEC_VERSION:Xb.SEMVER_SPEC_VERSION,RELEASE_TYPES:Xb.RELEASE_TYPES,compareIdentifiers:qb.compareIdentifiers,rcompareIdentifiers:qb.rcompareIdentifiers};const cd=Nf(rP),lP=(e,t)=>cd.valid(e)?cd.lt(t,e):!1,cP={components:{Banner:$c},props:{latestChatwootVersion:{type:String,default:""}},setup(){const{isAdmin:e}=ka();return{isAdmin:e}},data(){return{userDismissedBanner:!1}},computed:{...lt({globalConfig:"globalConfig/get"}),updateAvailable(){return lP(this.latestChatwootVersion,this.globalConfig.appVersion)},bannerMessage(){return this.$t("GENERAL_SETTINGS.UPDATE_CHATWOOT",{latestChatwootVersion:this.latestChatwootVersion})},shouldShowBanner(){return!this.userDismissedBanner&&this.globalConfig.displayManifest&&this.updateAvailable&&!this.isVersionNotificationDismissed(this.latestChatwootVersion)&&this.isAdmin}},methods:{isVersionNotificationDismissed(e){return(va.get(Na.DISMISSED_UPDATES)||[]).includes(e)},dismissUpdateBanner(){let e=va.get(Na.DISMISSED_UPDATES)||[];e instanceof Array?e.push(this.latestChatwootVersion):e=[this.latestChatwootVersion],va.set(Na.DISMISSED_UPDATES,e),this.userDismissedBanner=!0}}};function uP(e,t,n,s,o,a){const i=M("Banner");return a.shouldShowBanner?(p(),$(i,{key:0,"color-scheme":"primary","banner-message":a.bannerMessage,"href-link":"https://github.com/chatwoot/chatwoot/releases","href-link-text":e.$t("GENERAL_SETTINGS.LEARN_MORE"),"has-close-button":"",onClose:a.dismissUpdateBanner},null,8,["banner-message","href-link-text","onClose"])):w("",!0)}const dP=Ae(cP,[["render",uP]]);function zn(){const e=sn(),t=pt(),n=Oe("accounts/getAccount"),s=Oe("globalConfig/isOnChatwootCloud"),o=Oe("accounts/isFeatureEnabledonAccount"),a=C(()=>Number(e.params.accountId)),i=C(()=>n.value(a.value));return{accountId:a,route:e,currentAccount:i,accountScopedUrl:d=>`/app/accounts/${a.value}/${d}`,accountScopedRoute:(d,m,f)=>({name:d,params:{accountId:a.value,...m},query:{...f}}),isCloudFeatureEnabled:d=>o.value(i.value.id,d),isOnChatwootCloud:s,updateAccount:async(d,m)=>{await t.dispatch("accounts/update",{...d,options:m})}}}const Zb={status:null,endsOn:null},pP={components:{Banner:$c},setup(){const{isAdmin:e}=ka(),{accountId:t}=zn();return{accountId:t,isAdmin:e}},computed:{...lt({isOnChatwootCloud:"globalConfig/isOnChatwootCloud",getAccount:"accounts/getAccount"}),bannerMessage(){return this.$t("GENERAL_SETTINGS.PAYMENT_PENDING")},actionButtonMessage(){return this.$t("GENERAL_SETTINGS.OPEN_BILLING")},shouldShowBanner(){return!this.isOnChatwootCloud||!this.isAdmin?!1:this.isPaymentPending()}},methods:{routeToBilling(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})},isPaymentPending(){const{status:e,endsOn:t}=this.getSubscriptionInfo();return!!(e&&t&&e==="past_due"&&t<new Date)},getSubscriptionInfo(){const e=this.getAccount(this.accountId);if(!e)return Zb;const{custom_attributes:t}=e;if(!t)return Zb;const{subscription_status:n,subscription_ends_on:s}=t;return{status:n,endsOn:new Date(s)}}}};function hP(e,t,n,s,o,a){const i=M("Banner");return a.shouldShowBanner?(p(),$(i,{key:0,"color-scheme":"alert","banner-message":a.bannerMessage,"action-button-label":a.actionButtonMessage,"has-action-button":"",onPrimaryAction:a.routeToBilling},null,8,["banner-message","action-button-label","onPrimaryAction"])):w("",!0)}const mP=Ae(pP,[["render",hP]]),fP={components:{Banner:$c},computed:{...lt({currentUser:"getCurrentUser"}),bannerMessage(){return this.$t("APP_GLOBAL.EMAIL_VERIFICATION_PENDING")},actionButtonMessage(){return this.$t("APP_GLOBAL.RESEND_VERIFICATION_MAIL")},shouldShowBanner(){return!this.currentUser.confirmed}},methods:{resendVerificationEmail(){this.$store.dispatch("resendConfirmation"),ce(this.$t("APP_GLOBAL.EMAIL_VERIFICATION_SENT"))}}};function gP(e,t,n,s,o,a){const i=M("Banner");return a.shouldShowBanner?(p(),$(i,{key:0,"color-scheme":"alert","banner-message":a.bannerMessage,"action-button-label":a.actionButtonMessage,"action-button-icon":"i-lucide-mail","has-action-button":"",onPrimaryAction:a.resendVerificationEmail},null,8,["banner-message","action-button-label","onPrimaryAction"])):w("",!0)}const _P=Ae(fP,[["render",gP]]);function QT(){return{isImpersonating:C(()=>AO.get(IO.IMPERSONATION_USER))}}const{isImpersonating:vP}=QT();class bP extends cC{constructor(n,s){const{websocketURL:o=""}=window.chatwootConfig||{};super(n,s,o);zt(this,"onReconnect",()=>{wt.emit(jt.WEBSOCKET_RECONNECT)});zt(this,"onDisconnected",()=>{wt.emit(jt.WEBSOCKET_DISCONNECT)});zt(this,"isAValidEvent",n=>this.app.$store.getters.getCurrentAccountId===n.account_id);zt(this,"onMessageUpdated",n=>{this.app.$store.dispatch("updateMessage",n)});zt(this,"onPresenceUpdate",n=>{vP.value||(this.app.$store.dispatch("contacts/updatePresence",n.contacts),this.app.$store.dispatch("agents/updatePresence",n.users),this.app.$store.dispatch("setCurrentUserAvailability",n.users))});zt(this,"onConversationContactChange",n=>{const{meta:s={},id:o}=n,{sender:a}=s||{};o&&this.app.$store.dispatch("updateConversationContact",{conversationId:o,...a})});zt(this,"onAssigneeChanged",n=>{const{id:s}=n;s&&this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});zt(this,"onConversationCreated",n=>{this.app.$store.dispatch("addConversation",n),this.fetchConversationStats()});zt(this,"onConversationRead",n=>{this.app.$store.dispatch("updateConversation",n)});zt(this,"onLogout",()=>Kr.logout());zt(this,"onMessageCreated",n=>{const{conversation:{last_activity_at:s},conversation_id:o}=n;CO.onNewMessage(n),this.app.$store.dispatch("addMessage",n),this.app.$store.dispatch("updateConversationLastActivity",{lastActivityAt:s,conversationId:o})});zt(this,"onReload",()=>window.location.reload());zt(this,"onStatusChange",n=>{this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});zt(this,"onConversationUpdated",n=>{this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});zt(this,"onTypingOn",({conversation:n,user:s})=>{const o=n.id;this.clearTimer(o),this.app.$store.dispatch("conversationTypingStatus/create",{conversationId:o,user:s}),this.initTimer({conversation:n,user:s})});zt(this,"onTypingOff",({conversation:n,user:s})=>{const o=n.id;this.clearTimer(o),this.app.$store.dispatch("conversationTypingStatus/destroy",{conversationId:o,user:s})});zt(this,"onConversationMentioned",n=>{this.app.$store.dispatch("addMentions",n)});zt(this,"clearTimer",n=>{const s=this.CancelTyping[n];s&&(clearTimeout(s),this.CancelTyping[n]=null)});zt(this,"initTimer",({conversation:n,user:s})=>{const o=n.id;this.CancelTyping[o]=setTimeout(()=>{this.onTypingOff({conversation:n,user:s})},3e4)});zt(this,"fetchConversationStats",()=>{wt.emit("fetch_conversation_stats")});zt(this,"onContactDelete",n=>{this.app.$store.dispatch("contacts/deleteContactThroughConversations",n.id),this.fetchConversationStats()});zt(this,"onContactUpdate",n=>{this.app.$store.dispatch("contacts/updateContact",n)});zt(this,"onNotificationCreated",n=>{this.app.$store.dispatch("notifications/addNotification",n)});zt(this,"onNotificationDeleted",n=>{this.app.$store.dispatch("notifications/deleteNotification",n)});zt(this,"onNotificationUpdated",n=>{this.app.$store.dispatch("notifications/updateNotification",n)});zt(this,"onCopilotMessageCreated",n=>{this.app.$store.dispatch("copilotMessages/upsert",n)});zt(this,"onCacheInvalidate",n=>{const s=n.cache_keys;this.app.$store.dispatch("labels/revalidate",{newKey:s.label}),this.app.$store.dispatch("inboxes/revalidate",{newKey:s.inbox}),this.app.$store.dispatch("teams/revalidate",{newKey:s.team})});this.CancelTyping=[],this.events={"message.created":this.onMessageCreated,"message.updated":this.onMessageUpdated,"conversation.created":this.onConversationCreated,"conversation.status_changed":this.onStatusChange,"user:logout":this.onLogout,"page:reload":this.onReload,"assignee.changed":this.onAssigneeChanged,"conversation.typing_on":this.onTypingOn,"conversation.typing_off":this.onTypingOff,"conversation.contact_changed":this.onConversationContactChange,"presence.update":this.onPresenceUpdate,"contact.deleted":this.onContactDelete,"contact.updated":this.onContactUpdate,"conversation.mentioned":this.onConversationMentioned,"notification.created":this.onNotificationCreated,"notification.deleted":this.onNotificationDeleted,"notification.updated":this.onNotificationUpdated,"conversation.read":this.onConversationRead,"conversation.updated":this.onConversationUpdated,"account.cache_invalidated":this.onCacheInvalidate,"copilot.message.created":this.onCopilotMessageCreated}}}const EP={init(e,t){return new bP({$store:e},t)}},TP={props:{message:{type:String,default:""},action:{type:Object,default:()=>{}}},data(){return{toggleAfterTimeout:!1}},mounted(){},methods:{}},yP={class:"shadow-sm bg-n-slate-12 dark:bg-n-slate-7 rounded-lg items-center gap-3 inline-flex mb-2 max-w-[25rem] min-h-[1.875rem] min-w-[15rem] px-6 py-3 text-left"},SP={class:"text-sm font-medium text-white dark:text-white"},AP={key:0};function IP(e,t,n,s,o,a){const i=M("router-link");return p(),v("div",null,[h("div",yP,[h("div",SP,A(n.message),1),n.action?(p(),v("div",AP,[n.action.type=="link"?(p(),$(i,{key:0,to:n.action.to,class:"font-medium cursor-pointer select-none text-n-blue-10 hover:text-n-brand"},{default:K(()=>[Re(A(n.action.message),1)]),_:1},8,["to"])):w("",!0)])):w("",!0)])])}const CP=Ae(TP,[["render",IP]]),OP={__name:"SnackbarContainer",props:{duration:{type:Number,default:2500}},setup(e){const t=e,{t:n}=Me(),s=X([]),o=X(null),a=()=>{try{const r=o.value;r!=null&&r.matches(":popover-open")&&r.hidePopover(),r==null||r.showPopover()}catch{}},i=({message:r,action:l})=>{const c=l!=null&&l.usei18n?n(r):r,u=(l==null?void 0:l.duration)||t.duration;s.value.push({key:Date.now(),message:c,action:l}),tn(a),setTimeout(()=>{s.value.shift()},u)};return dt(()=>{wt.on("newToastMessage",i)}),zo(()=>{wt.off("newToastMessage",i)}),(r,l)=>(p(),v("div",{ref_key:"snackbarContainer",ref:o,popover:"manual",class:"fixed top-4 left-1/2 -translate-x-1/2 max-w-[25rem] w-[calc(100%-2rem)] text-center bg-transparent border-0 p-0 m-0 outline-none overflow-visible"},[y(t0,{name:"toast-fade",tag:"div"},{default:K(()=>[(p(!0),v(pe,null,Ne(s.value,c=>(p(),$(CP,{key:c.key,message:c.message,action:c.action},null,8,["message","action"]))),128))]),_:1})],512))}},Qb=e=>{const t=va.get(Na.COLOR_SCHEME)||"auto";t==="auto"&&e||t==="dark"?(document.body.classList.add("dark"),document.documentElement.style.setProperty("color-scheme","dark")):(document.body.classList.remove("dark"),document.documentElement.style.setProperty("color-scheme","light"))},Jb=Object.freeze([{name:"conversation_actions"},{name:"macros"},{name:"conversation_info"},{name:"contact_attributes"},{name:"contact_notes"},{name:"previous_conversation"},{name:"conversation_participants"},{name:"linear_issues"},{name:"shopify_orders"}]),NP=Object.freeze([{name:"contact_attributes"},{name:"contact_labels"},{name:"previous_conversation"}]),JT=e=>e==null?void 0:e.toLowerCase().replace(" ","_").replace("-","_").replace("::","_"),wP=e=>C(()=>{const{conversation_sidebar_items_order:t}=e.value;if(!t)return[...Jb];const n=[...t];return Jb.forEach(s=>{n.find(o=>o.name===s.name)||n.push(s)}),n}),RP=e=>C(()=>{const{contact_sidebar_items_order:t}=e.value;return t||NP}),xP=(e,t,n)=>{n({[e]:!t.value[e]})},$P=(e,t,n)=>{if(!e)return;const s=JT(e);n({[`${s}_signature_enabled`]:t})},MP=(e,t)=>{if(!e)return!1;const n=JT(e);return t.value[`${n}_signature_enabled`]},LP=(e,t)=>{const{editor_message_key:n,enter_to_send_enabled:s}=t.value||{};return n?n===e:e===(s?"enter":"cmd_enter")};function ln(){const e=nn(),t=pt(),n=C(()=>e.getUISettings.value),s=(o={})=>{t.dispatch("updateUISettings",{uiSettings:{...n.value,...o}})};return{uiSettings:n,updateUISettings:s,conversationSidebarItemsOrder:wP(n),contactSidebarItemsOrder:RP(n),isContactSidebarItemOpen:o=>!!n.value[o],toggleSidebarUIState:o=>xP(o,n,s),setSignatureFlagForInbox:(o,a)=>$P(o,a,s),fetchSignatureFlagFromUISettings:o=>MP(o,n),isEditorHotKeyEnabled:o=>LP(o,n)}}const Kd={SMALLER:"14px",SMALL:"15px",DEFAULT:"16px",LARGE:"18px",LARGER:"20px"},kP=Object.keys(Kd),DP=e=>`PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.OPTIONS.${e}`,PP=(e,t)=>({value:Kd[t],label:e(DP(t))}),BP=e=>{document.documentElement.style.setProperty("font-size",e??Kd.DEFAULT)},gg=()=>{const{uiSettings:e,updateUISettings:t}=ln(),{t:n}=Me(),s=kP.map(r=>PP(n,r)),o=C(()=>e.value.font_size||Kd.DEFAULT),a=r=>{requestAnimationFrame(()=>BP(r))},i=async r=>{try{await t({font_size:r}),a(r),ce(n("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.UPDATE_SUCCESS"))}catch{ce(n("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.UPDATE_ERROR"))}};return ct(()=>e.value.font_size,r=>{a(r)},{immediate:!0}),{fontSizeOptions:s,currentFontSize:o,applyFontSize:a,updateFontSize:i}};class FP extends Io{constructor(){super("notification_subscriptions")}}const UP=new FP,Ym=(e=()=>{})=>{"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register("/sw.js").then(t=>e(t)).catch(t=>{console.log("SW registration failed: ",t)})},GP=()=>"Notification"in window?Notification.permission==="granted":!1,e1=e=>btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_"),VP=e=>({subscription_type:"browser_push",subscription_attributes:{endpoint:e.endpoint,p256dh:e1(e.getKey("p256dh")),auth:e1(e.getKey("auth"))}}),HP=e=>Kr.hasAuthCookie()?UP.create(VP(e)):null,Xm=(e=()=>{})=>{window.chatwootConfig.vapidPublicKey&&navigator.serviceWorker.ready.then(t=>t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:window.chatwootConfig.vapidPublicKey})).then(HP).then(()=>{e()}).catch(()=>{ce("This browser does not support desktop notification")})},WP=({onSuccess:e})=>{"Notification"in window?Notification.permission==="granted"?Xm(e):Notification.permission!=="denied"&&Notification.requestPermission(t=>{t==="granted"&&Xm(e)}):ce("This browser does not support desktop notification")},zP=10800,jP=15;class KP{constructor(t,n){zt(this,"disconnect",()=>this.removeEventListeners());zt(this,"setupEventListeners",()=>{window.addEventListener("online",this.handleOnlineEvent),wt.on(jt.WEBSOCKET_RECONNECT,this.onReconnect),wt.on(jt.WEBSOCKET_DISCONNECT,this.onDisconnect)});zt(this,"removeEventListeners",()=>{window.removeEventListener("online",this.handleOnlineEvent),wt.off(jt.WEBSOCKET_RECONNECT,this.onReconnect),wt.off(jt.WEBSOCKET_DISCONNECT,this.onDisconnect)});zt(this,"getSecondsSinceDisconnect",()=>this.disconnectTime?Math.max(h0(new Date,this.disconnectTime),0):0);zt(this,"handleOnlineEvent",()=>{this.getSecondsSinceDisconnect()>=zP&&window.location.reload()});zt(this,"fetchConversations",async()=>{await this.store.dispatch("updateChatListFilters",{page:null,updatedWithin:this.getSecondsSinceDisconnect()+jP}),await this.store.dispatch("fetchAllConversations"),await this.store.dispatch("updateChatListFilters",{updatedWithin:null})});zt(this,"fetchFilteredOrSavedConversations",async t=>{await this.store.dispatch("fetchFilteredConversations",{queryData:t,page:1})});zt(this,"fetchConversationsOnReconnect",async()=>{var o;const{getAppliedConversationFiltersQuery:t,"customViews/getActiveConversationFolder":n}=this.store.getters,s=(o=t==null?void 0:t.payload)!=null&&o.length?t:n==null?void 0:n.query;s?await this.fetchFilteredOrSavedConversations(s):await this.fetchConversations()});zt(this,"fetchConversationMessagesOnReconnect",async()=>{const{conversation_id:t}=this.router.currentRoute.value.params;t&&await this.store.dispatch("syncActiveConversationMessages",{conversationId:Number(t)})});zt(this,"fetchNotificationsOnReconnect",async t=>{await this.store.dispatch("notifications/index",{...t,page:1})});zt(this,"revalidateCaches",async()=>{const{label:t,inbox:n,team:s}=await this.store.dispatch("accounts/getCacheKeys");await Promise.all([this.store.dispatch("labels/revalidate",{newKey:t}),this.store.dispatch("inboxes/revalidate",{newKey:n}),this.store.dispatch("teams/revalidate",{newKey:s})])});zt(this,"handleRouteSpecificFetch",async()=>{const t=this.router.currentRoute.value.name;ig(t,!0)?(await this.fetchConversationsOnReconnect(),await this.fetchConversationMessagesOnReconnect()):rg(t,!0)?await this.fetchNotificationsOnReconnect(this.store.getters["notifications/getNotificationFilters"]):WT(t)&&await this.fetchNotificationsOnReconnect()});zt(this,"setConversationLastMessageId",async()=>{const{conversation_id:t}=this.router.currentRoute.value.params;t&&await this.store.dispatch("setConversationLastMessageId",{conversationId:Number(t)})});zt(this,"onDisconnect",()=>{this.disconnectTime=new Date,this.setConversationLastMessageId()});zt(this,"onReconnect",async()=>{await this.handleRouteSpecificFetch(),await this.revalidateCaches(),wt.emit(jt.WEBSOCKET_RECONNECT_COMPLETED)});this.store=t,this.router=n,this.disconnectTime=null,this.setupEventListeners()}}const YP={name:"App",components:{AddAccountModal:HT,LoadingState:Rc,NetworkNotification:uD,UpdateBanner:dP,PaymentPendingBanner:mP,WootSnackbarBox:OP,PendingEmailVerificationBanner:_P},setup(){const e=xn(),t=pt(),{accountId:n}=zn(),{currentFontSize:s}=gg();return{router:e,store:t,currentAccountId:n,currentFontSize:s}},data(){return{showAddAccountModal:!1,latestChatwootVersion:null,reconnectService:null}},computed:{...lt({getAccount:"accounts/getAccount",isRTL:"accounts/isRTL",currentUser:"getCurrentUser",authUIFlags:"getAuthUIFlags",accountUIFlags:"accounts/getUIFlags"}),hasAccounts(){const{accounts:e=[]}=this.currentUser||{};return e.length>0},hideOnOnboardingView(){return!OO(this.$route)}},watch:{currentUser(){this.hasAccounts||(this.showAddAccountModal=!0)},currentAccountId:{immediate:!0,handler(){this.currentAccountId&&this.initializeAccount()}}},mounted(){this.initializeColorTheme(),this.listenToThemeChanges(),this.setLocale(window.chatwootConfig.selectedLocale)},unmounted(){this.reconnectService&&this.reconnectService.disconnect()},methods:{initializeColorTheme(){Qb(window.matchMedia("(prefers-color-scheme: dark)").matches)},listenToThemeChanges(){const e=window.matchMedia("(prefers-color-scheme: dark)");e.onchange=t=>Qb(t.matches)},setLocale(e){this.$root.$i18n.locale=e},async initializeAccount(){await this.$store.dispatch("accounts/get"),this.$store.dispatch("setActiveAccount",{accountId:this.currentAccountId});const{locale:e,latest_chatwoot_version:t}=this.getAccount(this.currentAccountId),{pubsub_token:n}=this.currentUser||{};this.setLocale(e),this.latestChatwootVersion=t,EP.init(this.store,n),this.reconnectService=new KP(this.store,this.router),window.reconnectService=this.reconnectService,Ym(s=>s.pushManager.getSubscription().then(o=>{o&&Xm()}))}}},XP=["dir"];function qP(e,t,n,s,o,a){const i=M("UpdateBanner"),r=M("PendingEmailVerificationBanner"),l=M("PaymentPendingBanner"),c=M("router-view"),u=M("AddAccountModal"),d=M("WootSnackbarBox"),m=M("NetworkNotification"),f=M("LoadingState");return!e.authUIFlags.isFetching&&!e.accountUIFlags.isFetchingItem?(p(),v("div",{key:0,id:"app",class:se(["flex-grow-0 w-full h-full min-h-0 app-wrapper",{"app-rtl--wrapper":e.isRTL}]),dir:e.isRTL?"rtl":"ltr"},[y(i,{"latest-chatwoot-version":o.latestChatwootVersion},null,8,["latest-chatwoot-version"]),s.currentAccountId?(p(),v(pe,{key:0},[a.hideOnOnboardingView?(p(),$(r,{key:0})):w("",!0),a.hideOnOnboardingView?(p(),$(l,{key:1})):w("",!0)],64)):w("",!0),y(c,null,{default:K(({Component:g})=>[y(qs,{name:"fade",mode:"out-in"},{default:K(()=>[(p(),$(vs(g)))]),_:2},1024)]),_:1}),y(u,{show:o.showAddAccountModal,"has-accounts":a.hasAccounts},null,8,["show","has-accounts"]),y(d),y(m)],10,XP)):(p(),$(f,{key:1}))}const ZP=Ae(YP,[["render",qP]]),QP=e=>Promise.reject(e),JP=e=>{const{apiHost:t=""}=window.chatwootConfig||{},n=e.create({baseURL:`${t}/`});if(Kr.hasAuthCookie()){const{"access-token":s,"token-type":o,client:a,expiry:i,uid:r}=Kr.getAuthData();Object.assign(n.defaults.headers.common,{"access-token":s,"token-type":o,client:a,expiry:i,uid:r})}return n.interceptors.response.use(s=>s,s=>QP(s)),n};/*!
 /**
  * vuex-router-sync v6.0.0-rc.1
  * (c) 2021 Evan You
  * @license MIT
  */function e5(e,t,n){const s={}.moduleName||"route";e.registerModule(s,{namespaced:!0,state:qm(t.currentRoute.value),mutations:{ROUTE_CHANGED(l,c){e.state[s]=qm(c.to,c.from)}}});let o=!1,a;const i=e.watch(l=>l[s],l=>{const{fullPath:c}=l;c!==a&&(a!=null&&(o=!0,t.push(l)),a=c)},{flush:"sync"}),r=t.afterEach((l,c)=>{if(o){o=!1;return}a=l.fullPath,e.commit(s+"/ROUTE_CHANGED",{to:l,from:c})});return function(){r(),i(),e.unregisterModule(s)}}function qm(e,t){const n={name:e.name,path:e.path,hash:e.hash,query:e.query,params:e.params,fullPath:e.fullPath,meta:e.meta};return t&&(n.from=qm(t)),Object.freeze(n)}function Yd(){const e=window.chatwootConfig||{},t=e.hostURL,n=e.vapidPublicKey,s=e.enabledLanguages,o=e.isEnterprise==="true",a=e.enterprisePlanName;return{hostURL:t,vapidPublicKey:n,enabledLanguages:s,isEnterprise:o,enterprisePlanName:a}}const t5={class:"relative flex flex-col min-w-0 gap-1"},n5=["for"],s5=["id","value","type","placeholder","disabled","min"],_n={__name:"Input",props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},customInputClass:{type:[String,Object,Array],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},message:{type:String,default:""},disabled:{type:Boolean,default:!1},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},min:{type:String,default:""},autofocus:{type:Boolean,default:!1}},emits:["update:modelValue","blur","input","focus","enter"],setup(e,{emit:t}){const n=e,s=t,{uid:o}=Id(),a=C(()=>n.id||`input-${o}`),i=X(!1),r=X(null),l=C(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-green-500 dark:text-green-400";default:return"text-n-slate-11 dark:text-n-slate-11"}}),c=C(()=>{switch(n.messageType){case"error":return"outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 disabled:outline-n-ruby-8 dark:disabled:outline-n-ruby-8";default:return"outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 disabled:outline-n-weak dark:disabled:outline-n-weak focus:outline-n-brand dark:focus:outline-n-brand"}}),u=g=>{s("update:modelValue",g.target.value),s("input",g)},d=g=>{s("focus",g),i.value=!0},m=g=>{s("blur",g),i.value=!1},f=g=>{s("enter",g)};return dt(()=>{n.autofocus&&tn(()=>{var g;(g=r.value)==null||g.focus()})}),(g,T)=>(p(),v("div",t5,[e.label?(p(),v("label",{key:0,for:a.value,class:"mb-0.5 text-sm font-medium text-n-slate-12"},A(e.label),9,n5)):w("",!0),We(g.$slots,"prefix"),h("input",{id:a.value,ref_key:"inputRef",ref:r,value:e.modelValue,class:se([[e.customInputClass,c.value,{error:e.messageType==="error",focus:i.value}],"block w-full reset-base text-sm h-10 !px-3 !py-2.5 !mb-0 outline outline-1 border-none border-0 outline-offset-[-1px] rounded-lg bg-n-alpha-black2 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 disabled:cursor-not-allowed disabled:opacity-50 text-n-slate-12 transition-all duration-500 ease-in-out"]),type:e.type,placeholder:e.placeholder,disabled:e.disabled,min:["date","datetime-local","time"].includes(e.type)?e.min:void 0,onInput:u,onFocus:d,onBlur:m,onKeyup:kn(f,["enter"])},null,42,s5),e.message?(p(),v("p",{key:1,class:se(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",l.value])},A(e.message),3)):w("",!0)]))}},a5={key:0},Zm={__name:"CustomBrandPolicyWrapper",props:{showOnCustomBrandedInstance:{type:Boolean,default:!0}},setup(e){const t=e,s=nn()["globalConfig/isACustomBrandedInstance"],o=C(()=>t.showOnCustomBrandedInstance||!s.value);return(a,i)=>o.value?(p(),v("div",a5,[We(a.$slots,"default")])):w("",!0)}},o5={agent_bots:"https://chwt.app/hc/agent-bots",agents:"https://chwt.app/hc/agents",audit_logs:"https://chwt.app/hc/audit-logs",campaigns:"https://chwt.app/hc/campaigns",canned_responses:"https://chwt.app/hc/canned",channel_email:"https://chwt.app/hc/email",channel_facebook:"https://chwt.app/hc/fb",custom_attributes:"https://chwt.app/hc/custom-attributes",dashboard_apps:"https://chwt.app/hc/dashboard-apps",help_center:"https://chwt.app/hc/help-center",inboxes:"https://chwt.app/hc/inboxes",integrations:"https://chwt.app/hc/integrations",labels:"https://chwt.app/hc/labels",macros:"https://chwt.app/hc/macros",message_reply_to:"https://chwt.app/hc/reply-to",reports:"https://chwt.app/hc/reports",sla:"https://chwt.app/hc/sla",team_management:"https://chwt.app/hc/teams",webhook:"https://chwt.app/hc/webhooks",billing:"https://chwt.app/pricing"};function i5(e){return o5[e]}const lr={__name:"BackButton",props:{backUrl:{type:[String,Object],default:""},buttonLabel:{type:String,default:""},compact:{type:Boolean,default:!1}},setup(e){const t=e,n=()=>{t.backUrl!==""?Wn.push(t.backUrl):Wn.go(-1)},s=t.compact?"text-sm":"text-base";return(o,a)=>(p(),v("button",{class:se(["flex items-center p-0 font-normal cursor-pointer text-n-slate-11",N(s)]),onClickCapture:n},[a[0]||(a[0]=h("i",{class:"i-lucide-chevron-left -ml-1 text-lg"},null,-1)),Re(" "+A(e.buttonLabel||o.$t("GENERAL_SETTINGS.BACK")),1)],34))}},r5={class:"flex flex-col items-start w-full gap-2"},l5={class:"flex items-center justify-between w-full gap-4"},c5={class:"flex items-center gap-3"},u5={key:0,class:"flex items-center w-10 h-10 p-1 rounded-full bg-woot-25/60 dark:bg-woot-900/60"},d5={class:"flex items-center justify-center w-full h-full rounded-full bg-woot-75/70 dark:bg-woot-800/40"},p5={class:"text-xl font-medium tracking-tight text-n-slate-12"},h5={class:"hidden gap-2 sm:flex"},m5={class:"flex flex-col w-full gap-3 text-n-slate-11"},f5={class:"mb-0 text-sm font-normal line-clamp-5 sm:line-clamp-none max-w-3xl"},g5=["href"],_5={class:"flex flex-wrap items-start justify-start w-full gap-3 sm:hidden"},Cs={__name:"BaseSettingsHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0},iconName:{type:String,default:""},linkText:{type:String,default:""},featureName:{type:String,default:""},backButtonLabel:{type:String,default:""}},setup(e){const n=i5(e.featureName),s=o=>{o&&window.open(o,"_blank","noopener noreferrer")};return(o,a)=>{const i=M("fluent-icon");return p(),v("div",r5,[e.backButtonLabel?(p(),$(lr,{key:0,compact:"","button-label":e.backButtonLabel},null,8,["button-label"])):w("",!0),h("div",l5,[h("div",c5,[e.iconName?(p(),v("div",u5,[h("div",d5,[y(i,{size:"14",icon:e.iconName,type:"outline",class:"flex-shrink-0 text-n-brand"},null,8,["icon"])])])):w("",!0),h("h1",p5,A(e.title),1)]),h("div",h5,[We(o.$slots,"actions")])]),h("div",m5,[h("p",f5,[We(o.$slots,"description",{},()=>[Re(A(e.description),1)])]),y(Zm,{"show-on-custom-branded-instance":!1},{default:K(()=>[N(n)&&e.linkText?(p(),v("a",{key:0,href:N(n),target:"_blank",rel:"noopener noreferrer",class:"items-center hidden gap-1 text-sm font-medium sm:inline-flex w-fit text-n-blue-text hover:underline"},[Re(A(e.linkText)+" ",1),y(Rt,{icon:"i-lucide-chevron-right",class:"flex-shrink-0 text-n-blue-text size-4"})],8,g5)):w("",!0)]),_:1})]),h("div",_5,[We(o.$slots,"actions"),y(Zm,{"show-on-custom-branded-instance":!1},{default:K(()=>[N(n)&&e.linkText?(p(),$(oe,{key:0,blue:"",link:"",icon:"i-lucide-chevron-right","trailing-icon":"",label:e.linkText,onClick:a[0]||(a[0]=r=>s(N(n)))},null,8,["label"])):w("",!0)]),_:1})])])}}},v5={class:"grid grid-cols-4"},b5={class:"col-span-3"},E5={class:"text-lg font-medium text-n-slate-12"},T5={class:"text-n-slate-11 text-sm mt-2"},y5={class:"col-span-1"},ol={__name:"SectionLayout",props:{title:{type:String,required:!0},description:{type:String,required:!0},withBorder:{type:Boolean,default:!1},hideContent:{type:Boolean,default:!1}},setup(e){return(t,n)=>(p(),v("section",{class:se(["grid grid-cols-1 pt-8 gap-5 [interpolate-size:allow-keywords]",{"border-t border-n-weak":e.withBorder,"pb-8":!e.hideContent}])},[h("header",v5,[h("div",b5,[h("h4",E5,[We(t.$slots,"title",{},()=>[Re(A(e.title),1)])]),h("p",T5,[We(t.$slots,"description",{},()=>[Re(A(e.description),1)])])]),h("div",y5,[We(t.$slots,"headerActions")])]),h("div",{class:se(["transition-[height] duration-300 ease-in-out text-n-slate-12",{"overflow-hidden h-0":e.hideContent,"h-auto":!e.hideContent}])},[We(t.$slots,"default")],2)],2))}},S5={__name:"AccountId",setup(e){const{t}=Me(),{currentAccount:n}=zn(),s=C(()=>n.value.id.toString());return(o,a)=>{const i=M("woot-code");return p(),$(ol,{title:N(t)("GENERAL_SETTINGS.FORM.ACCOUNT_ID.TITLE"),description:N(t)("GENERAL_SETTINGS.FORM.ACCOUNT_ID.NOTE"),"with-border":""},{default:K(()=>[y(i,{script:s.value},null,8,["script"])]),_:1},8,["title","description"])}}},A5={class:"p-4 text-sm text-center"},I5={key:0},C5={class:"divide-x divide-n-slate-9"},O5={class:"px-2"},N5={__name:"BuildInfo",setup(e){const{t}=Me(),{currentAccount:n}=zn(),s=C(()=>n.value.latest_chatwoot_version),o=Oe("globalConfig/get"),a=C(()=>cd.valid(s.value)?cd.lt(o.value.appVersion,s.value):!1),i=C(()=>o.value.gitSha.substring(0,7)),r=()=>{Go(o.value.gitSha)};return(l,c)=>{const u=qe("tooltip");return p(),v("div",A5,[a.value&&N(o).displayManifest?(p(),v("div",I5,A(N(t)("GENERAL_SETTINGS.UPDATE_CHATWOOT",{latestChatwootVersion:s.value})),1)):w("",!0),h("div",C5,[h("span",O5,A(`v${N(o).appVersion}`),1),re((p(),v("span",{class:"px-2 build-id cursor-pointer",onClick:r},[Re(A(`Build ${i.value}`),1)])),[[u,N(t)("COMPONENTS.CODE.BUTTON_TEXT")]])])])}}},w5={key:0},R5={class:"p-4 flex-grow-0 flex-shrink-0 flex-[50%] bg-red-50 dark:bg-red-900 rounded"},x5={class:"mb-4"},$5={key:1},M5={__name:"AccountDelete",setup(e){const{t}=Me(),n=pt(),s=Oe("accounts/getUIFlags"),{currentAccount:o}=zn(),[a,i]=es(),r=C(()=>`${t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.PLACE_HOLDER",{accountName:o.value.name})}`),l=C(()=>{const{custom_attributes:S={}}=o.value;return!!S.marked_for_deletion_at}),c=C(()=>{const{custom_attributes:S={}}=o.value;return S.marked_for_deletion_at?new Date(S.marked_for_deletion_at):null}),u=C(()=>{const{custom_attributes:S={}}=o.value;return S.marked_for_deletion_reason||"manual_deletion"}),d=C(()=>c.value?c.value.toLocaleString():""),m=C(()=>{const S={deletionDate:d.value};return u.value==="manual_deletion"?t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.MESSAGE_MANUAL",S):t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.MESSAGE_INACTIVITY",S)});function f(S){var E,b;const _=(b=(E=S.response)==null?void 0:E.data)==null?void 0:b.message;if(_){ce(_);return}ce(t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.FAILURE"))}async function g(){i(!1);try{await n.dispatch("accounts/toggleDeletion",{action_type:"delete"}),await n.dispatch("accounts/get"),ce(t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SUCCESS"))}catch(S){f(S)}}async function T(){try{await n.dispatch("accounts/toggleDeletion",{action_type:"undelete"}),await n.dispatch("accounts/get"),ce(t("GENERAL_SETTINGS.UPDATE.SUCCESS"))}catch{ce(t("GENERAL_SETTINGS.UPDATE.ERROR"))}}return(S,_)=>(p(),v(pe,null,[y(ol,{title:N(t)("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.TITLE"),description:N(t)("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.NOTE"),"with-border":""},{default:K(()=>[l.value?(p(),v("div",w5,[h("div",R5,[h("p",x5,A(m.value),1),y(oe,{label:S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.CLEAR_BUTTON"),color:"ruby","is-loading":N(s).isUpdating,onClick:T},null,8,["label","is-loading"])])])):w("",!0),l.value?w("",!0):(p(),v("div",$5,[y(oe,{label:S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.BUTTON_TEXT"),color:"ruby",onClick:_[0]||(_[0]=E=>N(i)(!0))},null,8,["label"])]))]),_:1},8,["title","description"]),N(a)?(p(),$(TT,{key:0,show:N(a),"onUpdate:show":_[1]||(_[1]=E=>Ad(a)?a.value=E:null),title:S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.TITLE"),message:S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.MESSAGE"),"confirm-text":S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.BUTTON_TEXT"),"reject-text":S.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.DISMISS"),"confirm-value":N(o).name,"confirm-place-holder-text":r.value,onOnConfirm:g,onOnClose:_[2]||(_[2]=E=>N(i)(!1))},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):w("",!0)],64))}},L5={class:"relative flex flex-col gap-1"},k5=["for"],D5=["id","value","placeholder","maxlength","disabled"],P5={key:0,class:"flex items-center justify-end h-4 mt-1 bottom-3 ltr:right-3 rtl:left-3"},B5={class:"text-xs tabular-nums text-n-slate-10"},Xd={__name:"TextArea",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},maxLength:{type:Number,default:200},id:{type:String,default:""},disabled:{type:Boolean,default:!1},customTextAreaClass:{type:String,default:""},customTextAreaWrapperClass:{type:String,default:""},showCharacterCount:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},minHeight:{type:String,default:"4rem"},maxHeight:{type:String,default:"12rem"},autofocus:{type:Boolean,default:!1},message:{type:String,default:""},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},signature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1},allowSignature:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,o=X(null),a=X(!1),i=C(()=>n.modelValue.length),r=C(()=>Qi(n.signature)),l=C(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-green-500 dark:text-green-400";default:return"text-n-slate-11 dark:text-n-slate-11"}}),c=()=>{!n.autoHeight||!o.value||(o.value.style.height="auto",o.value.style.height=`${o.value.scrollHeight}px`)},u=()=>{if(!o.value)return;const S=uo(n.modelValue,r.value).trimEnd().length;o.value.focus(),o.value.setSelectionRange(S,S)},d=T=>{if(!n.allowSignature)return;const S=T?li(n.modelValue,r.value):uo(n.modelValue,r.value);s("update:modelValue",S),tn(()=>{c(),u()})},m=T=>{s("update:modelValue",T.target.value),n.autoHeight&&tn(c)},f=()=>{n.disabled||(a.value=!0)},g=()=>{n.disabled||(a.value=!1)};return ct(()=>n.modelValue,()=>{n.autoHeight&&tn(c)}),ct(()=>n.sendWithSignature,T=>{n.allowSignature&&d(T)}),dt(()=>{var T;n.autoHeight&&tn(c),n.autofocus&&((T=o.value)==null||T.focus())}),(T,S)=>(p(),v("div",L5,[e.label?(p(),v("label",{key:0,for:e.id,class:"mb-0.5 text-sm font-medium text-n-slate-12"},A(e.label),9,k5)):w("",!0),h("div",{class:se(["flex flex-col gap-2 px-3 pt-3 pb-3 transition-all duration-500 ease-in-out border rounded-lg bg-n-alpha-black2",[e.customTextAreaWrapperClass,{"cursor-not-allowed opacity-50 !bg-n-alpha-black2 disabled:border-n-weak dark:disabled:border-n-weak":e.disabled,"border-n-brand dark:border-n-brand":a.value,"hover:border-n-slate-6 dark:hover:border-n-slate-6 border-n-weak dark:border-n-weak":!a.value&&e.messageType!=="error","border-n-ruby-8 dark:border-n-ruby-8 hover:border-n-ruby-9 dark:hover:border-n-ruby-9":e.messageType==="error"&&!a.value}]])},[We(T.$slots,"default"),h("textarea",{id:e.id,ref_key:"textareaRef",ref:o,value:e.modelValue,placeholder:e.placeholder,maxlength:e.showCharacterCount?e.maxLength:void 0,class:se([[e.customTextAreaClass,{"resize-none":!e.resize}],"flex w-full reset-base text-sm p-0 !rounded-none !bg-transparent dark:!bg-transparent !border-0 !outline-0 !mb-0 placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 text-n-slate-12 dark:text-n-slate-12 disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-slate-25 dark:disabled:bg-slate-900"]),style:Ht({minHeight:e.autoHeight?e.minHeight:void 0,maxHeight:e.autoHeight?e.maxHeight:void 0}),disabled:e.disabled,rows:"1",onInput:m,onFocus:f,onBlur:g},null,46,D5),e.showCharacterCount?(p(),v("div",P5,[h("span",B5,A(i.value)+" / "+A(e.maxLength),1)])):w("",!0)],2),e.message?(p(),v("p",{key:1,class:se(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",l.value])},A(e.message),3)):w("",!0)]))}},F5=["aria-checked"],U5={class:"sr-only"},fc={__name:"Switch",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:hn(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=t,{t:s}=Me(),o=wn(e,"modelValue"),a=()=>{o.value=!o.value,n("change",!o.value)};return(i,r)=>(p(),v("button",{type:"button",class:se(["relative h-4 transition-colors duration-200 ease-in-out rounded-full w-7 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:ring-offset-n-slate-2 focus:ring-offset-2",o.value?"bg-n-brand":"bg-n-alpha-1 dark:bg-n-alpha-2"]),role:"switch","aria-checked":o.value,onClick:a},[h("span",U5,A(N(s)("SWITCH.TOGGLE")),1),h("span",{class:se(["absolute top-0.5 left-0.5 h-3 w-3 transform rounded-full shadow-sm transition-transform duration-200 ease-in-out",o.value?"translate-x-3 bg-white":"translate-x-0 bg-white dark:bg-n-black"])},null,2)],10,F5))}},ca={MINUTES:"minutes",HOURS:"hours",DAYS:"days"},G5=["disabled"],V5=["value"],H5=["value"],W5=["value"],z5={__name:"DurationInput",props:hn({min:{type:Number,default:0},max:{type:Number,default:1/0},disabled:{type:Boolean,default:!1}},{modelValue:{type:Number,default:null},modelModifiers:{},unit:{type:String,default:ca.MINUTES,validate(e){return Object.values(ca).includes(e)}},unitModifiers:{}}),emits:["update:modelValue","update:unit"],setup(e){const t=e,{t:n}=Me(),s=wn(e,"modelValue"),o=wn(e,"unit"),a=r=>o.value===ca.MINUTES?Math.floor(r):o.value===ca.HOURS?Math.floor(r)*60:Math.floor(r)*24*60,i=C({get(){return o.value===ca.MINUTES?s.value:o.value===ca.HOURS?Math.floor(s.value/60):o.value===ca.DAYS?Math.floor(s.value/24/60):0},set(r){let l=a(r);s.value=Math.min(Math.max(l,t.min),t.max)}});return ct(o,()=>{let r=a(i.value);s.value=Math.min(Math.max(r,t.min),t.max)}),(r,l)=>(p(),v(pe,null,[y(_n,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=c=>i.value=c),type:"number",autocomplete:"off",disabled:e.disabled,placeholder:N(n)("DURATION_INPUT.PLACEHOLDER"),class:"flex-grow w-full disabled:"},null,8,["modelValue","disabled","placeholder"]),re(h("select",{"onUpdate:modelValue":l[1]||(l[1]=c=>o.value=c),disabled:e.disabled,class:"mb-0 text-sm disabled:outline-n-weak disabled:opacity-40"},[h("option",{value:N(ca).MINUTES},A(N(n)("DURATION_INPUT.MINUTES")),9,V5),h("option",{value:N(ca).HOURS},A(N(n)("DURATION_INPUT.HOURS")),9,H5),h("option",{value:N(ca).DAYS},A(N(n)("DURATION_INPUT.DAYS")),9,W5)],8,G5),[[gn,o.value]])],64))}};function j5(e,t){e.length<t.length&&([e,t]=[t,e]);let n=e.length,s=t.length;if(n===0||s===0)return 0;let o=Math.floor(n/2)-1,a=Array(s).fill(!1),i=Array(n).fill(""),r=0;for(let f=0;f<n;f++){let g=e[f];for(let T=0;T<s;T++){let S=t[T];if(T<=f+o&&T+o>=1&&g===S&&!a[T]){a[T]=!0,i[r++]=g;break}}}if(!r)return 0;let l=0;for(let f=0,g=0;g<s;g++)a[g]&&(t[g]!==i[f]&&l++,f++);let c=r,u=(c/n+c/s+(c-l/2)/c)/3,d=0,m=Math.min(4,s);for(let f=0;f<m;f++)e[f]===t[f]&&d++;return u+d*.1*(1-u)}function ey(e,t){let n=0,s=0;if(t&&e.length!==t.length)throw new Error("The number of values must be equal to the number of weights");for(let o=0;o<e.length;o++){let a=t?t[o]:1;n+=e[o]*a,s+=a}return n/s}function K5(e){return Math.max(0,Math.min(1,e))}function ty(e){return e.split(/\s+/).filter((t,n,s)=>t&&s.indexOf(t)===n)}var ny={CONTAINS_MATCH:1.2,FIRST_SIMILARITY:1.1};function _g(e,t,n,s){if(!t||typeof t!="string")return e;let o=[],a=(s==null?void 0:s.threshold)??.8,i=t.trim().toLowerCase(),r=ty(i);return e.forEach(l=>{let c=[],u=[];n.forEach(m=>{var S;let f,g=1;typeof m=="string"?f=m:(f=m.name,g=m.weight),u.push(g);let T=(S=l[f])==null?void 0:S.trim().toLowerCase();if(T){let _=Y5(T,r);c.push(_)}else c.push(0)});let d=ey(c,u);d>=a&&o.push({object:l,similarity:d})}),o.sort((l,c)=>c.similarity-l.similarity),o.map(l=>l.object)}function Y5(e,t){let n=ty(e),s=t.map(o=>{let a=n.map(r=>X5(r,o)),i=Math.max(...a);return i===a[0]?i*ny.FIRST_SIMILARITY:K5(i)});return ey(s)}function X5(e,t){let n=j5(e,t);return e.includes(t)?n*ny.CONTAINS_MATCH:n}const il=yo({name:"OnClickOutside",props:["as","options"],emits:["trigger"],setup(e,{slots:t,emit:n}){const s=X();return Wx(s,o=>{n("trigger",o)},e.options),()=>{if(t.default)return yn(e.as||"div",{ref:s},t.default())}}}),vg=qr?window:void 0;function Xi(e){var t;const n=Rn(e);return(t=n==null?void 0:n.$el)!=null?t:n}function Bu(...e){let t,n,s,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,o]=e,t=vg):[t,n,s,o]=e,!t)return wa;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const a=[],i=()=>{a.forEach(u=>u()),a.length=0},r=(u,d,m,f)=>(u.addEventListener(d,m,f),()=>u.removeEventListener(d,m,f)),l=ct(()=>[Xi(t),Rn(o)],([u,d])=>{if(i(),!u)return;const m=gT(d)?{...d}:d;a.push(...n.flatMap(f=>s.map(g=>r(u,f,g,m))))},{immediate:!0,flush:"post"}),c=()=>{l(),i()};return $a(c),c}let t1=!1;function n1(e,t,n={}){const{window:s=vg,ignore:o=[],capture:a=!0,detectIframe:i=!1}=n;if(!s)return wa;Zr&&!t1&&(t1=!0,Array.from(s.document.body.children).forEach(T=>T.addEventListener("click",wa)),s.document.documentElement.addEventListener("click",wa));let r=!0;const l=T=>Rn(o).some(S=>{if(typeof S=="string")return Array.from(s.document.querySelectorAll(S)).some(_=>_===T.target||T.composedPath().includes(_));{const _=Xi(S);return _&&(T.target===_||T.composedPath().includes(_))}});function c(T){const S=Rn(T);return S&&S.$.subTree.shapeFlag===16}function u(T,S){const _=Rn(T),E=_.$.subTree&&_.$.subTree.children;return E==null||!Array.isArray(E)?!1:E.some(b=>b.el===S.target||S.composedPath().includes(b.el))}const d=T=>{const S=Xi(e);if(T.target!=null&&!(!(S instanceof Element)&&c(e)&&u(e,T))&&!(!S||S===T.target||T.composedPath().includes(S))){if(T.detail===0&&(r=!l(T)),!r){r=!0;return}t(T)}};let m=!1;const f=[Bu(s,"click",T=>{m||(m=!0,setTimeout(()=>{m=!1},0),d(T))},{passive:!0,capture:a}),Bu(s,"pointerdown",T=>{const S=Xi(e);r=!l(T)&&!!(S&&!T.composedPath().includes(S))},{passive:!0}),i&&Bu(s,"blur",T=>{setTimeout(()=>{var S;const _=Xi(e);((S=s.document.activeElement)==null?void 0:S.tagName)==="IFRAME"&&!(_!=null&&_.contains(s.document.activeElement))&&t(T)},0)})].filter(Boolean);return()=>f.forEach(T=>T())}const Co={mounted(e,t){const n=!t.modifiers.bubble;if(typeof t.value=="function")e.__onClickOutside_stop=n1(e,t.value,{capture:n});else{const[s,o]=t.value;e.__onClickOutside_stop=n1(e,s,Object.assign({capture:n},o))}},unmounted(e){e.__onClickOutside_stop()}};function q5(){const e=X(!1),t=Id();return t&&dt(()=>{e.value=!0},t),e}function Z5(e){const t=q5();return C(()=>(t.value,!!e()))}function s1(e,t,n={}){const{window:s=vg,...o}=n;let a;const i=Z5(()=>s&&"ResizeObserver"in s),r=()=>{a&&(a.disconnect(),a=void 0)},l=C(()=>{const d=Rn(e);return Array.isArray(d)?d.map(m=>Xi(m)):[Xi(d)]}),c=ct(l,d=>{if(r(),i.value&&s){a=new ResizeObserver(t);for(const m of d)m&&a.observe(m,o)}},{immediate:!0,flush:"post"}),u=()=>{r(),c()};return $a(u),{isSupported:i,stop:u}}function Mh(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const Q5={mounted(e,t){typeof t.value=="function"?s1(e,t.value):s1(e,...t.value)}};function sy(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:sy(n)}}function J5(e){const t=e||window.event,n=t.target;return sy(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const Lh=new WeakMap;function e6(e,t=!1){const n=X(t);let s=null,o="";ct(vT(e),r=>{const l=Mh(Rn(r));if(l){const c=l;if(Lh.get(c)||Lh.set(c,c.style.overflow),c.style.overflow!=="hidden"&&(o=c.style.overflow),c.style.overflow==="hidden")return n.value=!0;if(n.value)return c.style.overflow="hidden"}},{immediate:!0});const a=()=>{const r=Mh(Rn(e));!r||n.value||(Zr&&(s=Bu(r,"touchmove",l=>{J5(l)},{passive:!1})),r.style.overflow="hidden",n.value=!0)},i=()=>{const r=Mh(Rn(e));!r||!n.value||(Zr&&(s==null||s()),r.style.overflow=o,Lh.delete(r),n.value=!1)};return $a(i),C({get(){return n.value},set(r){r?a():i()}})}function t6(){let e=!1;const t=X(!1);return(n,s)=>{if(t.value=s.value,e)return;e=!0;const o=e6(n,s.value);ct(t,a=>o.value=a)}}t6();const ay=Symbol("DropdownControl");function n6(){const e=_o(ay,null);if(e===null)throw new Error("Component is missing a parent <DropdownContainer /> component.");return e}function s6(e){Pn(ay,e)}const a6={class:"relative space-y-2"},o6={key:0,class:"absolute"},cr={__name:"DropdownContainer",emits:["close"],setup(e,{emit:t}){const n=t,[s,o]=es(!1),a=()=>{s.value&&(n("close"),o(!1))};return s6({isOpen:s,toggle:o,closeMenu:a}),(i,r)=>re((p(),v("div",a6,[We(i.$slots,"trigger",{isOpen:N(s),toggle:()=>N(o)()}),N(s)?(p(),v("div",o6,[We(i.$slots,"default")])):w("",!0)])),[[N(Co),a]])}},i6={class:"-mx-2 n-dropdown-section"},r6={key:0,class:"px-4 mb-3 mt-1 leading-4 font-medium tracking-[0.2px] text-n-slate-10 text-xs"},l6={class:"gap-2 grid reset-base list-none px-2"},rl={__name:"DropdownSection",props:{title:{type:String,default:""}},setup(e){return(t,n)=>(p(),v("div",i6,[e.title?(p(),v("div",r6,A(e.title),1)):w("",!0),h("ul",l6,[We(t.$slots,"default")])]))}},c6={class:"absolute"},ur={__name:"DropdownBody",props:{strong:{type:Boolean,default:!1}},setup(e){const t=C(()=>e.strong?"border-n-strong":"border-n-weak"),n=C(()=>e.strong?"before:content-['\0A0'] before:absolute before:bottom-0 before:left-0 before:w-full before:h-full before:rounded-xl before:backdrop-contrast-70 before:backdrop-blur-sm before:z-0 [&>*]:relative":"");return(s,o)=>(p(),v("div",c6,[h("ul",{class:se(["text-sm bg-n-alpha-3 backdrop-blur-[100px] border rounded-xl shadow-sm py-2 n-dropdown-body gap-2 grid list-none px-2 reset-base relative",[t.value,n.value]])},[We(s.$slots,"default")],2)]))}},u6={class:"n-dropdown-item"},Ra=Object.assign({inheritAttrs:!1},{__name:"DropdownItem",props:{label:{type:String,default:""},icon:{type:[String,Object,Function],default:""},link:{type:[String,Object],default:""},nativeLink:{type:Boolean,default:!1},click:{type:Function,default:null},preserveOpen:{type:Boolean,default:!1}},setup(e){const t=e,{closeMenu:n}=n6(),s=C(()=>t.link?t.nativeLink&&typeof t.link=="string"?"a":"router-link":t.click?"button":"div"),o=()=>{t.click&&t.click(),t.preserveOpen||n()};return(a,i)=>(p(),v("li",u6,[(p(),$(vs(s.value),fs(a.$attrs,{class:["flex text-left rtl:text-right items-center p-2 reset-base text-sm text-n-slate-12 w-full border-0",{"hover:bg-n-alpha-2 rounded-lg w-full gap-3":!a.$slots.default}],href:s.value==="a"?t.link:null,to:s.value==="router-link"?t.link:null,onClick:o}),{default:K(()=>[We(a.$slots,"default",{},()=>[We(a.$slots,"icon",{},()=>[e.icon?(p(),$(Rt,{key:0,class:"size-4 text-n-slate-11",icon:e.icon},null,8,["icon"])):w("",!0)]),We(a.$slots,"label",{},()=>[Re(A(e.label),1)])])]),_:3},16,["class","href","to"]))]))}}),d6={class:"text-n-slate-11"},p6={key:0,class:"relative"},h6=["placeholder"],Qm={__name:"SingleSelect",props:hn({options:{type:Array,required:!0},disableSearch:{type:Boolean,default:!1},placeholderIcon:{type:String,default:"i-lucide-plus"},placeholder:{type:String,default:""},placeholderTrailingIcon:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{t}=Me(),n=wn(e,"modelValue"),s=X(""),o=C(()=>e.options?_g(e.options,s.value,["name"]):[]),a=C(()=>{if(!e.options||!n.value)return null;const r=Array.isArray(n.value)?n.value[0]:n.value;return e.options.find(l=>l.id===r.id)}),i=r=>{const l={id:r.id,name:r.name};n.value&&n.value.id===l.id?n.value=null:n.value=l};return(r,l)=>(p(),$(cr,null,{trigger:K(({toggle:c})=>[a.value?(p(),$(oe,{key:0,sm:"",slate:"",faded:"",type:"button",icon:a.value.icon,label:a.value.name,onClick:c},null,8,["icon","label","onClick"])):(p(),$(oe,{key:1,sm:"",slate:"",faded:"",type:"button","trailing-icon":e.placeholderTrailingIcon,onClick:c},{icon:K(()=>[y(Rt,{icon:e.placeholderIcon,class:"text-n-slate-11"},null,8,["icon"])]),default:K(()=>[h("span",d6,A(e.placeholder||N(t)("COMBOBOX.PLACEHOLDER")),1)]),_:2},1032,["trailing-icon","onClick"]))]),default:K(()=>[y(ur,{class:"top-0 min-w-56 z-50",strong:""},{default:K(()=>[e.disableSearch?w("",!0):(p(),v("div",p6,[y(Rt,{class:"absolute size-4 left-2 top-2",icon:"i-lucide-search"}),re(h("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c),autofocus:"",class:"p-1.5 pl-8 text-n-slate-11 bg-n-alpha-1 rounded-lg w-full",placeholder:e.searchPlaceholder||N(t)("COMBOBOX.SEARCH_PLACEHOLDER")},null,8,h6),[[mt,s.value]])])),y(rl,{class:"max-h-80 overflow-scroll"},{default:K(()=>[o.value.length?(p(!0),v(pe,{key:0},Ne(o.value,c=>(p(),$(Ra,{key:c.id,icon:c.icon,onClick:u=>i(c)},{label:K(()=>[Re(A(c.name)+" ",1),a.value&&a.value.id===c.id?(p(),$(Rt,{key:0,icon:"i-lucide-check",class:"bg-n-blue-text pointer-events-none"})):w("",!0)]),_:2},1032,["icon","onClick"]))),128)):s.value?(p(),$(Ra,{key:1,disabled:""},{default:K(()=>[Re(A(N(t)("COMBOBOX.EMPTY_SEARCH_RESULTS",{searchTerm:s.value})),1)]),_:1})):(p(),$(Ra,{key:2,disabled:""},{default:K(()=>[Re(A(N(t)("COMBOBOX.EMPTY_STATE")),1)]),_:1}))]),_:1})]),_:1})]),_:1}))}},m6={class:"flex justify-end"},f6={class:"gap-2 w-full grid grid-cols-[3fr_1fr]"},g6={class:"rounded-xl border border-n-weak bg-n-solid-1 w-full text-sm text-n-slate-12 divide-y divide-n-weak"},_6={class:"p-3 h-12 flex items-center justify-between"},v6={class:"p-3 h-12 flex items-center justify-between"},b6={class:"flex gap-2"},E6={__name:"AutoResolve",setup(e){const{t}=Me(),n=X(0),s=X(ca.MINUTES),o=X(""),a=X({}),i=X(!1),r=X(!1),l=X(!1),{currentAccount:c,updateAccount:u}=zn(),d=Oe("labels/getLabels"),m=C(()=>{var E;return(E=d.value)!=null&&E.length?d.value.map(b=>({id:b.title,name:b.title,icon:yn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:b.color}})})):[]}),f=C(()=>{var E;return((E=a.value)==null?void 0:E.name)??null});ct([c,m],()=>{var O;const{auto_resolve_after:E,auto_resolve_message:b,auto_resolve_ignore_waiting:I,auto_resolve_label:R}=((O=c.value)==null?void 0:O.settings)||{};n.value=E,o.value=b,i.value=I,a.value=m.value.find(x=>x.name===R),n.value&&(n.value%(24*60)===0?s.value=ca.DAYS:n.value%60===0?s.value=ca.HOURS:s.value=ca.MINUTES),n.value&&(r.value=!0)},{deep:!0,immediate:!0});const g=async E=>{try{l.value=!0,await u(E,{silent:!0}),ce(t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.API.SUCCESS"))}catch{ce(t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.API.ERROR"))}finally{l.value=!1}},T=async()=>n.value<10?(ce(t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.ERROR")),Promise.resolve()):g({auto_resolve_after:n.value,auto_resolve_message:o.value,auto_resolve_ignore_waiting:i.value,auto_resolve_label:f.value}),S=async()=>(n.value=null,o.value="",g({auto_resolve_after:null,auto_resolve_message:"",auto_resolve_ignore_waiting:!1,auto_resolve_label:null})),_=async()=>{r.value||S()};return(E,b)=>(p(),$(ol,{title:N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.TITLE"),description:N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.NOTE"),"hide-content":!r.value,"with-border":""},{headerActions:K(()=>[h("div",m6,[y(fc,{modelValue:r.value,"onUpdate:modelValue":b[0]||(b[0]=I=>r.value=I),onChange:_},null,8,["modelValue"])])]),default:K(()=>[h("form",{class:"grid gap-5",onSubmit:Fe(T,["prevent"])},[y(_i,{label:N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.LABEL"),"help-message":N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.HELP")},{default:K(()=>[h("div",f6,[y(z5,{modelValue:n.value,"onUpdate:modelValue":b[1]||(b[1]=I=>n.value=I),unit:s.value,"onUpdate:unit":b[2]||(b[2]=I=>s.value=I),min:"0",max:"1438560",class:"w-full"},null,8,["modelValue","unit"])])]),_:1},8,["label","help-message"]),y(_i,{label:N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.LABEL"),"help-message":N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.HELP")},{default:K(()=>[y(Xd,{modelValue:o.value,"onUpdate:modelValue":b[3]||(b[3]=I=>o.value=I),class:"w-full",placeholder:N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label","help-message"]),y(_i,{label:N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.PREFERENCES")},{default:K(()=>[h("div",g6,[h("div",_6,[h("span",null,A(N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.IGNORE_WAITING.LABEL")),1),y(fc,{modelValue:i.value,"onUpdate:modelValue":b[4]||(b[4]=I=>i.value=I)},null,8,["modelValue"])]),h("div",v6,[h("span",null,A(N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.LABEL.LABEL")),1),y(Qm,{modelValue:a.value,"onUpdate:modelValue":b[5]||(b[5]=I=>a.value=I),options:m.value,placeholder:E.$t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.LABEL.PLACEHOLDER"),"placeholder-icon":"i-lucide-chevron-down","placeholder-trailing-icon":"",variant:"faded"},null,8,["modelValue","options","placeholder"])])])]),_:1},8,["label"]),h("div",b6,[y(oe,{blue:"",type:"submit","is-loading":l.value,label:N(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.UPDATE_BUTTON")},null,8,["is-loading","label"])])],32)]),_:1},8,["title","description","hide-content"]))}},T6={class:"flex justify-end"},y6={__name:"AudioTranscription",setup(e){const{t}=Me(),n=X(!1),{currentAccount:s,updateAccount:o}=zn();ct(s,()=>{var l;const{audio_transcriptions:r}=((l=s.value)==null?void 0:l.settings)||{};n.value=!!r},{deep:!0,immediate:!0});const a=async r=>{try{await o(r),ce(t("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.API.SUCCESS"))}catch{ce(t("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.API.ERROR"))}},i=async()=>a({audio_transcriptions:n.value});return(r,l)=>(p(),$(ol,{title:N(t)("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.TITLE"),description:N(t)("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.NOTE"),"with-border":""},{headerActions:K(()=>[h("div",T6,[y(fc,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=c=>n.value=c),onChange:i},null,8,["modelValue"])])]),_:1},8,["title","description"]))}},S6={components:{BaseSettingsHeader:Cs,NextButton:oe,AccountId:S5,BuildInfo:N5,AccountDelete:M5,AutoResolve:E6,AudioTranscription:y6,SectionLayout:ol,WithLabel:_i,NextInput:_n},setup(){const{updateUISettings:e}=ln(),{enabledLanguages:t}=Yd(),{accountId:n}=zn(),s=bt();return{updateUISettings:e,v$:s,enabledLanguages:t,accountId:n}},data(){return{id:"",name:"",locale:"en",domain:"",supportEmail:"",features:{}}},validations:{name:{required:Ye},locale:{required:Ye}},computed:{...lt({getAccount:"accounts/getAccount",uiFlags:"accounts/getUIFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",isOnChatwootCloud:"globalConfig/isOnChatwootCloud"}),showAutoResolutionConfig(){return this.isFeatureEnabledonAccount(this.accountId,_t.AUTO_RESOLVE_CONVERSATIONS)},showAudioTranscriptionConfig(){return this.isFeatureEnabledonAccount(this.accountId,_t.CAPTAIN)},languagesSortedByCode(){return[...this.enabledLanguages].sort((t,n)=>t.iso_639_1_code.localeCompare(n.iso_639_1_code))},isUpdating(){return this.uiFlags.isUpdating},featureInboundEmailEnabled(){var e;return!!((e=this.features)!=null&&e.inbound_emails)},featureCustomReplyDomainEnabled(){return this.featureInboundEmailEnabled&&!!this.features.custom_reply_domain},featureCustomReplyEmailEnabled(){return this.featureInboundEmailEnabled&&!!this.features.custom_reply_email},currentAccount(){return this.getAccount(this.accountId)||{}}},mounted(){this.initializeAccount()},methods:{async initializeAccount(){try{const{name:e,locale:t,id:n,domain:s,support_email:o,features:a}=this.getAccount(this.accountId);this.$root.$i18n.locale=t,this.name=e,this.locale=t,this.id=n,this.domain=s,this.supportEmail=o,this.features=a}catch{}},async updateAccount(){if(this.v$.$touch(),this.v$.$invalid){ce(this.$t("GENERAL_SETTINGS.FORM.ERROR"));return}try{await this.$store.dispatch("accounts/update",{locale:this.locale,name:this.name,domain:this.domain,support_email:this.supportEmail}),this.$root.$i18n.locale=this.locale,this.getAccount(this.id).locale=this.locale,this.updateDirectionView(this.locale),ce(this.$t("GENERAL_SETTINGS.UPDATE.SUCCESS"))}catch{ce(this.$t("GENERAL_SETTINGS.UPDATE.ERROR"))}},updateDirectionView(e){const t=uN(e);this.updateUISettings({rtl_view:t})}}},A6={class:"flex flex-col max-w-2xl mx-auto w-full"},I6={class:"flex-grow flex-shrink min-w-0 mt-3"},C6=["value"],O6={key:2};function N6(e,t,n,s,o,a){const i=M("BaseSettingsHeader"),r=M("NextInput"),l=M("WithLabel"),c=M("NextButton"),u=M("SectionLayout"),d=M("woot-loading-state"),m=M("AutoResolve"),f=M("AudioTranscription"),g=M("AccountId"),T=M("AccountDelete"),S=M("BuildInfo");return p(),v("div",A6,[y(i,{title:e.$t("GENERAL_SETTINGS.TITLE")},null,8,["title"]),h("div",I6,[y(u,{title:e.$t("GENERAL_SETTINGS.FORM.GENERAL_SECTION.TITLE"),description:e.$t("GENERAL_SETTINGS.FORM.GENERAL_SECTION.NOTE")},{default:K(()=>[e.uiFlags.isFetchingItem?w("",!0):(p(),v("form",{key:0,class:"grid gap-4",onSubmit:t[4]||(t[4]=Fe((..._)=>a.updateAccount&&a.updateAccount(..._),["prevent"]))},[y(l,{"has-error":s.v$.name.$error,label:e.$t("GENERAL_SETTINGS.FORM.NAME.LABEL"),"error-message":e.$t("GENERAL_SETTINGS.FORM.NAME.ERROR")},{default:K(()=>[y(r,{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=_=>o.name=_),type:"text",class:"w-full",placeholder:e.$t("GENERAL_SETTINGS.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.name.$touch},null,8,["modelValue","placeholder","onBlur"])]),_:1},8,["has-error","label","error-message"]),y(l,{"has-error":s.v$.locale.$error,label:e.$t("GENERAL_SETTINGS.FORM.LANGUAGE.LABEL"),"error-message":e.$t("GENERAL_SETTINGS.FORM.LANGUAGE.ERROR")},{default:K(()=>[re(h("select",{"onUpdate:modelValue":t[1]||(t[1]=_=>o.locale=_),class:"!mb-0 text-sm"},[(p(!0),v(pe,null,Ne(a.languagesSortedByCode,_=>(p(),v("option",{key:_.iso_639_1_code,value:_.iso_639_1_code},A(_.name),9,C6))),128))],512),[[gn,o.locale]])]),_:1},8,["has-error","label","error-message"]),a.featureCustomReplyDomainEnabled?(p(),$(l,{key:0,label:e.$t("GENERAL_SETTINGS.FORM.DOMAIN.LABEL")},{help:K(()=>[Re(A(a.featureInboundEmailEnabled&&e.$t("GENERAL_SETTINGS.FORM.FEATURES.INBOUND_EMAIL_ENABLED"))+" "+A(a.featureCustomReplyDomainEnabled&&e.$t("GENERAL_SETTINGS.FORM.FEATURES.CUSTOM_EMAIL_DOMAIN_ENABLED")),1)]),default:K(()=>[y(r,{modelValue:o.domain,"onUpdate:modelValue":t[2]||(t[2]=_=>o.domain=_),type:"text",class:"w-full",placeholder:e.$t("GENERAL_SETTINGS.FORM.DOMAIN.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):w("",!0),a.featureCustomReplyEmailEnabled?(p(),$(l,{key:1,label:e.$t("GENERAL_SETTINGS.FORM.SUPPORT_EMAIL.LABEL")},{default:K(()=>[y(r,{modelValue:o.supportEmail,"onUpdate:modelValue":t[3]||(t[3]=_=>o.supportEmail=_),type:"text",class:"w-full",placeholder:e.$t("GENERAL_SETTINGS.FORM.SUPPORT_EMAIL.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):w("",!0),h("div",null,[y(c,{blue:"","is-loading":a.isUpdating,type:"submit"},{default:K(()=>[Re(A(e.$t("GENERAL_SETTINGS.SUBMIT")),1)]),_:1},8,["is-loading"])])],32))]),_:1},8,["title","description"]),e.uiFlags.isFetchingItem?(p(),$(d,{key:0})):w("",!0)]),a.showAutoResolutionConfig?(p(),$(m,{key:0})):w("",!0),a.showAudioTranscriptionConfig?(p(),$(f,{key:1})):w("",!0),y(g),!e.uiFlags.isFetchingItem&&e.isOnChatwootCloud?(p(),v("div",O6,[y(T)])):w("",!0),y(S)])}const w6=Ae(S6,[["render",N6]]),R6={class:"flex flex-col w-full h-full m-0 p-6 sm:py-8 lg:px-16 overflow-auto bg-n-background font-inter"},x6={class:"flex items-start w-full max-w-6xl mx-auto"},ea={__name:"SettingsWrapper",props:{keepAlive:{type:Boolean,default:!0}},setup(e){return(t,n)=>{const s=M("router-view");return p(),v("div",R6,[h("div",x6,[y(s,null,{default:K(({Component:o})=>[e.keepAlive?(p(),$(Od,{key:0},[(p(),$(vs(o)))],1024)):(p(),$(vs(o),{key:1}))]),_:1})])])}}},$6={routes:[{path:At("accounts/:accountId/settings/general"),meta:{permissions:["administrator"]},component:ea,children:[{path:"",name:"general_settings_index",component:w6,meta:{permissions:["administrator"]}}]}]},M6={class:"flex flex-col h-auto overflow-auto"},L6={class:"w-full"},k6=["placeholder"],D6={class:"w-full"},P6=["value"],B6={key:0,class:"message"},F6={class:"w-full"},U6=["placeholder"],G6={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"},V6={__name:"AddAgent",emits:["close"],setup(e,{emit:t}){const n=t,s=pt(),{t:o}=Me(),a=X(""),i=X(""),r=X("agent"),c=bt({agentName:{required:Ye},agentEmail:{required:Ye,email:Ii},selectedRoleId:{required:Ye}},{agentName:a,agentEmail:i,selectedRoleId:r}),u=Oe("agents/getUIFlags"),d=Oe("customRole/getCustomRoles"),m=C(()=>{const T=[{id:"administrator",name:"administrator",label:o("AGENT_MGMT.AGENT_TYPES.ADMINISTRATOR")},{id:"agent",name:"agent",label:o("AGENT_MGMT.AGENT_TYPES.AGENT")}],S=d.value.map(_=>({id:_.id,name:`custom_${_.id}`,label:_.name}));return[...T,...S]}),f=C(()=>m.value.find(T=>T.id===r.value||T.name===r.value)),g=async()=>{var T;if(c.value.$touch(),!c.value.$invalid)try{const S={name:a.value,email:i.value};f.value.name.startsWith("custom_")?S.custom_role_id=f.value.id:S.role=f.value.name,await s.dispatch("agents/create",S),ce(o("AGENT_MGMT.ADD.API.SUCCESS_MESSAGE")),n("close")}catch(S){const{response:{data:{error:_="",attributes:E=[],message:b=""}={}}={}}=S;let I="";((T=S==null?void 0:S.response)==null?void 0:T.status)===422&&!E.includes("base")?I=o("AGENT_MGMT.ADD.API.EXIST_MESSAGE"):I=o("AGENT_MGMT.ADD.API.ERROR_MESSAGE"),ce(_||b||I)}};return(T,S)=>{const _=M("woot-modal-header");return p(),v("div",M6,[y(_,{"header-title":T.$t("AGENT_MGMT.ADD.TITLE"),"header-content":T.$t("AGENT_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),h("form",{class:"flex flex-col items-start w-full",onSubmit:Fe(g,["prevent"])},[h("div",L6,[h("label",{class:se({error:N(c).agentName.$error})},[Re(A(T.$t("AGENT_MGMT.ADD.FORM.NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":S[0]||(S[0]=E=>a.value=E),type:"text",placeholder:T.$t("AGENT_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onInput:S[1]||(S[1]=(...E)=>N(c).agentName.$touch&&N(c).agentName.$touch(...E))},null,40,k6),[[mt,a.value]])],2)]),h("div",D6,[h("label",{class:se({error:N(c).selectedRoleId.$error})},[Re(A(T.$t("AGENT_MGMT.ADD.FORM.AGENT_TYPE.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":S[2]||(S[2]=E=>r.value=E),onChange:S[3]||(S[3]=(...E)=>N(c).selectedRoleId.$touch&&N(c).selectedRoleId.$touch(...E))},[(p(!0),v(pe,null,Ne(m.value,E=>(p(),v("option",{key:E.id,value:E.id},A(E.label),9,P6))),128))],544),[[gn,r.value]]),N(c).selectedRoleId.$error?(p(),v("span",B6,A(T.$t("AGENT_MGMT.ADD.FORM.AGENT_TYPE.ERROR")),1)):w("",!0)],2)]),h("div",F6,[h("label",{class:se({error:N(c).agentEmail.$error})},[Re(A(T.$t("AGENT_MGMT.ADD.FORM.EMAIL.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":S[4]||(S[4]=E=>i.value=E),type:"email",placeholder:T.$t("AGENT_MGMT.ADD.FORM.EMAIL.PLACEHOLDER"),onInput:S[5]||(S[5]=(...E)=>N(c).agentEmail.$touch&&N(c).agentEmail.$touch(...E))},null,40,U6),[[mt,i.value]])],2)]),h("div",G6,[y(oe,{faded:"",slate:"",type:"reset",label:T.$t("AGENT_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:S[6]||(S[6]=Fe(E=>n("close"),["prevent"]))},null,8,["label"]),y(oe,{type:"submit",label:T.$t("AGENT_MGMT.ADD.FORM.SUBMIT"),disabled:N(c).$invalid||N(u).isCreating,"is-loading":N(u).isCreating},null,8,["label","disabled","is-loading"])])],32)])}}},H6={class:"flex flex-col h-auto overflow-auto"},W6={class:"w-full"},z6=["placeholder"],j6={class:"w-full"},K6=["value"],Y6={key:0,class:"message"},X6={class:"w-full"},q6=["value"],Z6={key:0,class:"message"},Q6={class:"flex flex-row justify-start w-full gap-2 px-0 py-2"},J6={class:"w-[50%] ltr:text-left rtl:text-right"},eB={class:"w-[50%] flex justify-end items-center gap-2"},tB={__name:"EditAgent",props:{id:{type:Number,required:!0},name:{type:String,required:!0},email:{type:String,default:""},type:{type:String,default:""},availability:{type:String,default:""},customRoleId:{type:Number,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{AVAILABILITY_STATUS_KEYS:o}=It,a=pt(),{t:i}=Me(),r=X(n.name),l=X(n.availability),c=X(n.customRoleId||n.type),u=X({email:n.email}),d={agentName:{required:Ye,minLength:Qt(1)},selectedRoleId:{required:Ye},agentAvailability:{required:Ye}},m=bt(d,{agentName:r,selectedRoleId:c,agentAvailability:l}),f=C(()=>`${i("AGENT_MGMT.EDIT.TITLE")} - ${n.name}`),g=Oe("agents/getUIFlags"),T=Oe("customRole/getCustomRoles"),S=C(()=>{const O=[{id:"administrator",name:"administrator",label:i("AGENT_MGMT.AGENT_TYPES.ADMINISTRATOR")},{id:"agent",name:"agent",label:i("AGENT_MGMT.AGENT_TYPES.AGENT")}],x=T.value.map(L=>({id:L.id,name:`custom_${L.id}`,label:L.name}));return[...O,...x]}),_=C(()=>S.value.find(O=>O.id===c.value||O.name===c.value)),E=C(()=>[i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]),b=C(()=>E.value.map((O,x)=>({label:O,value:o[x],disabled:n.availability===o[x]}))),I=async()=>{if(m.value.$touch(),!m.value.$invalid)try{const O={id:n.id,name:r.value,availability:l.value};_.value.name.startsWith("custom_")?O.custom_role_id=_.value.id:(O.role=_.value.name,O.custom_role_id=null),await a.dispatch("agents/update",O),ce(i("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE")),s("close")}catch{ce(i("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}},R=async()=>{try{await Kr.resetPassword(u.value),ce(i("AGENT_MGMT.EDIT.PASSWORD_RESET.ADMIN_SUCCESS_MESSAGE"))}catch{ce(i("AGENT_MGMT.EDIT.PASSWORD_RESET.ERROR_MESSAGE"))}};return(O,x)=>{const L=M("woot-modal-header");return p(),v("div",H6,[y(L,{"header-title":f.value},null,8,["header-title"]),h("form",{class:"w-full",onSubmit:Fe(I,["prevent"])},[h("div",W6,[h("label",{class:se({error:N(m).agentName.$error})},[Re(A(O.$t("AGENT_MGMT.EDIT.FORM.NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":x[0]||(x[0]=F=>r.value=F),type:"text",placeholder:O.$t("AGENT_MGMT.EDIT.FORM.NAME.PLACEHOLDER"),onInput:x[1]||(x[1]=(...F)=>N(m).agentName.$touch&&N(m).agentName.$touch(...F))},null,40,z6),[[mt,r.value]])],2)]),h("div",j6,[h("label",{class:se({error:N(m).selectedRoleId.$error})},[Re(A(O.$t("AGENT_MGMT.EDIT.FORM.AGENT_TYPE.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":x[2]||(x[2]=F=>c.value=F),onChange:x[3]||(x[3]=(...F)=>N(m).selectedRoleId.$touch&&N(m).selectedRoleId.$touch(...F))},[(p(!0),v(pe,null,Ne(S.value,F=>(p(),v("option",{key:F.id,value:F.id},A(F.label),9,K6))),128))],544),[[gn,c.value]]),N(m).selectedRoleId.$error?(p(),v("span",Y6,A(O.$t("AGENT_MGMT.EDIT.FORM.AGENT_TYPE.ERROR")),1)):w("",!0)],2)]),h("div",X6,[h("label",{class:se({error:N(m).agentAvailability.$error})},[Re(A(O.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":x[4]||(x[4]=F=>l.value=F),onChange:x[5]||(x[5]=(...F)=>N(m).agentAvailability.$touch&&N(m).agentAvailability.$touch(...F))},[(p(!0),v(pe,null,Ne(b.value,F=>(p(),v("option",{key:F.value,value:F.value},A(F.label),9,q6))),128))],544),[[gn,l.value]]),N(m).agentAvailability.$error?(p(),v("span",Z6,A(O.$t("AGENT_MGMT.EDIT.FORM.AGENT_AVAILABILITY.ERROR")),1)):w("",!0)],2)]),h("div",Q6,[h("div",J6,[y(oe,{ghost:"",type:"button",icon:"i-lucide-lock-keyhole",class:"!px-2",label:O.$t("AGENT_MGMT.EDIT.PASSWORD_RESET.ADMIN_RESET_BUTTON"),onClick:Fe(R,["prevent"])},null,8,["label"])]),h("div",eB,[y(oe,{faded:"",slate:"",type:"reset",label:O.$t("AGENT_MGMT.EDIT.CANCEL_BUTTON_TEXT"),onClick:x[6]||(x[6]=Fe(F=>s("close"),["prevent"]))},null,8,["label"]),y(oe,{type:"submit",label:O.$t("AGENT_MGMT.EDIT.FORM.SUBMIT"),disabled:N(m).$invalid||N(g).isUpdating,"is-loading":N(g).isUpdating},null,8,["label","disabled","is-loading"])])])],32)])}}},nB={class:"flex flex-col w-full h-full gap-8 font-inter"},sB={key:1,class:"flex-1 py-20 text-slate-700 dark:text-slate-100 flex items-center justify-center text-base"},Da={__name:"SettingsLayout",props:{isLoading:{type:Boolean,default:!1},noRecordsFound:{type:Boolean,default:!1},loadingMessage:{type:String,default:""},noRecordsMessage:{type:String,default:""}},setup(e){return(t,n)=>{const s=M("woot-loading-state");return p(),v("div",nB,[We(t.$slots,"header"),h("div",null,[We(t.$slots,"preBody"),e.isLoading?We(t.$slots,"loading",{key:0},()=>[y(s,{message:e.loadingMessage},null,8,["message"])]):e.noRecordsFound?(p(),v("p",sB,A(e.noRecordsMessage),1)):We(t.$slots,"body",{key:2}),We(t.$slots,"default")])])}}},aB={class:"divide-y divide-slate-75 dark:divide-slate-700"},oB={class:"divide-y divide-n-weak text-n-slate-11"},iB={class:"py-4 ltr:pr-4 rtl:pl-4"},rB={class:"flex flex-row items-center gap-4"},lB={class:"block font-medium capitalize"},cB={class:"relative py-4 ltr:pr-4 rtl:pl-4"},uB={class:"flex flex-col gap-1 p-4"},dB={class:"font-semibold"},pB={class:"pl-4 mb-0 list-disc"},hB={class:"py-4 ltr:pr-4 rtl:pl-4"},mB={key:0},fB={key:1},gB={class:"py-4"},_B={class:"flex justify-end gap-1"},vB={__name:"Index",setup(e){const t=nn(),n=pt(),{t:s}=Me(),o=X({}),a=X(!1),i=X(!1),r=X(!1),l=X({message:""}),c=X({}),u=C(()=>`${s("AGENT_MGMT.DELETE.CONFIRM.YES")} ${c.value.name}`),d=C(()=>`${s("AGENT_MGMT.DELETE.CONFIRM.NO")} ${c.value.name}`),m=C(()=>` ${c.value.name}?`),f=C(()=>t["agents/getAgents"].value),g=C(()=>t["agents/getUIFlags"].value),T=C(()=>t.getCurrentUserID.value),S=Oe("customRole/getCustomRoles");dt(()=>{n.dispatch("agents/get"),n.dispatch("customRole/getCustomRole")});const _=j=>S.value.find(z=>z.id===j.custom_role_id),E=j=>{if(!j.custom_role_id)return s(`AGENT_MGMT.AGENT_TYPES.${j.role.toUpperCase()}`);const z=_(j);return z?z.name:""},b=j=>{if(!j.custom_role_id)return[];const z=_(j);return(z==null?void 0:z.permissions)||[]},I=C(()=>f.value.filter(j=>j.role==="administrator"&&j.confirmed)),R=j=>T.value!==j.id,O=j=>T.value===j.id?!1:j.confirmed&&j.role==="administrator"?I.value.length!==1:!0,x=j=>{o.value[c.value.id]=!1,c.value={},l.value.message=j,ce(j)},L=()=>{a.value=!0},F=()=>{a.value=!1},D=j=>{r.value=!0,c.value=j},V=()=>{r.value=!1},B=j=>{i.value=!0,c.value=j},P=()=>{i.value=!1},k=async j=>{try{await n.dispatch("agents/delete",j),x(s("AGENT_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{x(s("AGENT_MGMT.DELETE.API.ERROR_MESSAGE"))}},U=()=>{o.value[c.value.id]=!0,P(),k(c.value.id)};return(j,z)=>{const Y=M("woot-modal"),te=M("woot-delete-modal"),Z=qe("tooltip");return p(),$(Da,{"is-loading":g.value.isFetching,"loading-message":j.$t("AGENT_MGMT.LOADING"),"no-records-found":!f.value.length,"no-records-message":j.$t("AGENT_MGMT.LIST.404")},{header:K(()=>[y(Cs,{title:j.$t("AGENT_MGMT.HEADER"),description:j.$t("AGENT_MGMT.DESCRIPTION"),"link-text":j.$t("AGENT_MGMT.LEARN_MORE"),"feature-name":"agents"},{actions:K(()=>[y(oe,{icon:"i-lucide-circle-plus",label:j.$t("AGENT_MGMT.HEADER_BTN_TXT"),onClick:L},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:K(()=>[h("table",aB,[h("tbody",oB,[(p(!0),v(pe,null,Ne(f.value,(G,H)=>(p(),v("tr",{key:G.email},[h("td",iB,[h("div",rB,[y(Hn,{src:G.thumbnail,username:G.name,size:"40px",status:G.availability_status},null,8,["src","username","status"]),h("div",null,[h("span",lB,A(G.name),1),h("span",null,A(G.email),1)])])]),h("td",cB,[h("span",{class:se(["block font-medium w-fit",{"hover:text-gray-900 group cursor-pointer":G.custom_role_id}])},[Re(A(E(G))+" ",1),h("div",{class:se(["absolute left-0 z-10 hidden max-w-[300px] w-auto bg-white rounded-xl border border-slate-50 shadow-lg top-14 md:top-12 dark:bg-slate-800 dark:border-slate-700",{"group-hover:block":G.custom_role_id}])},[h("div",uB,[h("span",dB,A(j.$t("AGENT_MGMT.LIST.AVAILABLE_CUSTOM_ROLE")),1),h("ul",pB,[(p(!0),v(pe,null,Ne(b(G),W=>(p(),v("li",{key:W,class:"font-normal"},A(j.$t(`CUSTOM_ROLE.PERMISSIONS.${W.toUpperCase()}`)),1))),128))])])],2)],2)]),h("td",hB,[G.confirmed?(p(),v("span",mB,A(j.$t("AGENT_MGMT.LIST.VERIFIED")),1)):w("",!0),G.confirmed?w("",!0):(p(),v("span",fB,A(j.$t("AGENT_MGMT.LIST.VERIFICATION_PENDING")),1))]),h("td",gB,[h("div",_B,[R(G)?re((p(),$(oe,{key:0,icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:W=>D(G)},null,8,["onClick"])),[[Z,j.$t("AGENT_MGMT.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]):w("",!0),O(G)?re((p(),$(oe,{key:1,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":o.value[G.id],onClick:W=>B(G,H)},null,8,["is-loading","onClick"])),[[Z,j.$t("AGENT_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):w("",!0)])])]))),128))])])]),default:K(()=>[y(Y,{show:a.value,"onUpdate:show":z[0]||(z[0]=G=>a.value=G),"on-close":F},{default:K(()=>[y(V6,{onClose:F})]),_:1},8,["show"]),y(Y,{show:r.value,"onUpdate:show":z[1]||(z[1]=G=>r.value=G),"on-close":V},{default:K(()=>[r.value?(p(),$(tB,{key:0,id:c.value.id,name:c.value.name,type:c.value.role,email:c.value.email,availability:c.value.availability_status,"custom-role-id":c.value.custom_role_id,onClose:V},null,8,["id","name","type","email","availability","custom-role-id"])):w("",!0)]),_:1},8,["show"]),y(te,{show:i.value,"onUpdate:show":z[2]||(z[2]=G=>i.value=G),"on-close":P,"on-confirm":U,title:j.$t("AGENT_MGMT.DELETE.CONFIRM.TITLE"),message:j.$t("AGENT_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":m.value,"confirm-text":u.value,"reject-text":d.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},bB={routes:[{path:At("accounts/:accountId/settings/agents"),component:ea,children:[{path:"",redirect:e=>({name:"agent_list",params:e.params})},{path:"list",name:"agent_list",component:vB,meta:{featureFlag:_t.AGENT_MANAGEMENT,permissions:["administrator"]}}]}]},EB=["src","alt"],ts={__name:"Avatar",props:{src:{type:String,default:""},name:{type:String,required:!0},size:{type:Number,default:32},allowUpload:{type:Boolean,default:!1},roundedFull:{type:Boolean,default:!1},status:{type:String,default:null,validator:e=>!e||It.AVAILABILITY_STATUS_KEYS.includes(e)},iconName:{type:String,default:null}},emits:["upload","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(!0),i=X(null),r={dark:[["#4B143D","#FF8DCC"],["#3F220D","#FFA366"],["#2A2A2A","#ADB1B8"],["#023B37","#0BD8B6"],["#27264D","#A19EFF"],["#1D2E62","#9EB1FF"]],light:[["#FBDCEF","#C2298A"],["#FFE0BB","#99543A"],["#E8E8E8","#60646C"],["#CCF3EA","#008573"],["#EBEBFE","#4747C2"],["#E1E9FF","#3A5BC7"]],default:{bg:"#E8E8E8",text:"#60646C"}},l={online:"bg-n-teal-10",busy:"bg-n-amber-10",offline:"bg-n-slate-10"},c=C(()=>!n.src&&!n.name),u=C(()=>{if(!n.name)return"";const O=bO(n.name).split(/\s+/);return O.length===1?O[0].charAt(0).toUpperCase():O.slice(0,2).map(x=>x.charAt(0)).join("").toUpperCase()}),d=C(()=>{if(!n.name)return r.default;const O=n.name.length%r.light.length;return{bg:r.light[O][0],darkBg:r.dark[O][0],text:r.light[O][1],darkText:r.dark[O][1]}}),m=C(()=>({width:`${n.size}px`,height:`${n.size}px`})),f=C(()=>({...m.value,backgroundColor:!c.value&&(!n.src||!a.value)?d.value.bg:void 0,color:!c.value&&(!n.src||!a.value)?d.value.text:void 0,"--dark-bg":d.value.darkBg,"--dark-text":d.value.darkText})),g=C(()=>{const O=Math.max(n.size*.35,8);return{width:`${O}px`,height:`${O}px`,top:`${n.size-O/1.1}px`,left:`${n.size-O/1.1}px`}}),T=C(()=>({fontSize:`${n.size/1.6}px`})),S=C(()=>({fontSize:`${Math.min(n.size/2.5,24)}px`})),_=()=>{a.value=!1},E=()=>{i.value.click()},b=O=>{const[x]=O.target.files;x&&s("upload",{file:x,url:x?URL.createObjectURL(x):null})},I=()=>{i.value&&(i.value.value=null),s("delete")},R=O=>{O.stopPropagation(),I()};return ct(()=>n.src,()=>{a.value=!0}),(O,x)=>{const L=qe("tooltip");return p(),v("span",{class:"relative inline-flex group/avatar z-0",style:Ht(m.value)},[We(O.$slots,"badge",{size:e.size},()=>[e.status?(p(),v("div",{key:0,class:se(["absolute z-20 border rounded-full border-n-slate-3",l[e.status]]),style:Ht(g.value)},null,6)):w("",!0)]),e.src&&e.allowUpload?(p(),v("div",{key:0,class:"absolute z-20 flex items-center justify-center invisible w-6 h-6 transition-all duration-300 ease-in-out opacity-0 cursor-pointer outline outline-1 outline-n-container -top-2 -right-2 rounded-xl bg-n-solid-3 group-hover/avatar:visible group-hover/avatar:opacity-100",onClick:R},[y(Rt,{icon:"i-lucide-x",class:"text-n-slate-11 size-4"})])):w("",!0),h("span",{role:"img",class:se(["relative inline-flex items-center justify-center object-cover overflow-hidden font-medium",[e.roundedFull?"rounded-full":"rounded-xl",{"dark:!bg-[var(--dark-bg)] dark:!text-[var(--dark-text)]":!c.value&&(!e.src||!a.value),"bg-n-slate-3 dark:bg-n-slate-4":c.value}]]),style:Ht(f.value)},[e.src&&a.value?(p(),v("img",{key:0,src:e.src,alt:e.name,onError:_},null,40,EB)):(p(),v(pe,{key:1},[e.iconName?(p(),$(Rt,{key:0,icon:e.iconName,style:Ht(T.value)},null,8,["icon","style"])):c.value?re((p(),$(Rt,{key:2,icon:"i-lucide-user",style:Ht(T.value)},null,8,["style"])),[[L,N(o)("THUMBNAIL.AUTHOR.NOT_AVAILABLE"),void 0,{"top-start":!0}]]):(p(),v("span",{key:1,style:Ht(S.value),class:"select-none"},A(u.value),5))],64)),e.allowUpload?(p(),v("div",{key:2,class:"absolute inset-0 z-10 flex items-center justify-center invisible w-full h-full transition-all duration-300 ease-in-out opacity-0 rounded-xl bg-n-alpha-black1 group-hover/avatar:visible group-hover/avatar:opacity-100",onClick:E},[y(Rt,{icon:"i-lucide-upload",class:"text-white",style:Ht({width:`${e.size/2}px`,height:`${e.size/2}px`})},null,8,["style"]),h("input",{ref_key:"fileInput",ref:i,type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",class:"hidden",onChange:b},null,544)])):w("",!0)],6)],4)}}},TB=["dir"],gc={__name:"TeleportWithDirection",props:{to:{type:String,default:"body"}},setup(e){const t=Oe("accounts/isRTL"),n=C(()=>t.value?"rtl":"ltr");return(s,o)=>(p(),$(l0,{to:e.to},[h("div",{dir:n.value},[We(s.$slots,"default")],8,TB)],8,["to"]))}},yB={key:0,class:"flex flex-col gap-2"},SB={class:"text-base font-medium leading-6 text-n-slate-12"},AB={key:0,class:"mb-0 text-sm text-n-slate-11"},IB={key:0,class:"flex items-center justify-between w-full gap-3"},CB={__name:"Dialog",props:{type:{type:String,default:"edit",validator:e=>["alert","edit"].includes(e)},title:{type:String,default:""},description:{type:String,default:""},cancelButtonLabel:{type:String,default:""},confirmButtonLabel:{type:String,default:""},disableConfirmButton:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},showCancelButton:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0},overflowYAuto:{type:Boolean,default:!1},width:{type:String,default:"lg",validator:e=>["3xl","2xl","xl","lg","md","sm"].includes(e)}},emits:["confirm","close"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=X(null),r=X(null),l=C(()=>({"3xl":"max-w-3xl","2xl":"max-w-2xl",xl:"max-w-xl",lg:"max-w-lg",md:"max-w-md",sm:"max-w-sm"})[s.width]??"max-w-md"),c=()=>{var m;(m=i.value)==null||m.showModal()},u=()=>{var m;o("close"),(m=i.value)==null||m.close()},d=()=>{o("confirm")};return t({open:c,close:u}),(m,f)=>(p(),$(gc,{to:"body"},{default:K(()=>[h("dialog",{ref_key:"dialogRef",ref:i,class:se(["w-full transition-all duration-300 ease-in-out shadow-xl rounded-xl",[l.value,e.overflowYAuto?"overflow-y-auto":"overflow-visible"]]),onClose:u},[y(N(il),{onTrigger:u},{default:K(()=>[h("form",{ref_key:"dialogContentRef",ref:r,class:"flex flex-col w-full h-auto gap-6 p-6 overflow-visible text-left align-middle transition-all duration-300 ease-in-out transform bg-n-alpha-3 backdrop-blur-[100px] shadow-xl rounded-xl",onSubmit:Fe(d,["prevent"]),onClick:f[0]||(f[0]=Fe(()=>{},["stop"]))},[e.title||e.description?(p(),v("div",yB,[h("h3",SB,A(e.title),1),We(m.$slots,"description",{},()=>[e.description?(p(),v("p",AB,A(e.description),1)):w("",!0)],!0)])):w("",!0),We(m.$slots,"default",{},void 0,!0),We(m.$slots,"footer",{},()=>[e.showCancelButton||e.showConfirmButton?(p(),v("div",IB,[e.showCancelButton?(p(),$(oe,{key:0,variant:"faded",color:"slate",label:e.cancelButtonLabel||N(a)("DIALOG.BUTTONS.CANCEL"),class:"w-full",type:"button",onClick:u},null,8,["label"])):w("",!0),e.showConfirmButton?(p(),$(oe,{key:1,color:e.type==="edit"?"blue":"ruby",label:e.confirmButtonLabel||N(a)("DIALOG.BUTTONS.CONFIRM"),class:"w-full","is-loading":e.isLoading,disabled:e.disableConfirmButton||e.isLoading,type:"submit"},null,8,["color","label","is-loading","disabled"])):w("",!0)])):w("",!0)],!0)],544)]),_:3})],34)]),_:3}))}},cs=Ae(CB,[["__scopeId","data-v-f5d3be8b"]]),OB={key:0,class:"absolute mt-1 w-full text-[10px] text-center text-n-slate-10"},NB={__name:"ConfirmButton",props:{label:{type:[String,Number],default:""},confirmLabel:{type:[String,Number],default:""},color:{type:String,default:"blue"},confirmColor:{type:String,default:"ruby"},confirmHint:{type:String,default:""},variant:{type:String,default:null},size:{type:String,default:null},justify:{type:String,default:null},icon:{type:[String,Object,Function],default:""},trailingIcon:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const n=e,s=t,o=X(!1),a=X(!1),i=C(()=>o.value?n.confirmLabel:n.label),r=C(()=>o.value?n.confirmColor:n.color),l=()=>{o.value=!1,a.value=!1},c=()=>{o.value?(a.value=!0,s("click"),setTimeout(l,400)):o.value=!0};return(u,d)=>(p(),v("div",{class:se(["relative",{"animate-bounce-complete":a.value}])},[y(oe,{type:"button",label:i.value,color:r.value,variant:e.variant,size:e.size,justify:e.justify,icon:e.icon,"trailing-icon":e.trailingIcon,"is-loading":e.isLoading,onClick:c,onBlur:l},vo({_:2},[u.$slots.default?{name:"default",fn:K(()=>[We(u.$slots,"default",{},void 0,!0)]),key:"0"}:void 0,u.$slots.icon?{name:"icon",fn:K(()=>[We(u.$slots,"icon",{},void 0,!0)]),key:"1"}:void 0]),1032,["label","color","variant","size","justify","icon","trailing-icon","is-loading"]),o.value&&e.confirmHint?(p(),v("div",OB,A(e.confirmHint),1)):w("",!0)],2))}},wB=Ae(NB,[["__scopeId","data-v-92d5b1e7"]]),RB={class:"flex flex-row justify-between gap-4"},xB={class:"flex flex-row gap-2"},Jm={__name:"AccessToken",props:{value:{type:String,default:""},showResetButton:{type:Boolean,default:!0}},emits:["onCopy","onReset"],setup(e,{emit:t}){const n=e,s=t,o=X("password"),a=()=>{o.value=o.value==="password"?"text":"password"},i=C(()=>o.value==="password"?"eye-hide":"eye-show"),r=()=>{s("onCopy",n.value)},l=()=>{s("onReset")};return(c,u)=>{const d=M("fluent-icon"),m=M("woot-input");return p(),v("div",RB,[y(m,{name:"access_token",class:"flex-1 [&>input]:!py-1.5 ltr:[&>input]:!pr-9 ltr:[&>input]:!pl-3 rtl:[&>input]:!pl-9 rtl:[&>input]:!pr-3 focus:[&>input]:!border-slate-200 focus:[&>input]:dark:!border-slate-600 [&>input]:cursor-not-allowed relative",styles:{borderRadius:"12px",fontSize:"14px",marginBottom:"2px"},type:o.value,"model-value":e.value,readonly:""},{masked:K(()=>[h("button",{class:"absolute top-0 bottom-0 ltr:right-0.5 rtl:left-0.5",type:"button",onClick:a},[y(d,{icon:i.value,size:16},null,8,["icon"])])]),_:1},8,["type","model-value"]),h("div",xB,[y(oe,{label:c.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.COPY"),slate:"",outline:"",type:"button",icon:"i-lucide-copy",class:"rounded-xl",onClick:r},null,8,["label"]),e.showResetButton?(p(),$(wB,{key:0,label:c.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET"),"confirm-label":c.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.CONFIRM_RESET"),"confirm-hint":c.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.CONFIRM_HINT"),color:"slate","confirm-color":"ruby",variant:"outline",icon:"i-lucide-key-round",class:"rounded-xl",onClick:l},null,8,["label","confirm-label","confirm-hint"])):w("",!0)])])}}},$B={key:0,class:"flex flex-col gap-4"},MB={class:"mb-2 flex flex-col items-start"},LB={class:"mb-2 text-sm font-medium text-n-slate-12"},kB={key:1,class:"flex flex-col gap-1"},DB={key:0,class:"mb-0.5 text-sm font-medium text-n-slate-12"},PB={class:"flex items-center justify-end w-full gap-2 px-0 py-2"},BB={__name:"AgentBotModal",props:{type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)},selectedBot:{type:Object,default:()=>({})}},setup(e,{expose:t}){const n=e,s={CREATE:"create",EDIT:"edit"},o=pt(),{t:a}=Me(),i=X(null),r=Oe("agentBots/getUIFlags"),l=ls({botName:"",botDescription:"",botUrl:"",botAvatar:null,botAvatarUrl:""}),[c,u]=es(),d=X(""),m=bt({botName:{required:Hl.withMessage(()=>a("AGENT_BOTS.FORM.ERRORS.NAME"),Ye)},botUrl:{required:Hl.withMessage(()=>a("AGENT_BOTS.FORM.ERRORS.URL"),Ye),url:Hl.withMessage(()=>a("AGENT_BOTS.FORM.ERRORS.VALID_URL"),Ic)}},l),f=C(()=>n.type===s.CREATE?r.value.isCreating:r.value.isUpdating),g=C(()=>c.value?a("AGENT_BOTS.ACCESS_TOKEN.TITLE"):n.type===s.CREATE?a("AGENT_BOTS.ADD.TITLE"):a("AGENT_BOTS.EDIT.TITLE")),T=C(()=>c.value?a("AGENT_BOTS.ACCESS_TOKEN.DESCRIPTION"):""),S=C(()=>n.type===s.CREATE?a("AGENT_BOTS.FORM.CREATE"):a("AGENT_BOTS.FORM.UPDATE")),_=C(()=>{var P;return m.value.botName.$error?(P=m.value.botName.$errors[0])==null?void 0:P.$message:""}),E=C(()=>{var P;return m.value.botUrl.$error?(P=m.value.botUrl.$errors[0])==null?void 0:P.$message:""}),b=C(()=>c.value||n.type===s.EDIT||d.value),I=()=>{Object.assign(l,{botName:"",botDescription:"",botUrl:"",botAvatar:null,botAvatarUrl:""}),m.value.$reset()},R=({file:P,url:k})=>{l.botAvatar=P,l.botAvatarUrl=k},O=async()=>{var P;if((P=n.selectedBot)!=null&&P.id)try{await o.dispatch("agentBots/deleteAgentBotAvatar",n.selectedBot.id),l.botAvatar=null,l.botAvatarUrl="",ce(a("AGENT_BOTS.AVATAR.SUCCESS_DELETE"))}catch{ce(a("AGENT_BOTS.AVATAR.ERROR_DELETE"))}else l.botAvatar=null,l.botAvatarUrl=""},x=async()=>{if(m.value.$touch(),m.value.$invalid||c.value)return;const P={name:l.botName,description:l.botDescription,outgoing_url:l.botUrl,bot_type:"webhook",avatar:l.botAvatar},k=n.type===s.CREATE;try{const U=k?P:{id:n.selectedBot.id,data:P},j=await o.dispatch(`agentBots/${k?"create":"update"}`,U),z=a(k?"AGENT_BOTS.ADD.API.SUCCESS_MESSAGE":"AGENT_BOTS.EDIT.API.SUCCESS_MESSAGE");if(ce(z),k){const{access_token:Y,id:te}=j||{};te&&Y?(d.value=Y,u(!0)):(d.value="",i.value.close())}else i.value.close();I()}catch{const j=a(k?"AGENT_BOTS.ADD.API.ERROR_MESSAGE":"AGENT_BOTS.EDIT.API.ERROR_MESSAGE");ce(j)}},L=()=>{if(n.selectedBot&&Object.keys(n.selectedBot).length){const{name:P,description:k,outgoing_url:U,thumbnail:j,bot_config:z,access_token:Y}=n.selectedBot;l.botName=P||"",l.botDescription=k||"",l.botUrl=U||(z==null?void 0:z.webhook_url)||"",l.botAvatarUrl=j||"",Y&&n.type===s.EDIT&&(d.value=Y)}else I()},F=async P=>{await Go(P),ce(a("AGENT_BOTS.ACCESS_TOKEN.COPY_SUCCESSFUL"))},D=async()=>{const P=await o.dispatch("agentBots/resetAccessToken",n.selectedBot.id);P?(d.value=P.access_token,ce(a("AGENT_BOTS.ACCESS_TOKEN.RESET_SUCCESS"))):ce(a("AGENT_BOTS.ACCESS_TOKEN.RESET_ERROR"))},V=()=>{var P;c.value||(P=m.value)==null||P.$reset(),d.value="",u(!1)},B=()=>{V(),i.value.close()};return ct(()=>n.selectedBot,L,{immediate:!0,deep:!0}),t({dialogRef:i}),(P,k)=>(p(),$(cs,{ref_key:"dialogRef",ref:i,type:"edit",title:g.value,description:T.value,"show-cancel-button":!1,"show-confirm-button":!1,onClose:V},{default:K(()=>[h("form",{class:"flex flex-col gap-4",onSubmit:Fe(x,["prevent"])},[!N(c)||e.type===s.EDIT?(p(),v("div",$B,[h("div",MB,[h("span",LB,A(P.$t("AGENT_BOTS.FORM.AVATAR.LABEL")),1),y(ts,{src:l.botAvatarUrl,name:l.botName,size:68,"allow-upload":"","icon-name":"i-lucide-bot-message-square",onUpload:R,onDelete:O},null,8,["src","name"])]),y(_n,{id:"bot-name",modelValue:l.botName,"onUpdate:modelValue":k[0]||(k[0]=U=>l.botName=U),label:P.$t("AGENT_BOTS.FORM.NAME.LABEL"),placeholder:P.$t("AGENT_BOTS.FORM.NAME.PLACEHOLDER"),message:_.value,"message-type":_.value?"error":"info",onBlur:k[1]||(k[1]=U=>N(m).botName.$touch())},null,8,["modelValue","label","placeholder","message","message-type"]),y(Xd,{id:"bot-description",modelValue:l.botDescription,"onUpdate:modelValue":k[2]||(k[2]=U=>l.botDescription=U),label:P.$t("AGENT_BOTS.FORM.DESCRIPTION.LABEL"),placeholder:P.$t("AGENT_BOTS.FORM.DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),y(_n,{id:"bot-url",modelValue:l.botUrl,"onUpdate:modelValue":k[3]||(k[3]=U=>l.botUrl=U),label:P.$t("AGENT_BOTS.FORM.WEBHOOK_URL.LABEL"),placeholder:P.$t("AGENT_BOTS.FORM.WEBHOOK_URL.PLACEHOLDER"),message:E.value,"message-type":E.value?"error":"info",onBlur:k[4]||(k[4]=U=>N(m).botUrl.$touch())},null,8,["modelValue","label","placeholder","message","message-type"])])):w("",!0),b.value?(p(),v("div",kB,[e.type===s.EDIT?(p(),v("label",DB,A(P.$t("AGENT_BOTS.ACCESS_TOKEN.TITLE")),1)):w("",!0),e.type===s.EDIT?(p(),$(Jm,{key:1,value:d.value,onOnCopy:F,onOnReset:D},null,8,["value"])):(p(),$(Jm,{key:2,value:d.value,"show-reset-button":!1,onOnCopy:F},null,8,["value"]))])):w("",!0),h("div",PB,[y(oe,{faded:"",slate:"",type:"reset",label:P.$t("AGENT_BOTS.FORM.CANCEL"),onClick:k[5]||(k[5]=U=>B())},null,8,["label"]),N(c)?w("",!0):(p(),$(oe,{key:0,type:"submit","data-testid":"label-submit",label:S.value,"is-loading":f.value,disabled:N(m).$invalid},null,8,["label","is-loading","disabled"]))])],32)]),_:1},8,["title","description"]))}},UB={class:"min-w-full overflow-x-auto divide-y divide-n-strong"},GB={class:"flex-1 divide-y divide-n-weak text-n-slate-12"},VB={class:"py-4 ltr:pr-4 rtl:pl-4"},HB={class:"flex flex-row items-center gap-4"},WB={class:"block font-medium break-words"},zB={key:0,class:"text-xs text-n-slate-12 bg-n-blue-5 inline-block rounded-md py-0.5 px-1 ltr:ml-1 rtl:mr-1"},jB={class:"text-sm text-n-slate-11"},KB={class:"py-4 ltr:pr-4 rtl:pl-4 text-sm"},YB={class:"py-4 min-w-xs"},XB={class:"flex gap-1 justify-end"},qB={__name:"Index",setup(e){const t={CREATE:"create",EDIT:"edit"},n=pt(),{t:s}=Me(),o=Oe("agentBots/getBots"),a=Oe("agentBots/getUIFlags"),i=X({}),r=X({}),l=X(t.CREATE),c=X(null),u=X(null),d=C(()=>[s("AGENT_BOTS.LIST.TABLE_HEADER.DETAILS"),s("AGENT_BOTS.LIST.TABLE_HEADER.URL")]),m=C(()=>{var E;return((E=i.value)==null?void 0:E.name)||""}),f=()=>{l.value=t.CREATE,i.value={},c.value.dialogRef.open()},g=E=>{l.value=t.EDIT,i.value=E,c.value.dialogRef.open()},T=E=>{i.value=E,u.value.open()},S=async E=>{try{await n.dispatch("agentBots/delete",E),ce(s("AGENT_BOTS.DELETE.API.SUCCESS_MESSAGE"))}catch{ce(s("AGENT_BOTS.DELETE.API.ERROR_MESSAGE"))}finally{r.value[E]=!1,i.value={}}},_=()=>{r.value[i.value.id]=!0,S(i.value.id),u.value.close()};return dt(()=>{n.dispatch("agentBots/get")}),(E,b)=>{const I=qe("tooltip");return p(),$(Da,{"is-loading":N(a).isFetching,"loading-message":N(s)("AGENT_BOTS.LIST.LOADING"),"no-records-found":!N(o).length,"no-records-message":N(s)("AGENT_BOTS.LIST.404")},{header:K(()=>[y(Cs,{title:N(s)("AGENT_BOTS.HEADER"),description:N(s)("AGENT_BOTS.DESCRIPTION"),"link-text":N(s)("AGENT_BOTS.LEARN_MORE"),"feature-name":"agent_bots"},{actions:K(()=>[y(oe,{icon:"i-lucide-circle-plus",label:E.$t("AGENT_BOTS.ADD.TITLE"),onClick:f},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:K(()=>[h("table",UB,[h("thead",null,[(p(!0),v(pe,null,Ne(d.value,R=>(p(),v("th",{key:R,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-n-slate-11"},A(R),1))),128))]),h("tbody",GB,[(p(!0),v(pe,null,Ne(N(o),R=>{var O;return p(),v("tr",{key:R.id},[h("td",VB,[h("div",HB,[y(ts,{name:R.name,src:R.thumbnail,size:40,"rounded-full":""},null,8,["name","src"]),h("div",null,[h("span",WB,[Re(A(R.name)+" ",1),R.system_bot?(p(),v("span",zB,A(E.$t("AGENT_BOTS.GLOBAL_BOT_BADGE")),1)):w("",!0)]),h("span",jB,A(R.description),1)])])]),h("td",KB,A(R.outgoing_url||((O=R.bot_config)==null?void 0:O.webhook_url)),1),h("td",YB,[h("div",XB,[R.system_bot?w("",!0):re((p(),$(oe,{key:0,icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":r.value[R.id],onClick:x=>g(R)},null,8,["is-loading","onClick"])),[[I,N(s)("AGENT_BOTS.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),R.system_bot?w("",!0):re((p(),$(oe,{key:1,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":r.value[R.id],onClick:x=>T(R)},null,8,["is-loading","onClick"])),[[I,N(s)("AGENT_BOTS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])])])}),128))])])]),default:K(()=>[y(BB,{ref_key:"agentBotModalRef",ref:c,type:l.value,"selected-bot":i.value},null,8,["type","selected-bot"]),y(cs,{ref_key:"agentBotDeleteDialogRef",ref:u,type:"alert",title:N(s)("AGENT_BOTS.DELETE.CONFIRM.TITLE"),description:N(s)("AGENT_BOTS.DELETE.CONFIRM.MESSAGE",{name:m.value}),"is-loading":N(a).isDeleting,"confirm-button-label":N(s)("AGENT_BOTS.DELETE.CONFIRM.YES"),"cancel-button-label":N(s)("AGENT_BOTS.DELETE.CONFIRM.NO"),onConfirm:_},null,8,["title","description","is-loading","confirm-button-label","cancel-button-label"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},ZB={routes:[{path:At("accounts/:accountId/settings/agent-bots"),meta:{permissions:["administrator"]},component:ea,children:[{path:"",name:"agent_bots",component:qB,meta:{featureFlag:_t.AGENT_BOTS,permissions:["administrator"]}}]}]},QB=[{id:0,option:"Conversation"},{id:1,option:"Contact"}],oy=[{id:0,option:"Text"},{id:1,option:"Number"},{id:4,option:"Link"},{id:5,option:"Date"},{id:6,option:"List"},{id:7,option:"Checkbox"}],JB={components:{NextButton:oe},props:{onClose:{type:Function,default:()=>{}},selectedAttributeModelTab:{type:Number,default:0}},setup(){return{v$:bt()}},data(){return{displayName:"",description:"",attributeModel:this.selectedAttributeModelTab||0,attributeType:0,attributeKey:"",regexPattern:null,regexCue:null,regexEnabled:!1,models:QB,types:oy,values:[],options:[],show:!0,isTouched:!1}},computed:{...lt({uiFlags:"getUIFlags"}),isMultiselectInvalid(){return this.isTouched&&this.values.length===0},isTagInputInvalid(){return this.isAttributeTypeList&&this.values.length===0},attributeListValues(){return this.values.map(e=>e.name)},isButtonDisabled(){return this.v$.displayName.$invalid||this.v$.description.$invalid||this.uiFlags.isCreating||this.isTagInputInvalid},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},validations:{displayName:{required:Ye,minLength:Qt(1)},description:{required:Ye},attributeModel:{required:Ye},attributeType:{required:Ye},attributeKey:{required:Ye,isKey(e){return!(e.indexOf(" ")>=0)}}},methods:{addTagValue(e){const t={name:e};this.values.push(t),this.$refs.tagInput.$el.focus()},onTouch(){this.isTouched=!0},onDisplayNameChange(){this.attributeKey=NO(this.displayName)},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled},async addAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/create",{attribute_display_name:this.displayName,attribute_description:this.description,attribute_model:this.attributeModel,attribute_display_type:this.attributeType,attribute_key:this.attributeKey,attribute_values:this.attributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("ATTRIBUTES_MGMT.ADD.API.ERROR_MESSAGE")}finally{ce(this.alertMessage)}}}}},e9={class:"flex flex-col h-auto overflow-auto"},t9={class:"w-full"},n9=["value"],s9={key:0,class:"message"},a9=["placeholder"],o9={key:0,class:"message"},i9=["value"],r9={key:0,class:"message"},l9={key:0,class:"multiselect--wrap"},c9={key:1},u9={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function d9(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("woot-input"),l=M("multiselect"),c=M("NextButton"),u=M("woot-modal");return p(),$(u,{show:o.show,"onUpdate:show":t[12]||(t[12]=d=>o.show=d),"on-close":n.onClose},{default:K(()=>[h("div",e9,[y(i,{"header-title":e.$t("ATTRIBUTES_MGMT.ADD.TITLE")},null,8,["header-title"]),h("form",{class:"flex w-full",onSubmit:t[11]||(t[11]=Fe((...d)=>a.addAttributes&&a.addAttributes(...d),["prevent"]))},[h("div",t9,[h("label",{class:se({error:s.v$.attributeModel.$error})},[Re(A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.attributeModel=d)},[(p(!0),v(pe,null,Ne(o.models,d=>(p(),v("option",{key:d.id,value:d.id},A(d.option),9,n9))),128))],512),[[gn,o.attributeModel]]),s.v$.attributeModel.$error?(p(),v("span",s9,A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.ERROR")),1)):w("",!0)],2),y(r,{modelValue:o.displayName,"onUpdate:modelValue":[t[1]||(t[1]=d=>o.displayName=d),a.onDisplayNameChange],label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:se({error:s.v$.displayName.$error}),error:s.v$.displayName.$error?e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onUpdate:modelValue","onBlur"]),y(r,{modelValue:o.attributeKey,"onUpdate:modelValue":t[2]||(t[2]=d=>o.attributeKey=d),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:se({error:s.v$.attributeKey.$error}),error:s.v$.attributeKey.$error?a.keyErrorMessage:"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),onBlur:s.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),h("label",{class:se({error:s.v$.description.$error})},[Re(A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),re(h("textarea",{"onUpdate:modelValue":t[3]||(t[3]=d=>o.description=d),rows:"3",type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:t[4]||(t[4]=(...d)=>s.v$.description.$touch&&s.v$.description.$touch(...d))},null,40,a9),[[mt,o.description]]),s.v$.description.$error?(p(),v("span",o9,A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):w("",!0)],2),h("label",{class:se({error:s.v$.attributeType.$error})},[Re(A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[5]||(t[5]=d=>o.attributeType=d)},[(p(!0),v(pe,null,Ne(o.types,d=>(p(),v("option",{key:d.id,value:d.id},A(d.option),9,i9))),128))],512),[[gn,o.attributeType]]),s.v$.attributeType.$error?(p(),v("span",r9,A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):w("",!0)],2),a.isAttributeTypeList?(p(),v("div",l9,[h("label",null,A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.LABEL")),1),y(l,{ref:"tagInput",modelValue:o.values,"onUpdate:modelValue":t[6]||(t[6]=d=>o.values=d),placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:se({invalid:a.isMultiselectInvalid}),options:o.options,multiple:"",taggable:"",onClose:a.onTouch,onTag:a.addTagValue},null,8,["modelValue","placeholder","class","options","onClose","onTag"]),re(h("label",{class:"error-message"},A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[Jt,a.isMultiselectInvalid]])])):w("",!0),a.isAttributeTypeText?(p(),v("div",c9,[re(h("input",{"onUpdate:modelValue":t[7]||(t[7]=d=>o.regexEnabled=d),type:"checkbox",onInput:t[8]||(t[8]=(...d)=>a.toggleRegexEnabled&&a.toggleRegexEnabled(...d))},null,544),[[pn,o.regexEnabled]]),Re(" "+A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):w("",!0),a.isAttributeTypeText&&a.isRegexEnabled?(p(),$(r,{key:2,modelValue:o.regexPattern,"onUpdate:modelValue":t[9]||(t[9]=d=>o.regexPattern=d),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):w("",!0),a.isAttributeTypeText&&a.isRegexEnabled?(p(),$(r,{key:3,modelValue:o.regexCue,"onUpdate:modelValue":t[10]||(t[10]=d=>o.regexCue=d),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):w("",!0),h("div",u9,[y(c,{faded:"",slate:"",type:"reset",label:e.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Fe(n.onClose,["prevent"])},null,8,["label","onClick"]),y(c,{type:"submit",label:e.$t("ATTRIBUTES_MGMT.ADD.SUBMIT"),disabled:a.isButtonDisabled},null,8,["label","disabled"])])])],32)])]),_:1},8,["show","on-close"])}const p9=Ae(JB,[["render",d9],["__scopeId","data-v-d0bd26a5"]]),h9={components:{NextButton:oe},props:{selectedAttribute:{type:Object,default:()=>{}},isUpdating:{type:Boolean,default:!1}},emits:["onClose"],setup(){return{v$:bt()}},data(){return{displayName:"",description:"",attributeType:0,regexPattern:null,regexCue:null,regexEnabled:!1,types:oy,show:!0,attributeKey:"",values:[],options:[],isTouched:!0}},validations:{displayName:{required:Ye},attributeType:{required:Ye},description:{required:Ye,minLength:Qt(1)},attributeKey:{required:Ye,isKey(e){return!(e.indexOf(" ")>=0)}}},computed:{setAttributeListValue(){return this.selectedAttribute.attribute_values.map(e=>({name:e}))},updatedAttributeListValues(){return this.values.map(e=>e.name)},isButtonDisabled(){return this.v$.description.$invalid||this.isMultiselectInvalid},isMultiselectInvalid(){return this.isAttributeTypeList&&this.isTouched&&this.values.length===0},pageTitle(){return`${this.$t("ATTRIBUTES_MGMT.EDIT.TITLE")} - ${this.selectedAttribute.attribute_display_name}`},selectedAttributeType(){return this.types.find(e=>e.option.toLowerCase()===this.selectedAttribute.attribute_display_type).id},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("onClose")},addTagValue(e){const t={name:e};this.values.push(t),this.$refs.tagInput.$el.focus()},setFormValues(){const e=this.selectedAttribute.regex_pattern?Lf(this.selectedAttribute.regex_pattern).source:null;this.displayName=this.selectedAttribute.attribute_display_name,this.description=this.selectedAttribute.attribute_description,this.attributeType=this.selectedAttributeType,this.attributeKey=this.selectedAttribute.attribute_key,this.regexPattern=e,this.regexCue=this.selectedAttribute.regex_cue,this.regexEnabled=e!=null,this.values=this.setAttributeListValue},async editAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/update",{id:this.selectedAttribute.id,attribute_description:this.description,attribute_display_name:this.displayName,attribute_values:this.updatedAttributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.EDIT.API.SUCCESS_MESSAGE"),this.onClose()}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("ATTRIBUTES_MGMT.EDIT.API.ERROR_MESSAGE")}finally{ce(this.alertMessage)}}},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled}}},m9={class:"flex flex-col h-auto overflow-auto"},f9={class:"w-full"},g9=["placeholder"],_9={key:0,class:"message"},v9=["value"],b9={key:0,class:"message"},E9={key:0,class:"multiselect--wrap"},T9={key:1},y9={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function S9(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("woot-input"),l=M("multiselect"),c=M("NextButton");return p(),v("div",m9,[y(i,{"header-title":a.pageTitle},null,8,["header-title"]),h("form",{class:"flex flex-col w-full",onSubmit:t[10]||(t[10]=Fe((...u)=>a.editAttributes&&a.editAttributes(...u),["prevent"]))},[h("div",f9,[y(r,{modelValue:o.displayName,"onUpdate:modelValue":t[0]||(t[0]=u=>o.displayName=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:se({error:s.v$.displayName.$error}),error:s.v$.displayName.$error?e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),y(r,{modelValue:o.attributeKey,"onUpdate:modelValue":t[1]||(t[1]=u=>o.attributeKey=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:se({error:s.v$.attributeKey.$error}),error:s.v$.attributeKey.$error?a.keyErrorMessage:"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),readonly:"",onBlur:s.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),h("label",{class:se({error:s.v$.description.$error})},[Re(A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),re(h("textarea",{"onUpdate:modelValue":t[2]||(t[2]=u=>o.description=u),rows:"5",type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...u)=>s.v$.description.$touch&&s.v$.description.$touch(...u))},null,40,g9),[[mt,o.description]]),s.v$.description.$error?(p(),v("span",_9,A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):w("",!0)],2),h("label",{class:se({error:s.v$.attributeType.$error})},[Re(A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>o.attributeType=u),disabled:""},[(p(!0),v(pe,null,Ne(o.types,u=>(p(),v("option",{key:u.id,value:u.id},A(u.option),9,v9))),128))],512),[[gn,o.attributeType]]),s.v$.attributeType.$error?(p(),v("span",b9,A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):w("",!0)],2),a.isAttributeTypeList?(p(),v("div",E9,[h("label",null,A(e.$t("ATTRIBUTES_MGMT.EDIT.TYPE.LIST.LABEL")),1),y(l,{ref:"tagInput",modelValue:o.values,"onUpdate:modelValue":t[5]||(t[5]=u=>o.values=u),placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:se({invalid:a.isMultiselectInvalid}),options:o.options,multiple:"",taggable:"",onTag:a.addTagValue},null,8,["modelValue","placeholder","class","options","onTag"]),re(h("label",{class:"error-message"},A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[Jt,a.isMultiselectInvalid]])])):w("",!0),a.isAttributeTypeText?(p(),v("div",T9,[re(h("input",{"onUpdate:modelValue":t[6]||(t[6]=u=>o.regexEnabled=u),type:"checkbox",onInput:t[7]||(t[7]=(...u)=>a.toggleRegexEnabled&&a.toggleRegexEnabled(...u))},null,544),[[pn,o.regexEnabled]]),Re(" "+A(e.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):w("",!0),a.isAttributeTypeText&&a.isRegexEnabled?(p(),$(r,{key:2,modelValue:o.regexPattern,"onUpdate:modelValue":t[8]||(t[8]=u=>o.regexPattern=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):w("",!0),a.isAttributeTypeText&&a.isRegexEnabled?(p(),$(r,{key:3,modelValue:o.regexCue,"onUpdate:modelValue":t[9]||(t[9]=u=>o.regexCue=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):w("",!0)]),h("div",y9,[y(c,{faded:"",slate:"",type:"reset",label:e.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Fe(a.onClose,["prevent"])},null,8,["label","onClick"]),y(c,{type:"submit",label:e.$t("ATTRIBUTES_MGMT.EDIT.UPDATE_BUTTON_TEXT"),"is-loading":n.isUpdating,disabled:a.isButtonDisabled},null,8,["label","is-loading","disabled"])])],32)])}const A9=Ae(h9,[["render",S9],["__scopeId","data-v-d9e267ee"]]),I9={class:"flex flex-col"},C9={class:"min-w-full overflow-x-auto"},O9={class:"divide-y divide-slate-25 dark:divide-slate-800 flex-1 text-slate-700 dark:text-slate-100"},N9={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},w9={class:"py-4 ltr:pr-4 rtl:pl-4"},R9={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},x9={class:"py-4 ltr:pr-4 rtl:pl-4 attribute-key overflow-hidden whitespace-nowrap text-ellipsis"},$9={class:"py-4 min-w-xs"},M9={class:"flex gap-1 justify-end"},L9={__name:"CustomAttribute",props:{attributeModel:{type:String,default:"conversation_attribute"}},setup(e){const t=e,{t:n}=Me(),s=X(!1),o=X(!1),a=X({}),i=nn(),r=pt(),l=C(()=>i["attributes/getAttributesByModel"].value(t.attributeModel)),c=C(()=>i["attributes/getUIFlags"].value),u=C(()=>a.value.attribute_display_name),d=C(()=>`${n("ATTRIBUTES_MGMT.DELETE.CONFIRM.YES")} ${u.value}`),m=C(()=>n("ATTRIBUTES_MGMT.DELETE.CONFIRM.NO")),f=C(()=>n("ATTRIBUTES_MGMT.DELETE.CONFIRM.TITLE",{attributeName:u.value})),g=C(()=>`${n("ATTRIBUTES_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{attributeName:u.value})}`),T=async({id:O})=>{var x;try{await r.dispatch("attributes/delete",O),ce(n("ATTRIBUTES_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(L){const F=((x=L==null?void 0:L.response)==null?void 0:x.message)||n("ATTRIBUTES_MGMT.DELETE.API.ERROR_MESSAGE");ce(F)}},S=O=>{s.value=!0,a.value=O},_=()=>{s.value=!1},E=()=>{o.value=!1,a.value={}},b=()=>{T(a.value),E()},I=O=>{o.value=!0,a.value=O},R=C(()=>[n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.NAME"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.TYPE"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.KEY")]);return(O,x)=>{const L=M("woot-modal"),F=M("woot-confirm-delete-modal"),D=qe("tooltip");return p(),v("div",I9,[h("table",C9,[h("thead",null,[(p(!0),v(pe,null,Ne(R.value,V=>(p(),v("th",{key:V,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},A(V),1))),128))]),h("tbody",O9,[(p(!0),v(pe,null,Ne(l.value,V=>(p(),v("tr",{key:V.attribute_key},[h("td",N9,A(V.attribute_display_name),1),h("td",w9,A(V.attribute_description),1),h("td",R9,A(V.attribute_display_type),1),h("td",x9,A(V.attribute_key),1),h("td",$9,[h("div",M9,[re(y(oe,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:B=>S(V)},null,8,["onClick"]),[[D,O.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.EDIT"),void 0,{top:!0}]]),re(y(oe,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:B=>I(V)},null,8,["onClick"]),[[D,O.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.DELETE"),void 0,{top:!0}]])])])]))),128))])]),y(L,{show:s.value,"onUpdate:show":x[0]||(x[0]=V=>s.value=V),"on-close":_},{default:K(()=>[y(A9,{"selected-attribute":a.value,"is-updating":c.value.isUpdating,onOnClose:_},null,8,["selected-attribute","is-updating"])]),_:1},8,["show"]),o.value?(p(),$(F,{key:0,show:o.value,"onUpdate:show":x[1]||(x[1]=V=>o.value=V),title:f.value,message:O.$t("ATTRIBUTES_MGMT.DELETE.CONFIRM.MESSAGE"),"confirm-text":d.value,"reject-text":m.value,"confirm-value":a.value.attribute_display_name,"confirm-place-holder-text":g.value,onOnConfirm:b,onOnClose:E},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):w("",!0)])}}},k9=Ae(L9,[["__scopeId","data-v-d6ce7b30"]]),D9={__name:"Index",setup(e){const{t}=Me(),n=nn(),s=pt(),o=X(!1),a=X(0),i=C(()=>n["attributes/getUIFlags"].value),r=()=>{o.value=!0},l=()=>{o.value=!1},c=C(()=>[{key:0,name:t("ATTRIBUTES_MGMT.TABS.CONVERSATION")},{key:1,name:t("ATTRIBUTES_MGMT.TABS.CONTACT")}]);dt(()=>{s.dispatch("attributes/get")});const u=C(()=>a.value?"contact_attribute":"conversation_attribute"),d=C(()=>n["attributes/getAttributesByModel"].value(u.value)),m=f=>{a.value=f};return(f,g)=>{const T=M("woot-tabs-item"),S=M("woot-tabs");return p(),$(Da,{"is-loading":i.value.isFetching,"loading-message":f.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!d.value.length,"no-records-message":f.$t("ATTRIBUTES_MGMT.LIST.EMPTY_RESULT.404")},{header:K(()=>[y(Cs,{title:f.$t("ATTRIBUTES_MGMT.HEADER"),description:f.$t("ATTRIBUTES_MGMT.DESCRIPTION"),"link-text":f.$t("ATTRIBUTES_MGMT.LEARN_MORE"),"feature-name":"custom_attributes"},{actions:K(()=>[y(oe,{icon:"i-lucide-circle-plus",label:f.$t("ATTRIBUTES_MGMT.HEADER_BTN_TXT"),onClick:r},null,8,["label"])]),_:1},8,["title","description","link-text"])]),preBody:K(()=>[y(S,{class:"font-medium [&_.tabs]:p-0 mb-4",index:a.value,onChange:m},{default:K(()=>[(p(!0),v(pe,null,Ne(c.value,(_,E)=>(p(),$(T,{key:_.key,index:E,name:_.name,"show-badge":!1},null,8,["index","name"]))),128))]),_:1},8,["index"])]),body:K(()=>[(p(),$(k9,{key:u.value,"attribute-model":u.value},null,8,["attribute-model"]))]),default:K(()=>[o.value?(p(),$(p9,{key:0,show:o.value,"onUpdate:show":g[0]||(g[0]=_=>o.value=_),"on-close":l,"selected-attribute-model-tab":a.value},null,8,["show","selected-attribute-model-tab"])):w("",!0)]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},P9={routes:[{path:At("accounts/:accountId/settings/custom-attributes"),component:ea,children:[{path:"",redirect:e=>({name:"attributes_list",params:e.params})},{path:"list",name:"attributes_list",component:D9,meta:{featureFlag:_t.CUSTOM_ATTRIBUTES,permissions:["administrator"]}}]}]},B9={name:"FilterInput",components:{NextButton:oe},props:{modelValue:{type:Object,default:()=>{}},filterAttributes:{type:Array,default:()=>[]},inputType:{type:String,default:"plain_text"},operators:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},showQueryOperator:{type:Boolean,default:!1},showUserInput:{type:Boolean,default:!0},groupedFilters:{type:Boolean,default:!1},filterGroups:{type:Array,default:()=>[]},customAttributeType:{type:String,default:""},errorMessage:{type:String,default:""}},emits:["update:modelValue","removeFilter","resetFilter"],computed:{attributeKey:{get(){return this.modelValue?this.modelValue.attribute_key:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,attribute_key:e})}},filterOperator:{get(){return this.modelValue?this.modelValue.filter_operator:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,filter_operator:e})}},values:{get(){return this.modelValue?this.modelValue.values:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,values:e})}},query_operator:{get(){return this.modelValue?this.modelValue.query_operator:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,query_operator:e})}},custom_attribute_type:{get(){return this.customAttributeType?this.customAttributeType:""},set(){const e=this.modelValue||{};this.$emit("update:modelValue",{...e,custom_attribute_type:this.customAttributeType})}}},watch:{customAttributeType:{handler(e){e==="conversation_attribute"||e==="contact_attribute"?this.modelValue.custom_attribute_type=this.customAttributeType:this.modelValue.custom_attribute_type=""},immediate:!0}},methods:{removeFilter(){this.$emit("removeFilter")},resetFilter(){this.$emit("resetFilter")},getInputErrorClass(e){return e?"bg-n-ruby-8/20 border-n-ruby-5 dark:border-n-ruby-5":"bg-n-background border-n-weak dark:border-n-weak"}}},F9={class:"flex gap-1"},U9=["label"],G9=["value"],V9=["value","disabled"],H9=["value"],W9={key:2,class:"flex-grow mr-1 filter__answer--wrap"},z9={key:0,class:"multiselect-wrap--small"},j9={key:1,class:"multiselect-wrap--small"},K9={key:2,class:"multiselect-wrap--small"},Y9=["placeholder"],X9={key:0,class:"filter-error"},q9={key:0,class:"flex items-center justify-center relative my-2.5 mx-0"},Z9={value:"and"},Q9={value:"or"};function J9(e,t,n,s,o,a){const i=M("multiselect"),r=M("NextButton");return p(),v("div",null,[h("div",{class:se(["p-2 border border-solid rounded-lg",a.getInputErrorClass(n.errorMessage)])},[h("div",F9,[n.groupedFilters?re((p(),v("select",{key:0,"onUpdate:modelValue":t[0]||(t[0]=l=>a.attributeKey=l),class:"max-w-[30%] mb-0 mr-1",onChange:t[1]||(t[1]=l=>a.resetFilter())},[(p(!0),v(pe,null,Ne(n.filterGroups,(l,c)=>(p(),v("optgroup",{key:c,label:l.name},[(p(!0),v(pe,null,Ne(l.attributes,u=>(p(),v("option",{key:u.key,value:u.key,selected:!0},A(u.name),9,G9))),128))],8,U9))),128))],544)),[[gn,a.attributeKey]]):re((p(),v("select",{key:1,"onUpdate:modelValue":t[2]||(t[2]=l=>a.attributeKey=l),class:"max-w-[30%] mb-0 mr-1",onChange:t[3]||(t[3]=l=>a.resetFilter())},[(p(!0),v(pe,null,Ne(n.filterAttributes,l=>(p(),v("option",{key:l.key,value:l.key,disabled:l.disabled},A(l.name),9,V9))),128))],544)),[[gn,a.attributeKey]]),re(h("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.filterOperator=l),class:"max-w-[20%] mb-0 mr-1"},[(p(!0),v(pe,null,Ne(n.operators,(l,c)=>(p(),v("option",{key:c,value:l.value},A(e.$t(`FILTER.OPERATOR_LABELS.${l.value}`)),9,H9))),128))],512),[[gn,a.filterOperator]]),n.showUserInput?(p(),v("div",W9,[n.inputType==="multi_select"?(p(),v("div",z9,[y(i,{modelValue:a.values,"onUpdate:modelValue":t[5]||(t[5]=l=>a.values=l),"track-by":"id",label:"name",placeholder:"Select",multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1},null,8,["modelValue","select-label","options"])])):n.inputType==="search_select"?(p(),v("div",j9,[y(i,{modelValue:a.values,"onUpdate:modelValue":t[6]||(t[6]=l=>a.values=l),"track-by":"id",label:"name",placeholder:"Select","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},null,8,["modelValue","select-label","options"])])):n.inputType==="date"?(p(),v("div",K9,[re(h("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>a.values=l),type:"date",editable:!1,class:"!mb-0 datepicker"},null,512),[[mt,a.values]])])):re((p(),v("input",{key:3,"onUpdate:modelValue":t[8]||(t[8]=l=>a.values=l),type:"text",class:"!mb-0",placeholder:e.$t("FILTER.INPUT_PLACEHOLDER")},null,8,Y9)),[[mt,a.values]])])):w("",!0),y(r,{icon:"i-lucide-x",slate:"",ghost:"",class:"flex-shrink-0",onClick:a.removeFilter},null,8,["onClick"])]),n.errorMessage?(p(),v("p",X9,A(n.errorMessage),1)):w("",!0)],2),n.showQueryOperator?(p(),v("div",q9,[t[10]||(t[10]=h("hr",{class:"absolute w-full border-b border-solid border-slate-75 dark:border-slate-800"},null,-1)),re(h("select",{"onUpdate:modelValue":t[9]||(t[9]=l=>a.query_operator=l),class:"relative w-auto mb-0 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600"},[h("option",Z9,A(e.$t("FILTER.QUERY_DROPDOWN_LABELS.AND")),1),h("option",Q9,A(e.$t("FILTER.QUERY_DROPDOWN_LABELS.OR")),1)],512),[[gn,a.query_operator]])])):w("",!0)])}const iy=Ae(B9,[["render",J9],["__scopeId","data-v-bd7e9c64"]]),e7={props:{teams:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],data(){return{selectedTeams:[],message:""}},mounted(){const{team_ids:e}=this.modelValue;this.selectedTeams=e,this.message=this.modelValue.message},methods:{updateValue(){this.$emit("update:modelValue",{team_ids:this.selectedTeams.map(e=>e.id),message:this.message})}}},t7={class:"multiselect-wrap--small flex flex-col gap-1 mt-1"},n7=["placeholder"];function s7(e,t,n,s,o,a){const i=M("multiselect");return p(),v("div",null,[h("div",t7,[y(i,{modelValue:o.selectedTeams,"onUpdate:modelValue":[t[0]||(t[0]=r=>o.selectedTeams=r),a.updateValue],"track-by":"id",label:"name",placeholder:e.$t("AUTOMATION.ACTION.TEAM_DROPDOWN_PLACEHOLDER"),multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.teams,"allow-empty":!1},null,8,["modelValue","placeholder","select-label","options","onUpdate:modelValue"]),re(h("textarea",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.message=r),rows:"4",placeholder:e.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER"),onInput:t[2]||(t[2]=(...r)=>a.updateValue&&a.updateValue(...r))},null,40,n7),[[mt,o.message]])])])}const a7=Ae(e7,[["render",s7],["__scopeId","data-v-502369e0"]]),o7={components:{Spinner:bs},props:{initialFileName:{type:String,default:""}},emits:["update:modelValue"],data(){return{uploadState:"idle",label:this.$t("AUTOMATION.ATTACHMENT.LABEL_IDLE")}},mounted(){this.initialFileName&&(this.label=this.initialFileName,this.uploadState="uploaded")},methods:{async onChangeFile(e){this.uploadState="processing",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADING");try{const t=e.target.files[0],n=await this.$store.dispatch("automations/uploadAttachment",t);this.$emit("update:modelValue",[n]),this.uploadState="uploaded",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADED")}catch{this.uploadState="failed",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOAD_FAILED"),ce(this.$t("AUTOMATION.ATTACHMENT.UPLOAD_ERROR"))}}}},i7={class:"file-button"};function r7(e,t,n,s,o,a){const i=M("Spinner"),r=M("fluent-icon");return p(),v("label",{class:se(["input-wrapper",o.uploadState])},[o.uploadState!=="processing"?(p(),v("input",{key:0,type:"file",name:"attachment",class:se(o.uploadState==="processing"?"disabled":""),onChange:t[0]||(t[0]=(...l)=>a.onChangeFile&&a.onChangeFile(...l))},null,34)):w("",!0),o.uploadState==="processing"?(p(),$(i,{key:1})):w("",!0),o.uploadState==="idle"?(p(),$(r,{key:2,icon:"file-upload"})):w("",!0),o.uploadState==="uploaded"?(p(),$(r,{key:3,icon:"checkmark-circle",type:"outline",class:"success-icon"})):w("",!0),o.uploadState==="failed"?(p(),$(r,{key:4,icon:"dismiss-circle",type:"outline",class:"error-icon"})):w("",!0),h("p",i7,A(o.label),1)],2)}const l7=Ae(o7,[["render",r7],["__scopeId","data-v-3e4db569"]]),c7={class:"mb-0 vertical dropdown menu"},u7=["onClick"],d7={__name:"MentionBox",props:{items:{type:Array,default:()=>[]},type:{type:String,default:"canned"}},emits:["mentionSelect"],setup(e,{emit:t}){const n=e,s=t,o=X(null),a=X(0),i=()=>{const d=o.value,m=d.querySelector(`#mention-item-${a.value}`);if(m){const f=m.offsetTop,g=f+m.offsetHeight,T=d.scrollTop,S=T+d.offsetHeight;f<T?d.scrollTop=f:g+34>S&&(d.scrollTop=g-d.offsetHeight+34)}},r=()=>{s("mentionSelect",n.items[a.value])};_0({items:C(()=>n.items),onSelect:r,adjustScroll:i,selectedIndex:a}),ct(()=>n.items,d=>{d.length<a.value+1&&(a.value=0)}),ct(a,i);const l=d=>{a.value=d},c=d=>{a.value=d,r()},u=(d={})=>n.type==="variable"?`{{${d.label}}}`:`/${d.label}`;return(d,m)=>{const f=M("woot-dropdown-item");return p(),v("div",{ref_key:"mentionsListContainerRef",ref:o,class:"bg-n-solid-1 p-1 rounded-xl overflow-auto absolute w-full z-20 shadow-md left-0 bottom-full max-h-[9.75rem] border border-solid border-n-strong mention--box"},[h("ul",c7,[(p(!0),v(pe,null,Ne(e.items,(g,T)=>(p(),$(f,{id:`mention-item-${T}`,key:g.key,class:"!mb-1",onMouseover:S=>l(T)},{default:K(()=>[h("button",{class:se(["flex rounded-lg group flex-col gap-0.5 overflow-hidden cursor-pointer items-start px-3 py-2 justify-center w-full h-full text-left hover:bg-n-alpha-black2",{"bg-n-alpha-black2":T===a.value}]),onClick:S=>c(T)},[We(d.$slots,"default",{item:g,index:T,selected:T===a.value},()=>[h("p",{class:se(["max-w-full min-w-0 mb-0 overflow-hidden text-sm font-medium text-n-slate-11 group-hover:text-n-slate-11 text-ellipsis whitespace-nowrap",{"text-n-slate-12":T===a.value}])},A(g.description),3),h("p",{class:se(["max-w-full min-w-0 mb-0 overflow-hidden text-xs text-slate-500 dark:text-slate-300 group-hover:text-n-slate-11 text-ellipsis whitespace-nowrap",{"text-n-slate-12":T===a.value}])},A(u(g)),3)],!0)],10,u7)]),_:2},1032,["id","onMouseover"]))),128))])],512)}}},bg=Ae(d7,[["__scopeId","data-v-f9ccffec"]]),p7={components:{MentionBox:bg},props:{searchKey:{type:String,default:""}},emits:["replace"],computed:{...lt({cannedMessages:"getCannedResponses"}),items(){return this.cannedMessages.map(e=>({label:e.short_code,key:e.short_code,description:e.content}))}},watch:{searchKey(){this.fetchCannedResponses()}},mounted(){this.fetchCannedResponses()},methods:{fetchCannedResponses(){this.$store.dispatch("getCannedResponse",{searchKey:this.searchKey})},handleMentionClick(e={}){this.$emit("replace",e.description)}}};function h7(e,t,n,s,o,a){const i=M("MentionBox");return a.items.length?(p(),$(i,{key:0,items:a.items,onMentionSelect:a.handleMentionClick},null,8,["items","onMentionSelect"])):w("",!0)}const Eg=Ae(p7,[["render",h7]]),m7={class:"max-w-full inline-flex items-center gap-0.5 min-w-0 mb-0 text-sm font-medium text-slate-900 dark:text-slate-100 group-hover:text-woot-500 dark:group-hover:text-woot-500 truncate"},f7={__name:"keyboardEmojiSelector",props:{searchKey:{type:String,default:""}},emits:["selectEmoji"],setup(e,{emit:t}){const n=e,s=t,o=Cd([]),a=C(()=>{if(!n.searchKey)return[];const l=n.searchKey.toLowerCase();return o.value.filter(c=>c.searchString.includes(l))});function i(){o.value=SC.flatMap(({emojis:l})=>l.map(({name:c,slug:u,...d})=>({...d,name:c,slug:u,searchString:`${c.replace(/\s+/g,"")} ${u}`.toLowerCase()})))}function r(l={}){s("selectEmoji",l.emoji)}return dt(()=>{i()}),(l,c)=>a.value.length?(p(),$(bg,{key:0,type:"emoji",items:a.value,onMentionSelect:r},{default:K(({item:u,selected:d})=>[h("span",m7,[Re(A(u.emoji)+" ",1),h("p",{class:se(["relative mb-0 truncate bottom-px",{"text-woot-500 dark:text-woot-500":d,"font-normal":!d}])}," :"+A(u.name),3)])]),_:1},8,["items"])):w("",!0)}},g7=["id","onClick","onMouseover"],_7={class:"mr-2"},v7={class:"flex-1 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},b7={__name:"TagAgents",props:{searchKey:{type:String,default:""}},emits:["selectAgent"],setup(e,{emit:t}){const n=e,s=t,o=nn(),a=C(()=>o["agents/getVerifiedAgents"].value),i=X(null),r=X(0),l=C(()=>n.searchKey?a.value.filter(f=>f.name.toLowerCase().includes(n.searchKey.toLowerCase())):a.value),c=()=>{tn(()=>{i.value&&(i.value.scrollTop=50*r.value)})},u=()=>{s("selectAgent",l.value[r.value])};_0({items:l,onSelect:u,adjustScroll:c,selectedIndex:r}),ct(l,f=>{f.length<r.value+1&&(r.value=0)});const d=f=>{r.value=f},m=f=>{r.value=f,u()};return(f,g)=>(p(),v("div",null,[l.value.length?(p(),v("ul",{key:0,ref_key:"tagAgentsRef",ref:i,class:"vertical dropdown menu mention--box bg-n-solid-1 p-1 rounded-xl text-sm overflow-auto absolute w-full z-20 shadow-md left-0 leading-[1.2] bottom-full max-h-[12.5rem] border border-solid border-n-strong"},[(p(!0),v(pe,null,Ne(l.value,(T,S)=>(p(),v("li",{id:`mention-item-${S}`,key:T.id,class:se([{"bg-n-alpha-black2":S===r.value,"last:mb-0":l.value.length<=4},"flex items-center px-2 py-1 rounded-md"]),onClick:_=>m(S),onMouseover:_=>d(S)},[h("div",_7,[y(ts,{src:T.thumbnail,name:T.name,"rounded-full":""},null,8,["src","name"])]),h("div",v7,[h("h5",{class:se(["mb-0 overflow-hidden text-sm text-n-slate-11 whitespace-nowrap text-ellipsis",{"text-n-slate-12":S===r.value}])},A(T.name),3),h("div",{class:se(["overflow-hidden text-xs whitespace-nowrap text-ellipsis text-n-slate-10",{"text-n-slate-11":S===r.value}])},A(T.email),3)])],42,g7))),128))],512)):w("",!0)]))}},E7={components:{MentionBox:bg},props:{searchKey:{type:String,default:""}},emits:["selectVariable"],computed:{...lt({customAttributes:"attributes/getAttributes"}),items(){return[...this.standardAttributeVariables,...this.customAttributeVariables]},standardAttributeVariables(){return J2.filter(e=>e.label.includes(this.searchKey)||e.key.includes(this.searchKey)).map(e=>({label:e.key,key:e.key,description:e.label}))},customAttributeVariables(){return this.customAttributes.map(e=>{const t=e.attribute_model==="conversation_attribute"?"conversation":"contact";return{label:`${t}.custom_attribute.${e.attribute_key}`,key:`${t}.custom_attribute.${e.attribute_key}`,description:e.attribute_description}})}},methods:{handleVariableClick(e={}){this.$emit("selectVariable",e.key)}}};function T7(e,t,n,s,o,a){const i=M("MentionBox");return a.items.length?(p(),$(i,{key:0,type:"variable",items:a.items,onMentionSelect:a.handleVariableClick},null,8,["items","onMentionSelect"])):w("",!0)}const y7=Ae(E7,[["render",T7],["__scopeId","data-v-e3726e77"]]),S7=["strong","em","link","undo","redo","bulletList","orderedList","code"],A7=["strong","em","link","undo","redo","imageUpload"],lze=["strong","em","link","undo","redo","bulletList","orderedList","h1","h2","h3","imageUpload","code"],Tg=["strong","em","link","undo","redo"],I7=[{name:"Small",height:"24px"},{name:"Medium",height:"48px"},{name:"Large",height:"72px"},{name:"Original Size",height:"auto"}],C7=(e,t=0)=>n=>{const s=new RegExp(`(?:^)?${e}[^\\s${e}]{${t},}`,"g"),o=n.before(),a=n.end(),i=n.doc.textBetween(o,a,"\0","\0");let r;for(;r=s.exec(i);){const l=r.input.slice(Math.max(0,r.index-1),r.index);if(!/^[\s\0]?$/.test(l))continue;const c=r.index+n.start(),u=c+r[0].length;if(c<n.pos&&u>=n.pos){const d=r[0],m=d?d.slice(e.length):"";return{range:{from:c,to:u},text:m}}}return null},O7=({matcher:e,suggestionClass:t="prosemirror-mention-node",onEnter:n=()=>!1,onChange:s=()=>!1,onExit:o=()=>!1,onKeyDown:a=()=>!1})=>new AC({key:new IC("mentions"),view(){return{update:(i,r)=>{const l=this.key.getState(r),c=this.key.getState(i.state),u=l.active&&c.active&&l.range.from!==c.range.from,d=!l.active&&c.active,m=l.active&&!c.active,f=!d&&!m&&l.text!==c.text;(m||u)&&o({view:i,range:l.range,text:l.text}),f&&!u&&s({view:i,range:c.range,text:c.text}),(d||u)&&n({view:i,range:c.range,text:c.text})}}},state:{init(){return{active:!1,range:{},text:null}},apply(i,r){const{selection:l}=i,c={...r};if(l.from===l.to){(l.from<r.range.from||l.from>r.range.to)&&(c.active=!1);const u=l.$from,d=e(u);d?(c.active=!0,c.range=d.range,c.text=d.text):c.active=!1}else c.active=!1;return c.active||(c.range={},c.text=null),c}},props:{handleKeyDown(i,r){const{active:l}=this.getState(i.state);return l?a({view:i,event:r}):!1},decorations(i){const{active:r,range:l}=this.getState(i);return r?CC.create(i.doc,[OC.inline(l.from,l.to,{nodeName:"span",class:t})]):null}}}),N7=["onClick"],w7=4e3,a1=4,Ko={__name:"Editor",props:{modelValue:{type:String,default:""},editorId:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},isPrivate:{type:Boolean,default:!1},enableSuggestions:{type:Boolean,default:!0},overrideLineBreaks:{type:Boolean,default:!1},updateSelectionWith:{type:String,default:""},enableVariables:{type:Boolean,default:!1},enableCannedResponses:{type:Boolean,default:!0},variables:{type:Object,default:()=>({})},enabledMenuOptions:{type:Array,default:()=>[]},signature:{type:String,default:""},allowSignature:{type:Boolean,default:!1},channelType:{type:String,default:""},showImageResizeToolbar:{type:Boolean,default:!1},focusOnMount:{type:Boolean,default:!0}},emits:["typingOn","typingOff","toggleUserMention","toggleCannedMenu","toggleVariablesMenu","clearSelection","blur","focus","input","update:modelValue"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=(Se,Le,ke=[],De={},Ue=[])=>NC.create({doc:new D_(Rp).parse(Se),plugins:wC({schema:Rp,placeholder:Le,methods:De,plugins:ke,enabledMenuOptions:Ue})}),{isEditorHotKeyEnabled:i,fetchSignatureFlagFromUISettings:r}=ln(),l=JC(()=>s("typingOn"),()=>s("typingOff"),w7);let c=null,u=null;const d=X(!1),m=X(!1),f=X(!1),g=X(!1),T=X(""),S=X(""),_=X(""),E=X(""),b=X(null),I=X(!1),R=X({top:0,left:0}),O=X(null),x=I7,L=Is("editorRoot"),F=Is("imageUpload"),D=Is("editor"),V=()=>kC.serialize(c.state.doc),B=C(()=>n.enableVariables&&f.value&&!n.isPrivate),P=C(()=>n.enableCannedResponses&&m.value&&!n.isPrivate),k=C(()=>n.enabledMenuOptions.length?n.enabledMenuOptions:S7);function U({trigger:Se,minChars:Le=0,showMenu:ke,searchTerm:De,isAllowed:Ue=()=>!0}){return O7({matcher:C7(Se,Le),suggestionClass:"",onEnter:de=>(Ue()&&(ke.value=!0,b.value=de.range,c=de.view,De&&(De.value=de.text||"")),!1),onChange:de=>(c=de.view,b.value=de.range,De&&(De.value=de.text),!1),onExit:()=>(De&&(De.value=""),ke.value=!1,!1),onKeyDown:({event:de})=>de.keyCode===13&&ke.value})}const j=C(()=>n.enableSuggestions?[U({trigger:"@",showMenu:d,searchTerm:T,isAllowed:()=>n.isPrivate}),U({trigger:"/",showMenu:m,searchTerm:S,isAllowed:()=>!n.isPrivate}),U({trigger:"{{",showMenu:f,searchTerm:_,isAllowed:()=>!n.isPrivate}),U({trigger:":",minChars:2,showMenu:g,searchTerm:E})]:[]),z=C(()=>n.allowSignature&&!n.isPrivate&&n.channelType?r(n.channelType):!1);ct(d,Se=>{s("toggleUserMention",n.isPrivate&&Se)}),ct(m,Se=>{s("toggleCannedMenu",!n.isPrivate&&Se)}),ct(f,Se=>{s("toggleVariablesMenu",!n.isPrivate&&Se)});function Y(Se="end"){const{tr:Le}=c.state,ke=Se==="end"?k_.atEnd(Le.doc):k_.atStart(Le.doc);c.dispatch(Le.setSelection(ke)),c.focus()}function te(Se){return Se?(n.signature?uo(Se,n.signature):Se).trim().length===0:!0}function Z(){const{schema:Se,tr:Le}=u,ke=Se.nodes.paragraph.create(),De=Le.insert(0,ke);c.dispatch(De),Y("start")}function G(Se){if(n.disabled)return;const Le=N(Se);te(Le)&&z.value?Z():n.focusOnMount&&Y("end")}function H(){F.value.click()}function W(Se=n.modelValue){const Le=N(Se);u=a(Le,n.placeholder,j.value,{onImageUpload:H},k.value),c.updateState(u),G(Le)}function J(){let Se=n.modelValue;const Le=te(Se);Se=li(Se,n.signature),W(Se),Le&&Z()}function ee(){if(!n.signature)return;let Se=n.modelValue;Se=uo(Se,n.signature),W(Se)}function ge(Se){Se?J():ee()}function Ee(){const Se=L.value.getBoundingClientRect(),Le=O.value.getBoundingClientRect();R.value={top:`${Le.top-Se.top-30}px`,left:`${Le.left-Se.left-4}px`}}function le(Se){n.showImageResizeToolbar&&($C(O.value,Se,c),I.value=!1)}function _e(){n.showImageResizeToolbar&&(O.value=document.querySelector("img.ProseMirror-selectednode"),O.value?(I.value=!!O.value,Ee()):I.value=!1)}function $e(){s("input",V()),s("update:modelValue",V())}function He(){O.value&&(document.querySelector("img.ProseMirror-selectednode")||(I.value=!1))}function Je(){return i("enter")}function Xe(){return i("cmd_enter")}$s({"Alt+KeyP":{action:Y,allowOnFocusedInput:!0},"Alt+KeyL":{action:Y,allowOnFocusedInput:!0}});function Qe(Se){const{tr:Le}=c.state,ke=DC(c.state,Se);ke&&(c.dispatch(Le.insert(ke.pos,ke.node).scrollIntoView()),Y())}async function rt(Se){try{const{fileUrl:Le}=await wO(Se);Le&&Qe(Le),ce(o("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SUCCESS"))}catch{ce(o("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_ERROR"))}}function at(){const Se=F.value.files[0];nc(Se,a1)?rt(Se):ce(o("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SIZE_ERROR",{size:a1})),F.value=""}function Et(Se){HC(Se)&&Je()&&!n.overrideLineBreaks&&Se.preventDefault()}async function Lt(Se,Le=0,ke=0){u=MC(c,Se,Le,ke),$e(),await tn(),LC(c)}function q(Se,Le=0){const ke=Le||c.state.selection.from||0;let De=new D_(Rp).parse(Se);Lt(De,ke,void 0)}function ae(Se,Le){if(!c)return;let{node:ke,from:De,to:Ue}=xC(c,Se,Le,b.value,n.variables);if(!ke)return;Lt(ke,De,Ue);const de={mention:ua.USED_MENTIONS,cannedResponse:ua.INSERTED_A_CANNED_RESPONSE,variable:ua.INSERTED_A_VARIABLE,emoji:ua.INSERTED_AN_EMOJI};Pt(de[Se])}function ie(Se){WC(Se)&&Xe()&&!n.overrideLineBreaks&&Se.preventDefault()}function be(Se){Je()&&Et(Se),Xe()&&ie(Se)}function fe(){c=new RC(D.value,{state:u,editable:()=>!n.disabled,dispatchTransaction:Se=>{u=u.apply(Se),c.updateState(u),Se.docChanged&&$e()},handleDOMEvents:{keyup:()=>{n.disabled||(l.start(),He())},keydown:(Se,Le)=>!n.disabled&&be(Le),focus:()=>!n.disabled&&s("focus"),click:()=>!n.disabled&&_e(),blur:()=>{n.disabled||(l.stop(),s("blur"))},paste:(Se,Le)=>{if(n.disabled)return;Le.clipboardData.files.length>0&&Le.preventDefault()}}})}return ct(C(()=>n.modelValue),(Se="")=>{Se!==V()&&W(Se)}),ct(C(()=>n.editorId),()=>{m.value=!1,g.value=!1,f.value=!1,S.value="",W(n.modelValue)}),ct(C(()=>n.isPrivate),()=>{W(n.modelValue)}),ct(C(()=>n.updateSelectionWith),(Se,Le)=>{if(c&&Se!==Le&&n.updateSelectionWith!==""){const ke=c.state.schema.text(n.updateSelectionWith),De=c.state.tr.replaceSelectionWith(ke);c.focus(),u=c.state.apply(De),c.updateState(u),$e(),s("clearSelection")}}),ct(z,Se=>{n.allowSignature&&ge(Se)}),dt(()=>{u=a(n.modelValue,n.placeholder,j.value,{onImageUpload:H},k.value),fe(),c.updateState(u),n.focusOnMount&&Y()}),Ei(jt.INSERT_INTO_RICH_EDITOR,q),(Se,Le)=>(p(),v("div",{ref_key:"editorRoot",ref:L,class:"relative w-full"},[d.value&&e.isPrivate?(p(),$(b7,{key:0,"search-key":T.value,onSelectAgent:Le[0]||(Le[0]=ke=>ae("mention",ke))},null,8,["search-key"])):w("",!0),P.value?(p(),$(Eg,{key:1,"search-key":S.value,onReplace:Le[1]||(Le[1]=ke=>ae("cannedResponse",ke))},null,8,["search-key"])):w("",!0),B.value?(p(),$(y7,{key:2,"search-key":_.value,onSelectVariable:Le[2]||(Le[2]=ke=>ae("variable",ke))},null,8,["search-key"])):w("",!0),g.value?(p(),$(f7,{key:3,"search-key":E.value,onSelectEmoji:Le[3]||(Le[3]=ke=>ae("emoji",ke))},null,8,["search-key"])):w("",!0),h("input",{ref_key:"imageUpload",ref:F,type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",hidden:"",onChange:at},null,544),h("div",{ref_key:"editor",ref:D},null,512),re(h("div",{class:"absolute shadow-md rounded-[4px] flex gap-1 py-1 px-1 bg-slate-50 dark:bg-slate-700 text-slate-800 dark:text-slate-50",style:Ht({top:R.value.top,left:R.value.left})},[(p(!0),v(pe,null,Ne(N(x),ke=>(p(),v("button",{key:ke.name,class:"text-xs font-medium rounded-[4px] border border-solid border-slate-200 dark:border-slate-600 px-1.5 py-0.5 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:De=>le(ke)},A(ke.name),9,N7))),128))],4),[[Jt,I.value&&e.showImageResizeToolbar]]),We(Se.$slots,"footer")],512))}},R7={components:{AutomationActionTeamMessageInput:a7,AutomationActionFileInput:l7,WootMessageEditor:Ko,NextButton:oe},props:{modelValue:{type:Object,default:()=>null},actionTypes:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},errorMessage:{type:String,default:""},showActionInput:{type:Boolean,default:!0},initialFileName:{type:String,default:""},isMacro:{type:Boolean,default:!1}},emits:["update:modelValue","input","removeAction","resetAction"],computed:{action_name:{get(){return this.modelValue?this.modelValue.action_name:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,action_name:e}),this.$emit("input",{...t,action_name:e})}},action_params:{get(){return this.modelValue?this.modelValue.action_params:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,action_params:e}),this.$emit("input",{...t,action_params:e})}},inputType(){return this.actionTypes.find(e=>e.key===this.action_name).inputType},actionInputStyles(){return{"has-error":this.errorMessage,"is-a-macro":this.isMacro}},castMessageVmodel:{get(){return Array.isArray(this.action_params)?this.action_params[0]:this.action_params},set(e){this.action_params=e}}},methods:{removeAction(){this.$emit("removeAction")},resetAction(){this.$emit("resetAction")}}},x7={class:"filter-inputs"},$7=["value"],M7={key:0,class:"filter__answer--wrap"},L7={key:0,class:"w-full"},k7={key:0,class:"multiselect-wrap--small"},D7={key:1,class:"multiselect-wrap--small"},P7=["placeholder"],B7=["placeholder"],F7={key:2,class:"filter-error"};function U7(e,t,n,s,o,a){const i=M("multiselect"),r=M("AutomationActionFileInput"),l=M("NextButton"),c=M("AutomationActionTeamMessageInput"),u=M("WootMessageEditor");return p(),v("div",{class:se(["filter",a.actionInputStyles])},[h("div",x7,[re(h("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.action_name=d),class:se(["action__question",{"full-width":!n.showActionInput}]),onChange:t[1]||(t[1]=d=>a.resetAction())},[(p(!0),v(pe,null,Ne(n.actionTypes,d=>(p(),v("option",{key:d.key,value:d.key},A(d.label),9,$7))),128))],34),[[gn,a.action_name]]),n.showActionInput?(p(),v("div",M7,[a.inputType?(p(),v("div",L7,[a.inputType==="search_select"?(p(),v("div",k7,[y(i,{modelValue:a.action_params,"onUpdate:modelValue":t[2]||(t[2]=d=>a.action_params=d),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},null,8,["modelValue","placeholder","select-label","options"])])):a.inputType==="multi_select"?(p(),v("div",D7,[y(i,{modelValue:a.action_params,"onUpdate:modelValue":t[3]||(t[3]=d=>a.action_params=d),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},null,8,["modelValue","placeholder","select-label","options"])])):a.inputType==="email"?re((p(),v("input",{key:2,"onUpdate:modelValue":t[4]||(t[4]=d=>a.action_params=d),type:"email",class:"answer--text-input",placeholder:e.$t("AUTOMATION.ACTION.EMAIL_INPUT_PLACEHOLDER")},null,8,P7)),[[mt,a.action_params]]):a.inputType==="url"?re((p(),v("input",{key:3,"onUpdate:modelValue":t[5]||(t[5]=d=>a.action_params=d),type:"url",class:"answer--text-input",placeholder:e.$t("AUTOMATION.ACTION.URL_INPUT_PLACEHOLDER")},null,8,B7)),[[mt,a.action_params]]):w("",!0),a.inputType==="attachment"?(p(),$(r,{key:4,modelValue:a.action_params,"onUpdate:modelValue":t[6]||(t[6]=d=>a.action_params=d),"initial-file-name":n.initialFileName},null,8,["modelValue","initial-file-name"])):w("",!0)])):w("",!0)])):w("",!0),n.isMacro?w("",!0):(p(),$(l,{key:1,icon:"i-lucide-x",slate:"",ghost:"",class:"flex-shrink-0",onClick:a.removeAction},null,8,["onClick"]))]),a.inputType==="team_message"?(p(),$(c,{key:0,modelValue:a.action_params,"onUpdate:modelValue":t[7]||(t[7]=d=>a.action_params=d),teams:n.dropdownValues},null,8,["modelValue","teams"])):w("",!0),a.inputType==="textarea"?(p(),$(u,{key:1,modelValue:a.castMessageVmodel,"onUpdate:modelValue":t[8]||(t[8]=d=>a.castMessageVmodel=d),rows:"4","enable-variables":"",placeholder:e.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER"),class:"action-message"},null,8,["modelValue","placeholder"])):w("",!0),n.errorMessage?(p(),v("p",F7,A(n.errorMessage),1)):w("",!0)],2)}const yg=Ae(R7,[["render",U7],["__scopeId","data-v-57470a08"]]),Ln=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],Ba=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],Ll=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],G7=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],au=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"},{value:"starts_with",label:"Starts With"}],V7=[{attribute_key:"message_type",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],H7=[{attribute_key:"browser_language",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],W7=[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],z7=[{action_name:"assign_agent",action_params:[]}],j7=[{id:"incoming",name:"Incoming Message"},{id:"outgoing",name:"Outgoing Message"}],Sg=[{id:"nil",name:"None"},{id:"low",name:"Low"},{id:"medium",name:"Medium"},{id:"high",name:"High"},{id:"urgent",name:"Urgent"}],K7=e=>e.every(t=>typeof t=="string"),Y7=e=>e.every(t=>typeof t=="number"),X7=e=>(e.length<=0?e=[]:K7(e)||Y7(e)?e=[...e]:e=e.map(t=>t.id),e),q7=e=>(e.action_params.id?e.action_params=[e.action_params.id]:e.action_params=[e.action_params],e.action_params),ry=e=>JSON.parse(JSON.stringify(e)).map(s=>(Array.isArray(s.action_params)?s.action_params=X7(s.action_params):typeof s.action_params=="object"?s.action_params=q7(s):s.action_params?s.action_params=[s.action_params]:s.action_params=[],s)),Ag=e=>({date:"date",text:"plain_text",list:"search_select",checkbox:"search_select"})[e]||"plain_text",ly=(e,t)=>e.find(n=>n.attribute_key===t),Z7=(e,t)=>e.find(n=>n.attribute_key===t).attribute_values.map(n=>({id:n,name:n})),Q7=(e,t)=>e.find(n=>n.attribute_key===t&&n.attribute_display_type==="checkbox"),J7=(e,t)=>e.find(n=>n.attribute_key===t&&n.attribute_display_type==="list"),cy=e=>({list:Ln,text:Ll,number:Ln,link:Ln,date:G7,checkbox:Ln})[e]||Ln,o1=(e,t)=>e.map(n=>({key:n.attribute_key,name:n.attribute_display_name,inputType:Ag(n.attribute_display_type),filterOperators:cy(n.attribute_display_type),customAttributeType:t})),ef=(e,t="id")=>!e||!Array.isArray(e)?[]:e.map(n=>({id:n[t],name:n.title})),eF=({agents:e,teams:t,labels:n,slaPolicies:s,type:o,addNoneToListFn:a})=>({assign_agent:a?a(e):e,assign_team:a?a(t):t,send_email_to_team:t,add_label:ef(n,"title"),remove_label:ef(n,"title"),change_priority:Sg,add_sla:s})[o],tF=({agents:e,booleanFilterOptions:t,campaigns:n,contacts:s,countries:o,customAttributes:a,inboxes:i,languages:r,statusFilterOptions:l,teams:c,type:u})=>Q7(a,u)?t:J7(a,u)?Z7(a,u):{status:l,assignee_id:e,contact:s,inbox_id:i,team_id:c,campaigns:ef(n),browser_language:r,conversation_language:r,country_code:o,message_type:j7,priority:Sg}[u],nF=(e,t=[])=>{const n=e.action_params[0];if(!n)return"";if(e.action_name==="send_attachment"){const s=t.find(o=>o.blob_id===n);if(s)return s.filename.toString()}return""},i1=e=>e==="message_created"?V7:e==="conversation_opened"?H7:W7,r1=()=>z7,sF=e=>e.map(t=>({key:t.attribute_key,name:t.attribute_display_name,type:t.attribute_display_type})),aF=(e,t,n)=>e[t].conditions.find(s=>s.key===n).inputType,uy=e=>{const t=JSON.parse(JSON.stringify(e));return t.conditions[t.conditions.length-1].query_operator=null,t.conditions=po(t.conditions).payload,t.actions=ry(t.actions),t},oF=(e,t)=>e.find(n=>n.key===t),iF=(e=[],t=[],n,s)=>{const o=[];return e.length&&o.push({key:"conversation_custom_attribute",name:n,disabled:!0},...e),t.length&&o.push({key:"contact_custom_attribute",name:s,disabled:!0},...t),o},ud=(e,t)=>e[t].conditions,dy=(e,t,n)=>e[t.event_name].conditions.find(s=>s.key===n),py=(e,t,n,s)=>{const o=ly(e,s);return o?Ag(o.attribute_display_type):dy(t,n,s).inputType},hy=(e,t,n,s,o)=>{if(s==="edit"){const i=ly(e,o);if(i)return cy(i.attribute_display_type)}return dy(t,n,o).filterOperators},my=(e,t,n)=>e[t.event_name].conditions.find(s=>s.key===n).customAttributeType,fy=(e,t)=>t==="send_email_to_team"||t==="send_message"?!1:!!e.find(s=>s.key===t).inputType;function gy(){const e=nn(),{t}=Me(),n=Oe("agents/getAgents"),s=Oe("campaigns/getAllCampaigns"),o=Oe("contacts/getContacts"),a=Oe("inboxes/getInboxes"),i=Oe("labels/getLabels"),r=Oe("teams/getTeams"),l=Oe("sla/getSLA"),c=C(()=>[{id:!0,name:t("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:t("FILTER.ATTRIBUTE_LABELS.FALSE")}]),u=C(()=>({open:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.open.TEXT")},resolved:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.resolved.TEXT")},pending:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.pending.TEXT")},snoozed:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.snoozed.TEXT")},all:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.all.TEXT")}})),d=C(()=>{const T=u.value;return[...Object.keys(T).map(S=>({id:S,name:T[S].TEXT})),{id:"all",name:t("CHAT_LIST.FILTER_ALL")}]}),m=T=>[{id:"nil",name:t("AUTOMATION.NONE_OPTION")||"None"},...T||[]];return{booleanFilterOptions:c,statusFilterItems:u,statusFilterOptions:d,getConditionDropdownValues:T=>tF({agents:n.value,booleanFilterOptions:c.value,campaigns:s.value,contacts:o.value,customAttributes:e["attributes/getAttributes"].value,inboxes:a.value,statusFilterOptions:d.value,teams:r.value,languages:Gf,countries:xa,type:T}),getActionDropdownValues:T=>eF({agents:n.value,labels:i.value,teams:r.value,slaPolicies:l.value,type:T,addNoneToListFn:m}),agents:n,campaigns:s,contacts:o,inboxes:a,labels:i,teams:r,slaPolicies:l}}const rF={message_created:{conditions:[{key:"message_type",name:"MESSAGE_TYPE",inputType:"search_select",filterOperators:Ln},{key:"content",name:"MESSAGE_CONTAINS",inputType:"comma_separated_plain_text",filterOperators:Ba},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ba},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Ln},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Ln},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:au}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"add_label",name:"ADD_LABEL"},{key:"remove_label",name:"REMOVE_LABEL"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_created:{conditions:[{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:Ln},{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:Ln},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Ba},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:Ln},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:au},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Ba},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ba},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Ln},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Ln},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Ln}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_updated:{conditions:[{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:Ln},{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:Ln},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Ba},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:Ln},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Ba},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:au},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:Ll},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:Ll},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ba},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Ln},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Ln},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Ln}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_opened:{conditions:[{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:Ln},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:Ba},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:Ba},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:Ln},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:Ba},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:Ll},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:au},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:Ll},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:Ln},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:Ln},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:Ln}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]}},dd=[{key:"conversation_created",value:"CONVERSATION_CREATED"},{key:"conversation_updated",value:"CONVERSATION_UPDATED"},{key:"message_created",value:"MESSAGE_CREATED"},{key:"conversation_opened",value:"CONVERSATION_OPENED"}],pd=[{key:"assign_agent",label:"ASSIGN_AGENT",inputType:"search_select"},{key:"assign_team",label:"ASSIGN_TEAM",inputType:"search_select"},{key:"add_label",label:"ADD_LABEL",inputType:"multi_select"},{key:"remove_label",label:"REMOVE_LABEL",inputType:"multi_select"},{key:"send_email_to_team",label:"SEND_EMAIL_TO_TEAM",inputType:"team_message"},{key:"send_email_transcript",label:"SEND_EMAIL_TRANSCRIPT",inputType:"email"},{key:"mute_conversation",label:"MUTE_CONVERSATION",inputType:null},{key:"snooze_conversation",label:"SNOOZE_CONVERSATION",inputType:null},{key:"resolve_conversation",label:"RESOLVE_CONVERSATION",inputType:null},{key:"send_webhook_event",label:"SEND_WEBHOOK_EVENT",inputType:"url"},{key:"send_attachment",label:"SEND_ATTACHMENT",inputType:"attachment"},{key:"send_message",label:"SEND_MESSAGE",inputType:"textarea"},{key:"change_priority",label:"CHANGE_PRIORITY",inputType:"search_select"},{key:"add_sla",label:"ADD_SLA",inputType:"search_select"}];function _y(e=null){const t=nn(),{t:n}=Me(),{booleanFilterOptions:s,statusFilterOptions:o,getConditionDropdownValues:a,getActionDropdownValues:i,agents:r,campaigns:l,contacts:c,inboxes:u,labels:d,teams:m,slaPolicies:f}=gy(),g=X(e),T=structuredClone(rF),S=C(()=>{var F;return(F=g.value)==null?void 0:F.event_name});return{automation:g,automationTypes:T,agents:r,campaigns:l,contacts:c,inboxes:u,labels:d,teams:m,slaPolicies:f,booleanFilterOptions:s,statusFilterOptions:o,onEventChange:()=>{g.value.conditions=i1(S.value),g.value.actions=r1()},getConditionDropdownValues:a,appendNewCondition:()=>{const F=i1(S.value);g.value.conditions=[...g.value.conditions,...F]},appendNewAction:()=>{const F=r1();g.value.actions=[...g.value.actions,...F]},removeFilter:F=>{g.value.conditions.length<=1?ce(n("AUTOMATION.CONDITION.DELETE_MESSAGE")):g.value.conditions=g.value.conditions.filter((D,V)=>V!==F)},removeAction:F=>{g.value.actions.length<=1?ce(n("AUTOMATION.ACTION.DELETE_MESSAGE")):g.value.actions=g.value.actions.filter((D,V)=>V!==F)},resetFilter:(F,D)=>{const V=[...g.value.conditions];V[F]={...V[F],filter_operator:T[S.value].conditions.find(B=>B.key===D.attribute_key).filterOperators[0].value,values:""},g.value.conditions=V},resetAction:F=>{const D=[...g.value.actions];D[F]={...D[F],action_params:[]},g.value.actions=D},getActionDropdownValues:i,manifestCustomAttributes:()=>{const F=t["attributes/getAttributesByModel"].value("conversation_attribute"),D=t["attributes/getAttributesByModel"].value("contact_attribute"),V=o1(F,"conversation_attribute"),B=o1(D,"contact_attribute"),P=iF(V,B,n("AUTOMATION.CONDITION.CONVERSATION_CUSTOM_ATTR_LABEL"),n("AUTOMATION.CONDITION.CONTACT_CUSTOM_ATTR_LABEL"));["message_created","conversation_created","conversation_updated","conversation_opened"].forEach(k=>{T[k].conditions=[...T[k].conditions,...P]})}}}const lF="ATTRIBUTE_KEY_REQUIRED",cF="FILTER_OPERATOR_REQUIRED",uF="VALUE_REQUIRED",dF="VALUE_MUST_BE_BETWEEN_1_AND_998",pF="ACTION_PARAMETERS_REQUIRED",hF="ATLEAST_ONE_CONDITION_REQUIRED",mF="ATLEAST_ONE_ACTION_REQUIRED",fF=e=>e?Array.isArray(e)?!e.length:typeof e=="object"?!Object.keys(e).length:!1:!0,vy=e=>e.attribute_key?e.filter_operator?!["is_present","is_not_present"].includes(e.filter_operator)&&fF(e.values)?uF:e.filter_operator==="days_before"&&(parseInt(e.values,10)<=0||parseInt(e.values,10)>=999)?dF:null:cF:lF,gF=e=>{const t={};return["name","description","event_name"].forEach(s=>{e[s]||(t[s]=`${s.charAt(0).toUpperCase()+s.slice(1)} is required`)}),t},_F=e=>{const t={};return!e||e.length===0?(t.conditions=hF,t):(e.forEach((n,s)=>{const o=vy(n);o&&(t[`condition_${s}`]=o)}),t)},vF=e=>!["mute_conversation","snooze_conversation","resolve_conversation","remove_assigned_team"].includes(e.action_name)&&(!e.action_params||e.action_params.length===0)?pF:null,by=e=>!e||e.length===0?{actions:mF}:e.reduce((t,n,s)=>{const o=vF(n);return o&&(t[`action_${s}`]=o),t},{}),Ey=e=>{const t=gF(e),n=_F(e.conditions),s=by(e.actions);return{...t,...n,...s}},bF={name:null,description:null,event_name:"conversation_created",conditions:[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],actions:[{action_name:"assign_agent",action_params:[]}]},EF={components:{FilterInputBox:iy,AutomationActionInput:yg,NextButton:oe},props:{onClose:{type:Function,default:()=>{}}},emits:["saveAutomation"],setup(){const{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:o,appendNewAction:a,removeFilter:i,removeAction:r,resetFilter:l,resetAction:c,getActionDropdownValues:u,manifestCustomAttributes:d}=_y(bF);return{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:o,appendNewAction:a,removeFilter:i,removeAction:r,resetFilter:l,resetAction:c,getActionDropdownValues:u,manifestCustomAttributes:d}},data(){return{automationRuleEvent:dd[0].key,automationMutated:!1,show:!0,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"create",errors:{}}},computed:{...lt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),automationRuleEvents(){return dd.map(e=>({...e,value:this.$t(`AUTOMATION.EVENTS.${e.value}`)}))},hasAutomationMutated(){return!!(this.automation.conditions[0].values||this.automation.actions[0].action_params.length)},automationActionTypes(){return(this.isFeatureEnabled("sla")?pd:pd.filter(({key:t})=>t!=="add_sla")).map(t=>({...t,label:this.$t(`AUTOMATION.ACTIONS.${t.label}`)}))}},mounted(){this.$store.dispatch("inboxes/get"),this.$store.dispatch("agents/get"),this.$store.dispatch("contacts/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("campaigns/get"),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.manifestCustomAttributes()},methods:{getAttributes:ud,getInputType:py,getOperators:hy,getCustomAttributeType:my,showActionInput:fy,isFeatureEnabled(e){return this.isFeatureEnabledonAccount(this.accountId,e)},emitSaveAutomation(){if(this.errors=Ey(this.automation),Object.keys(this.errors).length===0){const e=uy(this.automation);this.$emit("saveAutomation",e,this.mode)}},getTranslatedAttributes(e,t){return ud(e,t).map(n=>{const s=n.customAttributeType||["contact_custom_attribute","conversation_custom_attribute"].includes(n.key);return{...n,name:s?n.name:this.$t(`AUTOMATION.ATTRIBUTES.${n.name}`)}})}}},TF={class:"flex flex-col modal-content"},yF={class:"w-full"},SF={class:"mb-6"},AF=["value"],IF={key:0,class:"message"},CF={key:0,class:"text-xs text-right text-green-500 pt-1 dark:text-green-500"},OF={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},NF={class:"mt-4"},wF={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},RF={class:"mt-4"},xF={class:"w-full"},$F={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function MF(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("woot-input"),l=M("FilterInputBox"),c=M("NextButton"),u=M("AutomationActionInput");return p(),v("div",null,[y(i,{"header-title":e.$t("AUTOMATION.ADD.TITLE")},null,8,["header-title"]),h("div",TF,[h("div",yF,[y(r,{modelValue:s.automation.name,"onUpdate:modelValue":t[0]||(t[0]=d=>s.automation.name=d),label:e.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",class:se({error:o.errors.name}),error:o.errors.name?e.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),y(r,{modelValue:s.automation.description,"onUpdate:modelValue":t[1]||(t[1]=d=>s.automation.description=d),label:e.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",class:se({error:o.errors.description}),error:o.errors.description?e.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),h("div",SF,[h("label",{class:se({error:o.errors.event_name})},[Re(A(e.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[2]||(t[2]=d=>s.automation.event_name=d),class:"m-0",onChange:t[3]||(t[3]=d=>s.onEventChange(s.automation))},[(p(!0),v(pe,null,Ne(a.automationRuleEvents,d=>(p(),v("option",{key:d.key,value:d.key},A(d.value),9,AF))),128))],544),[[gn,s.automation.event_name]]),o.errors.event_name?(p(),v("span",IF,A(e.$t("AUTOMATION.ADD.FORM.EVENT.ERROR")),1)):w("",!0)],2),a.hasAutomationMutated?(p(),v("p",CF,A(e.$t("AUTOMATION.FORM.RESET_MESSAGE")),1)):w("",!0)]),h("section",null,[h("label",null,A(e.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL")),1),h("div",OF,[(p(!0),v(pe,null,Ne(s.automation.conditions,(d,m)=>(p(),$(l,{key:m,modelValue:s.automation.conditions[m],"onUpdate:modelValue":f=>s.automation.conditions[m]=f,"filter-attributes":a.getTranslatedAttributes(s.automationTypes,s.automation.event_name),"input-type":a.getInputType(o.allCustomAttributes,s.automationTypes,s.automation,s.automation.conditions[m].attribute_key),operators:a.getOperators(o.allCustomAttributes,s.automationTypes,s.automation,o.mode,s.automation.conditions[m].attribute_key),"dropdown-values":s.getConditionDropdownValues(s.automation.conditions[m].attribute_key),"show-query-operator":m!==s.automation.conditions.length-1,"custom-attribute-type":a.getCustomAttributeType(s.automationTypes,s.automation,s.automation.conditions[m].attribute_key),"error-message":o.errors[`condition_${m}`]?e.$t(`AUTOMATION.ERRORS.${o.errors[`condition_${m}`]}`):"",onResetFilter:f=>s.resetFilter(m,s.automation.conditions[m]),onRemoveFilter:f=>s.removeFilter(m)},null,8,["modelValue","onUpdate:modelValue","filter-attributes","input-type","operators","dropdown-values","show-query-operator","custom-attribute-type","error-message","onResetFilter","onRemoveFilter"]))),128)),h("div",NF,[y(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"),onClick:s.appendNewCondition},null,8,["label","onClick"])])])]),h("section",null,[h("label",null,A(e.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL")),1),h("div",wF,[(p(!0),v(pe,null,Ne(s.automation.actions,(d,m)=>(p(),$(u,{key:m,modelValue:s.automation.actions[m],"onUpdate:modelValue":f=>s.automation.actions[m]=f,"action-types":a.automationActionTypes,"dropdown-values":s.getActionDropdownValues(s.automation.actions[m].action_name),"show-action-input":a.showActionInput(a.automationActionTypes,s.automation.actions[m].action_name),"error-message":o.errors[`action_${m}`]?e.$t(`AUTOMATION.ERRORS.${o.errors[`action_${m}`]}`):"",onResetAction:f=>s.resetAction(m),onRemoveAction:f=>s.removeAction(m)},null,8,["modelValue","onUpdate:modelValue","action-types","dropdown-values","show-action-input","error-message","onResetAction","onRemoveAction"]))),128)),h("div",RF,[y(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"),onClick:s.appendNewAction},null,8,["label","onClick"])])])]),h("div",xF,[h("div",$F,[y(c,{faded:"",slate:"",type:"reset",label:e.$t("AUTOMATION.ADD.CANCEL_BUTTON_TEXT"),onClick:Fe(n.onClose,["prevent"])},null,8,["label","onClick"]),y(c,{solid:"",blue:"",type:"submit",label:e.$t("AUTOMATION.ADD.SUBMIT"),onClick:a.emitSaveAutomation},null,8,["label","onClick"])])])])])])}const LF=Ae(EF,[["render",MF]]);function kF(){const{getConditionDropdownValues:e,getActionDropdownValues:t}=gy(),n=(i,r,l)=>{const c=sF(r);return i.conditions.map(u=>{const d=oF(c,u.attribute_key);let m="plain_text";return d?m=Ag(d.type):m=aF(l,i.event_name,u.attribute_key),m==="plain_text"||m==="date"?{...u,values:u.values[0]}:m==="comma_separated_plain_text"?{...u,values:u.values.join(",")}:{...u,query_operator:u.query_operator||"and",values:[...e(u.attribute_key)].filter(f=>[...u.values].includes(f.id))}})},s=(i,r)=>{const l=i.action_params,c=r.find(u=>u.key===i.action_name).inputType;return c==="multi_select"||c==="search_select"?[...t(i.action_name)].filter(u=>[...l].includes(u.id)):c==="team_message"?{team_ids:[...t(i.action_name)].filter(u=>[...l[0].team_ids].includes(u.id)),message:l[0].message}:[...l]},o=(i,r)=>i.actions.map(l=>({...l,action_params:l.action_params.length?s(l,r):[]}));return{formatAutomation:(i,r,l,c)=>({...i,conditions:n(i,r,l),actions:o(i,c)})}}const DF={components:{FilterInputBox:iy,NextButton:oe,AutomationActionInput:yg},props:{onClose:{type:Function,default:()=>{}},selectedResponse:{type:Object,default:()=>{}}},emits:["saveAutomation"],setup(){const{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:o,appendNewAction:a,removeFilter:i,removeAction:r,resetFilter:l,resetAction:c,getActionDropdownValues:u,manifestCustomAttributes:d}=_y(),{formatAutomation:m}=kF();return{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:o,appendNewAction:a,removeFilter:i,removeAction:r,resetFilter:l,resetAction:c,getActionDropdownValues:u,formatAutomation:m,manifestCustomAttributes:d}},data(){return{automationRuleEvent:dd[0].key,automationMutated:!1,show:!0,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"edit",errors:{}}},computed:{...lt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),automationRuleEvents(){return dd.map(e=>({...e,value:this.$t(`AUTOMATION.EVENTS.${e.value}`)}))},hasAutomationMutated(){return!!(this.automation.conditions[0].values||this.automation.actions[0].action_params.length)},automationActionTypes(){return(this.isFeatureEnabled("sla")?pd:pd.filter(({key:t})=>t!=="add_sla")).map(t=>({...t,label:this.$t(`AUTOMATION.ACTIONS.${t.label}`)}))}},mounted(){this.manifestCustomAttributes(),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.automation=this.formatAutomation(this.selectedResponse,this.allCustomAttributes,this.automationTypes,this.automationActionTypes)},methods:{getFileName:nF,getAttributes:ud,getInputType:py,getOperators:hy,getCustomAttributeType:my,showActionInput:fy,isFeatureEnabled(e){return this.isFeatureEnabledonAccount(this.accountId,e)},emitSaveAutomation(){if(this.errors=Ey(this.automation),Object.keys(this.errors).length===0){const e=uy(this.automation);this.$emit("saveAutomation",e,this.mode)}},getTranslatedAttributes(e,t){return ud(e,t).map(n=>{const s=n.customAttributeType||["contact_custom_attribute","conversation_custom_attribute"].includes(n.key);return{...n,name:s?n.name:this.$t(`AUTOMATION.ATTRIBUTES.${n.name}`)}})}}},PF={class:"flex flex-col modal-content"},BF={key:0,class:"w-full"},FF={class:"event_wrapper"},UF=["value"],GF={key:0,class:"message"},VF={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},HF={class:"mt-4"},WF={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},zF={class:"mt-4"},jF={class:"w-full"},KF={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function YF(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("woot-input"),l=M("FilterInputBox"),c=M("NextButton"),u=M("AutomationActionInput");return p(),v("div",null,[y(i,{"header-title":e.$t("AUTOMATION.EDIT.TITLE")},null,8,["header-title"]),h("div",PF,[s.automation?(p(),v("div",BF,[y(r,{modelValue:s.automation.name,"onUpdate:modelValue":t[0]||(t[0]=d=>s.automation.name=d),label:e.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",class:se({error:o.errors.name}),error:o.errors.name?e.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),y(r,{modelValue:s.automation.description,"onUpdate:modelValue":t[1]||(t[1]=d=>s.automation.description=d),label:e.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",class:se({error:o.errors.description}),error:o.errors.description?e.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),h("div",FF,[h("label",{class:se({error:o.errors.event_name})},[Re(A(e.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[2]||(t[2]=d=>s.automation.event_name=d),onChange:t[3]||(t[3]=d=>s.onEventChange(s.automation))},[(p(!0),v(pe,null,Ne(a.automationRuleEvents,d=>(p(),v("option",{key:d.key,value:d.key},A(d.value),9,UF))),128))],544),[[gn,s.automation.event_name]]),o.errors.event_name?(p(),v("span",GF,A(e.$t("AUTOMATION.ADD.FORM.EVENT.ERROR")),1)):w("",!0)],2)]),h("section",null,[h("label",null,A(e.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL")),1),h("div",VF,[(p(!0),v(pe,null,Ne(s.automation.conditions,(d,m)=>(p(),$(l,{key:m,modelValue:s.automation.conditions[m],"onUpdate:modelValue":f=>s.automation.conditions[m]=f,"filter-attributes":a.getTranslatedAttributes(s.automationTypes,s.automation.event_name),"input-type":a.getInputType(o.allCustomAttributes,s.automationTypes,s.automation,s.automation.conditions[m].attribute_key),operators:a.getOperators(o.allCustomAttributes,s.automationTypes,s.automation,o.mode,s.automation.conditions[m].attribute_key),"dropdown-values":s.getConditionDropdownValues(s.automation.conditions[m].attribute_key),"custom-attribute-type":a.getCustomAttributeType(s.automationTypes,s.automation,s.automation.conditions[m].attribute_key),"show-query-operator":m!==s.automation.conditions.length-1,"error-message":o.errors[`condition_${m}`]?e.$t(`AUTOMATION.ERRORS.${o.errors[`condition_${m}`]}`):"",onResetFilter:f=>s.resetFilter(m,s.automation.conditions[m]),onRemoveFilter:f=>s.removeFilter(m)},null,8,["modelValue","onUpdate:modelValue","filter-attributes","input-type","operators","dropdown-values","custom-attribute-type","show-query-operator","error-message","onResetFilter","onRemoveFilter"]))),128)),h("div",HF,[y(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"),onClick:s.appendNewCondition},null,8,["label","onClick"])])])]),h("section",null,[h("label",null,A(e.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL")),1),h("div",WF,[(p(!0),v(pe,null,Ne(s.automation.actions,(d,m)=>(p(),$(u,{key:m,modelValue:s.automation.actions[m],"onUpdate:modelValue":f=>s.automation.actions[m]=f,"action-types":a.automationActionTypes,"dropdown-values":s.getActionDropdownValues(d.action_name),"show-action-input":a.showActionInput(a.automationActionTypes,d.action_name),"error-message":o.errors[`action_${m}`]?e.$t(`AUTOMATION.ERRORS.${o.errors[`action_${m}`]}`):"","initial-file-name":a.getFileName(d,s.automation.files),onResetAction:f=>s.resetAction(m),onRemoveAction:f=>s.removeAction(m)},null,8,["modelValue","onUpdate:modelValue","action-types","dropdown-values","show-action-input","error-message","initial-file-name","onResetAction","onRemoveAction"]))),128)),h("div",zF,[y(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"),onClick:s.appendNewAction},null,8,["label","onClick"])])])]),h("div",jF,[h("div",KF,[y(c,{faded:"",slate:"",type:"reset",label:e.$t("AUTOMATION.EDIT.CANCEL_BUTTON_TEXT"),onClick:Fe(n.onClose,["prevent"])},null,8,["label","onClick"]),y(c,{solid:"",blue:"",type:"submit",label:e.$t("AUTOMATION.EDIT.SUBMIT"),onClick:a.emitSaveAutomation},null,8,["label","onClick"])])])])):w("",!0)])])}const XF=Ae(DF,[["render",YF],["__scopeId","data-v-fd015307"]]),qF={class:"py-4 ltr:pr-4 rtl:pl-4 min-w-[200px]"},ZF={class:"py-4 ltr:pr-4 rtl:pl-4"},QF={class:"py-4 ltr:pr-4 rtl:pl-4"},JF=["title"],eU={class:"py-4 min-w-xs"},tU={class:"flex gap-1 justify-end flex-shrink-0"},nU={__name:"AutomationRuleRow",props:{automation:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["toggle","edit","delete","clone"],setup(e,{emit:t}){const n=e,s=t,o=r=>Xu(new Date(r),"LLL d, yyyy"),a=r=>Xu(new Date(r),"LLL d, yyyy hh:mm a"),i=()=>{const{id:r,name:l,active:c}=n.automation;s("toggle",{id:r,name:l,status:c})};return(r,l)=>{const c=M("woot-switch"),u=qe("tooltip");return p(),v("tr",null,[h("td",qF,A(e.automation.name),1),h("td",ZF,A(e.automation.description),1),h("td",QF,[y(c,{"model-value":e.automation.active,onInput:i},null,8,["model-value"])]),h("td",{class:"py-4 ltr:pr-4 rtl:pl-4 min-w-[12px]",title:a(e.automation.created_on)},A(o(e.automation.created_on)),9,JF),h("td",eU,[h("div",tU,[re(y(oe,{icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":e.loading,onClick:l[0]||(l[0]=d=>r.$emit("edit",e.automation))},null,8,["is-loading"]),[[u,r.$t("AUTOMATION.FORM.EDIT"),void 0,{top:!0}]]),re(y(oe,{icon:"i-lucide-copy-plus",xs:"",faded:"","is-loading":e.loading,onClick:l[1]||(l[1]=d=>r.$emit("clone",e.automation))},null,8,["is-loading"]),[[u,r.$t("AUTOMATION.CLONE.TOOLTIP"),void 0,{top:!0}]]),re(y(oe,{"is-loading":e.loading,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:l[2]||(l[2]=d=>r.$emit("delete",e.automation))},null,8,["is-loading"]),[[u,r.$t("AUTOMATION.FORM.DELETE"),void 0,{top:!0}]])])])])}}},sU={class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},aU={class:"divide-y divide-n-weak text-n-slate-11"},oU={__name:"Index",setup(e){const t=nn(),n=pt(),{t:s}=Me(),o=X(null),a=X({}),i=X(!1),r=X(!1),l=X(!1),c=X({}),u=X(s("AUTOMATION.TOGGLE.ACTIVATION_TITLE")),d=X(s("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION")),m=C(()=>t["automations/getAutomations"].value),f=C(()=>t["automations/getUIFlags"].value),g=C(()=>t.getCurrentAccountId.value),T=C(()=>`${s("AUTOMATION.DELETE.CONFIRM.YES")} ${c.value.name}`),S=C(()=>`${s("AUTOMATION.DELETE.CONFIRM.NO")} ${c.value.name}`),_=C(()=>` ${c.value.name}?`),E=C(()=>t["accounts/isFeatureEnabledonAccount"].value(g.value,"sla"));dt(()=>{n.dispatch("inboxes/get"),n.dispatch("agents/get"),n.dispatch("contacts/get"),n.dispatch("teams/get"),n.dispatch("labels/get"),n.dispatch("campaigns/get"),n.dispatch("automations/get"),E.value&&n.dispatch("sla/get")});const b=()=>{i.value=!0},I=()=>{i.value=!1},R=U=>{c.value=U,r.value=!0},O=()=>{r.value=!1},x=U=>{l.value=!0,c.value=U},L=()=>{l.value=!1},F=async U=>{try{await n.dispatch("automations/delete",U),ce(s("AUTOMATION.DELETE.API.SUCCESS_MESSAGE"))}catch{ce(s("AUTOMATION.DELETE.API.ERROR_MESSAGE"))}finally{a.value[c.value.id]=!1}},D=()=>{a.value[c.value.id]=!0,L(),F(c.value.id)},V=async({id:U})=>{try{await n.dispatch("automations/clone",U),ce(s("AUTOMATION.CLONE.API.SUCCESS_MESSAGE")),n.dispatch("automations/get")}catch{ce(s("AUTOMATION.CLONE.API.ERROR_MESSAGE"))}finally{a.value[c.value.id]=!1}},B=async(U,j)=>{try{const z=j==="edit"?"automations/update":"automations/create",Y=s(j==="edit"?"AUTOMATION.EDIT.API.SUCCESS_MESSAGE":"AUTOMATION.ADD.API.SUCCESS_MESSAGE");await n.dispatch(z,U),ce(Y),I(),O()}catch{const Y=s(j==="edit"?"AUTOMATION.EDIT.API.ERROR_MESSAGE":"AUTOMATION.ADD.API.ERROR_MESSAGE");ce(Y)}},P=async({id:U,name:j,status:z})=>{try{if(z?(u.value=s("AUTOMATION.TOGGLE.DEACTIVATION_TITLE"),d.value=s("AUTOMATION.TOGGLE.DEACTIVATION_DESCRIPTION",{automationName:j})):(u.value=s("AUTOMATION.TOGGLE.ACTIVATION_TITLE"),d.value=s("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION",{automationName:j})),await o.value.showConfirmation()){await n.dispatch("automations/update",{id:U,active:!z});const te=s(z?"AUTOMATION.TOGGLE.DEACTIVATION_SUCCESFUL":"AUTOMATION.TOGGLE.ACTIVATION_SUCCESFUL");ce(te)}}catch{ce(s("AUTOMATION.EDIT.API.ERROR_MESSAGE"))}},k=C(()=>[s("AUTOMATION.LIST.TABLE_HEADER.NAME"),s("AUTOMATION.LIST.TABLE_HEADER.DESCRIPTION"),s("AUTOMATION.LIST.TABLE_HEADER.ACTIVE"),s("AUTOMATION.LIST.TABLE_HEADER.CREATED_ON")]);return(U,j)=>{const z=M("woot-modal"),Y=M("woot-delete-modal"),te=M("woot-confirm-modal");return p(),$(Da,{"is-loading":f.value.isFetching,"loading-message":U.$t("AUTOMATION.LOADING"),"no-records-found":!m.value.length,"no-records-message":U.$t("AUTOMATION.LIST.404")},{header:K(()=>[y(Cs,{title:U.$t("AUTOMATION.HEADER"),description:U.$t("AUTOMATION.DESCRIPTION"),"link-text":U.$t("AUTOMATION.LEARN_MORE"),"feature-name":"automation"},{actions:K(()=>[y(oe,{icon:"i-lucide-circle-plus",label:U.$t("AUTOMATION.HEADER_BTN_TXT"),onClick:b},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:K(()=>[h("table",sU,[h("thead",null,[(p(!0),v(pe,null,Ne(k.value,Z=>(p(),v("th",{key:Z,class:"py-4 ltr:pr-4 rtl:pl-4 rtl:text-right ltr:text-left font-semibold text-n-slate-11"},A(Z),1))),128))]),h("tbody",aU,[(p(!0),v(pe,null,Ne(m.value,Z=>(p(),$(nU,{key:Z.id,automation:Z,loading:a.value[Z.id],onClone:V,onToggle:P,onEdit:R,onDelete:x},null,8,["automation","loading"]))),128))])])]),default:K(()=>[y(z,{show:i.value,"onUpdate:show":j[0]||(j[0]=Z=>i.value=Z),size:"medium","on-close":I},{default:K(()=>[i.value?(p(),$(LF,{key:0,"on-close":I,onSaveAutomation:B})):w("",!0)]),_:1},8,["show"]),y(Y,{show:l.value,"onUpdate:show":j[1]||(j[1]=Z=>l.value=Z),"on-close":L,"on-confirm":D,title:U.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:U.$t("AUTOMATION.DELETE.CONFIRM.MESSAGE"),"message-value":_.value,"confirm-text":T.value,"reject-text":S.value},null,8,["show","title","message","message-value","confirm-text","reject-text"]),y(z,{show:r.value,"onUpdate:show":j[2]||(j[2]=Z=>r.value=Z),size:"medium","on-close":O},{default:K(()=>[r.value?(p(),$(XF,{key:0,"on-close":O,"selected-response":c.value,onSaveAutomation:B},null,8,["selected-response"])):w("",!0)]),_:1},8,["show"]),y(te,{ref_key:"confirmDialog",ref:o,title:u.value,description:d.value},null,8,["title","description"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},iU={routes:[{path:At("accounts/:accountId/settings/automation"),component:ea,children:[{path:"",redirect:e=>({name:"automation_list",params:e.params})},{path:"list",name:"automation_list",component:oU,meta:{featureFlag:_t.AUTOMATIONS,permissions:["administrator"]}}]}]},is={CLOUD:"cloud",ENTERPRISE:"enterprise",COMMUNITY:"community"},rU={class:"text-sm text-slate-700 dark:text-slate-200 font-medium"},lU={__name:"TableFooterResults",props:{firstIndex:{type:Number,default:0},lastIndex:{type:Number,default:0},totalCount:{type:Number,default:0}},setup(e){return(t,n)=>(p(),v("span",rU,A(t.$t("GENERAL.SHOWING_RESULTS",{firstIndex:e.firstIndex,lastIndex:e.lastIndex,totalCount:e.totalCount})),1))}},cU={class:"flex items-center h-8 outline outline-1 outline-n-weak rounded-lg"},uU={class:"flex items-center gap-3 px-3 tabular-nums bg-n-slate-9/10 h-full"},dU={class:"text-sm text-n-slate-12"},pU={class:"text-sm text-n-slate-11"},hU={__name:"TableFooterPagination",props:{currentPage:{type:Number,default:1},totalPages:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=e,s=t,o=C(()=>n.currentPage===n.totalPages||n.totalPages===1),a=C(()=>n.currentPage===1),i=C(()=>n.currentPage===n.totalPages),r=C(()=>n.currentPage===1);function l(f){s("pageChange",f)}const c=()=>{c.value||l(n.currentPage+1)},u=()=>{r.value||l(n.currentPage-1)},d=()=>{a.value||l(1)},m=()=>{o.value||l(n.totalPages)};return(f,g)=>(p(),v("div",cU,[y(oe,{faded:"",sm:"",slate:"",icon:"i-lucide-chevrons-left",class:"ltr:rounded-l-lg ltr:rounded-r-none rtl:rounded-r-lg rtl:rounded-l-none",disabled:a.value,onClick:d},null,8,["disabled"]),g[1]||(g[1]=h("div",{class:"flex items-center justify-center bg-n-slate-9/10 h-full"},[h("div",{class:"w-px h-4 rounded-sm bg-n-strong"})],-1)),y(oe,{faded:"",sm:"",slate:"",icon:"i-lucide-chevron-left",class:"rounded-none",disabled:r.value,onClick:u},null,8,["disabled"]),h("div",uU,[h("span",dU,A(e.currentPage),1),g[0]||(g[0]=h("span",{class:"text-n-slate-11"},"/",-1)),h("span",pU,A(e.totalPages),1)]),y(oe,{faded:"",sm:"",slate:"",icon:"i-lucide-chevron-right",class:"rounded-none",disabled:i.value,onClick:c},null,8,["disabled"]),g[2]||(g[2]=h("div",{class:"flex items-center justify-center bg-n-slate-9/10 h-full"},[h("div",{class:"w-px h-4 rounded-sm bg-n-strong"})],-1)),y(oe,{faded:"",sm:"",slate:"",icon:"i-lucide-chevrons-right",class:"ltr:rounded-r-lg ltr:rounded-l-none rtl:rounded-l-lg rtl:rounded-r-none",disabled:o.value,onClick:m},null,8,["disabled"])]))}},mU={key:0,class:"flex items-center justify-between h-12 px-6"},Ig={__name:"TableFooter",props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},totalCount:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=e,s=t,o=C(()=>Math.ceil(n.totalCount/n.pageSize)),a=C(()=>n.pageSize*(n.currentPage-1)+1),i=C(()=>Math.min(n.totalCount,n.pageSize*n.currentPage)),r=C(()=>n.totalCount&&!(a.value>n.totalCount));return(l,c)=>r.value?(p(),v("footer",mU,[y(lU,{"first-index":a.value,"last-index":i.value,"total-count":e.totalCount},null,8,["first-index","last-index","total-count"]),e.totalCount?(p(),$(hU,{key:0,"current-page":e.currentPage,"total-pages":o.value,"total-count":e.totalCount,"page-size":e.pageSize,onPageChange:c[0]||(c[0]=u=>s("pageChange",u))},null,8,["current-page","total-pages","total-count","page-size"])):w("",!0)])):w("",!0)}},Ty={0:"agent",1:"administrator"},fU={0:"online",1:"offline",2:"busy"},gU={"automationrule:create":"AUDIT_LOGS.AUTOMATION_RULE.ADD","automationrule:update":"AUDIT_LOGS.AUTOMATION_RULE.EDIT","automationrule:destroy":"AUDIT_LOGS.AUTOMATION_RULE.DELETE","webhook:create":"AUDIT_LOGS.WEBHOOK.ADD","webhook:update":"AUDIT_LOGS.WEBHOOK.EDIT","webhook:destroy":"AUDIT_LOGS.WEBHOOK.DELETE","inbox:create":"AUDIT_LOGS.INBOX.ADD","inbox:update":"AUDIT_LOGS.INBOX.EDIT","inbox:destroy":"AUDIT_LOGS.INBOX.DELETE","user:sign_in":"AUDIT_LOGS.USER_ACTION.SIGN_IN","user:sign_out":"AUDIT_LOGS.USER_ACTION.SIGN_OUT","team:create":"AUDIT_LOGS.TEAM.ADD","team:update":"AUDIT_LOGS.TEAM.EDIT","team:destroy":"AUDIT_LOGS.TEAM.DELETE","macro:create":"AUDIT_LOGS.MACRO.ADD","macro:update":"AUDIT_LOGS.MACRO.EDIT","macro:destroy":"AUDIT_LOGS.MACRO.DELETE","accountuser:create":"AUDIT_LOGS.ACCOUNT_USER.ADD","accountuser:update:self":"AUDIT_LOGS.ACCOUNT_USER.EDIT.SELF","accountuser:update:other":"AUDIT_LOGS.ACCOUNT_USER.EDIT.OTHER","accountuser:update:deleted":"AUDIT_LOGS.ACCOUNT_USER.EDIT.DELETED","inboxmember:create":"AUDIT_LOGS.INBOX_MEMBER.ADD","inboxmember:destroy":"AUDIT_LOGS.INBOX_MEMBER.REMOVE","teammember:create":"AUDIT_LOGS.TEAM_MEMBER.ADD","teammember:destroy":"AUDIT_LOGS.TEAM_MEMBER.REMOVE","account:update":"AUDIT_LOGS.ACCOUNT.EDIT","conversation:destroy":"AUDIT_LOGS.CONVERSATION.DELETE"};function l1(e){return Array.isArray(e)?e[e.length-1]:e}function _U(e){let t=[],n=[];return e.role&&e.role.length&&(t.push("role"),n.push(Ty[l1(e.role)])),e.availability&&e.availability.length&&(t.push("availability"),n.push(fU[l1(e.availability)])),{changes:t,values:n}}function qd(e,t){var s;return e===null?"System":((s=t.find(o=>o.id===e))==null?void 0:s.name)||e}function vU(e,t,n){t.invitee=qd(e.audited_changes.user_id,n);const s=e.audited_changes.role;return t.role=Ty[s]||"unknown",t}function bU(e,t,n){var o,a;e.user_id!==((o=e.auditable)==null?void 0:o.user_id)&&(t.user=qd((a=e.auditable)==null?void 0:a.user_id,n));const s=_U(e.audited_changes);return s&&(t.attributes=s.changes,t.values=s.values),t}function EU(e,t,n){const s=e.audited_changes.user_id;return s&&s!==void 0&&(t.user=qd(s,n)),t}function TU(e,t){return e.audited_changes.team_id&&(t.team_id=e.audited_changes.team_id),t}function yU(e,t){return e.audited_changes.inbox_id&&(t.inbox_id=e.audited_changes.inbox_id),t}function SU(e,t,n){return e.audited_changes&&(t=EU(e,t,n),t=TU(e,t),t=yU(e,t)),t}function AU(e,t,n,s){return s==="create"?vU(e,t,n):s==="update"?bU(e,t,n):t}function IU(e,t){var a;let n={agentName:qd(e.user_id,t),id:e.auditable_id};const s=e.auditable_type.toLowerCase(),o=e.action.toLowerCase();return s==="conversation"&&o==="destroy"&&(n.id=((a=e.audited_changes)==null?void 0:a.display_id)||e.auditable_id),s==="accountuser"&&(n=AU(e,n,t,o)),(s==="inboxmember"||s==="teammember")&&(n=SU(e,n,t)),n}function CU(e){return e.auditable===null?":deleted":e.user_id===e.auditable.user_id?":self":":other"}const OU=e=>{const t=e.auditable_type.toLowerCase(),n=e.action.toLowerCase();let s=`${t}:${n}`;return t==="accountuser"&&n==="update"&&(s+=CU(e)),gU[s]||""},NU={class:"flex-1 overflow-auto"},wU={class:"mt-6 flex-1 text-slate-700 dark:text-slate-300"},RU={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},xU={key:2,class:"min-w-full overflow-x-auto"},$U={class:"divide-y divide-slate-75 dark:divide-slate-700"},MU={class:"divide-y divide-n-weak text-n-slate-11"},LU={class:"py-4 ltr:pr-4 rtl:pl-4 break-all whitespace-nowrap"},kU={class:"py-4 ltr:pr-4 rtl:pl-4 break-all whitespace-nowrap"},DU={class:"py-4 w-[8.75rem]"},PU={__name:"Index",setup(e){const t=nn(),n=pt(),s=xn(),o=C(()=>t["auditlogs/getAuditLogs"].value),a=C(()=>t["auditlogs/getUIFlags"].value),i=C(()=>t["auditlogs/getMeta"].value),r=C(()=>t["agents/getAgents"].value),{t:l}=Me(),c=sn(),u=C(()=>Number(c.query.page??1)),d=T=>{try{n.dispatch("auditlogs/fetch",{page:T})}catch(S){const _=(S==null?void 0:S.message)||l("AUDIT_LOGS.API.ERROR_MESSAGE");ce(_)}},m=T=>{const S=IU(T,r.value),_=OU(T),E=I=>Array.isArray(I)?I.join(", "):I,b={...S,attributes:E(S.attributes),values:E(S.values)};return l(_,b)},f=T=>{s.push({name:"auditlogs_list",query:{page:T}})};dt(()=>{n.dispatch("agents/get"),d(u.value)}),ct(u,(T,S)=>{T!==S&&d(T)});const g=C(()=>[l("AUDIT_LOGS.LIST.TABLE_HEADER.ACTIVITY"),l("AUDIT_LOGS.LIST.TABLE_HEADER.TIME"),l("AUDIT_LOGS.LIST.TABLE_HEADER.IP_ADDRESS")]);return(T,S)=>{const _=M("woot-loading-state");return p(),v("div",NU,[y(Cs,{title:T.$t("AUDIT_LOGS.HEADER"),description:T.$t("AUDIT_LOGS.DESCRIPTION"),"link-text":T.$t("AUDIT_LOGS.LEARN_MORE"),"feature-name":"audit_logs"},null,8,["title","description","link-text"]),h("div",wU,[a.value.fetchingList?(p(),$(_,{key:0,message:T.$t("AUDIT_LOGS.LOADING")},null,8,["message"])):o.value.length?(p(),v("div",xU,[h("table",$U,[h("thead",null,[(p(!0),v(pe,null,Ne(g.value,E=>(p(),v("th",{key:E,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},A(E),1))),128))]),h("tbody",MU,[(p(!0),v(pe,null,Ne(o.value,E=>(p(),v("tr",{key:E.id},[h("td",LU,A(m(E)),1),h("td",kU,A(N(Ac)(E.created_at,"MMM dd, yyyy hh:mm a")),1),h("td",DU,A(E.remote_address),1)]))),128))])]),y(Ig,{"current-page":Number(i.value.currentPage),"total-count":i.value.totalEntries,"page-size":i.value.perPage,class:"border-slate-50 dark:border-slate-800 border-t !px-0 py-4",onPageChange:f},null,8,["current-page","total-count","page-size"])])):(p(),v("p",RU,A(T.$t("AUDIT_LOGS.LIST.404")),1))])])}}},BU={routes:[{path:At("accounts/:accountId/settings/audit-logs"),component:ea,children:[{path:"",redirect:e=>({name:"auditlogs_list",params:e.params})},{path:"list",name:"auditlogs_list",meta:{featureFlag:_t.AUDIT_LOGS,installationTypes:[is.CLOUD,is.ENTERPRISE],permissions:["administrator"]},component:PU}]}]};function fo(e,t){try{const n=N(e);return tl(n,t)}catch(n){return xf("transform-keys-error",{payload:e,options:t,op:"camelCase"}),el(n),e}}function As(e,t){try{const n=N(e);return RO(n,t)}catch(n){return xf("transform-keys-error",{payload:e,options:t,op:"snakeCase"}),el(n),e}}function Cg(){const e=pt(),{isCloudFeatureEnabled:t,currentAccount:n}=zn(),s=C(()=>t(_t.CAPTAIN)),o=C(()=>{var l,c;return(c=(l=n.value)==null?void 0:l.limits)==null?void 0:c.captain}),a=C(()=>{var l;return(l=o.value)!=null&&l.documents?fo(o.value.documents):null}),i=C(()=>{var l;return(l=o.value)!=null&&l.responses?fo(o.value.responses):null});return{captainEnabled:s,captainLimits:o,documentLimits:a,responseLimits:i,fetchLimits:()=>{e.dispatch("accounts/limits")}}}const FU={class:"flex gap-5 items-center justify-between text-xs uppercase text-n-slate-10"},UU={class:"font-medium tracking-wider"},GU={class:"tabular-nums"},VU={class:"rounded-full overflow-hidden h-2 w-full bg-n-slate-4 mt-2"},c1={__name:"BillingMeter",props:{title:{type:String,required:!0},consumed:{type:Number,required:!0},totalCount:{type:Number,required:!0}},setup(e){const t=e,n=C(()=>Math.round(t.consumed/t.totalCount*100)),s=C(()=>n.value<50?"bg-n-teal-10":n.value<80?"bg-n-amber-10":"bg-n-ruby-10");return(o,a)=>(p(),v(pe,null,[h("div",FU,[h("div",UU,A(e.title),1),h("div",GU,A(e.consumed)+" / "+A(e.totalCount),1)]),h("div",VU,[h("div",{class:se(["h-2",s.value]),style:Ht({width:`${n.value}%`})},null,6)])],64))}},HU={class:"grid grid-cols-[1fr_auto] gap-5"},WU={class:"text-base font-medium text-n-slate-12"},zU={class:"text-sm mt-1 text-n-slate-11"},yy={__name:"BillingHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0}},setup(e){return(t,n)=>(p(),v("div",HU,[h("div",null,[h("span",WU,A(e.title),1),h("p",zU,A(e.description),1)]),We(t.$slots,"default")]))}},jU={class:"rounded-xl shadow-sm border border-n-weak bg-n-solid-2 py-5 space-y-5"},kh={__name:"BillingCard",props:{title:{type:String,required:!0},description:{type:String,required:!0}},setup(e){return(t,n)=>(p(),v("div",jU,[y(yy,{title:e.title,description:e.description,class:"px-5"},{default:K(()=>[We(t.$slots,"action")]),_:3},8,["title","description"]),We(t.$slots,"default")]))}},KU={class:"px-5"},YU={class:"text-n-slate-11 text-xs"},XU={class:"mt-2 text-xl font-medium text-n-slate-12"},Dh={__name:"DetailItem",props:{label:{type:String,required:!0},value:{type:String,required:!0}},setup(e){return(t,n)=>(p(),v("div",KU,[h("span",YU,A(e.label),1),h("div",XU,A(e.value),1)]))}},qU={class:"grid gap-4"},ZU={key:0,class:"grid lg:grid-cols-4 sm:grid-cols-3 grid-cols-1 gap-2 divide-x divide-n-weak"},QU={key:0,class:"px-5"},JU={key:1,class:"px-5"},eG={__name:"Index",setup(e){const{currentAccount:t}=zn(),{captainEnabled:n,captainLimits:s,documentLimits:o,responseLimits:a,fetchLimits:i}=Cg(),r=Oe("accounts/getUIFlags"),l=pt(),c=C(()=>t.value.custom_attributes||{}),u=C(()=>c.value.plan_name),d=C(()=>c.value.subscribed_quantity),m=C(()=>{if(!c.value.subscription_ends_on)return"";const _=new Date(c.value.subscription_ends_on);return ms(_,"dd MMM, yyyy")}),f=C(()=>!!u.value),g=async()=>{f.value||(l.dispatch("accounts/subscription"),i())},T=()=>{l.dispatch("accounts/checkout")},S=()=>{window.$chatwoot&&window.$chatwoot.toggle()};return dt(g),(_,E)=>(p(),$(Da,{"is-loading":N(r).isFetchingItem,"loading-message":_.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!f.value,"no-records-message":_.$t("BILLING_SETTINGS.NO_BILLING_USER")},{header:K(()=>[y(Cs,{title:_.$t("BILLING_SETTINGS.TITLE"),description:_.$t("BILLING_SETTINGS.DESCRIPTION"),"link-text":_.$t("BILLING_SETTINGS.VIEW_PRICING"),"feature-name":"billing"},null,8,["title","description","link-text"])]),body:K(()=>[h("section",qU,[y(kh,{title:_.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.TITLE"),description:_.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.DESCRIPTION")},{action:K(()=>[y(oe,{sm:"",solid:"",blue:"",onClick:T},{default:K(()=>[Re(A(_.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.BUTTON_TXT")),1)]),_:1})]),default:K(()=>[u.value||d.value||m.value?(p(),v("div",ZU,[y(Dh,{label:_.$t("BILLING_SETTINGS.CURRENT_PLAN.TITLE"),value:u.value},null,8,["label","value"]),d.value?(p(),$(Dh,{key:0,label:_.$t("BILLING_SETTINGS.CURRENT_PLAN.SEAT_COUNT"),value:d.value},null,8,["label","value"])):w("",!0),m.value?(p(),$(Dh,{key:1,label:_.$t("BILLING_SETTINGS.CURRENT_PLAN.RENEWS_ON"),value:m.value},null,8,["label","value"])):w("",!0)])):w("",!0)]),_:1},8,["title","description"]),N(n)?(p(),$(kh,{key:0,title:_.$t("BILLING_SETTINGS.CAPTAIN.TITLE"),description:_.$t("BILLING_SETTINGS.CAPTAIN.DESCRIPTION")},{action:K(()=>[y(oe,{sm:"",faded:"",slate:"",disabled:""},{default:K(()=>[Re(A(_.$t("BILLING_SETTINGS.CAPTAIN.BUTTON_TXT")),1)]),_:1})]),default:K(()=>[N(s)&&N(a)?(p(),v("div",QU,[y(c1,fs({title:_.$t("BILLING_SETTINGS.CAPTAIN.RESPONSES")},N(a)),null,16,["title"])])):w("",!0),N(s)&&N(o)?(p(),v("div",JU,[y(c1,fs({title:_.$t("BILLING_SETTINGS.CAPTAIN.DOCUMENTS")},N(o)),null,16,["title"])])):w("",!0)]),_:1},8,["title","description"])):(p(),$(kh,{key:1,title:_.$t("BILLING_SETTINGS.CAPTAIN.TITLE"),description:_.$t("BILLING_SETTINGS.CAPTAIN.UPGRADE")},{action:K(()=>[y(oe,{sm:"",solid:"",slate:"",onClick:T},{default:K(()=>[Re(A(_.$t("CAPTAIN.PAYWALL.UPGRADE_NOW")),1)]),_:1})]),_:1},8,["title","description"])),y(yy,{class:"px-1 mt-5",title:_.$t("BILLING_SETTINGS.CHAT_WITH_US.TITLE"),description:_.$t("BILLING_SETTINGS.CHAT_WITH_US.DESCRIPTION")},{default:K(()=>[y(oe,{sm:"",solid:"",slate:"",icon:"i-lucide-life-buoy",onOpen:S},{default:K(()=>[Re(A(_.$t("BILLING_SETTINGS.CHAT_WITH_US.BUTTON_TXT")),1)]),_:1})]),_:1},8,["title","description"])])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"]))}},tG={routes:[{path:At("accounts/:accountId/settings/billing"),meta:{permissions:["administrator"],installationTypes:[is.CLOUD]},component:ea,props:{headerTitle:"BILLING_SETTINGS.TITLE",icon:"credit-card-person",showNewButton:!1},children:[{path:"",name:"billing_settings_index",component:eG,meta:{installationTypes:[is.CLOUD],permissions:["administrator"]}}]}]},nG={name:"AddCanned",components:{NextButton:oe,Modal:sl,WootMessageEditor:Ko},props:{responseContent:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:bt()}},data(){return{shortCode:"",content:this.responseContent||"",addCanned:{showLoading:!1,message:""},show:!0}},validations:{shortCode:{required:Ye,minLength:Qt(2)},content:{required:Ye}},methods:{resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},addCannedResponse(){this.addCanned.showLoading=!0,this.$store.dispatch("createCannedResponse",{short_code:this.shortCode,content:this.content}).then(()=>{this.addCanned.showLoading=!1,ce(this.$t("CANNED_MGMT.ADD.API.SUCCESS_MESSAGE")),this.resetForm(),this.onClose()}).catch(e=>{this.addCanned.showLoading=!1;const t=(e==null?void 0:e.message)||this.$t("CANNED_MGMT.ADD.API.ERROR_MESSAGE");ce(t)})}}},sG={class:"flex flex-col h-auto overflow-auto"},aG={class:"w-full"},oG=["placeholder"],iG={class:"w-full"},rG={class:"editor-wrap"},lG={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function cG(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("WootMessageEditor"),l=M("NextButton"),c=M("Modal");return p(),$(c,{show:o.show,"onUpdate:show":t[4]||(t[4]=u=>o.show=u),"on-close":n.onClose},{default:K(()=>[h("div",sG,[y(i,{"header-title":e.$t("CANNED_MGMT.ADD.TITLE"),"header-content":e.$t("CANNED_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),h("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=Fe(u=>a.addCannedResponse(),["prevent"]))},[h("div",aG,[h("label",{class:se({error:s.v$.shortCode.$error})},[Re(A(e.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.shortCode=u),type:"text",placeholder:e.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...u)=>s.v$.shortCode.$touch&&s.v$.shortCode.$touch(...u))},null,40,oG),[[mt,o.shortCode]])],2)]),h("div",iG,[h("label",{class:se({error:s.v$.content.$error})},A(e.$t("CANNED_MGMT.ADD.FORM.CONTENT.LABEL")),3),h("div",rG,[y(r,{modelValue:o.content,"onUpdate:modelValue":t[2]||(t[2]=u=>o.content=u),class:se(["message-editor [&>div]:px-1",{editor_warning:s.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:e.$t("CANNED_MGMT.ADD.FORM.CONTENT.PLACEHOLDER"),onBlur:s.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),h("div",lG,[y(l,{faded:"",slate:"",type:"reset",label:e.$t("CANNED_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Fe(n.onClose,["prevent"])},null,8,["label","onClick"]),y(l,{type:"submit",label:e.$t("CANNED_MGMT.ADD.FORM.SUBMIT"),disabled:s.v$.content.$invalid||s.v$.shortCode.$invalid||o.addCanned.showLoading,"is-loading":o.addCanned.showLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const Sy=Ae(nG,[["render",cG],["__scopeId","data-v-69408ec0"]]),uG={components:{NextButton:oe,Modal:sl,WootMessageEditor:Ko},props:{id:{type:Number,default:null},edcontent:{type:String,default:""},edshortCode:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:bt()}},data(){return{editCanned:{showAlert:!1,showLoading:!1},shortCode:this.edshortCode,content:this.edcontent,show:!0}},validations:{shortCode:{required:Ye,minLength:Qt(2)},content:{required:Ye}},computed:{pageTitle(){return`${this.$t("CANNED_MGMT.EDIT.TITLE")} - ${this.edshortCode}`}},methods:{setPageName({name:e}){this.v$.content.$touch(),this.content=e},resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},editCannedResponse(){this.editCanned.showLoading=!0,this.$store.dispatch("updateCannedResponse",{id:this.id,short_code:this.shortCode,content:this.content}).then(()=>{this.editCanned.showLoading=!1,ce(this.$t("CANNED_MGMT.EDIT.API.SUCCESS_MESSAGE")),this.resetForm(),setTimeout(()=>{this.onClose()},10)}).catch(e=>{this.editCanned.showLoading=!1;const t=(e==null?void 0:e.message)||this.$t("CANNED_MGMT.EDIT.API.ERROR_MESSAGE");ce(t)})}}},dG={class:"flex flex-col h-auto overflow-auto"},pG={class:"w-full"},hG=["placeholder"],mG={class:"w-full"},fG={class:"editor-wrap"},gG={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function _G(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("WootMessageEditor"),l=M("NextButton"),c=M("Modal");return p(),$(c,{show:o.show,"onUpdate:show":t[4]||(t[4]=u=>o.show=u),"on-close":n.onClose},{default:K(()=>[h("div",dG,[y(i,{"header-title":a.pageTitle},null,8,["header-title"]),h("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=Fe(u=>a.editCannedResponse(),["prevent"]))},[h("div",pG,[h("label",{class:se({error:s.v$.shortCode.$error})},[Re(A(e.$t("CANNED_MGMT.EDIT.FORM.SHORT_CODE.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.shortCode=u),type:"text",placeholder:e.$t("CANNED_MGMT.EDIT.FORM.SHORT_CODE.PLACEHOLDER"),onInput:t[1]||(t[1]=(...u)=>s.v$.shortCode.$touch&&s.v$.shortCode.$touch(...u))},null,40,hG),[[mt,o.shortCode]])],2)]),h("div",mG,[h("label",{class:se({error:s.v$.content.$error})},A(e.$t("CANNED_MGMT.EDIT.FORM.CONTENT.LABEL")),3),h("div",fG,[y(r,{modelValue:o.content,"onUpdate:modelValue":t[2]||(t[2]=u=>o.content=u),class:se(["message-editor [&>div]:px-1",{editor_warning:s.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:e.$t("CANNED_MGMT.EDIT.FORM.CONTENT.PLACEHOLDER"),onBlur:s.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),h("div",gG,[y(l,{faded:"",slate:"",type:"reset",label:e.$t("CANNED_MGMT.EDIT.CANCEL_BUTTON_TEXT"),onClick:Fe(n.onClose,["prevent"])},null,8,["label","onClick"]),y(l,{type:"submit",label:e.$t("CANNED_MGMT.EDIT.FORM.SUBMIT"),disabled:s.v$.content.$invalid||s.v$.shortCode.$invalid||o.editCanned.showLoading,"is-loading":o.editCanned.showLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const vG=Ae(uG,[["render",_G],["__scopeId","data-v-c53f027b"]]),bG={class:"flex-1 overflow-auto"},EG={class:"mt-6 flex-1"},TG={key:1,class:"flex flex-col items-center justify-center h-full text-base text-slate-600 dark:text-slate-300 py-8"},yG={key:2,class:"min-w-full overflow-x-auto divide-y divide-slate-75 dark:divide-slate-700"},SG={key:0},AG={class:"mb-0"},IG={class:"divide-y divide-n-weak text-n-slate-11"},CG=["title"],OG={class:"py-4 ltr:pr-4 rtl:pl-4 md:break-all whitespace-normal"},NG={class:"py-4 flex justify-end gap-1"},wG=Object.assign({name:"CannedResponseSettings"},{__name:"Index",setup(e){const t=nn(),n=pt(),{t:s}=Me(),o=X(!1),a=X({}),i=X(!1),r=X(!1),l=X({}),c=X({message:""}),u=X("asc"),d=C(()=>t.getSortedCannedResponses.value(u.value)),m=C(()=>t.getUIFlags.value),f=C(()=>`${s("CANNED_MGMT.DELETE.CONFIRM.YES")} ${l.value.short_code}`),g=C(()=>`${s("CANNED_MGMT.DELETE.CONFIRM.NO")} ${l.value.short_code}`),T=C(()=>` ${l.value.short_code} ? `),S=()=>{u.value=u.value==="asc"?"desc":"asc"},_=async()=>{try{await n.dispatch("getCannedResponse")}catch{}};dt(()=>{_()});const E=B=>{a[l.value.id]=!1,l.value={},c.value.message=B,ce(B)},b=()=>{o.value=!0},I=()=>{o.value=!1},R=B=>{i.value=!0,l.value=B},O=()=>{i.value=!1},x=B=>{r.value=!0,l.value=B},L=()=>{r.value=!1},F=async B=>{try{await n.dispatch("deleteCannedResponse",B),E(s("CANNED_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(P){const k=(P==null?void 0:P.message)||s("CANNED_MGMT.DELETE.API.ERROR_MESSAGE");E(k)}},D=()=>{a[l.value.id]=!0,L(),F(l.value.id)},V=C(()=>[s("CANNED_MGMT.LIST.TABLE_HEADER.SHORT_CODE"),s("CANNED_MGMT.LIST.TABLE_HEADER.CONTENT"),s("CANNED_MGMT.LIST.TABLE_HEADER.ACTIONS")]);return(B,P)=>{const k=M("woot-loading-state"),U=M("fluent-icon"),j=M("woot-modal"),z=M("woot-delete-modal"),Y=qe("tooltip");return p(),v("div",bG,[y(Cs,{title:B.$t("CANNED_MGMT.HEADER"),description:B.$t("CANNED_MGMT.DESCRIPTION"),"link-text":B.$t("CANNED_MGMT.LEARN_MORE"),"feature-name":"canned_responses"},{actions:K(()=>[y(oe,{icon:"i-lucide-circle-plus",label:B.$t("CANNED_MGMT.HEADER_BTN_TXT"),onClick:b},null,8,["label"])]),_:1},8,["title","description","link-text"]),h("div",EG,[m.value.fetchingList?(p(),$(k,{key:0,message:B.$t("CANNED_MGMT.LOADING")},null,8,["message"])):d.value.length?(p(),v("table",yG,[h("thead",null,[(p(!0),v(pe,null,Ne(V.value,te=>(p(),v("th",{key:te,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11 last:text-right"},[te!==V.value[0]?(p(),v("span",SG,A(te),1)):(p(),v("button",{key:1,class:"flex items-center p-0 cursor-pointer",onClick:S},[h("span",AG,A(te),1),y(U,{class:"ml-2 size-4",icon:u.value==="desc"?"chevron-up":"chevron-down"},null,8,["icon"])]))]))),128))]),h("tbody",IG,[(p(!0),v(pe,null,Ne(d.value,(te,Z)=>(p(),v("tr",{key:te.short_code},[h("td",{class:"py-4 ltr:pr-4 rtl:pl-4 truncate max-w-xs font-medium",title:te.short_code},A(te.short_code),9,CG),h("td",OG,A(te.content),1),h("td",NG,[re(y(oe,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:G=>R(te)},null,8,["onClick"]),[[Y,B.$t("CANNED_MGMT.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),re(y(oe,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":a.value[te.id],onClick:G=>x(te)},null,8,["is-loading","onClick"]),[[Y,B.$t("CANNED_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])])):(p(),v("p",TG,A(B.$t("CANNED_MGMT.LIST.404")),1))]),y(j,{show:o.value,"onUpdate:show":P[0]||(P[0]=te=>o.value=te),"on-close":I},{default:K(()=>[y(Sy,{"on-close":I})]),_:1},8,["show"]),y(j,{show:i.value,"onUpdate:show":P[1]||(P[1]=te=>i.value=te),"on-close":O},{default:K(()=>[i.value?(p(),$(vG,{key:0,id:l.value.id,"edshort-code":l.value.short_code,edcontent:l.value.content,"on-close":O},null,8,["id","edshort-code","edcontent"])):w("",!0)]),_:1},8,["show"]),y(z,{show:r.value,"onUpdate:show":P[2]||(P[2]=te=>r.value=te),"on-close":L,"on-confirm":D,title:B.$t("CANNED_MGMT.DELETE.CONFIRM.TITLE"),message:B.$t("CANNED_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":T.value,"confirm-text":f.value,"reject-text":g.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])])}}}),RG={routes:[{path:At("accounts/:accountId/settings/canned-response"),component:ea,children:[{path:"",redirect:e=>({name:"canned_list",params:e.params})},{path:"list",name:"canned_list",meta:{featureFlag:_t.CANNED_RESPONSES,permissions:[...Gn,...Rs]},component:wG}]}]},xG={fetchFacebookPages(e,t){const n=xO("fetchFacebookPages");return n.params.omniauth_token=e,axios.post(n.url(t),n.params)}},$G={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""}}},MG={class:"flex flex-col w-full items-start mb-4"},LG={class:"text-xl font-medium mb-1 text-slate-800 dark:text-slate-100 break-words"},kG={class:"text-sm w-full text-slate-600 dark:text-slate-300"};function DG(e,t,n,s,o,a){const i=qe("dompurify-html");return p(),v("div",MG,[h("h2",LG,A(n.headerTitle),1),re(h("p",kG,null,512),[[i,n.headerContent]])])}const Ms=Ae($G,[["render",DG]]),PG="text/javascript",u1="data-loaded",BG=["defer","crossOrigin","noModule","referrerPolicy","id"];class FG extends Error{constructor(t,n="Failed to load script"){super(n),this.name="ScriptLoaderError",this.src=t}getErrorDetails(){return`Failed to load script from source: ${this.src}`}}const UG=(e,t)=>{const n=document.createElement("script");return n.type=t.type||PG,n.async=t.async!==!1,n.src=e,BG.forEach(s=>{s in t&&(n[s]=t[s])}),Object.entries(t.attrs||{}).forEach(([s,o])=>n.setAttribute(s,o)),n},GG=e=>document.querySelector(`script[src="${e}"]`);async function Ay(e,t){return typeof window>"u"||!window.document?Promise.resolve(!1):new Promise((n,s)=>{if(e.trim()===""){s(new Error("Invalid source URL provided"));return}let o=GG(e);if(!o)o=UG(e,t),document.head.appendChild(o);else if(o.hasAttribute(u1)){n(o);return}const a=()=>s(new FG(e));o.addEventListener("error",a),o.addEventListener("abort",a),o.addEventListener("load",()=>{o.setAttribute(u1,"true"),n(o)})})}const VG="/vite/assets/facebook_login-_skaVloV.png",HG={components:{LoadingState:Rc,PageHeader:Ms,NextButton:oe},mixins:[jo],setup(){const{accountId:e}=zn();return{accountId:e,v$:bt()}},data(){return{isCreating:!1,hasError:!1,omniauth_token:"",user_access_token:"",channel:"facebook",selectedPage:{name:null,id:null},pageName:"",pageList:[],emptyStateMessage:this.$t("INBOX_MGMT.DETAILS.LOADING_FB"),errorStateMessage:"",errorStateDescription:"",hasLoginStarted:!1}},validations:{pageName:{required:Ye},selectedPage:{isEmpty(){return this.selectedPage!==null&&!!this.selectedPage.name}}},computed:{showLoader(){return!this.user_access_token||this.isCreating},getSelectablePages(){return this.pageList.filter(e=>!e.exists)},...lt({globalConfig:"globalConfig/get"})},mounted(){window.fbAsyncInit=this.runFBInit},methods:{async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(e){e.name==="ScriptLoaderError"?ce(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(el(e),ce(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},setPageName({name:e}){this.v$.selectedPage.$touch(),this.pageName=e},initChannelAuth(e){e==="facebook"&&this.loadFBsdk()},runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return Ay("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},tryFBlogin(){FB.login(e=>{this.hasError=!1,e.status==="connected"?this.fetchPages(e.authResponse.accessToken):e.status==="not_authorized"?(console.error("FACEBOOK AUTH ERROR",e),this.hasError=!0,this.errorStateMessage=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_UNAUTHORIZED"),this.errorStateDescription=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_UNAUTHORIZED_HELP")):(console.error("FACEBOOK AUTH ERROR",e),this.hasError=!0,this.errorStateMessage=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"),this.errorStateDescription="")},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages"})},async fetchPages(e){try{const t=await xG.fetchFacebookPages(e,this.accountId),{data:{data:n}}=t;this.pageList=n.page_details,this.user_access_token=n.user_access_token}catch{}},channelParams(){return{user_access_token:this.user_access_token,page_access_token:this.selectedPage.access_token,page_id:this.selectedPage.id,inbox_name:this.selectedPage.name}},createChannel(){this.v$.$touch(),this.v$.$error||(this.emptyStateMessage=this.$t("INBOX_MGMT.DETAILS.CREATING_CHANNEL"),this.isCreating=!0,this.$store.dispatch("inboxes/createFBChannel",this.channelParams()).then(e=>{Wn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}).catch(()=>{this.isCreating=!1}))}}},WG={class:"w-full h-full col-span-6 p-6 overflow-auto border border-b-0 rounded-t-lg border-n-weak bg-n-solid-1"},zG={key:0,class:"flex flex-col items-center justify-center h-full text-center"},jG={class:"py-6"},KG={key:1},YG={key:0,class:"max-w-lg mx-auto text-center"},XG={key:0},qG={class:"w-full"},ZG={class:"w-3/5"},QG={class:"w-full"},JG={key:0,class:"message"},eV={class:"w-full"},tV=["placeholder"],nV={key:0,class:"message"},sV={class:"w-full text-right"};function aV(e,t,n,s,o,a){const i=M("LoadingState"),r=M("PageHeader"),l=M("multiselect"),c=M("NextButton"),u=qe("dompurify-html");return p(),v("div",WG,[o.hasLoginStarted?(p(),v("div",KG,[o.hasError?(p(),v("div",YG,[h("h5",null,A(o.errorStateMessage),1),o.errorStateDescription?re((p(),v("p",XG,null,512)),[[u,o.errorStateDescription]]):w("",!0)])):a.showLoader?(p(),$(i,{key:1,message:o.emptyStateMessage},null,8,["message"])):(p(),v("form",{key:2,class:"flex flex-col flex-wrap mx-0",onSubmit:t[4]||(t[4]=Fe(d=>a.createChannel(),["prevent"]))},[h("div",qG,[y(r,{"header-title":e.$t("INBOX_MGMT.ADD.DETAILS.TITLE"),"header-content":e.useInstallationName(e.$t("INBOX_MGMT.ADD.DETAILS.DESC"),e.globalConfig.installationName)},null,8,["header-title","header-content"])]),h("div",ZG,[h("div",QG,[h("div",{class:se(["input-wrap",{error:s.v$.selectedPage.$error}])},[Re(A(e.$t("INBOX_MGMT.ADD.FB.CHOOSE_PAGE"))+" ",1),y(l,{modelValue:o.selectedPage,"onUpdate:modelValue":t[1]||(t[1]=d=>o.selectedPage=d),"close-on-select":"","allow-empty":"",options:a.getSelectablePages,"track-by":"id",label:"name","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),placeholder:e.$t("INBOX_MGMT.ADD.FB.PICK_A_VALUE"),"selected-label":"",onSelect:a.setPageName},null,8,["modelValue","options","select-label","deselect-label","placeholder","onSelect"]),s.v$.selectedPage.$error?(p(),v("span",JG,A(e.$t("INBOX_MGMT.ADD.FB.CHOOSE_PLACEHOLDER")),1)):w("",!0)],2)]),h("div",eV,[h("label",{class:se({error:s.v$.pageName.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.FB.INBOX_NAME"))+" ",1),re(h("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>o.pageName=d),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.FB.PICK_NAME"),onInput:t[3]||(t[3]=(...d)=>s.v$.pageName.$touch&&s.v$.pageName.$touch(...d))},null,40,tV),[[mt,o.pageName]]),s.v$.pageName.$error?(p(),v("span",nV,A(e.$t("INBOX_MGMT.ADD.FB.ADD_NAME")),1)):w("",!0)],2)]),h("div",sV,[y(c,{label:e.$t("INBOX_MGMT.ADD.FB.CREATE_INBOX")},null,8,["label"])])])],32))])):(p(),v("div",zG,[h("a",{href:"#",onClick:t[0]||(t[0]=d=>a.startLogin())},t[5]||(t[5]=[h("img",{class:"w-auto h-10",src:VG,alt:"Facebook-logo"},null,-1)])),h("p",jG,A(e.useInstallationName(e.$t("INBOX_MGMT.ADD.FB.HELP"),e.globalConfig.installationName)),1)]))])}const oV=Ae(HG,[["render",aV]]),iV={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 bg-n-alpha-black2"},Iy={__name:"GreetingsEditor",props:{modelValue:{type:String,default:""},richtext:{type:Boolean,default:!1},label:{type:String,default:""},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,o=C({get:()=>n.modelValue,set:a=>s("update:modelValue",a)});return(a,i)=>(p(),v("section",null,[e.richtext?(p(),v("div",iV,[y(Ko,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=r=>o.value=r),"is-format-mode":"","enable-variables":"",placeholder:e.placeholder,"min-height":4},null,8,["modelValue","placeholder"])])):(p(),$(wf,{key:1,modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=r=>o.value=r),rows:4,type:"text",class:"greetings--textarea",label:e.label,placeholder:e.placeholder,onInput:a.handleInput},null,8,["modelValue","label","placeholder","onInput"]))]))}},rV={class:"flex flex-col min-w-0 gap-1"},lV={key:0,class:"mb-0.5 text-sm font-medium text-n-slate-12"},cV={key:0,class:"flex items-center justify-end h-4 ltr:right-3 rtl:left-3"},uV={key:0,class:"text-xs tabular-nums text-n-slate-10"},dV={__name:"Editor",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},focusOnMount:{type:Boolean,default:!1},maxLength:{type:Number,default:200},showCharacterCount:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},message:{type:String,default:""},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},enableVariables:{type:Boolean,default:!1},enableCannedResponses:{type:Boolean,default:!0},enabledMenuOptions:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,o=Sf(),a=X(!1),i=C(()=>n.modelValue.length),r=C(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-green-500 dark:text-green-400";default:return"text-n-slate-11 dark:text-n-slate-11"}}),l=d=>{n.disabled||s("update:modelValue",d)},c=()=>{n.disabled||(a.value=!0)},u=()=>{n.disabled||(a.value=!1)};return ct(()=>n.modelValue,d=>{n.maxLength&&n.showCharacterCount&&!o.actions&&i.value>=n.maxLength&&s("update:modelValue",d.slice(0,n.maxLength))}),(d,m)=>(p(),v("div",rV,[e.label?(p(),v("label",lV,A(e.label),1)):w("",!0),h("div",{class:se(["flex flex-col w-full gap-2 px-3 py-3 transition-all duration-500 ease-in-out border rounded-lg editor-wrapper bg-n-alpha-black2",[{"cursor-not-allowed opacity-50 pointer-events-none !bg-n-alpha-black2 disabled:border-n-weak dark:disabled:border-n-weak":e.disabled,"border-n-brand dark:border-n-brand":a.value,"hover:border-n-slate-6 dark:hover:border-n-slate-6 border-n-weak dark:border-n-weak":!a.value&&e.messageType!=="error","border-n-ruby-8 dark:border-n-ruby-8 hover:border-n-ruby-9 dark:hover:border-n-ruby-9":e.messageType==="error"&&!a.value}]])},[y(Ko,{"model-value":e.modelValue,placeholder:e.placeholder,"focus-on-mount":e.focusOnMount,disabled:e.disabled,"enable-variables":e.enableVariables,"enable-canned-responses":e.enableCannedResponses,"enabled-menu-options":e.enabledMenuOptions,onInput:l,onFocus:c,onBlur:u},null,8,["model-value","placeholder","focus-on-mount","disabled","enable-variables","enable-canned-responses","enabled-menu-options"]),e.showCharacterCount||N(o).actions?(p(),v("div",cV,[e.showCharacterCount&&!N(o).actions?(p(),v("span",uV,A(i.value)+" / "+A(e.maxLength),1)):We(d.$slots,"actions",{key:1},void 0,!0)])):w("",!0)],2),e.message?(p(),v("p",{key:1,class:se(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",r.value])},A(e.message),3)):w("",!0)]))}},_a=Ae(dV,[["__scopeId","data-v-03f2cdae"]]),pV={components:{PageHeader:Ms,GreetingsEditor:Iy,NextButton:oe,Editor:_a},data(){return{inboxName:"",channelWebsiteUrl:"",channelWidgetColor:"#009CE0",channelWelcomeTitle:"",channelWelcomeTagline:"",greetingEnabled:!1,greetingMessage:"",welcomeTaglineEditorMenuOptions:Tg}},computed:{...lt({uiFlags:"inboxes/getUIFlags"}),textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},methods:{async createChannel(){try{const e=await this.$store.dispatch("inboxes/createWebsiteChannel",{name:this.inboxName,greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage,channel:{type:"web_widget",website_url:this.channelWebsiteUrl,widget_color:this.channelWidgetColor,welcome_title:this.channelWelcomeTitle,welcome_tagline:this.channelWelcomeTagline}});Wn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){ce(e.message||this.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.API.ERROR_MESSAGE"))}}}},hV={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},mV={class:"w-full"},fV=["placeholder"],gV={class:"w-full"},_V=["placeholder"],vV={class:"w-full"},bV={class:"w-full"},EV=["placeholder"],TV={class:"w-full"},yV={value:!0},SV={value:!1},AV={class:"help-text"},IV={class:"flex flex-row justify-end w-full gap-2 px-0 py-2 mt-4"},CV={class:"w-full"};function OV(e,t,n,s,o,a){const i=M("PageHeader"),r=M("woot-loading-state"),l=M("woot-color-picker"),c=M("Editor"),u=M("GreetingsEditor"),d=M("NextButton");return p(),v("div",hV,[y(i,{"header-title":e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.DESC")},null,8,["header-title","header-content"]),e.uiFlags.isCreating?(p(),$(r,{key:0,message:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.LOADING_MESSAGE")},null,8,["message"])):w("",!0),e.uiFlags.isCreating?w("",!0):(p(),v("form",{key:1,class:"flex flex-wrap flex-col mx-0",onSubmit:t[7]||(t[7]=Fe((...m)=>a.createChannel&&a.createChannel(...m),["prevent"]))},[h("div",mV,[h("label",null,[Re(A(e.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>o.inboxName=m),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER")},null,8,fV),[[mt,o.inboxName]])])]),h("div",gV,[h("label",null,[Re(A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[1]||(t[1]=m=>o.channelWebsiteUrl=m),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,_V),[[mt,o.channelWebsiteUrl]])])]),h("div",vV,[h("label",null,[Re(A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),y(l,{modelValue:o.channelWidgetColor,"onUpdate:modelValue":t[2]||(t[2]=m=>o.channelWidgetColor=m)},null,8,["modelValue"])])]),h("div",bV,[h("label",null,[Re(A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[3]||(t[3]=m=>o.channelWelcomeTitle=m),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,EV),[[mt,o.channelWelcomeTitle]])])]),y(c,{modelValue:o.channelWelcomeTagline,"onUpdate:modelValue":t[4]||(t[4]=m=>o.channelWelcomeTagline=m),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER"),"max-length":255,"enabled-menu-options":o.welcomeTaglineEditorMenuOptions,class:"mb-4"},null,8,["modelValue","label","placeholder","enabled-menu-options"]),h("label",TV,[Re(A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[5]||(t[5]=m=>o.greetingEnabled=m)},[h("option",yV,A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),h("option",SV,A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[gn,o.greetingEnabled]]),h("p",AV,A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),o.greetingEnabled?(p(),$(u,{key:0,modelValue:o.greetingMessage,"onUpdate:modelValue":t[6]||(t[6]=m=>o.greetingMessage=m),class:"w-full",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!a.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])):w("",!0),h("div",IV,[h("div",CV,[y(d,{type:"submit","is-loading":e.uiFlags.isCreating,disabled:!o.channelWebsiteUrl||!o.inboxName,solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","disabled","label"])])])],32))])}const NV=Ae(pV,[["render",OV]]);class wV extends Io{constructor(){super("twitter",{accountScoped:!0})}generateAuthorization(){return axios.post(`${this.url}/authorization`)}}const RV=new wV,xV={components:{NextButton:oe},data(){return{isRequestingAuthorization:!1}},methods:{async requestAuthorization(){try{this.isRequestingAuthorization=!0;const e=await RV.generateAuthorization(),{data:{url:t}}=e;window.location.href=t}catch{ce(this.$t("INBOX_MGMT.ADD.TWITTER.ERROR_MESSAGE"))}finally{this.isRequestingAuthorization=!1}}}},$V={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},MV={class:"login-init h-full text-center"};function LV(e,t,n,s,o,a){const i=M("NextButton");return p(),v("div",$V,[h("div",MV,[h("form",{onSubmit:t[0]||(t[0]=Fe((...r)=>a.requestAuthorization&&a.requestAuthorization(...r),["prevent"]))},[y(i,{type:"submit",icon:"i-ri-twitter-x-fill",label:"Sign in with Twitter","is-loading":o.isRequestingAuthorization},null,8,["is-loading"])],32),h("p",null,A(e.$t("INBOX_MGMT.ADD.TWITTER.HELP")),1)])])}const kV=Ae(xV,[["render",LV],["__scopeId","data-v-8566c144"]]),DV=(e="")=>e?e.startsWith("http"):!0,PV={components:{PageHeader:Ms,NextButton:oe},setup(){return{v$:bt()}},data(){return{channelName:"",webhookUrl:""}},computed:{...lt({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:Ye},webhookUrl:{shouldBeWebhookUrl:DV}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.channelName,channel:{type:"api",webhook_url:this.webhookUrl}});Wn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch{ce(this.$t("INBOX_MGMT.ADD.API_CHANNEL.API.ERROR_MESSAGE"))}}}},BV={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},FV={class:"flex-shrink-0 flex-grow-0"},UV=["placeholder"],GV={key:0,class:"message"},VV={class:"flex-shrink-0 flex-grow-0"},HV=["placeholder"],WV={class:"help-text"},zV={class:"w-full mt-4"};function jV(e,t,n,s,o,a){const i=M("PageHeader"),r=M("NextButton");return p(),v("div",BV,[y(i,{"header-title":e.$t("INBOX_MGMT.ADD.API_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.API_CHANNEL.DESC")},null,8,["header-title","header-content"]),h("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[4]||(t[4]=Fe(l=>a.createChannel(),["prevent"]))},[h("div",FV,[h("label",{class:se({error:s.v$.channelName.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.channelName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...l))},null,40,UV),[[mt,o.channelName]]),s.v$.channelName.$error?(p(),v("span",GV,A(e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.ERROR")),1)):w("",!0)],2)]),h("div",VV,[h("label",{class:se({error:s.v$.webhookUrl.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.webhookUrl=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.webhookUrl.$touch&&s.v$.webhookUrl.$touch(...l))},null,40,HV),[[mt,o.webhookUrl]])],2),h("p",WV,A(e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.SUBTITLE")),1)]),h("div",zV,[y(r,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.API_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const KV=Ae(PV,[["render",jV]]),YV={components:{PageHeader:Ms,NextButton:oe},setup(){return{v$:bt()}},data(){return{channelName:"",email:"",alertMessage:""}},computed:{...lt({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:Ye},email:{required:Ye,email:Ii}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.channelName,channel:{type:"email",email:this.email}});Wn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.API.ERROR_MESSAGE"),ce(this.alertMessage)}}}},XV={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},qV={class:"flex-shrink-0 flex-grow-0"},ZV=["placeholder"],QV={key:0,class:"message"},JV={class:"flex-shrink-0 flex-grow-0 mb-4"},eH=["placeholder"],tH={class:"help-text"},nH={class:"w-full mt-4"};function sH(e,t,n,s,o,a){const i=M("PageHeader"),r=M("NextButton");return p(),v("div",XV,[y(i,{"header-title":e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.DESC")},null,8,["header-title","header-content"]),h("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[4]||(t[4]=Fe(l=>a.createChannel(),["prevent"]))},[h("div",qV,[h("label",{class:se({error:s.v$.channelName.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.channelName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...l))},null,40,ZV),[[mt,o.channelName]]),s.v$.channelName.$error?(p(),v("span",QV,A(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.ERROR")),1)):w("",!0)],2)]),h("div",JV,[h("label",{class:se({error:s.v$.email.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.email=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.email.$touch&&s.v$.email.$touch(...l))},null,40,eH),[[mt,o.email]]),h("p",tH,A(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.SUBTITLE")),1)],2)]),h("div",nH,[y(r,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const aH=Ae(YV,[["render",sH]]);let oH=class extends Io{constructor(){super("microsoft",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}};const Cy=new oH;class iH extends Io{constructor(){super("google",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}}const Oy=new iH,rH={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},Ny={__name:"OAuthChannel",props:{provider:{type:String,required:!0,validate:e=>["microsoft","google"].includes(e)},title:{type:String,required:!0},description:{type:String,required:!0},submitButtonText:{type:String,required:!0},errorMessage:{type:String,required:!0}},setup(e){const t=e,n=X(!1),s=C(()=>t.provider==="microsoft"?Cy:Oy);async function o(){try{n.value=!0;const a=await s.value.generateAuthorization(),{data:{url:i}}=a;window.location.href=i}catch{ce(t.errorMessage)}finally{n.value=!1}}return(a,i)=>(p(),v("div",rH,[y(Ms,{"header-title":e.title,"header-content":e.description},null,8,["header-title","header-content"]),h("form",{class:"mt-6",onSubmit:Fe(o,["prevent"])},[y(oe,{"is-loading":n.value,type:"submit",solid:"",blue:"",label:e.submitButtonText},null,8,["is-loading","label"])],32)]))}},lH=Object.assign({name:"MicrosoftOAuthChannel"},{__name:"Microsoft",setup(e){return(t,n)=>(p(),$(Ny,{provider:"microsoft",title:t.$t("INBOX_MGMT.ADD.MICROSOFT.TITLE"),description:t.$t("INBOX_MGMT.ADD.MICROSOFT.DESCRIPTION"),"submit-button-text":t.$t("INBOX_MGMT.ADD.MICROSOFT.SIGN_IN"),"error-message":t.$t("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE")},null,8,["title","description","submit-button-text","error-message"]))}}),cH=Object.assign({name:"GoogleOAuthChannel"},{__name:"Google",setup(e){return(t,n)=>(p(),$(Ny,{provider:"google",title:t.$t("INBOX_MGMT.ADD.GOOGLE.TITLE"),description:t.$t("INBOX_MGMT.ADD.GOOGLE.DESCRIPTION"),"submit-button-text":t.$t("INBOX_MGMT.ADD.GOOGLE.SIGN_IN"),"error-message":t.$t("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE")},null,8,["title","description","submit-button-text","error-message"]))}}),uH={props:{title:{type:String,required:!0},src:{type:String,required:!0},isComingSoon:{type:Boolean,default:!1}}},dH={class:"relative bg-n-background cursor-pointer flex flex-col justify-end transition-all duration-200 ease-in -m-px py-4 px-0 items-center border border-solid border-n-weak hover:border-n-brand hover:shadow-md hover:z-50 disabled:opacity-60"},pH=["src","alt"],hH={class:"text-n-slate-12 text-base text-center capitalize"},mH={key:0,class:"absolute inset-0 flex items-center justify-center backdrop-blur-[2px] rounded-md bg-gradient-to-br from-n-background/90 via-n-background/70 to-n-background/95"},fH={class:"text-n-slate-12 font-medium text-base"};function gH(e,t,n,s,o,a){return p(),v("button",dH,[h("img",{src:n.src,alt:n.title,draggable:"false",class:"w-1/2 my-4 mx-auto"},null,8,pH),h("h3",hH,A(n.title),1),n.isComingSoon?(p(),v("div",mH,[h("span",fH,A(e.$t("CHANNEL_SELECTOR.COMING_SOON"))+" 🚀 ",1)])):w("",!0)])}const wy=Ae(uH,[["render",gH],["__scopeId","data-v-22bbc8cc"]]),_H={key:0,class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},vH={class:"grid max-w-3xl grid-cols-4 mx-0 mt-6"},bH={__name:"Email",setup(e){const t=X(""),n=nn(),{t:s}=Me(),o=n["globalConfig/get"],a=n["globalConfig/isAChatwootInstance"],i=C(()=>[{title:s("INBOX_MGMT.EMAIL_PROVIDERS.MICROSOFT"),isEnabled:!!o.value.azureAppId,key:"microsoft",src:"/assets/images/dashboard/channels/microsoft.png"},{title:s("INBOX_MGMT.EMAIL_PROVIDERS.GOOGLE"),isEnabled:!!window.chatwootConfig.googleOAuthClientId,key:"google",src:"/assets/images/dashboard/channels/google.png"},{title:s("INBOX_MGMT.EMAIL_PROVIDERS.OTHER_PROVIDERS"),isEnabled:!0,key:"other_provider",src:"/assets/images/dashboard/channels/email.png"}].filter(l=>a.value?!0:l.isEnabled));function r(l){l.isEnabled&&(t.value=l.key)}return(l,c)=>t.value?t.value==="microsoft"?(p(),$(lH,{key:1})):t.value==="google"?(p(),$(cH,{key:2})):t.value==="other_provider"?(p(),$(aH,{key:3})):w("",!0):(p(),v("div",_H,[y(Ms,{class:"max-w-4xl","header-title":l.$t("INBOX_MGMT.ADD.EMAIL_PROVIDER.TITLE"),"header-content":l.$t("INBOX_MGMT.ADD.EMAIL_PROVIDER.DESCRIPTION")},null,8,["header-title","header-content"]),h("div",vH,[(p(!0),v(pe,null,Ne(i.value,u=>(p(),$(wy,{key:u.key,class:se({inactive:!u.isEnabled}),title:u.title,src:u.src,onClick:()=>r(u)},null,8,["class","title","src","onClick"]))),128))])]))}},EH=(e="")=>e.startsWith("+"),TH={components:{NextButton:oe},setup(){return{v$:bt()}},data(){return{accountId:"",apiKey:"",apiSecret:"",applicationId:"",inboxName:"",phoneNumber:""}},computed:{...lt({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:Ye},phoneNumber:{required:Ye,shouldStartWithPlusSign:EH},apiKey:{required:Ye},apiSecret:{required:Ye},applicationId:{required:Ye},accountId:{required:Ye}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.inboxName,channel:{type:"sms",phone_number:this.phoneNumber,provider_config:{api_key:this.apiKey,api_secret:this.apiSecret,application_id:this.applicationId,account_id:this.accountId}}});Wn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch{ce(this.$t("INBOX_MGMT.ADD.SMS.API.ERROR_MESSAGE"))}}}},yH={class:"flex-shrink-0 flex-grow-0"},SH=["placeholder"],AH={key:0,class:"message"},IH={class:"flex-shrink-0 flex-grow-0"},CH=["placeholder"],OH={key:0,class:"message"},NH={class:"flex-shrink-0 flex-grow-0"},wH=["placeholder"],RH={key:0,class:"message"},xH={class:"flex-shrink-0 flex-grow-0"},$H=["placeholder"],MH={key:0,class:"message"},LH={class:"flex-shrink-0 flex-grow-0"},kH=["placeholder"],DH={key:0,class:"message"},PH={class:"flex-shrink-0 flex-grow-0"},BH=["placeholder"],FH={key:0,class:"message"},UH={class:"w-full mt-4"};function GH(e,t,n,s,o,a){const i=M("NextButton");return p(),v("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[12]||(t[12]=Fe(r=>a.createChannel(),["prevent"]))},[h("div",yH,[h("label",{class:se({error:s.v$.inboxName.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.inboxName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...r))},null,40,SH),[[mt,o.inboxName]]),s.v$.inboxName.$error?(p(),v("span",AH,A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.ERROR")),1)):w("",!0)],2)]),h("div",IH,[h("label",{class:se({error:s.v$.phoneNumber.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.phoneNumber=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...r))},null,40,CH),[[mt,o.phoneNumber]]),s.v$.phoneNumber.$error?(p(),v("span",OH,A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.ERROR")),1)):w("",!0)],2)]),h("div",NH,[h("label",{class:se({error:s.v$.accountId.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.accountId=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...r)=>s.v$.accountId.$touch&&s.v$.accountId.$touch(...r))},null,40,wH),[[mt,o.accountId]]),s.v$.accountId.$error?(p(),v("span",RH,A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.ERROR")),1)):w("",!0)],2)]),h("div",xH,[h("label",{class:se({error:s.v$.applicationId.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>o.applicationId=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...r)=>s.v$.applicationId.$touch&&s.v$.applicationId.$touch(...r))},null,40,$H),[[mt,o.applicationId]]),s.v$.applicationId.$error?(p(),v("span",MH,A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.ERROR")),1)):w("",!0)],2)]),h("div",LH,[h("label",{class:se({error:s.v$.apiKey.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>o.apiKey=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.PLACEHOLDER"),onBlur:t[9]||(t[9]=(...r)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...r))},null,40,kH),[[mt,o.apiKey]]),s.v$.apiKey.$error?(p(),v("span",DH,A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.ERROR")),1)):w("",!0)],2)]),h("div",PH,[h("label",{class:se({error:s.v$.apiSecret.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>o.apiSecret=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.PLACEHOLDER"),onBlur:t[11]||(t[11]=(...r)=>s.v$.apiSecret.$touch&&s.v$.apiSecret.$touch(...r))},null,40,BH),[[mt,o.apiSecret]]),s.v$.apiSecret.$error?(p(),v("span",FH,A(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.ERROR")),1)):w("",!0)],2)]),h("div",UH,[y(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const VH=Ae(TH,[["render",GH]]),HH={components:{NextButton:oe},props:{type:{type:String,required:!0}},setup(){return{v$:bt()}},data(){return{accountSID:"",apiKeySID:"",authToken:"",medium:this.type,channelName:"",messagingServiceSID:"",useMessagingService:!1,useAPIKey:!1,phoneNumber:""}},computed:{...lt({uiFlags:"inboxes/getUIFlags"}),authTokeni18nKey(){return this.useAPIKey?"API_KEY_SECRET":"AUTH_TOKEN"}},validations(){let e={channelName:{required:Ye},authToken:{required:Ye},accountSID:{required:Ye},medium:{required:Ye}};return this.phoneNumber?e={...e,phoneNumber:{required:Ye,isPhoneE164OrEmpty:kf},messagingServiceSID:{}}:e={...e,messagingServiceSID:{required:Ye},phoneNumber:{}},this.useAPIKey&&(e={...e,apiKeySID:{required:Ye}}),e},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createTwilioChannel",{twilio_channel:{name:this.channelName,medium:this.medium,account_sid:this.accountSID,api_key_sid:this.apiKeySID,auth_token:this.authToken,messaging_service_sid:this.messagingServiceSID,phone_number:this.messagingServiceSID?null:`+${this.phoneNumber.replace(/\D/g,"")}`}});Wn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){const t=Bf(e)||this.$t("INBOX_MGMT.ADD.TWILIO.API.ERROR_MESSAGE");ce(t)}}}},WH={class:"flex-shrink-0 flex-grow-0"},zH=["placeholder"],jH={key:0,class:"message"},KH={class:"flex-shrink-0 flex-grow-0"},YH=["placeholder"],XH={key:0,class:"message"},qH={key:0,class:"flex-shrink-0 flex-grow-0"},ZH=["placeholder"],QH={key:0,class:"message"},JH={class:"max-w-[65%] w-full messagingServiceHelptext"},eW={for:"useMessagingService"},tW={class:"flex-shrink-0 flex-grow-0"},nW=["placeholder"],sW={key:0,class:"message"},aW={class:"max-w-[65%] w-full messagingServiceHelptext"},oW={for:"useAPIKey"},iW={key:1,class:"flex-shrink-0 flex-grow-0"},rW=["placeholder"],lW={key:0,class:"message"},cW={class:"flex-shrink-0 flex-grow-0"},uW=["placeholder"],dW={key:0,class:"message"},pW={class:"w-full mt-4"};function hW(e,t,n,s,o,a){const i=M("NextButton");return p(),v("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[14]||(t[14]=Fe(r=>a.createChannel(),["prevent"]))},[h("div",WH,[h("label",{class:se({error:s.v$.channelName.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.channelName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...r))},null,40,zH),[[mt,o.channelName]]),s.v$.channelName.$error?(p(),v("span",jH,A(e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.ERROR")),1)):w("",!0)],2)]),h("div",KH,[o.useMessagingService?(p(),v("label",{key:0,class:se({error:s.v$.messagingServiceSID.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.messagingServiceSID=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.messagingServiceSID.$touch&&s.v$.messagingServiceSID.$touch(...r))},null,40,YH),[[mt,o.messagingServiceSID]]),s.v$.messagingServiceSID.$error?(p(),v("span",XH,A(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.ERROR")),1)):w("",!0)],2)):w("",!0)]),o.useMessagingService?w("",!0):(p(),v("div",qH,[h("label",{class:se({error:s.v$.phoneNumber.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.phoneNumber=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...r)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...r))},null,40,ZH),[[mt,o.phoneNumber]]),s.v$.phoneNumber.$error?(p(),v("span",QH,A(e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.ERROR")),1)):w("",!0)],2)])),h("div",JH,[h("label",eW,[re(h("input",{id:"useMessagingService","onUpdate:modelValue":t[6]||(t[6]=r=>o.useMessagingService=r),type:"checkbox",class:"checkbox"},null,512),[[pn,o.useMessagingService]]),Re(" "+A(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.USE_MESSAGING_SERVICE")),1)])]),h("div",tW,[h("label",{class:se({error:s.v$.accountSID.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>o.accountSID=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.PLACEHOLDER"),onBlur:t[8]||(t[8]=(...r)=>s.v$.accountSID.$touch&&s.v$.accountSID.$touch(...r))},null,40,nW),[[mt,o.accountSID]]),s.v$.accountSID.$error?(p(),v("span",sW,A(e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.ERROR")),1)):w("",!0)],2)]),h("div",aW,[h("label",oW,[re(h("input",{id:"useAPIKey","onUpdate:modelValue":t[9]||(t[9]=r=>o.useAPIKey=r),type:"checkbox",class:"checkbox"},null,512),[[pn,o.useAPIKey]]),Re(" "+A(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.USE_API_KEY")),1)])]),o.useAPIKey?(p(),v("div",iW,[h("label",{class:se({error:s.v$.apiKeySID.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>o.apiKeySID=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.PLACEHOLDER"),onBlur:t[11]||(t[11]=(...r)=>s.v$.apiKeySID.$touch&&s.v$.apiKeySID.$touch(...r))},null,40,rW),[[mt,o.apiKeySID]]),s.v$.apiKeySID.$error?(p(),v("span",lW,A(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.ERROR")),1)):w("",!0)],2)])):w("",!0),h("div",cW,[h("label",{class:se({error:s.v$.authToken.$error})},[Re(A(e.$t(`INBOX_MGMT.ADD.TWILIO.${a.authTokeni18nKey}.LABEL`))+" ",1),re(h("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>o.authToken=r),type:"text",placeholder:e.$t(`INBOX_MGMT.ADD.TWILIO.${a.authTokeni18nKey}.PLACEHOLDER`),onBlur:t[13]||(t[13]=(...r)=>s.v$.authToken.$touch&&s.v$.authToken.$touch(...r))},null,40,uW),[[mt,o.authToken]]),s.v$.authToken.$error?(p(),v("span",dW,A(e.$t(`INBOX_MGMT.ADD.TWILIO.${a.authTokeni18nKey}.ERROR`)),1)):w("",!0)],2)]),h("div",pW,[y(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.TWILIO.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const Ry=Ae(HH,[["render",hW],["__scopeId","data-v-50ee002a"]]),mW={components:{PageHeader:Ms,Twilio:Ry,BandwidthSms:VH},data(){return{provider:"twilio"}}},fW={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},gW={class:"flex-shrink-0 flex-grow-0"},_W={value:"twilio"},vW={value:"360dialog"};function bW(e,t,n,s,o,a){const i=M("PageHeader"),r=M("Twilio"),l=M("BandwidthSms");return p(),v("div",fW,[y(i,{"header-title":e.$t("INBOX_MGMT.ADD.SMS.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.SMS.DESC")},null,8,["header-title","header-content"]),h("div",gW,[h("label",null,[Re(A(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>o.provider=c)},[h("option",_W,A(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.TWILIO")),1),h("option",vW,A(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.BANDWIDTH")),1)],512),[[gn,o.provider]])])]),o.provider==="twilio"?(p(),$(r,{key:0,type:"sms"})):(p(),$(l,{key:1}))])}const EW=Ae(mW,[["render",bW]]),TW={components:{NextButton:oe},setup(){return{v$:bt()}},data(){return{inboxName:"",phoneNumber:"",apiKey:""}},computed:{...lt({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:Ye},phoneNumber:{required:Ye,isPhoneE164OrEmpty:kf},apiKey:{required:Ye}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.inboxName,channel:{type:"whatsapp",phone_number:this.phoneNumber,provider_config:{api_key:this.apiKey}}});Wn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){ce(e.message||this.$t("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE"))}}}},yW={class:"flex-shrink-0 flex-grow-0"},SW=["placeholder"],AW={key:0,class:"message"},IW={class:"flex-shrink-0 flex-grow-0"},CW=["placeholder"],OW={key:0,class:"message"},NW={class:"flex-shrink-0 flex-grow-0"},wW=["placeholder"],RW={key:0,class:"message"},xW={class:"w-full"};function $W(e,t,n,s,o,a){const i=M("NextButton");return p(),v("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[6]||(t[6]=Fe(r=>a.createChannel(),["prevent"]))},[h("div",yW,[h("label",{class:se({error:s.v$.inboxName.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.inboxName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...r))},null,40,SW),[[mt,o.inboxName]]),s.v$.inboxName.$error?(p(),v("span",AW,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.ERROR")),1)):w("",!0)],2)]),h("div",IW,[h("label",{class:se({error:s.v$.phoneNumber.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.phoneNumber=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...r))},null,40,CW),[[mt,o.phoneNumber]]),s.v$.phoneNumber.$error?(p(),v("span",OW,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.ERROR")),1)):w("",!0)],2)]),h("div",NW,[h("label",{class:se({error:s.v$.apiKey.$error})},[h("span",null,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.LABEL")),1),re(h("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.apiKey=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...r)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...r))},null,40,wW),[[mt,o.apiKey]]),s.v$.apiKey.$error?(p(),v("span",RW,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.ERROR")),1)):w("",!0)],2)]),h("div",xW,[y(i,{type:"submit",label:e.$t("INBOX_MGMT.ADD.WHATSAPP.SUBMIT_BUTTON"),"is-loading":e.uiFlags.isCreating},null,8,["label","is-loading"])])],32)}const MW=Ae(TW,[["render",$W]]),LW={components:{NextButton:oe},setup(){return{v$:bt()}},data(){return{inboxName:"",phoneNumber:"",apiKey:"",phoneNumberId:"",businessAccountId:""}},computed:{...lt({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:Ye},phoneNumber:{required:Ye,isPhoneE164OrEmpty:kf},apiKey:{required:Ye},phoneNumberId:{required:Ye,isNumber:B_},businessAccountId:{required:Ye,isNumber:B_}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.inboxName,channel:{type:"whatsapp",phone_number:this.phoneNumber,provider:"whatsapp_cloud",provider_config:{api_key:this.apiKey,phone_number_id:this.phoneNumberId,business_account_id:this.businessAccountId}}});Wn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){ce(e.message||this.$t("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE"))}}}},kW={class:"flex-shrink-0 flex-grow-0"},DW=["placeholder"],PW={key:0,class:"message"},BW={class:"flex-shrink-0 flex-grow-0"},FW=["placeholder"],UW={key:0,class:"message"},GW={class:"flex-shrink-0 flex-grow-0"},VW=["placeholder"],HW={key:0,class:"message"},WW={class:"flex-shrink-0 flex-grow-0"},zW=["placeholder"],jW={key:0,class:"message"},KW={class:"flex-shrink-0 flex-grow-0"},YW=["placeholder"],XW={key:0,class:"message"},qW={class:"w-full mt-4"};function ZW(e,t,n,s,o,a){const i=M("NextButton");return p(),v("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[10]||(t[10]=Fe(r=>a.createChannel(),["prevent"]))},[h("div",kW,[h("label",{class:se({error:s.v$.inboxName.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.inboxName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...r))},null,40,DW),[[mt,o.inboxName]]),s.v$.inboxName.$error?(p(),v("span",PW,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.ERROR")),1)):w("",!0)],2)]),h("div",BW,[h("label",{class:se({error:s.v$.phoneNumber.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.phoneNumber=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...r))},null,40,FW),[[mt,o.phoneNumber]]),s.v$.phoneNumber.$error?(p(),v("span",UW,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.ERROR")),1)):w("",!0)],2)]),h("div",GW,[h("label",{class:se({error:s.v$.phoneNumberId.$error})},[h("span",null,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.LABEL")),1),re(h("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.phoneNumberId=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...r)=>s.v$.phoneNumberId.$touch&&s.v$.phoneNumberId.$touch(...r))},null,40,VW),[[mt,o.phoneNumberId]]),s.v$.phoneNumberId.$error?(p(),v("span",HW,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.ERROR")),1)):w("",!0)],2)]),h("div",WW,[h("label",{class:se({error:s.v$.businessAccountId.$error})},[h("span",null,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.LABEL")),1),re(h("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>o.businessAccountId=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...r)=>s.v$.businessAccountId.$touch&&s.v$.businessAccountId.$touch(...r))},null,40,zW),[[mt,o.businessAccountId]]),s.v$.businessAccountId.$error?(p(),v("span",jW,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.ERROR")),1)):w("",!0)],2)]),h("div",KW,[h("label",{class:se({error:s.v$.apiKey.$error})},[h("span",null,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.LABEL")),1),re(h("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>o.apiKey=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.PLACEHOLDER"),onBlur:t[9]||(t[9]=(...r)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...r))},null,40,YW),[[mt,o.apiKey]]),s.v$.apiKey.$error?(p(),v("span",XW,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.ERROR")),1)):w("",!0)],2)]),h("div",qW,[y(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.WHATSAPP.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const QW=Ae(LW,[["render",ZW]]),JW={components:{PageHeader:Ms,Twilio:Ry,ThreeSixtyDialogWhatsapp:MW,CloudWhatsapp:QW},data(){return{provider:"whatsapp_cloud"}}},ez={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},tz={class:"flex-shrink-0 flex-grow-0"},nz={value:"whatsapp_cloud"},sz={value:"twilio"};function az(e,t,n,s,o,a){const i=M("PageHeader"),r=M("Twilio"),l=M("ThreeSixtyDialogWhatsapp"),c=M("CloudWhatsapp");return p(),v("div",ez,[y(i,{"header-title":e.$t("INBOX_MGMT.ADD.WHATSAPP.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.WHATSAPP.DESC")},null,8,["header-title","header-content"]),h("div",tz,[h("label",null,[Re(A(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[0]||(t[0]=u=>o.provider=u)},[h("option",nz,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD")),1),h("option",sz,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO")),1)],512),[[gn,o.provider]])])]),o.provider==="twilio"?(p(),$(r,{key:0,type:"whatsapp"})):o.provider==="360dialog"?(p(),$(l,{key:1})):(p(),$(c,{key:2}))])}const oz=Ae(JW,[["render",az]]),iz={components:{PageHeader:Ms,NextButton:oe},setup(){return{v$:bt()}},data(){return{channelName:"",lineChannelId:"",lineChannelSecret:"",lineChannelToken:""}},computed:{...lt({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:Ye},lineChannelId:{required:Ye},lineChannelSecret:{required:Ye},lineChannelToken:{required:Ye}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{name:this.channelName,channel:{type:"line",line_channel_id:this.lineChannelId,line_channel_secret:this.lineChannelSecret,line_channel_token:this.lineChannelToken}});Wn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch{ce(this.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API.ERROR_MESSAGE"))}}}},rz={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},lz={class:"flex-shrink-0 flex-grow-0"},cz=["placeholder"],uz={key:0,class:"message"},dz={class:"flex-shrink-0 flex-grow-0"},pz=["placeholder"],hz={class:"flex-shrink-0 flex-grow-0"},mz=["placeholder"],fz={class:"flex-shrink-0 flex-grow-0"},gz=["placeholder"],_z={class:"w-full mt-4"};function vz(e,t,n,s,o,a){const i=M("PageHeader"),r=M("NextButton");return p(),v("div",rz,[y(i,{"header-title":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.DESC")},null,8,["header-title","header-content"]),h("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[8]||(t[8]=Fe(l=>a.createChannel(),["prevent"]))},[h("div",lz,[h("label",{class:se({error:s.v$.channelName.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.channelName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...l))},null,40,cz),[[mt,o.channelName]]),s.v$.channelName.$error?(p(),v("span",uz,A(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.ERROR")),1)):w("",!0)],2)]),h("div",dz,[h("label",{class:se({error:s.v$.lineChannelId.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_ID.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.lineChannelId=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_ID.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.lineChannelId.$touch&&s.v$.lineChannelId.$touch(...l))},null,40,pz),[[mt,o.lineChannelId]])],2)]),h("div",hz,[h("label",{class:se({error:s.v$.lineChannelSecret.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_SECRET.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.lineChannelSecret=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_SECRET.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...l)=>s.v$.lineChannelSecret.$touch&&s.v$.lineChannelSecret.$touch(...l))},null,40,mz),[[mt,o.lineChannelSecret]])],2)]),h("div",fz,[h("label",{class:se({error:s.v$.lineChannelToken.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_TOKEN.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>o.lineChannelToken=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_TOKEN.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...l)=>s.v$.lineChannelToken.$touch&&s.v$.lineChannelToken.$touch(...l))},null,40,gz),[[mt,o.lineChannelToken]])],2)]),h("div",_z,[y(r,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const bz=Ae(iz,[["render",vz]]),Ez={components:{PageHeader:Ms,NextButton:oe},setup(){return{v$:bt()}},data(){return{botToken:""}},computed:{...lt({uiFlags:"inboxes/getUIFlags"})},validations:{botToken:{required:Ye}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{channel:{type:"telegram",bot_token:this.botToken}});Wn.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){ce(e.message||this.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.API.ERROR_MESSAGE"))}}}},Tz={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},yz={class:"flex-shrink-0 flex-grow-0"},Sz=["placeholder"],Az={class:"help-text"},Iz={class:"w-full mt-4"};function Cz(e,t,n,s,o,a){const i=M("PageHeader"),r=M("NextButton");return p(),v("div",Tz,[y(i,{"header-title":e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.DESC")},null,8,["header-title","header-content"]),h("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[2]||(t[2]=Fe(l=>a.createChannel(),["prevent"]))},[h("div",yz,[h("label",{class:se({error:s.v$.botToken.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.botToken=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.botToken.$touch&&s.v$.botToken.$touch(...l))},null,40,Sz),[[mt,o.botToken]])],2),h("p",Az,A(e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.SUBTITLE")),1)]),h("div",Iz,[y(r,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const Oz=Ae(Ez,[["render",Cz]]);class Nz extends Io{constructor(){super("instagram",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}}const xy=new Nz,wz={mixins:[jo],setup(){const{accountId:e}=zn();return{accountId:e,v$:bt()}},data(){return{isCreating:!1,hasError:!1,errorStateMessage:"",errorStateDescription:"",isRequestingAuthorization:!1}},mounted(){const e=new URLSearchParams(window.location.search),t=e.get("code"),n=e.get("error_message");n&&(this.hasError=!0,t==="400"?(this.errorStateMessage=n,this.errorStateDescription=this.$t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_AUTH")):(this.errorStateMessage=this.$t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_MESSAGE"),this.errorStateDescription=n));const s=window.location.pathname;window.history.replaceState({},document.title,s)},methods:{async requestAuthorization(){this.isRequestingAuthorization=!0;const e=await xy.generateAuthorization(),{data:{url:t}}=e;window.location.href=t}}},Rz={class:"border border-slate-25 dark:border-slate-800/60 bg-white dark:bg-slate-900 h-full p-6 w-full max-w-full md:w-3/4 md:max-w-[75%] flex-shrink-0 flex-grow-0"},xz={class:"flex flex-col items-center justify-start h-full text-center"},$z={key:0,class:"max-w-lg mx-auto text-center"},Mz={key:0},Lz={key:1,class:"flex flex-col items-center justify-center px-8 py-10 text-center shadow rounded-3xl outline outline-1 outline-n-weak"},kz={class:"text-2xl font-medium"},Dz={class:"py-6 text-sm text-n-slate-11"},Pz=["disabled"],Bz={class:"text-base font-medium"},Fz={key:0,class:"ml-2"};function Uz(e,t,n,s,o,a){const i=qe("dompurify-html");return p(),v("div",Rz,[h("div",xz,[o.hasError?(p(),v("div",$z,[h("h5",null,A(o.errorStateMessage),1),o.errorStateDescription?re((p(),v("p",Mz,null,512)),[[i,o.errorStateDescription]]):w("",!0)])):(p(),v("div",Lz,[h("h6",kz,A(e.$t("INBOX_MGMT.ADD.INSTAGRAM.CONNECT_YOUR_INSTAGRAM_PROFILE")),1),h("p",Dz,A(e.$t("INBOX_MGMT.ADD.INSTAGRAM.HELP")),1),h("button",{class:"flex items-center justify-center px-8 py-3.5 gap-2 text-white rounded-full bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#FCAF45] hover:shadow-lg transition-all duration-300 min-w-[240px] overflow-hidden",disabled:o.isRequestingAuthorization,onClick:t[0]||(t[0]=r=>a.requestAuthorization())},[t[2]||(t[2]=h("span",{class:"i-ri-instagram-line size-5"},null,-1)),h("span",Bz,A(e.$t("INBOX_MGMT.ADD.INSTAGRAM.CONTINUE_WITH_INSTAGRAM")),1),o.isRequestingAuthorization?(p(),v("span",Fz,t[1]||(t[1]=[h("svg",{class:"w-5 h-5 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):w("",!0)],8,Pz)]))])])}const Gz=Ae(wz,[["render",Uz]]),Vz={class:"overflow-auto col-span-6 p-6 w-full h-full rounded-t-lg border border-b-0 border-n-weak bg-n-solid-1"},Hz={__name:"Voice",setup(e){const{t}=Me(),n=pt(),s=xn(),o=ls({phoneNumber:"",accountSid:"",authToken:"",apiKeySid:"",apiKeySecret:"",twimlAppSid:""}),a=Oe("inboxes/getUIFlags"),r=bt({phoneNumber:{required:Ye,isPhoneE164:hO},accountSid:{required:Ye},authToken:{required:Ye},apiKeySid:{required:Ye},apiKeySecret:{required:Ye},twimlAppSid:{required:Ye}},o),l=C(()=>r.value.$invalid),c=C(()=>{var m,f,g,T,S,_;return{phoneNumber:(m=r.value.phoneNumber)!=null&&m.$error?t("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.ERROR"):"",accountSid:(f=r.value.accountSid)!=null&&f.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.REQUIRED"):"",authToken:(g=r.value.authToken)!=null&&g.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.REQUIRED"):"",apiKeySid:(T=r.value.apiKeySid)!=null&&T.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.REQUIRED"):"",apiKeySecret:(S=r.value.apiKeySecret)!=null&&S.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.REQUIRED"):"",twimlAppSid:(_=r.value.twimlAppSid)!=null&&_.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.TWIML_APP_SID.REQUIRED"):""}});function u(){const m={account_sid:o.accountSid,auth_token:o.authToken,api_key_sid:o.apiKeySid,api_key_secret:o.apiKeySecret};return o.twimlAppSid&&(m.outgoing_application_sid=o.twimlAppSid),m}async function d(){var f,g;if(await r.value.$validate())try{const T=await n.dispatch("inboxes/createVoiceChannel",{name:`Voice (${o.phoneNumber})`,voice:{phone_number:o.phoneNumber,provider:"twilio",provider_config:u()}});s.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:T.id}})}catch(T){ce(((g=(f=T.response)==null?void 0:f.data)==null?void 0:g.message)||t("INBOX_MGMT.ADD.VOICE.API.ERROR_MESSAGE"))}}return(m,f)=>{var g,T,S,_,E,b;return p(),v("div",Vz,[y(Ms,{"header-title":N(t)("INBOX_MGMT.ADD.VOICE.TITLE"),"header-content":N(t)("INBOX_MGMT.ADD.VOICE.DESC")},null,8,["header-title","header-content"]),h("form",{class:"flex flex-col gap-4 flex-wrap mx-0",onSubmit:Fe(d,["prevent"])},[y(_n,{modelValue:o.phoneNumber,"onUpdate:modelValue":f[0]||(f[0]=I=>o.phoneNumber=I),label:N(t)("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.LABEL"),placeholder:N(t)("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.PLACEHOLDER"),message:c.value.phoneNumber,"message-type":c.value.phoneNumber?"error":"info",onBlur:(g=N(r).phoneNumber)==null?void 0:g.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),y(_n,{modelValue:o.accountSid,"onUpdate:modelValue":f[1]||(f[1]=I=>o.accountSid=I),label:N(t)("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.LABEL"),placeholder:N(t)("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.PLACEHOLDER"),message:c.value.accountSid,"message-type":c.value.accountSid?"error":"info",onBlur:(T=N(r).accountSid)==null?void 0:T.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),y(_n,{modelValue:o.authToken,"onUpdate:modelValue":f[2]||(f[2]=I=>o.authToken=I),type:"password",label:N(t)("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.LABEL"),placeholder:N(t)("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.PLACEHOLDER"),message:c.value.authToken,"message-type":c.value.authToken?"error":"info",onBlur:(S=N(r).authToken)==null?void 0:S.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),y(_n,{modelValue:o.apiKeySid,"onUpdate:modelValue":f[3]||(f[3]=I=>o.apiKeySid=I),label:N(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.LABEL"),placeholder:N(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.PLACEHOLDER"),message:c.value.apiKeySid,"message-type":c.value.apiKeySid?"error":"info",onBlur:(_=N(r).apiKeySid)==null?void 0:_.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),y(_n,{modelValue:o.apiKeySecret,"onUpdate:modelValue":f[4]||(f[4]=I=>o.apiKeySecret=I),type:"password",label:N(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.LABEL"),placeholder:N(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.PLACEHOLDER"),message:c.value.apiKeySecret,"message-type":c.value.apiKeySecret?"error":"info",onBlur:(E=N(r).apiKeySecret)==null?void 0:E.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),y(_n,{modelValue:o.twimlAppSid,"onUpdate:modelValue":f[5]||(f[5]=I=>o.twimlAppSid=I),label:N(t)("INBOX_MGMT.ADD.VOICE.TWILIO.TWIML_APP_SID.LABEL"),placeholder:N(t)("INBOX_MGMT.ADD.VOICE.TWILIO.TWIML_APP_SID.PLACEHOLDER"),message:c.value.twimlAppSid,"message-type":c.value.twimlAppSid?"error":"info",onBlur:(b=N(r).twimlAppSid)==null?void 0:b.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),h("div",null,[y(oe,{"is-loading":N(a).isCreating,disabled:l.value,label:N(t)("INBOX_MGMT.ADD.VOICE.SUBMIT_BUTTON"),type:"submit"},null,8,["is-loading","disabled","label"])])],32)])}}},Wz={facebook:oV,website:NV,twitter:kV,api:KV,email:bH,sms:EW,whatsapp:oz,line:bz,telegram:Oz,instagram:Gz,voice:Hz},zz=yo({name:"NewChannelView",props:{channelName:{type:String,required:!0}},render(){const e=Wz[this.channelName];return e?yn(e):null}}),jz={components:{BackButton:lr,NextButton:oe},props:{headerTitle:{default:"",type:String},buttonRoute:{default:"",type:String},buttonText:{default:"",type:String},icon:{default:"",type:String},showBackButton:{type:Boolean,default:!1},showNewButton:{type:Boolean,default:!1},backUrl:{type:[String,Object],default:""},backButtonLabel:{type:String,default:""},showSidemenuIcon:{type:Boolean,default:!0}},setup(){const{isAdmin:e}=ka();return{isAdmin:e}},computed:{iconClass(){return`icon ${this.icon} header--icon`}}},Kz={class:"flex justify-between items-center h-20 min-h-[3.5rem] px-4 py-2 bg-n-background"},Yz={class:"flex items-center mb-0 text-2xl text-n-slate-12"},Xz={class:"text-xl font-medium text-slate-900 dark:text-slate-100"};function qz(e,t,n,s,o,a){const i=M("woot-sidemenu-icon"),r=M("BackButton"),l=M("NextButton"),c=M("router-link");return p(),v("div",Kz,[h("h1",Yz,[n.showSidemenuIcon?(p(),$(i,{key:0})):w("",!0),n.showBackButton?(p(),$(r,{key:1,"button-label":n.backButtonLabel,"back-url":n.backUrl,class:"ml-2 mr-4"},null,8,["button-label","back-url"])):w("",!0),We(e.$slots,"default"),h("span",Xz,A(n.headerTitle),1)]),n.showNewButton&&s.isAdmin?(p(),$(c,{key:0,to:n.buttonRoute},{default:K(()=>[y(l,{teal:"",icon:"i-lucide-circle-plus",class:"button--fixed-top",label:n.buttonText},null,8,["label"])]),_:1},8,["to"])):w("",!0)])}const Zz=Ae(jz,[["render",qz]]),Qz={class:"flex flex-1 flex-col m-0 bg-n-background overflow-auto"},Lc={__name:"Wrapper",props:{headerTitle:{type:String,default:""},headerButtonText:{type:String,default:""},icon:{type:String,default:""},keepAlive:{type:Boolean,default:!0},newButtonRoutes:{type:Array,default:()=>[]},showBackButton:{type:Boolean,default:!1},backUrl:{type:[String,Object],default:""},showSidemenuIcon:{type:Boolean,default:!0},fullWidth:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=Me(),s=C(()=>t.newButtonRoutes.length&&!t.showBackButton),o=C(()=>t.headerTitle||t.icon||t.showBackButton||s.value);return(a,i)=>{const r=M("router-view");return p(),v("div",Qz,[h("div",{class:se(["mx-auto w-full flex flex-col flex-1",{"max-w-6xl":!e.fullWidth}])},[o.value?(p(),$(Zz,{key:0,"button-route":"new",icon:e.icon,"header-title":N(n)(e.headerTitle),"button-text":N(n)(e.headerButtonText),"show-back-button":e.showBackButton,"back-url":e.backUrl,"show-new-button":s.value,"show-sidemenu-icon":e.showSidemenuIcon,class:se(["sticky top-0 z-20",{"max-w-6xl w-full mx-auto":e.fullWidth}])},null,8,["icon","header-title","button-text","show-back-button","back-url","show-new-button","show-sidemenu-icon","class"])):w("",!0),y(r,{class:"px-5 flex-1 overflow-hidden"},{default:K(({Component:l})=>[e.keepAlive?(p(),$(Od,{key:1},[(p(),$(vs(l),{key:a.$route.fullPath}))],1024)):(p(),$(vs(l),{key:a.$route.fullPath}))]),_:1})],2)])}}},Jz={__name:"ChannelName",props:{channelType:{type:String,required:!0},medium:{type:String,default:""}},setup(e){const t=e,n=nn(),{t:s}=Me(),o=C(()=>n["globalConfig/get"].value),a={"Channel::FacebookPage":"MESSENGER","Channel::WebWidget":"WEB_WIDGET","Channel::TwitterProfile":"TWITTER_PROFILE","Channel::TwilioSms":"TWILIO_SMS","Channel::Whatsapp":"WHATSAPP","Channel::Sms":"SMS","Channel::Email":"EMAIL","Channel::Telegram":"TELEGRAM","Channel::Line":"LINE","Channel::Api":"API","Channel::Instagram":"INSTAGRAM","Channel::Voice":"VOICE"},i=()=>t.medium==="whatsapp"?s("INBOX_MGMT.CHANNELS.WHATSAPP"):s("INBOX_MGMT.CHANNELS.TWILIO_SMS"),r=C(()=>t.channelType==="Channel::Api"?o.value.apiChannelName||s("INBOX_MGMT.CHANNELS.API"):t.channelType==="Channel::TwilioSms"?i():s(`INBOX_MGMT.CHANNELS.${a[t.channelType]}`));return(l,c)=>(p(),v("span",null,A(r.value),1))}};function $y(e){const t={"Channel::Api":"i-ri-cloudy-fill","Channel::Email":"i-ri-mail-fill","Channel::FacebookPage":"i-ri-messenger-fill","Channel::Line":"i-ri-line-fill","Channel::Sms":"i-ri-chat-1-fill","Channel::Telegram":"i-ri-telegram-fill","Channel::TwilioSms":"i-ri-chat-1-fill","Channel::TwitterProfile":"i-ri-twitter-x-fill","Channel::WebWidget":"i-ri-global-fill","Channel::Whatsapp":"i-ri-whatsapp-fill","Channel::Instagram":"i-ri-instagram-fill","Channel::Voice":"i-ri-phone-fill"},n={microsoft:"i-ri-microsoft-fill",google:"i-ri-google-fill"};return C(()=>{const o=e.channel_type;let a=t[o];return o==="Channel::Email"&&e.provider&&Object.keys(n).includes(e.provider)&&(a=n[e.provider]),a??"i-ri-global-fill"})}const My={__name:"ChannelIcon",props:{inbox:{type:Object,required:!0}},setup(e){const n=$y(e.inbox);return(s,o)=>(p(),$(Rt,{icon:N(n)},null,8,["icon"]))}},ej={class:"min-w-full overflow-x-auto"},tj={class:"divide-y divide-n-weak flex-1 text-slate-700 dark:text-slate-100"},nj={class:"py-4 ltr:pr-4 rtl:pl-4"},sj={class:"flex items-center flex-row gap-4"},aj={key:1,class:"w-[48px] h-[48px] flex justify-center items-center bg-n-alpha-3 rounded-full p-2 ring ring-n-solid-1 border border-n-strong shadow-sm"},oj={class:"block font-medium capitalize"},ij={class:"py-4"},rj={class:"flex gap-1 justify-end"},lj={__name:"Index",setup(e){const t=nn(),n=pt(),{t:s}=Me(),{isAdmin:o}=ka(),a=X(!1),i=X({}),r=C(()=>t["inboxes/getInboxes"].value),l=C(()=>t["inboxes/getUIFlags"].value),c=C(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.YES")} ${i.value.name}`),u=C(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.NO")} ${i.value.name}`),d=C(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.MESSAGE")} ${i.value.name}?`),m=C(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{inboxName:i.value.name})}`),f=async({id:_})=>{try{await n.dispatch("inboxes/delete",_),ce(s("INBOX_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{ce(s("INBOX_MGMT.DELETE.API.ERROR_MESSAGE"))}},g=()=>{a.value=!1,i.value={}},T=()=>{f(i.value),g()},S=_=>{a.value=!0,i.value=_};return(_,E)=>{const b=M("router-link"),I=M("woot-confirm-delete-modal"),R=qe("tooltip");return p(),$(Da,{"no-records-found":!r.value.length,"no-records-message":_.$t("INBOX_MGMT.LIST.404"),"is-loading":l.value.isFetching},{header:K(()=>[y(Cs,{title:_.$t("INBOX_MGMT.HEADER"),description:_.$t("INBOX_MGMT.DESCRIPTION"),"link-text":_.$t("INBOX_MGMT.LEARN_MORE"),"feature-name":"inboxes"},{actions:K(()=>[N(o)?(p(),$(b,{key:0,to:{name:"settings_inbox_new"}},{default:K(()=>[y(oe,{icon:"i-lucide-circle-plus",label:_.$t("SETTINGS.INBOXES.NEW_INBOX")},null,8,["label"])]),_:1})):w("",!0)]),_:1},8,["title","description","link-text"])]),body:K(()=>[h("table",ej,[h("tbody",tj,[(p(!0),v(pe,null,Ne(r.value,O=>(p(),v("tr",{key:O.id},[h("td",nj,[h("div",sj,[O.avatar_url?(p(),$(Hn,{key:0,class:"bg-n-alpha-3 rounded-full p-2 ring ring-n-solid-1 border border-n-strong shadow-sm",src:O.avatar_url,username:O.name,size:"48px"},null,8,["src","username"])):(p(),v("div",aj,[y(My,{class:"size-5",inbox:O},null,8,["inbox"])])),h("div",null,[h("span",oj,A(O.name),1),y(Jz,{"channel-type":O.channel_type,medium:O.medium},null,8,["channel-type","medium"])])])]),h("td",ij,[h("div",rj,[y(b,{to:{name:"settings_inbox_show",params:{inboxId:O.id}}},{default:K(()=>[N(o)?re((p(),$(oe,{key:0,icon:"i-lucide-settings",slate:"",xs:"",faded:""},null,512)),[[R,_.$t("INBOX_MGMT.SETTINGS"),void 0,{top:!0}]]):w("",!0)]),_:2},1032,["to"]),N(o)?re((p(),$(oe,{key:0,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:x=>S(O)},null,8,["onClick"])),[[R,_.$t("INBOX_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):w("",!0)])])]))),128))])])]),default:K(()=>[a.value?(p(),$(I,{key:0,show:a.value,"onUpdate:show":E[0]||(E[0]=O=>a.value=O),title:_.$t("INBOX_MGMT.DELETE.CONFIRM.TITLE"),message:d.value,"confirm-text":c.value,"reject-text":u.value,"confirm-value":i.value.name,"confirm-place-holder-text":m.value,onOnConfirm:T,onOnClose:g},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):w("",!0)]),_:1},8,["no-records-found","no-records-message","is-loading"])}}},cj={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""}}},uj={class:"border-b border-solid border-n-weak/60"},dj={class:"max-w-6xl w-full mx-auto pt-4 pb-0 px-8"},pj={class:"text-2xl text-slate-800 dark:text-slate-100 mb-1 font-medium"},hj={key:0,class:"w-full text-slate-600 dark:text-slate-300 text-sm mb-2"};function mj(e,t,n,s,o,a){return p(),v("div",uj,[h("div",dj,[h("h2",pj,A(n.headerTitle),1),n.headerContent?(p(),v("p",hj,A(n.headerContent),1)):w("",!0),We(e.$slots,"default")])])}const fj=Ae(cj,[["render",mj]]),gj={props:{title:{type:String,default:""},subTitle:{type:String,default:""},showBorder:{type:Boolean,default:!0},note:{type:String,default:""}}},_j={class:"grid grid-cols-1 lg:grid-cols-8 gap-6"},vj={class:"col-span-2"},bj={key:0,class:"text-base text-woot-500 dark:text-woot-500 mb-0 font-medium"},Ej={class:"text-sm mb-2 text-slate-700 dark:text-slate-300 leading-5 tracking-normal mt-2"},Tj={key:1},yj={class:"font-semibold"},Sj={class:"col-span-6 xl:col-span-5"};function Aj(e,t,n,s,o,a){return p(),v("div",{class:se(["ml-0 mr-0 py-8 w-full",{"border-b border-solid border-n-weak/60 dark:border-n-weak":n.showBorder}])},[h("div",_j,[h("div",vj,[n.title?(p(),v("p",bj,A(n.title),1)):w("",!0),h("p",Ej,[n.subTitle?We(e.$slots,"subTitle",{key:0},()=>[Re(A(n.subTitle),1)]):w("",!0)]),n.note?(p(),v("p",Tj,[h("span",yj,A(e.$t("INBOX_MGMT.NOTE")),1),Re(" "+A(n.note),1)])):w("",!0)]),h("div",Sj,[We(e.$slots,"default")])])],2)}const dr=Ae(gj,[["render",Aj]]),_c={REPLY_TO:"replyTo",REPLY_TO_OUTGOING:"replyToOutgoing"},Ij={[_c.REPLY_TO]:[yt.FB,yt.WEB,yt.TWITTER,yt.WHATSAPP,yt.TELEGRAM,yt.API],[_c.REPLY_TO_OUTGOING]:[yt.WEB,yt.TWITTER,yt.WHATSAPP,yt.TELEGRAM,yt.API]},Yo={computed:{channelType(){return this.inbox.channel_type},whatsAppAPIProvider(){return this.inbox.provider||""},isAMicrosoftInbox(){return this.isAnEmailChannel&&this.inbox.provider==="microsoft"},isAGoogleInbox(){return this.isAnEmailChannel&&this.inbox.provider==="google"},isAPIInbox(){return this.channelType===yt.API},isATwitterInbox(){return this.channelType===yt.TWITTER},isAFacebookInbox(){return this.channelType===yt.FB},isAWebWidgetInbox(){return this.channelType===yt.WEB},isATwilioChannel(){return this.channelType===yt.TWILIO},isALineChannel(){return this.channelType===yt.LINE},isAnEmailChannel(){return this.channelType===yt.EMAIL},isATelegramChannel(){return this.channelType===yt.TELEGRAM},isAVoiceChannel(){return this.channelType===yt.VOICE},isATwilioSMSChannel(){const{medium:e=""}=this.inbox;return this.isATwilioChannel&&e==="sms"},isASmsInbox(){return this.channelType===yt.SMS||this.isATwilioSMSChannel},isATwilioWhatsAppChannel(){const{medium:e=""}=this.inbox;return this.isATwilioChannel&&e==="whatsapp"},isAWhatsAppCloudChannel(){return this.channelType===yt.WHATSAPP&&this.whatsAppAPIProvider==="whatsapp_cloud"},is360DialogWhatsAppChannel(){return this.channelType===yt.WHATSAPP&&this.whatsAppAPIProvider==="default"},chatAdditionalAttributes(){const{additional_attributes:e}=this.chat||{};return e||{}},isTwitterInboxTweet(){return this.chatAdditionalAttributes.type==="tweet"},twilioBadge(){return`${this.isATwilioSMSChannel?"sms":"whatsapp"}`},twitterBadge(){return`${this.isTwitterInboxTweet?"twitter-tweet":"twitter-dm"}`},facebookBadge(){return this.chatAdditionalAttributes.type||"facebook"},inboxBadge(){let e="";return this.isATwitterInbox?e=this.twitterBadge:this.isAFacebookInbox?e=this.facebookBadge:this.isATwilioChannel?e=this.twilioBadge:this.isAWhatsAppChannel&&(e="whatsapp"),e||this.channelType},isAWhatsAppChannel(){return this.channelType===yt.WHATSAPP||this.isATwilioWhatsAppChannel},isAnInstagramChannel(){return this.channelType===yt.INSTAGRAM}},methods:{inboxHasFeature(e){var t;return((t=Ij[e])==null?void 0:t.includes(this.channelType))??!1}}},Zd={__name:"Banner",props:{color:{type:String,default:"slate",validator:e=>["blue","ruby","amber","slate","teal"].includes(e)},actionLabel:{type:String,default:null}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,o=C(()=>({slate:"bg-n-slate-3 border-n-slate-4 text-n-slate-11",amber:"bg-n-amber-3 border-n-amber-4 text-n-amber-11",teal:"bg-n-teal-3 border-n-teal-4 text-n-teal-11",ruby:"bg-n-ruby-3 border-n-ruby-4 text-n-ruby-11",blue:"bg-n-blue-3 border-n-blue-4 text-n-blue-11"})[n.color]),a=C(()=>({slate:"bg-n-slate-4 hover:bg-n-slate-5 text-n-slate-11",amber:"bg-n-amber-4 hover:bg-n-amber-5 text-n-amber-11",teal:"bg-n-teal-4 hover:bg-n-teal-5 text-n-teal-11",ruby:"bg-n-ruby-4 hover:bg-n-ruby-5 text-n-ruby-11",blue:"bg-n-blue-4 hover:bg-n-blue-5 text-n-blue-11"})[n.color]),i=()=>{s("action")};return(r,l)=>(p(),v("div",{class:se(["text-sm rounded-xl flex items-center justify-between gap-2 border",[o.value,{"py-2 px-3":!e.actionLabel,"pl-3 p-2":e.actionLabel}]])},[h("div",null,[We(r.$slots,"default")]),h("div",null,[e.actionLabel?(p(),v("button",{key:0,class:se(["px-3 py-1 w-auto grid place-content-center rounded-lg",a.value]),onClick:i},A(e.actionLabel),3)):w("",!0)])],2))}},Qd={__name:"InboxReconnectionRequired",emits:["reauthorize"],setup(e,{emit:t}){const n=t;return(s,o)=>(p(),$(Zd,{color:"ruby","action-label":s.$t("INBOX_MGMT.CLICK_TO_RECONNECT"),onAction:o[0]||(o[0]=a=>n("reauthorize"))},{default:K(()=>[Re(A(s.$t("INBOX_MGMT.RECONNECTION_REQUIRED")),1)]),_:1},8,["action-label"]))}},Cj={components:{InboxReconnectionRequired:Qd},props:{inbox:{type:Object,required:!0}},computed:{inboxId(){return this.inbox.id}},mounted(){window.fbAsyncInit=this.runFBInit},methods:{runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return Ay("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(e){e.name==="ScriptLoaderError"?ce(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(el(e),ce(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},tryFBlogin(){FB.login(e=>{e.status==="connected"?this.reauthorizeFBPage(e.authResponse.accessToken):e.status==="not_authorized"?ce(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")):ce(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"))},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages",auth_type:"reauthorize"})},async reauthorizeFBPage(e){try{await this.$store.dispatch("inboxes/reauthorizeFacebookPage",{omniauthToken:e,inboxId:this.inboxId}),ce(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_SUCCESS"))}catch{ce(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_ERROR"))}}}};function Oj(e,t,n,s,o,a){const i=M("InboxReconnectionRequired");return p(),$(i,{class:"mx-8 mt-5",onReauthorize:a.startLogin},null,8,["onReauthorize"])}const Nj=Ae(Cj,[["render",Oj],["__scopeId","data-v-da9762a6"]]),wj={__name:"Reauthorize",setup(e){const{t}=Me(),n=X(!1);async function s(){try{n.value=!0;const o=await xy.generateAuthorization(),{data:{url:a}}=o;window.location.href=a}catch{ce(t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_AUTH"))}finally{n.value=!1}}return(o,a)=>(p(),$(Qd,{class:"mx-8 mt-5",onReauthorize:s}))}},Rj={class:"flex items-center gap-2"},Ly={__name:"DuplicateInboxBanner",props:{content:{type:String,default:""}},setup(e){return(t,n)=>(p(),$(Zd,{color:"amber"},{default:K(()=>[h("div",Rj,[y(Rt,{icon:"i-lucide-info",class:"flex-shrink-0 size-4"}),h("span",null,A(e.content),1)])]),_:1}))}},xj={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=Me(),s=X(!1);async function o(){try{s.value=!0;const a=await Cy.generateAuthorization({email:t.inbox.email}),{data:{url:i}}=a;window.location.href=i}catch{ce(n("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE"))}finally{s.value=!1}}return(a,i)=>(p(),$(Qd,{class:"mx-8 mt-5",onReauthorize:o}))}},$j={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=Me(),s=X(!1),o=C(()=>t.inbox.imap_login&&t.inbox.imap_enabled?t.inbox.imap_login:t.inbox.email);async function a(){try{s.value=!0;const i=await Oy.generateAuthorization({email:o.value}),{data:{url:r}}=i;window.location.href=r}catch{ce(n("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE"))}finally{s.value=!1}}return(i,r)=>(p(),$(Qd,{class:"mx-8 mt-5",onReauthorize:a}))}};var ky={exports:{}};/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function d1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d1(Object(n),!0).forEach(function(s){Mj(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Fu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fu=function(t){return typeof t}:Fu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function Mj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ma(){return Ma=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ma.apply(this,arguments)}function Lj(e,t){if(e==null)return{};var n={},s=Object.keys(e),o,a;for(a=0;a<s.length;a++)o=s[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function kj(e,t){if(e==null)return{};var n=Lj(e,t),s,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)s=a[o],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Dj(e){return Pj(e)||Bj(e)||Fj(e)||Uj()}function Pj(e){if(Array.isArray(e))return tf(e)}function Bj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fj(e,t){if(e){if(typeof e=="string")return tf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tf(e,t)}}function tf(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Uj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Gj="1.14.0";function Do(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Xo=Do(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),kc=Do(/Edge/i),p1=Do(/firefox/i),Yl=Do(/safari/i)&&!Do(/chrome/i)&&!Do(/android/i),Dy=Do(/iP(ad|od|hone)/i),Vj=Do(/chrome/i)&&Do(/android/i),Py={capture:!1,passive:!1};function en(e,t,n){e.addEventListener(t,n,!Xo&&Py)}function Zt(e,t,n){e.removeEventListener(t,n,!Xo&&Py)}function hd(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Hj(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ha(e,t,n,s){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&hd(e,t):hd(e,t))||s&&e===n)return e;if(e===n)break}while(e=Hj(e))}return null}var h1=/\s+/g;function Vn(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var s=(" "+e.className+" ").replace(h1," ").replace(" "+t+" "," ");e.className=(s+(n?" "+t:"")).replace(h1," ")}}function Ot(e,t,n){var s=e&&e.style;if(s){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in s)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),s[t]=n+(typeof n=="string"?"":"px")}}function er(e,t){var n="";if(typeof e=="string")n=e;else do{var s=Ot(e,"transform");s&&s!=="none"&&(n=s+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function By(e,t,n){if(e){var s=e.getElementsByTagName(t),o=0,a=s.length;if(n)for(;o<a;o++)n(s[o],o);return s}return[]}function go(){var e=document.scrollingElement;return e||document.documentElement}function Bn(e,t,n,s,o){if(!(!e.getBoundingClientRect&&e!==window)){var a,i,r,l,c,u,d;if(e!==window&&e.parentNode&&e!==go()?(a=e.getBoundingClientRect(),i=a.top,r=a.left,l=a.bottom,c=a.right,u=a.height,d=a.width):(i=0,r=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!Xo))do if(o&&o.getBoundingClientRect&&(Ot(o,"transform")!=="none"||n&&Ot(o,"position")!=="static")){var m=o.getBoundingClientRect();i-=m.top+parseInt(Ot(o,"border-top-width")),r-=m.left+parseInt(Ot(o,"border-left-width")),l=i+a.height,c=r+a.width;break}while(o=o.parentNode);if(s&&e!==window){var f=er(o||e),g=f&&f.a,T=f&&f.d;f&&(i/=T,r/=g,d/=g,u/=T,l=i+u,c=r+d)}return{top:i,left:r,bottom:l,right:c,width:d,height:u}}}function m1(e,t,n){for(var s=di(e,!0),o=Bn(e)[t];s;){var a=Bn(s)[n],i=void 0;if(i=o>=a,!i)return s;if(s===go())break;s=di(s,!1)}return!1}function Qr(e,t,n,s){for(var o=0,a=0,i=e.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==Dt.ghost&&(s||i[a]!==Dt.dragged)&&Ha(i[a],n.draggable,e,!1)){if(o===t)return i[a];o++}a++}return null}function Og(e,t){for(var n=e.lastElementChild;n&&(n===Dt.ghost||Ot(n,"display")==="none"||t&&!hd(n,t));)n=n.previousElementSibling;return n||null}function Zn(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Dt.clone&&(!t||hd(e,t))&&n++;return n}function f1(e){var t=0,n=0,s=go();if(e)do{var o=er(e),a=o.a,i=o.d;t+=e.scrollLeft*a,n+=e.scrollTop*i}while(e!==s&&(e=e.parentNode));return[t,n]}function Wj(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var s in t)if(t.hasOwnProperty(s)&&t[s]===e[n][s])return Number(n)}return-1}function di(e,t){if(!e||!e.getBoundingClientRect)return go();var n=e,s=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=Ot(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return go();if(s||t)return n;s=!0}}while(n=n.parentNode);return go()}function zj(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Ph(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Xl;function Fy(e,t){return function(){if(!Xl){var n=arguments,s=this;n.length===1?e.call(s,n[0]):e.apply(s,n),Xl=setTimeout(function(){Xl=void 0},t)}}}function jj(){clearTimeout(Xl),Xl=void 0}function Uy(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ng(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function g1(e,t){Ot(e,"position","absolute"),Ot(e,"top",t.top),Ot(e,"left",t.left),Ot(e,"width",t.width),Ot(e,"height",t.height)}function Bh(e){Ot(e,"position",""),Ot(e,"top",""),Ot(e,"left",""),Ot(e,"width",""),Ot(e,"height","")}var Gs="Sortable"+new Date().getTime();function Kj(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(o){if(!(Ot(o,"display")==="none"||o===Dt.ghost)){e.push({target:o,rect:Bn(o)});var a=To({},e[e.length-1].rect);if(o.thisAnimationDuration){var i=er(o,!0);i&&(a.top-=i.f,a.left-=i.e)}o.fromRect=a}})}},addAnimationState:function(s){e.push(s)},removeAnimationState:function(s){e.splice(Wj(e,{target:s}),1)},animateAll:function(s){var o=this;if(!this.options.animation){clearTimeout(t),typeof s=="function"&&s();return}var a=!1,i=0;e.forEach(function(r){var l=0,c=r.target,u=c.fromRect,d=Bn(c),m=c.prevFromRect,f=c.prevToRect,g=r.rect,T=er(c,!0);T&&(d.top-=T.f,d.left-=T.e),c.toRect=d,c.thisAnimationDuration&&Ph(m,d)&&!Ph(u,d)&&(g.top-d.top)/(g.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=Xj(g,m,f,o.options)),Ph(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=o.options.animation),o.animate(c,g,d,l)),l&&(a=!0,i=Math.max(i,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),a?t=setTimeout(function(){typeof s=="function"&&s()},i):typeof s=="function"&&s(),e=[]},animate:function(s,o,a,i){if(i){Ot(s,"transition",""),Ot(s,"transform","");var r=er(this.el),l=r&&r.a,c=r&&r.d,u=(o.left-a.left)/(l||1),d=(o.top-a.top)/(c||1);s.animatingX=!!u,s.animatingY=!!d,Ot(s,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=Yj(s),Ot(s,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Ot(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){Ot(s,"transition",""),Ot(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},i)}}}}function Yj(e){return e.offsetWidth}function Xj(e,t,n,s){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*s.animation}var yr=[],Fh={initializeByDefault:!0},Dc={mount:function(t){for(var n in Fh)Fh.hasOwnProperty(n)&&!(n in t)&&(t[n]=Fh[n]);yr.forEach(function(s){if(s.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),yr.push(t)},pluginEvent:function(t,n,s){var o=this;this.eventCanceled=!1,s.cancel=function(){o.eventCanceled=!0};var a=t+"Global";yr.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][a]&&n[i.pluginName][a](To({sortable:n},s)),n.options[i.pluginName]&&n[i.pluginName][t]&&n[i.pluginName][t](To({sortable:n},s)))})},initializePlugins:function(t,n,s,o){yr.forEach(function(r){var l=r.pluginName;if(!(!t.options[l]&&!r.initializeByDefault)){var c=new r(t,n,t.options);c.sortable=t,c.options=t.options,t[l]=c,Ma(s,c.defaults)}});for(var a in t.options)if(t.options.hasOwnProperty(a)){var i=this.modifyOption(t,a,t.options[a]);typeof i<"u"&&(t.options[a]=i)}},getEventProperties:function(t,n){var s={};return yr.forEach(function(o){typeof o.eventProperties=="function"&&Ma(s,o.eventProperties.call(n[o.pluginName],t))}),s},modifyOption:function(t,n,s){var o;return yr.forEach(function(a){t[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(o=a.optionListeners[n].call(t[a.pluginName],s))}),o}};function kl(e){var t=e.sortable,n=e.rootEl,s=e.name,o=e.targetEl,a=e.cloneEl,i=e.toEl,r=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,m=e.originalEvent,f=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[Gs],!!t){var T,S=t.options,_="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!Xo&&!kc?T=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(T=document.createEvent("Event"),T.initEvent(s,!0,!0)),T.to=i||n,T.from=r||n,T.item=o||n,T.clone=a,T.oldIndex=l,T.newIndex=c,T.oldDraggableIndex=u,T.newDraggableIndex=d,T.originalEvent=m,T.pullMode=f?f.lastPutMode:void 0;var E=To(To({},g),Dc.getEventProperties(s,t));for(var b in E)T[b]=E[b];n&&n.dispatchEvent(T),S[_]&&S[_].call(t,T)}}var qj=["evt"],aa=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.evt,a=kj(s,qj);Dc.pluginEvent.bind(Dt)(t,n,To({dragEl:ht,parentEl:Kn,ghostEl:Kt,rootEl:Dn,nextEl:zi,lastDownEl:Uu,cloneEl:Yn,cloneHidden:ri,dragStarted:Dl,putSortable:ws,activeSortable:Dt.active,originalEvent:o,oldIndex:Dr,oldDraggableIndex:ql,newIndex:ha,newDraggableIndex:oi,hideGhostForTarget:Wy,unhideGhostForTarget:zy,cloneNowHidden:function(){ri=!0},cloneNowShown:function(){ri=!1},dispatchSortableEvent:function(r){js({sortable:n,name:r,originalEvent:o})}},a))};function js(e){kl(To({putSortable:ws,cloneEl:Yn,targetEl:ht,rootEl:Dn,oldIndex:Dr,oldDraggableIndex:ql,newIndex:ha,newDraggableIndex:oi},e))}var ht,Kn,Kt,Dn,zi,Uu,Yn,ri,Dr,ha,ql,oi,ou,ws,xr=!1,md=!1,fd=[],Di,Fa,Uh,Gh,_1,v1,Dl,Sr,Zl,Ql=!1,iu=!1,Gu,Ds,Vh=[],nf=!1,gd=[],Jd=typeof document<"u",ru=Dy,b1=kc||Xo?"cssFloat":"float",Zj=Jd&&!Vj&&!Dy&&"draggable"in document.createElement("div"),Gy=function(){if(Jd){if(Xo)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Vy=function(t,n){var s=Ot(t),o=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),a=Qr(t,0,n),i=Qr(t,1,n),r=a&&Ot(a),l=i&&Ot(i),c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+Bn(a).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Bn(i).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&r.float!=="none"){var d=r.float==="left"?"left":"right";return i&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return a&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||c>=o&&s[b1]==="none"||i&&s[b1]==="none"&&c+u>o)?"vertical":"horizontal"},Qj=function(t,n,s){var o=s?t.left:t.top,a=s?t.right:t.bottom,i=s?t.width:t.height,r=s?n.left:n.top,l=s?n.right:n.bottom,c=s?n.width:n.height;return o===r||a===l||o+i/2===r+c/2},Jj=function(t,n){var s;return fd.some(function(o){var a=o[Gs].options.emptyInsertThreshold;if(!(!a||Og(o))){var i=Bn(o),r=t>=i.left-a&&t<=i.right+a,l=n>=i.top-a&&n<=i.bottom+a;if(r&&l)return s=o}}),s},Hy=function(t){function n(a,i){return function(r,l,c,u){var d=r.options.group.name&&l.options.group.name&&r.options.group.name===l.options.group.name;if(a==null&&(i||d))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return n(a(r,l,c,u),i)(r,l,c,u);var m=(i?r:l).options.group.name;return a===!0||typeof a=="string"&&a===m||a.join&&a.indexOf(m)>-1}}var s={},o=t.group;(!o||Fu(o)!="object")&&(o={name:o}),s.name=o.name,s.checkPull=n(o.pull,!0),s.checkPut=n(o.put),s.revertClone=o.revertClone,t.group=s},Wy=function(){!Gy&&Kt&&Ot(Kt,"display","none")},zy=function(){!Gy&&Kt&&Ot(Kt,"display","")};Jd&&document.addEventListener("click",function(e){if(md)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),md=!1,!1},!0);var Pi=function(t){if(ht){t=t.touches?t.touches[0]:t;var n=Jj(t.clientX,t.clientY);if(n){var s={};for(var o in t)t.hasOwnProperty(o)&&(s[o]=t[o]);s.target=s.rootEl=n,s.preventDefault=void 0,s.stopPropagation=void 0,n[Gs]._onDragOver(s)}}},eK=function(t){ht&&ht.parentNode[Gs]._isOutsideThisEl(t.target)};function Dt(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Ma({},t),e[Gs]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Vy(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,r){i.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Dt.supportPointer!==!1&&"PointerEvent"in window&&!Yl,emptyInsertThreshold:5};Dc.initializePlugins(this,e,n);for(var s in n)!(s in t)&&(t[s]=n[s]);Hy(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:Zj,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?en(e,"pointerdown",this._onTapStart):(en(e,"mousedown",this._onTapStart),en(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(en(e,"dragover",this),en(e,"dragenter",this)),fd.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ma(this,Kj())}Dt.prototype={constructor:Dt,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Sr=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,ht):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,s=this.el,o=this.options,a=o.preventOnFilter,i=t.type,r=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(r||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=o.filter;if(lK(s),!ht&&!(/mousedown|pointerdown/.test(i)&&t.button!==0||o.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Yl&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Ha(l,o.draggable,s,!1),!(l&&l.animated)&&Uu!==l)){if(Dr=Zn(l),ql=Zn(l,o.draggable),typeof u=="function"){if(u.call(this,t,l,this)){js({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:s,fromEl:s}),aa("filter",n,{evt:t}),a&&t.cancelable&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=Ha(c,d.trim(),s,!1),d)return js({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:s,toEl:s}),aa("filter",n,{evt:t}),!0}),u)){a&&t.cancelable&&t.preventDefault();return}o.handle&&!Ha(c,o.handle,s,!1)||this._prepareDragStart(t,r,l)}}},_prepareDragStart:function(t,n,s){var o=this,a=o.el,i=o.options,r=a.ownerDocument,l;if(s&&!ht&&s.parentNode===a){var c=Bn(s);if(Dn=a,ht=s,Kn=ht.parentNode,zi=ht.nextSibling,Uu=s,ou=i.group,Dt.dragged=ht,Di={target:ht,clientX:(n||t).clientX,clientY:(n||t).clientY},_1=Di.clientX-c.left,v1=Di.clientY-c.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,ht.style["will-change"]="all",l=function(){if(aa("delayEnded",o,{evt:t}),Dt.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!p1&&o.nativeDraggable&&(ht.draggable=!0),o._triggerDragStart(t,n),js({sortable:o,name:"choose",originalEvent:t}),Vn(ht,i.chosenClass,!0)},i.ignore.split(",").forEach(function(u){By(ht,u.trim(),Hh)}),en(r,"dragover",Pi),en(r,"mousemove",Pi),en(r,"touchmove",Pi),en(r,"mouseup",o._onDrop),en(r,"touchend",o._onDrop),en(r,"touchcancel",o._onDrop),p1&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ht.draggable=!0),aa("delayStart",this,{evt:t}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(kc||Xo))){if(Dt.eventCanceled){this._onDrop();return}en(r,"mouseup",o._disableDelayedDrag),en(r,"touchend",o._disableDelayedDrag),en(r,"touchcancel",o._disableDelayedDrag),en(r,"mousemove",o._delayedDragTouchMoveHandler),en(r,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&en(r,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,i.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ht&&Hh(ht),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Zt(t,"mouseup",this._disableDelayedDrag),Zt(t,"touchend",this._disableDelayedDrag),Zt(t,"touchcancel",this._disableDelayedDrag),Zt(t,"mousemove",this._delayedDragTouchMoveHandler),Zt(t,"touchmove",this._delayedDragTouchMoveHandler),Zt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?en(document,"pointermove",this._onTouchMove):n?en(document,"touchmove",this._onTouchMove):en(document,"mousemove",this._onTouchMove):(en(ht,"dragend",this),en(Dn,"dragstart",this._onDragStart));try{document.selection?Vu(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(xr=!1,Dn&&ht){aa("dragStarted",this,{evt:n}),this.nativeDraggable&&en(document,"dragover",eK);var s=this.options;!t&&Vn(ht,s.dragClass,!1),Vn(ht,s.ghostClass,!0),Dt.active=this,t&&this._appendGhost(),js({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Fa){this._lastX=Fa.clientX,this._lastY=Fa.clientY,Wy();for(var t=document.elementFromPoint(Fa.clientX,Fa.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Fa.clientX,Fa.clientY),t!==n);)n=t;if(ht.parentNode[Gs]._isOutsideThisEl(t),n)do{if(n[Gs]){var s=void 0;if(s=n[Gs]._onDragOver({clientX:Fa.clientX,clientY:Fa.clientY,target:t,rootEl:n}),s&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);zy()}},_onTouchMove:function(t){if(Di){var n=this.options,s=n.fallbackTolerance,o=n.fallbackOffset,a=t.touches?t.touches[0]:t,i=Kt&&er(Kt,!0),r=Kt&&i&&i.a,l=Kt&&i&&i.d,c=ru&&Ds&&f1(Ds),u=(a.clientX-Di.clientX+o.x)/(r||1)+(c?c[0]-Vh[0]:0)/(r||1),d=(a.clientY-Di.clientY+o.y)/(l||1)+(c?c[1]-Vh[1]:0)/(l||1);if(!Dt.active&&!xr){if(s&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<s)return;this._onDragStart(t,!0)}if(Kt){i?(i.e+=u-(Uh||0),i.f+=d-(Gh||0)):i={a:1,b:0,c:0,d:1,e:u,f:d};var m="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Ot(Kt,"webkitTransform",m),Ot(Kt,"mozTransform",m),Ot(Kt,"msTransform",m),Ot(Kt,"transform",m),Uh=u,Gh=d,Fa=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Kt){var t=this.options.fallbackOnBody?document.body:Dn,n=Bn(ht,!0,ru,!0,t),s=this.options;if(ru){for(Ds=t;Ot(Ds,"position")==="static"&&Ot(Ds,"transform")==="none"&&Ds!==document;)Ds=Ds.parentNode;Ds!==document.body&&Ds!==document.documentElement?(Ds===document&&(Ds=go()),n.top+=Ds.scrollTop,n.left+=Ds.scrollLeft):Ds=go(),Vh=f1(Ds)}Kt=ht.cloneNode(!0),Vn(Kt,s.ghostClass,!1),Vn(Kt,s.fallbackClass,!0),Vn(Kt,s.dragClass,!0),Ot(Kt,"transition",""),Ot(Kt,"transform",""),Ot(Kt,"box-sizing","border-box"),Ot(Kt,"margin",0),Ot(Kt,"top",n.top),Ot(Kt,"left",n.left),Ot(Kt,"width",n.width),Ot(Kt,"height",n.height),Ot(Kt,"opacity","0.8"),Ot(Kt,"position",ru?"absolute":"fixed"),Ot(Kt,"zIndex","100000"),Ot(Kt,"pointerEvents","none"),Dt.ghost=Kt,t.appendChild(Kt),Ot(Kt,"transform-origin",_1/parseInt(Kt.style.width)*100+"% "+v1/parseInt(Kt.style.height)*100+"%")}},_onDragStart:function(t,n){var s=this,o=t.dataTransfer,a=s.options;if(aa("dragStart",this,{evt:t}),Dt.eventCanceled){this._onDrop();return}aa("setupClone",this),Dt.eventCanceled||(Yn=Ng(ht),Yn.draggable=!1,Yn.style["will-change"]="",this._hideClone(),Vn(Yn,this.options.chosenClass,!1),Dt.clone=Yn),s.cloneId=Vu(function(){aa("clone",s),!Dt.eventCanceled&&(s.options.removeCloneOnHide||Dn.insertBefore(Yn,ht),s._hideClone(),js({sortable:s,name:"clone"}))}),!n&&Vn(ht,a.dragClass,!0),n?(md=!0,s._loopId=setInterval(s._emulateDragOver,50)):(Zt(document,"mouseup",s._onDrop),Zt(document,"touchend",s._onDrop),Zt(document,"touchcancel",s._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(s,o,ht)),en(document,"drop",s),Ot(ht,"transform","translateZ(0)")),xr=!0,s._dragStartId=Vu(s._dragStarted.bind(s,n,t)),en(document,"selectstart",s),Dl=!0,Yl&&Ot(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,s=t.target,o,a,i,r=this.options,l=r.group,c=Dt.active,u=ou===l,d=r.sort,m=ws||c,f,g=this,T=!1;if(nf)return;function S(Y,te){aa(Y,g,To({evt:t,isOwner:u,axis:f?"vertical":"horizontal",revert:i,dragRect:o,targetRect:a,canSort:d,fromSortable:m,target:s,completed:E,onMove:function(G,H){return lu(Dn,n,ht,o,G,Bn(G),t,H)},changed:b},te))}function _(){S("dragOverAnimationCapture"),g.captureAnimationState(),g!==m&&m.captureAnimationState()}function E(Y){return S("dragOverCompleted",{insertion:Y}),Y&&(u?c._hideClone():c._showClone(g),g!==m&&(Vn(ht,ws?ws.options.ghostClass:c.options.ghostClass,!1),Vn(ht,r.ghostClass,!0)),ws!==g&&g!==Dt.active?ws=g:g===Dt.active&&ws&&(ws=null),m===g&&(g._ignoreWhileAnimating=s),g.animateAll(function(){S("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(s===ht&&!ht.animated||s===n&&!s.animated)&&(Sr=null),!r.dragoverBubble&&!t.rootEl&&s!==document&&(ht.parentNode[Gs]._isOutsideThisEl(t.target),!Y&&Pi(t)),!r.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),T=!0}function b(){ha=Zn(ht),oi=Zn(ht,r.draggable),js({sortable:g,name:"change",toEl:n,newIndex:ha,newDraggableIndex:oi,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),s=Ha(s,r.draggable,n,!0),S("dragOver"),Dt.eventCanceled)return T;if(ht.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||g._ignoreWhileAnimating===s)return E(!1);if(md=!1,c&&!r.disabled&&(u?d||(i=Kn!==Dn):ws===this||(this.lastPutMode=ou.checkPull(this,c,ht,t))&&l.checkPut(this,c,ht,t))){if(f=this._getDirection(t,s)==="vertical",o=Bn(ht),S("dragOverValid"),Dt.eventCanceled)return T;if(i)return Kn=Dn,_(),this._hideClone(),S("revert"),Dt.eventCanceled||(zi?Dn.insertBefore(ht,zi):Dn.appendChild(ht)),E(!0);var I=Og(n,r.draggable);if(!I||aK(t,f,this)&&!I.animated){if(I===ht)return E(!1);if(I&&n===t.target&&(s=I),s&&(a=Bn(s)),lu(Dn,n,ht,o,s,a,t,!!s)!==!1)return _(),n.appendChild(ht),Kn=n,b(),E(!0)}else if(I&&sK(t,f,this)){var R=Qr(n,0,r,!0);if(R===ht)return E(!1);if(s=R,a=Bn(s),lu(Dn,n,ht,o,s,a,t,!1)!==!1)return _(),n.insertBefore(ht,R),Kn=n,b(),E(!0)}else if(s.parentNode===n){a=Bn(s);var O=0,x,L=ht.parentNode!==n,F=!Qj(ht.animated&&ht.toRect||o,s.animated&&s.toRect||a,f),D=f?"top":"left",V=m1(s,"top","top")||m1(ht,"top","top"),B=V?V.scrollTop:void 0;Sr!==s&&(x=a[D],Ql=!1,iu=!F&&r.invertSwap||L),O=oK(t,s,a,f,F?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,iu,Sr===s);var P;if(O!==0){var k=Zn(ht);do k-=O,P=Kn.children[k];while(P&&(Ot(P,"display")==="none"||P===Kt))}if(O===0||P===s)return E(!1);Sr=s,Zl=O;var U=s.nextElementSibling,j=!1;j=O===1;var z=lu(Dn,n,ht,o,s,a,t,j);if(z!==!1)return(z===1||z===-1)&&(j=z===1),nf=!0,setTimeout(nK,30),_(),j&&!U?n.appendChild(ht):s.parentNode.insertBefore(ht,j?U:s),V&&Uy(V,0,B-V.scrollTop),Kn=ht.parentNode,x!==void 0&&!iu&&(Gu=Math.abs(x-Bn(s)[D])),b(),E(!0)}if(n.contains(ht))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Zt(document,"mousemove",this._onTouchMove),Zt(document,"touchmove",this._onTouchMove),Zt(document,"pointermove",this._onTouchMove),Zt(document,"dragover",Pi),Zt(document,"mousemove",Pi),Zt(document,"touchmove",Pi)},_offUpEvents:function(){var t=this.el.ownerDocument;Zt(t,"mouseup",this._onDrop),Zt(t,"touchend",this._onDrop),Zt(t,"pointerup",this._onDrop),Zt(t,"touchcancel",this._onDrop),Zt(document,"selectstart",this)},_onDrop:function(t){var n=this.el,s=this.options;if(ha=Zn(ht),oi=Zn(ht,s.draggable),aa("drop",this,{evt:t}),Kn=ht&&ht.parentNode,ha=Zn(ht),oi=Zn(ht,s.draggable),Dt.eventCanceled){this._nulling();return}xr=!1,iu=!1,Ql=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),sf(this.cloneId),sf(this._dragStartId),this.nativeDraggable&&(Zt(document,"drop",this),Zt(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Yl&&Ot(document.body,"user-select",""),Ot(ht,"transform",""),t&&(Dl&&(t.cancelable&&t.preventDefault(),!s.dropBubble&&t.stopPropagation()),Kt&&Kt.parentNode&&Kt.parentNode.removeChild(Kt),(Dn===Kn||ws&&ws.lastPutMode!=="clone")&&Yn&&Yn.parentNode&&Yn.parentNode.removeChild(Yn),ht&&(this.nativeDraggable&&Zt(ht,"dragend",this),Hh(ht),ht.style["will-change"]="",Dl&&!xr&&Vn(ht,ws?ws.options.ghostClass:this.options.ghostClass,!1),Vn(ht,this.options.chosenClass,!1),js({sortable:this,name:"unchoose",toEl:Kn,newIndex:null,newDraggableIndex:null,originalEvent:t}),Dn!==Kn?(ha>=0&&(js({rootEl:Kn,name:"add",toEl:Kn,fromEl:Dn,originalEvent:t}),js({sortable:this,name:"remove",toEl:Kn,originalEvent:t}),js({rootEl:Kn,name:"sort",toEl:Kn,fromEl:Dn,originalEvent:t}),js({sortable:this,name:"sort",toEl:Kn,originalEvent:t})),ws&&ws.save()):ha!==Dr&&ha>=0&&(js({sortable:this,name:"update",toEl:Kn,originalEvent:t}),js({sortable:this,name:"sort",toEl:Kn,originalEvent:t})),Dt.active&&((ha==null||ha===-1)&&(ha=Dr,oi=ql),js({sortable:this,name:"end",toEl:Kn,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){aa("nulling",this),Dn=ht=Kn=Kt=zi=Yn=Uu=ri=Di=Fa=Dl=ha=oi=Dr=ql=Sr=Zl=ws=ou=Dt.dragged=Dt.ghost=Dt.clone=Dt.active=null,gd.forEach(function(t){t.checked=!0}),gd.length=Uh=Gh=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ht&&(this._onDragOver(t),tK(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,s=this.el.children,o=0,a=s.length,i=this.options;o<a;o++)n=s[o],Ha(n,i.draggable,this.el,!1)&&t.push(n.getAttribute(i.dataIdAttr)||rK(n));return t},sort:function(t,n){var s={},o=this.el;this.toArray().forEach(function(a,i){var r=o.children[i];Ha(r,this.options.draggable,o,!1)&&(s[a]=r)},this),n&&this.captureAnimationState(),t.forEach(function(a){s[a]&&(o.removeChild(s[a]),o.appendChild(s[a]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Ha(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var s=this.options;if(n===void 0)return s[t];var o=Dc.modifyOption(this,t,n);typeof o<"u"?s[t]=o:s[t]=n,t==="group"&&Hy(s)},destroy:function(){aa("destroy",this);var t=this.el;t[Gs]=null,Zt(t,"mousedown",this._onTapStart),Zt(t,"touchstart",this._onTapStart),Zt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Zt(t,"dragover",this),Zt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),fd.splice(fd.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ri){if(aa("hideClone",this),Dt.eventCanceled)return;Ot(Yn,"display","none"),this.options.removeCloneOnHide&&Yn.parentNode&&Yn.parentNode.removeChild(Yn),ri=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(ri){if(aa("showClone",this),Dt.eventCanceled)return;ht.parentNode==Dn&&!this.options.group.revertClone?Dn.insertBefore(Yn,ht):zi?Dn.insertBefore(Yn,zi):Dn.appendChild(Yn),this.options.group.revertClone&&this.animate(ht,Yn),Ot(Yn,"display",""),ri=!1}}};function tK(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function lu(e,t,n,s,o,a,i,r){var l,c=e[Gs],u=c.options.onMove,d;return window.CustomEvent&&!Xo&&!kc?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=s,l.related=o||t,l.relatedRect=a||Bn(t),l.willInsertAfter=r,l.originalEvent=i,e.dispatchEvent(l),u&&(d=u.call(c,l,i)),d}function Hh(e){e.draggable=!1}function nK(){nf=!1}function sK(e,t,n){var s=Bn(Qr(n.el,0,n.options,!0)),o=10;return t?e.clientX<s.left-o||e.clientY<s.top&&e.clientX<s.right:e.clientY<s.top-o||e.clientY<s.bottom&&e.clientX<s.left}function aK(e,t,n){var s=Bn(Og(n.el,n.options.draggable)),o=10;return t?e.clientX>s.right+o||e.clientX<=s.right&&e.clientY>s.bottom&&e.clientX>=s.left:e.clientX>s.right&&e.clientY>s.top||e.clientX<=s.right&&e.clientY>s.bottom+o}function oK(e,t,n,s,o,a,i,r){var l=s?e.clientY:e.clientX,c=s?n.height:n.width,u=s?n.top:n.left,d=s?n.bottom:n.right,m=!1;if(!i){if(r&&Gu<c*o){if(!Ql&&(Zl===1?l>u+c*a/2:l<d-c*a/2)&&(Ql=!0),Ql)m=!0;else if(Zl===1?l<u+Gu:l>d-Gu)return-Zl}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return iK(t)}return m=m||i,m&&(l<u+c*a/2||l>d-c*a/2)?l>u+c/2?1:-1:0}function iK(e){return Zn(ht)<Zn(e)?1:-1}function rK(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,s=0;n--;)s+=t.charCodeAt(n);return s.toString(36)}function lK(e){gd.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var s=t[n];s.checked&&gd.push(s)}}function Vu(e){return setTimeout(e,0)}function sf(e){return clearTimeout(e)}Jd&&en(document,"touchmove",function(e){(Dt.active||xr)&&e.cancelable&&e.preventDefault()});Dt.utils={on:en,off:Zt,css:Ot,find:By,is:function(t,n){return!!Ha(t,n,t,!1)},extend:zj,throttle:Fy,closest:Ha,toggleClass:Vn,clone:Ng,index:Zn,nextTick:Vu,cancelNextTick:sf,detectDirection:Vy,getChild:Qr};Dt.get=function(e){return e[Gs]};Dt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(Dt.utils=To(To({},Dt.utils),s.utils)),Dc.mount(s)})};Dt.create=function(e,t){return new Dt(e,t)};Dt.version=Gj;var hs=[],Pl,af,of=!1,Wh,zh,_d,Bl;function cK(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var s=n.originalEvent;this.sortable.nativeDraggable?en(document,"dragover",this._handleAutoScroll):this.options.supportPointer?en(document,"pointermove",this._handleFallbackAutoScroll):s.touches?en(document,"touchmove",this._handleFallbackAutoScroll):en(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var s=n.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?Zt(document,"dragover",this._handleAutoScroll):(Zt(document,"pointermove",this._handleFallbackAutoScroll),Zt(document,"touchmove",this._handleFallbackAutoScroll),Zt(document,"mousemove",this._handleFallbackAutoScroll)),E1(),Hu(),jj()},nulling:function(){_d=af=Pl=of=Bl=Wh=zh=null,hs.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,s){var o=this,a=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,r=document.elementFromPoint(a,i);if(_d=n,s||this.options.forceAutoScrollFallback||kc||Xo||Yl){jh(n,this.options,r,s);var l=di(r,!0);of&&(!Bl||a!==Wh||i!==zh)&&(Bl&&E1(),Bl=setInterval(function(){var c=di(document.elementFromPoint(a,i),!0);c!==l&&(l=c,Hu()),jh(n,o.options,c,s)},10),Wh=a,zh=i)}else{if(!this.options.bubbleScroll||di(r,!0)===go()){Hu();return}jh(n,this.options,di(r,!1),!1)}}},Ma(e,{pluginName:"scroll",initializeByDefault:!0})}function Hu(){hs.forEach(function(e){clearInterval(e.pid)}),hs=[]}function E1(){clearInterval(Bl)}var jh=Fy(function(e,t,n,s){if(t.scroll){var o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,i=t.scrollSensitivity,r=t.scrollSpeed,l=go(),c=!1,u;af!==n&&(af=n,Hu(),Pl=t.scroll,u=t.scrollFn,Pl===!0&&(Pl=di(n,!0)));var d=0,m=Pl;do{var f=m,g=Bn(f),T=g.top,S=g.bottom,_=g.left,E=g.right,b=g.width,I=g.height,R=void 0,O=void 0,x=f.scrollWidth,L=f.scrollHeight,F=Ot(f),D=f.scrollLeft,V=f.scrollTop;f===l?(R=b<x&&(F.overflowX==="auto"||F.overflowX==="scroll"||F.overflowX==="visible"),O=I<L&&(F.overflowY==="auto"||F.overflowY==="scroll"||F.overflowY==="visible")):(R=b<x&&(F.overflowX==="auto"||F.overflowX==="scroll"),O=I<L&&(F.overflowY==="auto"||F.overflowY==="scroll"));var B=R&&(Math.abs(E-o)<=i&&D+b<x)-(Math.abs(_-o)<=i&&!!D),P=O&&(Math.abs(S-a)<=i&&V+I<L)-(Math.abs(T-a)<=i&&!!V);if(!hs[d])for(var k=0;k<=d;k++)hs[k]||(hs[k]={});(hs[d].vx!=B||hs[d].vy!=P||hs[d].el!==f)&&(hs[d].el=f,hs[d].vx=B,hs[d].vy=P,clearInterval(hs[d].pid),(B!=0||P!=0)&&(c=!0,hs[d].pid=setInterval((function(){s&&this.layer===0&&Dt.active._onTouchMove(_d);var U=hs[this.layer].vy?hs[this.layer].vy*r:0,j=hs[this.layer].vx?hs[this.layer].vx*r:0;typeof u=="function"&&u.call(Dt.dragged.parentNode[Gs],j,U,e,_d,hs[this.layer].el)!=="continue"||Uy(hs[this.layer].el,j,U)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&m!==l&&(m=di(m,!1)));of=c}},30),jy=function(t){var n=t.originalEvent,s=t.putSortable,o=t.dragEl,a=t.activeSortable,i=t.dispatchSortableEvent,r=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var c=s||a;r();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(i("spill"),this.onSpill({dragEl:o,putSortable:s}))}};function wg(){}wg.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,s=t.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var o=Qr(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),s&&s.animateAll()},drop:jy};Ma(wg,{pluginName:"revertOnSpill"});function Rg(){}Rg.prototype={onSpill:function(t){var n=t.dragEl,s=t.putSortable,o=s||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:jy};Ma(Rg,{pluginName:"removeOnSpill"});var Aa;function uK(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var s=n.dragEl;Aa=s},dragOverValid:function(n){var s=n.completed,o=n.target,a=n.onMove,i=n.activeSortable,r=n.changed,l=n.cancel;if(i.options.swap){var c=this.sortable.el,u=this.options;if(o&&o!==c){var d=Aa;a(o)!==!1?(Vn(o,u.swapClass,!0),Aa=o):Aa=null,d&&d!==Aa&&Vn(d,u.swapClass,!1)}r(),s(!0),l()}},drop:function(n){var s=n.activeSortable,o=n.putSortable,a=n.dragEl,i=o||this.sortable,r=this.options;Aa&&Vn(Aa,r.swapClass,!1),Aa&&(r.swap||o&&o.options.swap)&&a!==Aa&&(i.captureAnimationState(),i!==s&&s.captureAnimationState(),dK(a,Aa),i.animateAll(),i!==s&&s.animateAll())},nulling:function(){Aa=null}},Ma(e,{pluginName:"swap",eventProperties:function(){return{swapItem:Aa}}})}function dK(e,t){var n=e.parentNode,s=t.parentNode,o,a;!n||!s||n.isEqualNode(t)||s.isEqualNode(e)||(o=Zn(e),a=Zn(t),n.isEqualNode(s)&&o<a&&a++,n.insertBefore(t,n.children[o]),s.insertBefore(e,s.children[a]))}var Wt=[],pa=[],yl,Ua,Sl=!1,oa=!1,Ar=!1,Nn,Al,cu;function pK(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?en(document,"pointerup",this._deselectMultiDrag):(en(document,"mouseup",this._deselectMultiDrag),en(document,"touchend",this._deselectMultiDrag)),en(document,"keydown",this._checkKeyDown),en(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(o,a){var i="";Wt.length&&Ua===t?Wt.forEach(function(r,l){i+=(l?", ":"")+r.textContent}):i=a.textContent,o.setData("Text",i)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var s=n.dragEl;Nn=s},delayEnded:function(){this.isMultiDrag=~Wt.indexOf(Nn)},setupClone:function(n){var s=n.sortable,o=n.cancel;if(this.isMultiDrag){for(var a=0;a<Wt.length;a++)pa.push(Ng(Wt[a])),pa[a].sortableIndex=Wt[a].sortableIndex,pa[a].draggable=!1,pa[a].style["will-change"]="",Vn(pa[a],this.options.selectedClass,!1),Wt[a]===Nn&&Vn(pa[a],this.options.chosenClass,!1);s._hideClone(),o()}},clone:function(n){var s=n.sortable,o=n.rootEl,a=n.dispatchSortableEvent,i=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Wt.length&&Ua===s&&(T1(!0,o),a("clone"),i()))},showClone:function(n){var s=n.cloneNowShown,o=n.rootEl,a=n.cancel;this.isMultiDrag&&(T1(!1,o),pa.forEach(function(i){Ot(i,"display","")}),s(),cu=!1,a())},hideClone:function(n){var s=this;n.sortable;var o=n.cloneNowHidden,a=n.cancel;this.isMultiDrag&&(pa.forEach(function(i){Ot(i,"display","none"),s.options.removeCloneOnHide&&i.parentNode&&i.parentNode.removeChild(i)}),o(),cu=!0,a())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Ua&&Ua.multiDrag._deselectMultiDrag(),Wt.forEach(function(s){s.sortableIndex=Zn(s)}),Wt=Wt.sort(function(s,o){return s.sortableIndex-o.sortableIndex}),Ar=!0},dragStarted:function(n){var s=this,o=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(o.captureAnimationState(),this.options.animation)){Wt.forEach(function(i){i!==Nn&&Ot(i,"position","absolute")});var a=Bn(Nn,!1,!0,!0);Wt.forEach(function(i){i!==Nn&&g1(i,a)}),oa=!0,Sl=!0}o.animateAll(function(){oa=!1,Sl=!1,s.options.animation&&Wt.forEach(function(i){Bh(i)}),s.options.sort&&uu()})}},dragOver:function(n){var s=n.target,o=n.completed,a=n.cancel;oa&&~Wt.indexOf(s)&&(o(!1),a())},revert:function(n){var s=n.fromSortable,o=n.rootEl,a=n.sortable,i=n.dragRect;Wt.length>1&&(Wt.forEach(function(r){a.addAnimationState({target:r,rect:oa?Bn(r):i}),Bh(r),r.fromRect=i,s.removeAnimationState(r)}),oa=!1,hK(!this.options.removeCloneOnHide,o))},dragOverCompleted:function(n){var s=n.sortable,o=n.isOwner,a=n.insertion,i=n.activeSortable,r=n.parentEl,l=n.putSortable,c=this.options;if(a){if(o&&i._hideClone(),Sl=!1,c.animation&&Wt.length>1&&(oa||!o&&!i.options.sort&&!l)){var u=Bn(Nn,!1,!0,!0);Wt.forEach(function(m){m!==Nn&&(g1(m,u),r.appendChild(m))}),oa=!0}if(!o)if(oa||uu(),Wt.length>1){var d=cu;i._showClone(s),i.options.animation&&!cu&&d&&pa.forEach(function(m){i.addAnimationState({target:m,rect:Al}),m.fromRect=Al,m.thisAnimationDuration=null})}else i._showClone(s)}},dragOverAnimationCapture:function(n){var s=n.dragRect,o=n.isOwner,a=n.activeSortable;if(Wt.forEach(function(r){r.thisAnimationDuration=null}),a.options.animation&&!o&&a.multiDrag.isMultiDrag){Al=Ma({},s);var i=er(Nn,!0);Al.top-=i.f,Al.left-=i.e}},dragOverAnimationComplete:function(){oa&&(oa=!1,uu())},drop:function(n){var s=n.originalEvent,o=n.rootEl,a=n.parentEl,i=n.sortable,r=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,u=c||this.sortable;if(s){var d=this.options,m=a.children;if(!Ar)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Vn(Nn,d.selectedClass,!~Wt.indexOf(Nn)),~Wt.indexOf(Nn))Wt.splice(Wt.indexOf(Nn),1),yl=null,kl({sortable:i,rootEl:o,name:"deselect",targetEl:Nn});else{if(Wt.push(Nn),kl({sortable:i,rootEl:o,name:"select",targetEl:Nn}),s.shiftKey&&yl&&i.el.contains(yl)){var f=Zn(yl),g=Zn(Nn);if(~f&&~g&&f!==g){var T,S;for(g>f?(S=f,T=g):(S=g,T=f+1);S<T;S++)~Wt.indexOf(m[S])||(Vn(m[S],d.selectedClass,!0),Wt.push(m[S]),kl({sortable:i,rootEl:o,name:"select",targetEl:m[S]}))}}else yl=Nn;Ua=u}if(Ar&&this.isMultiDrag){if(oa=!1,(a[Gs].options.sort||a!==o)&&Wt.length>1){var _=Bn(Nn),E=Zn(Nn,":not(."+this.options.selectedClass+")");if(!Sl&&d.animation&&(Nn.thisAnimationDuration=null),u.captureAnimationState(),!Sl&&(d.animation&&(Nn.fromRect=_,Wt.forEach(function(I){if(I.thisAnimationDuration=null,I!==Nn){var R=oa?Bn(I):_;I.fromRect=R,u.addAnimationState({target:I,rect:R})}})),uu(),Wt.forEach(function(I){m[E]?a.insertBefore(I,m[E]):a.appendChild(I),E++}),l===Zn(Nn))){var b=!1;Wt.forEach(function(I){if(I.sortableIndex!==Zn(I)){b=!0;return}}),b&&r("update")}Wt.forEach(function(I){Bh(I)}),u.animateAll()}Ua=u}(o===a||c&&c.lastPutMode!=="clone")&&pa.forEach(function(I){I.parentNode&&I.parentNode.removeChild(I)})}},nullingGlobal:function(){this.isMultiDrag=Ar=!1,pa.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Zt(document,"pointerup",this._deselectMultiDrag),Zt(document,"mouseup",this._deselectMultiDrag),Zt(document,"touchend",this._deselectMultiDrag),Zt(document,"keydown",this._checkKeyDown),Zt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Ar<"u"&&Ar)&&Ua===this.sortable&&!(n&&Ha(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Wt.length;){var s=Wt[0];Vn(s,this.options.selectedClass,!1),Wt.shift(),kl({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:s})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Ma(e,{pluginName:"multiDrag",utils:{select:function(n){var s=n.parentNode[Gs];!s||!s.options.multiDrag||~Wt.indexOf(n)||(Ua&&Ua!==s&&(Ua.multiDrag._deselectMultiDrag(),Ua=s),Vn(n,s.options.selectedClass,!0),Wt.push(n))},deselect:function(n){var s=n.parentNode[Gs],o=Wt.indexOf(n);!s||!s.options.multiDrag||!~o||(Vn(n,s.options.selectedClass,!1),Wt.splice(o,1))}},eventProperties:function(){var n=this,s=[],o=[];return Wt.forEach(function(a){s.push({multiDragElement:a,index:a.sortableIndex});var i;oa&&a!==Nn?i=-1:oa?i=Zn(a,":not(."+n.options.selectedClass+")"):i=Zn(a),o.push({multiDragElement:a,index:i})}),{items:Dj(Wt),clones:[].concat(pa),oldIndicies:s,newIndicies:o}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function hK(e,t){Wt.forEach(function(n,s){var o=t.children[n.sortableIndex+(e?Number(s):0)];o?t.insertBefore(n,o):t.appendChild(n)})}function T1(e,t){pa.forEach(function(n,s){var o=t.children[n.sortableIndex+(e?Number(s):0)];o?t.insertBefore(n,o):t.appendChild(n)})}function uu(){Wt.forEach(function(e){e!==Nn&&e.parentNode&&e.parentNode.removeChild(e)})}Dt.mount(new cK);Dt.mount(Rg,wg);const mK=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:pK,Sortable:Dt,Swap:uK,default:Dt},Symbol.toStringTag,{value:"Module"})),fK=iC(mK);(function(e,t){(function(s,o){e.exports=o(d0,fK)})(typeof self<"u"?self:rC,function(n,s){return function(o){var a={};function i(r){if(a[r])return a[r].exports;var l=a[r]={i:r,l:!1,exports:{}};return o[r].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=o,i.c=a,i.d=function(r,l,c){i.o(r,l)||Object.defineProperty(r,l,{enumerable:!0,get:c})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,l){if(l&1&&(r=i(r)),l&8||l&4&&typeof r=="object"&&r&&r.__esModule)return r;var c=Object.create(null);if(i.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:r}),l&2&&typeof r!="string")for(var u in r)i.d(c,u,(function(d){return r[d]}).bind(null,u));return c},i.n=function(r){var l=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(l,"a",l),l},i.o=function(r,l){return Object.prototype.hasOwnProperty.call(r,l)},i.p="",i(i.s="fb15")}({"00ee":function(o,a,i){var r=i("b622"),l=r("toStringTag"),c={};c[l]="z",o.exports=String(c)==="[object z]"},"0366":function(o,a,i){var r=i("1c0b");o.exports=function(l,c,u){if(r(l),c===void 0)return l;switch(u){case 0:return function(){return l.call(c)};case 1:return function(d){return l.call(c,d)};case 2:return function(d,m){return l.call(c,d,m)};case 3:return function(d,m,f){return l.call(c,d,m,f)}}return function(){return l.apply(c,arguments)}}},"057f":function(o,a,i){var r=i("fc6a"),l=i("241c").f,c={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(m){try{return l(m)}catch{return u.slice()}};o.exports.f=function(f){return u&&c.call(f)=="[object Window]"?d(f):l(r(f))}},"06cf":function(o,a,i){var r=i("83ab"),l=i("d1e7"),c=i("5c6c"),u=i("fc6a"),d=i("c04e"),m=i("5135"),f=i("0cfb"),g=Object.getOwnPropertyDescriptor;a.f=r?g:function(S,_){if(S=u(S),_=d(_,!0),f)try{return g(S,_)}catch{}if(m(S,_))return c(!l.f.call(S,_),S[_])}},"0cfb":function(o,a,i){var r=i("83ab"),l=i("d039"),c=i("cc12");o.exports=!r&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(o,a,i){var r=i("23e7"),l=i("d58f").left,c=i("a640"),u=i("ae40"),d=c("reduce"),m=u("reduce",{1:0});r({target:"Array",proto:!0,forced:!d||!m},{reduce:function(g){return l(this,g,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(o,a,i){var r=i("c6b6"),l=i("9263");o.exports=function(c,u){var d=c.exec;if(typeof d=="function"){var m=d.call(c,u);if(typeof m!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return m}if(r(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,u)}},"159b":function(o,a,i){var r=i("da84"),l=i("fdbc"),c=i("17c2"),u=i("9112");for(var d in l){var m=r[d],f=m&&m.prototype;if(f&&f.forEach!==c)try{u(f,"forEach",c)}catch{f.forEach=c}}},"17c2":function(o,a,i){var r=i("b727").forEach,l=i("a640"),c=i("ae40"),u=l("forEach"),d=c("forEach");o.exports=!u||!d?function(f){return r(this,f,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(o,a,i){var r=i("d066");o.exports=r("document","documentElement")},"1c0b":function(o,a){o.exports=function(i){if(typeof i!="function")throw TypeError(String(i)+" is not a function");return i}},"1c7e":function(o,a,i){var r=i("b622"),l=r("iterator"),c=!1;try{var u=0,d={next:function(){return{done:!!u++}},return:function(){c=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}o.exports=function(m,f){if(!f&&!c)return!1;var g=!1;try{var T={};T[l]=function(){return{next:function(){return{done:g=!0}}}},m(T)}catch{}return g}},"1d80":function(o,a){o.exports=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i}},"1dde":function(o,a,i){var r=i("d039"),l=i("b622"),c=i("2d00"),u=l("species");o.exports=function(d){return c>=51||!r(function(){var m=[],f=m.constructor={};return f[u]=function(){return{foo:1}},m[d](Boolean).foo!==1})}},"23cb":function(o,a,i){var r=i("a691"),l=Math.max,c=Math.min;o.exports=function(u,d){var m=r(u);return m<0?l(m+d,0):c(m,d)}},"23e7":function(o,a,i){var r=i("da84"),l=i("06cf").f,c=i("9112"),u=i("6eeb"),d=i("ce4e"),m=i("e893"),f=i("94ca");o.exports=function(g,T){var S=g.target,_=g.global,E=g.stat,b,I,R,O,x,L;if(_?I=r:E?I=r[S]||d(S,{}):I=(r[S]||{}).prototype,I)for(R in T){if(x=T[R],g.noTargetGet?(L=l(I,R),O=L&&L.value):O=I[R],b=f(_?R:S+(E?".":"#")+R,g.forced),!b&&O!==void 0){if(typeof x==typeof O)continue;m(x,O)}(g.sham||O&&O.sham)&&c(x,"sham",!0),u(I,R,x,g)}}},"241c":function(o,a,i){var r=i("ca84"),l=i("7839"),c=l.concat("length","prototype");a.f=Object.getOwnPropertyNames||function(d){return r(d,c)}},"25f0":function(o,a,i){var r=i("6eeb"),l=i("825a"),c=i("d039"),u=i("ad6d"),d="toString",m=RegExp.prototype,f=m[d],g=c(function(){return f.call({source:"a",flags:"b"})!="/a/b"}),T=f.name!=d;(g||T)&&r(RegExp.prototype,d,function(){var _=l(this),E=String(_.source),b=_.flags,I=String(b===void 0&&_ instanceof RegExp&&!("flags"in m)?u.call(_):b);return"/"+E+"/"+I},{unsafe:!0})},"2ca0":function(o,a,i){var r=i("23e7"),l=i("06cf").f,c=i("50c4"),u=i("5a34"),d=i("1d80"),m=i("ab13"),f=i("c430"),g="".startsWith,T=Math.min,S=m("startsWith"),_=!f&&!S&&!!function(){var E=l(String.prototype,"startsWith");return E&&!E.writable}();r({target:"String",proto:!0,forced:!_&&!S},{startsWith:function(b){var I=String(d(this));u(b);var R=c(T(arguments.length>1?arguments[1]:void 0,I.length)),O=String(b);return g?g.call(I,O,R):I.slice(R,R+O.length)===O}})},"2d00":function(o,a,i){var r=i("da84"),l=i("342f"),c=r.process,u=c&&c.versions,d=u&&u.v8,m,f;d?(m=d.split("."),f=m[0]+m[1]):l&&(m=l.match(/Edge\/(\d+)/),(!m||m[1]>=74)&&(m=l.match(/Chrome\/(\d+)/),m&&(f=m[1]))),o.exports=f&&+f},"342f":function(o,a,i){var r=i("d066");o.exports=r("navigator","userAgent")||""},"35a1":function(o,a,i){var r=i("f5df"),l=i("3f8c"),c=i("b622"),u=c("iterator");o.exports=function(d){if(d!=null)return d[u]||d["@@iterator"]||l[r(d)]}},"37e8":function(o,a,i){var r=i("83ab"),l=i("9bf2"),c=i("825a"),u=i("df75");o.exports=r?Object.defineProperties:function(m,f){c(m);for(var g=u(f),T=g.length,S=0,_;T>S;)l.f(m,_=g[S++],f[_]);return m}},"3bbe":function(o,a,i){var r=i("861d");o.exports=function(l){if(!r(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(o,a,i){var r=i("6547").charAt,l=i("69f3"),c=i("7dd0"),u="String Iterator",d=l.set,m=l.getterFor(u);c(String,"String",function(f){d(this,{type:u,string:String(f),index:0})},function(){var g=m(this),T=g.string,S=g.index,_;return S>=T.length?{value:void 0,done:!0}:(_=r(T,S),g.index+=_.length,{value:_,done:!1})})},"3f8c":function(o,a){o.exports={}},4160:function(o,a,i){var r=i("23e7"),l=i("17c2");r({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(o,a,i){var r=i("da84");o.exports=r},"44ad":function(o,a,i){var r=i("d039"),l=i("c6b6"),c="".split;o.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return l(u)=="String"?c.call(u,""):Object(u)}:Object},"44d2":function(o,a,i){var r=i("b622"),l=i("7c73"),c=i("9bf2"),u=r("unscopables"),d=Array.prototype;d[u]==null&&c.f(d,u,{configurable:!0,value:l(null)}),o.exports=function(m){d[u][m]=!0}},"44e7":function(o,a,i){var r=i("861d"),l=i("c6b6"),c=i("b622"),u=c("match");o.exports=function(d){var m;return r(d)&&((m=d[u])!==void 0?!!m:l(d)=="RegExp")}},4930:function(o,a,i){var r=i("d039");o.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},"4d64":function(o,a,i){var r=i("fc6a"),l=i("50c4"),c=i("23cb"),u=function(d){return function(m,f,g){var T=r(m),S=l(T.length),_=c(g,S),E;if(d&&f!=f){for(;S>_;)if(E=T[_++],E!=E)return!0}else for(;S>_;_++)if((d||_ in T)&&T[_]===f)return d||_||0;return!d&&-1}};o.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(o,a,i){var r=i("23e7"),l=i("b727").filter,c=i("1dde"),u=i("ae40"),d=c("filter"),m=u("filter");r({target:"Array",proto:!0,forced:!d||!m},{filter:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(o,a,i){var r=i("0366"),l=i("7b0b"),c=i("9bdd"),u=i("e95a"),d=i("50c4"),m=i("8418"),f=i("35a1");o.exports=function(T){var S=l(T),_=typeof this=="function"?this:Array,E=arguments.length,b=E>1?arguments[1]:void 0,I=b!==void 0,R=f(S),O=0,x,L,F,D,V,B;if(I&&(b=r(b,E>2?arguments[2]:void 0,2)),R!=null&&!(_==Array&&u(R)))for(D=R.call(S),V=D.next,L=new _;!(F=V.call(D)).done;O++)B=I?c(D,b,[F.value,O],!0):F.value,m(L,O,B);else for(x=d(S.length),L=new _(x);x>O;O++)B=I?b(S[O],O):S[O],m(L,O,B);return L.length=O,L}},"4fad":function(o,a,i){var r=i("23e7"),l=i("6f53").entries;r({target:"Object",stat:!0},{entries:function(u){return l(u)}})},"50c4":function(o,a,i){var r=i("a691"),l=Math.min;o.exports=function(c){return c>0?l(r(c),9007199254740991):0}},5135:function(o,a){var i={}.hasOwnProperty;o.exports=function(r,l){return i.call(r,l)}},5319:function(o,a,i){var r=i("d784"),l=i("825a"),c=i("7b0b"),u=i("50c4"),d=i("a691"),m=i("1d80"),f=i("8aa5"),g=i("14c3"),T=Math.max,S=Math.min,_=Math.floor,E=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g,I=function(R){return R===void 0?R:String(R)};r("replace",2,function(R,O,x,L){var F=L.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,D=L.REPLACE_KEEPS_$0,V=F?"$":"$0";return[function(k,U){var j=m(this),z=k==null?void 0:k[R];return z!==void 0?z.call(k,j,U):O.call(String(j),k,U)},function(P,k){if(!F&&D||typeof k=="string"&&k.indexOf(V)===-1){var U=x(O,P,this,k);if(U.done)return U.value}var j=l(P),z=String(this),Y=typeof k=="function";Y||(k=String(k));var te=j.global;if(te){var Z=j.unicode;j.lastIndex=0}for(var G=[];;){var H=g(j,z);if(H===null||(G.push(H),!te))break;var W=String(H[0]);W===""&&(j.lastIndex=f(z,u(j.lastIndex),Z))}for(var J="",ee=0,ge=0;ge<G.length;ge++){H=G[ge];for(var Ee=String(H[0]),le=T(S(d(H.index),z.length),0),_e=[],$e=1;$e<H.length;$e++)_e.push(I(H[$e]));var He=H.groups;if(Y){var Je=[Ee].concat(_e,le,z);He!==void 0&&Je.push(He);var Xe=String(k.apply(void 0,Je))}else Xe=B(Ee,z,le,_e,He,k);le>=ee&&(J+=z.slice(ee,le)+Xe,ee=le+Ee.length)}return J+z.slice(ee)}];function B(P,k,U,j,z,Y){var te=U+P.length,Z=j.length,G=b;return z!==void 0&&(z=c(z),G=E),O.call(Y,G,function(H,W){var J;switch(W.charAt(0)){case"$":return"$";case"&":return P;case"`":return k.slice(0,U);case"'":return k.slice(te);case"<":J=z[W.slice(1,-1)];break;default:var ee=+W;if(ee===0)return H;if(ee>Z){var ge=_(ee/10);return ge===0?H:ge<=Z?j[ge-1]===void 0?W.charAt(1):j[ge-1]+W.charAt(1):H}J=j[ee-1]}return J===void 0?"":J})}})},5692:function(o,a,i){var r=i("c430"),l=i("c6cd");(o.exports=function(c,u){return l[c]||(l[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(o,a,i){var r=i("d066"),l=i("241c"),c=i("7418"),u=i("825a");o.exports=r("Reflect","ownKeys")||function(m){var f=l.f(u(m)),g=c.f;return g?f.concat(g(m)):f}},"5a34":function(o,a,i){var r=i("44e7");o.exports=function(l){if(r(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(o,a){o.exports=function(i,r){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:r}}},"5db7":function(o,a,i){var r=i("23e7"),l=i("a2bf"),c=i("7b0b"),u=i("50c4"),d=i("1c0b"),m=i("65f0");r({target:"Array",proto:!0},{flatMap:function(g){var T=c(this),S=u(T.length),_;return d(g),_=m(T,0),_.length=l(_,T,T,S,0,1,g,arguments.length>1?arguments[1]:void 0),_}})},6547:function(o,a,i){var r=i("a691"),l=i("1d80"),c=function(u){return function(d,m){var f=String(l(d)),g=r(m),T=f.length,S,_;return g<0||g>=T?u?"":void 0:(S=f.charCodeAt(g),S<55296||S>56319||g+1===T||(_=f.charCodeAt(g+1))<56320||_>57343?u?f.charAt(g):S:u?f.slice(g,g+2):(S-55296<<10)+(_-56320)+65536)}};o.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(o,a,i){var r=i("861d"),l=i("e8b5"),c=i("b622"),u=c("species");o.exports=function(d,m){var f;return l(d)&&(f=d.constructor,typeof f=="function"&&(f===Array||l(f.prototype))?f=void 0:r(f)&&(f=f[u],f===null&&(f=void 0))),new(f===void 0?Array:f)(m===0?0:m)}},"69f3":function(o,a,i){var r=i("7f9a"),l=i("da84"),c=i("861d"),u=i("9112"),d=i("5135"),m=i("f772"),f=i("d012"),g=l.WeakMap,T,S,_,E=function(F){return _(F)?S(F):T(F,{})},b=function(F){return function(D){var V;if(!c(D)||(V=S(D)).type!==F)throw TypeError("Incompatible receiver, "+F+" required");return V}};if(r){var I=new g,R=I.get,O=I.has,x=I.set;T=function(F,D){return x.call(I,F,D),D},S=function(F){return R.call(I,F)||{}},_=function(F){return O.call(I,F)}}else{var L=m("state");f[L]=!0,T=function(F,D){return u(F,L,D),D},S=function(F){return d(F,L)?F[L]:{}},_=function(F){return d(F,L)}}o.exports={set:T,get:S,has:_,enforce:E,getterFor:b}},"6eeb":function(o,a,i){var r=i("da84"),l=i("9112"),c=i("5135"),u=i("ce4e"),d=i("8925"),m=i("69f3"),f=m.get,g=m.enforce,T=String(String).split("String");(o.exports=function(S,_,E,b){var I=b?!!b.unsafe:!1,R=b?!!b.enumerable:!1,O=b?!!b.noTargetGet:!1;if(typeof E=="function"&&(typeof _=="string"&&!c(E,"name")&&l(E,"name",_),g(E).source=T.join(typeof _=="string"?_:"")),S===r){R?S[_]=E:u(_,E);return}else I?!O&&S[_]&&(R=!0):delete S[_];R?S[_]=E:l(S,_,E)})(Function.prototype,"toString",function(){return typeof this=="function"&&f(this).source||d(this)})},"6f53":function(o,a,i){var r=i("83ab"),l=i("df75"),c=i("fc6a"),u=i("d1e7").f,d=function(m){return function(f){for(var g=c(f),T=l(g),S=T.length,_=0,E=[],b;S>_;)b=T[_++],(!r||u.call(g,b))&&E.push(m?[b,g[b]]:g[b]);return E}};o.exports={entries:d(!0),values:d(!1)}},"73d9":function(o,a,i){var r=i("44d2");r("flatMap")},7418:function(o,a){a.f=Object.getOwnPropertySymbols},"746f":function(o,a,i){var r=i("428f"),l=i("5135"),c=i("e538"),u=i("9bf2").f;o.exports=function(d){var m=r.Symbol||(r.Symbol={});l(m,d)||u(m,d,{value:c.f(d)})}},7839:function(o,a){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(o,a,i){var r=i("1d80");o.exports=function(l){return Object(r(l))}},"7c73":function(o,a,i){var r=i("825a"),l=i("37e8"),c=i("7839"),u=i("d012"),d=i("1be4"),m=i("cc12"),f=i("f772"),g=">",T="<",S="prototype",_="script",E=f("IE_PROTO"),b=function(){},I=function(F){return T+_+g+F+T+"/"+_+g},R=function(F){F.write(I("")),F.close();var D=F.parentWindow.Object;return F=null,D},O=function(){var F=m("iframe"),D="java"+_+":",V;return F.style.display="none",d.appendChild(F),F.src=String(D),V=F.contentWindow.document,V.open(),V.write(I("document.F=Object")),V.close(),V.F},x,L=function(){try{x=document.domain&&new ActiveXObject("htmlfile")}catch{}L=x?R(x):O();for(var F=c.length;F--;)delete L[S][c[F]];return L()};u[E]=!0,o.exports=Object.create||function(D,V){var B;return D!==null?(b[S]=r(D),B=new b,b[S]=null,B[E]=D):B=L(),V===void 0?B:l(B,V)}},"7dd0":function(o,a,i){var r=i("23e7"),l=i("9ed3"),c=i("e163"),u=i("d2bb"),d=i("d44e"),m=i("9112"),f=i("6eeb"),g=i("b622"),T=i("c430"),S=i("3f8c"),_=i("ae93"),E=_.IteratorPrototype,b=_.BUGGY_SAFARI_ITERATORS,I=g("iterator"),R="keys",O="values",x="entries",L=function(){return this};o.exports=function(F,D,V,B,P,k,U){l(V,D,B);var j=function(ge){if(ge===P&&G)return G;if(!b&&ge in te)return te[ge];switch(ge){case R:return function(){return new V(this,ge)};case O:return function(){return new V(this,ge)};case x:return function(){return new V(this,ge)}}return function(){return new V(this)}},z=D+" Iterator",Y=!1,te=F.prototype,Z=te[I]||te["@@iterator"]||P&&te[P],G=!b&&Z||j(P),H=D=="Array"&&te.entries||Z,W,J,ee;if(H&&(W=c(H.call(new F)),E!==Object.prototype&&W.next&&(!T&&c(W)!==E&&(u?u(W,E):typeof W[I]!="function"&&m(W,I,L)),d(W,z,!0,!0),T&&(S[z]=L))),P==O&&Z&&Z.name!==O&&(Y=!0,G=function(){return Z.call(this)}),(!T||U)&&te[I]!==G&&m(te,I,G),S[D]=G,P)if(J={values:j(O),keys:k?G:j(R),entries:j(x)},U)for(ee in J)(b||Y||!(ee in te))&&f(te,ee,J[ee]);else r({target:D,proto:!0,forced:b||Y},J);return J}},"7f9a":function(o,a,i){var r=i("da84"),l=i("8925"),c=r.WeakMap;o.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(o,a,i){var r=i("861d");o.exports=function(l){if(!r(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(o,a,i){var r=i("d039");o.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(o,a,i){var r=i("c04e"),l=i("9bf2"),c=i("5c6c");o.exports=function(u,d,m){var f=r(d);f in u?l.f(u,f,c(0,m)):u[f]=m}},"861d":function(o,a){o.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},8875:function(o,a,i){var r,l,c;(function(u,d){l=[],r=d,c=typeof r=="function"?r.apply(a,l):r,c!==void 0&&(o.exports=c)})(typeof self<"u"?self:this,function(){function u(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(x){var m=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,f=/@([^@]*):(\d+):(\d+)\s*$/ig,g=m.exec(x.stack)||f.exec(x.stack),T=g&&g[1]||!1,S=g&&g[2]||!1,_=document.location.href.replace(document.location.hash,""),E,b,I,R=document.getElementsByTagName("script");T===_&&(E=document.documentElement.outerHTML,b=new RegExp("(?:[^\\n]+?\\n){0,"+(S-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),I=E.replace(b,"$1").trim());for(var O=0;O<R.length;O++)if(R[O].readyState==="interactive"||R[O].src===T||T===_&&R[O].innerHTML&&R[O].innerHTML.trim()===I)return R[O];return null}}return u})},8925:function(o,a,i){var r=i("c6cd"),l=Function.toString;typeof r.inspectSource!="function"&&(r.inspectSource=function(c){return l.call(c)}),o.exports=r.inspectSource},"8aa5":function(o,a,i){var r=i("6547").charAt;o.exports=function(l,c,u){return c+(u?r(l,c).length:1)}},"8bbf":function(o,a){o.exports=n},"90e3":function(o,a){var i=0,r=Math.random();o.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++i+r).toString(36)}},9112:function(o,a,i){var r=i("83ab"),l=i("9bf2"),c=i("5c6c");o.exports=r?function(u,d,m){return l.f(u,d,c(1,m))}:function(u,d,m){return u[d]=m,u}},9263:function(o,a,i){var r=i("ad6d"),l=i("9f7f"),c=RegExp.prototype.exec,u=String.prototype.replace,d=c,m=function(){var S=/a/,_=/b*/g;return c.call(S,"a"),c.call(_,"a"),S.lastIndex!==0||_.lastIndex!==0}(),f=l.UNSUPPORTED_Y||l.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0,T=m||g||f;T&&(d=function(_){var E=this,b,I,R,O,x=f&&E.sticky,L=r.call(E),F=E.source,D=0,V=_;return x&&(L=L.replace("y",""),L.indexOf("g")===-1&&(L+="g"),V=String(_).slice(E.lastIndex),E.lastIndex>0&&(!E.multiline||E.multiline&&_[E.lastIndex-1]!==`
`)&&(F="(?: "+F+")",V=" "+V,D++),I=new RegExp("^(?:"+F+")",L)),g&&(I=new RegExp("^"+F+"$(?!\\s)",L)),m&&(b=E.lastIndex),R=c.call(x?I:E,V),x?R?(R.input=R.input.slice(D),R[0]=R[0].slice(D),R.index=E.lastIndex,E.lastIndex+=R[0].length):E.lastIndex=0:m&&R&&(E.lastIndex=E.global?R.index+R[0].length:b),g&&R&&R.length>1&&u.call(R[0],I,function(){for(O=1;O<arguments.length-2;O++)arguments[O]===void 0&&(R[O]=void 0)}),R}),o.exports=d},"94ca":function(o,a,i){var r=i("d039"),l=/#|\.prototype\./,c=function(g,T){var S=d[u(g)];return S==f?!0:S==m?!1:typeof T=="function"?r(T):!!T},u=c.normalize=function(g){return String(g).replace(l,".").toLowerCase()},d=c.data={},m=c.NATIVE="N",f=c.POLYFILL="P";o.exports=c},"99af":function(o,a,i){var r=i("23e7"),l=i("d039"),c=i("e8b5"),u=i("861d"),d=i("7b0b"),m=i("50c4"),f=i("8418"),g=i("65f0"),T=i("1dde"),S=i("b622"),_=i("2d00"),E=S("isConcatSpreadable"),b=9007199254740991,I="Maximum allowed index exceeded",R=_>=51||!l(function(){var F=[];return F[E]=!1,F.concat()[0]!==F}),O=T("concat"),x=function(F){if(!u(F))return!1;var D=F[E];return D!==void 0?!!D:c(F)},L=!R||!O;r({target:"Array",proto:!0,forced:L},{concat:function(D){var V=d(this),B=g(V,0),P=0,k,U,j,z,Y;for(k=-1,j=arguments.length;k<j;k++)if(Y=k===-1?V:arguments[k],x(Y)){if(z=m(Y.length),P+z>b)throw TypeError(I);for(U=0;U<z;U++,P++)U in Y&&f(B,P,Y[U])}else{if(P>=b)throw TypeError(I);f(B,P++,Y)}return B.length=P,B}})},"9bdd":function(o,a,i){var r=i("825a");o.exports=function(l,c,u,d){try{return d?c(r(u)[0],u[1]):c(u)}catch(f){var m=l.return;throw m!==void 0&&r(m.call(l)),f}}},"9bf2":function(o,a,i){var r=i("83ab"),l=i("0cfb"),c=i("825a"),u=i("c04e"),d=Object.defineProperty;a.f=r?d:function(f,g,T){if(c(f),g=u(g,!0),c(T),l)try{return d(f,g,T)}catch{}if("get"in T||"set"in T)throw TypeError("Accessors not supported");return"value"in T&&(f[g]=T.value),f}},"9ed3":function(o,a,i){var r=i("ae93").IteratorPrototype,l=i("7c73"),c=i("5c6c"),u=i("d44e"),d=i("3f8c"),m=function(){return this};o.exports=function(f,g,T){var S=g+" Iterator";return f.prototype=l(r,{next:c(1,T)}),u(f,S,!1,!0),d[S]=m,f}},"9f7f":function(o,a,i){var r=i("d039");function l(c,u){return RegExp(c,u)}a.UNSUPPORTED_Y=r(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),a.BROKEN_CARET=r(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(o,a,i){var r=i("e8b5"),l=i("50c4"),c=i("0366"),u=function(d,m,f,g,T,S,_,E){for(var b=T,I=0,R=_?c(_,E,3):!1,O;I<g;){if(I in f){if(O=R?R(f[I],I,m):f[I],S>0&&r(O))b=u(d,m,O,l(O.length),b,S-1)-1;else{if(b>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[b]=O}b++}I++}return b};o.exports=u},a352:function(o,a){o.exports=s},a434:function(o,a,i){var r=i("23e7"),l=i("23cb"),c=i("a691"),u=i("50c4"),d=i("7b0b"),m=i("65f0"),f=i("8418"),g=i("1dde"),T=i("ae40"),S=g("splice"),_=T("splice",{ACCESSORS:!0,0:0,1:2}),E=Math.max,b=Math.min,I=9007199254740991,R="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!S||!_},{splice:function(x,L){var F=d(this),D=u(F.length),V=l(x,D),B=arguments.length,P,k,U,j,z,Y;if(B===0?P=k=0:B===1?(P=0,k=D-V):(P=B-2,k=b(E(c(L),0),D-V)),D+P-k>I)throw TypeError(R);for(U=m(F,k),j=0;j<k;j++)z=V+j,z in F&&f(U,j,F[z]);if(U.length=k,P<k){for(j=V;j<D-k;j++)z=j+k,Y=j+P,z in F?F[Y]=F[z]:delete F[Y];for(j=D;j>D-k+P;j--)delete F[j-1]}else if(P>k)for(j=D-k;j>V;j--)z=j+k-1,Y=j+P-1,z in F?F[Y]=F[z]:delete F[Y];for(j=0;j<P;j++)F[j+V]=arguments[j+2];return F.length=D-k+P,U}})},a4d3:function(o,a,i){var r=i("23e7"),l=i("da84"),c=i("d066"),u=i("c430"),d=i("83ab"),m=i("4930"),f=i("fdbf"),g=i("d039"),T=i("5135"),S=i("e8b5"),_=i("861d"),E=i("825a"),b=i("7b0b"),I=i("fc6a"),R=i("c04e"),O=i("5c6c"),x=i("7c73"),L=i("df75"),F=i("241c"),D=i("057f"),V=i("7418"),B=i("06cf"),P=i("9bf2"),k=i("d1e7"),U=i("9112"),j=i("6eeb"),z=i("5692"),Y=i("f772"),te=i("d012"),Z=i("90e3"),G=i("b622"),H=i("e538"),W=i("746f"),J=i("d44e"),ee=i("69f3"),ge=i("b727").forEach,Ee=Y("hidden"),le="Symbol",_e="prototype",$e=G("toPrimitive"),He=ee.set,Je=ee.getterFor(le),Xe=Object[_e],Qe=l.Symbol,rt=c("JSON","stringify"),at=B.f,Et=P.f,Lt=D.f,q=k.f,ae=z("symbols"),ie=z("op-symbols"),be=z("string-to-symbol-registry"),fe=z("symbol-to-string-registry"),Se=z("wks"),Le=l.QObject,ke=!Le||!Le[_e]||!Le[_e].findChild,De=d&&g(function(){return x(Et({},"a",{get:function(){return Et(this,"a",{value:7}).a}})).a!=7})?function(Te,Ie,ye){var Be=at(Xe,Ie);Be&&delete Xe[Ie],Et(Te,Ie,ye),Be&&Te!==Xe&&Et(Xe,Ie,Be)}:Et,Ue=function(Te,Ie){var ye=ae[Te]=x(Qe[_e]);return He(ye,{type:le,tag:Te,description:Ie}),d||(ye.description=Ie),ye},de=f?function(Te){return typeof Te=="symbol"}:function(Te){return Object(Te)instanceof Qe},Ce=function(Ie,ye,Be){Ie===Xe&&Ce(ie,ye,Be),E(Ie);var xe=R(ye,!0);return E(Be),T(ae,xe)?(Be.enumerable?(T(Ie,Ee)&&Ie[Ee][xe]&&(Ie[Ee][xe]=!1),Be=x(Be,{enumerable:O(0,!1)})):(T(Ie,Ee)||Et(Ie,Ee,O(1,{})),Ie[Ee][xe]=!0),De(Ie,xe,Be)):Et(Ie,xe,Be)},Pe=function(Ie,ye){E(Ie);var Be=I(ye),xe=L(Be).concat(we(Be));return ge(xe,function(Ge){(!d||ne.call(Be,Ge))&&Ce(Ie,Ge,Be[Ge])}),Ie},Q=function(Ie,ye){return ye===void 0?x(Ie):Pe(x(Ie),ye)},ne=function(Ie){var ye=R(Ie,!0),Be=q.call(this,ye);return this===Xe&&T(ae,ye)&&!T(ie,ye)?!1:Be||!T(this,ye)||!T(ae,ye)||T(this,Ee)&&this[Ee][ye]?Be:!0},ue=function(Ie,ye){var Be=I(Ie),xe=R(ye,!0);if(!(Be===Xe&&T(ae,xe)&&!T(ie,xe))){var Ge=at(Be,xe);return Ge&&T(ae,xe)&&!(T(Be,Ee)&&Be[Ee][xe])&&(Ge.enumerable=!0),Ge}},ve=function(Ie){var ye=Lt(I(Ie)),Be=[];return ge(ye,function(xe){!T(ae,xe)&&!T(te,xe)&&Be.push(xe)}),Be},we=function(Ie){var ye=Ie===Xe,Be=Lt(ye?ie:I(Ie)),xe=[];return ge(Be,function(Ge){T(ae,Ge)&&(!ye||T(Xe,Ge))&&xe.push(ae[Ge])}),xe};if(m||(Qe=function(){if(this instanceof Qe)throw TypeError("Symbol is not a constructor");var Ie=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ye=Z(Ie),Be=function(xe){this===Xe&&Be.call(ie,xe),T(this,Ee)&&T(this[Ee],ye)&&(this[Ee][ye]=!1),De(this,ye,O(1,xe))};return d&&ke&&De(Xe,ye,{configurable:!0,set:Be}),Ue(ye,Ie)},j(Qe[_e],"toString",function(){return Je(this).tag}),j(Qe,"withoutSetter",function(Te){return Ue(Z(Te),Te)}),k.f=ne,P.f=Ce,B.f=ue,F.f=D.f=ve,V.f=we,H.f=function(Te){return Ue(G(Te),Te)},d&&(Et(Qe[_e],"description",{configurable:!0,get:function(){return Je(this).description}}),u||j(Xe,"propertyIsEnumerable",ne,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!m,sham:!m},{Symbol:Qe}),ge(L(Se),function(Te){W(Te)}),r({target:le,stat:!0,forced:!m},{for:function(Te){var Ie=String(Te);if(T(be,Ie))return be[Ie];var ye=Qe(Ie);return be[Ie]=ye,fe[ye]=Ie,ye},keyFor:function(Ie){if(!de(Ie))throw TypeError(Ie+" is not a symbol");if(T(fe,Ie))return fe[Ie]},useSetter:function(){ke=!0},useSimple:function(){ke=!1}}),r({target:"Object",stat:!0,forced:!m,sham:!d},{create:Q,defineProperty:Ce,defineProperties:Pe,getOwnPropertyDescriptor:ue}),r({target:"Object",stat:!0,forced:!m},{getOwnPropertyNames:ve,getOwnPropertySymbols:we}),r({target:"Object",stat:!0,forced:g(function(){V.f(1)})},{getOwnPropertySymbols:function(Ie){return V.f(b(Ie))}}),rt){var he=!m||g(function(){var Te=Qe();return rt([Te])!="[null]"||rt({a:Te})!="{}"||rt(Object(Te))!="{}"});r({target:"JSON",stat:!0,forced:he},{stringify:function(Ie,ye,Be){for(var xe=[Ie],Ge=1,ot;arguments.length>Ge;)xe.push(arguments[Ge++]);if(ot=ye,!(!_(ye)&&Ie===void 0||de(Ie)))return S(ye)||(ye=function(Tt,Ze){if(typeof ot=="function"&&(Ze=ot.call(this,Tt,Ze)),!de(Ze))return Ze}),xe[1]=ye,rt.apply(null,xe)}})}Qe[_e][$e]||U(Qe[_e],$e,Qe[_e].valueOf),J(Qe,le),te[Ee]=!0},a630:function(o,a,i){var r=i("23e7"),l=i("4df4"),c=i("1c7e"),u=!c(function(d){Array.from(d)});r({target:"Array",stat:!0,forced:u},{from:l})},a640:function(o,a,i){var r=i("d039");o.exports=function(l,c){var u=[][l];return!!u&&r(function(){u.call(null,c||function(){throw 1},1)})}},a691:function(o,a){var i=Math.ceil,r=Math.floor;o.exports=function(l){return isNaN(l=+l)?0:(l>0?r:i)(l)}},ab13:function(o,a,i){var r=i("b622"),l=r("match");o.exports=function(c){var u=/./;try{"/./"[c](u)}catch{try{return u[l]=!1,"/./"[c](u)}catch{}}return!1}},ac1f:function(o,a,i){var r=i("23e7"),l=i("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(o,a,i){var r=i("825a");o.exports=function(){var l=r(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(o,a,i){var r=i("83ab"),l=i("d039"),c=i("5135"),u=Object.defineProperty,d={},m=function(f){throw f};o.exports=function(f,g){if(c(d,f))return d[f];g||(g={});var T=[][f],S=c(g,"ACCESSORS")?g.ACCESSORS:!1,_=c(g,0)?g[0]:m,E=c(g,1)?g[1]:void 0;return d[f]=!!T&&!l(function(){if(S&&!r)return!0;var b={length:-1};S?u(b,1,{enumerable:!0,get:m}):b[1]=1,T.call(b,_,E)})}},ae93:function(o,a,i){var r=i("e163"),l=i("9112"),c=i("5135"),u=i("b622"),d=i("c430"),m=u("iterator"),f=!1,g=function(){return this},T,S,_;[].keys&&(_=[].keys(),"next"in _?(S=r(r(_)),S!==Object.prototype&&(T=S)):f=!0),T==null&&(T={}),!d&&!c(T,m)&&l(T,m,g),o.exports={IteratorPrototype:T,BUGGY_SAFARI_ITERATORS:f}},b041:function(o,a,i){var r=i("00ee"),l=i("f5df");o.exports=r?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(o,a,i){var r=i("83ab"),l=i("9bf2").f,c=Function.prototype,u=c.toString,d=/^\s*function ([^ (]*)/,m="name";r&&!(m in c)&&l(c,m,{configurable:!0,get:function(){try{return u.call(this).match(d)[1]}catch{return""}}})},b622:function(o,a,i){var r=i("da84"),l=i("5692"),c=i("5135"),u=i("90e3"),d=i("4930"),m=i("fdbf"),f=l("wks"),g=r.Symbol,T=m?g:g&&g.withoutSetter||u;o.exports=function(S){return c(f,S)||(d&&c(g,S)?f[S]=g[S]:f[S]=T("Symbol."+S)),f[S]}},b64b:function(o,a,i){var r=i("23e7"),l=i("7b0b"),c=i("df75"),u=i("d039"),d=u(function(){c(1)});r({target:"Object",stat:!0,forced:d},{keys:function(f){return c(l(f))}})},b727:function(o,a,i){var r=i("0366"),l=i("44ad"),c=i("7b0b"),u=i("50c4"),d=i("65f0"),m=[].push,f=function(g){var T=g==1,S=g==2,_=g==3,E=g==4,b=g==6,I=g==5||b;return function(R,O,x,L){for(var F=c(R),D=l(F),V=r(O,x,3),B=u(D.length),P=0,k=L||d,U=T?k(R,B):S?k(R,0):void 0,j,z;B>P;P++)if((I||P in D)&&(j=D[P],z=V(j,P,F),g)){if(T)U[P]=z;else if(z)switch(g){case 3:return!0;case 5:return j;case 6:return P;case 2:m.call(U,j)}else if(E)return!1}return b?-1:_||E?E:U}};o.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6)}},c04e:function(o,a,i){var r=i("861d");o.exports=function(l,c){if(!r(l))return l;var u,d;if(c&&typeof(u=l.toString)=="function"&&!r(d=u.call(l))||typeof(u=l.valueOf)=="function"&&!r(d=u.call(l))||!c&&typeof(u=l.toString)=="function"&&!r(d=u.call(l)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(o,a){o.exports=!1},c6b6:function(o,a){var i={}.toString;o.exports=function(r){return i.call(r).slice(8,-1)}},c6cd:function(o,a,i){var r=i("da84"),l=i("ce4e"),c="__core-js_shared__",u=r[c]||l(c,{});o.exports=u},c740:function(o,a,i){var r=i("23e7"),l=i("b727").findIndex,c=i("44d2"),u=i("ae40"),d="findIndex",m=!0,f=u(d);d in[]&&Array(1)[d](function(){m=!1}),r({target:"Array",proto:!0,forced:m||!f},{findIndex:function(T){return l(this,T,arguments.length>1?arguments[1]:void 0)}}),c(d)},c8ba:function(o,a){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}o.exports=i},c975:function(o,a,i){var r=i("23e7"),l=i("4d64").indexOf,c=i("a640"),u=i("ae40"),d=[].indexOf,m=!!d&&1/[1].indexOf(1,-0)<0,f=c("indexOf"),g=u("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:m||!f||!g},{indexOf:function(S){return m?d.apply(this,arguments)||0:l(this,S,arguments.length>1?arguments[1]:void 0)}})},ca84:function(o,a,i){var r=i("5135"),l=i("fc6a"),c=i("4d64").indexOf,u=i("d012");o.exports=function(d,m){var f=l(d),g=0,T=[],S;for(S in f)!r(u,S)&&r(f,S)&&T.push(S);for(;m.length>g;)r(f,S=m[g++])&&(~c(T,S)||T.push(S));return T}},caad:function(o,a,i){var r=i("23e7"),l=i("4d64").includes,c=i("44d2"),u=i("ae40"),d=u("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!d},{includes:function(f){return l(this,f,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(o,a,i){var r=i("da84"),l=i("861d"),c=r.document,u=l(c)&&l(c.createElement);o.exports=function(d){return u?c.createElement(d):{}}},ce4e:function(o,a,i){var r=i("da84"),l=i("9112");o.exports=function(c,u){try{l(r,c,u)}catch{r[c]=u}return u}},d012:function(o,a){o.exports={}},d039:function(o,a){o.exports=function(i){try{return!!i()}catch{return!0}}},d066:function(o,a,i){var r=i("428f"),l=i("da84"),c=function(u){return typeof u=="function"?u:void 0};o.exports=function(u,d){return arguments.length<2?c(r[u])||c(l[u]):r[u]&&r[u][d]||l[u]&&l[u][d]}},d1e7:function(o,a,i){var r={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!r.call({1:2},1);a.f=c?function(d){var m=l(this,d);return!!m&&m.enumerable}:r},d28b:function(o,a,i){var r=i("746f");r("iterator")},d2bb:function(o,a,i){var r=i("825a"),l=i("3bbe");o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,u={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(u,[]),c=u instanceof Array}catch{}return function(f,g){return r(f),l(g),c?d.call(f,g):f.__proto__=g,f}}():void 0)},d3b7:function(o,a,i){var r=i("00ee"),l=i("6eeb"),c=i("b041");r||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(o,a,i){var r=i("9bf2").f,l=i("5135"),c=i("b622"),u=c("toStringTag");o.exports=function(d,m,f){d&&!l(d=f?d:d.prototype,u)&&r(d,u,{configurable:!0,value:m})}},d58f:function(o,a,i){var r=i("1c0b"),l=i("7b0b"),c=i("44ad"),u=i("50c4"),d=function(m){return function(f,g,T,S){r(g);var _=l(f),E=c(_),b=u(_.length),I=m?b-1:0,R=m?-1:1;if(T<2)for(;;){if(I in E){S=E[I],I+=R;break}if(I+=R,m?I<0:b<=I)throw TypeError("Reduce of empty array with no initial value")}for(;m?I>=0:b>I;I+=R)I in E&&(S=g(S,E[I],I,_));return S}};o.exports={left:d(!1),right:d(!0)}},d784:function(o,a,i){i("ac1f");var r=i("6eeb"),l=i("d039"),c=i("b622"),u=i("9263"),d=i("9112"),m=c("species"),f=!l(function(){var E=/./;return E.exec=function(){var b=[];return b.groups={a:"7"},b},"".replace(E,"$<a>")!=="7"}),g=function(){return"a".replace(/./,"$0")==="$0"}(),T=c("replace"),S=function(){return/./[T]?/./[T]("a","$0")==="":!1}(),_=!l(function(){var E=/(?:)/,b=E.exec;E.exec=function(){return b.apply(this,arguments)};var I="ab".split(E);return I.length!==2||I[0]!=="a"||I[1]!=="b"});o.exports=function(E,b,I,R){var O=c(E),x=!l(function(){var P={};return P[O]=function(){return 7},""[E](P)!=7}),L=x&&!l(function(){var P=!1,k=/a/;return E==="split"&&(k={},k.constructor={},k.constructor[m]=function(){return k},k.flags="",k[O]=/./[O]),k.exec=function(){return P=!0,null},k[O](""),!P});if(!x||!L||E==="replace"&&!(f&&g&&!S)||E==="split"&&!_){var F=/./[O],D=I(O,""[E],function(P,k,U,j,z){return k.exec===u?x&&!z?{done:!0,value:F.call(k,U,j)}:{done:!0,value:P.call(U,k,j)}:{done:!1}},{REPLACE_KEEPS_$0:g,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:S}),V=D[0],B=D[1];r(String.prototype,E,V),r(RegExp.prototype,O,b==2?function(P,k){return B.call(P,this,k)}:function(P){return B.call(P,this)})}R&&d(RegExp.prototype[O],"sham",!0)}},d81d:function(o,a,i){var r=i("23e7"),l=i("b727").map,c=i("1dde"),u=i("ae40"),d=c("map"),m=u("map");r({target:"Array",proto:!0,forced:!d||!m},{map:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}})},da84:function(o,a,i){(function(r){var l=function(c){return c&&c.Math==Math&&c};o.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof r=="object"&&r)||Function("return this")()}).call(this,i("c8ba"))},dbb4:function(o,a,i){var r=i("23e7"),l=i("83ab"),c=i("56ef"),u=i("fc6a"),d=i("06cf"),m=i("8418");r({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(g){for(var T=u(g),S=d.f,_=c(T),E={},b=0,I,R;_.length>b;)R=S(T,I=_[b++]),R!==void 0&&m(E,I,R);return E}})},dbf1:function(o,a,i){(function(r){i.d(a,"a",function(){return c});function l(){return typeof window<"u"?window.console:r.console}var c=l()}).call(this,i("c8ba"))},ddb0:function(o,a,i){var r=i("da84"),l=i("fdbc"),c=i("e260"),u=i("9112"),d=i("b622"),m=d("iterator"),f=d("toStringTag"),g=c.values;for(var T in l){var S=r[T],_=S&&S.prototype;if(_){if(_[m]!==g)try{u(_,m,g)}catch{_[m]=g}if(_[f]||u(_,f,T),l[T]){for(var E in c)if(_[E]!==c[E])try{u(_,E,c[E])}catch{_[E]=c[E]}}}}},df75:function(o,a,i){var r=i("ca84"),l=i("7839");o.exports=Object.keys||function(u){return r(u,l)}},e01a:function(o,a,i){var r=i("23e7"),l=i("83ab"),c=i("da84"),u=i("5135"),d=i("861d"),m=i("9bf2").f,f=i("e893"),g=c.Symbol;if(l&&typeof g=="function"&&(!("description"in g.prototype)||g().description!==void 0)){var T={},S=function(){var O=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),x=this instanceof S?new g(O):O===void 0?g():g(O);return O===""&&(T[x]=!0),x};f(S,g);var _=S.prototype=g.prototype;_.constructor=S;var E=_.toString,b=String(g("test"))=="Symbol(test)",I=/^Symbol\((.*)\)[^)]+$/;m(_,"description",{configurable:!0,get:function(){var O=d(this)?this.valueOf():this,x=E.call(O);if(u(T,O))return"";var L=b?x.slice(7,-1):x.replace(I,"$1");return L===""?void 0:L}}),r({global:!0,forced:!0},{Symbol:S})}},e163:function(o,a,i){var r=i("5135"),l=i("7b0b"),c=i("f772"),u=i("e177"),d=c("IE_PROTO"),m=Object.prototype;o.exports=u?Object.getPrototypeOf:function(f){return f=l(f),r(f,d)?f[d]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?m:null}},e177:function(o,a,i){var r=i("d039");o.exports=!r(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(o,a,i){var r=i("fc6a"),l=i("44d2"),c=i("3f8c"),u=i("69f3"),d=i("7dd0"),m="Array Iterator",f=u.set,g=u.getterFor(m);o.exports=d(Array,"Array",function(T,S){f(this,{type:m,target:r(T),index:0,kind:S})},function(){var T=g(this),S=T.target,_=T.kind,E=T.index++;return!S||E>=S.length?(T.target=void 0,{value:void 0,done:!0}):_=="keys"?{value:E,done:!1}:_=="values"?{value:S[E],done:!1}:{value:[E,S[E]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(o,a,i){var r=i("23e7"),l=i("d039"),c=i("fc6a"),u=i("06cf").f,d=i("83ab"),m=l(function(){u(1)}),f=!d||m;r({target:"Object",stat:!0,forced:f,sham:!d},{getOwnPropertyDescriptor:function(T,S){return u(c(T),S)}})},e538:function(o,a,i){var r=i("b622");a.f=r},e893:function(o,a,i){var r=i("5135"),l=i("56ef"),c=i("06cf"),u=i("9bf2");o.exports=function(d,m){for(var f=l(m),g=u.f,T=c.f,S=0;S<f.length;S++){var _=f[S];r(d,_)||g(d,_,T(m,_))}}},e8b5:function(o,a,i){var r=i("c6b6");o.exports=Array.isArray||function(c){return r(c)=="Array"}},e95a:function(o,a,i){var r=i("b622"),l=i("3f8c"),c=r("iterator"),u=Array.prototype;o.exports=function(d){return d!==void 0&&(l.Array===d||u[c]===d)}},f5df:function(o,a,i){var r=i("00ee"),l=i("c6b6"),c=i("b622"),u=c("toStringTag"),d=l(function(){return arguments}())=="Arguments",m=function(f,g){try{return f[g]}catch{}};o.exports=r?l:function(f){var g,T,S;return f===void 0?"Undefined":f===null?"Null":typeof(T=m(g=Object(f),u))=="string"?T:d?l(g):(S=l(g))=="Object"&&typeof g.callee=="function"?"Arguments":S}},f772:function(o,a,i){var r=i("5692"),l=i("90e3"),c=r("keys");o.exports=function(u){return c[u]||(c[u]=l(u))}},fb15:function(o,a,i){if(i.r(a),typeof window<"u"){var r=window.document.currentScript;{var l=i("8875");r=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(i.p=c[1])}i("99af"),i("4de4"),i("4160"),i("c975"),i("d81d"),i("a434"),i("159b"),i("a4d3"),i("e439"),i("dbb4"),i("b64b");function u(de,Ce,Pe){return Ce in de?Object.defineProperty(de,Ce,{value:Pe,enumerable:!0,configurable:!0,writable:!0}):de[Ce]=Pe,de}function d(de,Ce){var Pe=Object.keys(de);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(de);Ce&&(Q=Q.filter(function(ne){return Object.getOwnPropertyDescriptor(de,ne).enumerable})),Pe.push.apply(Pe,Q)}return Pe}function m(de){for(var Ce=1;Ce<arguments.length;Ce++){var Pe=arguments[Ce]!=null?arguments[Ce]:{};Ce%2?d(Object(Pe),!0).forEach(function(Q){u(de,Q,Pe[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Pe)):d(Object(Pe)).forEach(function(Q){Object.defineProperty(de,Q,Object.getOwnPropertyDescriptor(Pe,Q))})}return de}function f(de){if(Array.isArray(de))return de}i("e01a"),i("d28b"),i("e260"),i("d3b7"),i("3ca3"),i("ddb0");function g(de,Ce){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(de)))){var Pe=[],Q=!0,ne=!1,ue=void 0;try{for(var ve=de[Symbol.iterator](),we;!(Q=(we=ve.next()).done)&&(Pe.push(we.value),!(Ce&&Pe.length===Ce));Q=!0);}catch(he){ne=!0,ue=he}finally{try{!Q&&ve.return!=null&&ve.return()}finally{if(ne)throw ue}}return Pe}}i("a630"),i("fb6a"),i("b0c0"),i("25f0");function T(de,Ce){(Ce==null||Ce>de.length)&&(Ce=de.length);for(var Pe=0,Q=new Array(Ce);Pe<Ce;Pe++)Q[Pe]=de[Pe];return Q}function S(de,Ce){if(de){if(typeof de=="string")return T(de,Ce);var Pe=Object.prototype.toString.call(de).slice(8,-1);if(Pe==="Object"&&de.constructor&&(Pe=de.constructor.name),Pe==="Map"||Pe==="Set")return Array.from(de);if(Pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pe))return T(de,Ce)}}function _(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(de,Ce){return f(de)||g(de,Ce)||S(de,Ce)||_()}function b(de){if(Array.isArray(de))return T(de)}function I(de){if(typeof Symbol<"u"&&Symbol.iterator in Object(de))return Array.from(de)}function R(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(de){return b(de)||I(de)||S(de)||R()}var x=i("a352"),L=i.n(x);function F(de){de.parentElement!==null&&de.parentElement.removeChild(de)}function D(de,Ce,Pe){var Q=Pe===0?de.children[0]:de.children[Pe-1].nextSibling;de.insertBefore(Ce,Q)}var V=i("dbf1");i("13d5"),i("4fad"),i("ac1f"),i("5319");function B(de){var Ce=Object.create(null);return function(Q){var ne=Ce[Q];return ne||(Ce[Q]=de(Q))}}var P=/-(\w)/g,k=B(function(de){return de.replace(P,function(Ce,Pe){return Pe.toUpperCase()})});i("5db7"),i("73d9");var U=["Start","Add","Remove","Update","End"],j=["Choose","Unchoose","Sort","Filter","Clone"],z=["Move"],Y=[z,U,j].flatMap(function(de){return de}).map(function(de){return"on".concat(de)}),te={manage:z,manageAndEmit:U,emit:j};function Z(de){return Y.indexOf(de)!==-1}i("caad"),i("2ca0");var G=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function H(de){return G.includes(de)}function W(de){return["transition-group","TransitionGroup"].includes(de)}function J(de){return["id","class","role","style"].includes(de)||de.startsWith("data-")||de.startsWith("aria-")||de.startsWith("on")}function ee(de){return de.reduce(function(Ce,Pe){var Q=E(Pe,2),ne=Q[0],ue=Q[1];return Ce[ne]=ue,Ce},{})}function ge(de){var Ce=de.$attrs,Pe=de.componentData,Q=Pe===void 0?{}:Pe,ne=ee(Object.entries(Ce).filter(function(ue){var ve=E(ue,2),we=ve[0];return ve[1],J(we)}));return m(m({},ne),Q)}function Ee(de){var Ce=de.$attrs,Pe=de.callBackBuilder,Q=ee(le(Ce));Object.entries(Pe).forEach(function(ue){var ve=E(ue,2),we=ve[0],he=ve[1];te[we].forEach(function(Te){Q["on".concat(Te)]=he(Te)})});var ne="[data-draggable]".concat(Q.draggable||"");return m(m({},Q),{},{draggable:ne})}function le(de){return Object.entries(de).filter(function(Ce){var Pe=E(Ce,2),Q=Pe[0];return Pe[1],!J(Q)}).map(function(Ce){var Pe=E(Ce,2),Q=Pe[0],ne=Pe[1];return[k(Q),ne]}).filter(function(Ce){var Pe=E(Ce,2),Q=Pe[0];return Pe[1],!Z(Q)})}i("c740");function _e(de,Ce){if(!(de instanceof Ce))throw new TypeError("Cannot call a class as a function")}function $e(de,Ce){for(var Pe=0;Pe<Ce.length;Pe++){var Q=Ce[Pe];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(de,Q.key,Q)}}function He(de,Ce,Pe){return Ce&&$e(de.prototype,Ce),de}var Je=function(Ce){var Pe=Ce.el;return Pe},Xe=function(Ce,Pe){return Ce.__draggable_context=Pe},Qe=function(Ce){return Ce.__draggable_context},rt=function(){function de(Ce){var Pe=Ce.nodes,Q=Pe.header,ne=Pe.default,ue=Pe.footer,ve=Ce.root,we=Ce.realList;_e(this,de),this.defaultNodes=ne,this.children=[].concat(O(Q),O(ne),O(ue)),this.externalComponent=ve.externalComponent,this.rootTransition=ve.transition,this.tag=ve.tag,this.realList=we}return He(de,[{key:"render",value:function(Pe,Q){var ne=this.tag,ue=this.children,ve=this._isRootComponent,we=ve?{default:function(){return ue}}:ue;return Pe(ne,Q,we)}},{key:"updated",value:function(){var Pe=this.defaultNodes,Q=this.realList;Pe.forEach(function(ne,ue){Xe(Je(ne),{element:Q[ue],index:ue})})}},{key:"getUnderlyingVm",value:function(Pe){return Qe(Pe)}},{key:"getVmIndexFromDomIndex",value:function(Pe,Q){var ne=this.defaultNodes,ue=ne.length,ve=Q.children,we=ve.item(Pe);if(we===null)return ue;var he=Qe(we);if(he)return he.index;if(ue===0)return 0;var Te=Je(ne[0]),Ie=O(ve).findIndex(function(ye){return ye===Te});return Pe<Ie?0:ue}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),de}(),at=i("8bbf");function Et(de,Ce){var Pe=de[Ce];return Pe?Pe():[]}function Lt(de){var Ce=de.$slots,Pe=de.realList,Q=de.getKey,ne=Pe||[],ue=["header","footer"].map(function(ye){return Et(Ce,ye)}),ve=E(ue,2),we=ve[0],he=ve[1],Te=Ce.item;if(!Te)throw new Error("draggable element must have an item slot");var Ie=ne.flatMap(function(ye,Be){return Te({element:ye,index:Be}).map(function(xe){return xe.key=Q(ye),xe.props=m(m({},xe.props||{}),{},{"data-draggable":!0}),xe})});if(Ie.length!==ne.length)throw new Error("Item slot must have only one child");return{header:we,footer:he,default:Ie}}function q(de){var Ce=W(de),Pe=!H(de)&&!Ce;return{transition:Ce,externalComponent:Pe,tag:Pe?Object(at.resolveComponent)(de):Ce?at.TransitionGroup:de}}function ae(de){var Ce=de.$slots,Pe=de.tag,Q=de.realList,ne=de.getKey,ue=Lt({$slots:Ce,realList:Q,getKey:ne}),ve=q(Pe);return new rt({nodes:ue,root:ve,realList:Q})}function ie(de,Ce){var Pe=this;Object(at.nextTick)(function(){return Pe.$emit(de.toLowerCase(),Ce)})}function be(de){var Ce=this;return function(Pe,Q){if(Ce.realList!==null)return Ce["onDrag".concat(de)](Pe,Q)}}function fe(de){var Ce=this,Pe=be.call(this,de);return function(Q,ne){Pe.call(Ce,Q,ne),ie.call(Ce,de,Q)}}var Se=null,Le={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(Ce){return Ce}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},ke=["update:modelValue","change"].concat(O([].concat(O(te.manageAndEmit),O(te.emit)).map(function(de){return de.toLowerCase()}))),De=Object(at.defineComponent)({name:"draggable",inheritAttrs:!1,props:Le,emits:ke,data:function(){return{error:!1}},render:function(){try{this.error=!1;var Ce=this.$slots,Pe=this.$attrs,Q=this.tag,ne=this.componentData,ue=this.realList,ve=this.getKey,we=ae({$slots:Ce,tag:Q,realList:ue,getKey:ve});this.componentStructure=we;var he=ge({$attrs:Pe,componentData:ne});return we.render(at.h,he)}catch(Te){return this.error=!0,Object(at.h)("pre",{style:{color:"red"}},Te.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&V.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var Ce=this;if(!this.error){var Pe=this.$attrs,Q=this.$el,ne=this.componentStructure;ne.updated();var ue=Ee({$attrs:Pe,callBackBuilder:{manageAndEmit:function(he){return fe.call(Ce,he)},emit:function(he){return ie.bind(Ce,he)},manage:function(he){return be.call(Ce,he)}}}),ve=Q.nodeType===1?Q:Q.parentElement;this._sortable=new L.a(ve,ue),this.targetDomElement=ve,ve.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var Ce=this.list;return Ce||this.modelValue},getKey:function(){var Ce=this.itemKey;return typeof Ce=="function"?Ce:function(Pe){return Pe[Ce]}}},watch:{$attrs:{handler:function(Ce){var Pe=this._sortable;Pe&&le(Ce).forEach(function(Q){var ne=E(Q,2),ue=ne[0],ve=ne[1];Pe.option(ue,ve)})},deep:!0}},methods:{getUnderlyingVm:function(Ce){return this.componentStructure.getUnderlyingVm(Ce)||null},getUnderlyingPotencialDraggableComponent:function(Ce){return Ce.__draggable_component__},emitChanges:function(Ce){var Pe=this;Object(at.nextTick)(function(){return Pe.$emit("change",Ce)})},alterList:function(Ce){if(this.list){Ce(this.list);return}var Pe=O(this.modelValue);Ce(Pe),this.$emit("update:modelValue",Pe)},spliceList:function(){var Ce=arguments,Pe=function(ne){return ne.splice.apply(ne,O(Ce))};this.alterList(Pe)},updatePosition:function(Ce,Pe){var Q=function(ue){return ue.splice(Pe,0,ue.splice(Ce,1)[0])};this.alterList(Q)},getRelatedContextFromMoveEvent:function(Ce){var Pe=Ce.to,Q=Ce.related,ne=this.getUnderlyingPotencialDraggableComponent(Pe);if(!ne)return{component:ne};var ue=ne.realList,ve={list:ue,component:ne};if(Pe!==Q&&ue){var we=ne.getUnderlyingVm(Q)||{};return m(m({},we),ve)}return ve},getVmIndexFromDomIndex:function(Ce){return this.componentStructure.getVmIndexFromDomIndex(Ce,this.targetDomElement)},onDragStart:function(Ce){this.context=this.getUnderlyingVm(Ce.item),Ce.item._underlying_vm_=this.clone(this.context.element),Se=Ce.item},onDragAdd:function(Ce){var Pe=Ce.item._underlying_vm_;if(Pe!==void 0){F(Ce.item);var Q=this.getVmIndexFromDomIndex(Ce.newIndex);this.spliceList(Q,0,Pe);var ne={element:Pe,newIndex:Q};this.emitChanges({added:ne})}},onDragRemove:function(Ce){if(D(this.$el,Ce.item,Ce.oldIndex),Ce.pullMode==="clone"){F(Ce.clone);return}var Pe=this.context,Q=Pe.index,ne=Pe.element;this.spliceList(Q,1);var ue={element:ne,oldIndex:Q};this.emitChanges({removed:ue})},onDragUpdate:function(Ce){F(Ce.item),D(Ce.from,Ce.item,Ce.oldIndex);var Pe=this.context.index,Q=this.getVmIndexFromDomIndex(Ce.newIndex);this.updatePosition(Pe,Q);var ne={element:this.context.element,oldIndex:Pe,newIndex:Q};this.emitChanges({moved:ne})},computeFutureIndex:function(Ce,Pe){if(!Ce.element)return 0;var Q=O(Pe.to.children).filter(function(we){return we.style.display!=="none"}),ne=Q.indexOf(Pe.related),ue=Ce.component.getVmIndexFromDomIndex(ne),ve=Q.indexOf(Se)!==-1;return ve||!Pe.willInsertAfter?ue:ue+1},onDragMove:function(Ce,Pe){var Q=this.move,ne=this.realList;if(!Q||!ne)return!0;var ue=this.getRelatedContextFromMoveEvent(Ce),ve=this.computeFutureIndex(ue,Ce),we=m(m({},this.context),{},{futureIndex:ve}),he=m(m({},Ce),{},{relatedContext:ue,draggedContext:we});return Q(he,Pe)},onDragEnd:function(){Se=null}}}),Ue=De;a.default=Ue},fb6a:function(o,a,i){var r=i("23e7"),l=i("861d"),c=i("e8b5"),u=i("23cb"),d=i("50c4"),m=i("fc6a"),f=i("8418"),g=i("b622"),T=i("1dde"),S=i("ae40"),_=T("slice"),E=S("slice",{ACCESSORS:!0,0:0,1:2}),b=g("species"),I=[].slice,R=Math.max;r({target:"Array",proto:!0,forced:!_||!E},{slice:function(x,L){var F=m(this),D=d(F.length),V=u(x,D),B=u(L===void 0?D:L,D),P,k,U;if(c(F)&&(P=F.constructor,typeof P=="function"&&(P===Array||c(P.prototype))?P=void 0:l(P)&&(P=P[b],P===null&&(P=void 0)),P===Array||P===void 0))return I.call(F,V,B);for(k=new(P===void 0?Array:P)(R(B-V,0)),U=0;V<B;V++,U++)V in F&&f(k,U,F[V]);return k.length=U,k}})},fc6a:function(o,a,i){var r=i("44ad"),l=i("1d80");o.exports=function(c){return r(l(c))}},fdbc:function(o,a){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(o,a,i){var r=i("4930");o.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(ky);var gK=ky.exports;const Pc=Nf(gK),_K={components:{Draggable:Pc},props:{preChatFields:{type:Array,default:()=>[]}},emits:["update","dragEnd"],data(){return{preChatFieldOptions:this.preChatFields}},watch:{preChatFields(){this.preChatFieldOptions=this.preChatFields}},methods:{isFieldEditable(e){return!e.enabled},handlePreChatFieldOptions(e,t,n){this.$emit("update",e,t,n)},onDragEnd(){this.$emit("dragEnd",this.preChatFieldOptions)}}},vK={class:"pre-chat-field"},bK={class:"pre-chat-field"},EK={class:"pre-chat-field"},TK=["onUpdate:modelValue","value","disabled","onClick"],yK=["onUpdate:modelValue","disabled"],SK=["onUpdate:modelValue","disabled"];function AK(e,t,n,s,o,a){const i=M("fluent-icon"),r=M("woot-switch"),l=M("Draggable");return p(),$(l,{modelValue:o.preChatFieldOptions,"onUpdate:modelValue":t[0]||(t[0]=c=>o.preChatFieldOptions=c),tag:"tbody","item-key":"name",onEnd:a.onDragEnd},{item:K(({element:c})=>[h("tr",null,[h("td",vK,[y(i,{icon:"drag"})]),h("td",bK,[y(r,{"model-value":c.enabled,onInput:u=>a.handlePreChatFieldOptions(u,"enabled",c)},null,8,["model-value","onInput"])]),h("td",{class:se(["pre-chat-field",{"disabled-text":!c.enabled}])},A(c.name),3),h("td",{class:se(["pre-chat-field",{"disabled-text":!c.enabled}])},A(c.type),3),h("td",EK,[re(h("input",{"onUpdate:modelValue":u=>c.required=u,type:"checkbox",value:`${c.name}-required`,disabled:!c.enabled,onClick:u=>a.handlePreChatFieldOptions(u,"required",c)},null,8,TK),[[pn,c.required]])]),h("td",{class:se(["pre-chat-field",{"disabled-text":!c.enabled}])},[re(h("input",{"onUpdate:modelValue":u=>c.label=u,type:"text",disabled:a.isFieldEditable(c)},null,8,yK),[[mt,c.label]])],2),h("td",{class:se(["pre-chat-field",{"disabled-text":!c.enabled}])},[re(h("input",{"onUpdate:modelValue":u=>c.placeholder=u,type:"text",disabled:a.isFieldEditable(c)},null,8,SK),[[mt,c.placeholder]])],2)])]),_:1},8,["modelValue","onEnd"])}const IK=Ae(_K,[["render",AK],["__scopeId","data-v-aea62291"]]),vd=Object.fromEntries(Object.entries(uC).filter(([e])=>e.includes("en"))).en,CK={emailAddress:{key:"EMAIL_ADDRESS",label:"Email Id",placeholder:"Please enter your email address"},fullName:{key:"FULL_NAME",label:"Full Name",placeholder:"Please enter your full name"},phoneNumber:{key:"PHONE_NUMBER",label:"Phone Number",placeholder:"Please enter your phone number"}},OK=({key:e,label:t})=>vd.PRE_CHAT_FORM.FIELDS[e]?vd.PRE_CHAT_FORM.FIELDS[e].LABEL:t,NK=({key:e,placeholder:t})=>vd.PRE_CHAT_FORM.FIELDS[e]?vd.PRE_CHAT_FORM.FIELDS[e].PLACEHOLDER:t,wK=({standardFields:e,customAttributes:t})=>{let n=[];const{pre_chat_fields:s}=e;return t.forEach(o=>{s.find(i=>i.name===o.attribute_key)||n.push({label:o.attribute_display_name,placeholder:o.attribute_display_name,name:o.attribute_key,type:o.attribute_display_type,values:o.attribute_values,field_type:o.attribute_model,regex_pattern:o.regex_pattern,regex_cue:o.regex_cue,required:!1,enabled:!1})}),n},RK=({preChatFields:e})=>e.map(t=>({...t,label:OK({key:t.name,label:t.label?t.label:t.name}),placeholder:NK({key:t.name,placeholder:t.placeholder?t.placeholder:t.name})})),xK=({preChatFormOptions:e={},customAttributes:t=[]})=>{const{pre_chat_message:n,pre_chat_fields:s}=e;let o={},a={};const i=RK({preChatFields:s});return o=wK({standardFields:{pre_chat_fields:i},customAttributes:t}),a=[...i,...o],{pre_chat_message:n,pre_chat_fields:a}},$K={components:{PreChatFields:IK,WootMessageEditor:Ko,NextButton:oe},props:{inbox:{type:Object,default:()=>({})}},data(){return{preChatFormEnabled:!1,preChatMessage:"",preChatFields:[]}},computed:{...lt({uiFlags:"inboxes/getUIFlags",customAttributes:"attributes/getAttributes"}),preChatFieldOptions(){const{pre_chat_form_options:e}=this.inbox;return xK({preChatFormOptions:e,customAttributes:this.customAttributes})}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{pre_chat_form_enabled:e}=this.inbox;this.preChatFormEnabled=e;const{pre_chat_message:t,pre_chat_fields:n}=this.preChatFieldOptions||{};this.preChatMessage=t,this.preChatFields=n},isFieldEditable(e){return!!CK[e.name]||!e.enabled},handlePreChatFieldOptions(e,t,n){this.preChatFields.forEach((s,o)=>{s.name===n.name&&(this.preChatFields[o][t]=!n[t])})},changePreChatFieldFieldsOrder(e){this.preChatFields=e},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,channel:{pre_chat_form_enabled:this.preChatFormEnabled,pre_chat_form_options:{pre_chat_message:this.preChatMessage,pre_chat_fields:this.preChatFields}}};await this.$store.dispatch("inboxes/updateInbox",e),ce(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ce(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}}},MK={class:"mx-8 my-2 text-base"},LK={class:"mx-0 mt-6 mb-3"},kK={class:"w-1/4"},DK={value:!0},PK={value:!1},BK={key:0},FK={class:"mt-4"},UK={class:"table w-full table-striped woot-table"},GK={class:"thead-dark"},VK={scope:"col"},HK={scope:"col"},WK={scope:"col"},zK={scope:"col"},jK={scope:"col"},KK={class:"w-auto my-4"};function YK(e,t,n,s,o,a){const i=M("WootMessageEditor"),r=M("PreChatFields"),l=M("NextButton");return p(),v("div",MK,[h("div",LK,A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.DESCRIPTION")),1),h("form",{class:"flex flex-col",onSubmit:t[2]||(t[2]=Fe((...c)=>a.updateInbox&&a.updateInbox(...c),["prevent"]))},[h("label",kK,[Re(A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>o.preChatFormEnabled=c)},[h("option",DK,A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.ENABLED")),1),h("option",PK,A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.DISABLED")),1)],512),[[gn,o.preChatFormEnabled]])]),o.preChatFormEnabled?(p(),v("div",BK,[h("div",null,[h("label",null,A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.LABEL")),1),y(i,{modelValue:o.preChatMessage,"onUpdate:modelValue":t[1]||(t[1]=c=>o.preChatMessage=c),class:"message-editor",placeholder:e.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),h("div",FK,[h("label",null,A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS")),1),h("table",UK,[h("thead",GK,[h("tr",null,[t[3]||(t[3]=h("th",{scope:"col"},null,-1)),t[4]||(t[4]=h("th",{scope:"col"},null,-1)),h("th",VK,A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.KEY")),1),h("th",HK,A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.TYPE")),1),h("th",WK,A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.REQUIRED")),1),h("th",zK,A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.LABEL")),1),h("th",jK,A(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.PLACE_HOLDER")),1)])]),y(r,{"pre-chat-fields":o.preChatFields,onUpdate:a.handlePreChatFieldOptions,onDragEnd:a.changePreChatFieldFieldsOrder},null,8,["pre-chat-fields","onUpdate","onDragEnd"])])])])):w("",!0),h("div",KK,[y(l,{type:"submit",label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE_PRE_CHAT_FORM_SETTINGS"),"is-loading":e.uiFlags.isUpdating},null,8,["label","is-loading"])])],32)])}const XK=Ae($K,[["render",YK],["__scopeId","data-v-d09dd20e"]]),du=dC(30),qK={components:{},props:{dayName:{type:String,required:!0},timeSlot:{type:Object,default:()=>({from:"",to:""})}},emits:["update"],computed:{fromTimeSlots(){return du},toTimeSlots(){return du.filter(e=>e!=="12:00 AM")},isDayEnabled:{get(){return!!(this.timeSlot.from&&this.timeSlot.to)},set(e){const t=e?{...this.timeSlot,from:du[0],to:du[16],valid:!0,openAllDay:!1}:{...this.timeSlot,from:"",to:"",valid:!1,openAllDay:!1};this.$emit("update",t)}},fromTime:{get(){return this.timeSlot.from},set(e){const t=$l(e,"hh:mm a",new Date),n=Pu(this.toDate,t)/60>0;this.$emit("update",{...this.timeSlot,from:e,valid:n})}},toTime:{get(){return this.timeSlot.to},set(e){const t=$l(e,"hh:mm a",new Date);if(e==="12:00 AM")this.$emit("update",{...this.timeSlot,to:e,valid:!0});else{const n=Pu(t,this.fromDate)/60>0;this.$emit("update",{...this.timeSlot,to:e,valid:n})}}},fromDate(){return $l(this.fromTime,"hh:mm a",new Date)},toDate(){return $l(this.toTime,"hh:mm a",new Date)},totalHours(){return this.timeSlot.openAllDay?24:Pu(this.toDate,this.fromDate)/60},hasError(){return!this.timeSlot.valid},isOpenAllDay:{get(){return this.timeSlot.openAllDay},set(e){e?this.$emit("update",{...this.timeSlot,from:"12:00 AM",to:"11:59 PM",valid:!0,openAllDay:e}):this.$emit("update",{...this.timeSlot,from:"09:00 AM",to:"05:00 PM",valid:!0,openAllDay:e})}}}},ZK={class:"day-wrap flex py-2 gap-1 items-center px-0 min-h-[3rem] box-content border-b border-solid border-n-weak"},QK={class:"checkbox-wrap flex items-center"},JK=["title"],eY={class:"day flex items-center py-0 px-3 text-sm font-medium flex-shrink-0 min-w-28"},tY={key:0,class:"flex flex-col flex-shrink-0 flex-grow relative"},nY={class:"flex items-center flex-shrink-0 flex-grow"},sY={class:"checkbox-wrap flex items-center open-all-day mr-6"},aY=["title"],oY={class:"text-sm font-medium ml-1"},iY={class:"separator-icon flex items-center py-0 px-3"},rY={key:0,class:"date-error pt-1"},lY={class:"error text-xs text-red-300 dark:text-red-500"},cY={key:1,class:"flex items-center flex-shrink-0 flex-grow text-sm text-slate-500 dark:text-slate-300"},uY={key:0,class:"label bg-n-brand/10 dark:bg-n-brand/30 text-n-blue-text text-xs inline-block px-2 py-1 rounded-lg cursor-default whitespace-nowrap"};function dY(e,t,n,s,o,a){const i=M("multiselect"),r=M("fluent-icon");return p(),v("div",ZK,[h("div",QK,[re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.isDayEnabled=l),name:"enable-day",class:"m-0",type:"checkbox",title:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.ENABLE")},null,8,JK),[[pn,a.isDayEnabled]])]),h("div",eY,[h("span",null,A(n.dayName),1)]),a.isDayEnabled?(p(),v("div",tY,[h("div",nY,[h("div",sY,[re(h("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>a.isOpenAllDay=l),name:"enable-open-all-day",class:"enable-checkbox text-sm font-medium",type:"checkbox",title:e.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")},null,8,aY),[[pn,a.isOpenAllDay]]),h("span",oY,A(e.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")),1)]),y(i,{modelValue:a.fromTime,"onUpdate:modelValue":t[2]||(t[2]=l=>a.fromTime=l),options:a.fromTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:a.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"]),h("div",iY,[y(r,{icon:"subtract",type:"solid",size:"16"})]),y(i,{modelValue:a.toTime,"onUpdate:modelValue":t[3]||(t[3]=l=>a.toTime=l),options:a.toTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:a.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"])]),a.hasError?(p(),v("div",rY,[h("span",lY,A(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.VALIDATION_ERROR")),1)])):w("",!0)])):(p(),v("div",cY,[h("span",null,A(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.UNAVAILABLE")),1)])),h("div",null,[a.isDayEnabled&&!a.hasError?(p(),v("span",uY,A(a.totalHours)+" "+A(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.HOURS")),1)):w("",!0)])])}const pY=Ae(qK,[["render",dY],["__scopeId","data-v-db11b68b"]]),y1={label:"Pacific Time (US & Canada) (GMT-07:00)",value:"America/Los_Angeles"},hY={components:{SettingsSection:dr,BusinessDay:pY,NextButton:oe,WootMessageEditor:Ko},mixins:[Yo],props:{inbox:{type:Object,default:()=>({})}},data(){return{isBusinessHoursEnabled:!1,unavailableMessage:"",timeZone:y1,dayNames:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeSlots:[...L_]}},computed:{...lt({uiFlags:"inboxes/getUIFlags"}),hasError(){return this.isBusinessHoursEnabled?this.timeSlots.filter(e=>e.from&&!e.valid).length>0:!1},timeZones(){return[...hC()]},isRichEditorEnabled(){return!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{working_hours_enabled:e=!1,out_of_office_message:t,working_hours:n=[],timezone:s}=this.inbox,o=M_(n).length?M_(n):L_;this.isBusinessHoursEnabled=e,this.unavailableMessage=t||"",this.timeSlots=o,this.timeZone=this.timeZones.find(a=>s===a.value)||y1},onSlotUpdate(e,t){this.timeSlots=this.timeSlots.map(n=>n.day===e?t:n)},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,working_hours_enabled:this.isBusinessHoursEnabled,out_of_office_message:this.unavailableMessage,working_hours:pC(this.timeSlots),timezone:this.timeZone.value,channel:{}};await this.$store.dispatch("inboxes/updateInbox",e),ce(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(e){ce(e.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}}}},mY={class:"mx-8"},fY={for:"toggle-business-hours",class:"toggle-input-wrap"},gY={class:"mb-4 text-slate-700 dark:text-slate-300"},_Y={key:0,class:"mb-6"},vY={class:"unavailable-input-wrap"},bY={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 bg-n-alpha-black2"},EY={class:"timezone-input-wrap"};function TY(e,t,n,s,o,a){const i=M("WootMessageEditor"),r=M("multiselect"),l=M("BusinessDay"),c=M("NextButton"),u=M("SettingsSection");return p(),v("div",mY,[y(u,{title:e.$t("INBOX_MGMT.BUSINESS_HOURS.TITLE"),"sub-title":e.$t("INBOX_MGMT.BUSINESS_HOURS.SUBTITLE")},{default:K(()=>[h("form",{onSubmit:t[4]||(t[4]=Fe((...d)=>a.updateInbox&&a.updateInbox(...d),["prevent"]))},[h("label",fY,[re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.isBusinessHoursEnabled=d),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-business-hours"},null,512),[[pn,o.isBusinessHoursEnabled]]),Re(" "+A(e.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_AVAILABILITY")),1)]),h("p",gY,A(e.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_HELP")),1),o.isBusinessHoursEnabled?(p(),v("div",_Y,[h("div",null,[h("label",vY,A(e.$t("INBOX_MGMT.BUSINESS_HOURS.UNAVAILABLE_MESSAGE_LABEL")),1),a.isRichEditorEnabled?(p(),v("div",bY,[y(i,{modelValue:o.unavailableMessage,"onUpdate:modelValue":t[1]||(t[1]=d=>o.unavailableMessage=d),"enable-variables":"","is-format-mode":"","min-height":4},null,8,["modelValue"])])):re((p(),v("textarea",{key:1,"onUpdate:modelValue":t[2]||(t[2]=d=>o.unavailableMessage=d),type:"text"},null,512)),[[mt,o.unavailableMessage]])]),h("div",EY,[h("label",null,A(e.$t("INBOX_MGMT.BUSINESS_HOURS.TIMEZONE_LABEL")),1),y(r,{modelValue:o.timeZone,"onUpdate:modelValue":t[3]||(t[3]=d=>o.timeZone=d),options:a.timeZones,"deselect-label":"","select-label":"","selected-label":"","track-by":"value",label:"label","close-on-select":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1},null,8,["modelValue","options","placeholder"])]),h("label",null,A(e.$t("INBOX_MGMT.BUSINESS_HOURS.WEEKLY_TITLE")),1),(p(!0),v(pe,null,Ne(o.timeSlots,d=>(p(),$(l,{key:d.day,"day-name":o.dayNames[d.day],"time-slot":d,onUpdate:m=>a.onSlotUpdate(d.day,m)},null,8,["day-name","time-slot","onUpdate"]))),128))])):w("",!0),y(c,{type:"submit",label:e.$t("INBOX_MGMT.BUSINESS_HOURS.UPDATE"),"is-loading":e.uiFlags.isUpdating,disabled:a.hasError},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const yY=Ae(hY,[["render",TY],["__scopeId","data-v-e1e92c43"]]),SY={components:{SettingsSection:dr,NextButton:oe},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:bt()}},data(){return{isIMAPEnabled:!1,address:"",port:"",login:"",password:"",isSSLEnabled:!0}},validations:{address:{required:Ye},port:{required:Ye,minLength:Qt(2)},login:{required:Ye},password:{required:Ye}},computed:{...lt({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{imap_enabled:e,imap_address:t,imap_port:n,imap_login:s,imap_password:o,imap_enable_ssl:a}=this.inbox;this.isIMAPEnabled=e,this.address=t,this.port=n,this.login=s,this.password=o,this.isSSLEnabled=a},async updateInbox(){try{this.loading=!0;let e={id:this.inbox.id,formData:!1,channel:{imap_enabled:this.isIMAPEnabled,imap_address:this.address,imap_port:this.port,imap_login:this.login,imap_password:this.password,imap_enable_ssl:this.isSSLEnabled}};this.isIMAPEnabled||(e.channel.smtp_enabled=!1),await this.$store.dispatch("inboxes/updateInboxIMAP",e),ce(this.$t("INBOX_MGMT.IMAP.EDIT.SUCCESS_MESSAGE"))}catch(e){ce(e.message)}}}},AY={class:"mx-8"},IY={for:"toggle-imap-enable"},CY={key:0,class:"mb-6"},OY={for:"toggle-enable-ssl"};function NY(e,t,n,s,o,a){const i=M("woot-input"),r=M("NextButton"),l=M("SettingsSection");return p(),v("div",AY,[y(l,{title:e.$t("INBOX_MGMT.IMAP.TITLE"),"sub-title":e.$t("INBOX_MGMT.IMAP.SUBTITLE"),note:e.$t("INBOX_MGMT.IMAP.NOTE_TEXT")},{default:K(()=>[h("form",{onSubmit:t[6]||(t[6]=Fe((...c)=>a.updateInbox&&a.updateInbox(...c),["prevent"]))},[h("label",IY,[re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>o.isIMAPEnabled=c),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-imap-enable"},null,512),[[pn,o.isIMAPEnabled]]),Re(" "+A(e.$t("INBOX_MGMT.IMAP.TOGGLE_AVAILABILITY")),1)]),h("p",null,A(e.$t("INBOX_MGMT.IMAP.TOGGLE_HELP")),1),o.isIMAPEnabled?(p(),v("div",CY,[y(i,{modelValue:o.address,"onUpdate:modelValue":t[1]||(t[1]=c=>o.address=c),class:se([{error:s.v$.address.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.ADDRESS.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.ADDRESS.PLACE_HOLDER"),onBlur:s.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),y(i,{modelValue:o.port,"onUpdate:modelValue":t[2]||(t[2]=c=>o.port=c),type:"number",class:se([{error:s.v$.port.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.PORT.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.PORT.PLACE_HOLDER"),onBlur:s.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),y(i,{modelValue:o.login,"onUpdate:modelValue":t[3]||(t[3]=c=>o.login=c),class:se([{error:s.v$.login.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.LOGIN.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.LOGIN.PLACE_HOLDER"),onBlur:s.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),y(i,{modelValue:o.password,"onUpdate:modelValue":t[4]||(t[4]=c=>o.password=c),class:se([{error:s.v$.password.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.PASSWORD.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:s.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),h("label",OY,[re(h("input",{"onUpdate:modelValue":t[5]||(t[5]=c=>o.isSSLEnabled=c),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-enable-ssl"},null,512),[[pn,o.isSSLEnabled]]),Re(" "+A(e.$t("INBOX_MGMT.IMAP.ENABLE_SSL")),1)])])):w("",!0),y(r,{type:"submit",label:e.$t("INBOX_MGMT.IMAP.UPDATE"),"is-loading":e.uiFlags.isUpdatingIMAP,disabled:s.v$.$invalid&&o.isIMAPEnabled||e.uiFlags.isUpdatingIMAP},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title","note"])])}const wY=Ae(SY,[["render",NY]]),RY={props:{name:{type:String,default:"string"},label:{type:String,default:""},items:{type:Array,default:()=>[]},action:{type:Function,default:()=>{}}}},xY={class:"radio-group-label"},$Y={class:"radio-group"},MY={class:"radio-group-item-label"},LY=["name","checked","onChange"];function kY(e,t,n,s,o,a){return p(),v("div",null,[h("label",xY,A(n.label),1),h("div",$Y,[(p(!0),v(pe,null,Ne(n.items,i=>(p(),v("div",{key:i.id,class:"radio-group-item"},[h("label",MY,[h("input",{class:"radio-input",name:`${n.name} -radio-input`,type:"radio",checked:i.checked,onChange:r=>n.action({...i,checked:!0})},null,40,LY),h("span",null,A(i.title),1)])]))),128))])])}const xg=Ae(RY,[["render",kY],["__scopeId","data-v-f15d6dd7"]]),DY={props:{label:{type:String,default:""},options:{type:Array,default:()=>[]},selected:{type:String,default:""},action:{type:Function,default:()=>{}}},data(){return{value:this.selected}}},PY={for:"dropdown-select"};function BY(e,t,n,s,o,a){return p(),v("div",null,[h("label",PY,A(n.label),1),re(h("select",{id:"dropdown-select","onUpdate:modelValue":t[0]||(t[0]=i=>o.value=i),name:"dropdown-select",onChange:t[1]||(t[1]=i=>n.action(o.value))},[(p(!0),v(pe,null,Ne(n.options,i=>(p(),v("option",{key:i.key},A(i.value),1))),128))],544),[[gn,o.value]])])}const FY=Ae(DY,[["render",BY]]),UY={components:{SettingsSection:dr,InputRadioGroup:xg,SingleSelectDropdown:FY,NextButton:oe},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:bt()}},data(){return{isSMTPEnabled:!1,address:"",port:"",login:"",password:"",domain:"",ssl:!1,starttls:!0,openSSLVerifyMode:"none",authMechanism:"login",encryptionProtocols:[{id:"ssl",title:"SSL/TLS",checked:!1},{id:"starttls",title:"STARTTLS",checked:!0}],openSSLVerifyModes:[{key:1,value:"none"},{key:2,value:"peer"},{key:3,value:"client_once"},{key:4,value:"fail_if_no_peer_cert"}],authMechanisms:[{key:1,value:"plain"},{key:2,value:"login"},{key:3,value:"cram-md5"},{key:4,value:"xoauth"},{key:5,value:"xoauth2"},{key:6,value:"ntlm"},{key:7,value:"gssapi"}]}},validations:{address:{required:Ye},port:{required:Ye,minLength:Qt(2)},login:{required:Ye},password:{required:Ye},domain:{required:Ye}},computed:{...lt({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{smtp_enabled:e,smtp_address:t,smtp_port:n,smtp_login:s,smtp_password:o,smtp_domain:a,smtp_enable_starttls_auto:i,smtp_enable_ssl_tls:r,smtp_openssl_verify_mode:l,smtp_authentication:c}=this.inbox;this.isSMTPEnabled=e,this.address=t,this.port=n,this.login=s,this.password=o,this.domain=a,this.starttls=i,this.ssl=r,this.openSSLVerifyMode=l,this.authMechanism=c,this.encryptionProtocols=[{id:"ssl",title:"SSL/TLS",checked:r},{id:"starttls",title:"STARTTLS",checked:i}]},handleEncryptionChange(e){e.id==="ssl"?(this.ssl=!0,this.starttls=!1):(this.ssl=!1,this.starttls=!0)},handleSSLModeChange(e){this.openSSLVerifyMode=e},handleAuthMechanismChange(e){this.authMechanism=e},async updateInbox(){try{const e={id:this.inbox.id,channel:{smtp_enabled:this.isSMTPEnabled,smtp_address:this.address,smtp_port:this.port,smtp_login:this.login,smtp_password:this.password,smtp_domain:this.domain,smtp_enable_ssl_tls:this.ssl,smtp_enable_starttls_auto:this.starttls,smtp_openssl_verify_mode:this.openSSLVerifyMode,smtp_authentication:this.authMechanism}};await this.$store.dispatch("inboxes/updateInboxSMTP",e),ce(this.$t("INBOX_MGMT.SMTP.EDIT.SUCCESS_MESSAGE"))}catch{ce(this.$t("INBOX_MGMT.SMTP.EDIT.ERROR_MESSAGE"))}}}},GY={class:"mx-8"},VY={for:"toggle-enable-smtp"},HY={key:0,class:"mb-6"};function WY(e,t,n,s,o,a){const i=M("woot-input"),r=M("InputRadioGroup"),l=M("SingleSelectDropdown"),c=M("NextButton"),u=M("SettingsSection");return p(),v("div",GY,[y(u,{title:e.$t("INBOX_MGMT.SMTP.TITLE"),"sub-title":e.$t("INBOX_MGMT.SMTP.SUBTITLE")},{default:K(()=>[h("form",{onSubmit:t[6]||(t[6]=Fe((...d)=>a.updateInbox&&a.updateInbox(...d),["prevent"]))},[h("label",VY,[re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.isSMTPEnabled=d),type:"checkbox",name:"toggle-enable-smtp"},null,512),[[pn,o.isSMTPEnabled]]),Re(" "+A(e.$t("INBOX_MGMT.SMTP.TOGGLE_AVAILABILITY")),1)]),h("p",null,A(e.$t("INBOX_MGMT.SMTP.TOGGLE_HELP")),1),o.isSMTPEnabled?(p(),v("div",HY,[y(i,{modelValue:o.address,"onUpdate:modelValue":t[1]||(t[1]=d=>o.address=d),class:se([{error:s.v$.address.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.ADDRESS.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.ADDRESS.PLACE_HOLDER"),onBlur:s.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),y(i,{modelValue:o.port,"onUpdate:modelValue":t[2]||(t[2]=d=>o.port=d),type:"number",class:se([{error:s.v$.port.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.PORT.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.PORT.PLACE_HOLDER"),onBlur:s.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),y(i,{modelValue:o.login,"onUpdate:modelValue":t[3]||(t[3]=d=>o.login=d),class:se([{error:s.v$.login.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.LOGIN.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.LOGIN.PLACE_HOLDER"),onBlur:s.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),y(i,{modelValue:o.password,"onUpdate:modelValue":t[4]||(t[4]=d=>o.password=d),class:se([{error:s.v$.password.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.PASSWORD.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:s.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),y(i,{modelValue:o.domain,"onUpdate:modelValue":t[5]||(t[5]=d=>o.domain=d),class:se([{error:s.v$.domain.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.DOMAIN.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.DOMAIN.PLACE_HOLDER"),onBlur:s.v$.domain.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),y(r,{label:e.$t("INBOX_MGMT.SMTP.ENCRYPTION"),items:o.encryptionProtocols,action:a.handleEncryptionChange},null,8,["label","items","action"]),y(l,{class:"max-w-[75%] w-full",label:e.$t("INBOX_MGMT.SMTP.OPEN_SSL_VERIFY_MODE"),selected:o.openSSLVerifyMode,options:o.openSSLVerifyModes,action:a.handleSSLModeChange},null,8,["label","selected","options","action"]),y(l,{class:"max-w-[75%] w-full",label:e.$t("INBOX_MGMT.SMTP.AUTH_MECHANISM"),selected:o.authMechanism,options:o.authMechanisms,action:a.handleAuthMechanismChange},null,8,["label","selected","options","action"])])):w("",!0),y(c,{type:"submit",label:e.$t("INBOX_MGMT.SMTP.UPDATE"),"is-loading":e.uiFlags.isUpdatingSMTP,disabled:s.v$.$invalid&&o.isSMTPEnabled||e.uiFlags.isUpdatingSMTP},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const zY=Ae(UY,[["render",WY]]),jY={components:{SettingsSection:dr,ImapSettings:wY,SmtpSettings:zY,NextButton:oe},mixins:[Yo],props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:bt()}},data(){return{hmacMandatory:!1,whatsAppInboxAPIKey:""}},validations:{whatsAppInboxAPIKey:{required:Ye}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){this.hmacMandatory=this.inbox.hmac_mandatory||!1},handleHmacFlag(){this.updateInbox()},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,channel:{hmac_mandatory:this.hmacMandatory}};await this.$store.dispatch("inboxes/updateInbox",e),ce(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ce(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},async updateWhatsAppInboxAPIKey(){try{const e={id:this.inbox.id,formData:!1,channel:{}};e.channel.provider_config={...this.inbox.provider_config,api_key:this.whatsAppInboxAPIKey},await this.$store.dispatch("inboxes/updateInbox",e),ce(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ce(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}}}},KY={key:0,class:"mx-8"},YY={key:1,class:"mx-8"},XY={key:2},qY={class:"mx-8"},ZY={target:"_blank",rel:"noopener noreferrer",href:"https://www.chatwoot.com/docs/product/channels/live-chat/sdk/identity-validation/"},QY={class:"flex items-center gap-2"},JY={for:"hmacMandatory"},eX={key:3,class:"mx-8"},tX={class:"flex items-center gap-2"},nX={for:"hmacMandatory"},sX={key:4},aX={class:"mx-8"},oX={key:5},iX={key:0,class:"mx-8"},rX={class:"flex items-center justify-between flex-1 mt-2 whatsapp-settings--content"};function lX(e,t,n,s,o,a){const i=M("woot-code"),r=M("SettingsSection"),l=M("ImapSettings"),c=M("SmtpSettings"),u=M("woot-input"),d=M("NextButton");return e.isATwilioChannel?(p(),v("div",KY,[y(r,{title:e.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")},{default:K(()=>[y(i,{script:n.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):e.isALineChannel?(p(),v("div",YY,[y(r,{title:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")},{default:K(()=>[y(i,{script:n.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):e.isAWebWidgetInbox?(p(),v("div",XY,[h("div",qY,[y(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_HEADING"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_SUB_HEAD")},{default:K(()=>[y(i,{script:n.inbox.web_widget_script,lang:"html","codepen-title":`${n.inbox.name} - Chatwoot Widget Test`,"enable-code-pen":""},null,8,["script","codepen-title"])]),_:1},8,["title","sub-title"]),y(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION")},{subTitle:K(()=>[Re(A(e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION"))+" ",1),h("a",ZY,A(e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_LINK_TO_DOCS")),1)]),default:K(()=>[y(i,{script:n.inbox.hmac_token},null,8,["script"])]),_:1},8,["title"]),y(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:K(()=>[h("div",QY,[re(h("input",{id:"hmacMandatory","onUpdate:modelValue":t[0]||(t[0]=m=>o.hmacMandatory=m),type:"checkbox",onChange:t[1]||(t[1]=(...m)=>a.handleHmacFlag&&a.handleHmacFlag(...m))},null,544),[[pn,o.hmacMandatory]]),h("label",JY,A(e.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])])):e.isAPIInbox?(p(),v("div",eX,[y(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER_SUB_TEXT")},{default:K(()=>[y(i,{script:n.inbox.inbox_identifier},null,8,["script"])]),_:1},8,["title","sub-title"]),y(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION")},{default:K(()=>[y(i,{script:n.inbox.hmac_token},null,8,["script"])]),_:1},8,["title","sub-title"]),y(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:K(()=>[h("div",tX,[re(h("input",{id:"hmacMandatory","onUpdate:modelValue":t[2]||(t[2]=m=>o.hmacMandatory=m),type:"checkbox",onChange:t[3]||(t[3]=(...m)=>a.handleHmacFlag&&a.handleHmacFlag(...m))},null,544),[[pn,o.hmacMandatory]]),h("label",nX,A(e.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])):e.isAnEmailChannel?(p(),v("div",sX,[h("div",aX,[y(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_SUB_TEXT")},{default:K(()=>[y(i,{script:n.inbox.forward_to_email},null,8,["script"])]),_:1},8,["title","sub-title"])]),y(l,{inbox:n.inbox},null,8,["inbox"]),n.inbox.imap_enabled?(p(),$(c,{key:0,inbox:n.inbox},null,8,["inbox"])):w("",!0)])):e.isAWhatsAppChannel&&!e.isATwilioChannel?(p(),v("div",oX,[n.inbox.provider_config?(p(),v("div",iX,[y(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_SUBHEADER")},{default:K(()=>[y(i,{script:n.inbox.provider_config.webhook_verify_token},null,8,["script"])]),_:1},8,["title","sub-title"]),y(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_SUBHEADER")},{default:K(()=>[y(i,{script:n.inbox.provider_config.api_key},null,8,["script"])]),_:1},8,["title","sub-title"]),y(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_SUBHEADER")},{default:K(()=>[h("div",rX,[y(u,{modelValue:o.whatsAppInboxAPIKey,"onUpdate:modelValue":t[4]||(t[4]=m=>o.whatsAppInboxAPIKey=m),type:"text",class:"flex-1 mr-2",placeholder:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_PLACEHOLDER")},null,8,["modelValue","placeholder"]),y(d,{disabled:s.v$.whatsAppInboxAPIKey.$invalid,onClick:a.updateWhatsAppInboxAPIKey},{default:K(()=>[Re(A(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])])):w("",!0)])):w("",!0)}const cX=Ae(jY,[["render",lX],["__scopeId","data-v-391bd96e"]]),uX={__name:"CSATEmojiInput",props:{selected:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,o=C(()=>n.selected?"outline-n-brand bg-n-brand/5":"outline-n-weak bg-n-alpha-black2"),a=fi,i=X(5);return(r,l)=>(p(),v("button",{class:se(["flex items-center rounded-lg transition-all duration-500 cursor-pointer outline outline-1 px-4 py-2 gap-2 min-w-56",o.value]),onClick:l[0]||(l[0]=c=>s("update",N(gi).EMOJI))},[(p(!0),v(pe,null,Ne(N(a),c=>(p(),v("div",{key:c.key,class:"rounded-full p-1 transition-transform duration-150 focus:outline-none flex items-center flex-shrink-0"},[h("span",{class:se(["text-2xl",i.value===c.value?"":"grayscale opacity-60"])},A(c.emoji),3)]))),128))],2))}},dX=["aria-label"],pX={__name:"CSATStarInput",props:{selected:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,o=C(()=>n.selected?"bg-n-brand/5 outline-n-brand":"bg-n-alpha-black2 outline-n-weak");return(a,i)=>(p(),v("button",{class:se(["flex items-center rounded-lg transition-all duration-300 cursor-pointer outline outline-1 px-4 py-2 gap-2 min-w-56",o.value]),onClick:i[0]||(i[0]=r=>s("update",N(gi).STAR))},[(p(),v(pe,null,Ne(5,r=>h("div",{key:"star-"+r,class:"rounded-full p-1 transition-transform duration-150 focus:outline-none flex items-center flex-shrink-0","aria-label":`Star ${r}`},i[1]||(i[1]=[h("i",{class:"i-ri-star-fill text-n-amber-9 text-2xl"},null,-1)]),8,dX)),64))],2))}},hX={class:"flex flex-wrap gap-6 mt-2"},mX={__name:"CSATDisplayTypeSelector",props:{selectedType:{type:String,default:gi.EMOJI}},emits:["update"],setup(e,{emit:t}){const n=e,s=t;return(o,a)=>(p(),v("div",hX,[y(uX,{selected:n.selectedType===N(gi).EMOJI,onUpdate:a[0]||(a[0]=i=>s("update",i))},null,8,["selected"]),y(pX,{selected:n.selectedType===N(gi).STAR,onUpdate:a[1]||(a[1]=i=>s("update",i))},null,8,["selected"])]))}},Hr={__name:"FilterSelect",props:hn({options:{type:Array,required:!0},hideLabel:{type:Boolean,default:!1},hideIcon:{type:Boolean,default:!1},variant:{type:String,default:"faded"},label:{type:String,default:null}},{modelValue:{type:[String,Number],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=wn(e,"modelValue"),s=X(null),o=X(null),{top:a}=ad(s),{height:i}=qf(),{height:r}=ad(o),l=C(()=>t.options.find(m=>m.value===n.value)||{}),c=C(()=>t.hideIcon?null:l.value.icon||"i-lucide-chevron-down"),u=C(()=>{const f=r.value?r.value+20:340;return i.value-a.value<f?"bottom-0":"top-0"}),d=m=>{n.value=m};return(m,f)=>(p(),$(cr,null,{trigger:K(({toggle:g})=>[We(m.$slots,"trigger",{toggle:g},()=>[y(oe,{ref_key:"triggerRef",ref:s,type:"button",sm:"",slate:"",variant:e.variant,icon:c.value,"trailing-icon":!l.value.icon,label:e.label||(e.hideLabel?null:l.value.label),onClick:g},null,8,["variant","icon","trailing-icon","label","onClick"])])]),default:K(()=>[y(ur,{ref_key:"dropdownRef",ref:o,class:se(["min-w-48 z-50",u.value]),strong:""},{default:K(()=>[y(rl,{class:"max-h-80 overflow-scroll"},{default:K(()=>[(p(!0),v(pe,null,Ne(e.options,g=>(p(),$(Ra,{key:g.value,label:g.label,icon:g.icon,onClick:T=>d(g.value)},null,8,["label","icon","onClick"]))),128))]),_:1})]),_:1},8,["class"])]),_:3}))}},fX={class:"mx-8"},gX={class:"flex justify-end"},_X={class:"grid gap-5"},vX={class:"mb-4"},bX={class:"inline-flex flex-wrap items-center gap-1.5 text-sm text-n-slate-12"},EX={class:"text-sm italic text-n-slate-11"},TX={__name:"CustomerSatisfactionPage",props:{inbox:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Me(),s=pt(),o=Oe("labels/getLabels"),a=X(!1),i=X([]),r=X(""),l=ls({csatSurveyEnabled:!1,displayType:"emoji",message:"",surveyRuleOperator:"contains"}),c=[{label:n("INBOX_MGMT.CSAT.SURVEY_RULE.OPERATOR.CONTAINS"),value:"contains"},{label:n("INBOX_MGMT.CSAT.SURVEY_RULE.OPERATOR.DOES_NOT_CONTAINS"),value:"does_not_contain"}],u=C(()=>{var E;return(E=o.value)!=null&&E.length?o.value.map(b=>({label:b.title,value:b.title})).filter(b=>!i.value.includes(b.value)):[]}),d=()=>{if(!t.inbox)return;const{csat_survey_enabled:E,csat_config:b}=t.inbox;if(l.csatSurveyEnabled=E||!1,!b)return;const{display_type:I=gi.EMOJI,message:R="",survey_rules:O={}}=b;l.displayType=I,l.message=R,l.surveyRuleOperator=O.operator||"contains",i.value=Array.isArray(O.values)?[...O.values]:[]};dt(()=>{var E;d(),(E=o.value)!=null&&E.length||s.dispatch("labels/get")}),ct(()=>t.inbox,d,{immediate:!0});const m=E=>{!E||i.value.includes(E)||i.value.push(E)},f=E=>{l.displayType=E},g=E=>{l.surveyRuleOperator=E},T=E=>{const b=i.value.indexOf(E);b!==-1&&i.value.splice(b,1)},S=async E=>{const b={id:t.inbox.id,formData:!1,...E};return s.dispatch("inboxes/updateInbox",b)},_=async()=>{try{a.value=!0;const E={display_type:l.displayType,message:l.message,survey_rules:{operator:l.surveyRuleOperator,values:i.value}};await S({csat_survey_enabled:l.csatSurveyEnabled,csat_config:E}),ce(n("INBOX_MGMT.CSAT.API.SUCCESS_MESSAGE"))}catch{ce(n("INBOX_MGMT.CSAT.API.ERROR_MESSAGE"))}finally{a.value=!1}};return(E,b)=>(p(),v("div",fX,[y(ol,{title:E.$t("INBOX_MGMT.CSAT.TITLE"),description:E.$t("INBOX_MGMT.CSAT.SUBTITLE")},{headerActions:K(()=>[h("div",gX,[y(fc,{modelValue:l.csatSurveyEnabled,"onUpdate:modelValue":b[0]||(b[0]=I=>l.csatSurveyEnabled=I)},null,8,["modelValue"])])]),default:K(()=>[h("div",_X,[y(_i,{label:E.$t("INBOX_MGMT.CSAT.DISPLAY_TYPE.LABEL"),name:"display_type"},{default:K(()=>[y(mX,{"selected-type":l.displayType,onUpdate:f},null,8,["selected-type"])]),_:1},8,["label"]),y(_i,{label:E.$t("INBOX_MGMT.CSAT.MESSAGE.LABEL"),name:"message"},{default:K(()=>[y(_a,{modelValue:l.message,"onUpdate:modelValue":b[1]||(b[1]=I=>l.message=I),placeholder:E.$t("INBOX_MGMT.CSAT.MESSAGE.PLACEHOLDER"),"max-length":200,class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),y(_i,{label:E.$t("INBOX_MGMT.CSAT.SURVEY_RULE.LABEL"),name:"survey_rule"},{default:K(()=>[h("div",vX,[h("span",bX,[Re(A(E.$t("INBOX_MGMT.CSAT.SURVEY_RULE.DESCRIPTION_PREFIX"))+" ",1),y(Hr,{modelValue:l.surveyRuleOperator,"onUpdate:modelValue":[b[2]||(b[2]=I=>l.surveyRuleOperator=I),g],variant:"faded",options:c,class:"inline-flex shrink-0"},null,8,["modelValue"]),Re(" "+A(E.$t("INBOX_MGMT.CSAT.SURVEY_RULE.DESCRIPTION_SUFFIX"))+" ",1),(p(!0),v(pe,null,Ne(i.value,I=>(p(),$(oe,{key:I,sm:"",faded:"",slate:"","trailing-icon":"",label:I,icon:"i-lucide-x",class:"inline-flex shrink-0",onClick:R=>T(I)},null,8,["label","onClick"]))),128)),y(Hr,{modelValue:r.value,"onUpdate:modelValue":[b[3]||(b[3]=I=>r.value=I),m],options:u.value,label:E.$t("INBOX_MGMT.CSAT.SURVEY_RULE.SELECT_PLACEHOLDER"),"hide-label":"",variant:"faded",class:"inline-flex shrink-0"},null,8,["modelValue","options","label"])])])]),_:1},8,["label"]),h("p",EX,A(E.$t("INBOX_MGMT.CSAT.NOTE")),1),h("div",null,[y(oe,{type:"submit",label:E.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":a.value,onClick:_},null,8,["label","is-loading"])])])]),_:1},8,["title","description"])]))}},yX={components:{SettingsSection:dr,NextButton:oe},props:{inbox:{type:Object,default:()=>({})}},setup(){const{isEnterprise:e}=Yd();return{v$:bt(),isEnterprise:e}},data(){return{selectedAgents:[],isAgentListUpdating:!1,enableAutoAssignment:!1,maxAssignmentLimit:null}},computed:{...lt({agentList:"agents/getAgents"}),maxAssignmentLimitErrors(){return this.v$.maxAssignmentLimit.$error?this.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_RANGE_ERROR"):""}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){var e,t;this.enableAutoAssignment=this.inbox.enable_auto_assignment,this.maxAssignmentLimit=((t=(e=this.inbox)==null?void 0:e.auto_assignment_config)==null?void 0:t.max_assignment_limit)||null,this.fetchAttachedAgents()},async fetchAttachedAgents(){try{const e=await this.$store.dispatch("inboxMembers/get",{inboxId:this.inbox.id}),{data:{payload:t}}=e;this.selectedAgents=t}catch{}},handleEnableAutoAssignment(){this.updateInbox()},async updateAgents(){const e=this.selectedAgents.map(t=>t.id);this.isAgentListUpdating=!0;try{await this.$store.dispatch("inboxMembers/create",{inboxId:this.inbox.id,agentList:e}),ce(this.$t("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ce(this.$t("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}this.isAgentListUpdating=!1},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,enable_auto_assignment:this.enableAutoAssignment,auto_assignment_config:{max_assignment_limit:this.maxAssignmentLimit}};await this.$store.dispatch("inboxes/updateInbox",e),ce(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ce(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}},maxAssignmentLimit:{minValue:g0(1)}}},SX={class:"w-3/4 settings-item"},AX={class:"flex items-center gap-2"},IX={for:"enableAutoAssignment"},CX={class:"pb-1 text-sm not-italic text-n-slate-11"},OX={key:0,class:"max-assignment-container"},NX={class:"pb-1 text-sm not-italic text-n-slate-11"};function wX(e,t,n,s,o,a){const i=M("multiselect"),r=M("NextButton"),l=M("SettingsSection"),c=M("woot-input");return p(),v("div",null,[y(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS_SUB_TEXT")},{default:K(()=>[y(i,{modelValue:o.selectedAgents,"onUpdate:modelValue":t[0]||(t[0]=u=>o.selectedAgents=u),options:e.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:"Pick some","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),onSelect:s.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","onSelect"]),y(r,{label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":o.isAgentListUpdating,onClick:a.updateAgents},null,8,["label","is-loading","onClick"])]),_:1},8,["title","sub-title"]),y(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT_SUB_TEXT")},{default:K(()=>[h("label",SX,[h("div",AX,[re(h("input",{id:"enableAutoAssignment","onUpdate:modelValue":t[1]||(t[1]=u=>o.enableAutoAssignment=u),type:"checkbox",onChange:t[2]||(t[2]=(...u)=>a.handleEnableAutoAssignment&&a.handleEnableAutoAssignment(...u))},null,544),[[pn,o.enableAutoAssignment]]),h("label",IX,A(e.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT")),1)]),h("p",CX,A(e.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT_SUB_TEXT")),1)]),o.enableAutoAssignment&&s.isEnterprise?(p(),v("div",OX,[y(c,{modelValue:o.maxAssignmentLimit,"onUpdate:modelValue":t[3]||(t[3]=u=>o.maxAssignmentLimit=u),type:"number",class:se({error:s.v$.maxAssignmentLimit.$error}),error:a.maxAssignmentLimitErrors,label:e.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT"),onBlur:s.v$.maxAssignmentLimit.$touch},null,8,["modelValue","class","error","label","onBlur"]),h("p",NX,A(e.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_SUB_TEXT")),1),y(r,{label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),disabled:s.v$.maxAssignmentLimit.$invalid,onClick:a.updateInbox},null,8,["label","disabled","onClick"])])):w("",!0)]),_:1},8,["title","sub-title"])])}const RX=Ae(yX,[["render",wX],["__scopeId","data-v-6c0da2c9"]]),xX={class:"relative top-px"},$X={class:"flex items-center justify-start"},MX=["src"],LX={key:1},kX={class:"flex items-center justify-start gap-1"},DX={class:"text-base font-medium leading-3 text-slate-900 dark:text-white"},PX={key:0,class:"w-2 h-2 bg-green-500 rounded-full"},BX={class:"mt-1 text-xs text-slate-600 dark:text-slate-400"},FX={key:0,class:"overflow-auto max-h-60"},UX={class:"mb-2 text-2xl break-words text-n-slate-12"},GX={class:"text-sm break-words text-n-slate-11 [&_a]:!text-n-slate-11 [&_a]:underline"},VX={__name:"WidgetHead",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,{formatMessage:n}=ya(),s=C(()=>t.config.isDefaultScreen&&(t.config.welcomeHeading&&t.config.welcomeHeading.length!==0||t.config.welcomeTagLine&&t.config.welcomeTagline.length!==0));return(o,a)=>{const i=qe("dompurify-html");return p(),v("div",{class:se(["rounded-t-lg flex-shrink-0 transition-[max-height] duration-300",s.value?"bg-slate-25 dark:bg-slate-800 px-4 py-5":"bg-white dark:bg-slate-900 p-4"])},[h("div",xX,[h("div",$X,[e.config.logo?(p(),v("img",{key:0,src:e.config.logo,class:se(["mr-2 rounded-full logo",s.value?"h-12 w-12 mb-2":"h-8 w-8 mb-1"])},null,10,MX)):w("",!0),s.value?w("",!0):(p(),v("div",LX,[h("div",kX,[h("span",DX,A(e.config.websiteName),1),e.config.isOnline?(p(),v("div",PX)):w("",!0)]),h("span",BX,A(e.config.replyTime),1)]))]),s.value?(p(),v("div",FX,[h("h2",UX,A(e.config.welcomeHeading),1),re(h("p",GX,null,512),[[i,N(n)(e.config.welcomeTagline)]])])):w("",!0)])],2)}}},HX={class:"h-[calc(2rem*10)] px-4 overflow-y-auto"},WX={class:"items-end flex justify-end ml-auto mb-1 mt-0 max-w-[85%] text-right"},zX={class:"m-0"},jX={class:"bg-white shadow rounded-[1.25rem] rounded-bl-[0.25rem] px-4 py-3 inline-block text-sm text-slate-900 dark:text-white dark:bg-slate-700"},KX={class:"m-0"},YX={__name:"WidgetBody",props:{config:{type:Object,default:()=>({})}},setup(e){return(t,n)=>(p(),v("div",HX,[h("div",null,[h("div",null,[h("div",WX,[h("div",{class:"rounded-[1.25rem] rounded-br-[0.25rem] text-white dark:text-white text-sm px-4 py-3",style:Ht({background:e.config.color})},[h("p",zX,A(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.USER_MESSAGE")),1)],4)])]),h("div",jX,[h("div",null,[h("p",KX,A(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.AGENT_MESSAGE")),1)])])])]))}},XX={class:"relative flex flex-col w-full px-4"},qX={key:0,class:"p-4 bg-white rounded-md shadow-sm dark:bg-slate-700"},ZX={class:"flex items-center justify-between"},QX={class:"text-sm font-medium leading-4 text-slate-700 dark:text-slate-50"},JX={class:"mt-1 text-xs text-slate-500 dark:text-slate-100"},eq={class:"pr-2 text-xs"},tq={class:"flex items-center gap-2 px-2"},nq={__name:"WidgetFooter",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=Me(),s=X(!1),o=C(()=>t.config.isOnline?n("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.ONLINE"):n("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.OFFLINE"));return(a,i)=>(p(),v("div",XX,[e.config.isDefaultScreen?(p(),v("div",qX,[h("div",ZX,[h("div",null,[h("div",QX,A(o.value),1),h("div",JX,A(e.config.replyTime),1)]),y(Hn,{username:"C",size:"34px"})]),e.config.isDefaultScreen?(p(),v("button",{key:0,class:"inline-flex items-center justify-between px-2 py-1 mt-1 -ml-2 font-medium leading-6 bg-transparent rounded-md text-slate-800 dark:bg-transparent dark:text-slate-50 hover:bg-slate-25 dark:hover:bg-slate-800",style:Ht({color:e.config.color})},[h("span",eq,A(a.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.START_CONVERSATION_BUTTON_TEXT")),1),y(xp,{icon:"arrow-right",size:"14"})],4)):w("",!0)])):(p(),v("div",{key:1,class:se(["flex items-center h-10 bg-white rounded-md dark:bg-slate-700",{"ring-2 ring-woot-500 dark:ring-woot-400":s.value}])},[y(wf,{id:"chat-input",rows:1,placeholder:a.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.CHAT_INPUT_PLACEHOLDER"),class:"flex-grow !bg-white border-0 outline-none !outline-0 border-none h-8 text-sm dark:!bg-slate-700 pb-0 !pt-1.5 resize-none px-3 !mb-0 focus:outline-none rounded-md",onFocus:i[0]||(i[0]=r=>s.value=!0),onBlur:i[1]||(i[1]=r=>s.value=!1)},null,8,["placeholder"]),h("div",tq,[y(xp,{icon:"emoji"}),y(xp,{class:"icon-send",icon:"send"})])],2))]))}},sq="data:image/svg+xml,%3csvg%20width='66'%20height='66'%20viewBox='0%200%2066%2066'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M63%2063H32.9976C16.4591%2063%202.99996%2049.5399%202.99996%2032.9973C2.99996%2016.4601%2016.4591%203%2032.9979%203C49.5408%203%2063%2016.4601%2063%2032.9973V63Z'%20fill='white'%20stroke='white'%20stroke-width='6'/%3e%3c/svg%3e",aq={name:"Widget",components:{WidgetHead:VX,WidgetBody:YX,WidgetFooter:nq,InputRadioGroup:xg},mixins:[jo],props:{welcomeHeading:{type:String,default:""},welcomeTagline:{type:String,default:""},websiteName:{type:String,required:!0},logo:{type:String,default:""},isOnline:{type:Boolean,default:!0},replyTime:{type:String,default:""},color:{type:String,default:""},widgetBubblePosition:{type:String,default:""},widgetBubbleLauncherTitle:{type:String,default:""},widgetBubbleType:{type:String,default:""}},data(){return{widgetScreens:[{id:"default",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.DEFAULT"),checked:!0},{id:"chat",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.CHAT"),checked:!1}],isDefaultScreen:!0,isWidgetVisible:!0}},computed:{...lt({globalConfig:"globalConfig/get"}),getWidgetConfig(){return{welcomeHeading:this.welcomeHeading,welcomeTagline:this.welcomeTagline,websiteName:this.websiteName,logo:this.logo,isDefaultScreen:this.isDefaultScreen,isOnline:this.isOnline,replyTime:this.replyTimeText,color:this.color}},replyTimeText(){switch(this.replyTime){case"in_a_few_minutes":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_MINUTES");case"in_a_day":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_DAY");default:return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_HOURS")}},getBubblePositionStyle(){return{justifyContent:this.widgetBubblePosition==="left"?"start":"end"}},isBubbleExpanded(){return!this.isWidgetVisible&&this.widgetBubbleType==="expanded_bubble"},getWidgetBubbleLauncherTitle(){return this.isWidgetVisible||this.widgetBubbleType==="standard"?" ":this.widgetBubbleLauncherTitle}},methods:{handleScreenChange(e){this.isDefaultScreen=e.id==="default"},toggleWidget(){this.isWidgetVisible=!this.isWidgetVisible,this.isDefaultScreen=!0}}},oq={key:0,class:"flex flex-col items-center"},iq={key:1,class:"widget-wrapper flex flex-col justify-between rounded-lg shadow-md bg-slate-25 dark:bg-slate-800 h-[31.25rem] w-80"},rq={class:"py-2.5 flex justify-center"},lq={class:"items-center gap-0.5 text-slate-500 dark:text-slate-400 cursor-pointer flex filter grayscale opacity-90 hover:grayscale-0 hover:opacity-100 text-xxs"},cq=["src"],uq={key:0,src:sq,alt:"",draggable:"false",class:"w-6 h-6 mx-auto"},dq={key:1,class:"ltr:pl-2.5 rtl:pr-2.5"},pq={key:2,class:"relative"};function hq(e,t,n,s,o,a){const i=M("InputRadioGroup"),r=M("WidgetHead"),l=M("WidgetBody"),c=M("WidgetFooter");return p(),v("div",null,[o.isWidgetVisible?(p(),v("div",oq,[y(i,{name:"widget-screen",items:o.widgetScreens,action:a.handleScreenChange},null,8,["items","action"])])):w("",!0),o.isWidgetVisible?(p(),v("div",iq,[y(r,{config:a.getWidgetConfig},null,8,["config"]),h("div",null,[a.getWidgetConfig.isDefaultScreen?w("",!0):(p(),$(l,{key:0,config:a.getWidgetConfig},null,8,["config"])),y(c,{config:a.getWidgetConfig},null,8,["config"]),h("div",rq,[h("a",lq,[h("img",{class:"max-w-2.5 max-h-2.5",src:e.globalConfig.logoThumbnail},null,8,cq),h("span",null,A(e.useInstallationName(e.$t("INBOX_MGMT.WIDGET_BUILDER.BRANDING_TEXT"),e.globalConfig.installationName)),1)])])])])):w("",!0),h("div",{class:"flex mt-4 w-[320px]",style:Ht(a.getBubblePositionStyle)},[h("button",{class:se(["relative flex items-center justify-center rounded-full cursor-pointer",a.isBubbleExpanded?"w-auto font-medium text-base text-white dark:text-white h-12 px-4":"w-16 h-16"]),style:Ht({background:n.color}),onClick:t[0]||(t[0]=(...u)=>a.toggleWidget&&a.toggleWidget(...u))},[o.isWidgetVisible?w("",!0):(p(),v("img",uq)),a.isBubbleExpanded?(p(),v("div",dq,A(a.getWidgetBubbleLauncherTitle),1)):w("",!0),o.isWidgetVisible?(p(),v("div",pq,t[1]||(t[1]=[h("div",{class:"absolute w-0.5 h-8 rotate-45 -translate-y-1/2 bg-white"},null,-1),h("div",{class:"absolute w-0.5 h-8 -rotate-45 -translate-y-1/2 bg-white"},null,-1)]))):w("",!0)],6)],4)])}const mq=Ae(aq,[["render",hq]]),fq={components:{Widget:mq,InputRadioGroup:xg,NextButton:oe,Editor:_a},props:{inbox:{type:Object,default:()=>{}}},setup(){return{v$:bt()}},data(){return{isWidgetPreview:!0,color:"#1f93ff",websiteName:"",welcomeHeading:"",welcomeTagline:"",replyTime:"in_a_few_minutes",avatarFile:null,avatarUrl:"",widgetBubblePosition:"right",widgetBubbleLauncherTitle:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.DEFAULT"),widgetBubbleType:"standard",widgetBubblePositions:[{id:"left",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.LEFT"),checked:!1},{id:"right",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.RIGHT"),checked:!0}],widgetBubbleTypes:[{id:"standard",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.STANDARD"),checked:!0},{id:"expanded_bubble",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.EXPANDED_BUBBLE"),checked:!1}],welcomeTaglineEditorMenuOptions:Tg}},computed:{...lt({uiFlags:"inboxes/getUIFlags"}),storageKey(){return`${Na.WIDGET_BUILDER}${this.inbox.id}`},widgetScript(){let e={position:this.widgetBubblePosition,type:this.widgetBubbleType,launcherTitle:this.widgetBubbleLauncherTitle},t=this.inbox.web_widget_script;return t.substring(0,13)+this.$t("INBOX_MGMT.WIDGET_BUILDER.SCRIPT_SETTINGS",{options:JSON.stringify(e)})+t.substring(13)},getWidgetViewOptions(){return[{id:"preview",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.PREVIEW"),checked:!0},{id:"script",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.SCRIPT"),checked:!1}]},getReplyTimeOptions(){return[{key:"in_a_few_minutes",value:"in_a_few_minutes",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_MINUTES")},{key:"in_a_few_hours",value:"in_a_few_hours",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_HOURS")},{key:"in_a_day",value:"in_a_day",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_DAY")}]},websiteNameValidationErrorMsg(){return this.v$.websiteName.$error?this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.ERROR"):""}},mounted(){this.setDefaults()},validations:{websiteName:{required:Ye}},methods:{setDefaults(){const{name:e,welcome_title:t,welcome_tagline:n,widget_color:s,reply_time:o,avatar_url:a}=this.inbox;this.websiteName=e,this.welcomeHeading=t,this.welcomeTagline=n,this.color=s,this.replyTime=o,this.avatarUrl=a;const i=this.getSavedInboxInformation();i&&(this.widgetBubblePositions=this.widgetBubblePositions.map(r=>(r.id===i.position&&(r.checked=!0,this.widgetBubblePosition=r.id),r)),this.widgetBubbleTypes=this.widgetBubbleTypes.map(r=>(r.id===i.type&&(r.checked=!0,this.widgetBubbleType=r.id),r)),this.widgetBubbleLauncherTitle=i.launcherTitle||"Chat with us")},handleWidgetBubblePositionChange(e){this.widgetBubblePosition=e.id},handleWidgetBubbleTypeChange(e){this.widgetBubbleType=e.id},handleWidgetViewChange(e){this.isWidgetPreview=e.id==="preview"},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.inbox.id),this.avatarFile=null,this.avatarUrl="",ce(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.SUCCESS_MESSAGE"))}catch(e){ce(e.message?e.message:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.ERROR_MESSAGE"))}},async updateWidget(){const e={position:this.widgetBubblePosition,launcherTitle:this.widgetBubbleLauncherTitle,type:this.widgetBubbleType};va.set(this.storageKey,e);try{const t={id:this.inbox.id,name:this.websiteName,channel:{widget_color:this.color,welcome_title:this.welcomeHeading,welcome_tagline:this.welcomeTagline,reply_time:this.replyTime}};this.avatarFile&&(t.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",t),ce(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.SUCCESS_MESSAGE"))}catch(t){ce(t.message||this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.ERROR_MESSAGE"))}},getSavedInboxInformation(){return va.get(this.storageKey)}}},gq={class:"mx-8"},_q={class:"flex p-2.5"},vq={class:"w-100 lg:w-[40%]"},bq={class:"min-h-full py-4 overflow-y-scroll px-px"},Eq=["value"],Tq={class:"w-100 lg:w-3/5"},yq={key:0,class:"flex flex-col items-center justify-end min-h-[40.625rem] mx-5 mb-5 p-2.5 bg-slate-50 dark:bg-slate-900/50 rounded-lg"},Sq={key:1,class:"mx-5 p-2.5 bg-n-slate-3 rounded-lg dark:bg-n-solid-3"};function Aq(e,t,n,s,o,a){const i=M("woot-avatar-uploader"),r=M("woot-input"),l=M("Editor"),c=M("woot-color-picker"),u=M("InputRadioGroup"),d=M("NextButton"),m=M("Widget"),f=M("woot-code");return p(),v("div",gq,[h("div",_q,[h("div",vq,[h("div",bq,[h("form",{onSubmit:t[6]||(t[6]=Fe((...g)=>a.updateWidget&&a.updateWidget(...g),["prevent"]))},[y(i,{label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.LABEL"),src:o.avatarUrl,"delete-avatar":"",onOnAvatarSelect:a.handleImageUpload,onOnAvatarDelete:a.handleAvatarDelete},null,8,["label","src","onOnAvatarSelect","onOnAvatarDelete"]),y(r,{modelValue:o.websiteName,"onUpdate:modelValue":t[0]||(t[0]=g=>o.websiteName=g),class:se({error:s.v$.websiteName.$error}),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.PLACE_HOLDER"),error:a.websiteNameValidationErrorMsg,onBlur:s.v$.websiteName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),y(r,{modelValue:o.welcomeHeading,"onUpdate:modelValue":t[1]||(t[1]=g=>o.welcomeHeading=g),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),y(l,{modelValue:o.welcomeTagline,"onUpdate:modelValue":t[2]||(t[2]=g=>o.welcomeTagline=g),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.PLACE_HOLDER"),"max-length":255,"enabled-menu-options":o.welcomeTaglineEditorMenuOptions,class:"mb-4"},null,8,["modelValue","label","placeholder","enabled-menu-options"]),h("label",null,[Re(A(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[3]||(t[3]=g=>o.replyTime=g)},[(p(!0),v(pe,null,Ne(a.getReplyTimeOptions,g=>(p(),v("option",{key:g.key,value:g.value},A(g.text),9,Eq))),128))],512),[[gn,o.replyTime]])]),h("label",null,[Re(A(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_COLOR_LABEL"))+" ",1),y(c,{modelValue:o.color,"onUpdate:modelValue":t[4]||(t[4]=g=>o.color=g)},null,8,["modelValue"])]),y(u,{name:"widget-bubble-position",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION_LABEL"),items:o.widgetBubblePositions,action:a.handleWidgetBubblePositionChange},null,8,["label","items","action"]),y(u,{name:"widget-bubble-type",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE_LABEL"),items:o.widgetBubbleTypes,action:a.handleWidgetBubbleTypeChange},null,8,["label","items","action"]),y(r,{modelValue:o.widgetBubbleLauncherTitle,"onUpdate:modelValue":t[5]||(t[5]=g=>o.widgetBubbleLauncherTitle=g),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),y(d,{type:"submit",class:"mt-4",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.BUTTON_TEXT"),"is-loading":e.uiFlags.isUpdating,disabled:s.v$.$invalid||e.uiFlags.isUpdating},null,8,["label","is-loading","disabled"])],32)])]),h("div",Tq,[y(u,{name:"widget-view-options",class:"text-center",items:a.getWidgetViewOptions,action:a.handleWidgetViewChange},null,8,["items","action"]),o.isWidgetPreview?(p(),v("div",yq,[y(m,{"welcome-heading":o.welcomeHeading,"welcome-tagline":o.welcomeTagline,"website-name":o.websiteName,logo:o.avatarUrl,"is-online":"","reply-time":o.replyTime,color:o.color,"widget-bubble-position":o.widgetBubblePosition,"widget-bubble-launcher-title":o.widgetBubbleLauncherTitle,"widget-bubble-type":o.widgetBubbleType},null,8,["welcome-heading","welcome-tagline","website-name","logo","reply-time","color","widget-bubble-position","widget-bubble-launcher-title","widget-bubble-type"])])):(p(),v("div",Sq,[y(f,{script:a.widgetScript},null,8,["script"])]))])])])}const Iq=Ae(fq,[["render",Aq]]),Cq={components:{LoadingState:Rc,SettingsSection:dr,NextButton:oe},props:{inbox:{type:Object,default:()=>({})}},data(){return{selectedAgentBotId:null}},computed:{...lt({agentBots:"agentBots/getBots",uiFlags:"agentBots/getUIFlags"}),activeAgentBot(){return this.$store.getters["agentBots/getActiveAgentBot"](this.inbox.id)}},watch:{activeAgentBot(){this.selectedAgentBotId=this.activeAgentBot.id}},mounted(){this.$store.dispatch("agentBots/get"),this.$store.dispatch("agentBots/fetchAgentBotInbox",this.inbox.id)},methods:{async updateActiveAgentBot(){try{await this.$store.dispatch("agentBots/setAgentBotInbox",{inboxId:this.inbox.id,botId:this.selectedAgentBotId?this.selectedAgentBotId:void 0}),ce(this.$t("AGENT_BOTS.BOT_CONFIGURATION.SUCCESS_MESSAGE"))}catch{ce(this.$t("AGENT_BOTS.BOT_CONFIGURATION.ERROR_MESSAGE"))}},async disconnectBot(){try{await this.$store.dispatch("agentBots/disconnectBot",{inboxId:this.inbox.id}),ce(this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_SUCCESS_MESSAGE"))}catch(e){ce((e==null?void 0:e.message)||this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_ERROR_MESSAGE"))}}}},Oq={class:"mx-8"},Nq={value:"",disabled:"",selected:""},wq=["value"],Rq={class:"button-container space-x-2"};function xq(e,t,n,s,o,a){const i=M("LoadingState"),r=M("NextButton"),l=M("SettingsSection");return p(),v("div",Oq,[e.uiFlags.isFetching||e.uiFlags.isFetchingAgentBot?(p(),$(i,{key:0})):(p(),v("form",{key:1,class:"flex flex-wrap mx-0",onSubmit:t[1]||(t[1]=Fe((...c)=>a.updateActiveAgentBot&&a.updateActiveAgentBot(...c),["prevent"]))},[y(l,{title:e.$t("AGENT_BOTS.BOT_CONFIGURATION.TITLE"),"sub-title":e.$t("AGENT_BOTS.BOT_CONFIGURATION.DESC")},{default:K(()=>[h("div",null,[h("label",null,[re(h("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>o.selectedAgentBotId=c)},[h("option",Nq,A(e.$t("AGENT_BOTS.BOT_CONFIGURATION.SELECT_PLACEHOLDER")),1),(p(!0),v(pe,null,Ne(e.agentBots,c=>(p(),v("option",{key:c.id,value:c.id},A(c.name),9,wq))),128))],512),[[gn,o.selectedAgentBotId]])]),h("div",Rq,[y(r,{type:"submit",label:e.$t("AGENT_BOTS.BOT_CONFIGURATION.SUBMIT"),"is-loading":e.uiFlags.isSettingAgentBot},null,8,["label","is-loading"]),y(r,{type:"button",disabled:!o.selectedAgentBotId,"is-loading":e.uiFlags.isDisconnecting,faded:"",ruby:"",onClick:a.disconnectBot},{default:K(()=>[Re(A(e.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECT")),1)]),_:1},8,["disabled","is-loading","onClick"])])])]),_:1},8,["title","sub-title"])],32))])}const $q=Ae(Cq,[["render",xq]]),Mq={props:{heading:{type:String,default:""},content:{type:String,default:""},active:{type:Boolean,default:!1},src:{type:String,default:""}}},Lq={class:"flex items-center p-1 text-sm font-medium"},kq={class:"text-slate-700 dark:text-slate-200 text-xs leading-[1.4] px-3 pt-3 pb-0 text-start"},Dq={key:0,class:"p-3"},Pq=["src"];function Bq(e,t,n,s,o,a){const i=M("fluent-icon");return p(),v("div",{class:se(["flex flex-col min-w-[15rem] max-h-[21.25rem] max-w-[23.75rem] rounded-md border border-solid border-n-strong",{"bg-woot-25 dark:bg-n-solid-2 border border-solid border-n-blue-border":n.active}])},[h("div",{class:se(["flex justify-between items-center rounded-t-md px-2 w-full h-10 bg-slate-50 dark:bg-slate-900 border-b border-solid border-n-strong",{"bg-woot-50 border-b border-solid border-n-blue-border":n.active}])},[h("div",Lq,A(n.heading),1),n.active?(p(),$(i,{key:0,icon:"checkmark-circle",type:"solid",size:"24",class:"text-woot-500 dark:text-woot-500"})):w("",!0)],2),h("div",kq,A(n.content),1),n.src?(p(),v("div",Dq,[h("img",{src:n.src,class:se(["border border-solid rounded-md",n.active?"border-woot-75 dark:border-woot-700":"border-slate-50 dark:border-slate-600"])},null,10,Pq)])):We(e.$slots,"default",{key:1})],2)}const Fq=Ae(Mq,[["render",Bq]]),Uq={components:{PreviewCard:Fq,Thumbnail:Hn},props:{senderNameType:{type:String,default:"friendly"},businessName:{type:String,default:""}},emits:["update"],data(){return{senderNameKeyOptions:[{key:"friendly",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.SUBTITLE"),preview:{senderName:"Smith",businessName:"Chatwoot",email:"<support@yourbusiness.com>"}},{key:"professional",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.SUBTITLE"),preview:{senderName:"",businessName:"Chatwoot",email:"<support@yourbusiness.com>"}}]}},methods:{isKeyOptionFriendly(e){return e==="friendly"},userName(e){return this.isKeyOptionFriendly(e.key)?e.preview.senderName:e.preview.businessName},toggleSenderNameType(e){this.$emit("update",e)}}},Gq={class:"flex flex-col lg:flex-row items-start lg:items-center gap-4"},Vq=["onClick"],Hq={class:"flex flex-col items-start p-3 gap-2"},Wq={class:"text-xs"},zq={class:"flex flex-row items-center gap-2"},jq={class:"flex flex-col items-start gap-1"},Kq={class:"items-center flex flex-row gap-0.5 max-w-[18rem]"},Yq={key:0,class:"text-xs font-semibold leading-tight"},Xq={key:1,class:"text-xs"},qq={class:"text-xs font-semibold leading-tight overflow-hidden whitespace-nowrap text-ellipsis"},Zq={class:"text-xs"};function Qq(e,t,n,s,o,a){const i=M("Thumbnail"),r=M("PreviewCard");return p(),v("div",Gq,[(p(!0),v(pe,null,Ne(o.senderNameKeyOptions,l=>(p(),v("button",{key:l.key,class:"text-slate-800 dark:text-slate-100 cursor-pointer p-0",onClick:c=>a.toggleSenderNameType(l.key)},[y(r,{heading:l.heading,content:l.content,active:l.key===n.senderNameType},{default:K(()=>[h("div",Hq,[h("span",Wq,A(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FOR_EG")),1),h("div",zq,[y(i,{username:a.userName(l),size:"32px"},null,8,["username"]),h("div",jq,[h("div",Kq,[a.isKeyOptionFriendly(l.key)?(p(),v("span",Yq,A(l.preview.senderName),1)):w("",!0),a.isKeyOptionFriendly(l.key)?(p(),v("span",Xq,A(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.FROM")),1)):w("",!0),h("span",qq,A(n.businessName||l.preview.businessName),1)]),h("span",Zq,A(l.preview.email),1)])])])]),_:2},1032,["heading","content","active"])],8,Vq))),128))])}const Jq=Ae(Uq,[["render",Qq]]),eZ={components:{BotConfiguration:$q,CollaboratorsPage:RX,ConfigurationPage:cX,CustomerSatisfactionPage:TX,FacebookReauthorize:Nj,GreetingsEditor:Iy,PreChatFormSettings:XK,SettingIntroBanner:fj,SettingsSection:dr,WeeklyAvailability:yY,WidgetBuilder:Iq,SenderNameExamplePreview:Jq,MicrosoftReauthorize:xj,GoogleReauthorize:$j,NextButton:oe,InstagramReauthorize:wj,DuplicateInboxBanner:Ly,Editor:_a},mixins:[Yo],setup(){return{v$:bt()}},data(){return{avatarFile:null,avatarUrl:"",greetingEnabled:!0,greetingMessage:"",emailCollectEnabled:!1,senderNameType:"friendly",businessName:"",locktoSingleConversation:!1,allowMessagesAfterResolved:!0,continuityViaEmail:!0,selectedInboxName:"",channelWebsiteUrl:"",webhookUrl:"",channelWelcomeTitle:"",channelWelcomeTagline:"",selectedFeatureFlags:[],replyTime:"",selectedTabIndex:0,selectedPortalSlug:"",showBusinessNameInput:!1,welcomeTaglineEditorMenuOptions:Tg}},computed:{...lt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"inboxes/getUIFlags",portals:"portals/allPortals"}),selectedTabKey(){var e;return(e=this.tabs[this.selectedTabIndex])==null?void 0:e.key},whatsAppAPIProviderName(){return this.isAWhatsAppCloudChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD"):this.is360DialogWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.360_DIALOG"):this.isATwilioWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO"):""},tabs(){let e=[{key:"inbox_settings",name:this.$t("INBOX_MGMT.TABS.SETTINGS")},{key:"collaborators",name:this.$t("INBOX_MGMT.TABS.COLLABORATORS")},{key:"businesshours",name:this.$t("INBOX_MGMT.TABS.BUSINESS_HOURS")},{key:"csat",name:this.$t("INBOX_MGMT.TABS.CSAT")}];return this.isAWebWidgetInbox&&(e=[...e,{key:"preChatForm",name:this.$t("INBOX_MGMT.TABS.PRE_CHAT_FORM")},{key:"widgetBuilder",name:this.$t("INBOX_MGMT.TABS.WIDGET_BUILDER")}]),(this.isATwilioChannel||this.isALineChannel||this.isAPIInbox||this.isAnEmailChannel&&!this.inbox.provider||this.isAWhatsAppChannel||this.isAWebWidgetInbox)&&(e=[...e,{key:"configuration",name:this.$t("INBOX_MGMT.TABS.CONFIGURATION")}]),this.isFeatureEnabledonAccount(this.accountId,_t.AGENT_BOTS)&&(e=[...e,{key:"botConfiguration",name:this.$t("INBOX_MGMT.TABS.BOT_CONFIGURATION")}]),e},currentInboxId(){return this.$route.params.inboxId},inbox(){return this.$store.getters["inboxes/getInbox"](this.currentInboxId)},inboxName(){return this.isATwilioSMSChannel||this.isATwilioWhatsAppChannel?`${this.inbox.name} (${this.inbox.messaging_service_sid||this.inbox.phone_number})`:this.isAWhatsAppChannel?`${this.inbox.name} (${this.inbox.phone_number})`:this.isAnEmailChannel?`${this.inbox.name} (${this.inbox.email})`:this.inbox.name},canLocktoSingleConversation(){return this.isASmsInbox||this.isAWhatsAppChannel||this.isAFacebookInbox||this.isAPIInbox},inboxNameLabel(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.LABEL")},inboxNamePlaceHolder(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.PLACEHOLDER")},textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)},instagramUnauthorized(){return this.isAnInstagramChannel&&this.inbox.reauthorization_required},hasDuplicateInstagramInbox(){const e=this.inbox.instagram_id,t=this.$store.getters["inboxes/getInstagramInboxByInstagramId"](e);return this.inbox.channel_type===yt.FB&&t},microsoftUnauthorized(){return this.isAMicrosoftInbox&&this.inbox.reauthorization_required},facebookUnauthorized(){return this.isAFacebookInbox&&this.inbox.reauthorization_required},googleUnauthorized(){const e=["imap.gmail.com","imap.google.com"].includes(this.inbox.imap_address);return(this.isAGoogleInbox||e)&&this.inbox.reauthorization_required}},watch:{$route(e){e.name==="settings_inbox_show"&&this.fetchInboxSettings()}},mounted(){this.fetchInboxSettings(),this.fetchPortals()},methods:{fetchPortals(){this.$store.dispatch("portals/index")},handleFeatureFlag(e){this.selectedFeatureFlags=this.toggleInput(this.selectedFeatureFlags,e.target.value)},toggleInput(e,t){return e.includes(t)?e.filter(s=>s!==t):[...e,t]},onTabChange(e){this.selectedTabIndex=e},fetchInboxSettings(){this.selectedTabIndex=0,this.selectedAgents=[],this.$store.dispatch("agents/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("inboxes/get").then(()=>{this.avatarUrl=this.inbox.avatar_url,this.selectedInboxName=this.inbox.name,this.webhookUrl=this.inbox.webhook_url,this.greetingEnabled=this.inbox.greeting_enabled||!1,this.greetingMessage=this.inbox.greeting_message||"",this.emailCollectEnabled=this.inbox.enable_email_collect,this.senderNameType=this.inbox.sender_name_type,this.businessName=this.inbox.business_name,this.allowMessagesAfterResolved=this.inbox.allow_messages_after_resolved,this.continuityViaEmail=this.inbox.continuity_via_email,this.channelWebsiteUrl=this.inbox.website_url,this.channelWelcomeTitle=this.inbox.welcome_title,this.channelWelcomeTagline=this.inbox.welcome_tagline,this.selectedFeatureFlags=this.inbox.selected_feature_flags||[],this.replyTime=this.inbox.reply_time,this.locktoSingleConversation=this.inbox.lock_to_single_conversation,this.selectedPortalSlug=this.inbox.help_center?this.inbox.help_center.slug:""})},async updateInbox(){try{const e={id:this.currentInboxId,name:this.selectedInboxName,enable_email_collect:this.emailCollectEnabled,allow_messages_after_resolved:this.allowMessagesAfterResolved,greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage||"",portal_id:this.selectedPortalSlug?this.portals.find(t=>t.slug===this.selectedPortalSlug).id:null,lock_to_single_conversation:this.locktoSingleConversation,sender_name_type:this.senderNameType,business_name:this.businessName||null,channel:{widget_color:this.inbox.widget_color,website_url:this.channelWebsiteUrl,webhook_url:this.webhookUrl,welcome_title:this.channelWelcomeTitle||"",welcome_tagline:this.channelWelcomeTagline||"",selectedFeatureFlags:this.selectedFeatureFlags,reply_time:this.replyTime||"in_a_few_minutes",continuity_via_email:this.continuityViaEmail}};this.avatarFile&&(e.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",e),ce(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(e){ce(e.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.currentInboxId),this.avatarFile=null,this.avatarUrl="",ce(this.$t("INBOX_MGMT.DELETE.API.AVATAR_SUCCESS_MESSAGE"))}catch(e){ce(e.message?e.message:this.$t("INBOX_MGMT.DELETE.API.AVATAR_ERROR_MESSAGE"))}},toggleSenderNameType(e){this.senderNameType=e},onClickShowBusinessNameInput(){this.showBusinessNameInput=!this.showBusinessNameInput,this.showBusinessNameInput&&this.$nextTick(()=>{this.$refs.businessNameInput.focus()})}},validations:{webhookUrl:{shouldBeUrl:mO},selectedInboxName:{}}},tZ={class:"flex-grow flex-shrink w-full min-w-0 pl-0 pr-0 overflow-auto settings"},nZ={class:"w-full max-w-6xl mx-auto"},sZ={key:5,class:"mx-8"},aZ={key:4,class:"pb-4"},oZ={key:5,class:"pb-4"},iZ={class:"pb-4"},rZ={value:!0},lZ={value:!1},cZ={class:"pb-1 text-sm not-italic text-n-slate-11"},uZ={key:6,class:"pb-4"},dZ={key:7,class:"pb-4"},pZ={key:"in_a_few_minutes",value:"in_a_few_minutes"},hZ={key:"in_a_few_hours",value:"in_a_few_hours"},mZ={key:"in_a_day",value:"in_a_day"},fZ={class:"pb-1 text-sm not-italic text-n-slate-11"},gZ={key:8,class:"pb-4"},_Z={value:!0},vZ={value:!1},bZ={class:"pb-1 text-sm not-italic text-n-slate-11"},EZ={key:9,class:"pb-4"},TZ={value:!0},yZ={value:!1},SZ={class:"pb-1 text-sm not-italic text-n-slate-11"},AZ={key:10,class:"pb-4"},IZ={value:!0},CZ={value:!1},OZ={class:"pb-1 text-sm not-italic text-n-slate-11"},NZ={class:"pb-4"},wZ={value:""},RZ=["value"],xZ={class:"pb-1 text-sm not-italic text-n-slate-11"},$Z={key:11,class:"pb-4"},MZ={value:!0},LZ={value:!1},kZ={class:"pb-1 text-sm not-italic text-n-slate-11"},DZ={key:12},PZ={key:13,class:"flex gap-2 pt-2 pb-4"},BZ={for:"attachments"},FZ={key:14,class:"flex gap-2 pb-4"},UZ={for:"emoji_picker"},GZ={key:15,class:"flex gap-2 pb-4"},VZ={for:"end_conversation"},HZ={key:16,class:"flex gap-2 pb-4"},WZ={for:"use_inbox_avatar_for_bot"},zZ={class:"pb-4"},jZ={class:"flex flex-col items-start gap-2 mt-2"},KZ={key:0,class:"flex gap-2 w-[80%]"},YZ=["placeholder"],XZ={key:6,class:"mx-8"},qZ={key:7},ZZ={key:8},QZ={key:9},JZ={key:10},eQ={key:11},tQ={key:12};function nQ(e,t,n,s,o,a){const i=M("woot-tabs-item"),r=M("woot-tabs"),l=M("SettingIntroBanner"),c=M("MicrosoftReauthorize"),u=M("FacebookReauthorize"),d=M("GoogleReauthorize"),m=M("InstagramReauthorize"),f=M("DuplicateInboxBanner"),g=M("woot-avatar-uploader"),T=M("woot-input"),S=M("Editor"),_=M("woot-color-picker"),E=M("GreetingsEditor"),b=M("SettingsSection"),I=M("SenderNameExamplePreview"),R=M("NextButton"),O=M("CollaboratorsPage"),x=M("ConfigurationPage"),L=M("CustomerSatisfactionPage"),F=M("PreChatFormSettings"),D=M("WeeklyAvailability"),V=M("WidgetBuilder"),B=M("BotConfiguration");return p(),v("div",tZ,[y(l,{"header-image":a.inbox.avatarUrl,"header-title":a.inboxName},{default:K(()=>[y(r,{class:"settings--tabs",index:o.selectedTabIndex,border:!1,onChange:a.onTabChange},{default:K(()=>[(p(!0),v(pe,null,Ne(a.tabs,(P,k)=>(p(),$(i,{key:P.key,index:k,name:P.name,"show-badge":!1},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])]),_:1},8,["header-image","header-title"]),h("section",nZ,[a.microsoftUnauthorized?(p(),$(c,{key:0,inbox:a.inbox},null,8,["inbox"])):w("",!0),a.facebookUnauthorized?(p(),$(u,{key:1,inbox:a.inbox},null,8,["inbox"])):w("",!0),a.googleUnauthorized?(p(),$(d,{key:2,inbox:a.inbox},null,8,["inbox"])):w("",!0),a.instagramUnauthorized?(p(),$(m,{key:3,inbox:a.inbox},null,8,["inbox"])):w("",!0),a.hasDuplicateInstagramInbox?(p(),$(f,{key:4,content:e.$t("INBOX_MGMT.ADD.INSTAGRAM.DUPLICATE_INBOX_BANNER"),class:"mx-8 mt-5"},null,8,["content"])):w("",!0),a.selectedTabKey==="inbox_settings"?(p(),v("div",sZ,[y(b,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_SUB_TEXT"),"show-border":!1},{default:K(()=>[y(g,{label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_AVATAR.LABEL"),src:o.avatarUrl,class:"pb-4","delete-avatar":"",onOnAvatarSelect:a.handleImageUpload,onOnAvatarDelete:a.handleAvatarDelete},null,8,["label","src","onOnAvatarSelect","onOnAvatarDelete"]),y(T,{modelValue:o.selectedInboxName,"onUpdate:modelValue":t[0]||(t[0]=P=>o.selectedInboxName=P),class:se(["pb-4",{error:s.v$.selectedInboxName.$error}]),label:a.inboxNameLabel,placeholder:a.inboxNamePlaceHolder,error:s.v$.selectedInboxName.$error?e.$t("INBOX_MGMT.ADD.CHANNEL_NAME.ERROR"):"",onBlur:s.v$.selectedInboxName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),e.isAPIInbox?(p(),$(T,{key:0,modelValue:o.webhookUrl,"onUpdate:modelValue":t[1]||(t[1]=P=>o.webhookUrl=P),class:se(["pb-4",{error:s.v$.webhookUrl.$error}]),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.PLACEHOLDER"),error:s.v$.webhookUrl.$error?e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.ERROR"):"",onBlur:s.v$.webhookUrl.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"])):w("",!0),e.isAWebWidgetInbox?(p(),$(T,{key:1,modelValue:o.channelWebsiteUrl,"onUpdate:modelValue":t[2]||(t[2]=P=>o.channelWebsiteUrl=P),class:"pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):w("",!0),e.isAWebWidgetInbox?(p(),$(T,{key:2,modelValue:o.channelWelcomeTitle,"onUpdate:modelValue":t[3]||(t[3]=P=>o.channelWelcomeTitle=P),class:"pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):w("",!0),e.isAWebWidgetInbox?(p(),$(S,{key:3,modelValue:o.channelWelcomeTagline,"onUpdate:modelValue":t[4]||(t[4]=P=>o.channelWelcomeTagline=P),class:"mb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER"),"max-length":255,"enabled-menu-options":o.welcomeTaglineEditorMenuOptions},null,8,["modelValue","label","placeholder","enabled-menu-options"])):w("",!0),e.isAWebWidgetInbox?(p(),v("label",aZ,[Re(A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),y(_,{modelValue:a.inbox.widget_color,"onUpdate:modelValue":t[5]||(t[5]=P=>a.inbox.widget_color=P)},null,8,["modelValue"])])):w("",!0),e.isAWhatsAppChannel?(p(),v("label",oZ,[Re(A(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[6]||(t[6]=P=>a.whatsAppAPIProviderName=P),type:"text",disabled:""},null,512),[[mt,a.whatsAppAPIProviderName]])])):w("",!0),h("label",iZ,[Re(A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[7]||(t[7]=P=>o.greetingEnabled=P)},[h("option",rZ,A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),h("option",lZ,A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[gn,o.greetingEnabled]]),h("p",cZ,A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),o.greetingEnabled?(p(),v("div",uZ,[y(E,{modelValue:o.greetingMessage,"onUpdate:modelValue":t[8]||(t[8]=P=>o.greetingMessage=P),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!a.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])])):w("",!0),e.isAWebWidgetInbox?(p(),v("label",dZ,[Re(A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.TITLE"))+" ",1),re(h("select",{"onUpdate:modelValue":t[9]||(t[9]=P=>o.replyTime=P)},[h("option",pZ,A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_MINUTES")),1),h("option",hZ,A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_HOURS")),1),h("option",mZ,A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_DAY")),1)],512),[[gn,o.replyTime]]),h("p",fZ,A(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.HELP_TEXT")),1)])):w("",!0),e.isAWebWidgetInbox?(p(),v("label",gZ,[Re(A(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX"))+" ",1),re(h("select",{"onUpdate:modelValue":t[10]||(t[10]=P=>o.emailCollectEnabled=P)},[h("option",_Z,A(e.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.ENABLED")),1),h("option",vZ,A(e.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.DISABLED")),1)],512),[[gn,o.emailCollectEnabled]]),h("p",bZ,A(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX_SUB_TEXT")),1)])):w("",!0),e.isAWebWidgetInbox?(p(),v("label",EZ,[Re(A(e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED"))+" ",1),re(h("select",{"onUpdate:modelValue":t[11]||(t[11]=P=>o.allowMessagesAfterResolved=P)},[h("option",TZ,A(e.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.ENABLED")),1),h("option",yZ,A(e.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.DISABLED")),1)],512),[[gn,o.allowMessagesAfterResolved]]),h("p",SZ,A(e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED_SUB_TEXT")),1)])):w("",!0),e.isAWebWidgetInbox?(p(),v("label",AZ,[Re(A(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL"))+" ",1),re(h("select",{"onUpdate:modelValue":t[12]||(t[12]=P=>o.continuityViaEmail=P)},[h("option",IZ,A(e.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.ENABLED")),1),h("option",CZ,A(e.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.DISABLED")),1)],512),[[gn,o.continuityViaEmail]]),h("p",OZ,A(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL_SUB_TEXT")),1)])):w("",!0),h("div",NZ,[h("label",null,A(e.$t("INBOX_MGMT.HELP_CENTER.LABEL")),1),re(h("select",{"onUpdate:modelValue":t[13]||(t[13]=P=>o.selectedPortalSlug=P),class:"filter__question"},[h("option",wZ,A(e.$t("INBOX_MGMT.HELP_CENTER.PLACEHOLDER")),1),(p(!0),v(pe,null,Ne(e.portals,P=>(p(),v("option",{key:P.slug,value:P.slug},A(P.name),9,RZ))),128))],512),[[gn,o.selectedPortalSlug]]),h("p",xZ,A(e.$t("INBOX_MGMT.HELP_CENTER.SUB_TEXT")),1)]),a.canLocktoSingleConversation?(p(),v("label",$Z,[Re(A(e.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION"))+" ",1),re(h("select",{"onUpdate:modelValue":t[14]||(t[14]=P=>o.locktoSingleConversation=P)},[h("option",MZ,A(e.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.ENABLED")),1),h("option",LZ,A(e.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.DISABLED")),1)],512),[[gn,o.locktoSingleConversation]]),h("p",kZ,A(e.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION_SUB_TEXT")),1)])):w("",!0),e.isAWebWidgetInbox?(p(),v("label",DZ,A(e.$t("INBOX_MGMT.FEATURES.LABEL")),1)):w("",!0),e.isAWebWidgetInbox?(p(),v("div",PZ,[re(h("input",{"onUpdate:modelValue":t[15]||(t[15]=P=>o.selectedFeatureFlags=P),type:"checkbox",value:"attachments",onInput:t[16]||(t[16]=(...P)=>a.handleFeatureFlag&&a.handleFeatureFlag(...P))},null,544),[[pn,o.selectedFeatureFlags]]),h("label",BZ,A(e.$t("INBOX_MGMT.FEATURES.DISPLAY_FILE_PICKER")),1)])):w("",!0),e.isAWebWidgetInbox?(p(),v("div",FZ,[re(h("input",{"onUpdate:modelValue":t[17]||(t[17]=P=>o.selectedFeatureFlags=P),type:"checkbox",value:"emoji_picker",onInput:t[18]||(t[18]=(...P)=>a.handleFeatureFlag&&a.handleFeatureFlag(...P))},null,544),[[pn,o.selectedFeatureFlags]]),h("label",UZ,A(e.$t("INBOX_MGMT.FEATURES.DISPLAY_EMOJI_PICKER")),1)])):w("",!0),e.isAWebWidgetInbox?(p(),v("div",GZ,[re(h("input",{"onUpdate:modelValue":t[19]||(t[19]=P=>o.selectedFeatureFlags=P),type:"checkbox",value:"end_conversation",onInput:t[20]||(t[20]=(...P)=>a.handleFeatureFlag&&a.handleFeatureFlag(...P))},null,544),[[pn,o.selectedFeatureFlags]]),h("label",VZ,A(e.$t("INBOX_MGMT.FEATURES.ALLOW_END_CONVERSATION")),1)])):w("",!0),e.isAWebWidgetInbox?(p(),v("div",HZ,[re(h("input",{"onUpdate:modelValue":t[21]||(t[21]=P=>o.selectedFeatureFlags=P),type:"checkbox",value:"use_inbox_avatar_for_bot",onInput:t[22]||(t[22]=(...P)=>a.handleFeatureFlag&&a.handleFeatureFlag(...P))},null,544),[[pn,o.selectedFeatureFlags]]),h("label",WZ,A(e.$t("INBOX_MGMT.FEATURES.USE_INBOX_AVATAR_FOR_BOT")),1)])):w("",!0)]),_:1},8,["title","sub-title"]),e.isAWebWidgetInbox||e.isAnEmailChannel?(p(),$(b,{key:0,title:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.TITLE"),"sub-title":e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.SUB_TEXT"),"show-border":!1},{default:K(()=>[h("div",zZ,[y(I,{"sender-name-type":o.senderNameType,"business-name":o.businessName,onUpdate:a.toggleSenderNameType},null,8,["sender-name-type","business-name","onUpdate"]),h("div",jZ,[y(R,{ghost:"",blue:"",label:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.BUTTON_TEXT"),onClick:a.onClickShowBusinessNameInput},null,8,["label","onClick"]),o.showBusinessNameInput?(p(),v("div",KZ,[re(h("input",{ref:"businessNameInput","onUpdate:modelValue":t[23]||(t[23]=P=>o.businessName=P),placeholder:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.PLACEHOLDER"),class:"mb-0",type:"text"},null,8,YZ),[[mt,o.businessName]]),y(R,{label:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.SAVE_BUTTON_TEXT"),class:"flex-shrink-0",onClick:a.updateInbox},null,8,["label","onClick"])])):w("",!0)])])]),_:1},8,["title","sub-title"])):w("",!0),y(b,{"show-border":!1},{default:K(()=>[e.isAPIInbox?(p(),$(R,{key:0,type:"submit",disabled:s.v$.webhookUrl.$invalid,label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":e.uiFlags.isUpdating,onClick:a.updateInbox},null,8,["disabled","label","is-loading","onClick"])):(p(),$(R,{key:1,type:"submit",disabled:s.v$.$invalid,label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":e.uiFlags.isUpdating,onClick:a.updateInbox},null,8,["disabled","label","is-loading","onClick"]))]),_:1})])):w("",!0),a.selectedTabKey==="collaborators"?(p(),v("div",XZ,[y(O,{inbox:a.inbox},null,8,["inbox"])])):w("",!0),a.selectedTabKey==="configuration"?(p(),v("div",qZ,[y(x,{inbox:a.inbox},null,8,["inbox"])])):w("",!0),a.selectedTabKey==="csat"?(p(),v("div",ZZ,[y(L,{inbox:a.inbox},null,8,["inbox"])])):w("",!0),a.selectedTabKey==="preChatForm"?(p(),v("div",QZ,[y(F,{inbox:a.inbox},null,8,["inbox"])])):w("",!0),a.selectedTabKey==="businesshours"?(p(),v("div",JZ,[y(D,{inbox:a.inbox},null,8,["inbox"])])):w("",!0),a.selectedTabKey==="widgetBuilder"?(p(),v("div",eQ,[y(V,{inbox:a.inbox},null,8,["inbox"])])):w("",!0),a.selectedTabKey==="botConfiguration"?(p(),v("div",tQ,[y(B,{inbox:a.inbox},null,8,["inbox"])])):w("",!0)])])}const sQ=Ae(eZ,[["render",nQ],["__scopeId","data-v-51b87d83"]]),aQ={mixins:[jo],computed:{...lt({globalConfig:"globalConfig/get"}),createFlowSteps(){const e=["CHANNEL","INBOX","AGENT","FINISH"],t={CHANNEL:"settings_inbox_new",INBOX:"settings_inboxes_page_channel",AGENT:"settings_inboxes_add_agents",FINISH:"settings_inbox_finish"};return e.map(n=>({title:this.$t(`INBOX_MGMT.CREATE_FLOW.${n}.TITLE`),body:this.$t(`INBOX_MGMT.CREATE_FLOW.${n}.BODY`),route:t[n]}))},items(){return this.createFlowSteps.map(e=>({...e,body:this.useInstallationName(e.body,this.globalConfig.installationName)}))}}},oQ={class:"grid grid-cols-1 md:grid-cols-8 overflow-auto h-full"},iQ={class:"col-span-6"};function rQ(e,t,n,s,o,a){const i=M("woot-wizard"),r=M("router-view");return p(),v("div",oQ,[y(i,{class:"hidden md:block col-span-2","global-config":e.globalConfig,items:a.items},null,8,["global-config","items"]),h("div",iQ,[y(r)])])}const lQ=Ae(aQ,[["render",rQ]]),cQ={components:{ChannelSelector:wy},props:{channel:{type:Object,required:!0},enabledFeatures:{type:Object,required:!0}},emits:["channelItemClick"],computed:{hasFbConfigured(){var e;return(e=window.chatwootConfig)==null?void 0:e.fbAppId},hasInstagramConfigured(){var e;return(e=window.chatwootConfig)==null?void 0:e.instagramAppId},isActive(){const{key:e}=this.channel;return Object.keys(this.enabledFeatures).length===0?!1:e==="website"?this.enabledFeatures.channel_website:e==="facebook"?this.enabledFeatures.channel_facebook&&this.hasFbConfigured:e==="email"?this.enabledFeatures.channel_email:e==="instagram"?this.enabledFeatures.channel_instagram&&this.hasInstagramConfigured:e==="voice"?this.enabledFeatures.channel_voice:["website","twilio","api","whatsapp","sms","telegram","line","instagram","voice"].includes(e)},isComingSoon(){const{key:e}=this.channel;return["voice"].includes(e)&&!this.isActive}},methods:{getChannelThumbnail(){return this.channel.key==="api"&&this.channel.thumbnail?this.channel.thumbnail:`/assets/images/dashboard/channels/${this.channel.key}.png`},onItemClick(){this.isActive&&this.$emit("channelItemClick",this.channel.key)}}};function uQ(e,t,n,s,o,a){const i=M("ChannelSelector");return p(),$(i,{class:se({inactive:!a.isActive}),title:n.channel.name,src:a.getChannelThumbnail(),"is-coming-soon":a.isComingSoon,onClick:a.onItemClick},null,8,["class","title","src","is-coming-soon","onClick"])}const dQ=Ae(cQ,[["render",uQ]]),pQ={components:{ChannelItem:dQ,PageHeader:Ms},mixins:[jo],data(){return{enabledFeatures:{}}},computed:{account(){return this.$store.getters["accounts/getAccount"](this.accountId)},channelList(){const{apiChannelName:e,apiChannelThumbnail:t}=this.globalConfig;return[{key:"website",name:"Website"},{key:"facebook",name:"Messenger"},{key:"whatsapp",name:"WhatsApp"},{key:"sms",name:"SMS"},{key:"email",name:"Email"},{key:"api",name:e||"API",thumbnail:t},{key:"telegram",name:"Telegram"},{key:"line",name:"Line"},{key:"instagram",name:"Instagram"},{key:"voice",name:"Voice"}]},...lt({accountId:"getCurrentAccountId",globalConfig:"globalConfig/get"})},mounted(){this.initializeEnabledFeatures()},methods:{async initializeEnabledFeatures(){this.enabledFeatures=this.account.features},initChannelAuth(e){const t={sub_page:e,accountId:this.accountId};Wn.push({name:"settings_inboxes_page_channel",params:t})}}},hQ={class:"w-full h-full col-span-6 p-6 overflow-auto border border-b-0 rounded-t-lg border-n-weak bg-n-solid-1"},mQ={class:"grid max-w-3xl grid-cols-2 mx-0 mt-6 sm:grid-cols-3 lg:grid-cols-4"};function fQ(e,t,n,s,o,a){const i=M("PageHeader"),r=M("ChannelItem");return p(),v("div",hQ,[y(i,{class:"max-w-4xl","header-title":e.$t("INBOX_MGMT.ADD.AUTH.TITLE"),"header-content":e.useInstallationName(e.$t("INBOX_MGMT.ADD.AUTH.DESC"),e.globalConfig.installationName)},null,8,["header-title","header-content"]),h("div",mQ,[(p(!0),v(pe,null,Ne(a.channelList,l=>(p(),$(r,{key:l.key,channel:l,"enabled-features":o.enabledFeatures,onChannelItemClick:a.initChannelAuth},null,8,["channel","enabled-features","onChannelItemClick"]))),128))])])}const gQ=Ae(pQ,[["render",fQ]]),_Q={components:{PageHeader:Ms,NextButton:oe},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:bt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...lt({agentList:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{async addAgents(){this.isCreating=!0;const e=this.$route.params.inbox_id,t=this.selectedAgents.map(n=>n.id);try{await $O.update({inboxId:e,agentList:t}),Wn.replace({name:"settings_inbox_finish",params:{page:"new",inbox_id:this.$route.params.inbox_id}})}catch(n){ce(n.message)}this.isCreating=!1}}},vQ={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},bQ={class:"w-full"},TQ={class:"w-full"},yQ={key:0,class:"message"},SQ={class:"w-full"};function AQ(e,t,n,s,o,a){const i=M("PageHeader"),r=M("multiselect"),l=M("NextButton");return p(),v("div",vQ,[h("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[1]||(t[1]=Fe(c=>a.addAgents(),["prevent"]))},[h("div",bQ,[y(i,{"header-title":e.$t("INBOX_MGMT.ADD.AGENTS.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.AGENTS.DESC")},null,8,["header-title","header-content"])]),h("div",null,[h("div",TQ,[h("label",{class:se({error:s.v$.selectedAgents.$error})},[Re(A(e.$t("INBOX_MGMT.ADD.AGENTS.TITLE"))+" ",1),y(r,{modelValue:o.selectedAgents,"onUpdate:modelValue":t[0]||(t[0]=c=>o.selectedAgents=c),options:e.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),placeholder:e.$t("INBOX_MGMT.ADD.AGENTS.PICK_AGENTS"),onSelect:s.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","placeholder","onSelect"]),s.v$.selectedAgents.$error?(p(),v("span",yQ,A(e.$t("INBOX_MGMT.ADD.AGENTS.VALIDATION_ERROR")),1)):w("",!0)],2)]),h("div",SQ,[y(l,{type:"submit","is-loading":o.isCreating,solid:"",blue:"",label:e.$t("INBOX_MGMT.AGENTS.BUTTON_TEXT")},null,8,["is-loading","label"])])])],32)])}const IQ=Ae(_Q,[["render",AQ]]),CQ={props:{title:{type:String,default:""},message:{type:String,default:""}}},OQ={class:"empty-state py-16 px-1 ml-0 mr-0"},NQ={key:0,class:"text-n-slate-12 block text-center w-full text-xl font-medium"},wQ={key:1,class:"block text-center text-n-slate-11 dark:text-slate-400 my-4 mx-auto w-[90%]"};function RQ(e,t,n,s,o,a){return p(),v("div",OQ,[n.title?(p(),v("h3",NQ,A(n.title),1)):w("",!0),n.message?(p(),v("p",wQ,A(n.message),1)):w("",!0),We(e.$slots,"default")])}const pr=Ae(CQ,[["render",RQ]]),xQ={components:{EmptyState:pr,NextButton:oe,DuplicateInboxBanner:Ly},computed:{currentInbox(){return this.$store.getters["inboxes/getInbox"](this.$route.params.inbox_id)},isATwilioInbox(){return this.currentInbox.channel_type==="Channel::TwilioSms"},hasDuplicateInstagramInbox(){const e=this.currentInbox.instagram_id,t=this.$store.getters["inboxes/getFacebookInboxByInstagramId"](e);return this.currentInbox.channel_type===yt.INSTAGRAM&&t},isAEmailInbox(){return this.currentInbox.channel_type==="Channel::Email"},isALineInbox(){return this.currentInbox.channel_type==="Channel::Line"},isASmsInbox(){return this.currentInbox.channel_type==="Channel::Sms"},isWhatsAppCloudInbox(){return this.currentInbox.channel_type==="Channel::Whatsapp"&&this.currentInbox.provider==="whatsapp_cloud"},message(){return this.isATwilioInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")}`:this.isASmsInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_CALLBACK.SUBTITLE")}`:this.isALineInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")}`:this.isWhatsAppCloudInbox?`${this.$t("INBOX_MGMT.FINISH.MESSAGE")}. ${this.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.SUBTITLE")}`:this.isAEmailInbox&&!this.currentInbox.provider?this.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.FINISH_MESSAGE"):this.currentInbox.web_widget_script?this.$t("INBOX_MGMT.FINISH.WEBSITE_SUCCESS"):this.$t("INBOX_MGMT.FINISH.MESSAGE")}}},$Q={class:"w-full h-full col-span-6 p-6 overflow-auto border border-b-0 rounded-t-lg border-n-weak bg-n-solid-1"},MQ={class:"w-full text-center"},LQ={class:"my-4 mx-auto max-w-[70%]"},kQ={class:"w-[50%] max-w-[50%] ml-[25%]"},DQ={key:0,class:"w-[50%] max-w-[50%] ml-[25%]"},PQ={class:"mt-8 font-medium text-slate-700 dark:text-slate-200"},BQ={class:"mt-8 font-medium text-slate-700 dark:text-slate-200"},FQ={class:"w-[50%] max-w-[50%] ml-[25%]"},UQ={class:"w-[50%] max-w-[50%] ml-[25%]"},GQ={key:1,class:"w-[50%] max-w-[50%] ml-[25%]"},VQ={class:"flex justify-center gap-2 mt-4"};function HQ(e,t,n,s,o,a){const i=M("DuplicateInboxBanner"),r=M("woot-code"),l=M("NextButton"),c=M("router-link"),u=M("EmptyState");return p(),v("div",$Q,[a.hasDuplicateInstagramInbox?(p(),$(i,{key:0,content:e.$t("INBOX_MGMT.ADD.INSTAGRAM.NEW_INBOX_SUGGESTION")},null,8,["content"])):w("",!0),y(u,{title:e.$t("INBOX_MGMT.FINISH.TITLE"),message:a.message,"button-text":e.$t("INBOX_MGMT.FINISH.BUTTON_TEXT")},{default:K(()=>[h("div",MQ,[h("div",LQ,[a.currentInbox.web_widget_script?(p(),$(r,{key:0,script:a.currentInbox.web_widget_script},null,8,["script"])):w("",!0)]),h("div",kQ,[a.isATwilioInbox?(p(),$(r,{key:0,lang:"html",script:a.currentInbox.callback_webhook_url},null,8,["script"])):w("",!0)]),a.isWhatsAppCloudInbox?(p(),v("div",DQ,[h("p",PQ,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.WEBHOOK_URL")),1),y(r,{lang:"html",script:a.currentInbox.callback_webhook_url},null,8,["script"]),h("p",BQ,A(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.WEBHOOK_VERIFICATION_TOKEN")),1),y(r,{lang:"html",script:a.currentInbox.provider_config.webhook_verify_token},null,8,["script"])])):w("",!0),h("div",FQ,[a.isALineInbox?(p(),$(r,{key:0,lang:"html",script:a.currentInbox.callback_webhook_url},null,8,["script"])):w("",!0)]),h("div",UQ,[a.isASmsInbox?(p(),$(r,{key:0,lang:"html",script:a.currentInbox.callback_webhook_url},null,8,["script"])):w("",!0)]),a.isAEmailInbox&&!a.currentInbox.provider?(p(),v("div",GQ,[y(r,{lang:"html",script:a.currentInbox.forward_to_email},null,8,["script"])])):w("",!0),h("div",VQ,[y(c,{to:{name:"settings_inbox_show",params:{inboxId:e.$route.params.inbox_id}}},{default:K(()=>[y(l,{outline:"",slate:"",label:e.$t("INBOX_MGMT.FINISH.MORE_SETTINGS")},null,8,["label"])]),_:1},8,["to"]),y(c,{to:{name:"inbox_dashboard",params:{inboxId:e.$route.params.inbox_id}}},{default:K(()=>[y(l,{solid:"",teal:"",label:e.$t("INBOX_MGMT.FINISH.BUTTON_TEXT")},null,8,["label"])]),_:1},8,["to"])])])]),_:1},8,["title","message","button-text"])])}const WQ=Ae(xQ,[["render",HQ]]),zQ={routes:[{path:At("accounts/:accountId/settings/inboxes"),component:ea,children:[{path:"",redirect:e=>({name:"settings_inbox_list",params:e.params})},{path:"list",name:"settings_inbox_list",component:lj,meta:{featureFlag:_t.INBOX_MANAGEMENT,permissions:["administrator"]}}]},{path:At("accounts/:accountId/settings/inboxes"),component:Lc,props:e=>{const t=e.name!=="settings_inbox_list",n=e.name==="settings_inbox_show";return{headerTitle:"INBOX_MGMT.HEADER",headerButtonText:"SETTINGS.INBOXES.NEW_INBOX",icon:"mail-inbox-all",newButtonRoutes:["settings_inbox_list"],showBackButton:t,fullWidth:n}},children:[{path:"new",component:lQ,children:[{path:"",name:"settings_inbox_new",component:gQ,meta:{featureFlag:_t.INBOX_MANAGEMENT,permissions:["administrator"]}},{path:":inbox_id/finish",name:"settings_inbox_finish",component:WQ,meta:{featureFlag:_t.INBOX_MANAGEMENT,permissions:["administrator"]}},{path:":sub_page",name:"settings_inboxes_page_channel",component:zz,meta:{featureFlag:_t.INBOX_MANAGEMENT,permissions:["administrator"]},props:e=>({channelName:e.params.sub_page})},{path:":inbox_id/agents",name:"settings_inboxes_add_agents",meta:{featureFlag:_t.INBOX_MANAGEMENT,permissions:["administrator"]},component:IQ}]},{path:":inboxId",name:"settings_inbox_show",component:sQ,meta:{featureFlag:_t.INBOX_MANAGEMENT,permissions:["administrator"]}}]}]},ep=e=>{const t=Oe("integrations/getIntegration"),n=C(()=>t.value(e)),s=C(()=>n.value.hook_type==="inbox"),o=C(()=>!!n.value.hooks.length),a=C(()=>n.value.allow_multiple_hooks?"multiple":"single"),i=C(()=>a.value==="multiple"),r=C(()=>a.value==="single");return{integration:n,integrationType:a,isIntegrationMultiple:i,isIntegrationSingle:r,isHookTypeInbox:s,hasConnectedHooks:o}},jQ={components:{FormKit:mC,NextButton:oe},props:{integrationId:{type:String,required:!0}},emits:["close"],setup(e){const{integration:t,isHookTypeInbox:n}=ep(e.integrationId);return{integration:t,isHookTypeInbox:n}},data(){return{endPoint:"",alertMessage:"",values:{}}},computed:{...lt({uiFlags:"integrations/getUIFlags",dialogFlowEnabledInboxes:"inboxes/dialogFlowEnabledInboxes"}),inboxes(){return this.dialogFlowEnabledInboxes.filter(e=>this.isIntegrationDialogflow?!this.connectedDialogflowInboxIds.includes(e.id):!0).map(e=>({label:e.name,value:e.id}))},connectedDialogflowInboxIds(){return this.isIntegrationDialogflow?this.integration.hooks.map(e=>{var t;return(t=e.inbox)==null?void 0:t.id}):[]},formItems(){return this.integration.settings_form_schema},isIntegrationDialogflow(){return this.integration.id==="dialogflow"}},methods:{onClose(){this.$emit("close")},buildHookPayload(){const e={app_id:this.integration.id,settings:{}};return e.settings=Object.keys(this.values).reduce((t,n)=>(n!=="inbox"&&(t[n]=this.values[n]),t),{}),this.formItems.forEach(t=>{var n;(n=t.validation)!=null&&n.includes("JSON")&&(e.settings[t.name]=JSON.parse(e.settings[t.name]))}),this.isHookTypeInbox&&this.values.inbox&&(e.inbox_id=this.values.inbox),e},async submitForm(){var e,t;try{await this.$store.dispatch("integrations/createHook",this.buildHookPayload()),this.alertMessage=this.$t("INTEGRATION_APPS.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(n){const s=(t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message;this.alertMessage=s||this.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE")}finally{ce(this.alertMessage)}}}},KQ={class:"flex flex-col h-auto overflow-auto integration-hooks"},YQ={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function XQ(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("FormKit"),l=M("NextButton");return p(),v("div",KQ,[y(i,{"header-title":s.integration.name,"header-content":s.integration.short_description},null,8,["header-title","header-content"]),y(r,{modelValue:o.values,"onUpdate:modelValue":t[0]||(t[0]=c=>o.values=c),type:"form","form-class":"w-full grid gap-4","submit-attrs":{inputClass:"hidden",wrapperClass:"hidden"},"incomplete-message":!1,onSubmit:a.submitForm},{default:K(()=>[(p(!0),v(pe,null,Ne(a.formItems,c=>(p(),$(r,fs({key:c.name,ref_for:!0},c),null,16))),128)),s.isHookTypeInbox?(p(),$(r,{key:0,options:a.inboxes,type:"select",name:"inbox","input-class":"reset-base",placeholder:e.$t("INTEGRATION_APPS.ADD.FORM.INBOX.LABEL"),label:e.$t("INTEGRATION_APPS.ADD.FORM.INBOX.PLACEHOLDER"),validation:"required","validation-name":"Inbox"},null,8,["options","placeholder","label"])):w("",!0),h("div",YQ,[y(l,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_APPS.ADD.FORM.CANCEL"),onClick:Fe(a.onClose,["prevent"])},null,8,["label","onClick"]),y(l,{type:"submit",label:e.$t("INTEGRATION_APPS.ADD.FORM.SUBMIT"),"is-loading":e.uiFlags.isCreatingHook},null,8,["label","is-loading"])])]),_:1},8,["modelValue","onSubmit"])])}const qQ=Ae(jQ,[["render",XQ]]),ZQ={class:"outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow flex-grow overflow-auto p-4"},QQ={class:"flex items-center justify-center"},JQ={class:"flex h-16 w-16 items-center justify-center"},eJ=["src"],tJ=["src"],nJ={class:"flex flex-col justify-center m-0 mx-4 flex-1"},sJ={class:"mb-1 text-xl font-medium text-n-slate-12"},aJ={class:"text-n-slate-11 text-sm leading-6"},oJ={class:"flex justify-center items-center mb-0 w-[15%]"},iJ={key:0},rJ={key:1},lJ={__name:"SingleIntegrationHooks",props:{integrationId:{type:String,required:!0}},emits:["add","delete"],setup(e){const t=e,{integration:n,hasConnectedHooks:s}=ep(t.integrationId);return(o,a)=>(p(),v("div",ZQ,[h("div",QQ,[h("div",JQ,[h("img",{src:`/dashboard/images/integrations/${e.integrationId}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,eJ),h("img",{src:`/dashboard/images/integrations/${e.integrationId}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,tJ)]),h("div",nJ,[h("h3",sJ,A(N(n).name),1),h("p",aJ,A(N(n).description),1)]),h("div",oJ,[N(s)?(p(),v("div",iJ,[h("div",{onClick:a[0]||(a[0]=i=>o.$emit("delete",N(n).hooks[0]))},[y(oe,{ruby:"",faded:"",label:o.$t("INTEGRATION_APPS.DISCONNECT.BUTTON_TEXT")},null,8,["label"])])])):(p(),v("div",rJ,[y(oe,{blue:"",faded:"",label:o.$t("INTEGRATION_APPS.CONNECT.BUTTON_TEXT"),onClick:a[1]||(a[1]=i=>o.$emit("add"))},null,8,["label"])]))])])]))}},cJ={components:{BaseSettingsHeader:Cs,NextButton:oe},props:{integrationId:{type:String,required:!0},showAddButton:{type:Boolean,default:!1}},emits:["delete","add"],setup(e){const{integration:t,isHookTypeInbox:n,hasConnectedHooks:s}=ep(e.integrationId);return{integration:t,isHookTypeInbox:n,hasConnectedHooks:s}},computed:{...lt({globalConfig:"globalConfig/get"}),hookHeaders(){return this.integration.visible_properties},hooks(){if(!this.hasConnectedHooks)return[];const{hooks:e}=this.integration;return e.map(t=>({...t,id:t.id,properties:this.hookHeaders.map(n=>t.settings[n]?t.settings[n]:"--")}))}},mounted(){},methods:{inboxName(e){return e.inbox?e.inbox.name:""}}},uJ={class:"flex flex-col flex-1 gap-8 overflow-auto"},dJ={class:"w-full"},pJ={key:0,class:"woot-table"},hJ={key:0},mJ={key:0,class:"break-words"},fJ={class:"flex justify-end gap-1"},gJ={key:1,class:"flex flex-col items-center justify-center h-full"};function _J(e,t,n,s,o,a){const i=M("NextButton"),r=M("BaseSettingsHeader"),l=qe("tooltip");return p(),v("div",uJ,[y(r,{title:s.integration.name,description:e.$t(`INTEGRATION_APPS.SIDEBAR_DESCRIPTION.${s.integration.name.toUpperCase()}`,{installationName:e.globalConfig.installationName}),"feature-name":n.integrationId,"back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:K(()=>[n.showAddButton?(p(),$(i,{key:0,icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_APPS.ADD_BUTTON"),onClick:t[0]||(t[0]=c=>e.$emit("add"))},null,8,["label"])):w("",!0)]),_:1},8,["title","description","feature-name","back-button-label"]),h("div",dJ,[s.hasConnectedHooks?(p(),v("table",pJ,[h("thead",null,[(p(!0),v(pe,null,Ne(a.hookHeaders,c=>(p(),v("th",{key:c,class:"ltr:!pl-0 rtl:!pr-0"},A(c),1))),128)),s.isHookTypeInbox?(p(),v("th",hJ,A(e.$t("INTEGRATION_APPS.LIST.INBOX")),1)):w("",!0)]),h("tbody",null,[(p(!0),v(pe,null,Ne(a.hooks,c=>(p(),v("tr",{key:c.id},[(p(!0),v(pe,null,Ne(c.properties,u=>(p(),v("td",{key:u,class:"ltr:!pl-0 rtl:!pr-0"},A(u),1))),128)),s.isHookTypeInbox?(p(),v("td",mJ,A(a.inboxName(c)),1)):w("",!0),h("td",fJ,[re(y(i,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:u=>e.$emit("delete",c)},null,8,["onClick"]),[[l,e.$t("INTEGRATION_APPS.LIST.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])])):(p(),v("p",gJ,A(e.$t("INTEGRATION_APPS.NO_HOOK_CONFIGURED",{integrationId:s.integration.id})),1))])])}const vJ=Ae(cJ,[["render",_J]]),bJ={components:{NewHook:qQ,SingleIntegrationHooks:lJ,MultipleIntegrationHooks:vJ},props:{integrationId:{type:[String,Number],required:!0}},setup(e){const{integrationId:t}=e,{integration:n,isIntegrationMultiple:s,isIntegrationSingle:o,isHookTypeInbox:a}=ep(t);return{integration:n,isIntegrationMultiple:s,isIntegrationSingle:o,isHookTypeInbox:a}},data(){return{loading:{},showAddHookModal:!1,showDeleteConfirmationPopup:!1,selectedHook:{},alertMessage:""}},computed:{...lt({uiFlags:"integrations/getUIFlags"}),showIntegrationHooks(){return!this.uiFlags.isFetching&&!MO(this.integration)},showAddButton(){return this.showIntegrationHooks&&this.isIntegrationMultiple},deleteTitle(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.TITLE.INBOX"):this.$t("INTEGRATION_APPS.DELETE.TITLE.ACCOUNT")},deleteMessage(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.MESSAGE.INBOX"):this.$t("INTEGRATION_APPS.DELETE.MESSAGE.ACCOUNT")},confirmText(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.CONFIRM_BUTTON_TEXT.INBOX"):this.$t("INTEGRATION_APPS.DELETE.CONFIRM_BUTTON_TEXT.ACCOUNT")},cancelText(){return this.$t("INTEGRATION_APPS.DELETE.CANCEL_BUTTON_TEXT")}},methods:{openAddHookModal(){this.showAddHookModal=!0},hideAddHookModal(){this.showAddHookModal=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedHook=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},async confirmDeletion(){var e,t;try{await this.$store.dispatch("integrations/deleteHook",{hookId:this.selectedHook.id,appId:this.selectedHook.app_id}),this.alertMessage=this.$t("INTEGRATION_APPS.DELETE.API.SUCCESS_MESSAGE"),this.closeDeletePopup()}catch(n){const s=(t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message;this.alertMessage=s||this.$t("INTEGRATION_APPS.DELETE.API.ERROR_MESSAGE")}finally{ce(this.alertMessage)}}}},EJ={class:"overflow-auto p-4 w-full my-auto flex flex-wrap h-full"},TJ={key:0,class:"w-full"},yJ={key:0},SJ={key:1};function AJ(e,t,n,s,o,a){const i=M("MultipleIntegrationHooks"),r=M("SingleIntegrationHooks"),l=M("NewHook"),c=M("woot-modal"),u=M("woot-delete-modal");return p(),v("div",EJ,[a.showIntegrationHooks?(p(),v("div",TJ,[s.isIntegrationMultiple?(p(),v("div",yJ,[y(i,{"integration-id":n.integrationId,"show-add-button":a.showAddButton,onAdd:a.openAddHookModal,onDelete:a.openDeletePopup},null,8,["integration-id","show-add-button","onAdd","onDelete"])])):w("",!0),s.isIntegrationSingle?(p(),v("div",SJ,[y(r,{"integration-id":n.integrationId,onAdd:a.openAddHookModal,onDelete:a.openDeletePopup},null,8,["integration-id","onAdd","onDelete"])])):w("",!0)])):w("",!0),y(c,{show:o.showAddHookModal,"onUpdate:show":t[0]||(t[0]=d=>o.showAddHookModal=d),"on-close":a.hideAddHookModal},{default:K(()=>[y(l,{"integration-id":n.integrationId,onClose:a.hideAddHookModal},null,8,["integration-id","onClose"])]),_:1},8,["show","on-close"]),y(u,{show:o.showDeleteConfirmationPopup,"onUpdate:show":t[1]||(t[1]=d=>o.showDeleteConfirmationPopup=d),"on-close":a.closeDeletePopup,"on-confirm":a.confirmDeletion,title:a.deleteTitle,message:a.deleteMessage,"confirm-text":a.confirmText,"reject-text":a.cancelText},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const IJ=Ae(bJ,[["render",AJ]]),CJ={class:"flex flex-col flex-1 p-6 m-[1px] outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},OJ={class:"flex items-start justify-between"},NJ={class:"flex h-12 w-12 mb-4"},wJ=["src"],RJ=["src"],xJ={class:"flex flex-col m-0 flex-1"},$J={class:"font-medium mb-2 text-n-slate-12 flex justify-between items-center"},MJ={class:"text-base font-semibold"},LJ={class:"text-n-slate-11"},kJ={__name:"IntegrationItem",props:{id:{type:[String,Number],required:!0},name:{type:String,default:""},description:{type:String,default:""},enabled:{type:Boolean,default:!1}},setup(e){const t=e,n=nn(),s=n.getCurrentAccountId,o=n["globalConfig/get"],{t:a}=Me(),i=C(()=>t.enabled?a("INTEGRATION_APPS.STATUS.ENABLED"):a("INTEGRATION_APPS.STATUS.DISABLED")),r=C(()=>t.enabled?"bg-n-teal-9":"bg-n-slate-8"),l=C(()=>At(`accounts/${s.value}/settings/integrations/${t.id}`));return(c,u)=>{const d=M("router-link"),m=qe("tooltip");return p(),v("div",CJ,[h("div",OJ,[h("div",NJ,[h("img",{src:`/dashboard/images/integrations/${e.id}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,wJ),h("img",{src:`/dashboard/images/integrations/${e.id}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,RJ)]),re((p(),v("span",{class:se(["text-white p-0.5 rounded-full w-5 h-5 flex items-center justify-center",r.value])},u[0]||(u[0]=[h("i",{class:"i-ph-check-bold text-sm"},null,-1)]),2)),[[m,i.value]])]),h("div",xJ,[h("div",$J,[h("span",MJ,A(e.name),1),y(d,{to:l.value},{default:K(()=>[y(oe,{label:c.$t("INTEGRATION_APPS.CONFIGURE"),link:""},null,8,["label"])]),_:1},8,["to"])]),h("p",LJ,A(N(Of)(e.description,N(o).installationName)),1)])])}}},DJ={class:"flex-grow flex-shrink overflow-auto"},PJ={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},BJ={__name:"Index",setup(e){const t=pt(),n=nn(),s=n["integrations/getUIFlags"],o=C(()=>n["integrations/getAppIntegrations"].value);return dt(()=>{t.dispatch("integrations/get")}),(a,i)=>(p(),$(Da,{"is-loading":N(s).isFetching,"loading-message":a.$t("INTEGRATION_SETTINGS.LOADING")},{header:K(()=>[y(Cs,{title:a.$t("INTEGRATION_SETTINGS.HEADER"),description:a.$t("INTEGRATION_SETTINGS.DESCRIPTION"),"link-text":a.$t("INTEGRATION_SETTINGS.LEARN_MORE"),"feature-name":"integrations"},null,8,["title","description","link-text"])]),body:K(()=>[h("div",DJ,[h("div",PJ,[(p(!0),v(pe,null,Ne(o.value,r=>(p(),$(kJ,{id:r.id,key:r.id,logo:r.logo,name:r.name,description:r.description,enabled:r.enabled},null,8,["id","logo","name","description","enabled"]))),128))])])]),_:1},8,["is-loading","loading-message"]))}},$g=(e,t)=>{const n=t.toUpperCase();return`${e}.${n}`},{EXAMPLE_WEBHOOK_URL:FJ}=It,UJ=["conversation_created","conversation_status_changed","conversation_updated","message_created","message_updated","webwidget_triggered","contact_created","contact_updated","conversation_typing_on","conversation_typing_off"],GJ={components:{NextButton:oe},props:{value:{type:Object,default:()=>({})},isSubmitting:{type:Boolean,default:!1},submitLabel:{type:String,required:!0}},emits:["submit","cancel"],setup(){return{v$:bt()}},validations:{url:{required:Ye,minLength:Qt(7),url:Ic},subscriptions:{required:Ye}},data(){return{url:this.value.url||"",subscriptions:this.value.subscriptions||[],supportedWebhookEvents:UJ}},computed:{webhookURLInputPlaceholder(){return this.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.PLACEHOLDER",{webhookExampleURL:FJ})}},methods:{onSubmit(){this.$emit("submit",{url:this.url,subscriptions:this.subscriptions})},getI18nKey:$g}},VJ={class:"w-full"},HJ=["placeholder"],WJ={key:0,class:"message"},zJ={class:"flex flex-col gap-2.5 mb-4"},jJ=["id","value"],KJ=["for"],YJ={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function XJ(e,t,n,s,o,a){const i=M("NextButton");return p(),v("form",{class:"flex flex-col w-full",onSubmit:t[4]||(t[4]=Fe((...r)=>a.onSubmit&&a.onSubmit(...r),["prevent"]))},[h("div",VJ,[h("label",{class:se({error:s.v$.url.$error})},[Re(A(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.url=r),type:"text",name:"url",placeholder:a.webhookURLInputPlaceholder,onInput:t[1]||(t[1]=(...r)=>s.v$.url.$touch&&s.v$.url.$touch(...r))},null,40,HJ),[[mt,o.url]]),s.v$.url.$error?(p(),v("span",WJ,A(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.ERROR")),1)):w("",!0)],2),h("label",{class:se([{error:s.v$.url.$error},"mb-2"])},A(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.LABEL")),3),h("div",zJ,[(p(!0),v(pe,null,Ne(o.supportedWebhookEvents,r=>(p(),v("div",{key:r,class:"flex items-center"},[re(h("input",{id:r,"onUpdate:modelValue":t[2]||(t[2]=l=>o.subscriptions=l),type:"checkbox",value:r,name:"subscriptions",class:"mr-2"},null,8,jJ),[[pn,o.subscriptions]]),h("label",{for:r,class:"text-sm"},A(`${e.$t(a.getI18nKey("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS",r))} (${r})`),9,KJ)]))),128))])]),h("div",YJ,[y(i,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.CANCEL"),onClick:t[3]||(t[3]=Fe(r=>e.$emit("cancel"),["prevent"]))},null,8,["label"]),y(i,{type:"submit",disabled:s.v$.$invalid||n.isSubmitting,"is-loading":n.isSubmitting,label:n.submitLabel},null,8,["disabled","is-loading","label"])])],32)}const Ky=Ae(GJ,[["render",XJ]]),qJ={components:{WebhookForm:Ky},mixins:[jo],props:{onClose:{type:Function,required:!0}},computed:{...lt({globalConfig:"globalConfig/get",uiFlags:"webhooks/getUIFlags"})},methods:{async onSubmit(e){try{await this.$store.dispatch("webhooks/create",{webhook:e}),ce(this.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(t){const n=t.response.data.message||this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE");ce(n)}}}},ZJ={class:"h-auto overflow-auto flex flex-col"};function QJ(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("WebhookForm");return p(),v("div",ZJ,[y(i,{"header-title":e.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.TITLE"),"header-content":e.useInstallationName(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.DESC"),e.globalConfig.installationName)},null,8,["header-title","header-content"]),y(r,{"is-submitting":e.uiFlags.creatingItem,"submit-label":e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.ADD_SUBMIT"),onSubmit:a.onSubmit,onCancel:n.onClose},null,8,["is-submitting","submit-label","onSubmit","onCancel"])])}const JJ=Ae(qJ,[["render",QJ]]),eee={components:{WebhookForm:Ky},props:{value:{type:Object,required:!0},id:{type:[Number,String],required:!0},onClose:{type:Function,required:!0}},computed:{...lt({uiFlags:"webhooks/getUIFlags"})},methods:{async onSubmit(e){var t,n;try{await this.$store.dispatch("webhooks/update",{webhook:e,id:this.id}),ce(this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.SUCCESS_MESSAGE")),this.onClose()}catch(s){const o=((n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.message)||this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE");ce(o)}}}},tee={class:"flex flex-col h-auto overflow-auto"};function nee(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("WebhookForm");return p(),v("div",tee,[y(i,{"header-title":e.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.TITLE")},null,8,["header-title"]),y(r,{value:n.value,"is-submitting":e.uiFlags.updatingItem,"submit-label":e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.EDIT_SUBMIT"),onSubmit:a.onSubmit,onCancel:n.onClose},null,8,["value","is-submitting","submit-label","onSubmit","onCancel"])])}const see=Ae(eee,[["render",nee]]),aee={__name:"ShowMore",props:{text:{type:String,default:""},limit:{type:Number,default:120}},setup(e){const t=e,{t:n}=Me(),s=X(!1),o=C(()=>s.value||t.text.length<=t.limit?t.text:t.text.slice(0,t.limit)+"..."),a=C(()=>{const r=s.value?"SHOW_LESS":"SHOW_MORE";return n(`COMPONENTS.SHOW_MORE_BLOCK.${r}`)}),i=()=>{s.value=!s.value};return(r,l)=>(p(),v("span",null,[Re(A(o.value)+" ",1),e.text.length>e.limit?(p(),v("button",{key:0,class:"text-woot-500 !p-0 !border-0 align-top",onClick:i},A(a.value),1)):w("",!0)]))}},oee={class:"py-4 ltr:pr-4 rtl:pl-4"},iee={class:"font-medium break-words text-slate-700 dark:text-slate-100"},ree={class:"block mt-1 text-sm text-slate-500 dark:text-slate-400"},lee={class:"font-medium"},cee={class:"py-4 min-w-xs"},uee={class:"flex justify-end gap-1"},dee={__name:"WebhookRow",props:{webhook:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["edit","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=C(()=>{const{subscriptions:i}=n.webhook;return i.map(r=>o($g("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS",r))).join(", ")});return(i,r)=>{const l=qe("tooltip");return p(),v("tr",null,[h("td",oee,[h("div",iee,A(e.webhook.url),1),h("div",ree,[h("span",lee,A(i.$t("INTEGRATION_SETTINGS.WEBHOOK.SUBSCRIBED_EVENTS"))+": ",1),y(aee,{text:a.value,limit:60},null,8,["text"])])]),h("td",cee,[h("div",uee,[re(y(oe,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:r[0]||(r[0]=c=>s("edit",e.webhook))},null,512),[[l,i.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),re(y(oe,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:r[1]||(r[1]=c=>s("delete",e.webhook,e.index))},null,512),[[l,i.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])])])}}},pee={components:{SettingsLayout:Da,NextButton:oe,BaseSettingsHeader:Cs,NewWebhook:JJ,EditWebhook:see,WebhookRow:dee},data(){return{loading:{},showAddPopup:!1,showEditPopup:!1,showDeleteConfirmationPopup:!1,selectedWebHook:{}}},computed:{...lt({records:"webhooks/getWebhooks",uiFlags:"webhooks/getUIFlags"}),integration(){return this.$store.getters["integrations/getIntegration"]("webhook")},tableHeaders(){return[this.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER.WEBHOOK_ENDPOINT"),this.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER.ACTIONS")]}},mounted(){this.$store.dispatch("webhooks/get")},methods:{openAddPopup(){this.showAddPopup=!0},hideAddPopup(){this.showAddPopup=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedWebHook=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},openEditPopup(e){this.showEditPopup=!0,this.selectedWebHook=e},hideEditPopup(){this.showEditPopup=!1},confirmDeletion(){this.loading[this.selectedWebHook.id]=!0,this.closeDeletePopup(),this.deleteWebhook(this.selectedWebHook.id)},async deleteWebhook(e){try{await this.$store.dispatch("webhooks/delete",e),ce(this.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.SUCCESS_MESSAGE"))}catch{ce(this.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"))}}}},hee={class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},mee={class:"divide-y divide-slate-25 dark:divide-slate-800 flex-1 text-slate-700 dark:text-slate-100"};function fee(e,t,n,s,o,a){const i=M("NextButton"),r=M("BaseSettingsHeader"),l=M("WebhookRow"),c=M("NewWebhook"),u=M("woot-modal"),d=M("EditWebhook"),m=M("woot-delete-modal"),f=M("SettingsLayout");return p(),$(f,{"is-loading":e.uiFlags.fetchingList,"loading-message":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LOADING"),"no-records-message":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.404"),"no-records-found":!e.records.length},{header:K(()=>[a.integration.name?(p(),$(r,{key:0,title:a.integration.name,description:a.integration.description,"link-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LEARN_MORE"),"feature-name":"webhook","back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:K(()=>[y(i,{blue:"",icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_SETTINGS.WEBHOOK.HEADER_BTN_TXT"),onClick:a.openAddPopup},null,8,["label","onClick"])]),_:1},8,["title","description","link-text","back-button-label"])):w("",!0)]),body:K(()=>[h("table",hee,[h("thead",null,[(p(!0),v(pe,null,Ne(a.tableHeaders,g=>(p(),v("th",{key:g,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11 last:text-right last:pr-4"},A(g),1))),128))]),h("tbody",mee,[(p(!0),v(pe,null,Ne(e.records,(g,T)=>(p(),$(l,{key:g.id,index:T,webhook:g,onEdit:a.openEditPopup,onDelete:a.openDeletePopup},null,8,["index","webhook","onEdit","onDelete"]))),128))])])]),default:K(()=>[y(u,{show:o.showAddPopup,"onUpdate:show":t[0]||(t[0]=g=>o.showAddPopup=g),"on-close":a.hideAddPopup},{default:K(()=>[o.showAddPopup?(p(),$(c,{key:0,"on-close":a.hideAddPopup},null,8,["on-close"])):w("",!0)]),_:1},8,["show","on-close"]),y(u,{show:o.showEditPopup,"onUpdate:show":t[1]||(t[1]=g=>o.showEditPopup=g),"on-close":a.hideEditPopup},{default:K(()=>[o.showEditPopup?(p(),$(d,{key:0,id:o.selectedWebHook.id,value:o.selectedWebHook,"on-close":a.hideEditPopup},null,8,["id","value","on-close"])):w("",!0)]),_:1},8,["show","on-close"]),y(m,{show:o.showDeleteConfirmationPopup,"onUpdate:show":t[2]||(t[2]=g=>o.showDeleteConfirmationPopup=g),"on-close":a.closeDeletePopup,"on-confirm":a.confirmDeletion,title:e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),message:e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE",{webhookURL:o.selectedWebHook.url}),"confirm-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"reject-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-message","no-records-found"])}const gee=Ae(pee,[["render",fee]]),_ee={components:{NextButton:oe},props:{show:{type:Boolean,default:!1},mode:{type:String,default:"create"},selectedAppData:{type:Object,default:()=>({})}},emits:["close"],setup(){return{v$:bt()}},validations:{app:{title:{required:Ye},content:{type:{required:Ye},url:{required:Ye,url:Ic}}}},data(){return{isLoading:!1,app:{title:"",content:{type:"frame",url:""}}}},computed:{header(){return this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.HEADER`)},submitButtonLabel(){return this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.FORM_SUBMIT`)}},mounted(){this.mode==="UPDATE"&&this.selectedAppData&&(this.app.title=this.selectedAppData.title,this.app.content=this.selectedAppData.content[0])},methods:{closeModal(){this.app={title:"",content:{type:"frame",url:""}},this.$emit("close")},async submit(){try{if(this.v$.$touch(),this.v$.$invalid)return;const e=this.mode.toLowerCase(),t={title:this.app.title,content:[this.app.content]};e==="update"&&(t.id=this.selectedAppData.id),this.isLoading=!0,await this.$store.dispatch(`dashboardApps/${e}`,t),ce(this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.API_SUCCESS`)),this.closeModal()}catch{ce(this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.API_ERROR`))}finally{this.isLoading=!1}}}},vee={class:"flex flex-col h-auto overflow-auto"},bee={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Eee(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("woot-input"),l=M("NextButton"),c=M("woot-modal");return p(),$(c,{show:n.show,"on-close":a.closeModal},{default:K(()=>[h("div",vee,[y(i,{"header-title":a.header},null,8,["header-title"]),h("form",{class:"w-full",onSubmit:t[2]||(t[2]=Fe((...u)=>a.submit&&a.submit(...u),["prevent"]))},[y(r,{modelValue:o.app.title,"onUpdate:modelValue":t[0]||(t[0]=u=>o.app.title=u),class:se([{error:s.v$.app.title.$error},"w-full"]),label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_LABEL"),placeholder:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_PLACEHOLDER"),error:s.v$.app.title.$error?e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_ERROR"):null,"data-testid":"app-title",onInput:s.v$.app.title.$touch,onBlur:s.v$.app.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),y(r,{modelValue:o.app.content.url,"onUpdate:modelValue":t[1]||(t[1]=u=>o.app.content.url=u),class:se([{error:s.v$.app.content.url.$error},"w-full"]),label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_LABEL"),placeholder:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_PLACEHOLDER"),error:s.v$.app.content.url.$error?e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_ERROR"):null,"data-testid":"app-url",onInput:s.v$.app.content.url.$touch,onBlur:s.v$.app.content.url.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),h("div",bee,[y(l,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.CREATE.FORM_CANCEL"),onClick:Fe(a.closeModal,["prevent"])},null,8,["label","onClick"]),y(l,{type:"submit",label:a.submitButtonLabel,disabled:s.v$.$invalid,"is-loading":o.isLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const Tee=Ae(_ee,[["render",Eee]]),yee={class:"max-w-full py-1"},See=["title"],Aee=["title"],Iee={class:"flex gap-1 py-4 ltr:pr-4 rtl:pl-4 text-sm sm:pr-0 justify-end"},Cee={__name:"DashboardAppsRow",props:{app:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(e){return(t,n)=>{const s=qe("tooltip");return p(),v("tr",yee,[h("td",{class:"py-4 ltr:pr-4 rtl:pl-4 text-sm w-40 max-w-[10rem] truncate",title:e.app.title},A(e.app.title),9,See),h("td",{class:"max-w-lg py-4 ltr:pr-4 rtl:pl-4 text-sm truncate",title:e.app.content[0].url},A(e.app.content[0].url),9,Aee),h("td",Iee,[re(y(oe,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:n[0]||(n[0]=o=>t.$emit("edit",e.app))},null,512),[[s,t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.EDIT_TOOLTIP"),void 0,{top:!0}]]),re(y(oe,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:n[1]||(n[1]=o=>t.$emit("delete",e.app))},null,512),[[s,t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.DELETE_TOOLTIP"),void 0,{top:!0}]])])])}}},Oee={components:{BaseSettingsHeader:Cs,DashboardAppModal:Tee,DashboardAppsRow:Cee,NextButton:oe},mixins:[jo],data(){return{loading:{},showDashboardAppPopup:!1,showDeleteConfirmationPopup:!1,selectedApp:{},mode:"CREATE"}},computed:{...lt({records:"dashboardApps/getRecords",uiFlags:"dashboardApps/getUIFlags"}),tableHeaders(){return[this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.TABLE_HEADER.NAME"),this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.TABLE_HEADER.ENDPOINT")]}},mounted(){this.$store.dispatch("dashboardApps/get")},methods:{toggleDashboardAppPopup(){this.showDashboardAppPopup=!this.showDashboardAppPopup,this.selectedApp={}},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedApp=e},openCreatePopup(){this.mode="CREATE",this.selectedApp={},this.showDashboardAppPopup=!0},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},editApp(e){this.loading[e.id]=!0,this.mode="UPDATE",this.selectedApp=e,this.showDashboardAppPopup=!0},confirmDeletion(){this.loading[this.selectedApp.id]=!0,this.closeDeletePopup(),this.deleteApp(this.selectedApp.id)},async deleteApp(e){try{await this.$store.dispatch("dashboardApps/delete",e),ce(this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.API_SUCCESS"))}catch{ce(this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.API_ERROR"))}}}},Nee={class:"flex flex-col flex-1 gap-8 overflow-auto"},wee={class:"w-full overflow-x-auto text-slate-700 dark:text-slate-200"},Ree={key:0,class:"flex flex-col items-center justify-center h-full"},xee={key:2,class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},$ee={class:"divide-y divide-slate-50 dark:divide-slate-800"};function Mee(e,t,n,s,o,a){const i=M("NextButton"),r=M("BaseSettingsHeader"),l=M("woot-loading-state"),c=M("DashboardAppsRow"),u=M("DashboardAppModal"),d=M("woot-delete-modal");return p(),v("div",Nee,[y(r,{title:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.TITLE"),description:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DESCRIPTION"),"link-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LEARN_MORE"),"feature-name":"dashboard_apps","back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:K(()=>[y(i,{icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.HEADER_BTN_TXT"),onClick:a.openCreatePopup},null,8,["label","onClick"])]),_:1},8,["title","description","link-text","back-button-label"]),h("div",wee,[!e.uiFlags.isFetching&&!e.records.length?(p(),v("p",Ree,A(e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.404")),1)):w("",!0),e.uiFlags.isFetching?(p(),$(l,{key:1,message:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.LOADING")},null,8,["message"])):w("",!0),!e.uiFlags.isFetching&&e.records.length?(p(),v("table",xee,[h("thead",null,[(p(!0),v(pe,null,Ne(a.tableHeaders,m=>(p(),v("th",{key:m,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-slate-700 dark:text-slate-300"},A(m),1))),128))]),h("tbody",$ee,[(p(!0),v(pe,null,Ne(e.records,(m,f)=>(p(),$(c,{key:m.id,index:f,app:m,onEdit:a.editApp,onDelete:a.openDeletePopup},null,8,["index","app","onEdit","onDelete"]))),128))])])):w("",!0)]),o.showDashboardAppPopup?(p(),$(u,{key:0,show:o.showDashboardAppPopup,mode:o.mode,"selected-app-data":o.selectedApp,onClose:a.toggleDashboardAppPopup},null,8,["show","mode","selected-app-data","onClose"])):w("",!0),y(d,{show:o.showDeleteConfirmationPopup,"onUpdate:show":t[0]||(t[0]=m=>o.showDeleteConfirmationPopup=m),"on-close":a.closeDeletePopup,"on-confirm":a.confirmDeletion,title:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.TITLE"),message:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.MESSAGE",{appName:o.selectedApp.title}),"confirm-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.CONFIRM_YES"),"reject-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.CONFIRM_NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const Lee=Ae(Oee,[["render",Mee]]),kee={class:"flex flex-col items-start justify-between lg:flex-row lg:items-center p-6 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow gap-6"},Dee={class:"flex items-start lg:items-center justify-start flex-1 m-0 gap-6 flex-col lg:flex-row"},Pee={class:"flex h-16 w-16 items-center justify-center flex-shrink-0"},Bee=["src"],Fee=["src"],Uee={class:"mb-1 text-xl font-medium text-n-slate-12"},Gee={class:"text-n-slate-11 text-sm leading-6"},Vee={class:"flex justify-center items-center mb-0"},Hee={key:0},Wee={key:0},zee={key:1},jee={key:0},Kee=["href"],tp={__name:"Integration",props:{integrationId:{type:[String,Number],required:!0},integrationName:{type:String,default:""},integrationDescription:{type:String,default:""},integrationEnabled:{type:Boolean,default:!1},integrationAction:{type:String,default:""},actionButtonText:{type:String,default:""},deleteConfirmationText:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=Me(),s=So(),o=xn(),a=X(null),i=C(()=>s.getters.getCurrentAccountId),r=C(()=>s.getters["globalConfig/get"]),l=()=>{a.value&&a.value.open()},c=()=>{a.value&&a.value.close()},u=async()=>{try{await s.dispatch("integrations/deleteIntegration",t.integrationId),ce(n("INTEGRATION_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{ce(n("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"))}},d=()=>{c(),u(),o.push({name:"settings_applications"})};return(m,f)=>{const g=M("router-link");return p(),v("div",kee,[h("div",Dee,[h("div",Pee,[h("img",{src:`/dashboard/images/integrations/${e.integrationId}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,Bee),h("img",{src:`/dashboard/images/integrations/${e.integrationId}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,Fee)]),h("div",null,[h("h3",Uee,A(e.integrationName),1),h("p",Gee,A(N(Of)(e.integrationDescription,r.value.installationName)),1)])]),h("div",Vee,[y(g,{to:N(At)(`accounts/${i.value}/settings/integrations/`+e.integrationId)},{default:K(()=>[e.integrationEnabled?(p(),v("div",Hee,[e.integrationAction==="disconnect"?(p(),v("div",Wee,[y(oe,{label:e.actionButtonText||m.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),faded:"",ruby:"",onClick:l},null,8,["label"])])):(p(),v("div",zee,[y(oe,{faded:"",blue:"",label:N(n)("INTEGRATION_SETTINGS.WEBHOOK.CONFIGURE")},null,8,["label"])]))])):w("",!0)]),_:1},8,["to"]),e.integrationEnabled?w("",!0):(p(),v("div",jee,[We(m.$slots,"action",{},()=>[h("a",{href:e.integrationAction},[y(oe,{faded:"",blue:"",label:N(n)("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT")},null,8,["label"])],8,Kee)])]))]),y(cs,{ref_key:"dialogRef",ref:a,type:"alert",title:e.deleteConfirmationText.title||N(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),description:e.deleteConfirmationText.message||N(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE"),"confirm-button-label":N(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"cancel-button-label":N(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO"),onConfirm:d},null,8,["title","description","confirm-button-label","cancel-button-label"])])}}},Yee={class:"px-6 py-4 mb-4 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},Xee={class:"flex"},qee={class:"ml-3"},Zee={class:"mb-1 text-base font-semibold text-n-slate-12"},Qee={class:"mt-2 text-sm text-n-slate-11 mb-3"},Jee={key:0,class:"mb-2 mt-1 ml-8"},ete={key:1,class:"inline-flex"},tte={value:""},nte=["value"],ste={__name:"SelectChannelWarning",props:{hasConnectedAChannel:{type:Boolean,default:!0}},setup(e){const t=e,n=So(),{t:s}=Me(),{formatMessage:o}=ya(),a=X(""),i=X([]),r=C(()=>n.getters["integrations/getUIFlags"]),l=C(()=>t.hasConnectedAChannel?s("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.EXPIRED"):s("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.DESCRIPTION")),c=C(()=>n.getters["globalConfig/get"]),u=C(()=>o(Of(l.value,c.value.installationName),!1)),d=async()=>{try{i.value=await n.dispatch("integrations/listAllSlackChannels"),i.value.sort((f,g)=>f.name-g.name)}catch{s("INTEGRATION_SETTINGS.SLACK.FAILED_TO_FETCH_CHANNELS"),i.value=[]}},m=async()=>{try{await n.dispatch("integrations/updateSlack",{referenceId:a.value}),ce(s("INTEGRATION_SETTINGS.SLACK.UPDATE_SUCCESS"))}catch(f){ce(f.message||"INTEGRATION_SETTINGS.SLACK.UPDATE_ERROR")}};return(f,g)=>{const T=qe("dompurify-html");return p(),v("div",Yee,[h("div",Xee,[g[1]||(g[1]=h("div",{class:"flex-shrink-0"},[h("div",{class:"i-lucide-bell text-xl text-n-amber-11 mt-1"})],-1)),h("div",qee,[h("p",Zee,A(f.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.ATTENTION_REQUIRED")),1),h("div",Qee,[re(h("p",null,null,512),[[T,u.value]])])])]),e.hasConnectedAChannel?w("",!0):(p(),v("div",Jee,[i.value.length?(p(),v("div",ete,[re(h("select",{"onUpdate:modelValue":g[0]||(g[0]=S=>a.value=S),class:"h-8 py-1 mr-4 text-xs leading-4 border border-yellow-300"},[h("option",tte,A(f.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.OPTION_LABEL")),1),(p(!0),v(pe,null,Ne(i.value,S=>(p(),v("option",{key:S.id,value:S.id}," #"+A(S.name),9,nte))),128))],512),[[gn,a.value]]),y(oe,{teal:"",sm:"","is-loading":r.value.isUpdatingSlack,onClick:m},{default:K(()=>[Re(A(f.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.UPDATE")),1)]),_:1},8,["is-loading"])])):(p(),$(oe,{key:0,amber:"",sm:"","is-loading":r.value.isFetchingSlackChannels,onClick:d},{default:K(()=>[Re(A(f.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.BUTTON_TEXT")),1)]),_:1},8,["is-loading"]))]))])}}},ate={class:"flex-1 w-full px-6 py-5 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},ote={class:"prose-lg max-w-5xl"},ite={class:"text-n-slate-12 tracking-tight"},rte={class:"text-n-slate-11"},lte={__name:"SlackIntegrationHelpText",props:{selectedChannelName:{type:String,required:!0}},setup(e){const t=e,{t:n}=Me(),{formatMessage:s}=ya(),o=C(()=>s(n("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.BODY",{selectedChannelName:t.selectedChannelName}),!1));return(a,i)=>{const r=qe("dompurify-html");return p(),v("div",ate,[h("div",ote,[h("h5",ite,A(N(n)("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.TITLE")),1),re(h("div",rte,null,512),[[r,o.value]])])])}}},cte={key:0,class:"flex flex-col flex-1 overflow-auto gap-5 pt-1 pb-10"},ute={key:0,class:"flex-1"},dte={key:1,class:"flex items-center justify-center flex-1"},pte={__name:"Slack",props:{code:{type:String,default:""}},setup(e){const t=e,n=So(),s=xn(),o=sn(),{t:a}=Me(),i=X(!1),r=C(()=>n.getters["integrations/getIntegration"]("slack")),l=C(()=>{const{hooks:S=[]}=r.value||{};return!!S.length}),c=C(()=>{const{hooks:S=[]}=r.value||{},[_]=S;return _||{}}),u=C(()=>c.value.status||!1),d=C(()=>!!c.value.reference_id),m=C(()=>{if(c.value.status){const{settings:{channel_name:S=""}={}}=c.value;return S||"customer-conversations"}return a("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.SELECTED")}),f=C(()=>n.getters["integrations/getUIFlags"]),g=C(()=>r.value.enabled?"disconnect":r.value.action),T=async()=>{await n.dispatch("integrations/get","slack"),t.code&&(await n.dispatch("integrations/connectSlack",t.code),s.replace(o.path)),i.value=!0};return dt(()=>{T()}),(S,_)=>i.value&&!f.value.isCreatingSlack?(p(),v("div",cte,[y(tp,{"integration-id":r.value.id,"integration-logo":r.value.logo,"integration-name":r.value.name,"integration-description":r.value.description,"integration-enabled":r.value.enabled,"integration-action":g.value,"action-button-text":S.$t("INTEGRATION_SETTINGS.SLACK.DELETE"),"delete-confirmation-text":{title:S.$t("INTEGRATION_SETTINGS.SLACK.DELETE_CONFIRMATION.TITLE"),message:S.$t("INTEGRATION_SETTINGS.SLACK.DELETE_CONFIRMATION.MESSAGE")}},null,8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","action-button-text","delete-confirmation-text"]),l.value?(p(),v("div",ute,[u.value?w("",!0):(p(),$(ste,{key:0,"has-connected-a-channel":d.value},null,8,["has-connected-a-channel"])),y(lte,{"selected-channel-name":m.value},null,8,["selected-channel-name"])])):w("",!0)])):(p(),v("div",dte,[y(bs,{size:"","color-scheme":"primary"})]))}},hte={class:"flex-grow flex-shrink p-4 overflow-auto max-w-6xl mx-auto"},mte={key:0},fte={key:1,class:"flex items-center justify-center flex-1"},gte={__name:"Linear",setup(e){const t=pt(),n=X(!1),s=Xs("integrations/getIntegration","linear"),o=Oe("integrations/getUIFlags"),a=C(()=>s.value.enabled?"disconnect":s.value.action),i=async()=>{await t.dispatch("integrations/get","linear"),n.value=!0};return dt(()=>{i()}),(r,l)=>(p(),v("div",hte,[n.value&&!N(o).isCreatingLinear?(p(),v("div",mte,[y(tp,{"integration-id":N(s).id,"integration-logo":N(s).logo,"integration-name":N(s).name,"integration-description":N(s).description,"integration-enabled":N(s).enabled,"integration-action":a.value,"delete-confirmation-text":{title:r.$t("INTEGRATION_SETTINGS.LINEAR.DELETE.TITLE"),message:r.$t("INTEGRATION_SETTINGS.LINEAR.DELETE.MESSAGE")}},null,8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"])])):(p(),v("div",fte,[y(bs,{size:"","color-scheme":"primary"})]))]))}};class _te extends Io{constructor(){super("notion",{accountScoped:!0})}generateAuthorization(){return axios.post(`${this.url}/authorization`)}}const vte=new _te,bte={class:"flex-grow flex-shrink p-4 overflow-auto mx-auto"},Ete={key:0},Tte={key:1,class:"flex items-center justify-center flex-1"},yte={__name:"Notion",setup(e){const{t}=Me(),n=pt(),s=X(!1),o=Xs("integrations/getIntegration","notion"),a=Oe("integrations/getUIFlags"),i=C(()=>o.value.enabled?"disconnect":""),r=async()=>{const c=await vte.generateAuthorization(),{data:{url:u}}=c;window.location.href=u},l=async()=>{await n.dispatch("integrations/get","notion"),s.value=!0};return dt(()=>{l()}),(c,u)=>(p(),v("div",bte,[s.value&&!N(a).isCreatingNotion?(p(),v("div",Ete,[y(tp,{"integration-id":N(o).id,"integration-logo":N(o).logo,"integration-name":N(o).name,"integration-description":N(o).description,"integration-enabled":N(o).enabled,"integration-action":i.value,"delete-confirmation-text":{title:N(t)("INTEGRATION_SETTINGS.NOTION.DELETE.TITLE"),message:N(t)("INTEGRATION_SETTINGS.NOTION.DELETE.MESSAGE")}},{action:K(()=>[y(oe,{faded:"",blue:"",label:N(t)("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT"),onClick:r},null,8,["label"])]),_:1},8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"])])):(p(),v("div",Tte,[y(bs,{size:"","color-scheme":"primary"})]))]))}},Ste={class:"flex-grow flex-shrink p-4 overflow-auto max-w-6xl mx-auto"},Ate={key:0,class:"flex flex-col gap-6"},Ite={key:0,class:"flex items-center justify-center flex-1 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow p-6"},Cte={class:"text-red-500"},Ote={key:1,class:"flex items-center justify-center flex-1"},Nte={__name:"Shopify",props:{error:{type:String,default:""}},setup(e){const t=pt(),n=X(null),s=X(!1),o=X(""),a=X(!1),i=X(""),r=Xs("integrations/getIntegration","shopify"),l=Oe("integrations/getUIFlags"),c=C(()=>r.value.enabled?"disconnect":"connect"),u=()=>{o.value="",i.value="",a.value=!1},d=T=>/^[a-zA-Z0-9][a-zA-Z0-9-]*\.myshopify\.com$/.test(T),m=()=>{n.value&&n.value.open()},f=async()=>{try{if(i.value="",!d(o.value)){i.value="Please enter a valid Shopify store URL (e.g., your-store.myshopify.com)";return}a.value=!0;const{data:T}=await LO.connectShopify({shopDomain:o.value});T.redirect_url&&(window.location.href=T.redirect_url)}catch(T){i.value=T.message}finally{a.value=!1}},g=async()=>{await t.dispatch("integrations/get","shopify"),s.value=!0};return dt(()=>{g()}),(T,S)=>(p(),v("div",Ste,[s.value&&!N(l).isCreatingShopify?(p(),v("div",Ate,[y(tp,{"integration-id":N(r).id,"integration-logo":N(r).logo,"integration-name":N(r).name,"integration-description":N(r).description,"integration-enabled":N(r).enabled,"integration-action":c.value,"delete-confirmation-text":{title:T.$t("INTEGRATION_SETTINGS.SHOPIFY.DELETE.TITLE"),message:T.$t("INTEGRATION_SETTINGS.SHOPIFY.DELETE.MESSAGE")}},{action:K(()=>[y(oe,{teal:"",label:T.$t("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT"),onClick:m},null,8,["label"])]),_:1},8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"]),e.error?(p(),v("div",Ite,[h("p",Cte,A(T.$t("INTEGRATION_SETTINGS.SHOPIFY.ERROR")),1)])):w("",!0),y(cs,{ref_key:"dialogRef",ref:n,title:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.TITLE"),"is-loading":a.value,onConfirm:f,onClose:u},{default:K(()=>[y(_n,{modelValue:o.value,"onUpdate:modelValue":S[0]||(S[0]=_=>o.value=_),label:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.LABEL"),placeholder:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.PLACEHOLDER"),message:i.value?i.value:T.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.HELP"),"message-type":i.value?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])]),_:1},8,["title","is-loading"])])):(p(),v("div",Ote,[y(bs,{size:"","color-scheme":"primary"})]))]))}},wte={routes:[{path:At("accounts/:accountId/settings/integrations"),component:ea,props:{},children:[{path:"",name:"settings_applications",component:BJ,meta:{featureFlag:_t.INTEGRATIONS,permissions:["administrator"]}},{path:"dashboard_apps",component:Lee,name:"settings_integrations_dashboard_apps",meta:{featureFlag:_t.INTEGRATIONS,permissions:["administrator"]}},{path:"webhook",component:gee,name:"settings_integrations_webhook",meta:{featureFlag:_t.INTEGRATIONS,permissions:["administrator"]}}]},{path:At("accounts/:accountId/settings/integrations"),component:Lc,props:e=>{var a;const t=(a=e.params)==null?void 0:a.integration_id;if(["dialogflow"].includes(t))return{};const s=e.name!=="settings_integrations",o=e.name==="settings_integrations_integration"?{name:"settings_integrations"}:"";return{headerTitle:"INTEGRATION_SETTINGS.HEADER",icon:"flash-on",showBackButton:s,backUrl:o}},children:[{path:"slack",name:"settings_integrations_slack",component:pte,meta:{featureFlag:_t.INTEGRATIONS,permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"linear",name:"settings_integrations_linear",component:gte,meta:{permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"notion",name:"settings_integrations_notion",component:yte,meta:{permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"shopify",name:"settings_integrations_shopify",component:Nte,meta:{featureFlag:_t.INTEGRATIONS,permissions:["administrator"]},props:e=>({error:e.query.error})},{path:":integration_id",name:"settings_applications_integration",component:IJ,meta:{featureFlag:_t.INTEGRATIONS,permissions:["administrator"]},props:e=>({integrationId:e.params.integration_id})}]}]},Rte=(e="")=>!!e&&!e.includes(" "),Yy=e=>{let t="";return e.title.$error?e.title.required?e.title.minLength?e.title.validLabelCharacters||(t="LABEL_MGMT.FORM.NAME.VALID_ERROR"):t="LABEL_MGMT.FORM.NAME.MINIMUM_LENGTH_ERROR":t="LABEL_MGMT.FORM.NAME.REQUIRED_ERROR":t="",t},Xy={title:{required:Ye,minLength:Qt(2),validLabelCharacters:Rte},description:{},color:{required:Ye},showOnSidebar:{}},xte=()=>{const e="0123456789ABCDEF";let t="#";for(let n=0;n<6;n+=1)t+=e[Math.floor(Math.random()*16)];return t},$te={components:{NextButton:oe},props:{prefillTitle:{type:String,default:""}},emits:["close"],setup(){return{v$:bt()}},data(){return{color:"#000",description:"",title:"",showOnSidebar:!0}},validations:Xy,computed:{...lt({uiFlags:"labels/getUIFlags"}),labelTitleErrorMessage(){const e=Yy(this.v$);return this.$t(e)}},mounted(){this.color=xte(),this.title=this.prefillTitle.toLowerCase()},methods:{onClose(){this.$emit("close")},async addLabel(){try{await this.$store.dispatch("labels/create",{color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}),ce(this.$t("LABEL_MGMT.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(e){const t=e.message||this.$t("LABEL_MGMT.ADD.API.ERROR_MESSAGE");ce(t)}}}},Mte={class:"flex flex-col h-auto overflow-auto"},Lte={class:"w-full"},kte={class:"flex items-center w-full gap-2"},Dte={for:"conversation_creation"},Pte={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function Bte(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("woot-input"),l=M("woot-color-picker"),c=M("NextButton");return p(),v("div",Mte,[y(i,{"header-title":e.$t("LABEL_MGMT.ADD.TITLE"),"header-content":e.$t("LABEL_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),h("form",{class:"flex flex-wrap mx-0",onSubmit:t[4]||(t[4]=Fe((...u)=>a.addLabel&&a.addLabel(...u),["prevent"]))},[y(r,{modelValue:o.title,"onUpdate:modelValue":t[0]||(t[0]=u=>o.title=u),class:se([{error:s.v$.title.$error},"w-full label-name--input"]),label:e.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:a.labelTitleErrorMessage,"data-testid":"label-title",onInput:s.v$.title.$touch,onBlur:s.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),y(r,{modelValue:o.description,"onUpdate:modelValue":t[1]||(t[1]=u=>o.description=u),class:se([{error:s.v$.description.$error},"w-full"]),label:e.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),"data-testid":"label-description",onInput:s.v$.description.$touch,onBlur:s.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),h("div",Lte,[h("label",null,[Re(A(e.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),y(l,{modelValue:o.color,"onUpdate:modelValue":t[2]||(t[2]=u=>o.color=u)},null,8,["modelValue"])])]),h("div",kte,[re(h("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>o.showOnSidebar=u),type:"checkbox",value:!0},null,512),[[pn,o.showOnSidebar]]),h("label",Dte,A(e.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),h("div",Pte,[y(c,{faded:"",slate:"",type:"reset",label:e.$t("LABEL_MGMT.FORM.CANCEL"),onClick:Fe(a.onClose,["prevent"])},null,8,["label","onClick"]),y(c,{type:"submit","data-testid":"label-submit",label:e.$t("LABEL_MGMT.FORM.CREATE"),disabled:s.v$.title.$invalid||e.uiFlags.isCreating,"is-loading":e.uiFlags.isCreating},null,8,["label","disabled","is-loading"])])],32)])}const Mg=Ae($te,[["render",Bte],["__scopeId","data-v-cb02ae78"]]),Fte={components:{NextButton:oe},props:{selectedResponse:{type:Object,default:()=>{}}},emits:["close"],setup(){return{v$:bt()}},data(){return{title:"",description:"",showOnSidebar:!0,color:""}},validations:Xy,computed:{...lt({uiFlags:"labels/getUIFlags"}),pageTitle(){return`${this.$t("LABEL_MGMT.EDIT.TITLE")} - ${this.selectedResponse.title}`},labelTitleErrorMessage(){const e=Yy(this.v$);return this.$t(e)}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){this.title=this.selectedResponse.title,this.description=this.selectedResponse.description,this.showOnSidebar=this.selectedResponse.show_on_sidebar,this.color=this.selectedResponse.color},editLabel(){this.$store.dispatch("labels/update",{id:this.selectedResponse.id,color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}).then(()=>{ce(this.$t("LABEL_MGMT.EDIT.API.SUCCESS_MESSAGE")),setTimeout(()=>this.onClose(),10)}).catch(()=>{ce(this.$t("LABEL_MGMT.EDIT.API.ERROR_MESSAGE"))})}}},Ute={class:"flex flex-col h-auto overflow-auto"},Gte={class:"w-full"},Vte={class:"flex items-center w-full gap-2"},Hte={for:"conversation_creation"},Wte={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function zte(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("woot-input"),l=M("woot-color-picker"),c=M("NextButton");return p(),v("div",Ute,[y(i,{"header-title":a.pageTitle},null,8,["header-title"]),h("form",{class:"flex flex-wrap mx-0",onSubmit:t[4]||(t[4]=Fe((...u)=>a.editLabel&&a.editLabel(...u),["prevent"]))},[y(r,{modelValue:o.title,"onUpdate:modelValue":t[0]||(t[0]=u=>o.title=u),class:se([{error:s.v$.title.$error},"w-full label-name--input"]),label:e.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:a.labelTitleErrorMessage,onInput:s.v$.title.$touch,onBlur:s.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),y(r,{modelValue:o.description,"onUpdate:modelValue":t[1]||(t[1]=u=>o.description=u),class:se([{error:s.v$.description.$error},"w-full"]),label:e.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),onInput:s.v$.description.$touch,onBlur:s.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),h("div",Gte,[h("label",null,[Re(A(e.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),y(l,{modelValue:o.color,"onUpdate:modelValue":t[2]||(t[2]=u=>o.color=u)},null,8,["modelValue"])])]),h("div",Vte,[re(h("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>o.showOnSidebar=u),type:"checkbox",value:!0},null,512),[[pn,o.showOnSidebar]]),h("label",Hte,A(e.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),h("div",Wte,[y(c,{faded:"",slate:"",type:"reset",label:e.$t("LABEL_MGMT.FORM.CANCEL"),onClick:Fe(a.onClose,["prevent"])},null,8,["label","onClick"]),y(c,{type:"submit",label:e.$t("LABEL_MGMT.FORM.EDIT"),disabled:s.v$.title.$invalid||e.uiFlags.isUpdating,"is-loading":e.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])],32)])}const jte=Ae(Fte,[["render",zte],["__scopeId","data-v-62310b3b"]]),Kte={class:"min-w-full overflow-x-auto divide-y divide-slate-75 dark:divide-slate-700"},Yte={class:"flex-1 divide-y divide-slate-25 dark:divide-slate-800 text-slate-700 dark:text-slate-100"},Xte={class:"py-4 ltr:pr-4 rtl:pl-4"},qte={class:"mb-1 font-medium break-words text-slate-700 dark:text-slate-100"},Zte={class:"py-4 ltr:pr-4 rtl:pl-4"},Qte={class:"py-4 leading-6 ltr:pr-4 rtl:pl-4"},Jte={class:"flex items-center"},ene={class:"py-4 min-w-xs"},tne={class:"flex gap-1 justify-end"},nne={__name:"Index",setup(e){const t=nn(),n=pt(),{t:s}=Me(),o=X({}),a=X(!1),i=X(!1),r=X(!1),l=X({}),c=C(()=>t["labels/getLabels"].value),u=C(()=>t["labels/getUIFlags"].value),d=C(()=>` ${l.value.title}?`),m=()=>{a.value=!0},f=()=>{a.value=!1},g=R=>{i.value=!0,l.value=R},T=()=>{i.value=!1},S=R=>{r.value=!0,l.value=R},_=()=>{r.value=!1},E=async R=>{try{await n.dispatch("labels/delete",R),ce(s("LABEL_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(O){const x=(O==null?void 0:O.message)||s("LABEL_MGMT.DELETE.API.ERROR_MESSAGE");ce(x)}finally{o.value[l.value.id]=!1}},b=()=>{o.value[l.value.id]=!0,_(),E(l.value.id)},I=C(()=>[s("LABEL_MGMT.LIST.TABLE_HEADER.NAME"),s("LABEL_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),s("LABEL_MGMT.LIST.TABLE_HEADER.COLOR")]);return Af(()=>{n.dispatch("labels/get")}),(R,O)=>{const x=M("woot-modal"),L=M("woot-delete-modal"),F=qe("tooltip");return p(),$(Da,{"is-loading":u.value.isFetching,"loading-message":R.$t("LABEL_MGMT.LOADING"),"no-records-found":!c.value.length,"no-records-message":R.$t("LABEL_MGMT.LIST.404")},{header:K(()=>[y(Cs,{title:R.$t("LABEL_MGMT.HEADER"),description:R.$t("LABEL_MGMT.DESCRIPTION"),"link-text":R.$t("LABEL_MGMT.LEARN_MORE"),"feature-name":"labels"},{actions:K(()=>[y(oe,{icon:"i-lucide-circle-plus",label:R.$t("LABEL_MGMT.HEADER_BTN_TXT"),onClick:m},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:K(()=>[h("table",Kte,[h("thead",null,[(p(!0),v(pe,null,Ne(I.value,D=>(p(),v("th",{key:D,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-slate-700 dark:text-slate-300"},A(D),1))),128))]),h("tbody",Yte,[(p(!0),v(pe,null,Ne(c.value,(D,V)=>(p(),v("tr",{key:D.title},[h("td",Xte,[h("span",qte,A(D.title),1)]),h("td",Zte,A(D.description),1),h("td",Qte,[h("div",Jte,[h("span",{class:"w-4 h-4 mr-1 border border-solid rounded rtl:mr-0 rtl:ml-1 border-slate-50 dark:border-slate-700",style:Ht({backgroundColor:D.color})},null,4),Re(" "+A(D.color),1)])]),h("td",ene,[h("div",tne,[re(y(oe,{icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":o.value[D.id],onClick:B=>g(D)},null,8,["is-loading","onClick"]),[[F,R.$t("LABEL_MGMT.FORM.EDIT"),void 0,{top:!0}]]),re(y(oe,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":o.value[D.id],onClick:B=>S(D,V)},null,8,["is-loading","onClick"]),[[F,R.$t("LABEL_MGMT.FORM.DELETE"),void 0,{top:!0}]])])])]))),128))])])]),default:K(()=>[y(x,{show:a.value,"onUpdate:show":O[0]||(O[0]=D=>a.value=D),"on-close":f},{default:K(()=>[y(Mg,{onClose:f})]),_:1},8,["show"]),y(x,{show:i.value,"onUpdate:show":O[1]||(O[1]=D=>i.value=D),"on-close":T},{default:K(()=>[y(jte,{"selected-response":l.value,onClose:T},null,8,["selected-response"])]),_:1},8,["show"]),y(L,{show:r.value,"onUpdate:show":O[2]||(O[2]=D=>r.value=D),"on-close":_,"on-confirm":b,title:R.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:R.$t("LABEL_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":d.value,"confirm-text":R.$t("LABEL_MGMT.DELETE.CONFIRM.YES"),"reject-text":R.$t("LABEL_MGMT.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},sne={routes:[{path:At("accounts/:accountId/settings/labels"),component:ea,children:[{path:"",name:"labels_wrapper",meta:{permissions:["administrator"]},redirect:e=>({name:"labels_list",params:e.params})},{path:"list",name:"labels_list",meta:{featureFlag:_t.LABELS,permissions:["administrator"]},component:nne}]}]},ane={class:"py-4 ltr:pr-4 rtl:pl-4 truncate"},one={class:"py-4 ltr:pr-4 rtl:pl-4"},ine={key:0,class:"flex items-center"},rne={class:"mx-2"},lne={key:1},cne={class:"py-4 ltr:pr-4 rtl:pl-4"},une={key:0,class:"flex items-center"},dne={class:"mx-2"},pne={key:1},hne={class:"py-4 ltr:pr-4 rtl:pl-4"},mne={class:"py-4 flex justify-end gap-1"},fne={__name:"MacrosTableRow",props:{macro:{type:Object,required:!0}},emits:["delete"],setup(e){const t=e,{t:n}=Me(),s=C(()=>{const i=t.macro.created_by;return i.available_name??i.email??""}),o=C(()=>{const i=t.macro.updated_by;return i.available_name??i.email??""}),a=C(()=>{const i=t.macro.visibility==="global"?"MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL":"MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL";return n(i)});return(i,r)=>{const l=M("router-link"),c=qe("tooltip");return p(),v("tr",null,[h("td",ane,A(e.macro.name),1),h("td",one,[e.macro.created_by?(p(),v("div",ine,[y(Hn,{username:s.value,size:"24px"},null,8,["username"]),h("span",rne,A(s.value),1)])):(p(),v("div",lne,"--"))]),h("td",cne,[e.macro.updated_by?(p(),v("div",une,[y(Hn,{username:o.value,size:"24px"},null,8,["username"]),h("span",dne,A(o.value),1)])):(p(),v("div",pne,"--"))]),h("td",hne,A(a.value),1),h("td",mne,[y(l,{to:{name:"macros_edit",params:{macroId:e.macro.id}}},{default:K(()=>[re(y(oe,{icon:"i-lucide-pen",slate:"",xs:"",faded:""},null,512),[[c,i.$t("MACROS.EDIT.TOOLTIP"),void 0,{top:!0}]])]),_:1},8,["to"]),re(y(oe,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:r[0]||(r[0]=u=>i.$emit("delete"))},null,512),[[c,i.$t("MACROS.DELETE.TOOLTIP"),void 0,{top:!0}]])])])}}},gne={class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},_ne={class:"divide-y divide-n-weak text-n-slate-11"},vne={__name:"Index",setup(e){const t=nn(),n=pt(),{t:s}=Me(),o=X(!1),a=X({}),i=C(()=>t["macros/getMacros"].value),r=C(()=>t["macros/getUIFlags"].value),l=C(()=>` ${a.value.name}?`);dt(()=>{n.dispatch("macros/get")});const c=async g=>{try{await n.dispatch("macros/delete",g),ce(s("MACROS.DELETE.API.SUCCESS_MESSAGE"))}catch{ce(s("MACROS.DELETE.API.ERROR_MESSAGE"))}},u=g=>{o.value=!0,a.value=g},d=()=>{o.value=!1},m=()=>{d(),c(a.value.id)},f=C(()=>[s("MACROS.LIST.TABLE_HEADER.NAME"),s("MACROS.LIST.TABLE_HEADER.CREATED BY"),s("MACROS.LIST.TABLE_HEADER.LAST_UPDATED_BY"),s("MACROS.LIST.TABLE_HEADER.VISIBILITY")]);return(g,T)=>{const S=M("router-link"),_=M("woot-delete-modal");return p(),$(Da,{"no-records-message":g.$t("MACROS.LIST.404"),"no-records-found":!i.value.length,"is-loading":r.value.isFetching,"loading-message":g.$t("MACROS.LOADING"),"feature-name":"macros"},{header:K(()=>[y(Cs,{title:g.$t("MACROS.HEADER"),description:g.$t("MACROS.DESCRIPTION"),"link-text":g.$t("MACROS.LEARN_MORE"),"feature-name":"macros"},{actions:K(()=>[y(S,{to:{name:"macros_new"}},{default:K(()=>[y(oe,{icon:"i-lucide-circle-plus",label:g.$t("MACROS.HEADER_BTN_TXT")},null,8,["label"])]),_:1})]),_:1},8,["title","description","link-text"])]),body:K(()=>[h("table",gne,[h("thead",null,[(p(!0),v(pe,null,Ne(f.value,E=>(p(),v("th",{key:E,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},A(E),1))),128))]),h("tbody",_ne,[(p(!0),v(pe,null,Ne(i.value,(E,b)=>(p(),$(fne,{key:b,macro:E,onDelete:I=>u(E)},null,8,["macro","onDelete"]))),128))])]),y(_,{show:o.value,"onUpdate:show":T[0]||(T[0]=E=>o.value=E),"on-close":d,"on-confirm":m,title:g.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:g.$t("MACROS.DELETE.CONFIRM.MESSAGE"),"message-value":l.value,"confirm-text":g.$t("MACROS.DELETE.CONFIRM.YES"),"reject-text":g.$t("MACROS.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["no-records-message","no-records-found","is-loading","loading-message"])}}},qy=()=>{const e=nn(),t=C(()=>e["labels/getLabels"].value),n=C(()=>e["teams/getTeams"].value),s=C(()=>e["agents/getAgents"].value);return{getMacroDropdownValues:a=>{switch(a){case"assign_team":case"send_email_to_team":return n.value;case"assign_agent":return[{id:"self",name:"Self"},...s.value];case"add_label":case"remove_label":return t.value.map(i=>({id:i.title,name:i.title}));case"change_priority":return Sg;default:return[]}}}},bne={class:"relative flex items-start w-full min-w-0 basis-full"},Ene={__name:"MacroNode",props:hn({singleNode:{type:Boolean,default:!1},errorKey:{type:String,default:""},fileName:{type:String,default:""}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:hn(["resetAction","deleteNode"],["update:modelValue"]),setup(e){const t=e,{t:n}=Me(),s=_o("macroActionTypes"),{getMacroDropdownValues:o}=qy(),a=wn(e,"modelValue"),i=C(()=>t.errorKey?n(`MACROS.ERRORS.${t.errorKey}`):""),r=C(()=>a.value.action_name==="send_email_to_team"||a.value.action_name==="send_message"?!1:!!s.value.find(u=>u.key===a.value.action_name).inputType),l=()=>o(a.value.action_name);return(c,u)=>{const d=qe("tooltip");return p(),v("div",bne,[e.singleNode?w("",!0):(p(),$(oe,{key:0,ghost:"",sm:"",slate:"",icon:"i-lucide-menu",class:"absolute cursor-move -left-10 mr-2 macros__node-drag-handle"})),h("div",{class:se(["flex-grow p-2 mr-2 rounded-md shadow-sm outline outline-1 outline-n-weak",e.errorKey?"animate-shake bg-n-ruby-8/20 outline-n-ruby-5 dark:outline-n-ruby-5":"bg-n-background dark:bg-n-solid-1"])},[y(yg,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=m=>a.value=m),"action-types":N(s),"dropdown-values":l(),"show-action-input":r.value,"show-remove-button":!1,"is-macro":"","error-message":i.value,"initial-file-name":e.fileName,onResetAction:u[1]||(u[1]=m=>c.$emit("resetAction"))},null,8,["modelValue","action-types","dropdown-values","show-action-input","error-message","initial-file-name"])],2),e.singleNode?w("",!0):re((p(),$(oe,{key:1,icon:"i-lucide-trash-2",sm:"",faded:"",ruby:"",class:"flex-shrink-0",onClick:u[2]||(u[2]=m=>c.$emit("deleteNode"))},null,512)),[[d,c.$t("MACROS.EDITOR.DELETE_BTN_TOOLTIP")]])])}}},Zy=[{key:"assign_team",label:"ASSIGN_TEAM",inputType:"search_select"},{key:"assign_agent",label:"ASSIGN_AGENT",inputType:"search_select"},{key:"add_label",label:"ADD_LABEL",inputType:"multi_select"},{key:"remove_label",label:"REMOVE_LABEL",inputType:"multi_select"},{key:"remove_assigned_team",label:"REMOVE_ASSIGNED_TEAM",inputType:null},{key:"send_email_transcript",label:"SEND_EMAIL_TRANSCRIPT",inputType:"email"},{key:"mute_conversation",label:"MUTE_CONVERSATION",inputType:null},{key:"snooze_conversation",label:"SNOOZE_CONVERSATION",inputType:null},{key:"resolve_conversation",label:"RESOLVE_CONVERSATION",inputType:null},{key:"send_attachment",label:"SEND_ATTACHMENT",inputType:"attachment"},{key:"send_message",label:"SEND_MESSAGE",inputType:"textarea"},{key:"add_private_note",label:"ADD_PRIVATE_NOTE",inputType:"textarea"},{key:"change_priority",label:"CHANGE_PRIORITY",inputType:"search_select"},{key:"send_webhook_event",label:"SEND_WEBHOOK_EVENT",inputType:"url"}],Tne=e=>Zy.find(t=>t.key===e).label,yne=(e,t)=>t.map(n=>{const s=e.find(o=>o.id===n);return s?s.name:""}).join(", "),S1=(e,t)=>t.map(n=>{const s=e.find(o=>o.title===n);return s?s.title:""}).join(", "),Sne=(e,t)=>t.map(n=>{const s=e.find(o=>o.id===n);return s?s.name:""}).join(", "),Ane=(e,t,n)=>{if(!e||!n)return"";if(t==="send_attachment"){const s=n.find(o=>o.blob_id===e);if(s)return s.filename.toString()}return""},Ine={components:{Draggable:Pc,MacroNode:Ene,NextButton:oe},props:{errors:{type:Object,default:()=>({})},modelValue:{type:Array,default:()=>[]},files:{type:Array,default:()=>[]}},emits:["update:modelValue","resetAction","deleteNode","addNewNode"],computed:{actionData:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{fileName(){return Ane(...arguments)}}},Cne={class:"macros__nodes"},One={class:"macro__node"},Nne={class:"bg-n-solid-blue text-n-blue-text py-1 px-1.5 leading-none text-sm rounded-md"},wne={class:"macro__node"},Rne={class:"macro__node"},xne={class:"bg-n-solid-blue text-n-blue-text py-1 px-1.5 leading-none text-sm rounded-md"};function $ne(e,t,n,s,o,a){const i=M("MacroNode"),r=M("Draggable"),l=M("NextButton");return p(),v("div",Cne,[h("div",One,[h("div",null,[h("span",Nne,A(e.$t("MACROS.EDITOR.START_FLOW")),1)])]),y(r,{list:a.actionData,animation:"200","item-key":"id","ghost-class":"ghost",tag:"div",class:"macros__nodes-draggable",handle:".macros__node-drag-handle"},{item:K(({index:c})=>[(p(),v("div",{key:c,class:"macro__node"},[y(i,{modelValue:a.actionData[c],"onUpdate:modelValue":u=>a.actionData[c]=u,class:"macros__node-action",type:"add",index:c,"error-key":n.errors[`action_${c}`],"file-name":a.fileName(a.actionData[c].action_params[0],a.actionData[c].action_name,n.files),"single-node":a.actionData.length===1,onResetAction:u=>e.$emit("resetAction",c),onDeleteNode:u=>e.$emit("deleteNode",c)},null,8,["modelValue","onUpdate:modelValue","index","error-key","file-name","single-node","onResetAction","onDeleteNode"])]))]),_:1},8,["list"]),h("div",wne,[h("div",null,[y(l,{title:e.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP"),class:"shadow-sm",solid:"",teal:"",icon:"i-lucide-plus-circle",onClick:t[0]||(t[0]=c=>e.$emit("addNewNode"))},{default:K(()=>[Re(A(e.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP")),1)]),_:1},8,["title"])])]),h("div",Rne,[h("div",null,[h("span",xne,A(e.$t("MACROS.EDITOR.END_FLOW")),1)])])])}const Mne=Ae(Ine,[["render",$ne],["__scopeId","data-v-5d2e16dc"]]),Lne={components:{NextButton:oe},inject:["v$"],props:{macroName:{type:String,default:""},macroVisibility:{type:String,default:"global"}},emits:["update:name","update:visibility","submit"],methods:{isActive(e){return this.macroVisibility===e?"bg-woot-25 dark:bg-slate-900 border-woot-200 dark:border-woot-700":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-600"},onUpdateName(e){this.$emit("update:name",e)},onUpdateVisibility(e){this.$emit("update:visibility",e)}}},kne={class:"p-4 bg-n-solid-2 border border-n-weak rounded-lg shadow-sm h-full flex flex-col"},Dne={class:"mt-2"},Pne={class:"block m-0 text-sm font-medium leading-[1.8] text-slate-700 dark:text-slate-100"},Bne={class:"grid grid-cols-1 lg:grid-cols-2 gap-3"},Fne={class:"block m-0 text-sm font-medium leading-[1.8] text-slate-700 dark:text-slate-100"},Une={class:"text-xs text-slate-500 dark:text-slate-200"},Gne={class:"block m-0 text-sm font-medium leading-[1.8] text-slate-700 dark:text-slate-100"},Vne={class:"text-xs text-slate-500 dark:text-slate-200"},Hne={class:"mt-2 flex items-start p-2 bg-n-slate-3 dark:bg-n-solid-3 rounded-md"},Wne={class:"ml-2 rtl:ml-0 rtl:mr-2 mb-0 text-slate-600 dark:text-slate-200"},zne={class:"mt-auto w-full"};function jne(e,t,n,s,o,a){const i=M("woot-input"),r=M("fluent-icon"),l=M("NextButton");return p(),v("div",kne,[h("div",null,[y(i,{"model-value":n.macroName,label:e.$t("MACROS.ADD.FORM.NAME.LABEL"),placeholder:e.$t("MACROS.ADD.FORM.NAME.PLACEHOLDER"),error:a.v$.macro.name.$error?e.$t("MACROS.ADD.FORM.NAME.ERROR"):null,class:se({error:a.v$.macro.name.$error}),"onUpdate:modelValue":a.onUpdateName},null,8,["model-value","label","placeholder","error","class","onUpdate:modelValue"])]),h("div",Dne,[h("p",Pne,A(e.$t("MACROS.EDITOR.VISIBILITY.LABEL")),1),h("div",Bne,[h("button",{class:se(["p-2 relative rounded-md border border-solid text-left cursor-default",a.isActive("global")]),onClick:t[0]||(t[0]=c=>a.onUpdateVisibility("global"))},[n.macroVisibility==="global"?(p(),$(r,{key:0,icon:"checkmark-circle",type:"solid",class:"absolute text-woot-500 dark:text-woot-500 top-2 right-2"})):w("",!0),h("p",Fne,A(e.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL")),1),h("p",Une,A(e.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.DESCRIPTION")),1)],2),h("button",{class:se(["p-2 relative rounded-md border border-solid text-left cursor-default",a.isActive("personal")]),onClick:t[1]||(t[1]=c=>a.onUpdateVisibility("personal"))},[n.macroVisibility==="personal"?(p(),$(r,{key:0,icon:"checkmark-circle",type:"solid",class:"absolute text-woot-500 dark:text-woot-500 top-2 right-2"})):w("",!0),h("p",Gne,A(e.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL")),1),h("p",Vne,A(e.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.DESCRIPTION")),1)],2)]),h("div",Hne,[y(r,{icon:"info",size:"16",class:"flex-shrink-0 mt-0.5"}),h("p",Wne,A(e.$t("MACROS.ORDER_INFO")),1)])]),h("div",zne,[y(l,{blue:"",solid:"",label:e.$t("MACROS.HEADER_BTN_TXT_SAVE"),class:"w-full",onClick:t[2]||(t[2]=c=>e.$emit("submit"))},null,8,["label"])])])}const Kne=Ae(Lne,[["render",jne],["__scopeId","data-v-58b85384"]]),Yne={components:{MacroNodes:Mne,MacroProperties:Kne},props:{macroData:{type:Object,default:()=>({})}},emits:["submit"],setup(){const e=bt();return Pn("v$",e),{v$:e}},data(){return{macro:this.macroData,errors:{}}},computed:{files(){return this.macro&&this.macro.files?this.macro.files:[]}},watch:{$route:{handler(){this.resetValidation()},immediate:!0},macroData:{handler(){this.macro=this.macroData},immediate:!0}},validations:{macro:{name:{required:Ye},visibility:{required:Ye}}},methods:{removeObjectProperty(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>n!==t))},updateName(e){this.macro.name=e},updateVisibility(e){this.macro.visibility=e},appendNode(){this.macro.actions.push({action_name:"assign_team",action_params:[]})},deleteNode(e){this.errors=this.removeObjectProperty(this.errors,`action_${e}`),this.macro.actions.splice(e,1)},submit(){this.errors=by(this.macro.actions),Object.keys(this.errors).length===0&&(this.v$.$touch(),!this.v$.$invalid&&this.$emit("submit",this.macro))},resetNode(e){this.errors=this.removeObjectProperty(this.errors,`action_${e}`),this.macro.actions[e].action_params=[]},resetValidation(){var e,t;this.errors={},(t=(e=this.v$)==null?void 0:e.$reset)==null||t.call(e)}}},Xne={class:"flex flex-col w-full h-auto md:flex-row md:h-full"},qne={class:"flex-1 w-full h-full max-h-full px-12 py-4 overflow-y-auto md:w-auto macro-gradient-radial dark:macro-dark-gradient-radial macro-gradient-radial-size"},Zne={class:"w-full md:w-1/3 pb-4"};function Qne(e,t,n,s,o,a){const i=M("MacroNodes"),r=M("MacroProperties");return p(),v("div",Xne,[h("div",qne,[y(i,{modelValue:o.macro.actions,"onUpdate:modelValue":t[0]||(t[0]=l=>o.macro.actions=l),files:a.files,errors:o.errors,onAddNewNode:a.appendNode,onDeleteNode:a.deleteNode,onResetAction:a.resetNode},null,8,["modelValue","files","errors","onAddNewNode","onDeleteNode","onResetAction"])]),h("div",Zne,[y(r,{"macro-name":o.macro.name,"macro-visibility":o.macro.visibility,"onUpdate:name":a.updateName,"onUpdate:visibility":a.updateVisibility,onSubmit:a.submit},null,8,["macro-name","macro-visibility","onUpdate:name","onUpdate:visibility","onSubmit"])])])}const Jne=Ae(Yne,[["render",Qne],["__scopeId","data-v-36b1c94e"]]),ese={class:"flex flex-col flex-1 h-full overflow-auto"},A1={__name:"MacroEditor",setup(e){const t=pt(),n=nn(),s=sn(),o=xn(),{t:a}=Me(),{getMacroDropdownValues:i}=qy(),r=X(null),l=X("CREATE"),c=C(()=>Zy.map(E=>({...E,label:a(`MACROS.ACTIONS.${E.label}`)})));Pn("macroActionTypes",c);const u=C(()=>n["macros/getUIFlags"].value),d=C(()=>s.params.macroId),m=()=>{t.dispatch("agents/get"),t.dispatch("teams/get"),t.dispatch("labels/get")},f=E=>{const b=E.actions.map(I=>{let R=[];if(I.action_params.length){const O=c.value.find(x=>x.key===I.action_name).inputType;O==="multi_select"||O==="search_select"?R=i(I.action_name).filter(x=>[...I.action_params].includes(x.id)):O==="team_message"?R={team_ids:i(I.action_name).filter(x=>[...I.action_params[0].team_ids].includes(x.id)),message:I.action_params[0].message}:R=[...I.action_params]}return{...I,action_params:R}});return{...E,actions:b}},g=async()=>{await t.dispatch("macros/getSingleMacro",d.value);const E=t.getters["macros/getMacro"](d.value);r.value=f(E)},T=()=>{l.value="EDIT",g()},S=()=>{l.value="CREATE",r.value={name:"",actions:[{action_name:"assign_team",action_params:[]}],visibility:"global"}};ct(()=>s,()=>{m(),s.params.macroId?T():S()},{immediate:!0,deep:!0});const _=async E=>{try{const b=l.value==="EDIT"?"macros/update":"macros/create",I=l.value==="EDIT"?a("MACROS.EDIT.API.SUCCESS_MESSAGE"):a("MACROS.ADD.API.SUCCESS_MESSAGE");let R=JSON.parse(JSON.stringify(E));R.actions=ry(R.actions),await t.dispatch(b,R),ce(I),o.push({name:"macros_wrapper"})}catch{ce(a("MACROS.ERROR"))}};return(E,b)=>{const I=M("woot-loading-state");return p(),v("div",ese,[u.value.isFetchingItem?(p(),$(I,{key:0,message:N(a)("MACROS.EDITOR.LOADING")},null,8,["message"])):w("",!0),r.value&&!u.value.isFetchingItem?(p(),$(Jne,{key:1,"macro-data":r.value,"onUpdate:macroData":b[0]||(b[0]=R=>r.value=R),onSubmit:_},null,8,["macro-data"])):w("",!0)])}}},tse={routes:[{path:At("accounts/:accountId/settings/macros"),component:ea,children:[{path:"",name:"macros_wrapper",component:vne,meta:{featureFlag:_t.MACROS,permissions:[...Gn,...Rs]}}]},{path:At("accounts/:accountId/settings/macros"),component:Lc,props:()=>({headerTitle:"MACROS.HEADER",icon:"flash-settings",showBackButton:!0}),children:[{path:":macroId/edit",name:"macros_edit",component:A1,meta:{featureFlag:_t.MACROS,permissions:[...Gn,...Rs]}},{path:"new",name:"macros_new",component:A1,meta:{featureFlag:_t.MACROS,permissions:[...Gn,...Rs]}}]}]},nse={},sse={class:"reports--wrapper overflow-auto bg-n-background w-full px-6"},ase={class:"max-w-[60rem] mx-auto pb-12"};function ose(e,t){const n=M("router-view");return p(),v("div",sse,[h("div",ase,[y(n)])])}const ise=Ae(nse,[["render",ose],["__scopeId","data-v-83d0c955"]]);function Qy(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function np(e){return Qy(e)?new Date(e.getTime()):e==null?new Date(NaN):new Date(e)}function rse(e){return Qy(e)&&!isNaN(e.getTime())}function Jy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!(t>=0&&t<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var n=np(e),s=n.getDay(),o=(s+7-t)%7;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function eS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.firstDayOfWeek,s=n===void 0?0:n,o=t.firstWeekContainsDate,a=o===void 0?1:o;if(!(a>=1&&a<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7");for(var i=np(e),r=i.getFullYear(),l=new Date(0),c=r+1;c>=r-1&&(l.setFullYear(c,0,a),l.setHours(0,0,0,0),l=Jy(l,s),!(i.getTime()>=l.getTime()));c--);return l}function Lg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.firstDayOfWeek,s=n===void 0?0:n,o=t.firstWeekContainsDate,a=o===void 0?1:o,i=np(e),r=Jy(i,s),l=eS(i,{firstDayOfWeek:s,firstWeekContainsDate:a}),c=r.getTime()-l.getTime();return Math.round(c/(7*24*3600*1e3))+1}var kg={months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDayOfWeek:0,firstWeekContainsDate:1},lse=/\[([^\]]+)]|YYYY|YY?|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|Z{1,2}|S{1,3}|w{1,2}|x|X|a|A/g;function ma(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n="".concat(Math.abs(e)),s=e<0?"-":"";n.length<t;)n="0".concat(n);return s+n}function I1(e){return Math.round(e.getTimezoneOffset()/15)*15}function C1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=e>0?"-":"+",s=Math.abs(e),o=Math.floor(s/60),a=s%60;return n+ma(o,2)+t+ma(a,2)}var O1=function(t,n,s){var o=t<12?"AM":"PM";return s?o.toLocaleLowerCase():o},Jl={Y:function(t){var n=t.getFullYear();return n<=9999?"".concat(n):"+".concat(n)},YY:function(t){return ma(t.getFullYear(),4).substr(2)},YYYY:function(t){return ma(t.getFullYear(),4)},M:function(t){return t.getMonth()+1},MM:function(t){return ma(t.getMonth()+1,2)},MMM:function(t,n){return n.monthsShort[t.getMonth()]},MMMM:function(t,n){return n.months[t.getMonth()]},D:function(t){return t.getDate()},DD:function(t){return ma(t.getDate(),2)},H:function(t){return t.getHours()},HH:function(t){return ma(t.getHours(),2)},h:function(t){var n=t.getHours();return n===0?12:n>12?n%12:n},hh:function(){var t=Jl.h.apply(Jl,arguments);return ma(t,2)},m:function(t){return t.getMinutes()},mm:function(t){return ma(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return ma(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return ma(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return ma(t.getMilliseconds(),3)},d:function(t){return t.getDay()},dd:function(t,n){return n.weekdaysMin[t.getDay()]},ddd:function(t,n){return n.weekdaysShort[t.getDay()]},dddd:function(t,n){return n.weekdays[t.getDay()]},A:function(t,n){var s=n.meridiem||O1;return s(t.getHours(),t.getMinutes(),!1)},a:function(t,n){var s=n.meridiem||O1;return s(t.getHours(),t.getMinutes(),!0)},Z:function(t){return C1(I1(t),":")},ZZ:function(t){return C1(I1(t))},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()},w:function(t,n){return Lg(t,{firstDayOfWeek:n.firstDayOfWeek,firstWeekContainsDate:n.firstWeekContainsDate})},ww:function(t,n){return ma(Jl.w(t,n),2)}};function Dg(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",o=np(e);if(!rse(o))return"Invalid Date";var a=n.locale||kg;return s.replace(lse,function(i,r){return r||(typeof Jl[i]=="function"?"".concat(Jl[i](o,a)):i)})}function N1(e){return dse(e)||use(e)||cse()}function cse(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function use(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function dse(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function w1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function pse(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w1(n,!0).forEach(function(s){Ci(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w1(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hse(e,t){return gse(e)||fse(e,t)||mse()}function mse(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function fse(e,t){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]"){var n=[],s=!0,o=!1,a=void 0;try{for(var i=e[Symbol.iterator](),r;!(s=(r=i.next()).done)&&(n.push(r.value),!(t&&n.length===t));s=!0);}catch(l){o=!0,a=l}finally{try{!s&&i.return!=null&&i.return()}finally{if(o)throw a}}return n}}function gse(e){if(Array.isArray(e))return e}function Ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _se=/(\[[^\[]*\])|(MM?M?M?|Do|DD?|ddd?d?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|S{1,3}|x|X|ZZ?|.)/g,tS=/\d/,Oi=/\d\d/,vse=/\d{3}/,bse=/\d{4}/,ll=/\d\d?/,Ese=/[+-]\d\d:?\d\d/,nS=/[+-]?\d+/,Tse=/[+-]?\d+(\.\d{1,3})?/,Pg="year",sp="month",sS="day",aS="hour",oS="minute",iS="second",Bg="millisecond",rS={},An=function(t,n,s){var o=Array.isArray(t)?t:[t],a;typeof s=="string"?a=function(r){var l=parseInt(r,10);return Ci({},s,l)}:a=s,o.forEach(function(i){rS[i]=[n,a]})},yse=function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Bc=function(t){return function(n){var s=n[t];if(!Array.isArray(s))throw new Error("Locale[".concat(t,"] need an array"));return new RegExp(s.map(yse).join("|"))}},Fc=function(t,n){return function(s,o){var a=o[t];if(!Array.isArray(a))throw new Error("Locale[".concat(t,"] need an array"));var i=a.indexOf(s);if(i<0)throw new Error("Invalid Word");return Ci({},n,i)}};An("Y",nS,Pg);An("YY",Oi,function(e){var t=new Date().getFullYear(),n=Math.floor(t/100),s=parseInt(e,10);return s=(s>68?n-1:n)*100+s,Ci({},Pg,s)});An("YYYY",bse,Pg);An("M",ll,function(e){return Ci({},sp,parseInt(e,10)-1)});An("MM",Oi,function(e){return Ci({},sp,parseInt(e,10)-1)});An("MMM",Bc("monthsShort"),Fc("monthsShort",sp));An("MMMM",Bc("months"),Fc("months",sp));An("D",ll,sS);An("DD",Oi,sS);An(["H","h"],ll,aS);An(["HH","hh"],Oi,aS);An("m",ll,oS);An("mm",Oi,oS);An("s",ll,iS);An("ss",Oi,iS);An("S",tS,function(e){return Ci({},Bg,parseInt(e,10)*100)});An("SS",Oi,function(e){return Ci({},Bg,parseInt(e,10)*10)});An("SSS",vse,Bg);function Sse(e){return e.meridiemParse||/[ap]\.?m?\.?/i}function Ase(e){return"".concat(e).toLowerCase().charAt(0)==="p"}An(["A","a"],Sse,function(e,t){var n=typeof t.isPM=="function"?t.isPM(e):Ase(e);return{isPM:n}});function Ise(e){var t=e.match(/([+-]|\d\d)/g)||["-","0","0"],n=hse(t,3),s=n[0],o=n[1],a=n[2],i=parseInt(o,10)*60+parseInt(a,10);return i===0?0:s==="+"?-i:+i}An(["Z","ZZ"],Ese,function(e){return{offset:Ise(e)}});An("x",nS,function(e){return{date:new Date(parseInt(e,10))}});An("X",Tse,function(e){return{date:new Date(parseFloat(e)*1e3)}});An("d",tS,"weekday");An("dd",Bc("weekdaysMin"),Fc("weekdaysMin","weekday"));An("ddd",Bc("weekdaysShort"),Fc("weekdaysShort","weekday"));An("dddd",Bc("weekdays"),Fc("weekdays","weekday"));An("w",ll,"week");An("ww",Oi,"week");function Cse(e,t){if(e!==void 0&&t!==void 0){if(t){if(e<12)return e+12}else if(e===12)return 0}return e}function Ose(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,n=[0,0,1,0,0,0,0],s=[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()],o=!0,a=0;a<7;a++)e[a]===void 0?n[a]=o?s[a]:n[a]:(n[a]=e[a],o=!1);return n}function Nse(e,t,n,s,o,a,i){var r;return e<100&&e>=0?(r=new Date(e+400,t,n,s,o,a,i),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,n,s,o,a,i),r}function wse(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var o=n[0];return o<100&&o>=0?(n[0]+=400,e=new Date(Date.UTC.apply(Date,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(o)):e=new Date(Date.UTC.apply(Date,n)),e}function Rse(e,t,n){var s=t.match(_se);if(!s)throw new Error;for(var o=s.length,a={},i=0;i<o;i+=1){var r=s[i],l=rS[r];if(l){var u=typeof l[0]=="function"?l[0](n):l[0],d=l[1],m=(u.exec(e)||[])[0],f=d(m,n);a=pse({},a,{},f),e=e.replace(m,"")}else{var c=r.replace(/^\[|\]$/g,"");if(e.indexOf(c)===0)e=e.substr(c.length);else throw new Error("not match")}}return a}function xse(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{var s=n.locale,o=s===void 0?kg:s,a=n.backupDate,i=a===void 0?new Date:a,r=Rse(e,t,o),l=r.year,c=r.month,u=r.day,d=r.hour,m=r.minute,f=r.second,g=r.millisecond,T=r.isPM,S=r.date,_=r.offset,E=r.weekday,b=r.week;if(S)return S;var I=[l,c,u,d,m,f,g];if(I[3]=Cse(I[3],T),b!==void 0&&c===void 0&&u===void 0){var R=eS(l===void 0?i:new Date(l,3),{firstDayOfWeek:o.firstDayOfWeek,firstWeekContainsDate:o.firstWeekContainsDate});return new Date(R.getTime()+(b-1)*7*24*3600*1e3)}var O,x=Ose(I,i);return _!==void 0?(x[6]+=_*60*1e3,O=wse.apply(void 0,N1(x))):O=Nse.apply(void 0,N1(x)),E!==void 0&&O.getDay()!==E?new Date(NaN):O}catch{return new Date(NaN)}}var $se=Object.defineProperty,Mse=Object.defineProperties,Lse=Object.getOwnPropertyDescriptors,bd=Object.getOwnPropertySymbols,lS=Object.prototype.hasOwnProperty,cS=Object.prototype.propertyIsEnumerable,R1=(e,t,n)=>t in e?$se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ss=(e,t)=>{for(var n in t||(t={}))lS.call(t,n)&&R1(e,n,t[n]);if(bd)for(var n of bd(t))cS.call(t,n)&&R1(e,n,t[n]);return e},La=(e,t)=>Mse(e,Lse(t)),kse=(e,t)=>{var n={};for(var s in e)lS.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&bd)for(var s of bd(e))t.indexOf(s)<0&&cS.call(e,s)&&(n[s]=e[s]);return n};const Dse={formatLocale:kg,yearFormat:"YYYY",monthFormat:"MMM",monthBeforeYear:!0};let Fl="en";const $r={};$r[Fl]=Dse;function uS(e,t,n=!1){if(typeof e!="string")return $r[Fl];let s=Fl;return $r[e]&&(s=e),t&&($r[e]=t,s=e),n||(Fl=s),$r[e]||$r[Fl]}function rf(e){return uS(e,void 0,!0)}function Fg(e,t){if(!Array.isArray(e))return[];const n=[],s=e.length;let o=0;for(t=t||s;o<s;)n.push(e.slice(o,o+=t));return n}function x1(e){return Array.isArray(e)?e[e.length-1]:void 0}function pi(e){return Object.prototype.toString.call(e)==="[object Object]"}function Po(e,t){const n={};return pi(e)&&(Array.isArray(t)||(t=[t]),t.forEach(s=>{Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])})),n}function dS(e,t){if(!pi(e))return{};let n=e;return pi(t)&&Object.keys(t).forEach(s=>{let o=t[s];const a=e[s];pi(o)&&pi(a)&&(o=dS(a,o)),n=La(Ss({},n),{[s]:o})}),n}function Kh(e){const t=parseInt(String(e),10);return t<10?`0${t}`:`${t}`}function Pse(e){const t=/-(\w)/g;return e.replace(t,(n,s)=>s?s.toUpperCase():"")}const pS="datepicker_locale",hS="datepicker_prefixClass",mS="datepicker_getWeek";function Ug(){return _o(pS,Cd(rf()))}function Bse(e){const t=C(()=>pi(e.value)?dS(rf(),e.value):rf(e.value));return Pn(pS,t),t}function Fse(e){Pn(hS,e)}function ta(){return _o(hS,"mx")}function Use(e){Pn(mS,e)}function Gse(){return _o(mS,Lg)}function Vse(e){const t=e.style.display,n=e.style.visibility;e.style.display="block",e.style.visibility="hidden";const s=window.getComputedStyle(e),o=e.offsetWidth+parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),a=e.offsetHeight+parseInt(s.marginTop,10)+parseInt(s.marginBottom,10);return e.style.display=t,e.style.visibility=n,{width:o,height:a}}function Hse(e,t,n,s){let o=0,a=0,i=0,r=0;const l=e.getBoundingClientRect(),c=document.documentElement.clientWidth,u=document.documentElement.clientHeight;return s&&(i=window.pageXOffset+l.left,r=window.pageYOffset+l.top),c-l.left<t&&l.right<t?o=i-l.left+1:l.left+l.width/2<=c/2?o=i:o=i+l.width-t,l.top<=n&&u-l.bottom<=n?a=r+u-l.top-n:l.top+l.height/2<=u/2?a=r+l.height:a=r-n,{left:`${o}px`,top:`${a}px`}}function Gg(e,t=document.body){if(!e||e===t)return null;const n=(a,i)=>getComputedStyle(a,null).getPropertyValue(i);return/(auto|scroll)/.test(n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x"))?e:Gg(e.parentElement,t)}let pu;function Wse(){if(typeof window>"u")return 0;if(pu!==void 0)return pu;const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const t=document.createElement("div");return t.style.width="100%",e.appendChild(t),pu=e.offsetWidth-t.offsetWidth,e.parentNode.removeChild(e),pu}const $1="ontouchend"in document?"touchstart":"mousedown";function zse(e){let t=!1;return function(...s){t||(t=!0,requestAnimationFrame(()=>{t=!1,e.apply(this,s)}))}}function qo(e,t){return{setup:e,name:e.name,props:t}}function Zo(e,t){return new Proxy(e,{get(s,o){const a=s[o];return a!==void 0?a:t[o]}})}const Ni=()=>e=>e,jse=(e,t)=>{const n={};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const o=Pse(s);let a=e[s];t.indexOf(o)!==-1&&a===""&&(a=!0),n[o]=a}return n};function Kse(e,{slots:t}){const n=Zo(e,{appendToBody:!0}),s=ta(),o=X(null),a=X({left:"",top:""}),i=()=>{if(!n.visible||!o.value)return;const l=n.getRelativeElement();if(!l)return;const{width:c,height:u}=Vse(o.value);a.value=Hse(l,c,u,n.appendToBody)};da(i,{flush:"post"}),da(l=>{const c=n.getRelativeElement();if(!c)return;const u=Gg(c)||window,d=zse(i);u.addEventListener("scroll",d),window.addEventListener("resize",d),l(()=>{u.removeEventListener("scroll",d),window.removeEventListener("resize",d)})},{flush:"post"});const r=l=>{if(!n.visible)return;const c=l.target,u=o.value,d=n.getRelativeElement();u&&!u.contains(c)&&d&&!d.contains(c)&&n.onClickOutside(l)};return da(l=>{document.addEventListener($1,r),l(()=>{document.removeEventListener($1,r)})}),()=>y(l0,{to:"body",disabled:!n.appendToBody},{default:()=>[y(qs,{name:`${s}-zoom-in-down`},{default:()=>{var l;return[n.visible&&y("div",{ref:o,class:`${s}-datepicker-main ${s}-datepicker-popup ${n.className}`,style:[Ss({position:"absolute"},a.value),n.style||{}]},[(l=t.default)==null?void 0:l.call(t)])]}})]})}const Yse=Ni()(["style","className","visible","appendToBody","onClickOutside","getRelativeElement"]);var Xse=qo(Kse,Yse);const qse={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Zse=h("path",{d:"M940.218 107.055H730.764v-60.51H665.6v60.51H363.055v-60.51H297.89v60.51H83.78c-18.617 0-32.581 13.963-32.581 32.581v805.237c0 18.618 13.964 32.582 32.582 32.582h861.09c18.619 0 32.583-13.964 32.583-32.582V139.636c-4.655-18.618-18.619-32.581-37.237-32.581zm-642.327 65.163v60.51h65.164v-60.51h307.2v60.51h65.163v-60.51h176.873v204.8H116.364v-204.8H297.89zM116.364 912.291V442.18H912.29v470.11H116.364z"},null,-1),Qse=[Zse];function fS(e,t){return p(),v("svg",qse,Qse)}const Jse={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},eae=h("path",{d:"M810.005 274.005 572.011 512l237.994 237.995-60.01 60.01L512 572.011 274.005 810.005l-60.01-60.01L451.989 512 213.995 274.005l60.01-60.01L512 451.989l237.995-237.994z"},null,-1),tae=[eae];function nae(e,t){return p(),v("svg",Jse,tae)}const sae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em"},aae=h("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),oae=h("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},null,-1),iae=h("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},null,-1),rae=[aae,oae,iae];function lae(e,t){return p(),v("svg",sae,rae)}function qi(e,t=0,n=1,s=0,o=0,a=0,i=0){const r=new Date(e,t,n,s,o,a,i);return e<100&&e>=0&&r.setFullYear(e),r}function Ho(e){return e instanceof Date&&!isNaN(e.getTime())}function Zi(e){return Array.isArray(e)&&e.length===2&&e.every(Ho)&&e[0]<=e[1]}function cae(e){return Array.isArray(e)&&e.every(Ho)}function ap(...e){if(e[0]!==void 0&&e[0]!==null){const n=new Date(e[0]);if(Ho(n))return n}const t=e.slice(1);return t.length?ap(...t):new Date}function uae(e){const t=new Date(e);return t.setMonth(0,1),t.setHours(0,0,0,0),t}function M1(e){const t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0),t}function yi(e){const t=new Date(e);return t.setHours(0,0,0,0),t}function dae({firstDayOfWeek:e,year:t,month:n}){const s=[],o=qi(t,n,0),a=o.getDate(),i=a-(o.getDay()+7-e)%7;for(let u=i;u<=a;u++)s.push(qi(t,n,u-a));o.setMonth(n+1,0);const r=o.getDate();for(let u=1;u<=r;u++)s.push(qi(t,n,u));const l=a-i+1,c=6*7-l-r;for(let u=1;u<=c;u++)s.push(qi(t,n,r+u));return s}function Ed(e,t){const n=new Date(e),s=typeof t=="function"?t(n.getMonth()):Number(t),o=n.getFullYear(),a=qi(o,s+1,0).getDate(),i=n.getDate();return n.setMonth(s,Math.min(i,a)),n}function Pr(e,t){const n=new Date(e),s=typeof t=="function"?t(n.getFullYear()):t;return n.setFullYear(s),n}function pae(e,t){const n=new Date(t),s=new Date(e),o=n.getFullYear()-s.getFullYear(),a=n.getMonth()-s.getMonth();return o*12+a}function Td(e,t){const n=new Date(e),s=new Date(t);return n.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),n}function hae(e,{slots:t}){const n=Zo(e,{editable:!0,disabled:!1,clearable:!0,range:!1,multiple:!1}),s=ta(),o=X(null),a=C(()=>n.separator||(n.range?" ~ ":",")),i=f=>n.range?Zi(f):n.multiple?cae(f):Ho(f),r=f=>Array.isArray(f)?f.some(g=>n.disabledDate(g)):n.disabledDate(f),l=C(()=>o.value!==null?o.value:typeof n.renderInputText=="function"?n.renderInputText(n.value):i(n.value)?Array.isArray(n.value)?n.value.map(f=>n.formatDate(f)).join(a.value):n.formatDate(n.value):""),c=f=>{var g;f&&f.stopPropagation(),n.onChange(n.range?[null,null]:null),(g=n.onClear)==null||g.call(n)},u=()=>{var f;if(!n.editable||o.value===null)return;const g=o.value.trim();if(o.value=null,g===""){c();return}let T;if(n.range){let S=g.split(a.value);S.length!==2&&(S=g.split(a.value.trim())),T=S.map(_=>n.parseDate(_.trim()))}else n.multiple?T=g.split(a.value).map(S=>n.parseDate(S.trim())):T=n.parseDate(g);i(T)&&!r(T)?n.onChange(T):(f=n.onInputError)==null||f.call(n,g)},d=f=>{o.value=typeof f=="string"?f:f.target.value},m=f=>{const{keyCode:g}=f;g===9?n.onBlur():g===13&&u()};return()=>{var f,g,T;const S=!n.disabled&&n.clearable&&l.value,_=La(Ss({name:"date",type:"text",autocomplete:"off",value:l.value,class:n.inputClass||`${s}-input`,readonly:!n.editable,disabled:n.disabled,placeholder:n.placeholder},n.inputAttr),{onFocus:n.onFocus,onKeydown:m,onInput:d,onChange:u});return y("div",{class:`${s}-input-wrapper`,onClick:n.onClick},[((f=t.input)==null?void 0:f.call(t,_))||y("input",_,null),S?y("i",{class:`${s}-icon-clear`,onClick:c},[((g=t["icon-clear"])==null?void 0:g.call(t))||y(nae,null,null)]):null,y("i",{class:`${s}-icon-calendar`},[((T=t["icon-calendar"])==null?void 0:T.call(t))||y(fS,null,null)])])}}const Vg=Ni()(["placeholder","editable","disabled","clearable","inputClass","inputAttr","range","multiple","separator","renderInputText","onInputError","onClear"]),mae=Ni()(["value","formatDate","parseDate","disabledDate","onChange","onFocus","onBlur","onClick",...Vg]);var fae=qo(hae,mae);function gae(e,{slots:t}){var n;const s=Zo(e,{prefixClass:"mx",valueType:"date",format:"YYYY-MM-DD",type:"date",disabledDate:()=>!1,disabledTime:()=>!1,confirmText:"OK"});Fse(s.prefixClass),Use(((n=s.formatter)==null?void 0:n.getWeek)||Lg);const o=Bse(ju(e,"lang")),a=X(),i=()=>a.value,r=X(!1),l=C(()=>!s.disabled&&(typeof s.open=="boolean"?s.open:r.value)),c=()=>{var O,x;s.disabled||l.value||(r.value=!0,(O=s["onUpdate:open"])==null||O.call(s,!0),(x=s.onOpen)==null||x.call(s))},u=()=>{var O,x;l.value&&(r.value=!1,(O=s["onUpdate:open"])==null||O.call(s,!1),(x=s.onClose)==null||x.call(s))},d=(O,x)=>(x=x||s.format,pi(s.formatter)&&typeof s.formatter.stringify=="function"?s.formatter.stringify(O,x):Dg(O,x,{locale:o.value.formatLocale})),m=(O,x)=>{if(x=x||s.format,pi(s.formatter)&&typeof s.formatter.parse=="function")return s.formatter.parse(O,x);const L=new Date;return xse(O,x,{locale:o.value.formatLocale,backupDate:L})},f=O=>{switch(s.valueType){case"date":return O instanceof Date?new Date(O.getTime()):new Date(NaN);case"timestamp":return typeof O=="number"?new Date(O):new Date(NaN);case"format":return typeof O=="string"?m(O):new Date(NaN);default:return typeof O=="string"?m(O,s.valueType):new Date(NaN)}},g=O=>{if(!Ho(O))return null;switch(s.valueType){case"date":return O;case"timestamp":return O.getTime();case"format":return d(O);default:return d(O,s.valueType)}},T=C(()=>{const O=s.value;return s.range?(Array.isArray(O)?O.slice(0,2):[null,null]).map(f):s.multiple?(Array.isArray(O)?O:[]).map(f):f(O)}),S=(O,x,L=!0)=>{var F,D;const V=Array.isArray(O)?O.map(g):g(O);return(F=s["onUpdate:value"])==null||F.call(s,V),(D=s.onChange)==null||D.call(s,V,x),L&&u(),V},_=X(new Date);da(()=>{l.value&&(_.value=T.value)});const E=(O,x)=>{s.confirm?_.value=O:S(O,x,!s.multiple&&(x===s.type||x==="time"))},b=()=>{var O;const x=S(_.value);(O=s.onConfirm)==null||O.call(s,x)},I=O=>s.disabledDate(O)||s.disabledTime(O),R=O=>{var x;const{prefixClass:L}=s;return y("div",{class:`${L}-datepicker-sidebar`},[(x=t.sidebar)==null?void 0:x.call(t,O),(s.shortcuts||[]).map((F,D)=>y("button",{key:D,"data-index":D,type:"button",class:`${L}-btn ${L}-btn-text ${L}-btn-shortcut`,onClick:()=>{var V;const B=(V=F.onClick)==null?void 0:V.call(F);B&&S(B)}},[F.text]))])};return()=>{var O,x;const{prefixClass:L,disabled:F,confirm:D,range:V,popupClass:B,popupStyle:P,appendToBody:k}=s,U={value:_.value,"onUpdate:value":E,emit:S},j=t.header&&y("div",{class:`${L}-datepicker-header`},[t.header(U)]),z=(t.footer||D)&&y("div",{class:`${L}-datepicker-footer`},[(O=t.footer)==null?void 0:O.call(t,U),D&&y("button",{type:"button",class:`${L}-btn ${L}-datepicker-btn-confirm`,onClick:b},[s.confirmText])]),Y=(x=t.content)==null?void 0:x.call(t,U),te=(t.sidebar||s.shortcuts)&&R(U);return y("div",{ref:a,class:{[`${L}-datepicker`]:!0,[`${L}-datepicker-range`]:V,disabled:F}},[y(fae,La(Ss({},Po(s,Vg)),{value:T.value,formatDate:d,parseDate:m,disabledDate:I,onChange:S,onClick:c,onFocus:c,onBlur:u}),Po(t,["icon-calendar","icon-clear","input"])),y(Xse,{className:B,style:P,visible:l.value,appendToBody:k,getRelativeElement:i,onClickOutside:u},{default:()=>[te,y("div",{class:`${L}-datepicker-content`},[j,Y,z])]})])}}const _ae=Ni()(["value","valueType","type","format","formatter","lang","prefixClass","appendToBody","open","popupClass","popupStyle","confirm","confirmText","shortcuts","disabledDate","disabledTime","onOpen","onClose","onConfirm","onChange","onUpdate:open","onUpdate:value"]),vae=[..._ae,...Vg];var L1=qo(gae,vae);function hu(e){var t=e,{value:n}=t,s=kse(t,["value"]);const o=ta();return y("button",La(Ss({},s),{type:"button",class:`${o}-btn ${o}-btn-text ${o}-btn-icon-${n}`}),[y("i",{class:`${o}-icon-${n}`},null)])}function Hg({type:e,calendar:t,onUpdateCalendar:n},{slots:s}){var o;const a=ta(),i=()=>{n(Ed(t,m=>m-1))},r=()=>{n(Ed(t,m=>m+1))},l=()=>{n(Pr(t,m=>m-1))},c=()=>{n(Pr(t,m=>m+1))},u=()=>{n(Pr(t,m=>m-10))},d=()=>{n(Pr(t,m=>m+10))};return y("div",{class:`${a}-calendar-header`},[y(hu,{value:"double-left",onClick:e==="year"?u:l},null),e==="date"&&y(hu,{value:"left",onClick:i},null),y(hu,{value:"double-right",onClick:e==="year"?d:c},null),e==="date"&&y(hu,{value:"right",onClick:r},null),y("span",{class:`${a}-calendar-header-label`},[(o=s.default)==null?void 0:o.call(s)])])}function bae({calendar:e,isWeekMode:t,showWeekNumber:n,titleFormat:s,getWeekActive:o,getCellClasses:a,onSelect:i,onUpdatePanel:r,onUpdateCalendar:l,onDateMouseEnter:c,onDateMouseLeave:u}){const d=ta(),m=Gse(),f=Ug().value,{yearFormat:g,monthBeforeYear:T,monthFormat:S="MMM",formatLocale:_}=f,E=_.firstDayOfWeek||0;let b=f.days||_.weekdaysMin;b=b.concat(b).slice(E,E+7);const I=e.getFullYear(),R=e.getMonth(),O=Fg(dae({firstDayOfWeek:E,year:I,month:R}),7),x=(U,j)=>Dg(U,j,{locale:f.formatLocale}),L=U=>{r(U)},F=U=>{const j=U.getAttribute("data-index"),[z,Y]=j.split(",").map(Z=>parseInt(Z,10)),te=O[z][Y];return new Date(te)},D=U=>{i(F(U.currentTarget))},V=U=>{c&&c(F(U.currentTarget))},B=U=>{u&&u(F(U.currentTarget))},P=y("button",{type:"button",class:`${d}-btn ${d}-btn-text ${d}-btn-current-year`,onClick:()=>L("year")},[x(e,g)]),k=y("button",{type:"button",class:`${d}-btn ${d}-btn-text ${d}-btn-current-month`,onClick:()=>L("month")},[x(e,S)]);return n=typeof n=="boolean"?n:t,y("div",{class:[`${d}-calendar ${d}-calendar-panel-date`,{[`${d}-calendar-week-mode`]:t}]},[y(Hg,{type:"date",calendar:e,onUpdateCalendar:l},{default:()=>[T?[k,P]:[P,k]]}),y("div",{class:`${d}-calendar-content`},[y("table",{class:`${d}-table ${d}-table-date`},[y("thead",null,[y("tr",null,[n&&y("th",{class:`${d}-week-number-header`},null),b.map(U=>y("th",{key:U},[U]))])]),y("tbody",null,[O.map((U,j)=>y("tr",{key:j,class:[`${d}-date-row`,{[`${d}-active-week`]:o(U)}]},[n&&y("td",{class:`${d}-week-number`,"data-index":`${j},0`,onClick:D},[y("div",null,[m(U[0])])]),U.map((z,Y)=>y("td",{key:Y,class:["cell",a(z)],title:x(z,s),"data-index":`${j},${Y}`,onClick:D,onMouseenter:V,onMouseleave:B},[y("div",null,[z.getDate()])]))]))])])])])}function Eae({calendar:e,getCellClasses:t,onSelect:n,onUpdateCalendar:s,onUpdatePanel:o}){const a=ta(),i=Ug().value,r=i.months||i.formatLocale.monthsShort,l=u=>qi(e.getFullYear(),u),c=u=>{const m=u.currentTarget.getAttribute("data-month");n(l(parseInt(m,10)))};return y("div",{class:`${a}-calendar ${a}-calendar-panel-month`},[y(Hg,{type:"month",calendar:e,onUpdateCalendar:s},{default:()=>[y("button",{type:"button",class:`${a}-btn ${a}-btn-text ${a}-btn-current-year`,onClick:()=>o("year")},[e.getFullYear()])]}),y("div",{class:`${a}-calendar-content`},[y("table",{class:`${a}-table ${a}-table-month`},[Fg(r,3).map((u,d)=>y("tr",{key:d},[u.map((m,f)=>{const g=d*3+f;return y("td",{key:f,class:["cell",t(l(g))],"data-month":g,onClick:c},[y("div",null,[m])])})]))])])])}const Tae=e=>{const t=Math.floor(e.getFullYear()/10)*10,n=[];for(let s=0;s<10;s++)n.push(t+s);return Fg(n,2)};function yae({calendar:e,getCellClasses:t=()=>[],getYearPanel:n=Tae,onSelect:s,onUpdateCalendar:o}){const a=ta(),i=d=>qi(d,0),r=d=>{const f=d.currentTarget.getAttribute("data-year");s(i(parseInt(f,10)))},l=n(new Date(e)),c=l[0][0],u=x1(x1(l));return y("div",{class:`${a}-calendar ${a}-calendar-panel-year`},[y(Hg,{type:"year",calendar:e,onUpdateCalendar:o},{default:()=>[y("span",null,[c]),y("span",{class:`${a}-calendar-decade-separator`},null),y("span",null,[u])]}),y("div",{class:`${a}-calendar-content`},[y("table",{class:`${a}-table ${a}-table-year`},[l.map((d,m)=>y("tr",{key:m},[d.map((f,g)=>y("td",{key:g,class:["cell",t(i(f))],"data-year":f,onClick:r},[y("div",null,[f])]))]))])])])}function Sae(e){const t=Zo(e,{defaultValue:yi(new Date),type:"date",disabledDate:()=>!1,getClasses:()=>[],titleFormat:"YYYY-MM-DD"}),n=C(()=>(Array.isArray(t.value)?t.value:[t.value]).filter(Ho).map(E=>t.type==="year"?uae(E):t.type==="month"?M1(E):yi(E))),s=X(new Date);da(()=>{let _=t.calendar;if(!Ho(_)){const{length:E}=n.value;_=ap(E>0?n.value[E-1]:t.defaultValue)}s.value=M1(_)});const o=_=>{var E;s.value=_,(E=t.onCalendarChange)==null||E.call(t,_)},a=X("date");da(()=>{const _=["date","month","year"],E=Math.max(_.indexOf(t.type),_.indexOf(t.defaultPanel));a.value=E!==-1?_[E]:"date"});const i=_=>{var E;const b=a.value;a.value=_,(E=t.onPanelChange)==null||E.call(t,_,b)},r=_=>t.disabledDate(new Date(_),n.value),l=(_,E)=>{var b,I,R;if(!r(_))if((b=t.onPick)==null||b.call(t,_),t.multiple===!0){const O=n.value.filter(x=>x.getTime()!==_.getTime());O.length===n.value.length&&O.push(_),(I=t["onUpdate:value"])==null||I.call(t,O,E)}else(R=t["onUpdate:value"])==null||R.call(t,_,E)},c=_=>{l(_,t.type==="week"?"week":"date")},u=_=>{if(t.type==="year")l(_,"year");else if(o(_),i("month"),t.partialUpdate&&n.value.length===1){const E=Pr(n.value[0],_.getFullYear());l(E,"year")}},d=_=>{if(t.type==="month")l(_,"month");else if(o(_),i("date"),t.partialUpdate&&n.value.length===1){const E=Ed(Pr(n.value[0],_.getFullYear()),_.getMonth());l(E,"month")}},m=(_,E=[])=>(r(_)?E.push("disabled"):n.value.some(b=>b.getTime()===_.getTime())&&E.push("active"),E.concat(t.getClasses(_,n.value,E.join(" ")))),f=_=>{const E=_.getMonth()!==s.value.getMonth(),b=[];return _.getTime()===new Date().setHours(0,0,0,0)&&b.push("today"),E&&b.push("not-current-month"),m(_,b)},g=_=>t.type!=="month"?s.value.getMonth()===_.getMonth()?"active":"":m(_),T=_=>t.type!=="year"?s.value.getFullYear()===_.getFullYear()?"active":"":m(_),S=_=>{if(t.type!=="week")return!1;const E=_[0].getTime(),b=_[6].getTime();return n.value.some(I=>{const R=I.getTime();return R>=E&&R<=b})};return()=>a.value==="year"?y(yae,{calendar:s.value,getCellClasses:T,getYearPanel:t.getYearPanel,onSelect:u,onUpdateCalendar:o},null):a.value==="month"?y(Eae,{calendar:s.value,getCellClasses:g,onSelect:d,onUpdatePanel:i,onUpdateCalendar:o},null):y(bae,{isWeekMode:t.type==="week",showWeekNumber:t.showWeekNumber,titleFormat:t.titleFormat,calendar:s.value,getCellClasses:f,getWeekActive:S,onSelect:c,onUpdatePanel:i,onUpdateCalendar:o,onDateMouseEnter:t.onDateMouseEnter,onDateMouseLeave:t.onDateMouseLeave},null)}const op=Ni()(["type","value","defaultValue","defaultPanel","disabledDate","getClasses","calendar","multiple","partialUpdate","showWeekNumber","titleFormat","getYearPanel","onDateMouseEnter","onDateMouseLeave","onCalendarChange","onPanelChange","onUpdate:value","onPick"]);var ip=qo(Sae,op);const k1=(e,t)=>{const n=e.getTime();let[s,o]=t.map(a=>a.getTime());return s>o&&([s,o]=[o,s]),n>s&&n<o};function Aae(e){const t=Zo(e,{defaultValue:new Date,type:"date"}),n=ta(),s=C(()=>{let S=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];return S=S.map(_=>yi(_)),Zi(S)?S:[new Date,new Date].map(_=>yi(_))}),o=X([new Date(NaN),new Date(NaN)]);da(()=>{Zi(t.value)&&(o.value=t.value)});const a=(S,_)=>{var E;const[b,I]=o.value;Ho(b)&&!Ho(I)?(b.getTime()>S.getTime()?o.value=[S,b]:o.value=[b,S],(E=t["onUpdate:value"])==null||E.call(t,o.value,_)):o.value=[S,new Date(NaN)]},i=X([new Date,new Date]),r=C(()=>Zi(t.calendar)?t.calendar:i.value),l=C(()=>t.type==="year"?10*12:t.type==="month"?1*12:1),c=(S,_)=>{var E;const b=pae(S[0],S[1]),I=l.value-b;if(I>0){const R=_===1?0:1;S[R]=Ed(S[R],O=>O+(R===0?-I:I))}i.value=S,(E=t.onCalendarChange)==null||E.call(t,S,_)},u=S=>{c([S,r.value[1]],0)},d=S=>{c([r.value[0],S],1)};da(()=>{const S=Zi(t.value)?t.value:s.value;c(S.slice(0,2))});const m=X(null),f=S=>m.value=S,g=()=>m.value=null,T=(S,_,E)=>{const b=t.getClasses?t.getClasses(S,_,E):[],I=Array.isArray(b)?b:[b];return/disabled|active/.test(E)?I:(_.length===2&&k1(S,_)&&I.push("in-range"),_.length===1&&m.value&&k1(S,[_[0],m.value])?I.concat("hover-in-range"):I)};return()=>{const S=r.value.map((_,E)=>{const b=La(Ss({},t),{calendar:_,value:o.value,defaultValue:s.value[E],getClasses:T,partialUpdate:!1,multiple:!1,"onUpdate:value":a,onCalendarChange:E===0?u:d,onDateMouseLeave:g,onDateMouseEnter:f});return y(ip,b,null)});return y("div",{class:`${n}-calendar-range`},[S])}}const Wg=op;var zg=qo(Aae,Wg);const gS=yo({setup(e,{slots:t}){const n=ta(),s=X(),o=X(""),a=X("");dt(()=>{if(!s.value)return;const g=s.value,T=g.clientHeight*100/g.scrollHeight;o.value=T<100?`${T}%`:""});const r=Wse(),l=g=>{const T=g.currentTarget,{scrollHeight:S,scrollTop:_}=T;a.value=`${_*100/S}%`};let c=!1,u=0;const d=g=>{g.stopImmediatePropagation();const T=g.currentTarget,{offsetTop:S}=T;c=!0,u=g.clientY-S},m=g=>{if(!c||!s.value)return;const{clientY:T}=g,{scrollHeight:S,clientHeight:_}=s.value,b=(T-u)*S/_;s.value.scrollTop=b},f=()=>{c=!1};return dt(()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",f)}),zo(()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",f)}),()=>{var g;return y("div",{class:`${n}-scrollbar`,style:{position:"relative",overflow:"hidden"}},[y("div",{ref:s,class:`${n}-scrollbar-wrap`,style:{marginRight:`-${r}px`},onScroll:l},[(g=t.default)==null?void 0:g.call(t)]),y("div",{class:`${n}-scrollbar-track`},[y("div",{class:`${n}-scrollbar-thumb`,style:{height:o.value,top:a.value},onMousedown:d},null)])])}}});function Iae({options:e,getClasses:t,onSelect:n}){const s=ta(),o=a=>{const i=a.target,r=a.currentTarget;if(i.tagName.toUpperCase()!=="LI")return;const l=r.getAttribute("data-type"),c=parseInt(r.getAttribute("data-index"),10),u=parseInt(i.getAttribute("data-index"),10),d=e[c].list[u].value;n(d,l)};return y("div",{class:`${s}-time-columns`},[e.map((a,i)=>y(gS,{key:a.type,class:`${s}-time-column`},{default:()=>[y("ul",{class:`${s}-time-list`,"data-index":i,"data-type":a.type,onClick:o},[a.list.map((r,l)=>y("li",{key:r.text,"data-index":l,class:[`${s}-time-item`,t(r.value,a.type)]},[r.text]))])]}))])}function Cae(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!c0(e)}function Oae(e){let t;const n=ta();return y(gS,null,Cae(t=e.options.map(s=>y("div",{key:s.text,class:[`${n}-time-option`,e.getClasses(s.value,"time")],onClick:()=>e.onSelect(s.value,"time")},[s.text])))?t:{default:()=>[t]})}function Yh({length:e,step:t=1,options:n}){if(Array.isArray(n))return n.filter(o=>o>=0&&o<e);t<=0&&(t=1);const s=[];for(let o=0;o<e;o+=t)s.push(o);return s}function Nae(e,t){let{showHour:n,showMinute:s,showSecond:o,use12h:a}=t;const i=t.format||"HH:mm:ss";n=typeof n=="boolean"?n:/[HhKk]/.test(i),s=typeof s=="boolean"?s:/m/.test(i),o=typeof o=="boolean"?o:/s/.test(i),a=typeof a=="boolean"?a:/a/i.test(i);const r=[],l=a&&e.getHours()>=12;return n&&r.push({type:"hour",list:Yh({length:a?12:24,step:t.hourStep,options:t.hourOptions}).map(c=>{const u=c===0&&a?"12":Kh(c),d=new Date(e);return d.setHours(l?c+12:c),{value:d,text:u}})}),s&&r.push({type:"minute",list:Yh({length:60,step:t.minuteStep,options:t.minuteOptions}).map(c=>{const u=new Date(e);return u.setMinutes(c),{value:u,text:Kh(c)}})}),o&&r.push({type:"second",list:Yh({length:60,step:t.secondStep,options:t.secondOptions}).map(c=>{const u=new Date(e);return u.setSeconds(c),{value:u,text:Kh(c)}})}),a&&r.push({type:"ampm",list:["AM","PM"].map((c,u)=>{const d=new Date(e);return d.setHours(d.getHours()%12+u*12),{text:c,value:d}})}),r}function Xh(e=""){const t=e.split(":");if(t.length>=2){const n=parseInt(t[0],10),s=parseInt(t[1],10);return{hours:n,minutes:s}}return null}function wae({date:e,option:t,format:n,formatDate:s}){const o=[];if(typeof t=="function")return t()||[];const a=Xh(t.start),i=Xh(t.end),r=Xh(t.step),l=t.format||n;if(a&&i&&r){const c=a.minutes+a.hours*60,u=i.minutes+i.hours*60,d=r.minutes+r.hours*60,m=Math.floor((u-c)/d);for(let f=0;f<=m;f++){const g=c+f*d,T=Math.floor(g/60),S=g%60,_=new Date(e);_.setHours(T,S,0),o.push({value:_,text:s(_,l)})}}return o}const _S=(e,t,n=0)=>{if(n<=0){requestAnimationFrame(()=>{e.scrollTop=t});return}const o=(t-e.scrollTop)/n*10;requestAnimationFrame(()=>{const a=e.scrollTop+o;if(a>=t){e.scrollTop=t;return}e.scrollTop=a,_S(e,t,n-10)})};function Rae(e){const t=Zo(e,{defaultValue:yi(new Date),format:"HH:mm:ss",timeTitleFormat:"YYYY-MM-DD",disabledTime:()=>!1,scrollDuration:100}),n=ta(),s=Ug(),o=(T,S)=>Dg(T,S,{locale:s.value.formatLocale}),a=X(new Date);da(()=>{a.value=ap(t.value,t.defaultValue)});const i=T=>Array.isArray(T)?T.every(S=>t.disabledTime(new Date(S))):t.disabledTime(new Date(T)),r=T=>{const S=new Date(T);return i([S.getTime(),S.setMinutes(0,0,0),S.setMinutes(59,59,999)])},l=T=>{const S=new Date(T);return i([S.getTime(),S.setSeconds(0,0),S.setSeconds(59,999)])},c=T=>{const S=new Date(T),_=S.getHours()<12?0:12,E=_+11;return i([S.getTime(),S.setHours(_,0,0,0),S.setHours(E,59,59,999)])},u=(T,S)=>S==="hour"?r(T):S==="minute"?l(T):S==="ampm"?c(T):i(T),d=(T,S)=>{var _;if(!u(T,S)){const E=new Date(T);a.value=E,i(E)||(_=t["onUpdate:value"])==null||_.call(t,E,S)}},m=(T,S)=>u(T,S)?"disabled":T.getTime()===a.value.getTime()?"active":"",f=X(),g=T=>{if(!f.value)return;const S=f.value.querySelectorAll(".active");for(let _=0;_<S.length;_++){const E=S[_],b=Gg(E,f.value);if(b){const I=E.offsetTop;_S(b,I,T)}}};return dt(()=>g(0)),ct(a,()=>g(t.scrollDuration),{flush:"post"}),()=>{let T;return t.timePickerOptions?T=y(Oae,{onSelect:d,getClasses:m,options:wae({date:a.value,format:t.format,option:t.timePickerOptions,formatDate:o})},null):T=y(Iae,{options:Nae(a.value,t),onSelect:d,getClasses:m},null),y("div",{class:`${n}-time`,ref:f},[t.showTimeHeader&&y("div",{class:`${n}-time-header`},[y("button",{type:"button",class:`${n}-btn ${n}-btn-text ${n}-time-header-title`,onClick:t.onClickTitle},[o(a.value,t.timeTitleFormat)])]),y("div",{class:`${n}-time-content`},[T])])}}const rp=Ni()(["value","defaultValue","format","timeTitleFormat","showTimeHeader","disabledTime","timePickerOptions","hourOptions","minuteOptions","secondOptions","hourStep","minuteStep","secondStep","showHour","showMinute","showSecond","use12h","scrollDuration","onClickTitle","onUpdate:value"]);var vc=qo(Rae,rp);function xae(e){const t=Zo(e,{defaultValue:yi(new Date),disabledTime:()=>!1}),n=ta(),s=X([new Date(NaN),new Date(NaN)]);da(()=>{Zi(t.value)?s.value=t.value:s.value=[new Date(NaN),new Date(NaN)]});const o=(c,u)=>{var d;(d=t["onUpdate:value"])==null||d.call(t,s.value,c==="time"?"time-range":c,u)},a=(c,u)=>{s.value[0]=c,s.value[1].getTime()>=c.getTime()||(s.value[1]=c),o(u,0)},i=(c,u)=>{s.value[1]=c,s.value[0].getTime()<=c.getTime()||(s.value[0]=c),o(u,1)},r=c=>t.disabledTime(c,0),l=c=>c.getTime()<s.value[0].getTime()||t.disabledTime(c,1);return()=>{const c=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];return y("div",{class:`${n}-time-range`},[y(vc,La(Ss({},t),{"onUpdate:value":a,value:s.value[0],defaultValue:c[0],disabledTime:r}),null),y(vc,La(Ss({},t),{"onUpdate:value":i,value:s.value[1],defaultValue:c[1],disabledTime:l}),null)])}}const jg=rp;var Kg=qo(xae,jg);function vS(e){const t=X(!1),n=()=>{var a;t.value=!1,(a=e.onShowTimePanelChange)==null||a.call(e,!1)},s=()=>{var a;t.value=!0,(a=e.onShowTimePanelChange)==null||a.call(e,!0)};return{timeVisible:C(()=>typeof e.showTimePanel=="boolean"?e.showTimePanel:t.value),openTimePanel:s,closeTimePanel:n}}function $ae(e){const t=Zo(e,{disabledTime:()=>!1,defaultValue:yi(new Date)}),n=X(t.value);da(()=>{n.value=t.value});const{openTimePanel:s,closeTimePanel:o,timeVisible:a}=vS(t),i=(r,l)=>{var c;l==="date"&&s();let u=Td(r,ap(t.value,t.defaultValue));if(t.disabledTime(new Date(u))&&(u=Td(r,t.defaultValue),t.disabledTime(new Date(u)))){n.value=u;return}(c=t["onUpdate:value"])==null||c.call(t,u,l)};return()=>{const r=ta(),l=La(Ss({},Po(t,op)),{multiple:!1,type:"date",value:n.value,"onUpdate:value":i}),c=La(Ss({},Po(t,rp)),{showTimeHeader:!0,value:n.value,"onUpdate:value":t["onUpdate:value"],onClickTitle:o});return y("div",{class:`${r}-date-time`},[y(ip,l,null),a.value&&y(vc,c,null)])}}const bS=Ni()(["showTimePanel","onShowTimePanelChange"]),Mae=[...bS,...op,...rp];var ES=qo($ae,Mae);function Lae(e){const t=Zo(e,{defaultValue:yi(new Date),disabledTime:()=>!1}),n=X(t.value);da(()=>{n.value=t.value});const{openTimePanel:s,closeTimePanel:o,timeVisible:a}=vS(t),i=(r,l)=>{var c;l==="date"&&s();const u=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];let d=r.map((m,f)=>{const g=Zi(t.value)?t.value[f]:u[f];return Td(m,g)});if(d[1].getTime()<d[0].getTime()&&(d=[d[0],d[0]]),d.some(t.disabledTime)&&(d=r.map((m,f)=>Td(m,u[f])),d.some(t.disabledTime))){n.value=d;return}(c=t["onUpdate:value"])==null||c.call(t,d,l)};return()=>{const r=ta(),l=La(Ss({},Po(t,Wg)),{type:"date",value:n.value,"onUpdate:value":i}),c=La(Ss({},Po(t,jg)),{showTimeHeader:!0,value:n.value,"onUpdate:value":t["onUpdate:value"],onClickTitle:o});return y("div",{class:`${r}-date-time-range`},[y(zg,l,null),a.value&&y(Kg,c,null)])}}const kae=[...bS,...jg,...Wg];var TS=qo(Lae,kae);const Dae=Ni()(["range","open","appendToBody","clearable","confirm","disabled","editable","multiple","partialUpdate","showHour","showMinute","showSecond","showTimeHeader","showTimePanel","showWeekNumber","use12h"]),D1={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",year:"YYYY",month:"YYYY-MM",time:"HH:mm:ss",week:"w"};function yS(e,{slots:t}){const n=e.type||"date",s=e.format||D1[n]||D1.date,o=La(Ss({},jse(e,Dae)),{type:n,format:s});return y(L1,Po(o,L1.props),Ss({content:a=>{if(o.range){const i=n==="time"?Kg:n==="datetime"?TS:zg;return yn(i,Po(Ss(Ss({},o),a),i.props))}else{const i=n==="time"?vc:n==="datetime"?ES:ip;return yn(i,Po(Ss(Ss({},o),a),i.props))}},"icon-calendar":()=>n==="time"?y(lae,null,null):y(fS,null,null)},t))}const Pae={locale:uS,install:e=>{e.component("DatePicker",yS)}};var SS=Object.assign(yS,Pae,{Calendar:ip,CalendarRange:zg,TimePanel:vc,TimeRange:Kg,DateTime:ES,DateTimeRange:TS});const Bae={components:{DatePicker:SS},props:{confirmText:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Array,default:()=>[]}},emits:["change"],methods:{handleChange(e){this.$emit("change",e)}}},Fae={class:"date-picker"};function Uae(e,t,n,s,o,a){const i=M("DatePicker");return p(),v("div",Fae,[y(i,{range:"",confirm:"",clearable:!1,editable:!1,"confirm-text":n.confirmText,placeholder:n.placeholder,value:n.value,onChange:a.handleChange},null,8,["confirm-text","placeholder","value","onChange"])])}const AS=Ae(Bae,[["render",Uae]]),Gae=e=>e?e<60?`${e}s`:e<3600?`${Math.floor(e/60)}m`:e<86400?`${Math.floor(e/3600)}h`:`${Math.floor(e/86400)}d`:"",ys={1:{id:1,period:"day"},2:{id:2,period:"week"},3:{id:3,period:"month"},4:{id:4,period:"year"}},Us={DAY:{id:"DAY",period:"day",translationKey:"REPORT.GROUPING_OPTIONS.DAY"},WEEK:{id:"WEEK",period:"week",translationKey:"REPORT.GROUPING_OPTIONS.WEEK"},MONTH:{id:"MONTH",period:"month",translationKey:"REPORT.GROUPING_OPTIONS.MONTH"},YEAR:{id:"YEAR",period:"year",translationKey:"REPORT.GROUPING_OPTIONS.YEAR"}},Wr={LAST_7_DAYS:{id:"LAST_7_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS",offset:6,groupByOptions:[Us.DAY]},LAST_30_DAYS:{id:"LAST_30_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS",offset:29,groupByOptions:[Us.DAY,Us.WEEK]},LAST_3_MONTHS:{id:"LAST_3_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS",offset:89,groupByOptions:[Us.DAY,Us.WEEK,Us.MONTH]},LAST_6_MONTHS:{id:"LAST_6_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS",offset:179,groupByOptions:[Us.WEEK,Us.MONTH]},LAST_YEAR:{id:"LAST_YEAR",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_YEAR",offset:364,groupByOptions:[Us.WEEK,Us.MONTH]},CUSTOM_DATE_RANGE:{id:"CUSTOM_DATE_RANGE",translationKey:"REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE",offset:null,groupByOptions:[Us.DAY,Us.WEEK,Us.MONTH,Us.YEAR]}},P1='Inter,-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',Vae={type:"bar",backgroundColor:"rgb(31, 147, 255)"},IS=e=>({datasets:[Vae],scales:{x:{ticks:{fontFamily:P1},grid:{drawOnChartArea:!1}},y:{type:"linear",position:"left",ticks:{fontFamily:P1,beginAtZero:!0,stepSize:1,callback:e},grid:{drawOnChartArea:!1}}}}),Ir=IS((e,t,n)=>!t||t===n.length-1?e:""),qh=IS((e,t,n)=>!t||t===n.length-1?Gae(e):""),B1={conversations_count:Ir,incoming_messages_count:Ir,outgoing_messages_count:Ir,avg_first_response_time:qh,reply_time:qh,avg_resolution_time:qh,resolutions_count:Ir,bot_resolutions_count:Ir,bot_handoffs_count:Ir},F1={open:"OPEN",unattended:"UNATTENDED",unassigned:"UNASSIGNED",pending:"PENDING",online:"ONLINE",busy:"BUSY",offline:"OFFLINE"},Hae={class:"multiselect-wrap--small"},Wae={__name:"DateRange",emits:["onRangeChange"],setup(e,{emit:t}){const n=t,{t:s}=Me(),o=C(()=>Object.values(Wr).map(l=>({...l,name:s(l.translationKey)}))),a=X(Object.values(Wr)[0].id),i=C({get(){return o.value.find(l=>l.id===a.value)},set(l){a.value=l.id}}),r=l=>{i.value=l,n("onRangeChange",l)};return(l,c)=>{const u=M("multiselect");return p(),v("div",Hae,[y(u,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=d=>i.value=d),class:"no-margin","track-by":"id",label:"name",placeholder:l.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":l.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:o.value,searchable:!1,"allow-empty":!1,onSelect:r},null,8,["modelValue","placeholder","select-label","options"])])}}},zae={name:"ReportsFiltersDateGroupBy",props:{validGroupOptions:{type:Array,default:()=>[Us.DAY]},selectedOption:{type:Object,default:()=>Us.DAY}},emits:["onGroupingChange"],data(){return{currentSelectedFilter:null}},computed:{translatedOptions(){return this.validGroupOptions.map(e=>({...e,groupBy:this.$t(e.translationKey)}))}},watch:{selectedOption:{handler(){this.currentSelectedFilter={...this.selectedOption,groupBy:this.$t(this.selectedOption.translationKey)}},immediate:!0}},methods:{changeFilterSelection(e){this.groupByOptions=this.$emit("onGroupingChange",e)}}},jae={class:"multiselect-wrap--small"},Kae={"aria-hidden":"true",class:"hide"};function Yae(e,t,n,s,o,a){const i=M("multiselect");return p(),v("div",jae,[h("p",Kae,A(e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),y(i,{modelValue:o.currentSelectedFilter,"onUpdate:modelValue":t[0]||(t[0]=r=>o.currentSelectedFilter=r),class:"no-margin","track-by":"id",label:"groupBy",placeholder:e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:a.translatedOptions,"allow-empty":!1,"show-labels":!1,onSelect:a.changeFilterSelection},null,8,["modelValue","placeholder","options","onSelect"])])}const Xae=Ae(zae,[["render",Yae]]),qae={name:"ReportsFiltersAgents",emits:["agentsFilterSelection"],data(){return{selectedOptions:[]}},computed:{...lt({options:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{handleInput(){this.$emit("agentsFilterSelection",this.selectedOptions)}}},Zae={class:"multiselect-wrap--small"};function Qae(e,t,n,s,o,a){const i=M("multiselect");return p(),v("div",Zae,[y(i,{modelValue:o.selectedOptions,"onUpdate:modelValue":[t[0]||(t[0]=r=>o.selectedOptions=r),a.handleInput],class:"no-margin",options:e.options,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:e.$t("CSAT_REPORTS.FILTERS.AGENTS.PLACEHOLDER"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE")},null,8,["modelValue","options","placeholder","select-label","deselect-label","onUpdate:modelValue"])])}const Jae=Ae(qae,[["render",Qae]]),eoe={name:"ReportsFiltersLabels",emits:["labelsFilterSelection"],data(){return{selectedOption:null}},computed:{...lt({options:"labels/getLabels"})},mounted(){this.$store.dispatch("labels/get")},methods:{handleInput(){this.$emit("labelsFilterSelection",this.selectedOption)}}},toe={class:"multiselect-wrap--small"},noe={class:"flex items-center min-w-0 gap-2"},soe={class:"my-0 text-slate-800 dark:text-slate-75"},aoe={class:"flex items-center gap-2"},ooe={class:"my-0 text-slate-800 truncate min-w-0 dark:text-slate-75"};function ioe(e,t,n,s,o,a){const i=M("multiselect");return p(),v("div",toe,[y(i,{modelValue:o.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=r=>o.selectedOption=r),a.handleInput],class:"no-margin",placeholder:e.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),label:"title","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},{singleLabel:K(r=>[h("div",noe,[h("div",{style:Ht({backgroundColor:r.option.color}),class:"w-5 h-5 rounded-full"},null,4),h("span",soe,A(r.option.title),1)])]),option:K(r=>[h("div",aoe,[h("div",{style:Ht({backgroundColor:r.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-slate-100 dark:border-slate-800"},null,4),h("span",ooe,A(r.option.title),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const roe=Ae(eoe,[["render",ioe]]),loe={name:"ReportsFiltersInboxes",emits:["inboxFilterSelection"],data(){return{selectedOption:null}},computed:{...lt({options:"inboxes/getInboxes"})},mounted(){this.$store.dispatch("inboxes/get")},methods:{handleInput(){this.$emit("inboxFilterSelection",this.selectedOption)}}},coe={class:"multiselect-wrap--small"};function uoe(e,t,n,s,o,a){const i=M("multiselect");return p(),v("div",coe,[y(i,{modelValue:o.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=r=>o.selectedOption=r),a.handleInput],class:"no-margin",placeholder:e.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const doe=Ae(loe,[["render",uoe]]),poe={name:"ReportsFiltersTeams",emits:["teamFilterSelection"],data(){return{selectedOption:null}},computed:{...lt({options:"teams/getTeams"})},mounted(){this.$store.dispatch("teams/get")},methods:{handleInput(){this.$emit("teamFilterSelection",this.selectedOption)}}},hoe={class:"multiselect-wrap--small"};function moe(e,t,n,s,o,a){const i=M("multiselect");return p(),v("div",hoe,[y(i,{modelValue:o.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=r=>o.selectedOption=r),a.handleInput],class:"no-margin",placeholder:e.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const foe=Ae(poe,[["render",moe]]),goe={name:"ReportFiltersRatings",emits:["ratingFilterSelection"],data(){return{selectedOption:null,options:fi.reverse().map(t=>({...t,label:this.$t(t.translationKey)}))}},methods:{handleInput(e){this.$emit("ratingFilterSelection",e)}}},_oe={class:"multiselect-wrap--small"};function voe(e,t,n,s,o,a){const i=M("multiselect");return p(),v("div",_oe,[y(i,{modelValue:o.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=r=>o.selectedOption=r),a.handleInput],class:"no-margin","option-height":24,placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),options:o.options,"show-labels":!1,"track-by":"value",label:"label"},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const boe=Ae(goe,[["render",voe]]),Eoe={components:{WootDateRangePicker:AS,ReportsFiltersDateRange:Wae,ReportsFiltersDateGroupBy:Xae,ReportsFiltersAgents:Jae,ReportsFiltersLabels:roe,ReportsFiltersInboxes:doe,ReportsFiltersTeams:foe,ReportsFiltersRatings:boe},props:{showGroupByFilter:{type:Boolean,default:!1},showAgentsFilter:{type:Boolean,default:!1},showLabelsFilter:{type:Boolean,default:!1},showInboxFilter:{type:Boolean,default:!1},showRatingFilter:{type:Boolean,default:!1},showTeamFilter:{type:Boolean,default:!1},showBusinessHoursSwitch:{type:Boolean,default:!0}},emits:["filterChange"],data(){return{selectedDateRange:Wr.LAST_7_DAYS,selectedGroupByFilter:null,selectedLabel:null,selectedInbox:null,selectedTeam:null,selectedRating:null,selectedAgents:[],customDateRange:[new Date,new Date],businessHoursSelected:!1}},computed:{isDateRangeSelected(){return this.selectedDateRange.id===Wr.CUSTOM_DATE_RANGE.id},isGroupByPossible(){return this.selectedDateRange.id!==Wr.LAST_7_DAYS.id},to(){return this.isDateRangeSelected?Yu(this.customDateRange[1]):Yu(new Date)},from(){if(this.isDateRangeSelected)return Ku(this.customDateRange[0]);const{offset:e}=this.selectedDateRange,t=Fo(new Date,e);return Ku(t)},validGroupOptions(){return this.selectedDateRange.groupByOptions},validGroupBy(){return this.selectedGroupByFilter?this.validGroupOptions.map(t=>t.id).includes(this.selectedGroupByFilter.id)?this.selectedGroupByFilter:this.validGroupOptions[0]:this.validGroupOptions[0]}},watch:{businessHoursSelected(){this.emitChange()}},mounted(){this.emitChange()},methods:{emitChange(){const{from:e,to:t,selectedGroupByFilter:n,businessHoursSelected:s,selectedAgents:o,selectedLabel:a,selectedInbox:i,selectedTeam:r,selectedRating:l}=this;this.$emit("filterChange",{from:e,to:t,groupBy:n,businessHours:s,selectedAgents:o,selectedLabel:a,selectedInbox:i,selectedTeam:r,selectedRating:l})},onDateRangeChange(e){this.selectedDateRange=e,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onCustomDateRangeChange(e){this.customDateRange=e,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onGroupingChange(e){this.selectedGroupByFilter=e,this.emitChange()},handleAgentsFilterSelection(e){this.selectedAgents=e,this.emitChange()},handleLabelsFilterSelection(e){this.selectedLabel=e,this.emitChange()},handleInboxFilterSelection(e){this.selectedInbox=e,this.emitChange()},handleTeamFilterSelection(e){this.selectedTeam=e,this.emitChange()},handleRatingFilterSelection(e){this.selectedRating=e,this.emitChange()}}},Toe={class:"flex flex-col justify-between gap-3 md:flex-row"},yoe={class:"w-full grid gap-y-2 gap-x-1.5 grid-cols-[repeat(auto-fill,minmax(250px,1fr))]"},Soe={key:0,class:"flex items-center"},Aoe={class:"mx-2 text-sm whitespace-nowrap"};function Ioe(e,t,n,s,o,a){const i=M("ReportsFiltersDateRange"),r=M("WootDateRangePicker"),l=M("ReportsFiltersDateGroupBy"),c=M("ReportsFiltersAgents"),u=M("ReportsFiltersLabels"),d=M("ReportsFiltersTeams"),m=M("ReportsFiltersInboxes"),f=M("ReportsFiltersRatings"),g=M("woot-switch");return p(),v("div",Toe,[h("div",yoe,[y(i,{onOnRangeChange:a.onDateRangeChange},null,8,["onOnRangeChange"]),a.isDateRangeSelected?(p(),$(r,{key:0,"show-range":"",class:"no-margin auto-width",value:o.customDateRange,"confirm-text":e.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),onChange:a.onCustomDateRangeChange},null,8,["value","confirm-text","placeholder","onChange"])):w("",!0),n.showGroupByFilter&&a.isGroupByPossible?(p(),$(l,{key:1,"valid-group-options":a.validGroupOptions,"selected-option":o.selectedGroupByFilter,onOnGroupingChange:a.onGroupingChange},null,8,["valid-group-options","selected-option","onOnGroupingChange"])):w("",!0),n.showAgentsFilter?(p(),$(c,{key:2,onAgentsFilterSelection:a.handleAgentsFilterSelection},null,8,["onAgentsFilterSelection"])):w("",!0),n.showLabelsFilter?(p(),$(u,{key:3,onLabelsFilterSelection:a.handleLabelsFilterSelection},null,8,["onLabelsFilterSelection"])):w("",!0),n.showTeamFilter?(p(),$(d,{key:4,onTeamFilterSelection:a.handleTeamFilterSelection},null,8,["onTeamFilterSelection"])):w("",!0),n.showInboxFilter?(p(),$(m,{key:5,onInboxFilterSelection:a.handleInboxFilterSelection},null,8,["onInboxFilterSelection"])):w("",!0),n.showRatingFilter?(p(),$(f,{key:6,onRatingFilterSelection:a.handleRatingFilterSelection},null,8,["onRatingFilterSelection"])):w("",!0)]),n.showBusinessHoursSwitch?(p(),v("div",Soe,[h("span",Aoe,A(e.$t("REPORT.BUSINESS_HOURS")),1),h("span",null,[y(g,{modelValue:o.businessHoursSelected,"onUpdate:modelValue":t[0]||(t[0]=T=>o.businessHoursSelected=T)},null,8,["modelValue"])])])):w("",!0)])}const lp=Ae(Eoe,[["render",Ioe]]);function CS(e="getAccountSummary",t="getAccountSummaryFetchingStatus"){const n=Oe(e),s=Oe(t),o=r=>{if(!n.value.previous[r])return 0;const l=n.value[r]-n.value.previous[r];return Math.round(l/n.value.previous[r]*100)},a=r=>["avg_first_response_time","avg_resolution_time","reply_time"].includes(r);return{calculateTrend:o,isAverageMetricType:a,displayMetric:r=>a(r)?$f(n.value[r]):Number(n.value[r]||"").toLocaleString(),fetchingStatus:s}}const Coe={class:"text-n-slate-11"},Ooe={class:"text-sm"},Noe={class:"flex items-end text-n-slate-12"},woe={key:0},Roe={key:1,class:"text-n-ruby-10 text-sm"},xoe={key:2,class:"text-xl font-medium"},$oe={key:3,class:"text-xs ml-4 flex items-center mb-0.5"},Moe={__name:"ChartStats",props:{metric:{type:Object,default:()=>({})},accountSummaryKey:{type:String,default:"getAccountSummary"},summaryFetchingKey:{type:String,default:"getAccountSummaryFetchingStatus"}},setup(e){const t=e,{t:n}=Me(),{calculateTrend:s,displayMetric:o,isAverageMetricType:a,fetchingStatus:i}=CS(t.accountSummaryKey,t.summaryFetchingKey),r=(l,c)=>a(c)?l>0?"border-red-500 text-red-500":"border-green-500 text-green-500":l<0?"border-red-500 text-red-500":"border-green-500 text-green-500";return(l,c)=>(p(),v("div",Coe,[h("span",Ooe,A(e.metric.NAME),1),h("div",Noe,[N(i)===N(Kc).FETCHING?(p(),v("div",woe,[y(gs)])):N(i)===N(Kc).FAILED?(p(),v("div",Roe,A(N(n)("REPORT.SUMMARY_FETCHING_FAILED")),1)):N(i)===N(Kc).FINISHED?(p(),v("div",xoe,A(N(o)(e.metric.KEY)),1)):w("",!0),e.metric.trend&&N(i)===N(Kc).FINISHED?(p(),v("div",$oe,[e.metric.trend<0?(p(),v("div",{key:0,class:se(["h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1",r(e.metric.trend,e.metric.KEY)])},null,2)):(p(),v("div",{key:1,class:se(["h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1",r(e.metric.trend,e.metric.KEY)])},null,2)),h("span",{class:se(["font-medium",r(e.metric.trend,e.metric.KEY)])},A(N(s)(e.metric.KEY))+"% ",3)])):w("",!0)])]))}},Loe={components:{ChartStats:Moe,BarChart:O0},props:{groupBy:{type:Object,default:()=>({})},accountSummaryKey:{type:String,default:"getAccountSummary"},summaryFetchingKey:{type:String,default:"getAccountSummaryFetchingStatus"},reportKeys:{type:Object,default:()=>({CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"})}},setup(e){const{calculateTrend:t,isAverageMetricType:n}=CS(e.accountSummaryKey);return{calculateTrend:t,isAverageMetricType:n}},computed:{...lt({accountReport:"getAccountReports"}),metrics(){const e=Object.keys(this.reportKeys),t={FIRST_RESPONSE_TIME:this.$t("REPORT.METRICS.FIRST_RESPONSE_TIME.INFO_TEXT"),RESOLUTION_TIME:this.$t("REPORT.METRICS.RESOLUTION_TIME.INFO_TEXT")};return e.map(n=>({NAME:this.$t(`REPORT.METRICS.${n}.NAME`),KEY:this.reportKeys[n],DESC:this.$t(`REPORT.METRICS.${n}.DESC`),INFO_TEXT:t[n],TOOLTIP_TEXT:`REPORT.METRICS.${n}.TOOLTIP_TEXT`,trend:this.calculateTrend(this.reportKeys[n])}))}},methods:{getCollection(e){if(!this.accountReport.data[e.KEY])return{};const t=this.accountReport.data[e.KEY],n=t.map(o=>{var a,i,r;if(((a=this.groupBy)==null?void 0:a.period)===ys[2].period){let l=new Date(Ml(o.timestamp));const c=l.getDate()-l.getDay(),u=c+6,d=new Date(l.setDate(c)),m=new Date(l.setDate(u));return`${ms(d,"dd-MMM")} - ${ms(m,"dd-MMM")}`}return((i=this.groupBy)==null?void 0:i.period)===ys[3].period?ms(Ml(o.timestamp),"MMM-yyyy"):((r=this.groupBy)==null?void 0:r.period)===ys[4].period?ms(Ml(o.timestamp),"yyyy"):ms(Ml(o.timestamp),"dd-MMM")}),s=B1[e.KEY].datasets.map(o=>{switch(o.type){case"bar":return{...o,yAxisID:"y",label:e.NAME,data:t.map(a=>a.value)};case"line":return{...o,yAxisID:"y",label:this.metrics[0].NAME,data:t.map(a=>a.count)};default:return o}});return{labels:n,datasets:s}},getChartOptions(e){const t={scales:B1[e.KEY].scales};return this.isAverageMetricType(e.KEY)&&(t.plugins={tooltip:{callbacks:{label:({raw:n,dataIndex:s})=>{var o;return this.$t(e.TOOLTIP_TEXT,{metricValue:$f(n||0),conversationCount:((o=this.accountReport.data[e.KEY][s])==null?void 0:o.count)||0})}}}}),t}}},koe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 px-6 py-5 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2"},Doe={class:"mt-4 h-72"},Poe={key:1,class:"flex items-center justify-center h-72"},Boe={key:1,class:"text-sm text-slate-600"};function Foe(e,t,n,s,o,a){const i=M("ChartStats"),r=M("woot-loading-state"),l=M("BarChart");return p(),v("div",koe,[(p(!0),v(pe,null,Ne(a.metrics,c=>(p(),v("div",{key:c.KEY,class:"p-4 mb-3 rounded-md"},[y(i,{metric:c,"account-summary-key":n.accountSummaryKey,"summary-fetching-key":n.summaryFetchingKey},null,8,["metric","account-summary-key","summary-fetching-key"]),h("div",Doe,[e.accountReport.isFetching[c.KEY]?(p(),$(r,{key:0,class:"text-xs",message:e.$t("REPORT.LOADING_CHART")},null,8,["message"])):(p(),v("div",Poe,[e.accountReport.data[c.KEY].length?(p(),$(l,{key:0,collection:a.getCollection(c),"chart-options":a.getChartOptions(c)},null,8,["collection","chart-options"])):(p(),v("span",Boe,A(e.$t("REPORT.NO_ENOUGH_DATA")),1))]))])]))),128))])}const Yg=Ae(Loe,[["render",Foe]]),Uoe={class:"flex flex-col gap-1 pt-10 pb-5"},Goe={key:0},Voe={class:"flex justify-between w-full gap-5"},Hoe={class:"flex flex-col gap-2"},Woe={class:"text-xl font-medium text-n-slate-12"},zoe={key:0,class:"text-n-slate-12 mt-2"},joe={class:"flex-shrink-0"},Oo={__name:"ReportHeader",props:{headerTitle:{required:!0,type:String},headerDescription:{type:String,default:""},hasBackButton:{type:Boolean,default:!1}},setup(e){return(t,n)=>(p(),v("section",Uoe,[e.hasBackButton?(p(),v("div",Goe,[y(lr,{compact:""})])):w("",!0),h("div",Voe,[h("div",Hoe,[h("div",null,[h("span",Woe,A(e.headerTitle),1),e.headerDescription?(p(),v("p",zoe,A(e.headerDescription),1)):w("",!0)])]),h("div",joe,[We(t.$slots,"default")])])]))}},Koe={CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"},Yoe={name:"ConversationReports",components:{ReportHeader:Oo,ReportFilterSelector:lp,ReportContainer:Yg,V4Button:oe},data(){return{from:0,to:0,groupBy:ys[1],businessHours:!1}},methods:{fetchAllData(){this.fetchAccountSummary(),this.fetchChartData()},fetchAccountSummary(){try{this.$store.dispatch("fetchAccountSummary",this.getRequestPayload())}catch{ce(this.$t("REPORT.SUMMARY_FETCHING_FAILED"))}},fetchChartData(){["CONVERSATIONS","INCOMING_MESSAGES","OUTGOING_MESSAGES","FIRST_RESPONSE_TIME","RESOLUTION_TIME","RESOLUTION_COUNT","REPLY_TIME"].forEach(async e=>{try{await this.$store.dispatch("fetchAccountReport",{metric:Koe[e],...this.getRequestPayload()})}catch{ce(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},getRequestPayload(){const{from:e,to:t,groupBy:n,businessHours:s}=this;return{from:e,to:t,groupBy:n==null?void 0:n.period,businessHours:s}},downloadAgentReports(){const{from:e,to:t}=this,n=Cc({type:"agent",to:t,businessHours:this.businessHours});this.$store.dispatch("downloadAgentReports",{from:e,to:t,fileName:n,businessHours:this.businessHours})},onFilterChange({from:e,to:t,groupBy:n,businessHours:s}){this.from=e,this.to=t,this.groupBy=n,this.businessHours=s,this.fetchAllData(),Pt(Fr.FILTER_REPORT,{filterValue:{from:e,to:t,groupBy:n,businessHours:s},reportType:"conversations"})}}},Xoe={class:"flex flex-col gap-3"};function qoe(e,t,n,s,o,a){const i=M("V4Button"),r=M("ReportHeader"),l=M("ReportFilterSelector"),c=M("ReportContainer");return p(),v(pe,null,[y(r,{"header-title":e.$t("REPORT.HEADER")},{default:K(()=>[y(i,{label:e.$t("REPORT.DOWNLOAD_AGENT_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:a.downloadAgentReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),h("div",Xoe,[y(l,{"show-agents-filter":!1,"show-group-by-filter":"",onFilterChange:a.onFilterChange},null,8,["onFilterChange"]),y(c,{"group-by":o.groupBy},null,8,["group-by"])])],64)}const Zoe=Ae(Yoe,[["render",qoe]]);/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function cp(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function hi(e,t){return typeof e=="function"?e(t):e}function Ea(e,t){return n=>{t.setState(s=>({...s,[e]:hi(n,s[e])}))}}function up(e){return e instanceof Function}function Qoe(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Joe(e,t){const n=[],s=o=>{o.forEach(a=>{n.push(a);const i=t(a);i!=null&&i.length&&s(i)})};return s(e),n}function Ft(e,t,n){let s=[],o;return a=>{let i;n.key&&n.debug&&(i=Date.now());const r=e(a);if(!(r.length!==s.length||r.some((u,d)=>s[d]!==u)))return o;s=r;let c;if(n.key&&n.debug&&(c=Date.now()),o=t(...r),n==null||n.onChange==null||n.onChange(o),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-i)*100)/100,d=Math.round((Date.now()-c)*100)/100,m=d/16,f=(g,T)=>{for(g=String(g);g.length<T;)g=" "+g;return g};console.info(`%c⏱ ${f(d,5)} /${f(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n==null?void 0:n.key)}return o}}function Ut(e,t,n,s){return{debug:()=>{var o;return(o=e==null?void 0:e.debugAll)!=null?o:e[t]},key:!1,onChange:s}}function eie(e,t,n,s){const o=()=>{var i;return(i=a.getValue())!=null?i:e.options.renderFallbackValue},a={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(s),renderValue:o,getContext:Ft(()=>[e,n,t,a],(i,r,l,c)=>({table:i,column:r,row:l,cell:c,getValue:c.getValue,renderValue:c.renderValue}),Ut(e.options,"debugCells"))};return e._features.forEach(i=>{i.createCell==null||i.createCell(a,n,t,e)},{}),a}function tie(e,t,n,s){var o,a;const r={...e._getDefaultColumnDef(),...t},l=r.accessorKey;let c=(o=(a=r.id)!=null?a:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?o:typeof r.header=="string"?r.header:void 0,u;if(r.accessorFn?u=r.accessorFn:l&&(l.includes(".")?u=m=>{let f=m;for(const T of l.split(".")){var g;f=(g=f)==null?void 0:g[T]}return f}:u=m=>m[r.accessorKey]),!c)throw new Error;let d={id:`${String(c)}`,accessorFn:u,parent:s,depth:n,columnDef:r,columns:[],getFlatColumns:Ft(()=>[!0],()=>{var m;return[d,...(m=d.columns)==null?void 0:m.flatMap(f=>f.getFlatColumns())]},Ut(e.options,"debugColumns")),getLeafColumns:Ft(()=>[e._getOrderColumnsFn()],m=>{var f;if((f=d.columns)!=null&&f.length){let g=d.columns.flatMap(T=>T.getLeafColumns());return m(g)}return[d]},Ut(e.options,"debugColumns"))};for(const m of e._features)m.createColumn==null||m.createColumn(d,e);return d}const Ps="debugHeaders";function U1(e,t,n){var s;let a={id:(s=n.id)!=null?s:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const i=[],r=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(r),i.push(l)};return r(a),i},getContext:()=>({table:e,header:a,column:t})};return e._features.forEach(i=>{i.createHeader==null||i.createHeader(a,e)}),a}const nie={createTable:e=>{e.getHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,o)=>{var a,i;const r=(a=s==null?void 0:s.map(d=>n.find(m=>m.id===d)).filter(Boolean))!=null?a:[],l=(i=o==null?void 0:o.map(d=>n.find(m=>m.id===d)).filter(Boolean))!=null?i:[],c=n.filter(d=>!(s!=null&&s.includes(d.id))&&!(o!=null&&o.includes(d.id)));return mu(t,[...r,...c,...l],e)},Ut(e.options,Ps)),e.getCenterHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,o)=>(n=n.filter(a=>!(s!=null&&s.includes(a.id))&&!(o!=null&&o.includes(a.id))),mu(t,n,e,"center")),Ut(e.options,Ps)),e.getLeftHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,s)=>{var o;const a=(o=s==null?void 0:s.map(i=>n.find(r=>r.id===i)).filter(Boolean))!=null?o:[];return mu(t,a,e,"left")},Ut(e.options,Ps)),e.getRightHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,s)=>{var o;const a=(o=s==null?void 0:s.map(i=>n.find(r=>r.id===i)).filter(Boolean))!=null?o:[];return mu(t,a,e,"right")},Ut(e.options,Ps)),e.getFooterGroups=Ft(()=>[e.getHeaderGroups()],t=>[...t].reverse(),Ut(e.options,Ps)),e.getLeftFooterGroups=Ft(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),Ut(e.options,Ps)),e.getCenterFooterGroups=Ft(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),Ut(e.options,Ps)),e.getRightFooterGroups=Ft(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),Ut(e.options,Ps)),e.getFlatHeaders=Ft(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ut(e.options,Ps)),e.getLeftFlatHeaders=Ft(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ut(e.options,Ps)),e.getCenterFlatHeaders=Ft(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ut(e.options,Ps)),e.getRightFlatHeaders=Ft(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ut(e.options,Ps)),e.getCenterLeafHeaders=Ft(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ut(e.options,Ps)),e.getLeftLeafHeaders=Ft(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ut(e.options,Ps)),e.getRightLeafHeaders=Ft(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ut(e.options,Ps)),e.getLeafHeaders=Ft(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,s)=>{var o,a,i,r,l,c;return[...(o=(a=t[0])==null?void 0:a.headers)!=null?o:[],...(i=(r=n[0])==null?void 0:r.headers)!=null?i:[],...(l=(c=s[0])==null?void 0:c.headers)!=null?l:[]].map(u=>u.getLeafHeaders()).flat()},Ut(e.options,Ps))}};function mu(e,t,n,s){var o,a;let i=0;const r=function(m,f){f===void 0&&(f=1),i=Math.max(i,f),m.filter(g=>g.getIsVisible()).forEach(g=>{var T;(T=g.columns)!=null&&T.length&&r(g.columns,f+1)},0)};r(e);let l=[];const c=(m,f)=>{const g={depth:f,id:[s,`${f}`].filter(Boolean).join("_"),headers:[]},T=[];m.forEach(S=>{const _=[...T].reverse()[0],E=S.column.depth===g.depth;let b,I=!1;if(E&&S.column.parent?b=S.column.parent:(b=S.column,I=!0),_&&(_==null?void 0:_.column)===b)_.subHeaders.push(S);else{const R=U1(n,b,{id:[s,f,b.id,S==null?void 0:S.id].filter(Boolean).join("_"),isPlaceholder:I,placeholderId:I?`${T.filter(O=>O.column===b).length}`:void 0,depth:f,index:T.length});R.subHeaders.push(S),T.push(R)}g.headers.push(S),S.headerGroup=g}),l.push(g),f>0&&c(T,f-1)},u=t.map((m,f)=>U1(n,m,{depth:i,index:f}));c(u,i-1),l.reverse();const d=m=>m.filter(g=>g.column.getIsVisible()).map(g=>{let T=0,S=0,_=[0];g.subHeaders&&g.subHeaders.length?(_=[],d(g.subHeaders).forEach(b=>{let{colSpan:I,rowSpan:R}=b;T+=I,_.push(R)})):T=1;const E=Math.min(..._);return S=S+E,g.colSpan=T,g.rowSpan=S,{colSpan:T,rowSpan:S}});return d((o=(a=l[0])==null?void 0:a.headers)!=null?o:[]),l}const sie=(e,t,n,s,o,a,i)=>{let r={id:t,index:s,original:n,depth:o,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(r._valuesCache.hasOwnProperty(l))return r._valuesCache[l];const c=e.getColumn(l);if(c!=null&&c.accessorFn)return r._valuesCache[l]=c.accessorFn(r.original,s),r._valuesCache[l]},getUniqueValues:l=>{if(r._uniqueValuesCache.hasOwnProperty(l))return r._uniqueValuesCache[l];const c=e.getColumn(l);if(c!=null&&c.accessorFn)return c.columnDef.getUniqueValues?(r._uniqueValuesCache[l]=c.columnDef.getUniqueValues(r.original,s),r._uniqueValuesCache[l]):(r._uniqueValuesCache[l]=[r.getValue(l)],r._uniqueValuesCache[l])},renderValue:l=>{var c;return(c=r.getValue(l))!=null?c:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Joe(r.subRows,l=>l.subRows),getParentRow:()=>r.parentId?e.getRow(r.parentId,!0):void 0,getParentRows:()=>{let l=[],c=r;for(;;){const u=c.getParentRow();if(!u)break;l.push(u),c=u}return l.reverse()},getAllCells:Ft(()=>[e.getAllLeafColumns()],l=>l.map(c=>eie(e,r,c,c.id)),Ut(e.options,"debugRows")),_getAllCellsByColumnId:Ft(()=>[r.getAllCells()],l=>l.reduce((c,u)=>(c[u.column.id]=u,c),{}),Ut(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const c=e._features[l];c==null||c.createRow==null||c.createRow(r,e)}return r},aie={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},OS=(e,t,n)=>{var s,o;const a=n==null||(s=n.toString())==null?void 0:s.toLowerCase();return!!(!((o=e.getValue(t))==null||(o=o.toString())==null||(o=o.toLowerCase())==null)&&o.includes(a))};OS.autoRemove=e=>Xa(e);const NS=(e,t,n)=>{var s;return!!(!((s=e.getValue(t))==null||(s=s.toString())==null)&&s.includes(n))};NS.autoRemove=e=>Xa(e);const wS=(e,t,n)=>{var s;return((s=e.getValue(t))==null||(s=s.toString())==null?void 0:s.toLowerCase())===(n==null?void 0:n.toLowerCase())};wS.autoRemove=e=>Xa(e);const RS=(e,t,n)=>{var s;return(s=e.getValue(t))==null?void 0:s.includes(n)};RS.autoRemove=e=>Xa(e)||!(e!=null&&e.length);const xS=(e,t,n)=>!n.some(s=>{var o;return!((o=e.getValue(t))!=null&&o.includes(s))});xS.autoRemove=e=>Xa(e)||!(e!=null&&e.length);const $S=(e,t,n)=>n.some(s=>{var o;return(o=e.getValue(t))==null?void 0:o.includes(s)});$S.autoRemove=e=>Xa(e)||!(e!=null&&e.length);const MS=(e,t,n)=>e.getValue(t)===n;MS.autoRemove=e=>Xa(e);const LS=(e,t,n)=>e.getValue(t)==n;LS.autoRemove=e=>Xa(e);const Xg=(e,t,n)=>{let[s,o]=n;const a=e.getValue(t);return a>=s&&a<=o};Xg.resolveFilterValue=e=>{let[t,n]=e,s=typeof t!="number"?parseFloat(t):t,o=typeof n!="number"?parseFloat(n):n,a=t===null||Number.isNaN(s)?-1/0:s,i=n===null||Number.isNaN(o)?1/0:o;if(a>i){const r=a;a=i,i=r}return[a,i]};Xg.autoRemove=e=>Xa(e)||Xa(e[0])&&Xa(e[1]);const Mo={includesString:OS,includesStringSensitive:NS,equalsString:wS,arrIncludes:RS,arrIncludesAll:xS,arrIncludesSome:$S,equals:MS,weakEquals:LS,inNumberRange:Xg};function Xa(e){return e==null||e===""}const oie={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:Ea("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=n==null?void 0:n.getValue(e.id);return typeof s=="string"?Mo.includesString:typeof s=="number"?Mo.inNumberRange:typeof s=="boolean"||s!==null&&typeof s=="object"?Mo.equals:Array.isArray(s)?Mo.arrIncludes:Mo.weakEquals},e.getFilterFn=()=>{var n,s;return up(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(s=t.options.filterFns)==null?void 0:s[e.columnDef.filterFn])!=null?n:Mo[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,s,o;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((s=t.options.enableColumnFilters)!=null?s:!0)&&((o=t.options.enableFilters)!=null?o:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(s=>s.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,s;return(n=(s=t.getState().columnFilters)==null?void 0:s.findIndex(o=>o.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(s=>{const o=e.getFilterFn(),a=s==null?void 0:s.find(u=>u.id===e.id),i=hi(n,a?a.value:void 0);if(G1(o,i,e)){var r;return(r=s==null?void 0:s.filter(u=>u.id!==e.id))!=null?r:[]}const l={id:e.id,value:i};if(a){var c;return(c=s==null?void 0:s.map(u=>u.id===e.id?l:u))!=null?c:[]}return s!=null&&s.length?[...s,l]:[l]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),s=o=>{var a;return(a=hi(t,o))==null?void 0:a.filter(i=>{const r=n.find(l=>l.id===i.id);if(r){const l=r.getFilterFn();if(G1(l,i.value,r))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(s)},e.resetColumnFilters=t=>{var n,s;e.setColumnFilters(t?[]:(n=(s=e.initialState)==null?void 0:s.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function G1(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const iie=(e,t,n)=>n.reduce((s,o)=>{const a=o.getValue(e);return s+(typeof a=="number"?a:0)},0),rie=(e,t,n)=>{let s;return n.forEach(o=>{const a=o.getValue(e);a!=null&&(s>a||s===void 0&&a>=a)&&(s=a)}),s},lie=(e,t,n)=>{let s;return n.forEach(o=>{const a=o.getValue(e);a!=null&&(s<a||s===void 0&&a>=a)&&(s=a)}),s},cie=(e,t,n)=>{let s,o;return n.forEach(a=>{const i=a.getValue(e);i!=null&&(s===void 0?i>=i&&(s=o=i):(s>i&&(s=i),o<i&&(o=i)))}),[s,o]},uie=(e,t)=>{let n=0,s=0;if(t.forEach(o=>{let a=o.getValue(e);a!=null&&(a=+a)>=a&&(++n,s+=a)}),n)return s/n},die=(e,t)=>{if(!t.length)return;const n=t.map(a=>a.getValue(e));if(!Qoe(n))return;if(n.length===1)return n[0];const s=Math.floor(n.length/2),o=n.sort((a,i)=>a-i);return n.length%2!==0?o[s]:(o[s-1]+o[s])/2},pie=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),hie=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,mie=(e,t)=>t.length,Zh={sum:iie,min:rie,max:lie,extent:cie,mean:uie,median:die,unique:pie,uniqueCount:hie,count:mie},fie={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:Ea("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(s=>s!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,s;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((s=t.options.enableGrouping)!=null?s:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=n==null?void 0:n.getValue(e.id);if(typeof s=="number")return Zh.sum;if(Object.prototype.toString.call(s)==="[object Date]")return Zh.extent},e.getAggregationFn=()=>{var n,s;if(!e)throw new Error;return up(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(s=t.options.aggregationFns)==null?void 0:s[e.columnDef.aggregationFn])!=null?n:Zh[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,s;e.setGrouping(t?[]:(n=(s=e.initialState)==null?void 0:s.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const s=t.getColumn(n);return s!=null&&s.columnDef.getGroupingValue?(e._groupingValuesCache[n]=s.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,s)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var o;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((o=n.subRows)!=null&&o.length)}}};function gie(e,t,n){if(!(t!=null&&t.length)||!n)return e;const s=e.filter(a=>!t.includes(a.id));return n==="remove"?s:[...t.map(a=>e.find(i=>i.id===a)).filter(Boolean),...s]}const _ie={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:Ea("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Ft(n=>[ec(t,n)],n=>n.findIndex(s=>s.id===e.id),Ut(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var s;return((s=ec(t,n)[0])==null?void 0:s.id)===e.id},e.getIsLastColumn=n=>{var s;const o=ec(t,n);return((s=o[o.length-1])==null?void 0:s.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=Ft(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,s)=>o=>{let a=[];if(!(t!=null&&t.length))a=o;else{const i=[...t],r=[...o];for(;r.length&&i.length;){const l=i.shift(),c=r.findIndex(u=>u.id===l);c>-1&&a.push(r.splice(c,1)[0])}a=[...a,...r]}return gie(a,n,s)},Ut(e.options,"debugTable"))}},Qh=()=>({left:[],right:[]}),vie={getInitialState:e=>({columnPinning:Qh(),...e}),getDefaultOptions:e=>({onColumnPinningChange:Ea("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const s=e.getLeafColumns().map(o=>o.id).filter(Boolean);t.setColumnPinning(o=>{var a,i;if(n==="right"){var r,l;return{left:((r=o==null?void 0:o.left)!=null?r:[]).filter(d=>!(s!=null&&s.includes(d))),right:[...((l=o==null?void 0:o.right)!=null?l:[]).filter(d=>!(s!=null&&s.includes(d))),...s]}}if(n==="left"){var c,u;return{left:[...((c=o==null?void 0:o.left)!=null?c:[]).filter(d=>!(s!=null&&s.includes(d))),...s],right:((u=o==null?void 0:o.right)!=null?u:[]).filter(d=>!(s!=null&&s.includes(d)))}}return{left:((a=o==null?void 0:o.left)!=null?a:[]).filter(d=>!(s!=null&&s.includes(d))),right:((i=o==null?void 0:o.right)!=null?i:[]).filter(d=>!(s!=null&&s.includes(d)))}})},e.getCanPin=()=>e.getLeafColumns().some(s=>{var o,a,i;return((o=s.columnDef.enablePinning)!=null?o:!0)&&((a=(i=t.options.enableColumnPinning)!=null?i:t.options.enablePinning)!=null?a:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(r=>r.id),{left:s,right:o}=t.getState().columnPinning,a=n.some(r=>s==null?void 0:s.includes(r)),i=n.some(r=>o==null?void 0:o.includes(r));return a?"left":i?"right":!1},e.getPinnedIndex=()=>{var n,s;const o=e.getIsPinned();return o?(n=(s=t.getState().columnPinning)==null||(s=s[o])==null?void 0:s.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Ft(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,s,o)=>{const a=[...s??[],...o??[]];return n.filter(i=>!a.includes(i.column.id))},Ut(t.options,"debugRows")),e.getLeftVisibleCells=Ft(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,s)=>(s??[]).map(a=>n.find(i=>i.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),Ut(t.options,"debugRows")),e.getRightVisibleCells=Ft(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,s)=>(s??[]).map(a=>n.find(i=>i.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),Ut(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,s;return e.setColumnPinning(t?Qh():(n=(s=e.initialState)==null?void 0:s.columnPinning)!=null?n:Qh())},e.getIsSomeColumnsPinned=t=>{var n;const s=e.getState().columnPinning;if(!t){var o,a;return!!((o=s.left)!=null&&o.length||(a=s.right)!=null&&a.length)}return!!((n=s[t])!=null&&n.length)},e.getLeftLeafColumns=Ft(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(s=>t.find(o=>o.id===s)).filter(Boolean),Ut(e.options,"debugColumns")),e.getRightLeafColumns=Ft(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(s=>t.find(o=>o.id===s)).filter(Boolean),Ut(e.options,"debugColumns")),e.getCenterLeafColumns=Ft(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s)=>{const o=[...n??[],...s??[]];return t.filter(a=>!o.includes(a.id))},Ut(e.options,"debugColumns"))}},fu={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Jh=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),bie={getDefaultColumnDef:()=>fu,getInitialState:e=>({columnSizing:{},columnSizingInfo:Jh(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ea("columnSizing",e),onColumnSizingInfoChange:Ea("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,s,o;const a=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:fu.minSize,(s=a??e.columnDef.size)!=null?s:fu.size),(o=e.columnDef.maxSize)!=null?o:fu.maxSize)},e.getStart=Ft(n=>[n,ec(t,n),t.getState().columnSizing],(n,s)=>s.slice(0,e.getIndex(n)).reduce((o,a)=>o+a.getSize(),0),Ut(t.options,"debugColumns")),e.getAfter=Ft(n=>[n,ec(t,n),t.getState().columnSizing],(n,s)=>s.slice(e.getIndex(n)+1).reduce((o,a)=>o+a.getSize(),0),Ut(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:s,...o}=n;return o})},e.getCanResize=()=>{var n,s;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((s=t.options.enableColumnResizing)!=null?s:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const s=o=>{if(o.subHeaders.length)o.subHeaders.forEach(s);else{var a;n+=(a=o.column.getSize())!=null?a:0}};return s(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const s=t.getColumn(e.column.id),o=s==null?void 0:s.getCanResize();return a=>{if(!s||!o||(a.persist==null||a.persist(),em(a)&&a.touches&&a.touches.length>1))return;const i=e.getSize(),r=e?e.getLeafHeaders().map(_=>[_.column.id,_.column.getSize()]):[[s.id,s.getSize()]],l=em(a)?Math.round(a.touches[0].clientX):a.clientX,c={},u=(_,E)=>{typeof E=="number"&&(t.setColumnSizingInfo(b=>{var I,R;const O=t.options.columnResizeDirection==="rtl"?-1:1,x=(E-((I=b==null?void 0:b.startOffset)!=null?I:0))*O,L=Math.max(x/((R=b==null?void 0:b.startSize)!=null?R:0),-.999999);return b.columnSizingStart.forEach(F=>{let[D,V]=F;c[D]=Math.round(Math.max(V+V*L,0)*100)/100}),{...b,deltaOffset:x,deltaPercentage:L}}),(t.options.columnResizeMode==="onChange"||_==="end")&&t.setColumnSizing(b=>({...b,...c})))},d=_=>u("move",_),m=_=>{u("end",_),t.setColumnSizingInfo(E=>({...E,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},f=n||typeof document<"u"?document:null,g={moveHandler:_=>d(_.clientX),upHandler:_=>{f==null||f.removeEventListener("mousemove",g.moveHandler),f==null||f.removeEventListener("mouseup",g.upHandler),m(_.clientX)}},T={moveHandler:_=>(_.cancelable&&(_.preventDefault(),_.stopPropagation()),d(_.touches[0].clientX),!1),upHandler:_=>{var E;f==null||f.removeEventListener("touchmove",T.moveHandler),f==null||f.removeEventListener("touchend",T.upHandler),_.cancelable&&(_.preventDefault(),_.stopPropagation()),m((E=_.touches[0])==null?void 0:E.clientX)}},S=Eie()?{passive:!1}:!1;em(a)?(f==null||f.addEventListener("touchmove",T.moveHandler,S),f==null||f.addEventListener("touchend",T.upHandler,S)):(f==null||f.addEventListener("mousemove",g.moveHandler,S),f==null||f.addEventListener("mouseup",g.upHandler,S)),t.setColumnSizingInfo(_=>({..._,startOffset:l,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:r,isResizingColumn:s.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?Jh():(n=e.initialState.columnSizingInfo)!=null?n:Jh())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((s,o)=>s+o.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((s,o)=>s+o.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((s,o)=>s+o.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((s,o)=>s+o.getSize(),0))!=null?t:0}}};let gu=null;function Eie(){if(typeof gu=="boolean")return gu;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return gu=e,gu}function em(e){return e.type==="touchstart"}const Tie={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:Ea("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(s=>({...s,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,s;const o=e.columns;return(n=o.length?o.some(a=>a.getIsVisible()):(s=t.getState().columnVisibility)==null?void 0:s[e.id])!=null?n:!0},e.getCanHide=()=>{var n,s;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((s=t.options.enableHiding)!=null?s:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Ft(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(s=>s.column.getIsVisible()),Ut(t.options,"debugRows")),e.getVisibleCells=Ft(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,s,o)=>[...n,...s,...o],Ut(t.options,"debugRows"))},createTable:e=>{const t=(n,s)=>Ft(()=>[s(),s().filter(o=>o.getIsVisible()).map(o=>o.id).join("_")],o=>o.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),Ut(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var s;e.setColumnVisibility(n?{}:(s=e.initialState.columnVisibility)!=null?s:{})},e.toggleAllColumnsVisible=n=>{var s;n=(s=n)!=null?s:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((o,a)=>({...o,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var s;e.toggleAllColumnsVisible((s=n.target)==null?void 0:s.checked)}}};function ec(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const yie={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Sie={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:Ea("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const s=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof s=="string"||typeof s=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,s,o,a;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((s=t.options.enableGlobalFilter)!=null?s:!0)&&((o=t.options.enableFilters)!=null?o:!0)&&((a=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?a:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Mo.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:s}=e.options;return up(s)?s:s==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[s])!=null?t:Mo[s]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},Aie={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:Ea("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var s,o;if(!t){e._queue(()=>{t=!0});return}if((s=(o=e.options.autoResetAll)!=null?o:e.options.autoResetExpanded)!=null?s:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=s=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(s),e.toggleAllRowsExpanded=s=>{s??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=s=>{var o,a;e.setExpanded(s?{}:(o=(a=e.initialState)==null?void 0:a.expanded)!=null?o:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(s=>s.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>s=>{s.persist==null||s.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const s=e.getState().expanded;return s===!0||Object.values(s).some(Boolean)},e.getIsAllRowsExpanded=()=>{const s=e.getState().expanded;return typeof s=="boolean"?s===!0:!(!Object.keys(s).length||e.getRowModel().flatRows.some(o=>!o.getIsExpanded()))},e.getExpandedDepth=()=>{let s=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(a=>{const i=a.split(".");s=Math.max(s,i.length)}),s},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(s=>{var o;const a=s===!0?!0:!!(s!=null&&s[e.id]);let i={};if(s===!0?Object.keys(t.getRowModel().rowsById).forEach(r=>{i[r]=!0}):i=s,n=(o=n)!=null?o:!a,!a&&n)return{...i,[e.id]:!0};if(a&&!n){const{[e.id]:r,...l}=i;return l}return s})},e.getIsExpanded=()=>{var n;const s=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:s===!0||s!=null&&s[e.id])},e.getCanExpand=()=>{var n,s,o;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((s=t.options.enableExpanding)!=null?s:!0)&&!!((o=e.subRows)!=null&&o.length)},e.getIsAllParentsExpanded=()=>{let n=!0,s=e;for(;n&&s.parentId;)s=t.getRow(s.parentId,!0),n=s.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},lf=0,cf=10,tm=()=>({pageIndex:lf,pageSize:cf}),Iie={getInitialState:e=>({...e,pagination:{...tm(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:Ea("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var s,o;if(!t){e._queue(()=>{t=!0});return}if((s=(o=e.options.autoResetAll)!=null?o:e.options.autoResetPageIndex)!=null?s:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=s=>{const o=a=>hi(s,a);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(o)},e.resetPagination=s=>{var o;e.setPagination(s?tm():(o=e.initialState.pagination)!=null?o:tm())},e.setPageIndex=s=>{e.setPagination(o=>{let a=hi(s,o.pageIndex);const i=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return a=Math.max(0,Math.min(a,i)),{...o,pageIndex:a}})},e.resetPageIndex=s=>{var o,a;e.setPageIndex(s?lf:(o=(a=e.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?o:lf)},e.resetPageSize=s=>{var o,a;e.setPageSize(s?cf:(o=(a=e.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?o:cf)},e.setPageSize=s=>{e.setPagination(o=>{const a=Math.max(1,hi(s,o.pageSize)),i=o.pageSize*o.pageIndex,r=Math.floor(i/a);return{...o,pageIndex:r,pageSize:a}})},e.setPageCount=s=>e.setPagination(o=>{var a;let i=hi(s,(a=e.options.pageCount)!=null?a:-1);return typeof i=="number"&&(i=Math.max(-1,i)),{...o,pageCount:i}}),e.getPageOptions=Ft(()=>[e.getPageCount()],s=>{let o=[];return s&&s>0&&(o=[...new Array(s)].fill(null).map((a,i)=>i)),o},Ut(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:s}=e.getState().pagination,o=e.getPageCount();return o===-1?!0:o===0?!1:s<o-1},e.previousPage=()=>e.setPageIndex(s=>s-1),e.nextPage=()=>e.setPageIndex(s=>s+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var s;return(s=e.options.pageCount)!=null?s:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var s;return(s=e.options.rowCount)!=null?s:e.getPrePaginationRowModel().rows.length}}},nm=()=>({top:[],bottom:[]}),Cie={getInitialState:e=>({rowPinning:nm(),...e}),getDefaultOptions:e=>({onRowPinningChange:Ea("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,s,o)=>{const a=s?e.getLeafRows().map(l=>{let{id:c}=l;return c}):[],i=o?e.getParentRows().map(l=>{let{id:c}=l;return c}):[],r=new Set([...i,e.id,...a]);t.setRowPinning(l=>{var c,u;if(n==="bottom"){var d,m;return{top:((d=l==null?void 0:l.top)!=null?d:[]).filter(T=>!(r!=null&&r.has(T))),bottom:[...((m=l==null?void 0:l.bottom)!=null?m:[]).filter(T=>!(r!=null&&r.has(T))),...Array.from(r)]}}if(n==="top"){var f,g;return{top:[...((f=l==null?void 0:l.top)!=null?f:[]).filter(T=>!(r!=null&&r.has(T))),...Array.from(r)],bottom:((g=l==null?void 0:l.bottom)!=null?g:[]).filter(T=>!(r!=null&&r.has(T)))}}return{top:((c=l==null?void 0:l.top)!=null?c:[]).filter(T=>!(r!=null&&r.has(T))),bottom:((u=l==null?void 0:l.bottom)!=null?u:[]).filter(T=>!(r!=null&&r.has(T)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:o}=t.options;return typeof s=="function"?s(e):(n=s??o)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:s,bottom:o}=t.getState().rowPinning,a=n.some(r=>s==null?void 0:s.includes(r)),i=n.some(r=>o==null?void 0:o.includes(r));return a?"top":i?"bottom":!1},e.getPinnedIndex=()=>{var n,s;const o=e.getIsPinned();if(!o)return-1;const a=(n=o==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(i=>{let{id:r}=i;return r});return(s=a==null?void 0:a.indexOf(e.id))!=null?s:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,s;return e.setRowPinning(t?nm():(n=(s=e.initialState)==null?void 0:s.rowPinning)!=null?n:nm())},e.getIsSomeRowsPinned=t=>{var n;const s=e.getState().rowPinning;if(!t){var o,a;return!!((o=s.top)!=null&&o.length||(a=s.bottom)!=null&&a.length)}return!!((n=s[t])!=null&&n.length)},e._getPinnedRows=(t,n,s)=>{var o;return((o=e.options.keepPinnedRows)==null||o?(n??[]).map(i=>{const r=e.getRow(i,!0);return r.getIsAllParentsExpanded()?r:null}):(n??[]).map(i=>t.find(r=>r.id===i))).filter(Boolean).map(i=>({...i,position:s}))},e.getTopRows=Ft(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),Ut(e.options,"debugRows")),e.getBottomRows=Ft(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),Ut(e.options,"debugRows")),e.getCenterRows=Ft(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,s)=>{const o=new Set([...n??[],...s??[]]);return t.filter(a=>!o.has(a.id))},Ut(e.options,"debugRows"))}},Oie={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:Ea("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const s={...n},o=e.getPreGroupedRowModel().flatRows;return t?o.forEach(a=>{a.getCanSelect()&&(s[a.id]=!0)}):o.forEach(a=>{delete s[a.id]}),s})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const s=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),o={...n};return e.getRowModel().rows.forEach(a=>{uf(o,a.id,s,!0,e)}),o}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Ft(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?sm(e,n):{rows:[],flatRows:[],rowsById:{}},Ut(e.options,"debugTable")),e.getFilteredSelectedRowModel=Ft(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?sm(e,n):{rows:[],flatRows:[],rowsById:{}},Ut(e.options,"debugTable")),e.getGroupedSelectedRowModel=Ft(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?sm(e,n):{rows:[],flatRows:[],rowsById:{}},Ut(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let s=!!(t.length&&Object.keys(n).length);return s&&t.some(o=>o.getCanSelect()&&!n[o.id])&&(s=!1),s},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(o=>o.getCanSelect()),{rowSelection:n}=e.getState();let s=!!t.length;return s&&t.some(o=>!n[o.id])&&(s=!1),s},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,s)=>{const o=e.getIsSelected();t.setRowSelection(a=>{var i;if(n=typeof n<"u"?n:!o,e.getCanSelect()&&o===n)return a;const r={...a};return uf(r,e.id,n,(i=s==null?void 0:s.selectChildren)!=null?i:!0,t),r})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return qg(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return df(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return df(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return s=>{var o;n&&e.toggleSelected((o=s.target)==null?void 0:o.checked)}}}},uf=(e,t,n,s,o)=>{var a;const i=o.getRow(t,!0);n?(i.getCanMultiSelect()||Object.keys(e).forEach(r=>delete e[r]),i.getCanSelect()&&(e[t]=!0)):delete e[t],s&&(a=i.subRows)!=null&&a.length&&i.getCanSelectSubRows()&&i.subRows.forEach(r=>uf(e,r.id,n,s,o))};function sm(e,t){const n=e.getState().rowSelection,s=[],o={},a=function(i,r){return i.map(l=>{var c;const u=qg(l,n);if(u&&(s.push(l),o[l.id]=l),(c=l.subRows)!=null&&c.length&&(l={...l,subRows:a(l.subRows)}),u)return l}).filter(Boolean)};return{rows:a(t.rows),flatRows:s,rowsById:o}}function qg(e,t){var n;return(n=t[e.id])!=null?n:!1}function df(e,t,n){var s;if(!((s=e.subRows)!=null&&s.length))return!1;let o=!0,a=!1;return e.subRows.forEach(i=>{if(!(a&&!o)&&(i.getCanSelect()&&(qg(i,t)?a=!0:o=!1),i.subRows&&i.subRows.length)){const r=df(i,t);r==="all"?a=!0:(r==="some"&&(a=!0),o=!1)}}),o?"all":a?"some":!1}const pf=/([0-9]+)/gm,Nie=(e,t,n)=>kS(Si(e.getValue(n)).toLowerCase(),Si(t.getValue(n)).toLowerCase()),wie=(e,t,n)=>kS(Si(e.getValue(n)),Si(t.getValue(n))),Rie=(e,t,n)=>Zg(Si(e.getValue(n)).toLowerCase(),Si(t.getValue(n)).toLowerCase()),xie=(e,t,n)=>Zg(Si(e.getValue(n)),Si(t.getValue(n))),$ie=(e,t,n)=>{const s=e.getValue(n),o=t.getValue(n);return s>o?1:s<o?-1:0},Mie=(e,t,n)=>Zg(e.getValue(n),t.getValue(n));function Zg(e,t){return e===t?0:e>t?1:-1}function Si(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function kS(e,t){const n=e.split(pf).filter(Boolean),s=t.split(pf).filter(Boolean);for(;n.length&&s.length;){const o=n.shift(),a=s.shift(),i=parseInt(o,10),r=parseInt(a,10),l=[i,r].sort();if(isNaN(l[0])){if(o>a)return 1;if(a>o)return-1;continue}if(isNaN(l[1]))return isNaN(i)?-1:1;if(i>r)return 1;if(r>i)return-1}return n.length-s.length}const Il={alphanumeric:Nie,alphanumericCaseSensitive:wie,text:Rie,textCaseSensitive:xie,datetime:$ie,basic:Mie},Lie={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:Ea("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const o of n){const a=o==null?void 0:o.getValue(e.id);if(Object.prototype.toString.call(a)==="[object Date]")return Il.datetime;if(typeof a=="string"&&(s=!0,a.split(pf).length>1))return Il.alphanumeric}return s?Il.text:Il.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,s;if(!e)throw new Error;return up(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(s=t.options.sortingFns)==null?void 0:s[e.columnDef.sortingFn])!=null?n:Il[e.columnDef.sortingFn]},e.toggleSorting=(n,s)=>{const o=e.getNextSortingOrder(),a=typeof n<"u"&&n!==null;t.setSorting(i=>{const r=i==null?void 0:i.find(f=>f.id===e.id),l=i==null?void 0:i.findIndex(f=>f.id===e.id);let c=[],u,d=a?n:o==="desc";if(i!=null&&i.length&&e.getCanMultiSort()&&s?r?u="toggle":u="add":i!=null&&i.length&&l!==i.length-1?u="replace":r?u="toggle":u="replace",u==="toggle"&&(a||o||(u="remove")),u==="add"){var m;c=[...i,{id:e.id,desc:d}],c.splice(0,c.length-((m=t.options.maxMultiSortColCount)!=null?m:Number.MAX_SAFE_INTEGER))}else u==="toggle"?c=i.map(f=>f.id===e.id?{...f,desc:d}:f):u==="remove"?c=i.filter(f=>f.id!==e.id):c=[{id:e.id,desc:d}];return c})},e.getFirstSortDir=()=>{var n,s;return((n=(s=e.columnDef.sortDescFirst)!=null?s:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var s,o;const a=e.getFirstSortDir(),i=e.getIsSorted();return i?i!==a&&((s=t.options.enableSortingRemoval)==null||s)&&(!(n&&(o=t.options.enableMultiRemove)!=null)||o)?!1:i==="desc"?"asc":"desc":a},e.getCanSort=()=>{var n,s;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((s=t.options.enableSorting)!=null?s:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,s;return(n=(s=e.columnDef.enableMultiSort)!=null?s:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const s=(n=t.getState().sorting)==null?void 0:n.find(o=>o.id===e.id);return s?s.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,s;return(n=(s=t.getState().sorting)==null?void 0:s.findIndex(o=>o.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(s=>s.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return s=>{n&&(s.persist==null||s.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(s):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,s;e.setSorting(t?[]:(n=(s=e.initialState)==null?void 0:s.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},kie=[nie,Tie,_ie,vie,aie,oie,yie,Sie,Lie,fie,Aie,Iie,Cie,Oie,bie];function Die(e){var t,n;const s=[...kie,...(t=e._features)!=null?t:[]];let o={_features:s};const a=o._features.reduce((m,f)=>Object.assign(m,f.getDefaultOptions==null?void 0:f.getDefaultOptions(o)),{}),i=m=>o.options.mergeOptions?o.options.mergeOptions(a,m):{...a,...m};let l={...{},...(n=e.initialState)!=null?n:{}};o._features.forEach(m=>{var f;l=(f=m.getInitialState==null?void 0:m.getInitialState(l))!=null?f:l});const c=[];let u=!1;const d={_features:s,options:{...a,...e},initialState:l,_queue:m=>{c.push(m),u||(u=!0,Promise.resolve().then(()=>{for(;c.length;)c.shift()();u=!1}).catch(f=>setTimeout(()=>{throw f})))},reset:()=>{o.setState(o.initialState)},setOptions:m=>{const f=hi(m,o.options);o.options=i(f)},getState:()=>o.options.state,setState:m=>{o.options.onStateChange==null||o.options.onStateChange(m)},_getRowId:(m,f,g)=>{var T;return(T=o.options.getRowId==null?void 0:o.options.getRowId(m,f,g))!=null?T:`${g?[g.id,f].join("."):f}`},getCoreRowModel:()=>(o._getCoreRowModel||(o._getCoreRowModel=o.options.getCoreRowModel(o)),o._getCoreRowModel()),getRowModel:()=>o.getPaginationRowModel(),getRow:(m,f)=>{let g=(f?o.getPrePaginationRowModel():o.getRowModel()).rowsById[m];if(!g&&(g=o.getCoreRowModel().rowsById[m],!g))throw new Error;return g},_getDefaultColumnDef:Ft(()=>[o.options.defaultColumn],m=>{var f;return m=(f=m)!=null?f:{},{header:g=>{const T=g.header.column.columnDef;return T.accessorKey?T.accessorKey:T.accessorFn?T.id:null},cell:g=>{var T,S;return(T=(S=g.renderValue())==null||S.toString==null?void 0:S.toString())!=null?T:null},...o._features.reduce((g,T)=>Object.assign(g,T.getDefaultColumnDef==null?void 0:T.getDefaultColumnDef()),{}),...m}},Ut(e,"debugColumns")),_getColumnDefs:()=>o.options.columns,getAllColumns:Ft(()=>[o._getColumnDefs()],m=>{const f=function(g,T,S){return S===void 0&&(S=0),g.map(_=>{const E=tie(o,_,S,T),b=_;return E.columns=b.columns?f(b.columns,E,S+1):[],E})};return f(m)},Ut(e,"debugColumns")),getAllFlatColumns:Ft(()=>[o.getAllColumns()],m=>m.flatMap(f=>f.getFlatColumns()),Ut(e,"debugColumns")),_getAllFlatColumnsById:Ft(()=>[o.getAllFlatColumns()],m=>m.reduce((f,g)=>(f[g.id]=g,f),{}),Ut(e,"debugColumns")),getAllLeafColumns:Ft(()=>[o.getAllColumns(),o._getOrderColumnsFn()],(m,f)=>{let g=m.flatMap(T=>T.getLeafColumns());return f(g)},Ut(e,"debugColumns")),getColumn:m=>o._getAllFlatColumnsById()[m]};Object.assign(o,d);for(let m=0;m<o._features.length;m++){const f=o._features[m];f==null||f.createTable==null||f.createTable(o)}return o}function dp(){return e=>Ft(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(o,a,i){a===void 0&&(a=0);const r=[];for(let c=0;c<o.length;c++){const u=sie(e,e._getRowId(o[c],c,i),o[c],c,a,void 0,i==null?void 0:i.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,r.push(u),e.options.getSubRows){var l;u.originalSubRows=e.options.getSubRows(o[c],c),(l=u.originalSubRows)!=null&&l.length&&(u.subRows=s(u.originalSubRows,a+1,u))}}return r};return n.rows=s(t),n},Ut(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Pie(e){const t=[],n=s=>{var o;t.push(s),(o=s.subRows)!=null&&o.length&&s.getIsExpanded()&&s.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function DS(e){return t=>Ft(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,s)=>{if(!s.rows.length)return s;const{pageSize:o,pageIndex:a}=n;let{rows:i,flatRows:r,rowsById:l}=s;const c=o*a,u=c+o;i=i.slice(c,u);let d;t.options.paginateExpandedRows?d={rows:i,flatRows:r,rowsById:l}:d=Pie({rows:i,flatRows:r,rowsById:l}),d.flatRows=[];const m=f=>{d.flatRows.push(f),f.subRows.length&&f.subRows.forEach(m)};return d.rows.forEach(m),d},Ut(t.options,"debugTable"))}/**
   * vue-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function _u(){return!0}const Bie=Symbol("merge-proxy"),Fie={get(e,t,n){return t===Bie?n:e.get(t)},has(e,t){return e.has(t)},set:_u,deleteProperty:_u,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:_u,deleteProperty:_u}},ownKeys(e){return e.keys()}};function am(e){return"value"in e?e.value:e}function Ul(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Proxy({get(s){for(let o=t.length-1;o>=0;o--){const a=am(t[o])[s];if(a!==void 0)return a}},has(s){for(let o=t.length-1;o>=0;o--)if(s in am(t[o]))return!0;return!1},keys(){const s=[];for(let o=0;o<t.length;o++)s.push(...Object.keys(am(t[o])));return[...Array.from(new Set(s))]}},Fie)}const V1=yo({props:["render","props"],setup:e=>()=>typeof e.render=="function"||typeof e.render=="object"?yn(e.render,e.props):e.render});function H1(e){return Ul(e,{data:N(e.data)})}function pp(e){const t=Ad(e.data),n=Ul({state:{},onStateChange:()=>{},renderFallbackValue:null,mergeOptions(a,i){return t?{...a,...i}:Ul(a,i)}},t?H1(e):e),s=Die(n);if(t){const a=Cd(e.data);ct(a,()=>{s.setState(i=>({...i,data:a.value}))},{immediate:!0})}const o=X(s.initialState);return da(()=>{s.setOptions(a=>{var i;const r=new Proxy({},{get:(l,c)=>o.value[c]});return Ul(a,t?H1(e):e,{state:Ul(r,(i=e.state)!=null?i:{}),onStateChange:l=>{l instanceof Function?o.value=l(o.value):o.value=l,e.onStateChange==null||e.onStateChange(l)}})})}),s}const Uie={__name:"SortButton",props:{header:{type:Object,required:!0}},setup(e){const t={default:"i-lucide-chevrons-up-down",asc:"i-lucide-chevron-up",desc:"i-lucide-chevron-down"};return(n,s)=>(p(),v("span",{class:se(t[e.header.column.getIsSorted()||"default"])},null,2))}},Gie={class:"sticky top-0 z-10 bg-n-slate-1"},Vie=["onClick"],Hie={key:0,class:"flex place-items-center gap-1"},Wie={class:"divide-y divide-n-slate-2"},hp={__name:"Table",props:{table:{type:Object,required:!0},fixed:{type:Boolean,default:!1},type:{type:String,default:"relaxed"}},setup(e){const t=e,n=C(()=>t.type==="relaxed"),s=C(()=>n.value?"ltr:first:rounded-bl-lg ltr:first:rounded-tl-lg ltr:last:rounded-br-lg ltr:last:rounded-tr-lg rtl:first:rounded-br-lg rtl:first:rounded-tr-lg rtl:last:rounded-bl-lg rtl:last:rounded-tl-lg":"");return(o,a)=>(p(),v("table",{class:se({"table-fixed":e.fixed})},[h("thead",Gie,[(p(!0),v(pe,null,Ne(e.table.getHeaderGroups(),i=>(p(),v("tr",{key:i.id,class:"rounded-xl"},[(p(!0),v(pe,null,Ne(i.headers,r=>(p(),v("th",{key:r.id,style:Ht({width:`${r.getSize()}px`}),class:se(["text-left py-3 px-5 font-medium text-sm text-n-slate-12",s.value]),onClick:l=>r.column.getCanSort()&&r.column.toggleSorting()},[r.isPlaceholder?w("",!0):(p(),v("div",Hie,[y(N(V1),{render:r.column.columnDef.header,props:r.getContext()},null,8,["render","props"]),r.column.getCanSort()?(p(),$(Uie,{key:0,header:r},null,8,["header"])):w("",!0)]))],14,Vie))),128))]))),128))]),h("tbody",Wie,[(p(!0),v(pe,null,Ne(e.table.getRowModel().rows,i=>(p(),v("tr",{key:i.id},[(p(!0),v(pe,null,Ne(i.getVisibleCells(),r=>(p(),v("td",{key:r.id,class:se(n.value?"py-4 px-5":"py-2 px-5")},[y(N(V1),{render:r.column.columnDef.cell,props:r.getContext()},null,8,["render","props"])],2))),128))]))),128))])],2))}},zie={__name:"SummaryReportLink",props:{row:{type:Object,required:!0}},setup(e){const t=e,n=C(()=>`${t.row.original.type}_reports_show`);return(s,o)=>{const a=M("router-link");return p(),$(a,{to:{name:n.value,params:{id:e.row.original.id}},class:"text-n-slate-12 hover:underline"},{default:K(()=>[Re(A(e.row.original.name),1)]),_:1},8,["to"])}}},jie={class:"flex-1 overflow-auto px-2 py-2 mt-5 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2"},mp={__name:"SummaryReports",props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},summaryKey:{type:String,default:""},fetchItemsKey:{type:String,required:!0}},setup(e,{expose:t}){const n=e,s=pt(),o=X(0),a=X(0),i=X(!1),r=Oe([n.getterKey])||[],l=Oe([n.summaryKey])||[],c=R=>l.value.find(O=>O.id===Number(R))||{},u=cp(),{t:d}=Me(),m=R=>yn("span",{class:R.getValue()?"":"text-n-slate-12"},R.getValue()),f=C(()=>[u.accessor("name",{header:d(`SUMMARY_REPORTS.${n.type.toUpperCase()}`),width:300,cell:R=>yn(zie,R)}),u.accessor("conversationsCount",{header:d("SUMMARY_REPORTS.CONVERSATIONS"),width:200,cell:m}),u.accessor("avgFirstResponseTime",{header:d("SUMMARY_REPORTS.AVG_FIRST_RESPONSE_TIME"),width:200,cell:m}),u.accessor("avgResolutionTime",{header:d("SUMMARY_REPORTS.AVG_RESOLUTION_TIME"),width:200,cell:m}),u.accessor("avgReplyTime",{header:d("SUMMARY_REPORTS.AVG_REPLY_TIME"),width:200,cell:m}),u.accessor("resolutionsCount",{header:d("SUMMARY_REPORTS.RESOLUTION_COUNT"),width:200,cell:m})]),g=R=>R?$f(R):"--",T=R=>R?R.toLocaleString():"--",S=C(()=>r.value.map(R=>{const O=c(R.id),{conversationsCount:x,avgFirstResponseTime:L,avgResolutionTime:F,avgReplyTime:D,resolvedConversationsCount:V}=O;return{id:R.id,name:R.name??R.title,type:n.type,conversationsCount:T(x),avgFirstResponseTime:g(L),avgReplyTime:g(D),avgResolutionTime:g(F),resolutionsCount:T(V)}})),_=()=>{s.dispatch(n.fetchItemsKey),s.dispatch(n.actionKey,{since:o.value,until:a.value,businessHours:i.value})};dt(()=>_());const E=R=>{o.value=R.from,a.value=R.to,i.value=R.businessHours,_()},b=pp({get data(){return S.value},get columns(){return f.value},enableSorting:!1,getCoreRowModel:dp()});return t({downloadReports:()=>{const R={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if(R[n.type]){const O=Cc({type:n.type,to:a.value,businessHours:i.value}),x={from:o.value,to:a.value,fileName:O,businessHours:i.value};s.dispatch(R[n.type],x)}}}),(R,O)=>(p(),v(pe,null,[y(lp,{onFilterChange:E}),h("div",jie,[y(hp,{table:N(b)},null,8,["table"])])],64))}},Kie={__name:"AgentReportsIndex",setup(e){const t=X(null),n=()=>{t.value.downloadReports()};return(s,o)=>(p(),v(pe,null,[y(Oo,{"header-title":s.$t("AGENT_REPORTS.HEADER"),"header-description":s.$t("AGENT_REPORTS.DESCRIPTION")},{default:K(()=>[y(oe,{label:s.$t("AGENT_REPORTS.DOWNLOAD_AGENT_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),y(mp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchAgentSummaryReports","getter-key":"agents/getAgents","fetch-items-key":"agents/get","summary-key":"summaryReports/getAgentSummaryReports",type:"agent"},null,512)],64))}},Yie={__name:"InboxReportsIndex",setup(e){const t=X(null),n=()=>{t.value.downloadReports()};return(s,o)=>(p(),v(pe,null,[y(Oo,{"header-title":s.$t("INBOX_REPORTS.HEADER"),"header-description":s.$t("INBOX_REPORTS.DESCRIPTION")},{default:K(()=>[y(oe,{label:s.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),y(mp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchInboxSummaryReports","getter-key":"inboxes/getInboxes","fetch-items-key":"inboxes/get","summary-key":"summaryReports/getInboxSummaryReports",type:"inbox"},null,512)],64))}},Xie={__name:"TeamReportsIndex",setup(e){const t=X(null),n=()=>{t.value.downloadReports()};return(s,o)=>(p(),v(pe,null,[y(Oo,{"header-title":s.$t("TEAM_REPORTS.HEADER"),"header-description":s.$t("TEAM_REPORTS.DESCRIPTION")},{default:K(()=>[y(oe,{label:s.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),y(mp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchTeamSummaryReports","getter-key":"teams/getTeams","fetch-items-key":"teams/get","summary-key":"summaryReports/getTeamSummaryReports",type:"team"},null,512)],64))}},qie={__name:"LabelReportsIndex",setup(e){const t=X(null),n=()=>{t.value.downloadReports()};return(s,o)=>(p(),v(pe,null,[y(Oo,{"header-title":s.$t("LABEL_REPORTS.HEADER"),"header-description":s.$t("LABEL_REPORTS.DESCRIPTION")},{default:K(()=>[y(oe,{label:s.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),y(mp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchLabelSummaryReports","getter-key":"labels/getLabels","fetch-items-key":"labels/get","summary-key":"summaryReports/getLabelSummaryReports",type:"label"},null,512)],64))}},Zie=5,Qie={components:{WootDateRangePicker:AS,Thumbnail:Hn},props:{currentFilter:{type:Object,default:()=>null},filterItemsList:{type:Array,default:()=>[]},groupByFilterItemsList:{type:Array,default:()=>[]},type:{type:String,default:"agent"},selectedGroupByFilter:{type:Object,default:()=>{}}},emits:["businessHoursToggle","dateRangeChange","filterChange","groupByFilterChange"],data(){return{currentSelectedFilter:this.currentFilter||null,currentDateRangeSelection:{id:0,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS")},customDateRange:[new Date,new Date],currentSelectedGroupByFilter:null,businessHoursSelected:!1}},computed:{dateRange(){return[{id:0,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS")},{id:1,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS")},{id:2,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS")},{id:3,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS")},{id:4,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_YEAR")},{id:5,name:this.$t("REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE")}]},isDateRangeSelected(){return this.currentDateRangeSelection.id===Zie},to(){return this.isDateRangeSelected?this.toCustomDate(this.customDateRange[1]):this.toCustomDate(new Date)},from(){if(this.isDateRangeSelected)return this.fromCustomDate(this.customDateRange[0]);const t={0:6,1:29,2:89,3:179,4:364}[this.currentDateRangeSelection.id],n=Fo(new Date,t);return this.fromCustomDate(n)},multiselectLabel(){return{agent:this.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL"),label:this.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),inbox:this.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),team:this.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")}[this.type]||this.$t("FORMS.MULTISELECT.SELECT_ONE")},groupBy(){return this.isDateRangeSelected?ys[4].period:{0:ys[1].period,1:ys[2].period,2:ys[3].period,3:ys[3].period,4:ys[4].period}[this.currentDateRangeSelection.id]},notLast7Days(){return this.groupBy!==ys[1].period}},watch:{filterItemsList(e){this.currentSelectedFilter=this.currentFilter?this.currentFilter:e[0],this.changeFilterSelection()},groupByFilterItemsList(){this.currentSelectedGroupByFilter=this.selectedGroupByFilter},businessHoursSelected(){this.$emit("businessHoursToggle",this.businessHoursSelected)}},mounted(){this.onDateRangeChange()},methods:{onDateRangeChange(){this.$emit("dateRangeChange",{from:this.from,to:this.to,groupBy:this.groupBy})},fromCustomDate(e){return co(Ys(e))},toCustomDate(e){return co(ro(e))},changeDateSelection(e){this.currentDateRangeSelection=e,this.onDateRangeChange()},changeFilterSelection(){this.$emit("filterChange",this.currentSelectedFilter)},onChange(e){this.customDateRange=e,this.onDateRangeChange()},changeGroupByFilterSelection(){this.$emit("groupByFilterChange",this.currentSelectedGroupByFilter)}}},Jie={class:"grid grid-cols-1 md:grid-cols-3 gap-y-0.5 gap-x-2"},ere={key:0,class:"multiselect-wrap--small"},tre={class:"mb-2 text-xs font-medium"},nre={class:"flex min-w-0 items-center gap-2"},sre={class:"my-0 text-slate-800 truncate dark:text-slate-75"},are={class:"flex items-center gap-2"},ore={class:"my-0 text-slate-800 dark:text-slate-75"},ire={key:1,class:"multiselect-wrap--small"},rre={class:"mb-2 text-xs font-medium"},lre={class:"flex items-center min-w-0 gap-2"},cre={class:"my-0 text-slate-800 truncate dark:text-slate-75"},ure={class:"flex items-center min-w-0 gap-2"},dre={class:"my-0 text-slate-800 truncate dark:text-slate-75"},pre={key:2,class:"multiselect-wrap--small"},hre={class:"mb-2 text-xs font-medium"},mre={class:"multiselect-wrap--small"},fre={class:"mb-2 text-xs font-medium"},gre={class:"flex items-center h-10 self-center order-5 md:order-2 md:justify-self-end"},_re={class:"mr-2 text-sm whitespace-nowrap"},vre={key:3,class:"order-3 md:order-4"},bre={class:"mb-2 text-xs font-medium"},Ere={key:4,class:"multiselect-wrap--small order-4 md:order-5"},Tre={class:"mb-2 text-xs font-medium"};function yre(e,t,n,s,o,a){const i=M("Thumbnail"),r=M("multiselect"),l=M("woot-switch"),c=M("WootDateRangePicker");return p(),v("div",Jie,[n.type==="agent"?(p(),v("div",ere,[h("p",tre,A(e.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL")),1),y(r,{modelValue:o.currentSelectedFilter,"onUpdate:modelValue":[t[0]||(t[0]=u=>o.currentSelectedFilter=u),a.changeFilterSelection],placeholder:a.multiselectLabel,label:"name","track-by":"id",options:n.filterItemsList,"option-height":24,"show-labels":!1},{singleLabel:K(u=>[h("div",nre,[y(i,{src:u.option.thumbnail,status:u.option.availability_status,username:u.option.name,size:"22px"},null,8,["src","status","username"]),h("span",sre,A(u.option.name),1)])]),options:K(u=>[h("div",are,[y(i,{src:u.option.thumbnail,status:u.option.availability_status,username:u.option.name,size:"22px"},null,8,["src","status","username"]),h("p",ore,A(u.option.name),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])):n.type==="label"?(p(),v("div",ire,[h("p",rre,A(e.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL")),1),y(r,{modelValue:o.currentSelectedFilter,"onUpdate:modelValue":[t[1]||(t[1]=u=>o.currentSelectedFilter=u),a.changeFilterSelection],placeholder:a.multiselectLabel,label:"title","track-by":"id",options:n.filterItemsList,"option-height":24,"show-labels":!1},{singleLabel:K(u=>[h("div",lre,[h("div",{style:Ht({backgroundColor:u.option.color}),class:"w-5 h-5 rounded-full"},null,4),h("span",cre,A(u.option.title),1)])]),option:K(u=>[h("div",ure,[h("div",{style:Ht({backgroundColor:u.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-slate-100 dark:border-slate-800"},null,4),h("span",dre,A(u.option.title),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])):(p(),v("div",pre,[h("p",hre,[n.type==="inbox"?(p(),v(pe,{key:0},[Re(A(e.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL")),1)],64)):n.type==="team"?(p(),v(pe,{key:1},[Re(A(e.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")),1)],64)):(p(),v(pe,{key:2},[Re(A(e.$t("FORMS.MULTISELECT.SELECT_ONE")),1)],64))]),y(r,{modelValue:o.currentSelectedFilter,"onUpdate:modelValue":[t[2]||(t[2]=u=>o.currentSelectedFilter=u),a.changeFilterSelection],"track-by":"id",label:"name",placeholder:a.multiselectLabel,"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:n.filterItemsList,searchable:!1,"allow-empty":!1},null,8,["modelValue","placeholder","select-label","options","onUpdate:modelValue"])])),h("div",mre,[h("p",fre,A(e.$t("REPORT.DURATION_FILTER_LABEL")),1),y(r,{modelValue:o.currentDateRangeSelection,"onUpdate:modelValue":t[3]||(t[3]=u=>o.currentDateRangeSelection=u),"track-by":"name",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:a.dateRange,searchable:!1,"allow-empty":!1,onSelect:a.changeDateSelection},null,8,["modelValue","placeholder","select-label","options","onSelect"])]),h("div",gre,[h("span",_re,A(e.$t("REPORT.BUSINESS_HOURS")),1),h("span",null,[y(l,{modelValue:o.businessHoursSelected,"onUpdate:modelValue":t[4]||(t[4]=u=>o.businessHoursSelected=u)},null,8,["modelValue"])])]),a.isDateRangeSelected?(p(),v("div",vre,[h("p",bre,A(e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER")),1),y(c,{"show-range":"",value:o.customDateRange,"confirm-text":e.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),class:"auto-width",onChange:a.onChange},null,8,["value","confirm-text","placeholder","onChange"])])):w("",!0),a.notLast7Days?(p(),v("div",Ere,[h("p",Tre,A(e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),y(r,{modelValue:o.currentSelectedGroupByFilter,"onUpdate:modelValue":[t[5]||(t[5]=u=>o.currentSelectedGroupByFilter=u),a.changeGroupByFilterSelection],"track-by":"id",label:"groupBy",placeholder:e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:n.groupByFilterItemsList,"allow-empty":!1,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])):w("",!0)])}const Sre=Ae(Qie,[["render",yre]]),Cl={DAY:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"}],WEEK:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"},{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"}],MONTH:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"},{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"},{id:3,groupByKey:"REPORT.GROUPING_OPTIONS.MONTH"}],YEAR:[{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"},{id:3,groupByKey:"REPORT.GROUPING_OPTIONS.MONTH"},{id:4,groupByKey:"REPORT.GROUPING_OPTIONS.YEAR"}]},Are={components:{ReportHeader:Oo,V4Button:oe,ReportFilters:Sre,ReportContainer:Yg},props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},downloadButtonLabel:{type:String,default:"Download Reports"},reportTitle:{type:String,default:"Download Reports"},hasBackButton:{type:Boolean,default:!1},selectedItem:{type:Object,default:null}},data(){return{from:0,to:0,selectedFilter:this.selectedItem,groupBy:ys[1],groupByfilterItemsList:Cl.DAY.map(this.translateOptions),selectedGroupByFilter:null,businessHours:!1}},computed:{filterItemsList(){return this.$store.getters[this.getterKey]||[]},isAgentType(){return this.type==="agent"},reportKeys(){return{CONVERSATIONS:"conversations_count",...!this.isAgentType&&{INCOMING_MESSAGES:"incoming_messages_count"},OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"}}},mounted(){this.$store.dispatch(this.actionKey)},methods:{fetchAllData(){if(this.selectedFilter){const{from:e,to:t,groupBy:n,businessHours:s}=this;this.$store.dispatch("fetchAccountSummary",{from:e,to:t,type:this.type,id:this.selectedFilter.id,groupBy:n.period,businessHours:s}),this.fetchChartData()}},fetchChartData(){Object.keys(this.reportKeys).forEach(async e=>{try{const{from:t,to:n,groupBy:s,businessHours:o}=this;this.$store.dispatch("fetchAccountReport",{metric:this.reportKeys[e],from:t,to:n,type:this.type,id:this.selectedFilter.id,groupBy:s.period,businessHours:o})}catch{ce(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},downloadReports(){const{from:e,to:t,type:n,businessHours:s}=this,o={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if(o[n]){const a=Cc({type:n,to:t,businessHours:s}),i={from:e,to:t,fileName:a,businessHours:s};this.$store.dispatch(o[n],i)}},onDateRangeChange({from:e,to:t,groupBy:n}){this.from!==0&&this.to!==0&&Pt(Fr.FILTER_REPORT,{filterType:"date",reportType:this.type}),this.from=e,this.to=t,this.groupByfilterItemsList=this.fetchFilterItems(n);const s=this.groupByfilterItemsList.filter(o=>o.id===this.groupBy.id);s.length>0?this.selectedGroupByFilter=s[0]:(this.selectedGroupByFilter=this.groupByfilterItemsList[0],this.groupBy=ys[this.selectedGroupByFilter.id]),this.fetchAllData()},onFilterChange(e){e&&(this.selectedFilter=e,this.fetchAllData())},onGroupByFilterChange(e){var t;this.groupBy=ys[e.id],this.fetchAllData(),Pt(Fr.FILTER_REPORT,{filterType:"groupBy",filterValue:(t=this.groupBy)==null?void 0:t.period,reportType:this.type})},fetchFilterItems(e){switch(e){case ys[2].period:return Cl.WEEK.map(this.translateOptions);case ys[3].period:return Cl.MONTH.map(this.translateOptions);case ys[4].period:return Cl.YEAR.map(this.translateOptions);default:return Cl.DAY.map(this.translateOptions)}},translateOptions(e){return{id:e.id,groupBy:this.$t(e.groupByKey)}},onBusinessHoursToggle(e){this.businessHours=e,this.fetchAllData(),Pt(Fr.FILTER_REPORT,{filterType:"businessHours",filterValue:e,reportType:this.type})}}};function Ire(e,t,n,s,o,a){const i=M("V4Button"),r=M("ReportHeader"),l=M("ReportFilters"),c=M("ReportContainer");return p(),v(pe,null,[y(r,{"header-title":n.reportTitle,"has-back-button":n.hasBackButton},{default:K(()=>[y(i,{label:n.downloadButtonLabel,icon:"i-ph-download-simple",size:"sm",onClick:a.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title","has-back-button"]),a.filterItemsList?(p(),$(l,{key:0,type:n.type,"filter-items-list":a.filterItemsList,"group-by-filter-items-list":o.groupByfilterItemsList,"selected-group-by-filter":o.selectedGroupByFilter,"current-filter":o.selectedFilter,onDateRangeChange:a.onDateRangeChange,onFilterChange:a.onFilterChange,onGroupByFilterChange:a.onGroupByFilterChange,onBusinessHoursToggle:a.onBusinessHoursToggle},null,8,["type","filter-items-list","group-by-filter-items-list","selected-group-by-filter","current-filter","onDateRangeChange","onFilterChange","onGroupByFilterChange","onBusinessHoursToggle"])):w("",!0),a.filterItemsList.length?(p(),$(c,{key:1,"group-by":o.groupBy,"report-keys":a.reportKeys},null,8,["group-by","report-keys"])):w("",!0)],64)}const wi=Ae(Are,[["render",Ire]]),Cre={key:1,class:"w-full py-20"},Ore={__name:"AgentReportsShow",setup(e){const t=sn(),n=pt(),s=Xs("agents/getAgentById",t.params.id);return dt(()=>n.dispatch("agents/get")),(o,a)=>N(s).id?(p(),$(wi,{key:N(s).id,type:"agent","getter-key":"agents/getAgents","action-key":"agents/get","selected-item":N(s),"download-button-label":o.$t("AGENT_REPORTS.DOWNLOAD_AGENT_REPORTS"),"report-title":o.$t("AGENT_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),v("div",Cre,[y(gs,{class:"mx-auto"})]))}},Nre={key:1,class:"w-full py-20"},wre={__name:"InboxReportsShow",setup(e){const t=sn(),n=Xs("inboxes/getInboxById",t.params.id);return(s,o)=>N(n).id?(p(),$(wi,{key:N(n).id,type:"inbox","getter-key":"inboxes/getInboxes","action-key":"inboxes/get","selected-item":N(n),"download-button-label":s.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),"report-title":s.$t("INBOX_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),v("div",Nre,[y(gs,{class:"mx-auto"})]))}},Rre={key:1,class:"w-full py-20"},xre={__name:"TeamReportsShow",setup(e){const t=sn(),n=Xs("teams/getTeamById",t.params.id);return(s,o)=>N(n).id?(p(),$(wi,{key:N(n).id,type:"team","getter-key":"teams/getTeams","action-key":"teams/get","selected-item":N(n),"download-button-label":s.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),"report-title":s.$t("TEAM_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),v("div",Rre,[y(gs,{class:"mx-auto"})]))}},$re={key:1,class:"w-full py-20"},Mre={__name:"LabelReportsShow",setup(e){const t=sn(),n=pt(),s=Xs("labels/getLabelById",t.params.id);return dt(()=>n.dispatch("labels/get")),(o,a)=>N(s).id?(p(),$(wi,{key:N(s).id,type:"label","getter-key":"labels/getLabels","action-key":"labels/get","selected-item":N(s),"download-button-label":o.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),"report-title":o.$t("LABEL_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),v("div",$re,[y(gs,{class:"mx-auto"})]))}},Lre={__name:"AgentReports",setup(e){return(t,n)=>(p(),$(wi,{key:"agent-reports",type:"agent","getter-key":"agents/getAgents","action-key":"agents/get","download-button-label":t.$t("REPORT.DOWNLOAD_AGENT_REPORTS"),"report-title":t.$t("AGENT_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},kre={__name:"InboxReports",setup(e){return(t,n)=>(p(),$(wi,{key:"inbox-reports",type:"inbox","getter-key":"inboxes/getInboxes","action-key":"inboxes/get","download-button-label":t.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),"report-title":t.$t("INBOX_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},Dre={__name:"LabelReports",setup(e){return(t,n)=>(p(),$(wi,{key:"label-reports",type:"label","getter-key":"labels/getLabels","action-key":"labels/get","download-button-label":t.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),"report-title":t.$t("LABEL_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},Pre={__name:"TeamReports",setup(e){return(t,n)=>(p(),$(wi,{key:"team-reports",type:"team","getter-key":"teams/getTeams","action-key":"teams/get","download-button-label":t.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),"report-title":t.$t("TEAM_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},Bre={class:"flex items-center m-0 text-sm font-medium text-n-slate-11"},Fre={"data-test-id":"reportMetricLabel"},Ure={"data-test-id":"reportMetricValue",class:"mt-1 mb-0 text-2xl text-n-slate-12"},Gl={__name:"ReportMetricCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},infoText:{type:String,required:!0},disabled:{type:Boolean,default:!1}},setup(e){return(t,n)=>{const s=M("fluent-icon"),o=qe("tooltip");return p(),v("div",{"data-test-id":"reportMetricContainer",class:se({"grayscale pointer-events-none opacity-30":e.disabled})},[h("h3",Bre,[h("span",Fre,A(e.label),1),re(y(s,{"data-test-id":"reportMetricInfo",size:"14",icon:"info",class:"text-n-slate-11 my-0 mx-1 mt-0.5"},null,512),[[o,e.infoText]])]),h("h4",Ure,A(e.value),1)],2)}}},Gre={components:{BarChart:O0,CsatMetricCard:Gl},props:{filters:{type:Object,required:!0}},data(){return{csatRatings:fi}},computed:{...lt({metrics:"csat/getMetrics",ratingPercentage:"csat/getRatingPercentage",satisfactionScore:"csat/getSatisfactionScore",responseRate:"csat/getResponseRate"}),ratingFilterEnabled(){return!!this.filters.rating},chartData(){const e=[...fi].sort((t,n)=>n.value-t.value);return{labels:["Rating"],datasets:e.map(t=>({label:t.emoji,data:[this.ratingPercentage[t.value]],backgroundColor:t.color}))}},responseCount(){return this.metrics.totalResponseCount?this.metrics.totalResponseCount.toLocaleString():"--"},chartOptions(){return{indexAxis:"y",responsive:!0,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,stacked:!0},y:{display:!1,stacked:!0}}}}},methods:{formatToPercent(e){return e?`${e}%`:"--"},ratingToEmoji(e){return fi.find(t=>t.value===Number(e)).emoji}}},Vre={class:"flex-col lg:flex-row flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-8 gap-4"},Hre={key:0,ref:"csatBarChart",class:"w-full md:w-1/2 md:max-w-[50%] flex-1 rtl:[direction:initial]"},Wre={class:"flex items-center m-0 text-xs font-medium md:text-sm text-n-slate-12"},zre={class:"flex flex-row-reverse justify-end"},jre={class:"my-0 mx-0.5"},Kre={class:"mt-2 h-6"};function Yre(e,t,n,s,o,a){const i=M("CsatMetricCard"),r=M("BarChart");return p(),v("div",Vre,[y(i,{label:e.$t("CSAT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP"),value:a.responseCount,class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["label","info-text","value"]),y(i,{disabled:a.ratingFilterEnabled,label:e.$t("CSAT_REPORTS.METRIC.SATISFACTION_SCORE.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.SATISFACTION_SCORE.TOOLTIP"),value:a.ratingFilterEnabled?"--":a.formatToPercent(e.satisfactionScore),class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["disabled","label","info-text","value"]),y(i,{label:e.$t("CSAT_REPORTS.METRIC.RESPONSE_RATE.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.RESPONSE_RATE.TOOLTIP"),value:a.formatToPercent(e.responseRate),class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["label","info-text","value"]),e.metrics.totalResponseCount&&!a.ratingFilterEnabled?(p(),v("div",Hre,[h("h3",Wre,[h("div",zre,[(p(!0),v(pe,null,Ne(e.ratingPercentage,(l,c,u)=>(p(),v("div",{key:l+c+u,class:"ltr:pr-4 rtl:pl-4"},[h("span",jre,A(a.ratingToEmoji(c)),1),h("span",null,A(a.formatToPercent(l)),1)]))),128))])]),h("div",Kre,[y(r,{collection:a.chartData,"chart-options":a.chartOptions},null,8,["collection","chart-options"])])],512)):w("",!0)])}const Xre=Ae(Gre,[["render",Yre]]),qre={class:"flex items-center justify-between"},Zre={class:"flex flex-1 items-center gap-2 justify-between"},Qre={class:"text-sm truncate text-n-slate-11 mb-0"},Jre={class:"flex items-center gap-2"},ele={class:"isolate inline-flex items-center gap-1.5"},Qg={__name:"Pagination",props:{table:{type:Object,required:!0},defaultPageSize:{type:Number,default:10},showPageSizeSelector:{type:Boolean,default:!1}},emits:["pageSizeChange"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=[{label:`${o("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:10})}`,value:10},{label:`${o("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:20})}`,value:20},{label:`${o("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:50})}`,value:50},{label:`${o("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:100})}`,value:100}],i=(g,T)=>{const S=new Intl.NumberFormat(navigator.language);return Array.from({length:T-g+1},(_,E)=>S.format(g+E))},r=C(()=>n.table.getState().pagination.pageIndex+1),l=C(()=>n.table.getPageCount()),c=C(()=>l.value<=3?i(1,l.value):r.value===1?i(1,3):r.value===l.value?i(l.value-2,l.value):i(r.value-1,r.value+1)),u=C(()=>n.table.getRowCount()),d=C(()=>{const{pagination:g}=n.table.getState();return g.pageIndex*g.pageSize+1}),m=C(()=>{const{pagination:g}=n.table.getState();return Math.min((g.pageIndex+1)*g.pageSize,u.value)}),f=C({get(){return n.table.getState().pagination.pageSize},set(g){n.table.setPageSize(Number(g)),s("pageSizeChange",Number(g))}});return dt(()=>{n.showPageSizeSelector&&n.defaultPageSize&&n.defaultPageSize!==10&&n.table.setPageSize(n.defaultPageSize)}),(g,T)=>(p(),v("div",qre,[h("div",Zre,[h("p",Qre,A(g.$t("REPORT.PAGINATION.RESULTS",{start:d.value,end:m.value,total:u.value})),1),h("div",Jre,[e.showPageSizeSelector?(p(),$(Hr,{key:0,modelValue:f.value,"onUpdate:modelValue":T[0]||(T[0]=S=>f.value=S),variant:"outline","hide-icon":"",class:"[&>button]:text-n-slate-11 [&>button]:hover:text-n-slate-12 [&>button]:h-6",options:a},null,8,["modelValue"])):w("",!0),h("nav",ele,[y(oe,{icon:"i-lucide-chevrons-left",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanPreviousPage(),onClick:T[1]||(T[1]=S=>e.table.setPageIndex(0))},null,8,["disabled"]),y(oe,{icon:"i-lucide-chevron-left",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanPreviousPage(),onClick:T[2]||(T[2]=S=>e.table.previousPage())},null,8,["disabled"]),(p(!0),v(pe,null,Ne(c.value,S=>(p(),$(oe,{key:S,xs:"",outline:"",color:S==r.value?"blue":"slate",class:"!h-6 min-w-6",onClick:_=>e.table.setPageIndex(S-1)},{default:K(()=>[h("span",{class:se(["text-center",{"text-n-brand":S==r.value}])},A(S),3)]),_:2},1032,["color","onClick"]))),128)),y(oe,{icon:"i-lucide-chevron-right",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanNextPage(),onClick:T[3]||(T[3]=S=>e.table.nextPage())},null,8,["disabled"]),y(oe,{icon:"i-lucide-chevrons-right",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanNextPage(),onClick:T[4]||(T[4]=S=>e.table.setPageIndex(e.table.getPageCount()-1))},null,8,["disabled"])])])])]))}},tle={class:"flex items-center gap-1.5 text-left"},hf={__name:"UserAvatarWithName",props:{user:{type:Object,default:()=>({})},size:{type:String,default:"20px"},textClass:{type:String,default:"text-sm text-n-slate-12"}},setup(e){return(t,n)=>(p(),v("div",tle,[y(Hn,{src:e.user.thumbnail,size:e.size,username:e.user.name,status:e.user.availability_status},null,8,["src","size","username","status"]),h("span",{class:se(["my-0 truncate text-capitalize",e.textClass])},A(e.user.name),3)]))}},nle={class:"text-right"},sle={class:"text-slate-600 dark:text-slate-200 text-sm"},ale={__name:"ConversationCell",props:{row:{type:Object,required:!0}},setup(e){const t=C(()=>({name:"inbox_conversation",params:{conversation_id:e.row.original.conversationId}}));return(n,s)=>{const o=M("router-link"),a=qe("tooltip");return p(),v("div",nle,[y(o,{to:t.value,class:"hover:underline"},{default:K(()=>[Re(A(`#${e.row.original.conversationId}`),1)]),_:1},8,["to"]),re((p(),v("div",sle,[Re(A(e.row.original.createdAgo),1)])),[[a,e.row.original.createdAt]])])}}},ole={class:"shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},ile={key:0,class:"table-pagination"},rle={__name:"CsatTable",props:{pageIndex:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=t,{t:s}=Me(),o=Oe("csat/getCSATResponses"),a=Oe("csat/getMetrics"),i=C(()=>o.value.map(m=>({contact:m.contact,assignedAgent:m.assigned_agent,rating:m.rating,feedbackText:m.feedback_message||"---",conversationId:m.conversation_id,createdAgo:rs(m.created_at),createdAt:Xu(m.created_at,"LLL d yyyy, h:mm a")}))),r=m=>{const f=m.getValue()||"---";return yn("span",{class:"line-clamp-5 break-words max-w-full text-n-slate-12",title:f},f)},l=cp(),c=C(()=>[l.accessor("contact",{header:s("CSAT_REPORTS.TABLE.HEADER.CONTACT_NAME"),width:200,cell:m=>{const{contact:f}=m.row.original;return f?yn(hf,{user:f,class:"max-w-[200px] overflow-hidden"}):"--"}}),l.accessor("assignedAgent",{header:s("CSAT_REPORTS.TABLE.HEADER.AGENT_NAME"),width:200,cell:m=>{const{assignedAgent:f}=m.row.original;return f?yn(hf,{user:f,class:"max-w-[200px] overflow-hidden"}):"--"}}),l.accessor("rating",{header:s("CSAT_REPORTS.TABLE.HEADER.RATING"),align:"center",width:80,cell:m=>{const{rating:f}=m.row.original,[g={}]=fi.filter(T=>T.value===f);return yn("span",{class:g.emoji?"emoji-response text-lg":"text-slate-300 dark:text-slate-700"},g.emoji||"---")}}),l.accessor("feedbackText",{header:s("CSAT_REPORTS.TABLE.HEADER.FEEDBACK_TEXT"),width:400,cell:r}),l.accessor("conversationId",{header:"",width:100,cell:m=>yn(ale,m)})]),u=C(()=>({pageIndex:e.pageIndex,pageSize:25})),d=pp({get data(){return i.value},get columns(){return c.value},manualPagination:!0,enableSorting:!1,getCoreRowModel:dp(),get rowCount(){return a.value.totalResponseCount},state:{get pagination(){return u.value}},onPaginationChange:m=>{const f=m(u.value);n("pageChange",f.pageIndex)}});return(m,f)=>(p(),v("div",ole,[y(hp,{table:N(d),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),re(h("div",{class:"h-48 flex items-center justify-center text-n-slate-12 text-sm"},A(m.$t("CSAT_REPORTS.NO_RECORDS")),513),[[Jt,!i.value.length]]),N(a).totalResponseCount?(p(),v("div",ile,[y(Qg,{class:"mt-2",table:N(d)},null,8,["table"])])):w("",!0)]))}},lle={name:"CsatResponses",components:{CsatMetrics:Xre,CsatTable:rle,ReportFilterSelector:lp,ReportHeader:Oo,V4Button:oe},data(){return{pageIndex:0,from:0,to:0,userIds:[],inbox:null,team:null,rating:null}},computed:{...lt({accountId:"getCurrentAccountId",isFeatureEnabledOnAccount:"accounts/isFeatureEnabledonAccount"}),requestPayload(){return{from:this.from,to:this.to,user_ids:this.userIds,inbox_id:this.inbox,team_id:this.team,rating:this.rating}},isTeamsEnabled(){return this.isFeatureEnabledOnAccount(this.accountId,_t.TEAM_MANAGEMENT)}},methods:{getAllData(){try{this.$store.dispatch("csat/getMetrics",this.requestPayload),this.getResponses()}catch{ce(this.$t("REPORT.DATA_FETCHING_FAILED"))}},getResponses(){this.$store.dispatch("csat/get",{page:this.pageIndex+1,...this.requestPayload})},downloadReports(){const e="csat";try{this.$store.dispatch("csat/downloadCSATReports",{fileName:Cc({type:e,to:this.to}),...this.requestPayload})}catch{ce(this.$t("REPORT.CSAT_REPORTS.DOWNLOAD_FAILED"))}},onPageNumberChange(e){this.pageIndex=e,this.getResponses()},onFilterChange({from:e,to:t,selectedAgents:n,selectedInbox:s,selectedTeam:o,selectedRating:a}){this.from!==0&&this.to!==0&&Pt(Fr.FILTER_REPORT,{filterType:"date",reportType:"csat"}),this.from=e,this.to=t,this.userIds=n.map(i=>i.id),this.inbox=s==null?void 0:s.id,this.team=o==null?void 0:o.id,this.rating=a==null?void 0:a.value,this.getAllData()}}},cle={class:"flex flex-col gap-4"};function ule(e,t,n,s,o,a){const i=M("V4Button"),r=M("ReportHeader"),l=M("ReportFilterSelector"),c=M("CsatMetrics"),u=M("CsatTable");return p(),v(pe,null,[y(r,{"header-title":e.$t("CSAT_REPORTS.HEADER")},{default:K(()=>[y(i,{label:e.$t("CSAT_REPORTS.DOWNLOAD"),icon:"i-ph-download-simple",size:"sm",onClick:a.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),h("div",cle,[y(l,{"show-agents-filter":"","show-inbox-filter":"","show-rating-filter":"","show-team-filter":a.isTeamsEnabled,"show-business-hours-switch":!1,onFilterChange:a.onFilterChange},null,8,["show-team-filter","onFilterChange"]),y(c,{filters:a.requestPayload},null,8,["filters"]),y(u,{"page-index":o.pageIndex,onPageChange:a.onPageNumberChange},null,8,["page-index","onPageChange"])])],64)}const dle=Ae(lle,[["render",ule]]),ple={class:"flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},hle={__name:"BotMetrics",props:{filters:{type:Object,required:!0}},setup(e){const t=e,n=X("0"),s=X("0"),o=X("0"),a=X("0"),i=l=>l?`${l}%`:"--",r=()=>{!t.filters.to||!t.filters.from||kO.getBotMetrics(t.filters).then(l=>{n.value=l.data.conversation_count.toLocaleString(),s.value=l.data.message_count.toLocaleString(),o.value=l.data.resolution_rate.toString(),a.value=l.data.handoff_rate.toString()})};return ct(()=>t.filters,r,{deep:!0}),dt(r),(l,c)=>(p(),v("div",ple,[y(Gl,{label:l.$t("BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL"),"info-text":l.$t("BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP"),value:n.value,class:"flex-1"},null,8,["label","info-text","value"]),y(Gl,{label:l.$t("BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL"),"info-text":l.$t("BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP"),value:s.value,class:"flex-1"},null,8,["label","info-text","value"]),y(Gl,{label:l.$t("BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL"),"info-text":l.$t("BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP"),value:i(o.value),class:"flex-1"},null,8,["label","info-text","value"]),y(Gl,{label:l.$t("BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL"),"info-text":l.$t("BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP"),value:i(a.value),class:"flex-1"},null,8,["label","info-text","value"])]))}},mle={name:"BotReports",components:{BotMetrics:hle,ReportHeader:Oo,ReportFilterSelector:lp,ReportContainer:Yg},data(){return{from:0,to:0,groupBy:ys[1],reportKeys:{BOT_RESOLUTION_COUNT:"bot_resolutions_count",BOT_HANDOFF_COUNT:"bot_handoffs_count"},businessHours:!1}},computed:{requestPayload(){return{from:this.from,to:this.to}}},methods:{fetchAllData(){this.fetchBotSummary(),this.fetchChartData()},fetchBotSummary(){try{this.$store.dispatch("fetchBotSummary",this.getRequestPayload())}catch{ce(this.$t("REPORT.SUMMARY_FETCHING_FAILED"))}},fetchChartData(){Object.keys(this.reportKeys).forEach(async e=>{try{await this.$store.dispatch("fetchAccountReport",{metric:this.reportKeys[e],...this.getRequestPayload()})}catch{ce(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},getRequestPayload(){const{from:e,to:t,groupBy:n,businessHours:s}=this;return{from:e,to:t,groupBy:n==null?void 0:n.period,businessHours:s}},onFilterChange({from:e,to:t,groupBy:n,businessHours:s}){this.from=e,this.to=t,this.groupBy=n,this.businessHours=s,this.fetchAllData(),Pt(Fr.FILTER_REPORT,{filterValue:{from:e,to:t,groupBy:n,businessHours:s},reportType:"bots"})}}},fle={class:"flex flex-col gap-4"};function gle(e,t,n,s,o,a){const i=M("ReportHeader"),r=M("ReportFilterSelector"),l=M("BotMetrics"),c=M("ReportContainer");return p(),v(pe,null,[y(i,{"header-title":e.$t("BOT_REPORTS.HEADER")},null,8,["header-title"]),h("div",fle,[y(r,{"show-agents-filter":!1,"show-group-by-filter":"","show-business-hours-switch":!1,onFilterChange:a.onFilterChange},null,8,["onFilterChange"]),y(l,{filters:a.requestPayload},null,8,["filters"]),y(c,{"account-summary-key":"getBotSummary","summary-fetching-key":"getBotSummaryFetchingStatus","group-by":o.groupBy,"report-keys":o.reportKeys},null,8,["group-by","report-keys"])])],64)}const _le=Ae(mle,[["render",gle]]),vle={class:"flex flex-col m-0.5 px-6 py-5 rounded-xl flex-grow text-n-slate-12 shadow outline-1 outline outline-n-container bg-n-solid-2 min-h-[10rem]"},ble={class:"card-header grid w-full mb-6 grid-cols-[repeat(auto-fit,minmax(max-content,50%))] gap-y-2"},Ele={class:"flex items-center gap-2 flex-row"},Tle={class:"mb-0 text-n-slate-12 font-medium text-lg"},yle={class:"flex flex-row items-center py-0.5 px-2 rounded bg-n-teal-3 text-xs"},Sle={class:"text-xs text-n-teal-11"},Ale={class:"flex flex-row items-center justify-end gap-2"},Ile={key:0,class:"card-body max-w-full w-full ml-auto mr-auto justify-between flex"},Cle={key:1,class:"items-center flex text-base justify-center px-12 py-6"},Ole={class:"text-n-slate-11"},bc={__name:"MetricCard",props:{header:{type:String,default:""},isLoading:{type:Boolean,default:!1},loadingMessage:{type:String,default:""}},setup(e){return(t,n)=>(p(),v("div",vle,[h("div",ble,[We(t.$slots,"header",{},()=>[h("div",Ele,[h("h5",Tle,A(e.header),1),h("span",yle,[n[0]||(n[0]=h("span",{class:"bg-n-teal-9 h-1 w-1 rounded-full mr-1 rtl:mr-0 rtl:ml-0"},null,-1)),h("span",Sle,A(t.$t("OVERVIEW_REPORTS.LIVE")),1)])]),h("div",Ale,[We(t.$slots,"control")])])]),e.isLoading?e.isLoading?(p(),v("div",Cle,[y(bs),h("span",Ole,A(e.loadingMessage),1)])):w("",!0):(p(),v("div",Ile,[We(t.$slots,"default")]))]))}},Nle={class:"grid relative w-full gap-x-4 gap-y-2.5 overflow-y-scroll md:overflow-visible grid-cols-[80px_1fr] min-h-72"},wle={class:"grid gap-[5px] flex-shrink-0"},Rle={class:"grid gap-[5px] w-full min-w-[700px]"},xle={class:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-slate-800 dark:text-slate-200"},$le={class:"grid gap-[5px] flex-shrink-0"},Mle={class:"font-normal text-slate-700 dark:text-slate-200"},Lle={class:"grid gap-[5px] w-full min-w-[700px]"},kle={class:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-slate-800 dark:text-slate-200"},Dle={__name:"Heatmap",props:{heatmapData:{type:Array,default:()=>[]},numberOfRows:{type:Number,default:7},isLoading:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=Me(),s=C(()=>DO(t.heatmapData)),o=C(()=>{const c=t.heatmapData.map(u=>u.value);return eO(c,[.2,.4,.6,.8,.9,.99])});function a(c){return c?c===1?n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATION",{count:c}):n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATIONS",{count:c}):n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.NO_CONVERSATIONS")}function i(c){return ms(new Date(c),"MMM d, yyyy")}function r(c){const u=NL(c);return[n("DAYS_OF_WEEK.SUNDAY"),n("DAYS_OF_WEEK.MONDAY"),n("DAYS_OF_WEEK.TUESDAY"),n("DAYS_OF_WEEK.WEDNESDAY"),n("DAYS_OF_WEEK.THURSDAY"),n("DAYS_OF_WEEK.FRIDAY"),n("DAYS_OF_WEEK.SATURDAY")][u]}function l(c){if(!c)return"outline-n-container dark:bg-slate-700/40 bg-slate-50/50";let u=[...o.value,1/0].findIndex(m=>c<=m&&c>0);return u>6&&(u=5),u===0?"outline-n-container dark:bg-slate-700/40 bg-slate-50/50":["bg-woot-50 dark:bg-woot-800/40 dark:outline-woot-800/80","bg-woot-100 dark:bg-woot-800/30 dark:outline-woot-800/80","bg-woot-200 dark:bg-woot-500/40 dark:outline-woot-700/80","bg-woot-300 dark:bg-woot-500/60 dark:outline-woot-600/80","bg-woot-600 dark:bg-woot-500/80 dark:outline-woot-500/80","bg-woot-800 dark:bg-woot-500 dark:outline-woot-400/80"][u-1]}return(c,u)=>{const d=qe("tooltip");return p(),v("div",Nle,[e.isLoading?(p(),v(pe,{key:0},[h("div",wle,[(p(!0),v(pe,null,Ne(e.numberOfRows,m=>(p(),v("div",{key:m,class:"w-full rounded-sm bg-slate-100 dark:bg-slate-900 animate-loader-pulse h-8 min-w-[70px]"}))),128))]),h("div",Rle,[(p(!0),v(pe,null,Ne(e.numberOfRows,m=>(p(),v("div",{key:m,class:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]"},[(p(),v(pe,null,Ne(24,f=>h("div",{key:f,class:"w-full h-8 rounded-sm bg-slate-100 dark:bg-slate-900 animate-loader-pulse"})),64))]))),128))]),u[0]||(u[0]=h("div",null,null,-1)),h("div",xle,[(p(),v(pe,null,Ne(24,m=>h("div",{key:m,class:"flex items-center justify-center"},A(m-1)+" – "+A(m),1)),64))])],64)):(p(),v(pe,{key:1},[h("div",$le,[(p(!0),v(pe,null,Ne(s.value.keys(),m=>(p(),v("div",{key:m,class:"h-8 min-w-[70px] text-slate-800 dark:text-slate-200 text-[10px] font-semibold flex flex-col items-end justify-center"},[Re(A(r(new Date(m)))+" ",1),h("time",Mle,A(i(m)),1)]))),128))]),h("div",Lle,[(p(!0),v(pe,null,Ne(s.value.keys(),m=>(p(),v("div",{key:m,class:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]"},[(p(!0),v(pe,null,Ne(s.value.get(m),f=>re((p(),v("div",{key:f.timestamp,class:se(["h-8 rounded-sm shadow-inner dark:outline dark:outline-1 shadow-black",l(f.value)])},null,2)),[[d,a(f.value),void 0,{top:!0}]])),128))]))),128))]),u[1]||(u[1]=h("div",null,null,-1)),h("div",kle,[(p(),v(pe,null,Ne(24,m=>h("div",{key:m,class:"flex items-center justify-center"},A(m-1)+" – "+A(m),1)),64))])],64))])}}},fp=(e,t=6e4)=>{const n=X(null),s=()=>{n.value=setTimeout(async()=>{await e(),s()},t)},o=()=>{n.value&&(clearTimeout(n.value),n.value=null)};return Sc(()=>{o()}),{startRefetching:s,stopRefetching:o}},Ple={class:"bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container absolute rounded-xl z-50 py-2 px-2 gap-2 flex flex-col min-w-[136px] shadow-lg"},Ble={key:0,class:"relative"},Fle=["placeholder"],Ule=["disabled","onClick"],Gle={key:1,class:"flex-shrink-0"},Vle={key:1,class:"text-sm text-n-slate-11 px-2 py-1.5"},Hs={__name:"DropdownMenu",props:{menuItems:{type:Array,required:!0,validator:e=>e.every(t=>t.action&&t.value&&t.label)},thumbnailSize:{type:Number,default:20},showSearch:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},isSearching:{type:Boolean,default:!1},labelClass:{type:String,default:""}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(null),i=X(""),r=C(()=>i.value?n.menuItems.filter(c=>c.label.toLowerCase().includes(i.value.toLowerCase())):n.menuItems),l=c=>{const{action:u,value:d,...m}=c;s("action",{action:u,value:d,...m})};return dt(()=>{a.value&&n.showSearch&&a.value.focus()}),(c,u)=>(p(),v("div",Ple,[e.showSearch?(p(),v("div",Ble,[u[1]||(u[1]=h("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),re(h("input",{ref_key:"searchInput",ref:a,"onUpdate:modelValue":u[0]||(u[0]=d=>i.value=d),type:"search",placeholder:e.searchPlaceholder||N(o)("DROPDOWN_MENU.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-8 py-2 pl-10 pr-2 text-sm focus:outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,Fle),[[mt,i.value]])])):w("",!0),(p(!0),v(pe,null,Ne(r.value,(d,m)=>(p(),v("button",{key:m,type:"button",class:se(["inline-flex items-center justify-start w-full h-8 min-w-0 gap-2 px-2 py-1.5 transition-all duration-200 ease-in-out border-0 rounded-lg z-60 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2 disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50",{"bg-n-alpha-1 dark:bg-n-solid-active":d.isSelected,"text-n-ruby-11":d.action==="delete","text-n-slate-12":d.action!=="delete"}]),disabled:d.disabled,onClick:f=>l(d)},[We(c.$slots,"thumbnail",{item:d},()=>[d.thumbnail?(p(),$(ts,{key:0,name:d.thumbnail.name,src:d.thumbnail.src,size:e.thumbnailSize,"rounded-full":""},null,8,["name","src","size"])):w("",!0)]),d.icon?(p(),$(Rt,{key:0,icon:d.icon,class:"flex-shrink-0 size-3.5"},null,8,["icon"])):w("",!0),d.emoji?(p(),v("span",Gle,A(d.emoji),1)):w("",!0),d.label?(p(),v("span",{key:2,class:se(["min-w-0 text-sm truncate",e.labelClass])},A(d.label),3)):w("",!0)],10,Ule))),128)),r.value.length===0?(p(),v("div",Vle,A(e.isSearching?N(o)("DROPDOWN_MENU.SEARCHING"):N(o)("DROPDOWN_MENU.EMPTY_STATE")),1)):w("",!0)]))}},Hle={class:"flex flex-row flex-wrap max-w-full"},Wle={class:"relative flex items-center group"},zle={__name:"HeatmapContainer",setup(e){const t=pt(),n=Oe("getOverviewUIFlags"),s=Oe("getAccountConversationHeatmapData"),{t:o}=Me(),a=[{label:o("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS"),value:6},{label:o("REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS"),value:29}],i=X(6),r=C(()=>a.find(g=>g.value===i.value)),l=()=>{const g=ro(new Date);t.dispatch("downloadAccountConversationHeatmap",{daysBefore:i.value,to:co(g)})},[c,u]=es(),d=()=>{if(n.value.isFetchingAccountConversationsHeatmap)return;let g=ro(new Date),T=Ys(Fo(g,Number(i.value)));t.dispatch("fetchAccountConversationHeatmap",{metric:"conversations_count",from:co(T),to:co(g),groupBy:"hour",businessHours:!1})},m=({value:g})=>{u(!1),i.value=g,d()},{startRefetching:f}=fp(d);return dt(()=>{d(),f()}),(g,T)=>{const S=qe("on-clickaway");return p(),v("div",Hle,[y(bc,{header:g.$t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER")},{control:K(()=>[re((p(),v("div",Wle,[y(oe,{sm:"",slate:"",faded:"",label:r.value.label,class:"rounded-md group-hover:bg-n-alpha-2",onClick:T[0]||(T[0]=_=>N(u)())},null,8,["label"]),N(c)?(p(),$(Hs,{key:0,"menu-items":a,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full",onAction:T[1]||(T[1]=_=>m(_))})):w("",!0)])),[[S,()=>N(u)(!1)]]),y(oe,{sm:"",slate:"",faded:"",label:N(o)("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.DOWNLOAD_REPORT"),class:"rounded-md group-hover:bg-n-alpha-2",onClick:l},null,8,["label"])]),default:K(()=>[y(Dle,{"heatmap-data":N(s),"number-of-rows":i.value+1,"is-loading":N(n).isFetchingAccountConversationsHeatmap},null,8,["heatmap-data","number-of-rows","is-loading"])]),_:1},8,["header"])])}}},jle={key:1,class:"text-slate-300 dark:text-slate-700"},Kle={__name:"BaseCell",props:{content:{type:String,default:""}},setup(e){const t=Oe("accounts/isRTL");return(n,s)=>(p(),v("div",{class:se(["overflow-hidden whitespace-nowrap text-ellipsis",{"text-right":N(t)}])},[n.$slots.default||e.content?We(n.$slots,"default",{key:0},()=>[e.content?(p(),v(pe,{key:0},[Re(A(e.content),1)],64)):w("",!0)]):(p(),v("span",jle," --- "))],2))}},Yle={class:"items-start flex flex-col min-w-0 my-0 mx-2"},Xle={class:"overflow-hidden text-sm m-0 leading-[1.2] text-slate-800 dark:text-slate-100 whitespace-nowrap text-ellipsis"},qle={class:"text-xs text-slate-600 dark:text-slate-200"},Zle={__name:"AgentCell",props:{row:{type:Object,required:!0}},setup(e){const t=Oe("accounts/isRTL");return(n,s)=>(p(),$(Kle,null,{default:K(()=>[h("div",{class:se(["items-center flex text-left",{"flex-row-reverse":N(t)}])},[y(Hn,{src:e.row.original.thumbnail,size:"32px",username:e.row.original.agent,status:e.row.original.status},null,8,["src","username","status"]),h("div",Yle,[h("h6",Xle,A(e.row.original.agent),1),h("span",qle,A(e.row.original.email),1)])],2)]),_:1}))}},Qle={class:"flex flex-col flex-1"},Jle={key:0,class:"items-center flex text-base justify-center p-8"},W1="report_overview_agent_table_page_size",ece={__name:"AgentTable",props:{agents:{type:Array,default:()=>[]},agentMetrics:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(e){const{t}=Me(),{uiSettings:n,updateUISettings:s}=ln(),o=()=>n.value[W1]||10,a=m=>{s({[W1]:m})},i=m=>e.agentMetrics.find(f=>f.assignee_id===Number(m))||{},r=C(()=>e.agents.map(m=>{const f=i(m.id);return{agent:m.available_name||m.name,email:m.email,thumbnail:m.thumbnail,open:f.open||0,unattended:f.unattended||0,status:m.availability_status}}).sort((m,f)=>{const g=f.open-m.open;return g===0?m.agent.localeCompare(f.agent):g})),l=m=>yn("span",{class:m.getValue()?"capitalize text-n-slate-12":"capitalize text-n-slate-11"},m.getValue()?m.getValue():"---"),c=cp(),u=[c.accessor("agent",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT"),cell:m=>yn(Zle,m),size:250}),c.accessor("open",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN"),cell:l,size:100}),c.accessor("unattended",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),cell:l,size:100})],d=pp({get data(){return r.value},columns:u,enableSorting:!1,getCoreRowModel:dp(),getPaginationRowModel:DS(),initialState:{pagination:{pageSize:o()}}});return(m,f)=>(p(),v("div",Qle,[y(hp,{table:N(d),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),y(Qg,{class:"mt-2",table:N(d),"show-page-size-selector":"","default-page-size":o(),onPageSizeChange:a},null,8,["table","default-page-size"]),e.isLoading?(p(),v("div",Jle,[y(bs),h("span",null,A(m.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE")),1)])):!e.isLoading&&!e.agents.length?(p(),$(pr,{key:1,title:m.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS")},null,8,["title"])):w("",!0)]))}},tce={class:"flex flex-row flex-wrap max-w-full"},nce={__name:"AgentLiveReportContainer",setup(e){const t=pt(),n=Oe("getOverviewUIFlags"),s=Oe("getAgentConversationMetric"),o=Oe("agents/getAgents"),a=()=>t.dispatch("fetchAgentConversationMetric"),{startRefetching:i}=fp(a);return dt(()=>{t.dispatch("agents/get"),a(),i()}),(r,l)=>(p(),v("div",tce,[y(bc,{header:r.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER")},{default:K(()=>[y(ece,{agents:N(o),"agent-metrics":N(s),"is-loading":N(n).isFetchingAgentConversationMetric},null,8,["agents","agent-metrics","is-loading"])]),_:1},8,["header"])]))}},sce={class:"flex flex-col flex-1"},ace={key:0,class:"items-center flex text-base justify-center p-8"},z1="report_overview_team_table_page_size",oce={__name:"TeamTable",props:{teams:{type:Array,default:()=>[]},teamMetrics:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(e){const{t}=Me(),{uiSettings:n,updateUISettings:s}=ln(),o=()=>n.value[z1]||10,a=m=>{s({[z1]:m})},i=m=>e.teamMetrics.find(f=>f.team_id===Number(m))||{},r=C(()=>e.teams.map(m=>{const f=i(m.id);return{agent:m.name,open:f.open||0,unattended:f.unattended||0}}).sort((m,f)=>{const g=f.open-m.open;return g===0?m.agent.localeCompare(f.agent):g})),l=m=>yn("span",{class:m.getValue()?"capitalize text-n-slate-12":"capitalize text-n-slate-11"},m.getValue()?m.getValue():"---"),c=cp(),u=[c.accessor("agent",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.TEAM"),cell:l,size:250}),c.accessor("open",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.OPEN"),cell:l,size:100}),c.accessor("unattended",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),cell:l,size:100})],d=pp({get data(){return r.value},columns:u,enableSorting:!1,getCoreRowModel:dp(),getPaginationRowModel:DS(),initialState:{pagination:{pageSize:o()}}});return(m,f)=>(p(),v("div",sce,[y(hp,{table:N(d),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),y(Qg,{class:"mt-2",table:N(d),"show-page-size-selector":"","default-page-size":o(),onPageSizeChange:a},null,8,["table","default-page-size"]),e.isLoading?(p(),v("div",ace,[y(bs),h("span",null,A(m.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.LOADING_MESSAGE")),1)])):!e.isLoading&&!e.teams.length?(p(),$(pr,{key:1,title:m.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.NO_TEAMS")},null,8,["title"])):w("",!0)]))}},ice={class:"flex flex-row flex-wrap max-w-full"},rce={__name:"TeamLiveReportContainer",setup(e){const t=pt(),n=Oe("getOverviewUIFlags"),s=Oe("getTeamConversationMetric"),o=Oe("teams/getTeams"),a=()=>t.dispatch("fetchTeamConversationMetric"),{startRefetching:i}=fp(a);return dt(()=>{t.dispatch("teams/get"),a(),i()}),(r,l)=>(p(),v("div",ice,[y(bc,{header:r.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.HEADER")},{default:K(()=>[y(oce,{teams:N(o),"team-metrics":N(s),"is-loading":N(n).isFetchingTeamConversationMetric},null,8,["teams","team-metrics","is-loading"])]),_:1},8,["header"])]))}},lce={class:"flex flex-col items-center md:flex-row gap-4"},cce={class:"flex-1 w-full max-w-full md:w-[65%] md:max-w-[65%] conversation-metric"},uce={class:"relative flex items-center group z-50"},dce={class:"text-base text-n-slate-11"},pce={class:"text-n-slate-12 text-3xl mb-0 mt-1"},hce={class:"flex-1 w-full max-w-full md:w-[35%] md:max-w-[35%]"},mce={class:"text-base text-n-slate-11"},fce={class:"text-n-slate-12 text-3xl mb-0 mt-1"},om="OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS",gce={__name:"StatsLiveReportsContainer",setup(e){const{t}=Me(),n=Oe("getOverviewUIFlags"),s=Oe("agents/getAgentStatus"),o=Oe("getAccountConversationMetric"),a=pt(),i=Oe("teams/getTeams"),r=C(()=>[{label:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.ALL_TEAMS"),value:null},...i.value.map(_=>({label:_.name,value:_.id}))]),l=C(()=>{let _={};return Object.keys(s.value).forEach(E=>{const b=t(`OVERVIEW_REPORTS.AGENT_STATUS.${F1[E]}`);_[b]=s.value[E]}),_}),c=C(()=>{let _={};return Object.keys(o.value).forEach(E=>{const b=t(`${om}.${F1[E]}`);_[b]=o.value[E]}),_}),u=X(null),d=C(()=>(r.value.find(E=>E.value===u.value)||{}).label),m=()=>{const _={};u.value&&(_.team_id=u.value),a.dispatch("fetchAccountConversationMetric",_)},{startRefetching:f}=fp(m),[g,T]=es(),S=({value:_})=>{T(!1),u.value=_,m()};return dt(()=>{m(),f()}),(_,E)=>{const b=qe("on-clickaway");return p(),v("div",lce,[h("div",cce,[y(bc,{header:N(t)(`${om}.HEADER`),"is-loading":N(n).isFetchingAccountConversationMetric,"loading-message":N(t)(`${om}.LOADING_MESSAGE`)},vo({default:K(()=>[(p(!0),v(pe,null,Ne(c.value,(I,R,O)=>(p(),v("div",{key:O,class:"flex-1 min-w-0 pb-2"},[h("h3",dce,A(R),1),h("p",pce,A(I),1)]))),128))]),_:2},[N(i).length?{name:"control",fn:K(()=>[re((p(),v("div",uce,[y(oe,{sm:"",slate:"",faded:"",label:d.value,class:"capitalize rounded-md group-hover:bg-n-alpha-2",onClick:E[0]||(E[0]=I=>N(T)())},null,8,["label"]),N(g)?(p(),$(Hs,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full","label-class":"capitalize",onAction:E[1]||(E[1]=I=>S(I))},null,8,["menu-items"])):w("",!0)])),[[b,()=>N(T)(!1)]])]),key:"0"}:void 0]),1032,["header","is-loading","loading-message"])]),h("div",hce,[y(bc,{header:_.$t("OVERVIEW_REPORTS.AGENT_STATUS.HEADER")},{default:K(()=>[(p(!0),v(pe,null,Ne(l.value,(I,R,O)=>(p(),v("div",{key:O,class:"flex-1 min-w-0 pb-2"},[h("h3",mce,A(R),1),h("p",fce,A(I),1)]))),128))]),_:1},8,["header"])])])}}},_ce={class:"flex flex-col gap-4 pb-6"},vce={__name:"LiveReports",setup(e){return(t,n)=>(p(),v(pe,null,[y(Oo,{"header-title":t.$t("OVERVIEW_REPORTS.HEADER")},null,8,["header-title"]),h("div",_ce,[y(gce),y(zle),y(nce),y(rce)])],64))}},bce={props:{label:{type:String,required:!0},value:{type:[String,Number],required:!0},toolTip:{type:String,required:!0},isLoading:{type:Boolean,default:!1}}},Ece={class:"flex flex-col gap-2 items-start justify-center min-w-[10rem]"},Tce={class:"inline-flex items-center gap-1 text-sm font-medium text-n-slate-11"},yce={key:0,class:"w-12 h-6 mb-0.5 rounded-md bg-n-slate-3 animate-pulse"},Sce={key:1,class:"text-2xl font-medium text-n-slate-12"};function Ace(e,t,n,s,o,a){const i=M("fluent-icon"),r=qe("tooltip");return p(),v("div",Ece,[h("span",Tce,[Re(A(n.label)+" ",1),re(y(i,{size:"14",icon:"information",type:"outline",class:"flex flex-shrink-0 text-sm font-normal sm:font-medium text-n-slate-10"},null,512),[[r,n.toolTip,void 0,{right:!0}]])]),n.isLoading?(p(),v("div",yce)):(p(),v("span",Sce,A(n.value),1))])}const im=Ae(bce,[["render",Ace]]),Ice={class:"flex sm:flex-row flex-col w-full gap-4 sm:gap-14 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},Cce={__name:"SLAMetrics",props:{hitRate:{type:String,required:!0},noOfBreaches:{type:Number,required:!0},noOfConversations:{type:Number,required:!0},isLoading:{type:Boolean,default:!1}},setup(e){return(t,n)=>(p(),v("div",Ice,[y(im,{label:t.$t("SLA_REPORTS.METRICS.HIT_RATE.LABEL"),value:e.hitRate,"tool-tip":t.$t("SLA_REPORTS.METRICS.HIT_RATE.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"]),n[0]||(n[0]=h("div",{class:"w-full sm:w-px bg-n-strong"},null,-1)),y(im,{label:t.$t("SLA_REPORTS.METRICS.NO_OF_MISSES.LABEL"),value:e.noOfBreaches,"tool-tip":t.$t("SLA_REPORTS.METRICS.NO_OF_MISSES.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"]),n[1]||(n[1]=h("div",{class:"w-full sm:w-px bg-n-strong"},null,-1)),y(im,{label:t.$t("SLA_REPORTS.METRICS.NO_OF_CONVERSATIONS.LABEL"),value:e.noOfConversations,"tool-tip":t.$t("SLA_REPORTS.METRICS.NO_OF_CONVERSATIONS.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"])]))}},PS={__name:"TableHeaderCell",props:{span:{type:Number,required:!0},label:{type:String,required:!0}},setup(e){const t=e,n=C(()=>t.span===1?"col-span-1":t.span===2?"col-span-2":t.span===3?"col-span-3":t.span===4?"col-span-4":t.span===5?"col-span-5":t.span===6?"col-span-6":t.span===7?"col-span-7":t.span===8?"col-span-8":t.span===9?"col-span-9":t.span===10?"col-span-10":"col-span-1");return(s,o)=>(p(),v("div",{class:se(["flex items-center px-0 py-2 text-xs font-medium text-right uppercase text-n-slate-11 rtl:text-left",n.value])},[We(s.$slots,"default",{},()=>[Re(A(e.label),1)])],2))}},Oce=["title"],BS={__name:"CardLabels",props:{conversationLabels:{type:Array,required:!0}},setup(e){const t=e,n=Sf(),s=Oe("labels/getLabels"),o=C(()=>s.value.filter(({title:d})=>t.conversationLabels.includes(d))),a=X(!1),i=X(!1),r=X(-1),l=X(null),c=()=>{const d=n.before?100:0;if(!l.value)return;const m=Array.from(l.value.querySelectorAll(".label"));let f=0;i.value=!1,m.forEach((g,T)=>{f+=g.offsetWidth+8,f<l.value.clientWidth-d?r.value=T:i.value=m.length>1})};ct(o,()=>{tn(()=>c())}),dt(()=>{c()});const u=d=>{d.stopPropagation(),a.value=!a.value,tn(()=>c())};return(d,m)=>{const f=M("woot-label"),g=M("fluent-icon"),T=qe("resize");return re((p(),v("div",{ref_key:"labelContainer",ref:l},[o.value.length||d.$slots.before?(p(),v("div",{key:0,class:se(["flex items-end flex-shrink min-w-0 gap-y-1",{"h-auto overflow-visible flex-row flex-wrap":a.value}])},[We(d.$slots,"before"),(p(!0),v(pe,null,Ne(o.value,(S,_)=>(p(),$(f,{key:S?S.id:_,title:S.title,description:S.description,color:S.color,variant:"smooth",class:se(["!mb-0 max-w-[calc(100%-0.5rem)]",{"invisible absolute":!a.value&&_>r.value}]),small:""},null,8,["title","description","color","class"]))),128)),i.value?(p(),v("button",{key:0,title:a.value?d.$t("CONVERSATION.CARD.HIDE_LABELS"):d.$t("CONVERSATION.CARD.SHOW_LABELS"),class:"h-5 py-0 px-1 flex-shrink-0 mr-6 ml-0 rtl:ml-6 rtl:mr-0 rtl:rotate-180 text-slate-700 dark:text-slate-200 border-n-strong dark:border-n-strong",onClick:u},[y(g,{icon:a.value?"chevron-left":"chevron-right",size:"12"},null,8,["icon"])],8,Oce)):w("",!0)],2)):w("",!0)])),[[T,c]])}}},Nce={class:"flex justify-between w-full"},wce={class:"text-sm sticky top-0 h-fit font-normal tracking-[-0.6%] min-w-[140px] truncate text-n-slate-11"},Rce={class:"flex flex-col w-full gap-2"},rm={__name:"SLAEventItem",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},setup(e){const t=n=>ms(Ml(n),"MMM dd, yyyy, hh:mm a");return(n,s)=>(p(),v("div",Nce,[h("span",wce,A(e.label),1),h("div",Rce,[(p(!0),v(pe,null,Ne(e.items,o=>(p(),v("span",{key:o.id,class:"text-sm font-normal text-n-slate-12 text-right tabular-nums"},A(t(o.created_at)),1))),128)),We(n.$slots,"showMore")])]))}},xce={class:"absolute flex flex-col items-start border-n-strong bg-n-solid-3 w-96 backdrop-blur-[100px] px-6 py-5 z-50 shadow rounded-xl gap-4 max-h-96 overflow-auto"},$ce={class:"text-sm font-medium text-n-slate-12"},Mce={key:0,class:"flex flex-col items-end w-full"},FS={__name:"SLAPopoverCard",props:{slaMissedEvents:{type:Array,required:!0}},setup(e){const t=e,{SLA_MISS_TYPES:n}=It,s=X(!1),o=C(()=>t.slaMissedEvents.filter(c=>c.event_type===n.FRT)),a=C(()=>{const c=t.slaMissedEvents.filter(u=>u.event_type===n.NRT);return s.value?c:c.slice(0,6)}),i=C(()=>t.slaMissedEvents.filter(c=>c.event_type===n.RT)),r=C(()=>a.value.length>6),l=()=>{s.value=!s.value};return(c,u)=>(p(),v("div",xce,[h("span",$ce,A(c.$t("SLA.EVENTS.TITLE")),1),o.value.length?(p(),$(rm,{key:0,label:c.$t("SLA.EVENTS.FRT"),items:o.value},null,8,["label","items"])):w("",!0),a.value.length?(p(),$(rm,{key:1,label:c.$t("SLA.EVENTS.NRT"),items:a.value},{showMore:K(()=>[r.value?(p(),v("div",Mce,[y(oe,{link:"",xs:"",slate:"",class:"hover:!no-underline",icon:s.value?"":"i-lucide-plus",label:s.value?c.$t("SLA.EVENTS.HIDE",{count:a.value.length}):c.$t("SLA.EVENTS.SHOW_MORE",{count:a.value.length}),onClick:l},null,8,["icon","label"])])):w("",!0)]),_:1},8,["label","items"])):w("",!0),i.value.length?(p(),$(rm,{key:2,label:c.$t("SLA.EVENTS.RT"),items:i.value},null,8,["label","items"])):w("",!0)]))}},Lce={components:{SLAPopoverCard:FS,NextButton:oe},props:{slaEvents:{type:Array,default:()=>[]}},data(){return{showSlaPopoverCard:!1}},methods:{closeSlaEvents(){this.showSlaPopoverCard=!1},openSlaEvents(){this.showSlaPopoverCard=!this.showSlaPopoverCard}}},kce={class:"flex items-center col-span-2 text-slate-11 justify-end"},Dce={class:"relative"};function Pce(e,t,n,s,o,a){const i=M("NextButton"),r=M("SLAPopoverCard"),l=qe("on-clickaway");return re((p(),v("div",kce,[h("div",Dce,[y(i,{link:"",slate:"",type:"button",label:e.$t("SLA_REPORTS.TABLE.VIEW_DETAILS"),onClick:a.openSlaEvents},null,8,["label","onClick"]),o.showSlaPopoverCard?(p(),$(r,{key:0,"sla-missed-events":n.slaEvents,class:"right-0"},null,8,["sla-missed-events"])):w("",!0)])])),[[l,a.closeSlaEvents]])}const Bce=Ae(Lce,[["render",Pce]]),Fce={class:"grid items-center content-center w-full h-16 grid-cols-12 gap-4 px-6 py-0 border-b last:border-b-0 last:rounded-b-xl border-n-weak"},Uce={class:"flex items-center gap-2 col-span-6 px-0 py-2 text-sm tracking-[0.5] text-slate-700 dark:text-slate-100 rtl:text-right"},Gce={class:"text-n-slate-12"},Vce={class:"text-slate-11"},Hce={class:"capitalize truncate text-n-slate-12"},Wce={class:"flex items-center capitalize py-2 px-0 text-sm tracking-[0.5] text-slate-700 dark:text-slate-50 text-left rtl:text-right col-span-2"},zce={class:"flex items-center col-span-2 gap-2"},jce={key:1,class:"text-n-slate-11"},Kce={__name:"SLAReportItem",props:{slaName:{type:String,required:!0},conversationId:{type:Number,required:!0},conversation:{type:Object,required:!0},slaEvents:{type:Array,default:()=>[]}},setup(e){const t=e,n=C(()=>t.conversation.labels?t.conversation.labels.split(",").map(s=>s.trim()):[]);return(s,o)=>(p(),v("div",Fce,[h("div",Uce,[h("span",Gce,A(`#${e.conversationId} `),1),h("span",Vce,A(s.$t("SLA_REPORTS.WITH")),1),h("span",Hce,A(e.conversation.contact.name),1),n.value.length?(p(),$(BS,{key:0,class:"w-[60%]","conversation-id":e.conversationId,"conversation-labels":n.value},null,8,["conversation-id","conversation-labels"])):w("",!0)]),h("div",Wce,A(e.slaName),1),h("div",zce,[e.conversation.assignee?(p(),$(hf,{key:0,user:e.conversation.assignee},null,8,["user"])):(p(),v("span",jce," --- "))]),y(Bce,{"sla-events":e.slaEvents},null,8,["sla-events"])]))}},Yce={name:"SLATable",components:{SLAReportItem:Kce,TableFooter:Ig,Spinner:bs,TableHeaderCell:PS},props:{slaReports:{type:Array,default:()=>[]},totalCount:{type:Number,default:0},currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},isLoading:{type:Boolean,default:!1}},emits:["pageChange"],data(){return{pageNo:1}},computed:{shouldShowFooter(){return this.currentPage===1?this.totalCount>this.pageSize:this.slaReports.length>0}},methods:{onPageChange(e){this.$emit("pageChange",e)}}},Xce={class:"min-w-full shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 p-6"},qce={class:"grid content-center h-12 grid-cols-12 gap-4 px-6 py-0 bg-n-slate-2 rounded-md"},Zce={key:0,class:"flex items-center justify-center h-32"},Qce={key:1},Jce={key:2,class:"flex items-center justify-center h-32"};function eue(e,t,n,s,o,a){const i=M("TableHeaderCell"),r=M("Spinner"),l=M("SLAReportItem"),c=M("TableFooter");return p(),v("div",null,[h("div",Xce,[h("div",qce,[y(i,{span:6,label:e.$t("SLA_REPORTS.TABLE.HEADER.CONVERSATION")},null,8,["label"]),y(i,{span:2,label:e.$t("SLA_REPORTS.TABLE.HEADER.POLICY")},null,8,["label"]),y(i,{span:2,label:e.$t("SLA_REPORTS.TABLE.HEADER.AGENT")},null,8,["label"]),y(i,{span:1,label:""})]),n.isLoading?(p(),v("div",Zce,[y(r),h("span",null,A(e.$t("SLA_REPORTS.LOADING")),1)])):n.slaReports.length>0?(p(),v("div",Qce,[(p(!0),v(pe,null,Ne(n.slaReports,u=>(p(),$(l,{key:u.applied_sla.id,"sla-name":u.applied_sla.sla_name,conversation:u.conversation,"conversation-id":u.conversation.id,"sla-events":u.sla_events},null,8,["sla-name","conversation","conversation-id","sla-events"]))),128))])):(p(),v("div",Jce,A(e.$t("SLA_REPORTS.NO_RECORDS")),1))]),a.shouldShowFooter?(p(),$(c,{key:0,"current-page":n.currentPage,"total-count":n.totalCount,"page-size":n.pageSize,onPageChange:a.onPageChange},null,8,["current-page","total-count","page-size","onPageChange"])):w("",!0)])}const tue=Ae(Yce,[["render",eue]]),j1=(e,t)=>e.map(n=>({id:n.id,name:t==="labels"?n.title:n.name,type:t})),nue=(e,t,n)=>e.find(s=>t==="labels"?s.title===n:s.id.toString()===n.toString()),vu=(e,t)=>({keyToType:{assigned_agent_id:"agents",inbox_id:"inboxes",team_id:"teams",sla_policy_id:"sla",label_list:"labels"},typeToKey:{agents:"assigned_agent_id",inboxes:"inbox_id",teams:"team_id",sla:"sla_policy_id",labels:"label_list"}})[t][e],sue={class:"min-w-0 truncate"},Uc={__name:"DropdownButton",props:{buttonText:{type:String,default:""},trailingIcon:{type:Boolean,default:!1},icon:{type:String,default:""}},setup(e){return(t,n)=>(p(),$(oe,{ghost:"",slate:"",sm:"",class:"relative",icon:e.icon,"trailing-icon":e.trailingIcon},{default:K(()=>[h("span",sue,A(e.buttonText),1),We(t.$slots,"dropdown")]),_:3},8,["icon","trailing-icon"]))}},aue={class:"relative inline-flex items-center justify-start w-full p-3 border-0 rounded-none first:rounded-t-xl last:rounded-b-xl h-11 hover:enabled:bg-n-alpha-2"},oue={class:"inline-flex items-center gap-3 overflow-hidden"},iue={class:"text-sm font-medium truncate text-n-slate-12"},US={__name:"DropdownListItemButton",props:{buttonText:{type:String,default:""},isActive:{type:Boolean,default:!1},icon:{type:String,default:""},iconColor:{type:String,default:""}},setup(e){return(t,n)=>{const s=M("fluent-icon");return p(),v("button",aue,[h("div",oue,[e.icon?(p(),$(s,{key:0,icon:e.icon,size:"18",style:Ht({color:e.iconColor})},null,8,["icon","style"])):w("",!0),h("span",iue,A(e.buttonText),1),e.isActive?(p(),$(s,{key:1,icon:"checkmark",size:"18",class:"flex-shrink-0 text-n-slate-12"})):w("",!0)]),We(t.$slots,"dropdown")])}}},rue={class:"flex items-center justify-between h-10 min-h-[40px] sticky top-0 bg-n-solid-2 dark:bg-n-solid-2 z-10 gap-2 px-3 border-b rounded-t-xl border-n-weak"},lue=["placeholder"],cue={__name:"DropdownSearch",props:hn({inputPlaceholder:{type:String,default:""},showClearFilter:{type:Boolean,default:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:hn(["remove"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=wn(e,"modelValue");return(o,a)=>{const i=M("fluent-icon");return p(),v("div",rue,[h("div",{class:"flex items-center w-full gap-2",onKeyup:a[1]||(a[1]=kn(Fe(()=>{},["prevent"]),["space"]))},[y(i,{icon:"search",size:"16",class:"text-n-slate-11 flex-shrink-0"}),re(h("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r),placeholder:e.inputPlaceholder,type:"text",class:"w-full mb-0 text-sm !outline-0 bg-transparent text-n-slate-12 placeholder:text-n-slate-10 reset-base"},null,8,lue),[[mt,s.value]])],32),!e.modelValue&&e.showClearFilter?(p(),$(oe,{key:0,faded:"",xs:"",class:"flex-shrink-0",label:o.$t("REPORT.FILTER_ACTIONS.CLEAR_FILTER"),onClick:a[2]||(a[2]=r=>n("remove"))},null,8,["label"])):w("",!0)])}}},uue={class:"flex items-center justify-center h-10 text-sm text-n-slate-11"},GS={__name:"DropdownEmptyState",props:{message:{type:String,default:""}},setup(e){return(t,n)=>(p(),v("div",uue,A(e.message),1))}},due={class:"flex items-center justify-center h-10 text-sm text-n-slate-11"},pue={__name:"DropdownLoadingState",props:{message:{type:String,default:""}},setup(e){return(t,n)=>(p(),v("div",due,A(e.message),1))}},Ec={__name:"DropdownList",props:{listItems:{type:Array,default:()=>[]},enableSearch:{type:Boolean,default:!1},inputPlaceholder:{type:String,default:""},activeFilterId:{type:[String,Number],default:null},showClearFilter:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},loadingPlaceholder:{type:String,default:""}},emits:["onSearch","select","removeFilter"],setup(e,{emit:t}){const n=e,s=t,o=X(""),a=Uo(m=>{s("onSearch",m)},300),i=m=>{o.value=m,a(m)},r=C(()=>o.value?_g(n.listItems,o.value,["name"]):n.listItems),l=C(()=>!r.value.length),c=m=>n.activeFilterId?m===n.activeFilterId:!1,u=C(()=>n.isLoading&&l.value&&n.loadingPlaceholder),d=C(()=>!n.isLoading&&l.value);return(m,f)=>(p(),v("div",{class:"absolute z-20 w-40 bg-n-solid-2 border-0 outline outline-1 outline-n-weak shadow rounded-xl max-h-[400px]",onClick:f[2]||(f[2]=Fe(()=>{},["stop"]))},[We(m.$slots,"search",{},()=>[e.enableSearch?(p(),$(cue,{key:0,modelValue:o.value,"onUpdate:modelValue":[f[0]||(f[0]=g=>o.value=g),i],"input-placeholder":e.inputPlaceholder,"show-clear-filter":e.showClearFilter,onRemove:f[1]||(f[1]=g=>m.$emit("removeFilter"))},null,8,["modelValue","input-placeholder","show-clear-filter"])):w("",!0)]),We(m.$slots,"listItem",{},()=>[u.value?(p(),$(pue,{key:0,message:e.loadingPlaceholder},null,8,["message"])):d.value?(p(),$(GS,{key:1,message:m.$t("REPORT.FILTER_ACTIONS.EMPTY_LIST")},null,8,["message"])):w("",!0),(p(!0),v(pe,null,Ne(r.value,g=>(p(),$(US,{key:g.id,"is-active":c(g.id),"button-text":g.name,icon:g.icon,"icon-color":g.iconColor,onClick:Fe(T=>s("select",g),["stop","prevent"])},null,8,["is-active","button-text","icon","icon-color","onClick"]))),128))])]))}},hue={__name:"ActiveFilterChip",props:{name:{type:String,required:!0},id:{type:Number,required:!0},type:{type:String,required:!0},options:{type:Array,default:()=>[]},activeFilterType:{type:String,default:""},showMenu:{type:Boolean,default:!1},placeholder:{type:String,default:""},enableSearch:{type:Boolean,default:!1}},emits:["toggleDropdown","removeFilter","addFilter","closeDropdown"],setup(e,{emit:t}){const n=e,s=t,o=()=>s("toggleDropdown",n.type),a=()=>s("removeFilter",n.type),i=l=>s("addFilter",l),r=()=>s("closeDropdown");return(l,c)=>{const u=qe("on-clickaway");return p(),$(Uc,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":e.name,onClick:o},vo({_:2},[e.showMenu&&e.activeFilterType===e.type?{name:"dropdown",fn:K(()=>[e.options?re((p(),$(Ec,{key:0,"show-clear-filter":"","list-items":e.options,"active-filter-id":e.id,"input-placeholder":e.placeholder,"enable-search":e.enableSearch,class:"flex flex-col w-[240px] overflow-y-auto left-0 md:left-auto md:right-0 top-10",onSelect:i,onRemoveFilter:a},null,8,["list-items","active-filter-id","input-placeholder","enable-search"])),[[u,r]]):w("",!0)]),key:"0"}:void 0]),1032,["button-text"])}}},mue={__name:"AddFilterChip",props:{name:{type:String,required:!0},menuOption:{type:Array,default:()=>[]},showMenu:{type:Boolean,default:!1},placeholderI18nKey:{type:String,default:""},enableSearch:{type:Boolean,default:!0},emptyStateMessage:{type:String,default:""}},emits:["toggleDropdown","addFilter","closeDropdown"],setup(e,{emit:t}){const n=t,s=X(null),o=u=>{s.value=u},a=()=>{s.value=null},i=u=>s.value===u,r=()=>n("toggleDropdown"),l=u=>{n("addFilter",u),a()},c=()=>{a(),n("closeDropdown")};return(u,d)=>{const m=qe("on-clickaway");return p(),$(Uc,{"button-text":e.name,icon:"i-lucide-filter",onClick:r},vo({_:2},[e.showMenu?{name:"dropdown",fn:K(()=>[re((p(),$(Ec,{class:"left-0 md:right-0 top-10"},{listItem:K(()=>[e.menuOption.length?w("",!0):(p(),$(GS,{key:0,message:e.emptyStateMessage},null,8,["message"])),(p(!0),v(pe,null,Ne(e.menuOption,f=>(p(),$(US,{key:f.id,"button-text":f.name,onMouseenter:g=>o(f.id),onMouseleave:a,onFocus:g=>o(f.id)},vo({_:2},[f.options&&i(f.id)?{name:"dropdown",fn:K(()=>[y(Ec,{"list-items":f.options,"input-placeholder":u.$t(`${e.placeholderI18nKey}.${f.type.toUpperCase()}`),"enable-search":e.enableSearch,class:"flex flex-col w-[216px] overflow-y-auto top-0 left-36",onSelect:l},null,8,["list-items","input-placeholder","enable-search"])]),key:"0"}:void 0]),1032,["button-text","onMouseenter","onFocus"]))),128))]),_:1})),[[m,c]])]),key:"0"}:void 0]),1032,["button-text"])}}},fue={components:{FilterButton:Uc,ActiveFilterChip:hue,AddFilterChip:mue},emits:["filterChange"],data(){return{showDropdownMenu:!1,showSubDropdownMenu:!1,activeFilterType:"",appliedFilters:{assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null}}},computed:{...lt({agents:"agents/getAgents",inboxes:"inboxes/getInboxes",teams:"teams/getTeams",labels:"labels/getLabels",sla:"sla/getSLA"}),filterListMenuItems(){const e=[{id:"1",name:this.$t("SLA_REPORTS.DROPDOWN.SLA"),type:"sla"},{id:"2",name:this.$t("SLA_REPORTS.DROPDOWN.INBOXES"),type:"inboxes"},{id:"3",name:this.$t("SLA_REPORTS.DROPDOWN.AGENTS"),type:"agents"},{id:"4",name:this.$t("SLA_REPORTS.DROPDOWN.TEAMS"),type:"teams"},{id:"5",name:this.$t("SLA_REPORTS.DROPDOWN.LABELS"),type:"labels"}],n=Object.keys(this.appliedFilters).filter(s=>this.appliedFilters[s]).map(s=>vu(s,"keyToType"));return e.filter(({type:s})=>!n.includes(s)).map(({id:s,name:o,type:a})=>({id:s,name:o,type:a,options:j1(this[a],a)}))},activeFilters(){return Object.keys(this.appliedFilters).filter(t=>this.appliedFilters[t]).map(t=>{const n=vu(t,"keyToType"),s=nue(this[n],n,this.appliedFilters[t]);return{id:s.id,name:n==="labels"?s.title:s.name,type:n,options:j1(this[n],n)}})},hasActiveFilters(){return Object.values(this.appliedFilters).some(e=>e!==null)},isAllFilterSelected(){return!this.filterListMenuItems.length}},methods:{addFilter(e){const{type:t,id:n,name:s}=e,o=vu(t,"typeToKey");this.appliedFilters[o]=t==="labels"?s:n,this.$emit("filterChange",this.appliedFilters),this.resetDropdown()},removeFilter(e){const t=vu(e,"typeToKey");this.appliedFilters[t]=null,this.$emit("filterChange",this.appliedFilters)},clearAllFilters(){this.appliedFilters={assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null},this.$emit("filterChange",this.appliedFilters),this.resetDropdown()},showDropdown(){this.showSubDropdownMenu=!1,this.showDropdownMenu=!this.showDropdownMenu},closeDropdown(){this.showDropdownMenu=!1},openActiveFilterDropdown(e){this.closeDropdown(),this.activeFilterType=e,this.showSubDropdownMenu=!this.showSubDropdownMenu},closeActiveFilterDropdown(){this.activeFilterType="",this.showSubDropdownMenu=!1},resetDropdown(){this.closeDropdown(),this.closeActiveFilterDropdown()}}},gue={class:"flex flex-col flex-wrap items-start gap-2 md:items-center md:flex-nowrap md:flex-row"},_ue={key:0,class:"flex flex-wrap gap-2 md:flex-nowrap"},vue={key:1,class:"w-full h-px border md:w-px md:h-5 border-slate-75 dark:border-slate-800"},bue={class:"flex items-center gap-2"},Eue={key:1,class:"w-px h-5 border border-slate-75 dark:border-slate-800"};function Tue(e,t,n,s,o,a){const i=M("ActiveFilterChip"),r=M("AddFilterChip"),l=M("FilterButton");return p(),v("div",gue,[a.hasActiveFilters?(p(),v("div",_ue,[(p(!0),v(pe,null,Ne(a.activeFilters,c=>(p(),$(i,fs({ref_for:!0},c,{key:c.type,placeholder:e.$t(`SLA_REPORTS.DROPDOWN.INPUT_PLACEHOLDER.${c.type.toUpperCase()}`),"active-filter-type":o.activeFilterType,"show-menu":o.showSubDropdownMenu,"enable-search":"",onToggleDropdown:a.openActiveFilterDropdown,onCloseDropdown:a.closeActiveFilterDropdown,onAddFilter:a.addFilter,onRemoveFilter:a.removeFilter}),null,16,["placeholder","active-filter-type","show-menu","onToggleDropdown","onCloseDropdown","onAddFilter","onRemoveFilter"]))),128))])):w("",!0),a.hasActiveFilters&&!a.isAllFilterSelected?(p(),v("div",vue)):w("",!0),h("div",bue,[a.isAllFilterSelected?w("",!0):(p(),$(r,{key:0,"placeholder-i18n-key":"SLA_REPORTS.DROPDOWN.INPUT_PLACEHOLDER",name:e.$t("SLA_REPORTS.DROPDOWN.ADD_FIlTER"),"menu-option":a.filterListMenuItems,"show-menu":o.showDropdownMenu,"empty-state-message":e.$t("SLA_REPORTS.DROPDOWN.NO_FILTER"),onToggleDropdown:a.showDropdown,onCloseDropdown:a.closeDropdown,onAddFilter:a.addFilter},null,8,["name","menu-option","show-menu","empty-state-message","onToggleDropdown","onCloseDropdown","onAddFilter"])),a.hasActiveFilters?(p(),v("div",Eue)):w("",!0),a.hasActiveFilters?(p(),$(l,{key:2,"button-text":e.$t("SLA_REPORTS.DROPDOWN.CLEAR_ALL"),onClick:a.clearAllFilters},null,8,["button-text","onClick"])):w("",!0)])])}const yue=Ae(fue,[["render",Tue]]),Sue={components:{SLAFilter:yue},emits:["filterChange"],data(){return{selectedDateRange:Wr.LAST_7_DAYS,selectedGroupByFilter:null,customDateRange:[new Date,new Date]}},computed:{to(){return Yu(this.customDateRange[1])},from(){return Ku(this.customDateRange[0])}},watch:{businessHoursSelected(){this.emitChange()}},mounted(){this.setInitialRange()},methods:{setInitialRange(){const{offset:e}=this.selectedDateRange,t=Fo(new Date,e),n=Ku(t),s=Yu(new Date);this.$emit("filterChange",{from:n,to:s,...this.selectedGroupByFilter})},emitChange(){const{from:e,to:t}=this;this.$emit("filterChange",{from:e,to:t,...this.selectedGroupByFilter})},emitFilterChange(e){this.selectedGroupByFilter=e,this.emitChange()},onDateRangeChange(e){this.customDateRange=e,this.emitChange()}}},Aue={class:"flex flex-col flex-wrap w-full gap-3 md:flex-row"};function Iue(e,t,n,s,o,a){const i=M("woot-date-picker"),r=M("SLAFilter");return p(),v("div",Aue,[y(i,{onDateRangeChanged:a.onDateRangeChange},null,8,["onDateRangeChanged"]),y(r,{onFilterChange:a.emitFilterChange},null,8,["onFilterChange"])])}const Cue=Ae(Sue,[["render",Iue]]),Oue={name:"SLAReports",components:{V4Button:oe,ReportHeader:Oo,SLAMetrics:Cce,SLATable:tue,SLAReportFilters:Cue},data(){return{pageNumber:1,activeFilter:{from:0,to:0,assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null}}},computed:{...lt({slaReports:"slaReports/getAll",slaMetrics:"slaReports/getMetrics",slaMeta:"slaReports/getMeta",uiFlags:"slaReports/getUIFlags"})},mounted(){this.$store.dispatch("agents/get"),this.$store.dispatch("inboxes/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("sla/get"),this.fetchSLAMetrics(),this.fetchSLAReports()},methods:{fetchSLAReports({pageNumber:e}={}){this.$store.dispatch("slaReports/get",{page:e||this.pageNumber,...this.activeFilter})},fetchSLAMetrics(){this.$store.dispatch("slaReports/getMetrics",this.activeFilter)},onPageChange(e){this.fetchSLAReports({pageNumber:e})},onFilterChange(e){this.activeFilter=e,this.fetchSLAReports(),this.fetchSLAMetrics()},downloadReports(){const e="sla";try{this.$store.dispatch("slaReports/download",{fileName:Cc({type:e,to:this.activeFilter.to}),...this.activeFilter})}catch{ce(this.$t("SLA_REPORTS.DOWNLOAD_FAILED"))}}}},Nue={class:"flex flex-col flex-1 gap-6"};function wue(e,t,n,s,o,a){const i=M("V4Button"),r=M("ReportHeader"),l=M("SLAReportFilters"),c=M("SLAMetrics"),u=M("SLATable");return p(),v(pe,null,[y(r,{"header-title":e.$t("SLA_REPORTS.HEADER")},{default:K(()=>[y(i,{label:e.$t("SLA_REPORTS.DOWNLOAD_SLA_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:a.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),h("div",Nue,[y(l,{onFilterChange:a.onFilterChange},null,8,["onFilterChange"]),y(c,{"hit-rate":e.slaMetrics.hitRate,"no-of-breaches":e.slaMetrics.numberOfSLAMisses,"no-of-conversations":e.slaMetrics.numberOfConversations,"is-loading":e.uiFlags.isFetchingMetrics},null,8,["hit-rate","no-of-breaches","no-of-conversations","is-loading"]),y(u,{"sla-reports":e.slaReports,"is-loading":e.uiFlags.isFetching,"current-page":Number(e.slaMeta.currentPage),"total-count":Number(e.slaMeta.count),onPageChange:a.onPageChange},null,8,["sla-reports","is-loading","current-page","total-count","onPageChange"])])],64)}const Rue=Ae(Oue,[["render",wue]]),ko={featureFlag:_t.REPORTS,permissions:["administrator","report_manage"]},xue=[{path:"agent",name:"agent_reports",meta:ko,component:Lre},{path:"inboxes",name:"inbox_reports",meta:ko,component:kre},{path:"label",name:"label_reports",meta:ko,component:Dre},{path:"teams",name:"team_reports",meta:ko,component:Pre}],$ue=[{path:"agents_overview",name:"agent_reports_index",meta:{permissions:["administrator","report_manage"]},component:Kie},{path:"agents/:id",name:"agent_reports_show",meta:{permissions:["administrator","report_manage"]},component:Ore},{path:"inboxes_overview",name:"inbox_reports_index",meta:{permissions:["administrator","report_manage"]},component:Yie},{path:"inboxes/:id",name:"inbox_reports_show",meta:{permissions:["administrator","report_manage"]},component:wre},{path:"teams_overview",name:"team_reports_index",meta:{permissions:["administrator","report_manage"]},component:Xie},{path:"teams/:id",name:"team_reports_show",meta:{permissions:["administrator","report_manage"]},component:xre},{path:"labels_overview",name:"label_reports_index",meta:{permissions:["administrator","report_manage"]},component:qie},{path:"labels/:id",name:"label_reports_show",meta:{permissions:["administrator","report_manage"]},component:Mre}],Mue={routes:[{path:At("accounts/:accountId/reports"),component:ise,children:[{path:"",redirect:e=>({name:"account_overview_reports",params:e.params})},{path:"overview",name:"account_overview_reports",meta:ko,component:vce},{path:"conversation",name:"conversation_reports",meta:ko,component:Zoe},...xue,...$ue,{path:"sla",name:"sla_reports",meta:ko,component:Rue},{path:"csat",name:"csat_reports",meta:ko,component:dle},{path:"bot",name:"bot_reports",meta:ko,component:_le}]}]},VS={name:{required:Ye,minLength:Qt(2)},thresholdTime:{decimal:GC,minValue:g0(.001)}},Lue={props:{threshold:{type:Number,default:null},thresholdUnit:{type:String,default:"Minutes"},label:{type:String,default:""},placeholder:{type:String,default:""}},emits:["unit","isInValid","updateThreshold"],setup(){return{v$:bt()}},data(){return{thresholdTime:this.threshold||"",thresholdUnitValue:this.thresholdUnit,options:[{value:"Minutes",label:"minutes"},{value:"Hours",label:"hours"},{value:"Days",label:"days"}]}},validations:VS,computed:{thresholdTimeErrorMessage(){let e="";return this.v$.thresholdTime.$error&&(!this.v$.thresholdTime.numeric||!this.v$.thresholdTime.minValue)&&(e=this.$t("SLA.FORM.THRESHOLD_TIME.INVALID_FORMAT_ERROR")),e}},watch:{threshold:{immediate:!0,handler(e){Number.isNaN(e)||(this.thresholdTime=e)}},thresholdUnit:{immediate:!0,handler(e){this.thresholdUnitValue=e}}},methods:{onThresholdUnitChange(){this.$emit("unit",this.thresholdUnitValue)},onThresholdTimeChange(){this.v$.thresholdTime.$touch();const e=this.v$.thresholdTime.$invalid;this.$emit("isInValid",e),this.$emit("updateThreshold",this.thresholdTime?Number(this.thresholdTime):null)}}},kue={class:"flex items-center w-full gap-3"},Due={class:"mt-7"},Pue=["value"];function Bue(e,t,n,s,o,a){const i=M("woot-input");return p(),v("div",kue,[y(i,{modelValue:o.thresholdTime,"onUpdate:modelValue":[t[0]||(t[0]=r=>o.thresholdTime=r),a.onThresholdTimeChange],type:"number",class:se([{error:s.v$.thresholdTime.$error},"flex-grow"]),styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:n.label,placeholder:n.placeholder,error:a.thresholdTimeErrorMessage},null,8,["modelValue","class","label","placeholder","error","onUpdate:modelValue"]),h("div",Due,[re(h("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.thresholdUnitValue=r),class:"px-4 py-1.5 min-w-[6.5rem] h-10 text-sm font-medium border-0 rounded-xl hover:cursor-pointer pr-7",onChange:t[2]||(t[2]=(...r)=>a.onThresholdUnitChange&&a.onThresholdUnitChange(...r))},[(p(!0),v(pe,null,Ne(o.options,(r,l)=>(p(),v("option",{key:l,value:r.value},A(r.label),9,Pue))),128))],544),[[gn,o.thresholdUnitValue]])])])}const Fue=Ae(Lue,[["render",Bue]]),Uue={components:{SlaTimeInput:Fue,NextButton:oe},props:{selectedResponse:{type:Object,default:()=>{}},submitLabel:{type:String,required:!0}},emits:["close","submitSla"],setup(){return{v$:bt()}},data(){return{name:"",description:"",isSlaTimeInputsInvalid:!1,slaTimeInputsValidation:{},slaTimeInputs:[{threshold:null,unit:"Minutes",label:"SLA.FORM.FIRST_RESPONSE_TIME.LABEL",placeholder:"SLA.FORM.FIRST_RESPONSE_TIME.PLACEHOLDER"},{threshold:null,unit:"Minutes",label:"SLA.FORM.NEXT_RESPONSE_TIME.LABEL",placeholder:"SLA.FORM.NEXT_RESPONSE_TIME.PLACEHOLDER"},{threshold:null,unit:"Minutes",label:"SLA.FORM.RESOLUTION_TIME.LABEL",placeholder:"SLA.FORM.RESOLUTION_TIME.PLACEHOLDER"}],onlyDuringBusinessHours:!1}},validations:VS,computed:{...lt({uiFlags:"sla/getUIFlags"}),isSubmitDisabled(){return this.v$.name.$invalid||this.isSlaTimeInputsInvalid||this.uiFlags.isUpdating},slaNameErrorMessage(){let e="";return this.v$.name.$error&&(this.v$.name.required?this.v$.name.minLength||(e=this.$t("SLA.FORM.NAME.MINIMUM_LENGTH_ERROR")):e=this.$t("SLA.FORM.NAME.REQUIRED_ERROR")),e}},mounted(){this.selectedResponse&&this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){const{name:e,description:t,first_response_time_threshold:n,next_response_time_threshold:s,resolution_time_threshold:o,only_during_business_hours:a}=this.selectedResponse;this.name=e,this.description=t,this.onlyDuringBusinessHours=a;const i=[n,s,o];this.slaTimeInputs.forEach((r,l)=>{const c=E0(i[l],{minute:"Minutes",hour:"Hours",day:"Days"});r.threshold=c.time,r.unit=c.unit})},updateThreshold(e,t){this.slaTimeInputs[e].threshold=t},updateUnit(e,t){this.slaTimeInputs[e].unit=t},onSubmit(){const e={name:this.name,description:this.description,first_response_time_threshold:this.convertToSeconds(0),next_response_time_threshold:this.convertToSeconds(1),resolution_time_threshold:this.convertToSeconds(2),only_during_business_hours:this.onlyDuringBusinessHours};this.$emit("submitSla",e)},convertToSeconds(e){const{threshold:t,unit:n}=this.slaTimeInputs[e];return t===null||t===0?null:Number(t*({Minutes:60,Hours:3600,Days:86400}[n]||1))},handleIsInvalid(e,t){this.slaTimeInputsValidation={...this.slaTimeInputsValidation,[e]:t},this.checkValidationState()},checkValidationState(){const e=Object.values(this.slaTimeInputsValidation).some(t=>t);this.isSlaTimeInputsInvalid=e}}},Gue={class:"flex flex-col h-auto overflow-auto"},Vue={class:"mt-3 flex h-10 items-center text-sm w-full gap-2 border border-solid border-n-strong px-3 py-1.5 rounded-xl justify-between"},Hue={for:"sla_bh",class:"text-slate-700 dark:text-slate-200"},Wue={class:"flex items-center justify-end w-full gap-2 mt-8"};function zue(e,t,n,s,o,a){const i=M("woot-input"),r=M("SlaTimeInput"),l=M("woot-switch"),c=M("NextButton");return p(),v("div",Gue,[h("form",{class:"flex flex-wrap mx-0",onSubmit:t[3]||(t[3]=Fe((...u)=>a.onSubmit&&a.onSubmit(...u),["prevent"]))},[y(i,{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=u=>o.name=u),class:se([{error:s.v$.name.$error},"w-full"]),styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:e.$t("SLA.FORM.NAME.LABEL"),placeholder:e.$t("SLA.FORM.NAME.PLACEHOLDER"),error:a.slaNameErrorMessage,onInput:s.v$.name.$touch,onBlur:s.v$.name.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),y(i,{modelValue:o.description,"onUpdate:modelValue":t[1]||(t[1]=u=>o.description=u),class:"w-full",styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:e.$t("SLA.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("SLA.FORM.DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),(p(!0),v(pe,null,Ne(o.slaTimeInputs,(u,d)=>(p(),$(r,{key:d,threshold:u.threshold,"threshold-unit":u.unit,label:e.$t(u.label),placeholder:e.$t(u.placeholder),onUpdateThreshold:m=>a.updateThreshold(d,m),onUnit:m=>a.updateUnit(d,m),onIsInValid:m=>a.handleIsInvalid(d,m)},null,8,["threshold","threshold-unit","label","placeholder","onUpdateThreshold","onUnit","onIsInValid"]))),128)),h("div",Vue,[h("span",Hue,A(e.$t("SLA.FORM.BUSINESS_HOURS.PLACEHOLDER")),1),y(l,{id:"sla_bh",modelValue:o.onlyDuringBusinessHours,"onUpdate:modelValue":t[2]||(t[2]=u=>o.onlyDuringBusinessHours=u)},null,8,["modelValue"])]),h("div",Wue,[y(c,{faded:"",slate:"",type:"reset",label:e.$t("SLA.FORM.CANCEL"),onClick:Fe(a.onClose,["prevent"])},null,8,["label","onClick"]),y(c,{type:"submit",label:n.submitLabel,disabled:a.isSubmitDisabled,"is-loading":e.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])],32)])}const jue=Ae(Uue,[["render",zue]]),Kue={components:{SlaForm:jue},emits:["close"],methods:{onClose(){this.$emit("close")},async addSLA(e){try{await this.$store.dispatch("sla/create",e),ce(this.$t("SLA.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(t){const n=t.message||this.$t("SLA.ADD.API.ERROR_MESSAGE");ce(n)}}}},Yue={class:"flex flex-col h-auto overflow-auto"};function Xue(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("SlaForm");return p(),v("div",Yue,[y(i,{"header-title":e.$t("SLA.ADD.TITLE"),"header-content":e.$t("SLA.ADD.DESC")},null,8,["header-title","header-content"]),y(r,{"submit-label":e.$t("SLA.FORM.CREATE"),onSubmitSla:a.addSLA,onClose:a.onClose},null,8,["submit-label","onSubmitSla","onClose"])])}const que=Ae(Kue,[["render",Xue]]),Zue={class:"flex relative flex-col sm:flex-row p-4 gap-4 sm:p-6 justify-between group outline outline-n-container outline-1 bg-n-solid-2 rounded-2xl shadow w-full"},Que={class:"flex flex-col min-w-0 items-start gap-3 max-w-[480px] w-full"},Jue={class:"flex items-center justify-between w-full gap-3 sm:justify-normal whitespace-nowrap"},ede={class:"justify-between tracking-tight font-medium truncate w-fit sm:justify-normal text-slate-900 dark:text-slate-25"},tde={class:"text-base text-slate-600 dark:text-slate-300 max-w-[25rem] w-full line-clamp-2"},nde={key:0,class:"absolute flex-col items-center hidden gap-1 border-none ltr:-right-3 rtl:-left-3 top-3 group-hover:flex"},HS={__name:"BaseSettingsListItem",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(e){return(t,n)=>(p(),v("div",Zue,[We(t.$slots,"leftSection",{},()=>[h("div",Que,[h("div",Jue,[h("h3",ede,[We(t.$slots,"title",{},()=>[Re(A(e.title),1)])]),We(t.$slots,"label")]),h("p",tde,[We(t.$slots,"description",{},()=>[Re(A(e.description),1)])])])]),We(t.$slots,"rightSection"),t.$slots.actions?(p(),v("div",nde,[We(t.$slots,"actions")])):w("",!0)]))}},sde={class:"flex flex-row items-start w-full h-full gap-1 sm:items-end sm:px-6 sm:py-2 sm:gap-2 sm:flex-col"},ade={class:"inline-flex items-center gap-1 tracking-[-0.6%] text-sm ltr:pl-1.5 sm:ltr:pl-0 rtl:pr-1.5 sm:rtl:pr-0 text-slate-600 dark:text-slate-300"},ode={class:"text-sm sm:text-2xl font-medium tracking-[-1.5%] text-slate-900 dark:text-slate-25"},lm={__name:"SLAResponseTime",props:{responseType:{type:String,default:""},responseTime:{type:String,default:""}},setup(e){return(t,n)=>{const s=M("fluent-icon"),o=qe("tooltip");return p(),v("div",sde,[h("span",ade,[re(y(s,{size:"14",icon:"information",type:"outline",class:"flex-shrink-0 hidden text-sm font-normal sm:flex sm:font-medium text-slate-500 dark:text-slate-500"},null,512),[[o,t.$t(`SLA.LIST.RESPONSE_TYPES.${e.responseType}`),void 0,{left:!0}]]),Re(" "+A(t.$t(`SLA.LIST.RESPONSE_TYPES.SHORT_HAND.${e.responseType}`))+" ",1),n[0]||(n[0]=h("span",{class:"flex sm:hidden"},":",-1))]),h("span",ode,A(e.responseTime),1)])}}},ide={class:"inline-flex items-center min-w-0 gap-1 px-1.5 sm:px-2 py-1 border border-solid rounded-lg border-slate-75 dark:border-slate-700/50"},rde={__name:"SLABusinessHoursLabel",props:{hasBusinessHours:{type:Boolean,required:!0}},setup(e){return(t,n)=>{const s=M("fluent-icon");return p(),v("div",ide,[y(s,{size:"14",icon:e.hasBusinessHours?"alarm-on":"alarm-off",type:"outline",class:se(["flex-shrink-0",e.hasBusinessHours?"text-slate-600 dark:text-slate-400":"text-slate-300 dark:text-slate-700"])},null,8,["icon","class"]),h("span",{class:se(["hidden text-xs tracking-[0.2%] font-normal truncate sm:block",e.hasBusinessHours?"text-slate-600 dark:text-slate-400":"text-slate-300 dark:text-slate-700"])},A(e.hasBusinessHours?t.$t("SLA.LIST.BUSINESS_HOURS_ON"):t.$t("SLA.LIST.BUSINESS_HOURS_OFF")),3)])}}},lde={class:"flex items-center divide-x rtl:divide-x-reverse sm:rtl:!border-l-0 sm:rtl:!border-r sm:rtl:border-solid sm:rtl:border-slate-75 sm:rtl:dark:border-slate-700/50 gap-1.5 w-fit sm:w-full sm:gap-0 sm:justify-between divide-slate-75 dark:divide-slate-700/50"},mf={__name:"SLAListItem",props:{slaName:{type:String,required:!0},description:{type:String,required:!0},firstResponse:{type:String,required:!0},nextResponse:{type:String,required:!0},resolutionTime:{type:String,required:!0},hasBusinessHours:{type:Boolean,required:!0},isLoading:{type:Boolean,default:!1}},emits:["delete"],setup(e,{emit:t}){const n=t;return(s,o)=>{const a=qe("tooltip");return p(),$(HS,{class:"sm:divide-x sm:divide-slate-75 sm:dark:divide-slate-700/50",title:e.slaName,description:e.description},{label:K(()=>[y(rde,{"has-business-hours":e.hasBusinessHours},null,8,["has-business-hours"])]),rightSection:K(()=>[h("div",lde,[y(lm,{"response-type":"FRT","response-time":e.firstResponse},null,8,["response-time"]),y(lm,{"response-type":"NRT","response-time":e.nextResponse},null,8,["response-time"]),y(lm,{"response-type":"RT","response-time":e.resolutionTime},null,8,["response-time"])])]),actions:K(()=>[re(y(oe,{faded:"",ruby:"",xs:"",icon:"i-lucide-trash-2","is-loading":e.isLoading,onClick:o[0]||(o[0]=i=>n("delete"))},null,8,["is-loading"]),[[a,s.$t("SLA.FORM.DELETE"),void 0,{top:!0}]])]),_:1},8,["title","description"])}}},cde={class:"w-full min-h-[12rem] relative"},ude={class:"w-full space-y-3"},dde={class:"absolute inset-0 flex flex-col items-center justify-center w-full h-full bg-gradient-to-t from-white dark:from-slate-900 to-transparent"},WS={__name:"BaseEmptyState",setup(e){return(t,n)=>(p(),v("div",cde,[h("div",ude,[y(mf,{class:"opacity-25 dark:opacity-20","sla-name":t.$t("SLA.LIST.EMPTY.TITLE_1"),description:t.$t("SLA.LIST.EMPTY.DESC_1"),"first-response":"20m","next-response":"1h","resolution-time":"24h","has-business-hours":""},null,8,["sla-name","description"]),y(mf,{class:"opacity-25 dark:opacity-20","sla-name":t.$t("SLA.LIST.EMPTY.TITLE_2"),description:t.$t("SLA.LIST.EMPTY.DESC_2"),"first-response":"2h","next-response":"4h","resolution-time":"4d","has-business-hours":""},null,8,["sla-name","description"])]),h("div",dde,[We(t.$slots,"default")])]))}},pde={class:"max-w-xs text-sm font-medium text-center"},hde={__name:"SLAEmptyState",emits:["primaryAction"],setup(e,{emit:t}){const n=t,s=()=>n("primaryAction");return(o,a)=>(p(),$(WS,null,{default:K(()=>[h("p",pde,A(o.$t("SLA.LIST.404")),1),y(oe,{icon:"i-lucide-plus",class:"mt-4",label:o.$t("SLA.ADD_ACTION_LONG"),onClick:s},null,8,["label"])]),_:1}))}},mde={__name:"SLAHeader",props:{showActions:{type:Boolean,default:!0}},emits:["add"],setup(e){return(t,n)=>(p(),$(Cs,{title:t.$t("SLA.HEADER"),description:t.$t("SLA.DESCRIPTION"),"link-text":t.$t("SLA.LEARN_MORE"),"feature-name":"sla"},vo({_:2},[e.showActions?{name:"actions",fn:K(()=>[y(oe,{label:t.$t("SLA.ADD_ACTION"),icon:"i-lucide-circle-plus",onClick:n[0]||(n[0]=s=>t.$emit("add"))},null,8,["label"])]),key:"0"}:void 0]),1032,["title","description","link-text"]))}},fde={class:"flex items-center sm:rtl:!border-l-0 sm:rtl:!border-r sm:rtl:border-solid sm:rtl:border-slate-75 sm:rtl:dark:border-slate-700/50 gap-1.5 w-fit sm:w-full sm:gap-0 sm:justify-between"},gde={__name:"SLAListItemLoading",setup(e){return(t,n)=>(p(),$(HS,{class:"opacity-50"},{title:K(()=>n[0]||(n[0]=[h("div",{class:"w-24 h-[26px] rounded-md bg-slate-50 dark:bg-slate-700 animate-pulse"},null,-1)])),description:K(()=>n[1]||(n[1]=[h("div",{class:"w-64 h-4 mb-0.5 rounded-md bg-slate-50 dark:bg-slate-700 animate-pulse"},null,-1),h("div",{class:"w-48 h-4 rounded-md bg-slate-50 dark:bg-slate-700 animate-pulse"},null,-1)])),label:K(()=>n[2]||(n[2]=[h("div",{class:"w-32 h-[26px] bg-slate-50 dark:bg-slate-700 animate-pulse rounded-md"},null,-1)])),rightSection:K(()=>[h("div",fde,[(p(),v(pe,null,Ne(3,s=>h("div",{key:s,class:"flex justify-end w-1/3 h-full px-4"},n[3]||(n[3]=[h("div",{class:"w-32 h-full rounded-md bg-slate-50 dark:bg-slate-700 animate-pulse"},null,-1)]))),64))])]),_:1}))}},_de={class:"flex flex-col max-w-md px-6 py-6 border shadow bg-n-solid-1 rounded-xl border-n-weak"},vde={class:"flex items-center w-full gap-2 mb-4"},bde={class:"flex items-center justify-center w-6 h-6 rounded-full bg-n-solid-blue"},Ede={class:"text-base font-medium text-n-slate-12"},Tde={class:"text-sm font-normal text-n-slate-11"},yde={class:"text-sm font-normal text-n-slate-11"},Sde={key:0},Ade={class:"mt-2 text-xs tracking-tight text-center text-n-slate-11"},Ide={key:1,href:"/super_admin",class:"block w-full"},Jg={__name:"BasePaywallModal",props:{featurePrefix:{type:String,required:!0},i18nKey:{type:String,required:!0},isOnChatwootCloud:{type:Boolean,default:!1},isSuperAdmin:{type:Boolean,default:!1}},emits:["upgrade"],setup(e,{emit:t}){const n=t;return(s,o)=>{const a=qe("dompurify-html");return p(),v("div",_de,[h("div",vde,[h("span",bde,[y(Rt,{class:"flex-shrink-0 text-n-brand size-[14px]",icon:"i-lucide-lock-keyhole"})]),h("span",Ede,A(s.$t(`${e.featurePrefix}.PAYWALL.TITLE`)),1)]),re(h("p",Tde,null,512),[[a,s.$t(`${e.featurePrefix}.${e.i18nKey}.AVAILABLE_ON`)]]),h("p",yde,[Re(A(s.$t(`${e.featurePrefix}.${e.i18nKey}.UPGRADE_PROMPT`))+" ",1),!e.isOnChatwootCloud&&!e.isSuperAdmin?(p(),v("span",Sde,A(s.$t(`${e.featurePrefix}.ENTERPRISE_PAYWALL.ASK_ADMIN`)),1)):w("",!0)]),e.isOnChatwootCloud?(p(),v(pe,{key:0},[y(oe,{blue:"",solid:"",md:"",onClick:o[0]||(o[0]=i=>n("upgrade"))},{default:K(()=>[Re(A(s.$t(`${e.featurePrefix}.PAYWALL.UPGRADE_NOW`)),1)]),_:1}),h("span",Ade,A(s.$t(`${e.featurePrefix}.PAYWALL.CANCEL_ANYTIME`)),1)],64)):e.isSuperAdmin?(p(),v("a",Ide,[y(oe,{solid:"",blue:"",md:"",class:"w-full"},{default:K(()=>[Re(A(s.$t(`${e.featurePrefix}.PAYWALL.UPGRADE_NOW`)),1)]),_:1})])):w("",!0)])}}},Cde={__name:"SLAPaywallEnterprise",props:{isSuperAdmin:{type:Boolean,default:!1},isOnChatwootCloud:{type:Boolean,default:!1}},emits:["upgrade"],setup(e,{emit:t}){const n=e,s=t,o=n.isOnChatwootCloud?"PAYWALL":"ENTERPRISE_PAYWALL";return(a,i)=>(p(),$(WS,null,{default:K(()=>[y(Jg,{"feature-prefix":"SLA","i18n-key":N(o),"is-on-chatwoot-cloud":e.isOnChatwootCloud,"is-super-admin":e.isSuperAdmin,onUpgrade:i[0]||(i[0]=r=>s("upgrade"))},null,8,["i18n-key","is-on-chatwoot-cloud","is-super-admin"])]),_:1}))}},Ode={components:{AddSLA:que,SettingsLayout:Da,SLAEmptyState:hde,SLAHeader:mde,SLAListItem:mf,SLAListItemLoading:gde,SLAPaywallEnterprise:Cde},data(){return{loading:{},showAddPopup:!1,showDeleteConfirmationPopup:!1,selectedResponse:{}}},computed:{...lt({isOnChatwootCloud:"globalConfig/isOnChatwootCloud",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",records:"sla/getSLA",currentUser:"getCurrentUser",accountId:"getCurrentAccountId",uiFlags:"sla/getUIFlags"}),deleteConfirmText(){return this.$t("SLA.DELETE.CONFIRM.YES")},deleteRejectText(){return this.$t("SLA.DELETE.CONFIRM.NO")},deleteMessage(){return` ${this.selectedResponse.name}`},isBehindAPaywall(){return!this.isFeatureEnabledonAccount(this.accountId,"sla")},isSuperAdmin(){return this.currentUser.type==="SuperAdmin"}},mounted(){this.$store.dispatch("sla/get")},methods:{openAddPopup(){this.isBehindAPaywall||(this.showAddPopup=!0)},hideAddPopup(){this.showAddPopup=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedResponse=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},confirmDeletion(){this.loading[this.selectedResponse.id]=!0,this.closeDeletePopup(),this.deleteSla(this.selectedResponse.id)},deleteSla(e){this.$store.dispatch("sla/delete",e).then(()=>{ce(this.$t("SLA.DELETE.API.SUCCESS_MESSAGE"))}).catch(()=>{ce(this.$t("SLA.DELETE.API.ERROR_MESSAGE"))}).finally(()=>{this.loading[this.selectedResponse.id]=!1})},displayTime(e){const{time:t,unit:n}=E0(e,{minute:"m",hour:"h",day:"d"});return t?`${t}${n}`:"-"},onClickCTA(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})}}},Nde={key:2,class:"flex flex-col w-full h-full gap-3"};function wde(e,t,n,s,o,a){const i=M("SLAHeader"),r=M("SLAListItemLoading"),l=M("SLAPaywallEnterprise"),c=M("SLAEmptyState"),u=M("SLAListItem"),d=M("AddSLA"),m=M("woot-modal"),f=M("woot-delete-modal"),g=M("SettingsLayout");return p(),$(g,{"is-loading":e.uiFlags.isFetching,"loading-message":e.$t("SLA.LOADING")},{header:K(()=>[y(i,{"show-actions":e.records.length>0,onAdd:a.openAddPopup},null,8,["show-actions","onAdd"])]),loading:K(()=>[(p(),v(pe,null,Ne(2,T=>y(r,{key:T,class:"mb-3"})),64))]),body:K(()=>[a.isBehindAPaywall?(p(),$(l,{key:0,"is-super-admin":a.isSuperAdmin,"is-on-chatwoot-cloud":e.isOnChatwootCloud,onUpgrade:a.onClickCTA},null,8,["is-super-admin","is-on-chatwoot-cloud","onUpgrade"])):e.records.length?(p(),v("div",Nde,[(p(!0),v(pe,null,Ne(e.records,T=>(p(),$(u,{key:T.title,"sla-name":T.name,description:T.description,"first-response":a.displayTime(T.first_response_time_threshold),"next-response":a.displayTime(T.next_response_time_threshold),"resolution-time":a.displayTime(T.resolution_time_threshold),"has-business-hours":T.only_during_business_hours,"is-loading":o.loading[T.id],onDelete:S=>a.openDeletePopup(T)},null,8,["sla-name","description","first-response","next-response","resolution-time","has-business-hours","is-loading","onDelete"]))),128))])):(p(),$(c,{key:1,onPrimaryAction:a.openAddPopup},null,8,["onPrimaryAction"])),y(m,{show:o.showAddPopup,"onUpdate:show":t[0]||(t[0]=T=>o.showAddPopup=T),"on-close":a.hideAddPopup},{default:K(()=>[y(d,{onClose:a.hideAddPopup},null,8,["onClose"])]),_:1},8,["show","on-close"]),y(f,{show:o.showDeleteConfirmationPopup,"onUpdate:show":t[1]||(t[1]=T=>o.showDeleteConfirmationPopup=T),"on-close":a.closeDeletePopup,"on-confirm":a.confirmDeletion,title:e.$t("SLA.DELETE.CONFIRM.TITLE"),message:e.$t("SLA.DELETE.CONFIRM.MESSAGE"),"message-value":a.deleteMessage,"confirm-text":a.deleteConfirmText,"reject-text":a.deleteRejectText},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message"])}const Rde=Ae(Ode,[["render",wde]]),K1={featureFlag:_t.SLA,permissions:["administrator"],installationTypes:[is.CLOUD,is.ENTERPRISE]},xde={routes:[{path:At("accounts/:accountId/settings/sla"),component:ea,props:{},children:[{path:"",name:"sla_wrapper",meta:K1,redirect:e=>({name:"sla_list",params:e.params})},{path:"list",name:"sla_list",meta:K1,component:Rde}]}]},$de={class:"flex-1 overflow-auto"},Mde={class:"mt-6 flex-1 text-slate-700 dark:text-slate-300"},Lde={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},kde={key:2,class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},Dde={class:"divide-y divide-slate-50 dark:divide-slate-800"},Pde={class:"py-4 ltr:pr-4 rtl:pl-4"},Bde={class:"block font-medium capitalize"},Fde={class:"mb-0"},Ude={class:"py-4 flex justify-end gap-1"},Gde={__name:"Index",setup(e){const t=pt(),{t:n}=Me(),s=nn(),o=C(()=>s["teams/getTeams"].value),a=C(()=>s["teams/getUIFlags"].value),{isAdmin:i}=ka(),r=X({}),l=async({id:E})=>{try{r.value[E]=!0,await t.dispatch("teams/delete",E),ce(n("TEAMS_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{ce(n("TEAMS_SETTINGS.DELETE.API.ERROR_MESSAGE"))}finally{r.value[E]=!1}},c=X(!1),u=X({}),d=E=>{c.value=!0,u.value=E},m=()=>{c.value=!1,u.value={}},f=()=>{l(u.value),m()},g=C(()=>`${n("TEAMS_SETTINGS.DELETE.CONFIRM.YES")} ${u.value.name}`),T=C(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.NO")),S=C(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.TITLE",{teamName:u.value.name})),_=C(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.PLACE_HOLDER",{teamName:u.value.name}));return(E,b)=>{const I=M("router-link"),R=M("woot-loading-state"),O=M("woot-confirm-delete-modal"),x=qe("tooltip");return p(),v("div",$de,[y(Cs,{title:E.$t("TEAMS_SETTINGS.HEADER"),description:E.$t("TEAMS_SETTINGS.DESCRIPTION"),"link-text":E.$t("TEAMS_SETTINGS.LEARN_MORE"),"feature-name":"team_management"},{actions:K(()=>[N(i)?(p(),$(I,{key:0,to:{name:"settings_teams_new"}},{default:K(()=>[y(oe,{icon:"i-lucide-circle-plus",label:E.$t("TEAMS_SETTINGS.NEW_TEAM")},null,8,["label"])]),_:1})):w("",!0)]),_:1},8,["title","description","link-text"]),h("div",Mde,[a.value.isFetching?(p(),$(R,{key:0,message:E.$t("TEAMS_SETTINGS.LOADING")},null,8,["message"])):o.value.length?(p(),v("table",kde,[h("tbody",Dde,[(p(!0),v(pe,null,Ne(o.value,L=>(p(),v("tr",{key:L.id},[h("td",Pde,[h("span",Bde,A(L.name),1),h("p",Fde,A(L.description),1)]),h("td",Ude,[y(I,{to:{name:"settings_teams_edit",params:{teamId:L.id}}},{default:K(()=>[N(i)?re((p(),$(oe,{key:0,icon:"i-lucide-settings",slate:"",xs:"",faded:""},null,512)),[[x,E.$t("TEAMS_SETTINGS.LIST.EDIT_TEAM"),void 0,{top:!0}]]):w("",!0)]),_:2},1032,["to"]),N(i)?re((p(),$(oe,{key:0,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":r.value[L.id],onClick:F=>d(L)},null,8,["is-loading","onClick"])),[[x,E.$t("TEAMS_SETTINGS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):w("",!0)])]))),128))])])):(p(),v("p",Lde,A(E.$t("TEAMS_SETTINGS.LIST.404")),1))]),c.value?(p(),$(O,{key:0,show:c.value,"onUpdate:show":b[0]||(b[0]=L=>c.value=L),title:S.value,message:E.$t("TEAMS_SETTINGS.DELETE.CONFIRM.MESSAGE"),"confirm-text":g.value,"reject-text":T.value,"confirm-value":u.value.name,"confirm-place-holder-text":_.value,onOnConfirm:f,onOnClose:m},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):w("",!0)])}}},Vde={computed:{items(){const e=["WIZARD_CREATE","WIZARD_ADD_AGENTS","WIZARD_FINISH"],t={WIZARD_CREATE:"settings_teams_new",WIZARD_ADD_AGENTS:"settings_teams_add_agents",WIZARD_FINISH:"settings_teams_finish"};return e.map(n=>({title:this.$t(`TEAMS_SETTINGS.CREATE_FLOW.${n}.TITLE`),body:this.$t(`TEAMS_SETTINGS.CREATE_FLOW.${n}.BODY`),route:t[n]}))}}},Hde={class:"grid grid-cols-1 md:grid-cols-8 overflow-auto h-full px-5 flex-1"};function Wde(e,t,n,s,o,a){const i=M("woot-wizard"),r=M("router-view");return p(),v("div",Hde,[y(i,{class:"hidden md:block col-span-2",items:a.items},null,8,["items"]),y(r)])}const zde=Ae(Vde,[["render",Wde]]),jde={computed:{items(){const e={EDIT_WIZARD_DETAILS:"settings_teams_edit",EDIT_WIZARD_AGENTS:"settings_teams_edit_members",EDIT_WIZARD_FINISH:"settings_teams_edit_finish"};return["EDIT_WIZARD_DETAILS","EDIT_WIZARD_AGENTS","EDIT_WIZARD_FINISH"].map(n=>({title:this.$t(`TEAMS_SETTINGS.EDIT_FLOW.${n}.TITLE`),body:this.$t(`TEAMS_SETTINGS.EDIT_FLOW.${n}.BODY`),route:e[n]}))}}},Kde={class:"grid grid-cols-1 md:grid-cols-8 overflow-auto h-full px-5 flex-1"};function Yde(e,t,n,s,o,a){const i=M("woot-wizard"),r=M("router-view");return p(),v("div",Kde,[y(i,{class:"hidden md:block col-span-2",items:a.items},null,8,["items"]),y(r)])}const Xde=Ae(jde,[["render",Yde]]),qde={title:{required:Ye,minLength:Qt(2)},description:{},showOnSidebar:{}},Zde={components:{NextButton:oe,FormInput:PO},props:{onSubmit:{type:Function,default:()=>{}},submitInProgress:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},submitButtonText:{type:String,default:""}},setup(e){const t=e.formData||{},{description:n="",name:s="",allow_auto_assign:o=!0}=t,a=ls({description:n,title:s,allowAutoAssign:o}),r=bt(qde,a);return{state:a,v$:r}},methods:{handleSubmit(){this.v$.$touch(),!this.v$.$invalid&&this.onSubmit({description:this.state.description,name:this.state.title,allow_auto_assign:this.state.allowAutoAssign})}}},Qde={class:"flex-shrink-0 w-full"},Jde={class:"w-full flex items-center gap-2"},epe={for:"conversation_creation"},tpe={class:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},npe={class:"w-full"};function spe(e,t,n,s,o,a){const i=M("FormInput"),r=M("NextButton");return p(),v("div",Qde,[h("form",{class:"mx-0 grid gap-4",onSubmit:t[3]||(t[3]=Fe((...l)=>a.handleSubmit&&a.handleSubmit(...l),["prevent"]))},[y(i,{modelValue:s.state.title,"onUpdate:modelValue":t[0]||(t[0]=l=>s.state.title=l),name:"title",spacing:"compact",label:e.$t("TEAMS_SETTINGS.FORM.NAME.LABEL"),placeholder:e.$t("TEAMS_SETTINGS.FORM.NAME.PLACEHOLDER"),"has-error":s.v$.title.$error,"error-message":s.v$.title.$error?s.v$.title.$errors[0].$message:"",onBlur:s.v$.title.$touch},null,8,["modelValue","label","placeholder","has-error","error-message","onBlur"]),y(i,{modelValue:s.state.description,"onUpdate:modelValue":t[1]||(t[1]=l=>s.state.description=l),name:"description",spacing:"compact",label:e.$t("TEAMS_SETTINGS.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("TEAMS_SETTINGS.FORM.DESCRIPTION.PLACEHOLDER"),"has-error":s.v$.description.$error,"error-message":s.v$.description.$error?s.v$.description.$errors[0].$message:"",onBlur:s.v$.description.$touch},null,8,["modelValue","label","placeholder","has-error","error-message","onBlur"]),h("div",Jde,[re(h("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.state.allowAutoAssign=l),type:"checkbox",value:!0},null,512),[[pn,s.state.allowAutoAssign]]),h("label",epe,A(e.$t("TEAMS_SETTINGS.FORM.AUTO_ASSIGN.LABEL")),1)]),h("div",tpe,[h("div",npe,[y(r,{type:"submit",label:n.submitButtonText,disabled:s.v$.title.$invalid||n.submitInProgress,"is-loading":n.submitInProgress},null,8,["label","disabled","is-loading"])])])],32)])}const zS=Ae(Zde,[["render",spe]]),ape={components:{TeamForm:zS,PageHeader:Ms},data(){return{enabledFeatures:{}}},methods:{async createTeam(e){try{const t=await this.$store.dispatch("teams/create",{...e});Wn.replace({name:"settings_teams_add_agents",params:{page:"new",teamId:t.id}})}catch{ce(this.$t("TEAMS_SETTINGS.TEAM_FORM.ERROR_MESSAGE"))}}}},ope={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},ipe={class:"flex flex-wrap"};function rpe(e,t,n,s,o,a){const i=M("PageHeader"),r=M("TeamForm");return p(),v("div",ope,[y(i,{"header-title":e.$t("TEAMS_SETTINGS.CREATE_FLOW.CREATE.TITLE"),"header-content":e.$t("TEAMS_SETTINGS.CREATE_FLOW.CREATE.DESC")},null,8,["header-title","header-content"]),h("div",ipe,[y(r,{"on-submit":a.createTeam,"submit-in-progress":!1,"submit-button-text":e.$t("TEAMS_SETTINGS.FORM.SUBMIT_CREATE")},null,8,["on-submit","submit-button-text"])])])}const lpe=Ae(ape,[["render",rpe]]),cpe={components:{TeamForm:zS,PageHeader:Ms,Spinner:bs},data(){return{enabledFeatures:{}}},computed:{teamData(){const{teamId:e}=this.$route.params;return this.$store.getters["teams/getTeam"](e)},showTeamForm(){const{id:e}=this.teamData;return e&&!this.uiFlags.isFetching},...lt({uiFlags:"teams/getUIFlags"})},methods:{async updateTeam(e){try{const{teamId:t}=this.$route.params;await this.$store.dispatch("teams/update",{id:t,...e}),Wn.replace({name:"settings_teams_edit_members",params:{page:"edit",teamId:t}})}catch{ce(this.$t("TEAMS_SETTINGS.TEAM_FORM.ERROR_MESSAGE"))}}}},upe={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},dpe={class:"flex flex-wrap"};function ppe(e,t,n,s,o,a){const i=M("PageHeader"),r=M("TeamForm"),l=M("Spinner");return p(),v("div",upe,[y(i,{"header-title":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.TITLE"),"header-content":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.DESC")},null,8,["header-title","header-content"]),h("div",dpe,[a.showTeamForm?(p(),$(r,{key:0,"on-submit":a.updateTeam,"submit-in-progress":!1,"submit-button-text":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.BUTTON_TEXT"),"form-data":a.teamData},null,8,["on-submit","submit-button-text","form-data"])):(p(),$(l,{key:1}))])])}const hpe=Ae(cpe,[["render",ppe]]),mpe={components:{NextButton:oe,Thumbnail:Hn},props:{agentList:{type:Array,default:()=>[]},selectedAgents:{type:Array,default:()=>[]},updateSelectedAgents:{type:Function,default:()=>{}},isWorking:{type:Boolean,default:!1},submitButtonText:{type:String,default:""}},data(){return{}},computed:{selectedAgentCount(){return this.selectedAgents.length},allAgentsSelected(){return this.selectedAgents.length===this.agentList.length},disableSubmitButton(){return this.selectedAgentCount===0}},methods:{isAgentSelected(e){return this.selectedAgents.includes(e)},handleSelectAgent(e){const t=this.isAgentSelected(e);let n=[];t?n=this.selectedAgents.filter(s=>s!==e):n=[...this.selectedAgents,e],this.updateSelectedAgents(n)},selectAllAgents(){const e=this.agentList.map(t=>t.id);this.updateSelectedAgents(e)},agentRowClass(e){return{"is-active":this.isAgentSelected(e)}}}},fpe={class:"woot-table"},gpe={class:"ltr:pl-2.5 rtl:pr-2.5"},_pe={class:"flex items-center"},vpe=["checked","title"],bpe={class:"text-slate-800 dark:text-slate-100 ltr:pl-2.5 rtl:pr-2.5"},Epe={class:"text-slate-800 dark:text-slate-100 ltr:pl-2.5 rtl:pr-2.5"},Tpe={class:"w-12"},ype={class:"flex items-center"},Spe=["checked","onClick"],Ape={class:"flex items-center gap-2"},Ipe={class:"text-base mb-0 text-slate-800 dark:text-slate-100"},Cpe={class:"flex items-center justify-between mt-2"};function Ope(e,t,n,s,o,a){const i=M("Thumbnail"),r=M("NextButton");return p(),v("div",null,[t[1]||(t[1]=h("div",{class:"add-agents__header"},null,-1)),h("table",fpe,[h("thead",null,[h("tr",null,[h("td",gpe,[h("div",_pe,[h("input",{name:"select-all-agents",type:"checkbox",checked:a.allAgentsSelected?"checked":"",title:e.$t("TEAMS_SETTINGS.AGENTS.SELECT_ALL"),onClick:t[0]||(t[0]=Fe((...l)=>a.selectAllAgents&&a.selectAllAgents(...l),["self"]))},null,8,vpe)])]),h("td",bpe,A(e.$t("TEAMS_SETTINGS.AGENTS.AGENT")),1),h("td",Epe,A(e.$t("TEAMS_SETTINGS.AGENTS.EMAIL")),1)])]),h("tbody",null,[(p(!0),v(pe,null,Ne(n.agentList,l=>(p(),v("tr",{key:l.id,class:se(a.agentRowClass(l.id))},[h("td",Tpe,[h("div",ype,[h("input",{type:"checkbox",checked:a.isAgentSelected(l.id),onClick:Fe(()=>a.handleSelectAgent(l.id),["self"])},null,8,Spe)])]),h("td",null,[h("div",Ape,[y(i,{src:l.thumbnail,size:"24px",username:l.name,status:l.availability_status},null,8,["src","username","status"]),h("h4",Ipe,A(l.name),1)])]),h("td",null,A(l.email||"---"),1)],2))),128))])]),h("div",Cpe,[h("p",null,A(e.$t("TEAMS_SETTINGS.AGENTS.SELECTED_COUNT",{selected:n.selectedAgents.length,total:n.agentList.length})),1),y(r,{type:"submit",label:n.submitButtonText,disabled:a.disableSubmitButton,"is-loading":n.isWorking},null,8,["label","disabled","is-loading"])])])}const jS=Ae(mpe,[["render",Ope],["__scopeId","data-v-0614bfc9"]]),Npe={components:{PageHeader:Ms,AgentSelector:jS},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:bt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...lt({agentList:"agents/getAgents"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.ADD.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)}},mounted(){this.$store.dispatch("agents/get")},methods:{updateSelectedAgents(e){this.v$.selectedAgents.$touch(),this.selectedAgents=[...e]},selectAllAgents(){this.selectedAgents=this.agentList.map(e=>e.id)},async addAgents(){this.isCreating=!0;const{teamId:e,selectedAgents:t}=this;try{await this.$store.dispatch("teamMembers/create",{teamId:e,agentsList:t}),Wn.replace({name:"settings_teams_finish",params:{page:"new",teamId:e}}),this.$store.dispatch("teams/get")}catch(n){ce(n.message)}this.isCreating=!1}}},wpe={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},Rpe={class:"w-full"},xpe={class:"w-full"},$pe={key:0},Mpe={class:"error-message"};function Lpe(e,t,n,s,o,a){const i=M("PageHeader"),r=M("AgentSelector");return p(),v("div",wpe,[h("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:t[0]||(t[0]=Fe((...l)=>a.addAgents&&a.addAgents(...l),["prevent"]))},[h("div",Rpe,[y(i,{"header-title":a.headerTitle,"header-content":e.$t("TEAMS_SETTINGS.ADD.DESC")},null,8,["header-title","header-content"])]),h("div",xpe,[s.v$.selectedAgents.$error?(p(),v("div",$pe,[h("p",Mpe,A(e.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):w("",!0),y(r,{"agent-list":e.agentList,"selected-agents":o.selectedAgents,"update-selected-agents":a.updateSelectedAgents,"is-working":o.isCreating,"submit-button-text":e.$t("TEAMS_SETTINGS.ADD.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])])],32)])}const kpe=Ae(Npe,[["render",Lpe]]),Dpe={components:{Spinner:bs,PageHeader:Ms,AgentSelector:jS},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:bt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...lt({agentList:"agents/getAgents",uiFlags:"teamMembers/getUIFlags"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)},teamMembers(){return this.$store.getters["teamMembers/getTeamMembers"](this.teamId)},showAgentsList(){const{id:e}=this.currentTeam;return e&&!this.uiFlags.isFetching}},async mounted(){const{teamId:e}=this.$route.params;this.$store.dispatch("agents/get");try{await this.$store.dispatch("teamMembers/get",{teamId:e});const t=this.teamMembers.map(n=>n.id);this.updateSelectedAgents(t)}catch{this.updateSelectedAgents([])}},methods:{updateSelectedAgents(e){this.v$.selectedAgents.$touch(),this.selectedAgents=[...e]},async addAgents(){this.isCreating=!0;const{teamId:e,selectedAgents:t}=this;try{await this.$store.dispatch("teamMembers/update",{teamId:e,agentsList:t}),Wn.replace({name:"settings_teams_edit_finish",params:{page:"edit",teamId:e}}),this.$store.dispatch("teams/get")}catch(n){ce(n.message)}this.isCreating=!1}}},Ppe={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},Bpe={class:"w-full"},Fpe={class:"w-full"},Upe={key:0},Gpe={class:"error-message"};function Vpe(e,t,n,s,o,a){const i=M("PageHeader"),r=M("AgentSelector"),l=M("Spinner");return p(),v("div",Ppe,[h("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:t[0]||(t[0]=Fe((...c)=>a.addAgents&&a.addAgents(...c),["prevent"]))},[h("div",Bpe,[y(i,{"header-title":a.headerTitle,"header-content":e.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.DESC")},null,8,["header-title","header-content"])]),h("div",Fpe,[s.v$.selectedAgents.$error?(p(),v("div",Upe,[h("p",Gpe,A(e.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):w("",!0),a.showAgentsList?(p(),$(r,{key:1,"agent-list":e.agentList,"selected-agents":o.selectedAgents,"update-selected-agents":a.updateSelectedAgents,"is-working":o.isCreating,"submit-button-text":e.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])):(p(),$(l,{key:2}))])],32)])}const Hpe=Ae(Dpe,[["render",Vpe]]),Wpe={components:{NextButton:oe,EmptyState:pr}},zpe={class:"border border-n-weak bg-n-solid-1 rounded-t-lg border-b-0 h-full w-full p-6 col-span-6 overflow-auto"},jpe={class:"w-full text-center"};function Kpe(e,t,n,s,o,a){const i=M("NextButton"),r=M("router-link"),l=M("EmptyState");return p(),v("div",zpe,[y(l,{title:e.$t("TEAMS_SETTINGS.FINISH.TITLE"),message:e.$t("TEAMS_SETTINGS.FINISH.MESSAGE"),"button-text":e.$t("TEAMS_SETTINGS.FINISH.BUTTON_TEXT")},{default:K(()=>[h("div",jpe,[y(r,{to:{name:"settings_teams_list"}},{default:K(()=>[y(i,{teal:"",label:e.$t("TEAMS_SETTINGS.FINISH.BUTTON_TEXT")},null,8,["label"])]),_:1})])]),_:1},8,["title","message","button-text"])])}const Y1=Ae(Wpe,[["render",Kpe]]),Ype={routes:[{path:At("accounts/:accountId/settings/teams"),component:ea,children:[{path:"",redirect:e=>({name:"settings_teams_list",params:e.params})},{path:"list",name:"settings_teams_list",component:Gde,meta:{featureFlag:_t.TEAM_MANAGEMENT,permissions:["administrator"]}}]},{path:At("accounts/:accountId/settings/teams"),component:Lc,props:()=>({headerTitle:"TEAMS_SETTINGS.HEADER",headerButtonText:"TEAMS_SETTINGS.NEW_TEAM",icon:"people-team",newButtonRoutes:["settings_teams_new"],showBackButton:!0}),children:[{path:"new",component:zde,children:[{path:"",name:"settings_teams_new",component:lpe,meta:{featureFlag:_t.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:":teamId/finish",name:"settings_teams_finish",component:Y1,meta:{featureFlag:_t.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:":teamId/agents",name:"settings_teams_add_agents",meta:{featureFlag:_t.TEAM_MANAGEMENT,permissions:["administrator"]},component:kpe}]},{path:":teamId/edit",component:Xde,children:[{path:"",name:"settings_teams_edit",component:hpe,meta:{featureFlag:_t.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:"agents",name:"settings_teams_edit_members",component:Hpe,meta:{featureFlag:_t.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:"finish",name:"settings_teams_edit_finish",meta:{featureFlag:_t.TEAM_MANAGEMENT,permissions:["administrator"]},component:Y1}]}]}]},Xpe={class:"flex flex-col h-auto overflow-auto"},qpe={class:"w-full"},Zpe=["placeholder"],Qpe={class:"w-full"},Jpe=["placeholder"],ehe={class:"w-full"},the={class:"flex flex-col gap-2.5 mb-4 mt-2"},nhe=["id","value"],she=["for"],ahe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"},ohe={__name:"CustomRoleModal",props:{mode:{type:String,default:"add",validator:e=>["add","edit"].includes(e)},selectedRole:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,o=pt(),{t:a}=Me(),i=X(""),r=X(""),l=X([]),c=X(null),u=ls({showLoading:!1,message:""}),d=C(()=>({name:{required:Ye,minLength:Qt(2)},description:{required:Ye},selectedPermissions:{required:Ye,minLength:Qt(1)}})),m=bt(d,{name:i,description:r,selectedPermissions:l}),f=()=>{i.value="",r.value="",l.value=[],m.value.$reset()},g=()=>{i.value=n.selectedRole.name||"",r.value=n.selectedRole.description||"",l.value=n.selectedRole.permissions||[]};ct(l,(R,O)=>{const x=R.includes(vl)&&!O.includes(vl),L=O.includes(vl)&&!R.includes(vl);x?l.value=[...new Set([...l.value,FO,UO])]:L&&(l.value=l.value.filter(F=>F!==vl))},{deep:!0}),dt(()=>{var R;n.mode==="edit"&&g(),(R=c.value)==null||R.focus()});const T=R=>n.mode==="edit"?`CUSTOM_ROLE.EDIT.${R}`:`CUSTOM_ROLE.ADD.${R}`,S=C(()=>a(T("TITLE"))),_=C(()=>a(T("DESC"))),E=C(()=>a(T("SUBMIT"))),b=async()=>{if(m.value.$touch(),!m.value.$invalid){u.showLoading=!0;try{const R={name:i.value,description:r.value,permissions:l.value};n.mode==="edit"?(await o.dispatch("customRole/updateCustomRole",{id:n.selectedRole.id,...R}),ce(a("CUSTOM_ROLE.EDIT.API.SUCCESS_MESSAGE"))):(await o.dispatch("customRole/createCustomRole",R),ce(a("CUSTOM_ROLE.ADD.API.SUCCESS_MESSAGE"))),f(),s("close")}catch(R){const O=(R==null?void 0:R.message)||a("CUSTOM_ROLE.FORM.API.ERROR_MESSAGE");ce(O)}finally{u.showLoading=!1}}},I=C(()=>m.value.$invalid||u.showLoading);return(R,O)=>{const x=M("woot-modal-header");return p(),v("div",Xpe,[y(x,{"header-title":S.value,"header-content":_.value},null,8,["header-title","header-content"]),h("form",{class:"flex flex-col w-full",onSubmit:Fe(b,["prevent"])},[h("div",qpe,[h("label",{class:se({error:N(m).name.$error})},[Re(A(R.$t("CUSTOM_ROLE.FORM.NAME.LABEL"))+" ",1),re(h("input",{ref_key:"nameInput",ref:c,"onUpdate:modelValue":O[0]||(O[0]=L=>i.value=L),type:"text",placeholder:R.$t("CUSTOM_ROLE.FORM.NAME.PLACEHOLDER"),onBlur:O[1]||(O[1]=(...L)=>N(m).name.$touch&&N(m).name.$touch(...L))},null,40,Zpe),[[mt,i.value,void 0,{trim:!0}]])],2)]),h("div",Qpe,[h("label",{class:se({error:N(m).description.$error})},[Re(A(R.$t("CUSTOM_ROLE.FORM.DESCRIPTION.LABEL"))+" ",1),re(h("textarea",{"onUpdate:modelValue":O[2]||(O[2]=L=>r.value=L),rows:3,placeholder:R.$t("CUSTOM_ROLE.FORM.DESCRIPTION.PLACEHOLDER"),onBlur:O[3]||(O[3]=(...L)=>N(m).description.$touch&&N(m).description.$touch(...L))},null,40,Jpe),[[mt,r.value]])],2)]),h("div",ehe,[h("label",{class:se({"text-red-500":N(m).selectedPermissions.$error})},A(R.$t("CUSTOM_ROLE.FORM.PERMISSIONS.LABEL")),3),h("div",the,[(p(!0),v(pe,null,Ne(N(BO),L=>(p(),v("div",{key:L,class:"flex items-center"},[re(h("input",{id:L,"onUpdate:modelValue":O[4]||(O[4]=F=>l.value=F),type:"checkbox",value:L,name:"permissions",class:"ltr:mr-2 rtl:ml-2"},null,8,nhe),[[pn,l.value]]),h("label",{for:L,class:"text-sm font-normal"},A(R.$t(`CUSTOM_ROLE.PERMISSIONS.${L.toUpperCase()}`)),9,she)]))),128))])]),h("div",ahe,[y(oe,{faded:"",slate:"",type:"reset",label:R.$t("CUSTOM_ROLE.FORM.CANCEL_BUTTON_TEXT"),onClick:O[5]||(O[5]=Fe(L=>s("close"),["prevent"]))},null,8,["label"]),y(oe,{type:"submit",label:E.value,disabled:I.value,"is-loading":u.showLoading},null,8,["label","disabled","is-loading"])])],32)])}}},ihe={class:"divide-y divide-n-weak text-n-slate-11"},rhe=["title"],lhe={class:"py-4 ltr:pr-4 rtl:pl-4 whitespace-normal align-baseline md:break-words"},che={class:"py-4 ltr:pr-4 rtl:pl-4 whitespace-normal align-baseline md:break-words"},uhe={class:"flex justify-end gap-1 py-4"},KS={__name:"CustomRoleTableBody",props:{roles:{type:Array,required:!0},loading:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(e,{emit:t}){const n=t,{t:s}=Me(),o=a=>a.permissions.map(i=>s($g("CUSTOM_ROLE.PERMISSIONS",i))).join(", ");return(a,i)=>{const r=qe("tooltip");return p(),v("tbody",ihe,[(p(!0),v(pe,null,Ne(e.roles,(l,c)=>(p(),v("tr",{key:c},[h("td",{class:"max-w-xs py-4 ltr:pr-4 rtl:pl-4 font-medium truncate align-baseline",title:l.name},A(l.name),9,rhe),h("td",lhe,A(l.description),1),h("td",che,A(o(l)),1),h("td",uhe,[re(y(oe,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:u=>n("edit",l)},null,8,["onClick"]),[[r,a.$t("CUSTOM_ROLE.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),re(y(oe,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":e.loading[l.id],onClick:u=>n("delete",l)},null,8,["is-loading","onClick"]),[[r,a.$t("CUSTOM_ROLE.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])}}},dhe={class:"w-full min-h-[12rem] relative"},phe={class:"w-full space-y-3 text-sm"},hhe={class:"opacity-30 dark:opacity-30"},mhe={class:"mb-0"},fhe={class:"absolute inset-0 flex flex-col items-center justify-center w-full h-full bg-gradient-to-t from-white dark:from-slate-900 to-transparent"},ghe={__name:"CustomRolePaywall",setup(e){const t=[{name:"All Permissions",description:"All permissions",permissions:["conversation_manage","conversation_participating_manage","conversation_unassigned_manage","contact_manage","report_manage","knowledge_base_manage"]},{name:"Conversation Permissions",description:"Conversation permissions",permissions:["conversation_manage","conversation_participating_manage","conversation_unassigned_manage"]},{name:"Contact Permissions",description:"Contact permissions",permissions:["contact_manage"]},{name:"Report Permissions",description:"Report permissions",permissions:["report_manage"]}],n=xn(),s=Oe("globalConfig/isOnChatwootCloud"),o=Oe("getCurrentUser"),a=Oe("getCurrentAccountId"),i=C(()=>o.value.type==="SuperAdmin"),r=C(()=>s.value?"PAYWALL":"ENTERPRISE_PAYWALL"),l=()=>{n.push({name:"billing_settings_index",params:{accountId:a.value}})},{t:c}=Me(),u=C(()=>[c("CUSTOM_ROLE.LIST.TABLE_HEADER.NAME"),c("CUSTOM_ROLE.LIST.TABLE_HEADER.DESCRIPTION"),c("CUSTOM_ROLE.LIST.TABLE_HEADER.PERMISSIONS"),c("CUSTOM_ROLE.LIST.TABLE_HEADER.ACTIONS")]);return(d,m)=>(p(),v("div",dhe,[h("div",phe,[h("thead",hhe,[(p(!0),v(pe,null,Ne(u.value,f=>(p(),v("th",{key:f,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-slate-700 dark:text-slate-300"},[h("span",mhe,A(f),1)]))),128))]),y(KS,{class:"opacity-25 dark:opacity-20",roles:t,loading:{}})]),h("div",fhe,[y(Jg,{"feature-prefix":"CUSTOM_ROLE","i18n-key":r.value,"is-on-chatwoot-cloud":N(s),"is-super-admin":i.value,onUpgrade:l},null,8,["i18n-key","is-on-chatwoot-cloud","is-super-admin"])])]))}},_he={key:1,class:"min-w-full overflow-x-auto divide-y divide-slate-75 dark:divide-slate-700"},vhe={class:"mb-0"},bhe={__name:"Index",setup(e){const t=pt(),{t:n}=Me(),s=X(!1),o=X("add"),a=X(null),i=X({}),r=X(!1),l=X({}),c=Oe("customRole/getCustomRoles"),u=Oe("customRole/getUIFlags"),d=C(()=>`${n("CUSTOM_ROLE.DELETE.CONFIRM.YES")} ${l.value.name}`),m=C(()=>`${n("CUSTOM_ROLE.DELETE.CONFIRM.NO")} ${l.value.name}`),f=C(()=>` ${l.value.name} ? `),g=Oe("accounts/isFeatureEnabledonAccount"),T=Oe("getCurrentAccountId"),S=C(()=>!g.value(T.value,"custom_roles")),_=async()=>{try{await t.dispatch("customRole/getCustomRole")}catch{}};dt(()=>{_()});const E=C(()=>[n("CUSTOM_ROLE.LIST.TABLE_HEADER.NAME"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.DESCRIPTION"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.PERMISSIONS"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.ACTIONS")]),b=V=>{i.value[l.value.id]=!1,l.value={},ce(V)},I=()=>{S.value||(o.value="add",a.value=null,s.value=!0)},R=V=>{o.value="edit",a.value=V,s.value=!0},O=()=>{a.value=null,s.value=!1},x=V=>{r.value=!0,l.value=V},L=()=>{r.value=!1},F=async V=>{try{await t.dispatch("customRole/deleteCustomRole",V),b(n("CUSTOM_ROLE.DELETE.API.SUCCESS_MESSAGE"))}catch(B){const P=(B==null?void 0:B.message)||n("CUSTOM_ROLE.DELETE.API.ERROR_MESSAGE");b(P)}},D=()=>{i[l.value.id]=!0,L(),F(l.value.id)};return(V,B)=>{const P=M("woot-modal"),k=M("woot-delete-modal");return p(),$(Da,{"is-loading":N(u).fetchingList,"loading-message":V.$t("CUSTOM_ROLE.LOADING"),"no-records-found":!N(c).length&&!S.value,"no-records-message":V.$t("CUSTOM_ROLE.LIST.404")},{header:K(()=>[y(Cs,{title:V.$t("CUSTOM_ROLE.HEADER"),description:V.$t("CUSTOM_ROLE.DESCRIPTION"),"link-text":V.$t("CUSTOM_ROLE.LEARN_MORE"),"feature-name":"canned_responses"},{actions:K(()=>[y(oe,{icon:"i-lucide-circle-plus",label:V.$t("CUSTOM_ROLE.HEADER_BTN_TXT"),disabled:S.value,onClick:I},null,8,["label","disabled"])]),_:1},8,["title","description","link-text"])]),body:K(()=>[S.value?(p(),$(ghe,{key:0})):(p(),v("table",_he,[h("thead",null,[(p(!0),v(pe,null,Ne(E.value,U=>(p(),v("th",{key:U,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-slate-700 dark:text-slate-300"},[h("span",vhe,A(U),1)]))),128))]),y(KS,{roles:N(c),loading:i.value,onEdit:R,onDelete:x},null,8,["roles","loading"])]))]),default:K(()=>[y(P,{show:s.value,"onUpdate:show":B[0]||(B[0]=U=>s.value=U),"on-close":O},{default:K(()=>[y(ohe,{mode:o.value,"selected-role":a.value,onClose:O},null,8,["mode","selected-role"])]),_:1},8,["show"]),y(k,{show:r.value,"onUpdate:show":B[1]||(B[1]=U=>r.value=U),"on-close":L,"on-confirm":D,title:V.$t("CUSTOM_ROLE.DELETE.CONFIRM.TITLE"),message:V.$t("CUSTOM_ROLE.DELETE.CONFIRM.MESSAGE"),"message-value":f.value,"confirm-text":d.value,"reject-text":m.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},Ehe={routes:[{path:At("accounts/:accountId/settings/custom-roles"),component:ea,children:[{path:"",redirect:"list"},{path:"list",name:"custom_roles_list",meta:{featureFlag:_t.CUSTOM_ROLES,installationTypes:[is.CLOUD,is.ENTERPRISE],permissions:["administrator"]},component:bhe}]}]},The={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-white dark:bg-slate-900"},yhe={__name:"Wrapper",props:{keepAlive:{type:Boolean,default:!0}},setup(e){return(t,n)=>{const s=M("router-view");return p(),v("div",The,[y(s,null,{default:K(({Component:o})=>[e.keepAlive?(p(),$(Od,{key:0},[(p(),$(vs(o)))],1024)):(p(),$(vs(o),{key:1}))]),_:1})])}}},She={class:"flex flex-col gap-2"},Ahe={class:"text-sm font-medium text-ash-900"},Ihe={__name:"UserProfilePicture",props:{src:{type:String,default:""},name:{type:String,default:""}},emits:["change","delete"],setup(e,{emit:t}){const n=t,s=a=>{n("change",a)},o=()=>{n("delete")};return(a,i)=>(p(),v("div",She,[h("span",Ahe,A(a.$t("PROFILE_SETTINGS.FORM.PICTURE")),1),y(ts,{src:e.src||"",name:e.name||"",size:72,"allow-upload":"",onUpload:s,onDelete:o},null,8,["src","name"])]))}},Che={key:1,class:"text-sm font-medium truncate ltr:text-left rtl:text-right"},e_={__name:"Button",props:{variant:{type:String,default:"solid",validator:e=>["outline","ghost","solid"].includes(e)},size:{type:String,default:"large",validator:e=>["medium","large"].includes(e)},icon:{type:String,default:""},colorScheme:{type:String,default:"primary",validator:e=>["primary","secondary","danger"].includes(e)},trailingIcon:{type:Boolean,default:!1}},setup(e){const t=e,n=If(),s={outline:"outline outline-1 -outline-offset-1",ghost:"hover:text-600 active:text-600 focus:outline focus:outline-offset-1",solid:"hover:bg-700 active:bg-700 focus:outline focus:outline-offset-1 focus:outline-2"},o=C(()=>{if(n.disabled)return"bg-ash-200 text-ash-600 cursor-not-allowed";const l={primary:{outline:`${s.outline} outline-primary-400 hover:text-primary-600 active:text-primary-600`,ghost:`${s.ghost} focus:outline-primary-400`,solid:`${s.solid} bg-primary-600 text-white focus:outline-primary-400`},secondary:{outline:`${s.outline} outline-ash-400 hover:text-ash-900 active:text-ash-900 `,ghost:`${s.ghost} focus:outline-ash-400`,solid:`${s.solid} bg-ash-100 text-ash-900 focus:outline-ash-400`},danger:{outline:`${s.outline} outline-ruby-400 hover:text-ruby-600 active:text-ruby-600`,ghost:`${s.ghost} focus:outline-ruby-400`,solid:`${s.solid} bg-ruby-600 text-white focus:outline-ruby-400`}}[t.colorScheme];return l[t.variant]||l.solid}),a=C(()=>t.size==="medium"?"h-8 px-3 py-1.5 text-sm":"h-10 px-4 py-2.5 text"),i=C(()=>[o.value,a.value]);return(r,l)=>{const c=M("fluent-icon");return p(),v("button",fs({class:["inline-flex items-center gap-1 text-sm font-medium reset-base rounded-xl w-fit",i.value]},r.$attrs),[e.icon&&!e.trailingIcon?(p(),$(c,{key:0,size:"1.16em",icon:e.icon,class:"flex-shrink-0"},null,8,["icon"])):w("",!0),r.$slots.default?(p(),v("span",Che,[We(r.$slots,"default")])):w("",!0),e.icon&&e.trailingIcon?(p(),$(c,{key:2,size:"1.16em",icon:e.icon,class:"flex-shrink-0"},null,8,["icon"])):w("",!0)],16)}}},Ohe={components:{FormButton:e_},props:{name:{type:String,default:""},email:{type:String,default:""},displayName:{type:String,default:""},emailEnabled:{type:Boolean,default:!1}},emits:["updateUser"],setup(){return{v$:bt()}},data(){return{userName:this.name,userDisplayName:this.displayName,userEmail:this.email,inputStyles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem",marginBottom:"0.125rem"}}},validations:{userName:{required:Ye,minLength:Qt(1)},userDisplayName:{},userEmail:{required:Ye,email:Ii}},watch:{name:{handler(e){this.userName=e},immediate:!0},displayName:{handler(e){this.userDisplayName=e},immediate:!0},email:{handler(e){this.userEmail=e},immediate:!0}},methods:{async updateUser(){if(this.v$.$touch(),this.v$.$invalid){ce(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}this.$emit("updateUser",{name:this.userName,displayName:this.userDisplayName,email:this.userEmail})}}};function Nhe(e,t,n,s,o,a){const i=M("woot-input"),r=M("FormButton");return p(),v("form",{class:"flex flex-col gap-4",onSubmit:t[3]||(t[3]=Fe(l=>a.updateUser("profile"),["prevent"]))},[y(i,{modelValue:o.userName,"onUpdate:modelValue":t[0]||(t[0]=l=>o.userName=l),styles:o.inputStyles,class:se({error:s.v$.userName.$error}),label:e.$t("PROFILE_SETTINGS.FORM.NAME.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.NAME.PLACEHOLDER"),error:`${s.v$.userName.$error?e.$t("PROFILE_SETTINGS.FORM.NAME.ERROR"):""}`,onInput:s.v$.userName.$touch,onBlur:s.v$.userName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),y(i,{modelValue:o.userDisplayName,"onUpdate:modelValue":t[1]||(t[1]=l=>o.userDisplayName=l),styles:o.inputStyles,class:se({error:s.v$.userDisplayName.$error}),label:e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.PLACEHOLDER"),error:`${s.v$.userDisplayName.$error?e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.ERROR"):""}`,onInput:s.v$.userDisplayName.$touch,onBlur:s.v$.userDisplayName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),n.emailEnabled?(p(),$(i,{key:0,modelValue:o.userEmail,"onUpdate:modelValue":t[2]||(t[2]=l=>o.userEmail=l),styles:o.inputStyles,class:se({error:s.v$.userEmail.$error}),label:e.$t("PROFILE_SETTINGS.FORM.EMAIL.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.EMAIL.PLACEHOLDER"),error:`${s.v$.userEmail.$error?e.$t("PROFILE_SETTINGS.FORM.EMAIL.ERROR"):""}`,onInput:s.v$.userEmail.$touch,onBlur:s.v$.userEmail.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"])):w("",!0),y(r,{type:"submit","color-scheme":"primary",variant:"solid",size:"large"},{default:K(()=>[Re(A(e.$t("PROFILE_SETTINGS.BTN_TEXT")),1)]),_:1})],32)}const whe=Ae(Ohe,[["render",Nhe]]),Rhe={__name:"MessageSignature",props:{messageSignature:{type:String,default:""}},emits:["updateSignature"],setup(e,{emit:t}){const n=e,s=t,o=A7,a=X(n.messageSignature);ct(()=>n.messageSignature??"",r=>{a.value=r});const i=()=>{s("updateSignature",a.value)};return(r,l)=>(p(),v("form",{class:"flex flex-col gap-6",onSubmit:l[1]||(l[1]=Fe(c=>i(),["prevent"]))},[y(Ko,{id:"message-signature-input",modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=c=>a.value=c),class:"message-editor h-[10rem] !px-3","is-format-mode":"",placeholder:r.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE.PLACEHOLDER"),"enabled-menu-options":N(o),"enable-suggestions":!1,"show-image-resize-toolbar":""},null,8,["modelValue","placeholder","enabled-menu-options"]),y(e_,{type:"submit","color-scheme":"primary",variant:"solid",size:"large"},{default:K(()=>[Re(A(r.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.BTN_TEXT")),1)]),_:1})],32))}},xhe={components:{WithLabel:_i},props:{id:{type:String,default:""},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},name:{type:String,required:!0},icon:{type:String,default:""},label:{type:String,required:!0},modelValue:{type:String,default:""},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:modelValue"],methods:{onInput(e){this.$emit("update:modelValue",e.target.value)}}},$he=["id","selected","name"],Mhe={value:"",disabled:"",selected:"",class:"hidden"},Lhe=["value"];function khe(e,t,n,s,o,a){const i=M("WithLabel");return p(),$(i,{label:n.label,icon:n.icon,name:n.name,"has-error":n.hasError,"error-message":n.errorMessage},{default:K(()=>[h("select",{id:n.id,selected:n.modelValue,name:n.name,class:se([{"text-n-slate-9":!n.modelValue,"text-n-slate-12":n.modelValue,"pl-9":n.icon},"block w-full px-3 py-2 pr-6 mb-0 border-0 shadow-sm appearance-none rounded-xl select-caret leading-6"]),onInput:t[0]||(t[0]=(...r)=>a.onInput&&a.onInput(...r))},[h("option",Mhe,A(n.placeholder),1),We(e.$slots,"default",{},()=>[(p(!0),v(pe,null,Ne(n.options,r=>(p(),v("option",{key:r.value,value:r.value},A(r.label),9,Lhe))),128))],!0)],42,$he)]),_:3},8,["label","icon","name","has-error","error-message"])}const YS=Ae(xhe,[["render",khe],["__scopeId","data-v-12a2a860"]]),Dhe={class:"flex gap-2 justify-between w-full items-start"},Phe={class:"text-n-gray-12 font-medium leading-6 text-sm"},Bhe={class:"text-n-gray-11"},Fhe=["value","selected"],Uhe={__name:"FontSize",props:{value:{type:String,default:"default"},label:{type:String,default:""},description:{type:String,default:""}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,{fontSizeOptions:o}=gg(),a=C({get:()=>n.value,set:i=>{s("change",i)}});return(i,r)=>(p(),v("div",Dhe,[h("div",null,[h("label",Phe,A(e.label),1),h("p",Bhe,A(e.description),1)]),y(YS,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=l=>a.value=l),name:"fontSize",spacing:"compact",class:"min-w-28 mt-px",value:a.value,options:N(o),label:""},{default:K(()=>[(p(!0),v(pe,null,Ne(N(o),l=>(p(),v("option",{key:l.value,value:l.value,selected:l.value===a.value},A(l.label),9,Fhe))),128))]),_:1},8,["modelValue","value","options"])]))}},Ghe={class:"flex flex-col gap-2 items-center w-full rounded-t-[5px]"},Vhe={class:"grid grid-cols-[1fr_auto] items-center w-full gap-1"},Hhe={class:"overflow-hidden text-base font-medium text-ash-900 text-left"},Whe={class:"block truncate"},zhe=["checked","name"],jhe={class:"text-ash-900 text-sm line-clamp-2 leading-[1.4] text-start"},Khe=["src","alt"],Yhe=["src","alt"],Xhe={__name:"HotKeyCard",props:{active:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},lightImage:{type:String,default:""},darkImage:{type:String,default:""}},setup(e){return(t,n)=>(p(),v("button",{class:se(["flex flex-col gap-4 w-full h-fit p-4 rounded-md border border-n-weak dark:border-n-weak",{"border-primary-300 ":e.active}])},[h("div",Ghe,[h("div",Vhe,[h("div",Hhe,[h("span",Whe,A(e.title),1)]),h("input",{checked:e.active,type:"radio",name:`hotkey-${e.title}`,class:"shadow cursor-pointer grid place-items-center border-2 border-ash-200 appearance-none rounded-full w-5 h-5 checked:bg-primary-600 before:content-[''] before:bg-primary-600 before:border-4 before:rounded-full before:border-ash-25 checked:before:w-[18px] checked:before:h-[18px] checked:border checked:border-primary-600"},null,8,zhe)]),h("span",jhe,A(e.description),1)]),h("div",null,[h("img",{src:e.lightImage,alt:`Light themed image for ${e.title}`,class:"block object-cover w-full dark:hidden"},null,8,Khe),h("img",{src:e.darkImage,alt:`Dark themed image for ${e.title}`,class:"hidden object-cover w-full dark:block"},null,8,Yhe)])],2))}},qhe={components:{FormButton:e_},setup(){return{v$:bt()}},data(){return{currentPassword:"",password:"",passwordConfirmation:"",isPasswordChanging:!1,errorMessage:"",inputStyles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem",marginBottom:"0.125rem"}}},validations:{currentPassword:{required:Ye},password:{minLength:Qt(6)},passwordConfirmation:{minLength:Qt(6),isEqPassword(e){return e===this.password}}},computed:{isButtonDisabled(){return!this.currentPassword||!this.passwordConfirmation||!this.v$.passwordConfirmation.isEqPassword}},methods:{async changePassword(){if(this.v$.$touch(),this.v$.$invalid){ce(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}let e=this.$t("PROFILE_SETTINGS.PASSWORD_UPDATE_SUCCESS");try{await this.$store.dispatch("updatePassword",{password:this.password,passwordConfirmation:this.passwordConfirmation,currentPassword:this.currentPassword})}catch(t){e=Bf(t)||this.$t("RESET_PASSWORD.API.ERROR_MESSAGE")}finally{ce(e)}}}},Zhe={class:"flex flex-col w-full gap-4"};function Qhe(e,t,n,s,o,a){const i=M("woot-input"),r=M("FormButton");return p(),v("form",{onSubmit:t[3]||(t[3]=Fe(l=>a.changePassword(),["prevent"]))},[h("div",Zhe,[y(i,{modelValue:o.currentPassword,"onUpdate:modelValue":t[0]||(t[0]=l=>o.currentPassword=l),type:"password",styles:o.inputStyles,class:se({error:s.v$.currentPassword.$error}),label:e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.PLACEHOLDER"),error:`${s.v$.currentPassword.$error?e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.ERROR"):""}`,onInput:s.v$.currentPassword.$touch,onBlur:s.v$.currentPassword.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),y(i,{modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=l=>o.password=l),type:"password",styles:o.inputStyles,class:se({error:s.v$.password.$error}),label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.PASSWORD.PLACEHOLDER"),error:`${s.v$.password.$error?e.$t("PROFILE_SETTINGS.FORM.PASSWORD.ERROR"):""}`,onInput:s.v$.password.$touch,onBlur:s.v$.password.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),y(i,{modelValue:o.passwordConfirmation,"onUpdate:modelValue":t[2]||(t[2]=l=>o.passwordConfirmation=l),type:"password",styles:o.inputStyles,class:se({error:s.v$.passwordConfirmation.$error}),label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.PLACEHOLDER"),error:`${s.v$.passwordConfirmation.$error?e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.ERROR"):""}`,onInput:s.v$.passwordConfirmation.$touch,onBlur:s.v$.passwordConfirmation.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),y(r,{type:"submit","color-scheme":"primary",variant:"solid",size:"large",disabled:a.isButtonDisabled},{default:K(()=>[Re(A(e.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.BTN_TEXT")),1)]),_:1},8,["disabled"])])],32)}const Jhe=Ae(qhe,[["render",Qhe]]),eme=["id","value"],t_={__name:"CheckBox",props:{isChecked:{type:Boolean,default:!1},value:{type:String,default:null}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,o=C({get:()=>n.isChecked,set:a=>s("update",n.value,a)});return(a,i)=>re((p(),v("input",{id:e.value,"onUpdate:modelValue":i[0]||(i[0]=r=>o.value=r),type:"checkbox",value:e.value,class:"flex-shrink-0 mt-0.5 border-ash-200 border bg-ash-50 checked:border-none checked:bg-primary-600 dark:checked:bg-primary-600 shadow-sm appearance-none rounded-[4px] w-4 h-4 focus:ring-1 after:content-[''] after:text-white checked:after:content-['✓'] after:flex after:items-center after:justify-center after:text-center after:text-xs after:font-bold after:relative"},null,8,eme)),[[pn,o.value]])}},tme={props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],methods:{onClick(){this.$emit("update:modelValue",!this.modelValue)}}},nme=["aria-checked"];function sme(e,t,n,s,o,a){return p(),v("button",{type:"button",class:se(["relative flex-shrink-0 h-4 p-0 border-none shadow-inner w-7 rounded-3xl",n.modelValue?"bg-primary-600 shadow-primary-800":"shadow-ash-400 bg-ash-200"]),role:"switch","aria-checked":n.modelValue.toString(),onClick:t[0]||(t[0]=(...i)=>a.onClick&&a.onClick(...i))},[h("span",{"aria-hidden":"true",class:se(["rounded-full bg-white top-0.5 absolute dark:bg-white w-3 h-3 translate-y-0 duration-200 transition-transform ease-in-out",n.modelValue?"ltr:translate-x-0 rtl:translate-x-[0.75rem]":"ltr:-translate-x-[0.75rem] rtl:translate-x-0"])},null,2)],10,nme)}const ame=Ae(tme,[["render",sme]]),ome={components:{TableHeaderCell:PS,FormSwitch:ame,CheckBox:t_},data(){return{selectedEmailFlags:[],selectedPushFlags:[],enableAudioAlerts:!1,hasEnabledPushPermissions:!1,notificationTypes:GO}},computed:{...lt({accountId:"getCurrentAccountId",emailFlags:"userNotificationSettings/getSelectedEmailFlags",pushFlags:"userNotificationSettings/getSelectedPushFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),hasPushAPISupport(){return"Notification"in window},isSLAEnabled(){return this.isFeatureEnabledonAccount(this.accountId,_t.SLA)},filteredNotificationTypes(){return this.notificationTypes.filter(e=>this.isSLAEnabled?!0:!["sla_missed_first_response","sla_missed_next_response","sla_missed_resolution"].includes(e.value))}},watch:{emailFlags(e){this.selectedEmailFlags=e},pushFlags(e){this.selectedPushFlags=e}},mounted(){GP()&&this.getPushSubscription(),this.$store.dispatch("userNotificationSettings/get")},methods:{checkFlagStatus(e,t){return(e==="email"?this.selectedEmailFlags:this.selectedPushFlags).includes(`${e}_${t}`)},onRegistrationSuccess(){this.hasEnabledPushPermissions=!0},onRequestPermissions(e){e?WP({onSuccess:this.onRegistrationSuccess}):this.disablePushPermissions()},disablePushPermissions(){Ym(e=>e.pushManager.getSubscription().then(t=>t?t.unsubscribe():null).finally(()=>{this.hasEnabledPushPermissions=!1}).catch(()=>{}))},getPushSubscription(){Ym(e=>e.pushManager.getSubscription().then(t=>{t?this.hasEnabledPushPermissions=!0:this.hasEnabledPushPermissions=!1}).catch(t=>console.log(t)))},async updateNotificationSettings(){try{this.$store.dispatch("userNotificationSettings/update",{selectedEmailFlags:this.selectedEmailFlags,selectedPushFlags:this.selectedPushFlags}),ce(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))}catch{ce(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_ERROR"))}},handleInput(e,t){e==="email"?this.handleEmailInput(t):this.handlePushInput(t)},handleEmailInput(e){this.selectedEmailFlags=this.toggleInput(this.selectedEmailFlags,e),this.updateNotificationSettings()},handlePushInput(e){this.selectedPushFlags=this.toggleInput(this.selectedPushFlags,e),this.updateNotificationSettings()},toggleInput(e,t){return e.includes(t)?e.filter(s=>s!==t):[...e,t]}}},ime={id:"profile-settings-notifications",class:"flex flex-col gap-6"},rme={class:"hidden sm:block"},lme={class:"grid content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},cme={class:"text-sm font-normal normal-case text-ash-800"},ume={class:"text-sm font-medium normal-case text-ash-900"},dme={class:"flex items-center justify-between gap-1"},pme={class:"text-sm font-medium normal-case text-ash-900 whitespace-nowrap"},hme={class:"grid items-center content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},mme={class:"flex flex-row items-start gap-2 col-span-7 px-0 py-2 text-sm tracking-[0.5] rtl:text-right"},fme={class:"text-sm text-ash-900"},gme={class:"flex flex-col gap-6 sm:hidden"},_me={class:"text-sm font-medium normal-case text-ash-900"},vme={class:"flex flex-col gap-4"},bme={class:"text-sm text-ash-900"},Eme={class:"flex items-center justify-start gap-2"},Tme={class:"text-sm font-medium normal-case text-ash-900"},yme={class:"flex flex-col gap-4"},Sme={class:"text-sm text-ash-900"},Ame={class:"flex items-center justify-between w-full gap-2 p-4 border border-solid border-ash-200 rounded-xl"},Ime={class:"flex flex-row items-center gap-2"},Cme={class:"text-sm text-ash-900"};function Ome(e,t,n,s,o,a){const i=M("TableHeaderCell"),r=M("CheckBox"),l=M("fluent-icon"),c=M("FormSwitch");return p(),v("div",ime,[h("div",rme,[h("div",lme,[y(i,{span:7,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE')}`"},{default:K(()=>[h("span",cme,A(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE")),1)]),_:1}),y(i,{span:2,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL')}`"},{default:K(()=>[h("span",ume,A(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL")),1)]),_:1}),y(i,{span:3,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH')}`"},{default:K(()=>[h("div",dme,[h("span",pme,A(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH")),1)])]),_:1})]),(p(!0),v(pe,null,Ne(a.filteredNotificationTypes,(u,d)=>(p(),v("div",{key:d},[h("div",hme,[h("div",mme,[h("span",fme,A(e.$t(u.label)),1)]),(p(),v(pe,null,Ne(["email","push"],(m,f)=>h("div",{key:f,class:se(["flex items-start gap-2 px-0 text-sm tracking-[0.5] text-left rtl:text-right",`col-span-${m==="push"?3:2}`])},[y(r,{value:`${m}_${u.value}`,"is-checked":a.checkFlagStatus(m,u.value,o.selectedPushFlags),onUpdate:g=>a.handleInput(m,g)},null,8,["value","is-checked","onUpdate"])],2)),64))])]))),128))]),h("div",gme,[h("span",_me,A(e.$t("PROFILE_SETTINGS.FORM.EMAIL_NOTIFICATIONS_SECTION.TITLE")),1),h("div",vme,[(p(!0),v(pe,null,Ne(a.filteredNotificationTypes,(u,d)=>(p(),v("div",{key:d,class:"flex flex-row items-start gap-2"},[y(r,{id:`email_${u.value}`,value:`email_${u.value}`,"is-checked":a.checkFlagStatus("email",u.value),onUpdate:a.handleEmailInput},null,8,["id","value","is-checked","onUpdate"]),h("span",bme,A(e.$t(u.label)),1)]))),128))]),h("div",Eme,[h("span",Tme,A(e.$t("PROFILE_SETTINGS.FORM.PUSH_NOTIFICATIONS_SECTION.TITLE")),1)]),h("div",yme,[(p(!0),v(pe,null,Ne(a.filteredNotificationTypes,(u,d)=>(p(),v("div",{key:d,class:"flex flex-row items-start gap-2"},[y(r,{id:`push_${u.value}`,value:`push_${u.value}`,"is-checked":a.checkFlagStatus("push",u.value),onUpdate:a.handlePushInput},null,8,["id","value","is-checked","onUpdate"]),h("span",Sme,A(e.$t(u.label)),1)]))),128))])]),h("div",Ame,[h("div",Ime,[y(l,{icon:"alert",class:"flex-shrink-0 text-ash-900",size:"18"}),h("span",Cme,A(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.BROWSER_PERMISSION")),1)]),y(c,{"model-value":o.hasEnabledPushPermissions,"onUpdate:modelValue":a.onRequestPermissions},null,8,["model-value","onUpdate:modelValue"])])])}const Nme=Ae(ome,[["render",Ome]]),wme={class:"flex items-center gap-2"},Rme=["value","selected"],xme={__name:"AudioAlertTone",props:{value:{type:String,required:!0,validator:e=>["ding","bell","chime","magic","ping"].includes(e)},label:{type:String,default:""}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,o=C(()=>[{value:"ding",label:"Ding"},{value:"bell",label:"Bell"},{value:"chime",label:"Chime"},{value:"magic",label:"Magic"},{value:"ping",label:"Ping"}]),a=C({get:()=>n.value,set:l=>{s("change",l)}}),i=new Audio,r=async()=>{try{i.src=`/audio/dashboard/${a.value}.mp3`,await i.play()}catch(l){el(l)}};return(l,c)=>{const u=qe("tooltip");return p(),v("div",wme,[y(YS,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=d=>a.value=d),name:"alertTone",spacing:"compact",class:"flex-grow",value:a.value,options:o.value,label:e.label},{default:K(()=>[(p(!0),v(pe,null,Ne(o.value,d=>(p(),v("option",{key:d.label,value:d.value,selected:d.value===a.value},A(d.label),9,Rme))),128))]),_:1},8,["modelValue","value","options","label"]),re((p(),v("button",{class:"border-0 shadow-sm outline-none flex justify-center items-center size-10 appearance-none rounded-xl ring-ash-200 ring-1 ring-inset focus:ring-2 focus:ring-inset focus:ring-primary-500 flex-shrink-0 mt-[1.75rem]",onClick:r},[y(Rt,{icon:"i-lucide-volume-2"})])),[[u,l.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.PLAY"),void 0,{top:!0}]])])}}},$me={class:"pb-1 text-sm font-medium leading-6 text-ash-900"},Mme={class:"grid gap-3 mt-2"},Lme=["for"],kme={class:"text-n-slate-11 text-sm font-medium mt-2"},Dme={__name:"AudioAlertEvent",props:{label:{type:String,default:""},value:{type:String,default:""}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,o=VO,a=Object.values(U_),i=C({get:()=>{if(n.value==="none")return[];if(n.value==="mine")return[U_.ASSIGNED];if(n.value==="all")return[...a];const c=n.value.split("+").filter(u=>a.includes(u));return[...new Set(c)]},set:c=>{const u=c.filter(Boolean).sort(),d=[...new Set(u)];if(d.length===0){s("update","none");return}s("update",d.join("+"))}}),r=(c,u)=>{let d=i.value;c?d.push(u):d=d.filter(m=>m!==u),i.value=d},l=C(()=>{const c="PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_COMBINATIONS.";return n.value===""||n.value==="none"?c+"NONE":c+i.value.join("+").toUpperCase()});return(c,u)=>(p(),v("div",null,[h("label",$me,A(e.label),1),h("div",Mme,[(p(!0),v(pe,null,Ne(N(o),d=>(p(),v("div",{key:d.value,class:"flex items-center gap-2"},[y(t_,{id:`checkbox-${d.value}`,"is-checked":i.value.includes(d.value),onUpdate:(m,f)=>r(f,d.value)},null,8,["id","is-checked","onUpdate"]),h("label",{for:`checkbox-${d.value}`,class:"text-sm text-ash-900 font-normal"},A(c.$t(`PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_TYPES.${d.label.toUpperCase()}`)),9,Lme)]))),128)),h("div",kme,A(c.$t(l.value)),1)])]))}},Pme={class:"flex justify-between pb-1 text-sm font-medium leading-6 text-ash-900"},Bme={class:"flex flex-col gap-3 mt-2"},Fme=["for"],Ume={__name:"AudioAlertCondition",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},emits:["change"],setup(e,{emit:t}){const n=t,s=(o,a)=>{n("change",o,a)};return(o,a)=>(p(),v("div",null,[h("label",Pme,A(e.label),1),h("div",Bme,[(p(!0),v(pe,null,Ne(e.items,i=>(p(),v("div",{key:i.id,class:"flex flex-row items-start gap-2"},[y(t_,{id:`checkbox-condition-${i.value}`,"is-checked":i.model,value:i.value,onUpdate:s},null,8,["id","is-checked","value"]),h("label",{class:"text-sm font-normal text-ash-900",for:`checkbox-condition-${i.value}`},A(i.label),9,Fme)]))),128))])]))}},Gme={id:"profile-settings-notifications",class:"flex flex-col gap-6"},Ol="PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION",Vme={__name:"AudioNotifications",setup(e){const t=pt(),n=nn(),s=C(()=>n.getCurrentUser.value),{uiSettings:o,updateUISettings:a}=ln(),{t:i}=Me(),r=X(""),l=X(!1),c=X(!1),u=X("ding"),d=X([]),m=_=>{const E=tl(_);r.value=E.enableAudioAlerts,l.value=!E.alwaysPlayAudioAlert,c.value=E.alertIfUnreadAssignedConversationExist,d.value=[{id:"audio1",label:i(`${Ol}.CONDITIONS.CONDITION_ONE`),model:l.value,value:"tab_is_inactive"},{id:"audio2",label:i(`${Ol}.CONDITIONS.CONDITION_TWO`),model:c.value,value:"conversations_are_read"}],u.value=E.notificationTone||"ding"};ct(o,_=>{m(_)},{immediate:!0});const f=_=>{a(_),HO(s.value),ce(i("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))};dt(()=>{t.dispatch("userNotificationSettings/get")});const g=_=>{r.value=_,f({enable_audio_alerts:_})},T=(_,E)=>{_==="tab_is_inactive"?f({always_play_audio_alert:!E}):_==="conversations_are_read"&&f({alert_if_unread_assigned_conversation_exist:E})},S=_=>{f({notification_tone:_})};return(_,E)=>(p(),v("div",Gme,[y(xme,{value:u.value,label:_.$t(`${Ol}.DEFAULT_TONE.TITLE`),onChange:S},null,8,["value","label"]),y(Dme,{label:_.$t(`${Ol}.ALERT_TYPE.TITLE`),value:r.value,onUpdate:g},null,8,["label","value"]),y(Ume,{items:d.value,label:_.$t(`${Ol}.CONDITIONS.TITLE`),onChange:T},null,8,["items","label"])]))}},Hme={class:"flex flex-col items-start w-full gap-6"},Wme={class:"flex flex-col w-full gap-4"},zme={key:0,class:"text-lg font-medium text-ash-900"},jme={key:1,class:"mb-0 text-sm font-normal text-ash-900"},Kme={class:"flex flex-col w-full gap-6"},Yme={__name:"FormSection",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(e){return(t,n)=>(p(),v("div",Hme,[h("div",Wme,[e.title?(p(),v("h4",zme,A(e.title),1)):w("",!0),n[0]||(n[0]=h("div",{class:"flex flex-row items-center justify-between"},[h("div",{class:"flex-grow h-px bg-ash-200"})],-1)),e.description?(p(),v("p",jme,A(e.description),1)):w("",!0)]),h("div",Kme,[We(t.$slots,"default")])]))}};function cl(){const e=Oe("getCurrentUser"),t=Oe("accounts/isFeatureEnabledonAccount"),n=Oe("globalConfig/isOnChatwootCloud"),s=Oe("globalConfig/isACustomBrandedInstance"),{isEnterprise:o,enterprisePlanName:a}=Yd(),{accountId:i}=zn(),r=()=>Df(e.value,i.value),l=T=>T?t.value(i.value,T):!0,c=T=>{if(!T||!T.length)return!0;const S=r();return Pf(T,S)},u=T=>{if(Array.isArray(T)&&T.length>0){const S={[is.ENTERPRISE]:o,[is.CLOUD]:n.value,[is.COMMUNITY]:!0};return T.some(_=>S[_])}return!0},d=T=>T?mL.includes(T):!0,m=C(()=>o?a!=="community":!0);return{checkPermissions:c,shouldShowPaywall:T=>{const S=N(T);if(!S||s.value)return!1;if(d(S)){if(n.value)return!l(S);if(o)return!m.value}return!1},isFeatureFlagEnabled:l,shouldShow:(T,S,_)=>{const E=N(T),b=N(S),I=N(_);return!c(b)||!u(I)?!1:s.value?l(E):n.value?l(E)||d(E):o?l(E)||d(E)&&!m.value:!0}}}const ja={__name:"policy",props:{as:{type:String,default:"div"},permissions:{type:Array,required:!0},featureFlag:{type:String,default:null},installationTypes:{type:Array,default:null}},setup(e){const t=e,{shouldShow:n}=cl(),s=C(()=>n(t.featureFlag,t.permissions,t.installationTypes));return(o,a)=>s.value?(p(),$(vs(e.as),{key:0},{default:K(()=>[We(o.$slots,"default")]),_:3})):w("",!0)}},Xme={components:{MessageSignature:Rhe,FormSection:Yme,FontSize:Uhe,UserProfilePicture:Ihe,Policy:ja,UserBasicDetails:whe,HotKeyCard:Xhe,ChangePassword:Jhe,NotificationPreferences:Nme,AudioNotifications:Vme,AccessToken:Jm},mixins:[jo],setup(){const{isEditorHotKeyEnabled:e,updateUISettings:t}=ln(),{currentFontSize:n,updateFontSize:s}=gg();return{currentFontSize:n,updateFontSize:s,isEditorHotKeyEnabled:e,updateUISettings:t}},data(){return{avatarFile:"",avatarUrl:"",name:"",displayName:"",email:"",messageSignature:"",hotKeys:[{key:"enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-enter-dark.svg"},{key:"cmd_enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter-dark.svg"}],notificationPermissions:[...Gn,...Rs],audioNotificationPermissions:[...Gn,...Rs]}},computed:{...lt({currentUser:"getCurrentUser",currentUserId:"getCurrentUserID",globalConfig:"globalConfig/get"})},mounted(){this.currentUserId&&this.initializeUser()},methods:{initializeUser(){this.name=this.currentUser.name,this.email=this.currentUser.email,this.avatarUrl=this.currentUser.avatar_url,this.displayName=this.currentUser.display_name,this.messageSignature=this.currentUser.message_signature},async dispatchUpdate(e,t,n){let s="";try{return await this.$store.dispatch("updateProfile",e),s=t,!0}catch(o){return s=Bf(o)||n,!1}finally{ce(s)}},async updateProfile(e){const{name:t,email:n,displayName:s}=e,o=this.currentUser.email!==n;this.name=t||this.name,this.email=n||this.email,this.displayName=s||this.displayName;const a={name:this.name,email:this.email,displayName:this.displayName,avatar:this.avatarFile},i=await this.dispatchUpdate(a,o?this.$t("PROFILE_SETTINGS.AFTER_EMAIL_CHANGED"):this.$t("PROFILE_SETTINGS.UPDATE_SUCCESS"),this.$t("RESET_PASSWORD.API.ERROR_MESSAGE"));o&&i&&WO()},async updateSignature(e){const t={message_signature:e};let n=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_SUCCESS"),s=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_ERROR");await this.dispatchUpdate(t,n,s)},updateProfilePicture({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async deleteProfilePicture(){try{await this.$store.dispatch("deleteAvatar"),this.avatarUrl="",this.avatarFile="",ce(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_SUCCESS"))}catch{ce(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_FAILED"))}},toggleHotKey(e){this.hotKeys=this.hotKeys.map(t=>t.key===e?{...t,active:!t.active}:t),this.updateUISettings({editor_message_key:e}),ce(this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.UPDATE_SUCCESS"))},async onCopyToken(e){await Go(e),ce(this.$t("COMPONENTS.CODE.COPY_SUCCESSFUL"))},async resetAccessToken(){await this.$store.dispatch("resetAccessToken")?ce(this.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET_SUCCESS")):ce(this.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET_ERROR"))}}},qme={class:"grid py-16 px-5 font-inter mx-auto gap-16 sm:max-w-screen-md"},Zme={class:"flex flex-col gap-6"},Qme={class:"text-2xl font-medium text-ash-900"},Jme={class:"flex flex-col justify-between w-full gap-5 sm:gap-4 sm:flex-row"};function efe(e,t,n,s,o,a){const i=M("UserProfilePicture"),r=M("UserBasicDetails"),l=M("FontSize"),c=M("FormSection"),u=M("MessageSignature"),d=M("HotKeyCard"),m=M("ChangePassword"),f=M("AudioNotifications"),g=M("Policy"),T=M("NotificationPreferences"),S=M("AccessToken");return p(),v("div",qme,[h("div",Zme,[h("h2",Qme,A(e.$t("PROFILE_SETTINGS.TITLE")),1),y(i,{src:o.avatarUrl,name:o.name,onChange:a.updateProfilePicture,onDelete:a.deleteProfilePicture},null,8,["src","name","onChange","onDelete"]),y(r,{name:o.name,"display-name":o.displayName,email:o.email,"email-enabled":!e.globalConfig.disableUserProfileUpdate,onUpdateUser:a.updateProfile},null,8,["name","display-name","email","email-enabled","onUpdateUser"])]),y(c,{title:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.NOTE")},{default:K(()=>[y(l,{value:s.currentFontSize,label:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.NOTE"),onChange:s.updateFontSize},null,8,["value","label","description","onChange"])]),_:1},8,["title","description"]),y(c,{title:e.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.NOTE")},{default:K(()=>[y(u,{"message-signature":o.messageSignature,onUpdateSignature:a.updateSignature},null,8,["message-signature","onUpdateSignature"])]),_:1},8,["title","description"]),y(c,{title:e.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.NOTE")},{default:K(()=>[h("div",Jme,[(p(!0),v(pe,null,Ne(o.hotKeys,_=>(p(),v("button",{key:_.key,class:se(["px-0 reset-base w-full sm:flex-1 rounded-xl outline-1 outline",s.isEditorHotKeyEnabled(_.key)?"outline-n-brand/30":"outline-n-weak"])},[(p(),$(d,{key:_.title,title:_.title,description:_.description,"light-image":_.lightImage,"dark-image":_.darkImage,active:s.isEditorHotKeyEnabled(_.key),onClick:E=>a.toggleHotKey(_.key)},null,8,["title","description","light-image","dark-image","active","onClick"]))],2))),128))])]),_:1},8,["title","description"]),e.globalConfig.disableUserProfileUpdate?w("",!0):(p(),$(c,{key:0,title:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.TITLE")},{default:K(()=>[y(m)]),_:1},8,["title"])),y(g,{permissions:o.audioNotificationPermissions},{default:K(()=>[y(c,{title:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.NOTE")},{default:K(()=>[y(f)]),_:1},8,["title","description"])]),_:1},8,["permissions"]),y(g,{permissions:o.notificationPermissions},{default:K(()=>[y(c,{title:e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TITLE")},{default:K(()=>[y(T)]),_:1},8,["title"])]),_:1},8,["permissions"]),y(c,{title:e.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.TITLE"),description:e.useInstallationName(e.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.NOTE"),e.globalConfig.installationName)},{default:K(()=>[y(S,{value:e.currentUser.access_token,onOnCopy:a.onCopyToken,onOnReset:a.resetAccessToken},null,8,["value","onOnCopy","onOnReset"])]),_:1},8,["title","description"])])}const tfe=Ae(Xme,[["render",efe]]),nfe={routes:[{path:At("accounts/:accountId/profile"),name:"profile_settings",meta:{permissions:["administrator","agent","custom_role"]},component:yhe,children:[{path:"settings",name:"profile_settings_index",component:tfe,meta:{permissions:["administrator","agent","custom_role"]}}]}]},sfe={routes:[{path:At("accounts/:accountId/settings"),name:"settings_home",meta:{permissions:[...Gn,...Rs]},redirect:e=>nr.getters.getCurrentRole==="administrator"&&nr.getters.getCurrentCustomRoleId===null?{name:"general_settings_index",params:e.params}:{name:"canned_list",params:e.params}},...$6.routes,...bB.routes,...ZB.routes,...P9.routes,...iU.routes,...BU.routes,...tG.routes,...RG.routes,...zQ.routes,...wte.routes,...sne.routes,...tse.routes,...Mue.routes,...xde.routes,...Ype.routes,...Ehe.routes,...nfe.routes]};function afe(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var o=e.indexOf("Edge/");return o>0?parseInt(e.substring(o+5,e.indexOf(".",o)),10):-1}let Wu;function ff(){ff.init||(ff.init=!0,Wu=afe()!==-1)}var gp={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){ff(),tn(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",Wu&&this.$el.appendChild(e),e.data="about:blank",Wu||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Wu&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const ofe=o0();s0("data-v-b329ee4c");const ife={class:"resize-observer",tabindex:"-1"};a0();const rfe=ofe((e,t,n,s,o,a)=>(p(),$("div",ife)));gp.render=rfe;gp.__scopeId="data-v-b329ee4c";gp.__file="src/components/ResizeObserver.vue";function zu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zu=function(t){return typeof t}:zu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(e)}function lfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cfe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function ufe(e,t,n){return t&&cfe(e.prototype,t),e}function X1(e){return dfe(e)||pfe(e)||hfe(e)||mfe()}function dfe(e){if(Array.isArray(e))return gf(e)}function pfe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function hfe(e,t){if(e){if(typeof e=="string")return gf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gf(e,t)}}function gf(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function mfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ffe(e){var t;return typeof e=="function"?t={callback:e}:t=e,t}function gfe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,o,a,i=function(l){for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];if(a=u,!(s&&l===o)){var m=n.leading;typeof m=="function"&&(m=m(l,o)),(!s||l!==o)&&m&&e.apply(void 0,[l].concat(X1(a))),o=l,clearTimeout(s),s=setTimeout(function(){e.apply(void 0,[l].concat(X1(a))),s=0},t)}};return i._clear=function(){clearTimeout(s),s=null},i}function XS(e,t){if(e===t)return!0;if(zu(e)==="object"){for(var n in e)if(!XS(e[n],t[n]))return!1;return!0}return!1}var _fe=function(){function e(t,n,s){lfe(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(n,s)}return ufe(e,[{key:"createObserver",value:function(n,s){var o=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=ffe(n),this.callback=function(r,l){o.options.callback(r,l),r&&o.options.once&&(o.frozen=!0,o.destroyObserver())},this.callback&&this.options.throttle){var a=this.options.throttleOptions||{},i=a.leading;this.callback=gfe(this.callback,this.options.throttle,{leading:function(l){return i==="both"||i==="visible"&&l||i==="hidden"&&!l}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(r){var l=r[0];if(r.length>1){var c=r.find(function(d){return d.isIntersecting});c&&(l=c)}if(o.callback){var u=l.isIntersecting&&l.intersectionRatio>=o.threshold;if(u===o.oldResult)return;o.oldResult=u,o.callback(u,l)}},this.options.intersection),tn(function(){o.observer&&o.observer.observe(o.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function qS(e,t,n){var s=t.value;if(s)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var o=new _fe(e,s,n);e._vue_visibilityState=o}}function vfe(e,t,n){var s=t.value,o=t.oldValue;if(!XS(s,o)){var a=e._vue_visibilityState;if(!s){ZS(e);return}a?a.createObserver(s,n):qS(e,{value:s},n)}}function ZS(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var bfe={beforeMount:qS,updated:vfe,unmounted:ZS};function Efe(e){return{all:e=e||new Map,on:function(t,n){var s=e.get(t);s&&s.push(n)||e.set(t,[n])},off:function(t,n){var s=e.get(t);s&&s.splice(s.indexOf(n)>>>0,1)},emit:function(t,n){(e.get(t)||[]).slice().map(function(s){s(n)}),(e.get("*")||[]).slice().map(function(s){s(t,n)})}}}var Tfe={itemsLimit:1e3},yfe=/(auto|scroll)/;function QS(e,t){return e.parentNode===null?t:QS(e.parentNode,t.concat([e]))}var cm=function(t,n){return getComputedStyle(t,null).getPropertyValue(n)},Sfe=function(t){return cm(t,"overflow")+cm(t,"overflow-y")+cm(t,"overflow-x")},Afe=function(t){return yfe.test(Sfe(t))};function q1(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=QS(e.parentNode,[]),n=0;n<t.length;n+=1)if(Afe(t[n]))return t[n];return document.scrollingElement||document.documentElement}}function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}var JS={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(t){return["vertical","horizontal"].includes(t)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function eA(){return this.items.length&&_f(this.items[0])!=="object"}var vf=!1;if(typeof window<"u"){vf=!1;try{var Ife=Object.defineProperty({},"passive",{get:function(){vf=!0}});window.addEventListener("test",null,Ife)}catch{}}let Cfe=0;var n_={name:"RecycleScroller",components:{ResizeObserver:gp},directives:{ObserveVisibility:bfe},props:{...JS,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},t=this.items,n=this.sizeField,s=this.minItemSize;let o=1e4,a=0,i;for(let r=0,l=t.length;r<l;r++)i=t[r][n]||s,i<o&&(o=i),a+=i,e[r]={accumulator:a,size:i};return this.$_computedMinItemSize=o,e}return[]},simpleArray:eA,itemIndexByKey(){const{keyField:e,items:t}=this,n={};for(let s=0,o=t.length;s<o;s++)n[t[s][e]]=s;return n}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,t,n,s,o){const a=Y2({id:Cfe++,index:t,used:!0,key:s,type:o}),i=X2({item:n,position:0,nr:a});return e.push(i),i},unuseView(e,t=!1){const n=this.$_unusedViews,s=e.nr.type;let o=n.get(s);o||(o=[],n.set(s,o)),o.push(e),t||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const t=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:n}=this.updateVisibleItems(!1,!0);n||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});t(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&t()},this.updateInterval))}},handleVisibilityChange(e,t){this.ready&&(e||t.boundingClientRect.width!==0||t.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,t=!1){const n=this.itemSize,s=this.gridItems||1,o=this.itemSecondarySize||n,a=this.$_computedMinItemSize,i=this.typeField,r=this.simpleArray?null:this.keyField,l=this.items,c=l.length,u=this.sizes,d=this.$_views,m=this.$_unusedViews,f=this.pool,g=this.itemIndexByKey;let T,S,_,E,b;if(!c)T=S=E=b=_=0;else if(this.$_prerender)T=E=0,S=b=Math.min(this.prerender,l.length),_=null;else{const D=this.getScroll();if(t){let P=D.start-this.$_lastUpdateScrollPosition;if(P<0&&(P=-P),n===null&&P<a||P<n)return{continuous:!0}}this.$_lastUpdateScrollPosition=D.start;const V=this.buffer;D.start-=V,D.end+=V;let B=0;if(this.$refs.before&&(B=this.$refs.before.scrollHeight,D.start-=B),this.$refs.after){const P=this.$refs.after.scrollHeight;D.end+=P}if(n===null){let P,k=0,U=c-1,j=~~(c/2),z;do z=j,P=u[j].accumulator,P<D.start?k=j:j<c-1&&u[j+1].accumulator>D.start&&(U=j),j=~~((k+U)/2);while(j!==z);for(j<0&&(j=0),T=j,_=u[c-1].accumulator,S=j;S<c&&u[S].accumulator<D.end;S++);for(S===-1?S=l.length-1:(S++,S>c&&(S=c)),E=T;E<c&&B+u[E].accumulator<D.start;E++);for(b=E;b<c&&B+u[b].accumulator<D.end;b++);}else{T=~~(D.start/n*s);const P=T%s;T-=P,S=Math.ceil(D.end/n*s),E=Math.max(0,Math.floor((D.start-B)/n*s)),b=Math.floor((D.end-B)/n*s),T<0&&(T=0),S>c&&(S=c),E<0&&(E=0),b>c&&(b=c),_=Math.ceil(c/s)*n}}S-T>Tfe.itemsLimit&&this.itemsLimitError(),this.totalSize=_;let I;const R=T<=this.$_endIndex&&S>=this.$_startIndex;if(R)for(let D=0,V=f.length;D<V;D++)I=f[D],I.nr.used&&(e&&(I.nr.index=g[I.item[r]]),(I.nr.index==null||I.nr.index<T||I.nr.index>=S)&&this.unuseView(I));const O=R?null:new Map;let x,L,F;for(let D=T;D<S;D++){x=l[D];const V=r?x[r]:x;if(V==null)throw new Error(`Key is ${V} on item (keyField is '${r}')`);if(I=d.get(V),!n&&!u[D].size){I&&this.unuseView(I);continue}L=x[i];let B=m.get(L),P=!1;if(!I)R?B&&B.length?I=B.pop():I=this.addView(f,D,x,V,L):(F=O.get(L)||0,(!B||F>=B.length)&&(I=this.addView(f,D,x,V,L),this.unuseView(I,!0),B=m.get(L)),I=B[F],O.set(L,F+1)),d.delete(I.nr.key),I.nr.used=!0,I.nr.index=D,I.nr.key=V,I.nr.type=L,d.set(V,I),P=!0;else if(!I.nr.used&&(I.nr.used=!0,P=!0,B)){const k=B.indexOf(I);k!==-1&&B.splice(k,1)}I.item=x,P&&(D===l.length-1&&this.$emit("scroll-end"),D===0&&this.$emit("scroll-start")),n===null?(I.position=u[D-1].accumulator,I.offset=0):(I.position=Math.floor(D/s)*n,I.offset=D%s*o)}return this.$_startIndex=T,this.$_endIndex=S,this.emitUpdate&&this.$emit("update",T,S,E,b),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:R}},getListenerTarget(){let e=q1(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:t}=this,n=t==="vertical";let s;if(this.pageMode){const o=e.getBoundingClientRect(),a=n?o.height:o.width;let i=-(n?o.top:o.left),r=n?window.innerHeight:window.innerWidth;i<0&&(r+=i,i=0),i+r>a&&(r=a-i),s={start:i,end:i+r}}else n?s={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:s={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return s},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,vf?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let t;const n=this.gridItems||1;this.itemSize===null?t=e>0?this.sizes[e-1].accumulator:0:t=Math.floor(e/n)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(e){const t=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let n,s,o;if(this.pageMode){const a=q1(this.$el),i=a.tagName==="HTML"?0:a[t.scroll],r=a.getBoundingClientRect(),c=this.$el.getBoundingClientRect()[t.start]-r[t.start];n=a,s=t.scroll,o=e+i+c}else n=this.$el,s=t.scroll,o=e;n[s]=o},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,t)=>e.nr.index-t.nr.index)}}};const Ofe={key:0,ref:"before",class:"vue-recycle-scroller__slot"},Nfe={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function wfe(e,t,n,s,o,a){const i=M("ResizeObserver"),r=qe("observe-visibility");return re((p(),v("div",{class:se(["vue-recycle-scroller",{ready:o.ready,"page-mode":n.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:t[0]||(t[0]=(...l)=>a.handleScroll&&a.handleScroll(...l))},[e.$slots.before?(p(),v("div",Ofe,[We(e.$slots,"before")],512)):w("v-if",!0),(p(),$(vs(n.listTag),{ref:"wrapper",style:Ht({[e.direction==="vertical"?"minHeight":"minWidth"]:o.totalSize+"px"}),class:se(["vue-recycle-scroller__item-wrapper",n.listClass])},{default:K(()=>[(p(!0),v(pe,null,Ne(o.pool,l=>(p(),$(vs(n.itemTag),fs({key:l.nr.id,style:o.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${l.position}px) translate${e.direction==="vertical"?"X":"Y"}(${l.offset}px)`,width:n.gridItems?`${e.direction==="vertical"&&n.itemSecondarySize||n.itemSize}px`:void 0,height:n.gridItems?`${e.direction==="horizontal"&&n.itemSecondarySize||n.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[n.itemClass,{hover:!n.skipHover&&o.hoverKey===l.nr.key}]]},q2(n.skipHover?{}:{mouseenter:()=>{o.hoverKey=l.nr.key},mouseleave:()=>{o.hoverKey=null}})),{default:K(()=>[We(e.$slots,"default",{item:l.item,index:l.nr.index,active:l.nr.used})]),_:2},1040,["style","class"]))),128)),We(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(p(),v("div",Nfe,[We(e.$slots,"after")],512)):w("v-if",!0),y(i,{onNotify:a.handleResize},null,8,["onNotify"])],34)),[[r,a.handleVisibilityChange]])}n_.render=wfe;n_.__file="src/components/RecycleScroller.vue";var s_={name:"DynamicScroller",components:{RecycleScroller:n_},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e)){for(const t of e)if(t.target&&t.target.$_vs_onResize){let n,s;if(t.borderBoxSize){const o=t.borderBoxSize[0];n=o.inlineSize,s=o.blockSize}else n=t.contentRect.width,s=t.contentRect.height;t.target.$_vs_onResize(t.target.$_vs_id,n,s)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...JS,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:eA,itemsWithSize(){const e=[],{items:t,keyField:n,simpleArray:s}=this,o=this.vscrollData.sizes,a=t.length;for(let i=0;i<a;i++){const r=t[i],l=s?i:r[n];let c=o[l];typeof c>"u"&&!this.$_undefinedMap[l]&&(c=0),e.push({item:r,id:l,size:c})}return e}},watch:{items(){this.forceUpdate()},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,t){const n=this.$el.scrollTop;let s=0,o=0;const a=Math.min(e.length,t.length);for(let r=0;r<a&&!(s>=n);r++)s+=t[r].size||this.minItemSize,o+=e[r].size||this.minItemSize;const i=o-s;i!==0&&(this.$el.scrollTop+=i)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=Efe()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!1){(e||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(e){const t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize(e,t=void 0){const n=this.simpleArray?t??this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[n]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const t=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(t)})};requestAnimationFrame(t)})}}};function Rfe(e,t,n,s,o,a){const i=M("RecycleScroller");return p(),$(i,fs({ref:"scroller",items:a.itemsWithSize,"min-item-size":n.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},e.$attrs,{onResize:a.onScrollerResize,onVisible:a.onScrollerVisible}),{default:K(({item:r,index:l,active:c})=>[We(e.$slots,"default",i0(r0({item:r.item,index:l,active:c,itemWithSize:r})))]),before:K(()=>[We(e.$slots,"before")]),after:K(()=>[We(e.$slots,"after")]),empty:K(()=>[We(e.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}s_.render=Rfe;s_.__file="src/components/DynamicScroller.vue";var tA={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(e,t){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const n=this.vscrollData.sizes[t],s=this.vscrollData.sizes[e];n!=null&&n!==s&&this.applySize(n)}},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||e||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const t=this.$el.offsetWidth,n=this.$el.offsetHeight;this.applyWidthHeight(t,n)}this.$_pendingSizeUpdate=null})},applyWidthHeight(e,t){const n=~~(this.vscrollParent.direction==="vertical"?t:e);n&&this.size!==n&&this.applySize(n)},applySize(e){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(e,t,n){this.id===e&&this.applyWidthHeight(t,n)}},render(){return yn(this.tag,this.$slots.default())}};tA.__file="src/components/DynamicScrollerItem.vue";const xfe={class:"relative flex flex-col gap-1 w-fit"},yd={__name:"SelectMenu",props:{options:{type:Array,required:!0},modelValue:{type:String,required:!0},label:{type:String,required:!0},subMenuPosition:{type:String,default:"right",validator:e=>["right","left","bottom"].includes(e)}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,o=X(!1),a=C(()=>n.label),i=()=>{o.value=!o.value},r=l=>{s("update:modelValue",l),o.value=!1};return(l,c)=>{const u=qe("on-clickaway");return re((p(),v("div",xfe,[y(oe,{icon:"i-lucide-chevron-down",size:"sm","trailing-icon":"",color:"slate",variant:"faded",class:se(["!w-fit max-w-40",{"dark:!bg-n-alpha-2 !bg-n-slate-9/20":o.value}]),label:a.value,onClick:i},null,8,["class","label"]),o.value?(p(),v("div",{key:0,class:se(["absolute select-none max-w-64 flex flex-col gap-1 bg-n-alpha-3 backdrop-blur-[100px] p-1 top-0 shadow-lg z-40 rounded-lg border border-n-weak dark:border-n-strong/50",{"ltr:left-full rtl:right-full ltr:ml-1 rtl:mr-1":e.subMenuPosition==="right","ltr:right-full rtl:left-full ltr:mr-1 rtl:ml-1":e.subMenuPosition==="left","top-full mt-1 ltr:right-0 rtl:left-0":e.subMenuPosition==="bottom"}])},[(p(!0),v(pe,null,Ne(e.options,d=>(p(),$(oe,{key:d.value,label:d.label,icon:d.value===e.modelValue?"i-lucide-check":"",size:"sm",variant:"ghost",color:"slate","trailing-icon":"",class:se(["!justify-end !px-2.5 !h-7",{"!bg-n-alpha-2":d.value===e.modelValue}]),onClick:m=>r(d.value)},null,8,["label","icon","class","onClick"]))),128))],2)):w("",!0)])),[[u,()=>o.value=!1]])}}},$fe={class:"relative flex"},Mfe={class:"flex items-center justify-between last:mt-4 gap-2"},Lfe={class:"text-sm truncate text-n-slate-12"},kfe={class:"flex items-center justify-between last:mt-4 gap-2"},Dfe={class:"text-sm truncate text-n-slate-12"},Pfe={__name:"ConversationBasicFilter",props:{isOnExpandedLayout:{type:Boolean,required:!0}},emits:["changeFilter"],setup(e,{emit:t}){const n=t,s=pt(),{t:o}=Me(),{updateUISettings:a}=ln(),i=Oe("getChatStatusFilter"),r=Oe("getChatSortFilter"),[l,c]=es(),u=C(()=>i.value||It.STATUS_TYPE.OPEN),d=C(()=>r.value||It.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC),m=C(()=>[{label:o("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.open.TEXT"),value:"open"},{label:o("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.resolved.TEXT"),value:"resolved"},{label:o("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.pending.TEXT"),value:"pending"},{label:o("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.snoozed.TEXT"),value:"snoozed"},{label:o("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.all.TEXT"),value:"all"}]),f=C(()=>[{label:o("CHAT_LIST.SORT_ORDER_ITEMS.last_activity_at_asc.TEXT"),value:"last_activity_at_asc"},{label:o("CHAT_LIST.SORT_ORDER_ITEMS.last_activity_at_desc.TEXT"),value:"last_activity_at_desc"},{label:o("CHAT_LIST.SORT_ORDER_ITEMS.created_at_desc.TEXT"),value:"created_at_desc"},{label:o("CHAT_LIST.SORT_ORDER_ITEMS.created_at_asc.TEXT"),value:"created_at_asc"},{label:o("CHAT_LIST.SORT_ORDER_ITEMS.priority_desc.TEXT"),value:"priority_desc"},{label:o("CHAT_LIST.SORT_ORDER_ITEMS.priority_asc.TEXT"),value:"priority_asc"},{label:o("CHAT_LIST.SORT_ORDER_ITEMS.waiting_since_asc.TEXT"),value:"waiting_since_asc"},{label:o("CHAT_LIST.SORT_ORDER_ITEMS.waiting_since_desc.TEXT"),value:"waiting_since_desc"}]),g=C(()=>{var b;return((b=m.value.find(I=>I.value===i.value))==null?void 0:b.label)||""}),T=C(()=>{var b;return((b=f.value.find(I=>I.value===r.value))==null?void 0:b.label)||""}),S=(b,I)=>{a({conversations_filter_by:{status:b==="status"?I:u.value,order_by:b==="sort"?I:d.value}})},_=b=>{n("changeFilter",b,"status"),s.dispatch("setChatStatusFilter",b),S("status",b)},E=b=>{n("changeFilter",b,"sort"),s.dispatch("setChatSortFilter",b),S("sort",b)};return(b,I)=>{const R=qe("tooltip");return p(),v("div",$fe,[re(y(oe,{icon:"i-lucide-arrow-up-down",slate:"",faded:"",xs:"",onClick:I[0]||(I[0]=O=>N(c)())},null,512),[[R,b.$t("CHAT_LIST.SORT_TOOLTIP_LABEL"),void 0,{right:!0}]]),N(l)?re((p(),v("div",{key:0,class:se(["mt-1 bg-n-alpha-3 backdrop-blur-[100px] border border-n-weak w-72 rounded-xl p-4 absolute z-40 top-full",{"ltr:left-0 rtl:right-0":!e.isOnExpandedLayout,"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},[h("div",Mfe,[h("span",Lfe,A(b.$t("CHAT_LIST.CHAT_SORT.STATUS")),1),y(yd,{"model-value":N(i),options:m.value,label:g.value,"sub-menu-position":e.isOnExpandedLayout?"left":"right","onUpdate:modelValue":_},null,8,["model-value","options","label","sub-menu-position"])]),h("div",kfe,[h("span",Dfe,A(b.$t("CHAT_LIST.CHAT_SORT.ORDER_BY")),1),y(yd,{"model-value":N(r),options:f.value,label:T.value,"sub-menu-position":e.isOnExpandedLayout?"left":"right","onUpdate:modelValue":E},null,8,["model-value","options","label","sub-menu-position"])])],2)),[[N(Co),()=>N(c)()]]):w("",!0)])}}},Bfe={components:{NextButton:oe},props:{isOnExpandedLayout:{type:Boolean,default:!1}},emits:["toggle"],methods:{toggle(){this.$emit("toggle")}}};function Ffe(e,t,n,s,o,a){const i=M("NextButton"),r=qe("tooltip");return re((p(),$(i,{icon:n.isOnExpandedLayout?"i-lucide-arrow-left-to-line":"i-lucide-arrow-right-to-line",slate:"",xs:"",faded:"",class:"flex-shrink-0 rtl:rotate-180 ltr:rotate-0",onClick:a.toggle},null,8,["icon","onClick"])),[[r,e.$t("CONVERSATION.SWITCH_VIEW_LAYOUT"),void 0,{left:!0}]])}const nA=Ae(Bfe,[["render",Ffe]]),Ufe={class:"flex items-center justify-center min-w-0"},Gfe=["title"],Vfe=["title"],Hfe={key:1,class:"px-2 py-1 my-0.5 mx-1 rounded-md capitalize bg-n-slate-3 text-xxs text-n-slate-12 shrink-0"},Wfe={class:"flex items-center gap-1"},zfe={class:"relative"},jfe={class:"relative"},Kfe={key:2,class:"relative"},Yfe={__name:"ChatListHeader",props:{pageTitle:{type:String,required:!0},hasAppliedFilters:{type:Boolean,required:!0},hasActiveFolders:{type:Boolean,required:!0},activeStatus:{type:String,required:!0},isOnExpandedLayout:{type:Boolean,required:!0},conversationStats:{type:Object,required:!0},isListLoading:{type:Boolean,required:!0}},emits:["addFolders","deleteFolders","resetFilters","basicFilterChange","filtersModal"],setup(e,{emit:t}){const n=e,s=t,{uiSettings:o,updateUISettings:a}=ln(),i=Oe("getCurrentAccountId"),r=Oe("accounts/isFeatureEnabledonAccount"),l=(g,T)=>{s("basicFilterChange",g,T)},c=C(()=>n.hasAppliedFilters||n.hasActiveFolders),u=C(()=>r.value(i.value,_t.CHATWOOT_V4)),d=C(()=>{var g;return((g=n.conversationStats)==null?void 0:g.allCount)||0}),m=C(()=>tO(d.value)),f=()=>{const{LAYOUT_TYPES:g}=It,{conversation_display_type:T=g.CONDENSED}=o.value,S=T===g.CONDENSED?g.EXPANDED:g.CONDENSED;a({conversation_display_type:S,previously_used_conversation_display_type:S})};return(g,T)=>{const S=qe("tooltip");return p(),v("div",{class:se(["flex items-center justify-between gap-2 px-3 h-12",{"border-b border-n-strong":c.value}])},[h("div",Ufe,[h("h1",{class:"text-base font-medium truncate text-n-slate-12",title:e.pageTitle},A(e.pageTitle),9,Gfe),d.value>0&&c.value&&!e.isListLoading?(p(),v("span",{key:0,class:"px-2 py-1 my-0.5 mx-1 rounded-md capitalize bg-n-slate-3 text-xxs text-n-slate-12 shrink-0",title:d.value},A(m.value),9,Vfe)):w("",!0),c.value?w("",!0):(p(),v("span",Hfe,A(g.$t(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${e.activeStatus}.TEXT`)),1))]),h("div",Wfe,[e.hasAppliedFilters&&!e.hasActiveFolders?(p(),v(pe,{key:0},[h("div",zfe,[re(y(oe,{icon:"i-lucide-save",slate:"",xs:"",faded:"",onClick:T[0]||(T[0]=_=>s("addFolders"))},null,512),[[S,g.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON"),void 0,{"top-end":!0}]]),h("div",{id:"saveFilterTeleportTarget",class:se(["absolute z-40 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)]),re(y(oe,{icon:"i-lucide-circle-x",ruby:"",faded:"",xs:"",onClick:T[1]||(T[1]=_=>s("resetFilters"))},null,512),[[S,g.$t("FILTER.CLEAR_BUTTON_LABEL"),void 0,{"top-end":!0}]])],64)):w("",!0),e.hasActiveFolders?(p(),v(pe,{key:1},[h("div",jfe,[re(y(oe,{id:"toggleConversationFilterButton",icon:"i-lucide-pen-line",slate:"",xs:"",faded:"",onClick:T[2]||(T[2]=_=>s("filtersModal"))},null,512),[[S,g.$t("FILTER.CUSTOM_VIEWS.EDIT.EDIT_BUTTON"),void 0,{"top-end":!0}]]),h("div",{id:"conversationFilterTeleportTarget",class:se(["absolute z-40 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)]),re(y(oe,{id:"toggleConversationFilterButton",icon:"i-lucide-trash-2",ruby:"",xs:"",faded:"",onClick:T[3]||(T[3]=_=>s("deleteFolders"))},null,512),[[S,g.$t("FILTER.CUSTOM_VIEWS.DELETE.DELETE_BUTTON"),void 0,{"top-end":!0}]])],64)):(p(),v("div",Kfe,[re(y(oe,{id:"toggleConversationFilterButton",icon:"i-lucide-list-filter",slate:"",xs:"",faded:"",onClick:T[4]||(T[4]=_=>s("filtersModal"))},null,512),[[S,g.$t("FILTER.TOOLTIP_LABEL"),void 0,{right:!0}]]),h("div",{id:"conversationFilterTeleportTarget",class:se(["absolute z-40 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)])),c.value?w("",!0):(p(),$(Pfe,{key:3,"is-on-expanded-layout":e.isOnExpandedLayout,onChangeFilter:l},null,8,["is-on-expanded-layout"])),u.value?(p(),$(nA,{key:4,"is-on-expanded-layout":e.isOnExpandedLayout,onToggle:f},null,8,["is-on-expanded-layout"])):w("",!0)])],2)}}},cn={EQUAL_TO:"equal_to",NOT_EQUAL_TO:"not_equal_to",IS_PRESENT:"is_present",IS_NOT_PRESENT:"is_not_present",CONTAINS:"contains",DOES_NOT_CONTAIN:"does_not_contain",IS_GREATER_THAN:"is_greater_than",IS_LESS_THAN:"is_less_than",DAYS_BEFORE:"days_before",STARTS_WITH:"starts_with"},Xfe=[cn.IS_PRESENT,cn.IS_NOT_PRESENT],qfe={[cn.DAYS_BEFORE]:"plainText"},Zfe={[cn.EQUAL_TO]:"i-ph-equals-bold",[cn.NOT_EQUAL_TO]:"i-ph-not-equals-bold",[cn.IS_PRESENT]:"i-ph-member-of-bold",[cn.IS_NOT_PRESENT]:"i-ph-not-member-of-bold",[cn.CONTAINS]:"i-ph-superset-of-bold",[cn.DOES_NOT_CONTAIN]:"i-ph-not-superset-of-bold",[cn.IS_GREATER_THAN]:"i-ph-greater-than-bold",[cn.IS_LESS_THAN]:"i-ph-less-than-bold",[cn.DAYS_BEFORE]:"i-ph-calendar-minus-bold",[cn.STARTS_WITH]:"i-ph-caret-line-right-bold"};function sA(){const{t:e}=Me(),t=C(()=>Object.values(cn).reduce((l,c)=>(l[c]={value:c,label:e(`FILTER.OPERATOR_LABELS.${c}`),hasInput:!Xfe.includes(c),inputOverride:qfe[c]||null,icon:yn("span",{class:`${Zfe[c]} !text-n-blue-text`})},l),{})),n=C(()=>[t.value[cn.EQUAL_TO],t.value[cn.NOT_EQUAL_TO]]),s=C(()=>[t.value[cn.EQUAL_TO],t.value[cn.NOT_EQUAL_TO],t.value[cn.IS_PRESENT],t.value[cn.IS_NOT_PRESENT]]),o=C(()=>[t.value[cn.EQUAL_TO],t.value[cn.NOT_EQUAL_TO],t.value[cn.CONTAINS],t.value[cn.DOES_NOT_CONTAIN]]),a=C(()=>[t.value[cn.EQUAL_TO],t.value[cn.NOT_EQUAL_TO],t.value[cn.IS_PRESENT],t.value[cn.IS_NOT_PRESENT],t.value[cn.IS_GREATER_THAN],t.value[cn.IS_LESS_THAN]]),i=C(()=>[t.value[cn.IS_GREATER_THAN],t.value[cn.IS_LESS_THAN],t.value[cn.DAYS_BEFORE]]);return{operators:t,equalityOperators:n,presenceOperators:s,containmentOperators:o,comparisonOperators:a,dateOperators:i,getOperatorTypes:l=>{switch(l){case"list":return n.value;case"text":return o.value;case"number":return n.value;case"link":return n.value;case"date":return a.value;case"checkbox":return n.value;default:return n.value}}}}const Cn={STATUS:"status",PRIORITY:"priority",ASSIGNEE_ID:"assignee_id",INBOX_ID:"inbox_id",TEAM_ID:"team_id",DISPLAY_ID:"display_id",CAMPAIGN_ID:"campaign_id",LABELS:"labels",BROWSER_LANGUAGE:"browser_language",COUNTRY_CODE:"country_code",REFERER:"referer",CREATED_AT:"created_at",LAST_ACTIVITY_AT:"last_activity_at"},as={NAME:"name",EMAIL:"email",PHONE_NUMBER:"phone_number",IDENTIFIER:"identifier",COUNTRY_CODE:"country_code",CITY:"city",CREATED_AT:"created_at",LAST_ACTIVITY_AT:"last_activity_at",REFERER:"referer",BLOCKED:"blocked"},Qfe=e=>{switch(e){case"date":return"date";case"text":return"plainText";case"list":return"searchSelect";case"checkbox":return"booleanSelect";default:return"plainText"}},aA=(e,t,n="conversation")=>{const s=Object.values(n==="conversation"?Cn:as);return e.filter(o=>!s.includes(o.attributeKey)).map(o=>({attributeKey:o.attributeKey,value:o.attributeKey,attributeName:o.attributeDisplayName,label:o.attributeDisplayName,inputType:Qfe(o.attributeDisplayType),filterOperators:t(o.attributeDisplayType),options:o.attributeDisplayType==="list"?o.attributeValues.map(a=>({id:a,name:a})):[],attributeModel:"customAttributes"}))},Z1=e=>(e==null?void 0:e.replaceAll("_"," "))??"";function Jfe(){const{t:e}=Me(),t=Oe("attributes/getConversationAttributes"),n=Oe("labels/getLabels"),s=Oe("agents/getAgents"),o=Oe("inboxes/getInboxes"),a=Oe("teams/getTeams"),i=Oe("campaigns/getAllCampaigns"),{equalityOperators:r,presenceOperators:l,containmentOperators:c,dateOperators:u,getOperatorTypes:d}=sA(),m=C(()=>aA(t.value,d,"conversation"));return{filterTypes:C(()=>[{attributeKey:Cn.STATUS,value:Cn.STATUS,attributeName:e("FILTER.ATTRIBUTES.STATUS"),label:e("FILTER.ATTRIBUTES.STATUS"),inputType:"multiSelect",options:["open","resolved","pending","snoozed","all"].map(g=>({id:g,name:e(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${g}.TEXT`)})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Cn.PRIORITY,value:Cn.PRIORITY,attributeName:e("FILTER.ATTRIBUTES.PRIORITY"),label:e("FILTER.ATTRIBUTES.PRIORITY"),inputType:"multiSelect",options:["low","medium","high","urgent"].map(g=>({id:g,name:e(`CONVERSATION.PRIORITY.OPTIONS.${g.toUpperCase()}`)})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Cn.ASSIGNEE_ID,value:Cn.ASSIGNEE_ID,attributeName:e("FILTER.ATTRIBUTES.ASSIGNEE_NAME"),label:e("FILTER.ATTRIBUTES.ASSIGNEE_NAME"),inputType:"searchSelect",options:s.value.map(g=>({id:g.id,name:g.name})),dataType:"text",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Cn.INBOX_ID,value:Cn.INBOX_ID,attributeName:e("FILTER.ATTRIBUTES.INBOX_NAME"),label:e("FILTER.ATTRIBUTES.INBOX_NAME"),inputType:"searchSelect",options:o.value.map(g=>({...g,icon:$y(g).value})),dataType:"text",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Cn.TEAM_ID,value:Cn.TEAM_ID,attributeName:e("FILTER.ATTRIBUTES.TEAM_NAME"),label:e("FILTER.ATTRIBUTES.TEAM_NAME"),inputType:"searchSelect",options:a.value,dataType:"number",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Cn.DISPLAY_ID,value:Cn.DISPLAY_ID,attributeName:e("FILTER.ATTRIBUTES.CONVERSATION_IDENTIFIER"),label:e("FILTER.ATTRIBUTES.CONVERSATION_IDENTIFIER"),inputType:"plainText",datatype:"number",filterOperators:c.value,attributeModel:"standard"},{attributeKey:Cn.CAMPAIGN_ID,value:Cn.CAMPAIGN_ID,attributeName:e("FILTER.ATTRIBUTES.CAMPAIGN_NAME"),label:e("FILTER.ATTRIBUTES.CAMPAIGN_NAME"),inputType:"searchSelect",options:i.value.map(g=>({id:g.id,name:g.title})),datatype:"number",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Cn.LABELS,value:Cn.LABELS,attributeName:e("FILTER.ATTRIBUTES.LABELS"),label:e("FILTER.ATTRIBUTES.LABELS"),inputType:"multiSelect",options:n.value.map(g=>({id:g.title,name:g.title,icon:yn("span",{class:"rounded-full",style:{backgroundColor:g.color,height:"6px",width:"6px"}})})),dataType:"text",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Cn.BROWSER_LANGUAGE,value:Cn.BROWSER_LANGUAGE,attributeName:e("FILTER.ATTRIBUTES.BROWSER_LANGUAGE"),label:e("FILTER.ATTRIBUTES.BROWSER_LANGUAGE"),inputType:"searchSelect",options:Gf,dataType:"text",filterOperators:r.value,attributeModel:"additional"},{attributeKey:Cn.COUNTRY_CODE,value:Cn.COUNTRY_CODE,attributeName:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),label:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),inputType:"searchSelect",options:xa,dataType:"text",filterOperators:r.value,attributeModel:"additional"},{attributeKey:Cn.REFERER,value:Cn.REFERER,attributeName:e("FILTER.ATTRIBUTES.REFERER_LINK"),label:e("FILTER.ATTRIBUTES.REFERER_LINK"),inputType:"plainText",dataType:"text",filterOperators:c.value,attributeModel:"additional"},{attributeKey:Cn.CREATED_AT,value:Cn.CREATED_AT,attributeName:e("FILTER.ATTRIBUTES.CREATED_AT"),label:e("FILTER.ATTRIBUTES.CREATED_AT"),inputType:"date",dataType:"text",filterOperators:u.value,attributeModel:"standard"},{attributeKey:Cn.LAST_ACTIVITY_AT,value:Cn.LAST_ACTIVITY_AT,attributeName:e("FILTER.ATTRIBUTES.LAST_ACTIVITY"),label:e("FILTER.ATTRIBUTES.LAST_ACTIVITY"),inputType:"date",dataType:"text",filterOperators:u.value,attributeModel:"standard"},...m.value])}}const ege=["onClick"],tge={class:"truncate"},nge={key:0,class:"px-3 border-r rtl:border-l rtl:border-r-0 border-n-weak text-n-slate-12 text-sm flex gap-2 items-center max-w-[100px]"},sge={class:"truncate"},age={class:"flex items-center border-none px-3 gap-2"},oge={class:"text-n-slate-11"},ige={__name:"MultiSelect",props:hn({options:{type:Array,required:!0},maxChips:{type:Number,default:3}},{modelValue:{type:[Array,String],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{t}=Me(),n=wn(e,"modelValue"),s=C(()=>!(!n.value||!Array.isArray(n.value)||n.value.length===0)),o=C(()=>s.value?n.value.map(u=>u.id):[]),a=C(()=>s.value?e.options.filter(u=>o.value.includes(u.id)):[]),i=C(()=>s.value?a.value.length===e.maxChips+1?a.value:a.value.slice(0,e.maxChips):[]),r=C(()=>s.value?a.value.length===e.maxChips+1?[]:a.value.slice(e.maxChips):[]),l=C(()=>s.value?r.value.map(u=>u.name).join(", "):""),c=u=>{const d={id:u.id,name:u.name},m=d.id;if(!s.value){n.value=[d];return}o.value.includes(m)?n.value=n.value.filter(f=>f.id!==m):n.value=[...n.value,d]};return(u,d)=>{const m=qe("tooltip");return p(),$(cr,null,{trigger:K(({toggle:f})=>[s.value?(p(),v("button",{key:0,class:"bg-n-alpha-2 py-2 rounded-lg h-8 flex items-center px-0",onClick:f},[(p(!0),v(pe,null,Ne(i.value,g=>(p(),v("div",{key:g.name,class:"px-3 border-r rtl:border-l rtl:border-r-0 border-n-weak text-n-slate-12 text-sm flex gap-2 items-center max-w-[100px]"},[g.icon?(p(),$(Rt,{key:0,icon:g.icon,class:"flex-shrink-0"},null,8,["icon"])):w("",!0),h("span",tge,A(g.name),1)]))),128)),r.value.length>0?re((p(),v("div",nge,[h("span",sge,A(N(t)("COMBOBOX.MORE",{count:r.value.length})),1)])),[[m,l.value,void 0,{top:!0}]]):w("",!0),h("div",age,[y(Rt,{icon:"i-lucide-plus"})])],8,ege)):(p(),$(oe,{key:1,sm:"",slate:"",faded:"",onClick:f},{icon:K(()=>[y(Rt,{icon:"i-lucide-plus",class:"text-n-slate-11"})]),default:K(()=>[h("span",oge,A(N(t)("COMBOBOX.PLACEHOLDER")),1)]),_:2},1032,["onClick"]))]),default:K(()=>[y(ur,{class:"top-0 min-w-48 z-50",strong:""},{default:K(()=>[y(rl,{class:"max-h-80 overflow-scroll"},{default:K(()=>[(p(!0),v(pe,null,Ne(e.options,f=>(p(),$(Ra,{key:f.id,icon:f.icon,"preserve-open":"",onClick:g=>c(f)},{label:K(()=>[Re(A(f.name)+" ",1),o.value.includes(f.id)?(p(),$(Rt,{key:0,icon:"i-lucide-check",class:"bg-n-blue-text pointer-events-none"})):w("",!0)]),_:2},1032,["icon","onClick"]))),128))]),_:1})]),_:1})]),_:1})}}},rge={class:"list-none"},lge=["type","placeholder"],cge={key:0,class:"text-sm text-n-ruby-11"},Sd={__name:"ConditionRow",props:hn({showQueryOperator:{type:Boolean,default:!1},filterTypes:{type:Array,required:!0}},{attributeKey:{type:String,required:!0},attributeKeyModifiers:{},values:{type:[String,Number,Array,Object],required:!0},valuesModifiers:{},filterOperator:{type:String,required:!0},filterOperatorModifiers:{},queryOperator:{type:String,required:!1,default:void 0,validator:e=>["and","or"].includes(e)},queryOperatorModifiers:{}}),emits:hn(["remove"],["update:attributeKey","update:values","update:filterOperator","update:queryOperator"]),setup(e,{expose:t,emit:n}){const s=n,{t:o}=Me(),a=X(!1),i=wn(e,"attributeKey"),r=wn(e,"values"),l=wn(e,"filterOperator"),c=wn(e,"queryOperator"),u=R=>e.filterTypes.find(O=>O.attributeKey===R),d=C(()=>u(i.value)),m=(R,O)=>{const x=R.filterOperators.find(L=>L.value===O);return x||R.filterOperators[0]},f=C(()=>m(d.value,l.value)),g=(R,O)=>R.inputOverride??O.inputType,T=C(()=>g(f.value,d.value)),S=C(()=>[{label:o("FILTER.QUERY_DROPDOWN_LABELS.AND"),value:"and",icon:yn("span",{class:"i-lucide-ampersands !text-n-blue-text"})},{label:o("FILTER.QUERY_DROPDOWN_LABELS.OR"),value:"or",icon:yn("span",{class:"i-woot-logic-or !text-n-blue-text"})}]),_=C(()=>[{id:!0,name:o("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:o("FILTER.ATTRIBUTE_LABELS.FALSE")}]),E=C(()=>vy(As({attributeKey:i.value,filterOperator:l.value,values:r.value}))),b=R=>{const O=u(R),x=m(O,l.value),L=g(x,O);L==="multiSelect"?r.value=[]:["searchSelect","booleanSelect"].includes(L)?r.value={}:r.value="",l.value=x.value};return ct([i,r,l],()=>{a.value=!1}),t({validate:()=>(a.value=!0,!E.value)}),(R,O)=>(p(),v("li",rge,[h("div",{class:se(["flex items-center gap-2 rounded-md",{"animate-wiggle":a.value&&E.value}])},[e.showQueryOperator?(p(),$(Hr,{key:0,modelValue:c.value,"onUpdate:modelValue":O[0]||(O[0]=x=>c.value=x),variant:"faded","hide-icon":"",class:"text-sm",options:S.value},null,8,["modelValue","options"])):w("",!0),y(Hr,{modelValue:i.value,"onUpdate:modelValue":[O[1]||(O[1]=x=>i.value=x),b],variant:"faded",options:e.filterTypes},null,8,["modelValue","options"]),y(Hr,{modelValue:l.value,"onUpdate:modelValue":O[2]||(O[2]=x=>l.value=x),variant:"ghost",options:d.value.filterOperators},null,8,["modelValue","options"]),f.value.hasInput?(p(),v(pe,{key:1},[T.value==="multiSelect"?(p(),$(ige,{key:0,modelValue:r.value,"onUpdate:modelValue":O[3]||(O[3]=x=>r.value=x),options:d.value.options},null,8,["modelValue","options"])):T.value==="searchSelect"?(p(),$(Qm,{key:1,modelValue:r.value,"onUpdate:modelValue":O[4]||(O[4]=x=>r.value=x),options:d.value.options},null,8,["modelValue","options"])):T.value==="booleanSelect"?(p(),$(Qm,{key:2,modelValue:r.value,"onUpdate:modelValue":O[5]||(O[5]=x=>r.value=x),"disable-search":"",options:_.value},null,8,["modelValue","options"])):re((p(),v("input",{key:3,"onUpdate:modelValue":O[6]||(O[6]=x=>r.value=x),type:T.value==="date"?"date":"text",class:"py-1.5 px-3 text-n-slate-12 bg-n-alpha-1 text-sm rounded-lg reset-base",placeholder:N(o)("FILTER.INPUT_PLACEHOLDER")},null,8,lge)),[[Cf,r.value]])],64)):w("",!0),y(oe,{sm:"",solid:"",slate:"",icon:"i-lucide-trash",onClick:O[7]||(O[7]=Fe(x=>s("remove"),["stop"]))})],2),a.value&&E.value?(p(),v("span",cge,A(N(o)(`FILTER.ERRORS.${E.value}`)),1)):w("",!0)]))}},uge={class:"z-40 max-w-3xl lg:w-[750px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},dge={class:"text-base font-medium leading-6 text-n-slate-12"},pge={key:0},hge={class:"border-b border-n-weak pb-6"},mge={class:"text-n-slate-11 text-sm mb-2"},fge=["placeholder"],gge={class:"grid gap-4 list-none"},_ge={class:"flex gap-2 justify-between"},vge={class:"flex gap-2"},bge={__name:"ConversationFilter",props:hn({isFolderView:{type:Boolean,default:!1},folderName:{type:String,default:""}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:hn(["applyFilter","updateFolder","close"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,{filterTypes:o}=Jfe(),a=wn(e,"modelValue"),i=X(n.folderName),r={attributeKey:"status",filterOperator:"equal_to",values:[],queryOperator:"and"},{t:l}=Me(),c=pt(),u=()=>{a.value=[{...r}]},d=b=>{a.value.length===1?u():a.value.splice(b,1)},m=()=>{a.value.push({...r})},f=Is("conditionsRef"),g=()=>f.value.every(b=>b.validate()),T=()=>{g()&&s("updateFolder",a.value,i.value)};function S(){g()&&(c.dispatch("setConversationFilters",As(JSON.parse(JSON.stringify(a.value)))),s("applyFilter",a.value),Pt(ua.APPLY_FILTER,{appliedFilters:a.value.map(b=>({key:b.attributeKey,operator:b.filterOperator,queryOperator:b.queryOperator}))}))}const _=C(()=>n.isFolderView?l("FILTER.EDIT_CUSTOM_FILTER"):l("FILTER.TITLE"));Sc(()=>s("close"));const E=[()=>s("close"),{ignore:["#toggleConversationFilterButton"]}];return(b,I)=>re((p(),v("div",uge,[h("h3",dge,A(_.value),1),n.isFolderView?(p(),v("div",pge,[h("label",hge,[h("div",mge,A(N(l)("FILTER.FOLDER_LABEL")),1),re(h("input",{"onUpdate:modelValue":I[0]||(I[0]=R=>i.value=R),class:"py-1.5 px-3 text-n-slate-12 bg-n-alpha-1 text-sm rounded-lg reset-base w-full",placeholder:N(l)("FILTER.INPUT_PLACEHOLDER")},null,8,fge),[[mt,i.value]])])])):w("",!0),h("ul",gge,[(p(!0),v(pe,null,Ne(a.value,(R,O)=>(p(),v(pe,{key:R.id},[O===0?(p(),$(Sd,{ref_for:!0,ref_key:"conditionsRef",ref:f,key:`filter-${R.attributeKey}-0`,"attribute-key":R.attributeKey,"onUpdate:attributeKey":x=>R.attributeKey=x,"filter-operator":R.filterOperator,"onUpdate:filterOperator":x=>R.filterOperator=x,values:R.values,"onUpdate:values":x=>R.values=x,"filter-types":N(o),"show-query-operator":!1,onRemove:x=>d(O)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","values","onUpdate:values","filter-types","onRemove"])):(p(),$(Sd,{key:`filter-${R.attributeKey}-${O}`,ref_for:!0,ref_key:"conditionsRef",ref:f,"attribute-key":R.attributeKey,"onUpdate:attributeKey":x=>R.attributeKey=x,"filter-operator":R.filterOperator,"onUpdate:filterOperator":x=>R.filterOperator=x,"query-operator":a.value[O-1].queryOperator,"onUpdate:queryOperator":x=>a.value[O-1].queryOperator=x,values:R.values,"onUpdate:values":x=>R.values=x,"show-query-operator":"","filter-types":N(o),onRemove:x=>d(O)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","query-operator","onUpdate:queryOperator","values","onUpdate:values","filter-types","onRemove"]))],64))),128))]),h("div",_ge,[y(oe,{sm:"",ghost:"",blue:"",onClick:m},{default:K(()=>[Re(A(b.$t("FILTER.ADD_NEW_FILTER")),1)]),_:1}),h("div",vge,[y(oe,{sm:"",faded:"",slate:"",onClick:u},{default:K(()=>[Re(A(N(l)("FILTER.CLEAR_BUTTON_LABEL")),1)]),_:1}),e.isFolderView?(p(),$(oe,{key:0,sm:"",solid:"",blue:"",disabled:!i.value,onClick:T},{default:K(()=>[Re(A(N(l)("FILTER.UPDATE_BUTTON_LABEL")),1)]),_:1},8,["disabled"])):(p(),$(oe,{key:1,sm:"",solid:"",blue:"",onClick:S},{default:K(()=>[Re(A(N(l)("FILTER.SUBMIT_BUTTON_LABEL")),1)]),_:1}))])])])),[[N(Co),E]])}},Ege={components:{NextButton:oe},directives:{onClickOutside:Co},props:{filterType:{type:Number,default:0},customViewsQuery:{type:Object,default:()=>{}},openLastSavedItem:{type:Function,default:()=>{}}},emits:["close"],setup(){return{v$:bt()}},data(){return{show:!0,name:""}},computed:{isButtonDisabled(){return this.v$.name.$invalid}},validations:{name:{required:Ye,minLength:Qt(1)}},methods:{onClose(){this.$emit("close")},async saveCustomViews(){if(this.v$.$touch(),!this.v$.$invalid){try{await this.$store.dispatch("customViews/create",{name:this.name,filter_type:this.filterType,query:this.customViewsQuery}),this.alertMessage=this.filterType===0?this.$t("FILTER.CUSTOM_VIEWS.ADD.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.SUCCESS_MESSAGE"),this.onClose(),Pt(sr.SAVE_FILTER,{type:this.filterType===0?"folder":"segment"})}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.filterType===0?t:this.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.ERROR_MESSAGE")}finally{ce(this.alertMessage)}this.openLastSavedItem()}}}},Tge={class:"z-40 max-w-3xl lg:w-[500px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},yge={class:"text-base font-medium leading-6 text-n-slate-12"},Sge=["placeholder"],Age={key:0,class:"text-xs text-n-ruby-11 ml-1 rtl:mr-1"},Ige={class:"flex flex-row justify-end w-full gap-2"};function Cge(e,t,n,s,o,a){const i=M("NextButton"),r=qe("on-click-outside");return re((p(),v("div",Tge,[h("h3",yge,A(e.$t("FILTER.CUSTOM_VIEWS.ADD.TITLE")),1),h("form",{class:"w-full grid gap-6",onSubmit:t[2]||(t[2]=Fe((...l)=>a.saveCustomViews&&a.saveCustomViews(...l),["prevent"]))},[h("label",{class:se({error:s.v$.name.$error})},[re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.name=l),class:"py-1.5 px-3 text-n-slate-12 bg-n-alpha-1 text-sm rounded-lg reset-base w-full",placeholder:e.$t("FILTER.CUSTOM_VIEWS.ADD.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.name.$touch&&s.v$.name.$touch(...l))},null,40,Sge),[[mt,o.name]]),s.v$.name.$error?(p(),v("span",Age,A(e.$t("FILTER.CUSTOM_VIEWS.ADD.ERROR_MESSAGE")),1)):w("",!0)],2),h("div",Ige,[y(i,{faded:"",slate:"",sm:"",onClick:Fe(a.onClose,["prevent"])},{default:K(()=>[Re(A(e.$t("FILTER.CUSTOM_VIEWS.ADD.CANCEL_BUTTON")),1)]),_:1},8,["onClick"]),y(i,{solid:"",blue:"",sm:"",disabled:a.isButtonDisabled},{default:K(()=>[Re(A(e.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON")),1)]),_:1},8,["disabled"])])],32)])),[[r,[()=>e.$emit("close"),{ignore:["#saveFilterTeleportTarget"]}]]])}const Oge=Ae(Ege,[["render",Cge]]),Nge={__name:"ChatTypeTabs",props:{items:{type:Array,default:()=>[]},activeTab:{type:String,default:It.ASSIGNEE_TYPE.ME}},emits:["chatTabChange"],setup(e,{emit:t}){const n=e,s=t,o=C(()=>n.items.findIndex(r=>r.key===n.activeTab)),a=r=>{if(r>=0&&r<n.items.length){const l=n.items[r];l.key!==n.activeTab&&s("chatTabChange",l.key)}};return $s({"Alt+KeyN":{action:()=>{if(n.activeTab===It.ASSIGNEE_TYPE.ALL)a(0);else{const r=(o.value+1)%n.items.length;a(r)}}}}),(r,l)=>{const c=M("woot-tabs-item"),u=M("woot-tabs");return p(),$(u,{index:o.value,class:"w-full px-3 -mt-1 py-0 tab--chat-type",onChange:a},{default:K(()=>[(p(!0),v(pe,null,Ne(e.items,(d,m)=>(p(),$(c,{key:d.key,class:"text-sm",index:m,name:d.name,count:d.count},null,8,["index","name","count"]))),128))]),_:1},8,["index"])}}},wge=Ae(Nge,[["__scopeId","data-v-f5894ce1"]]),Rge=(e,t)=>e&&t?e.created_at>=t.created_at?e:t:e||t,xge=(e=[])=>{const t=[];return e.forEach(n=>{n.source_id?t.findIndex(o=>n.source_id===o.source_id)<0&&t.push(n):t.push(n)}),t},$ge=e=>{const t=e.messages[e.messages.length-1],n=e.messages.filter(a=>a.message_type!==2),s=n[n.length-1],o=e.last_non_activity_message;return!s&&!o?t:Rge(s,o)},Mge=(e,t)=>e.filter(n=>n.created_at*1e3<=t*1e3),Lge=(e,t)=>e.filter(n=>n.created_at*1e3>t*1e3),kge={name:"MessagePreview",props:{message:{type:Object,required:!0},showMessageType:{type:Boolean,default:!0},defaultEmptyMessage:{type:String,default:""}},setup(){const{getPlainText:e}=ya();return{getPlainText:e}},computed:{messageByAgent(){const{message_type:e}=this.message;return e===H_.OUTGOING},isMessageAnActivity(){const{message_type:e}=this.message;return e===H_.ACTIVITY},isMessagePrivate(){const{private:e}=this.message;return e},parsedLastMessage(){const{content_attributes:e}=this.message,{email:{subject:t}={}}=e||{};return this.getPlainText(t||this.message.content)},lastMessageFileType(){const[{file_type:e}={}]=this.message.attachments;return e},attachmentIcon(){return eC[this.lastMessageFileType]},attachmentMessageContent(){return`CHAT_LIST.ATTACHMENTS.${this.lastMessageFileType}.CONTENT`},isMessageSticker(){return this.message&&this.message.content_type==="sticker"}}},Dge={class:"overflow-hidden text-ellipsis whitespace-nowrap"},Pge={key:1},Bge={key:2},Fge={key:3},Uge={key:4};function Gge(e,t,n,s,o,a){const i=M("fluent-icon");return p(),v("div",Dge,[n.showMessageType?(p(),v(pe,{key:0},[a.isMessagePrivate?(p(),$(i,{key:0,size:"16",class:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",icon:"lock-closed"})):a.messageByAgent?(p(),$(i,{key:1,size:"16",class:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",icon:"arrow-reply"})):a.isMessageAnActivity?(p(),$(i,{key:2,size:"16",class:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",icon:"info"})):w("",!0)],64)):w("",!0),n.message.content&&a.isMessageSticker?(p(),v("span",Pge,[y(i,{size:"16",class:"-mt-0.5 align-middle inline-block text-slate-600 dark:text-slate-300",icon:"image"}),Re(" "+A(e.$t("CHAT_LIST.ATTACHMENTS.image.CONTENT")),1)])):n.message.content?(p(),v("span",Bge,A(a.parsedLastMessage),1)):n.message.attachments?(p(),v("span",Fge,[a.attachmentIcon&&n.showMessageType?(p(),$(i,{key:0,size:"16",class:"-mt-0.5 align-middle inline-block text-slate-600 dark:text-slate-300",icon:a.attachmentIcon},null,8,["icon"])):w("",!0),Re(" "+A(e.$t(`${a.attachmentMessageContent}`)),1)])):(p(),v("span",Uge,A(n.defaultEmptyMessage||e.$t("CHAT_LIST.NO_CONTENT")),1))])}const a_=Ae(kge,[["render",Gge]]),Vge={props:{inbox:{type:Object,default:()=>{}}},computed:{computedInboxClass(){const{phone_number:e,channel_type:t}=this.inbox;return zO(t,e)}}},Hge={class:"inbox--name inline-flex items-center py-0.5 px-0 leading-3 whitespace-nowrap bg-none text-n-slate-11 text-xs my-0 mx-2.5"};function Wge(e,t,n,s,o,a){const i=M("fluent-icon");return p(),v("div",Hge,[y(i,{class:"mr-0.5 rtl:ml-0.5 rtl:mr-0",icon:a.computedInboxClass,size:"12"},null,8,["icon"]),Re(" "+A(n.inbox.name),1)])}const o_=Ae(Vge,[["render",Wge]]),um=(e,t)=>e.filter(n=>n.availability_status===t).sort((n,s)=>n.name.localeCompare(s.name)),oA=e=>{const t=um(e,"online"),n=um(e,"busy"),s=um(e,"offline");return[...t,...n,...s]},iA=(e,t,n)=>e.map(o=>o.id===t.id?{...o,availability_status:t.accounts.find(a=>a.id===n).availability_status}:o),zge={components:{Thumbnail:Hn},props:{option:{type:Object,default:()=>{}},variant:{type:String,default:"default"}}},jge={class:"menu text-slate-800 dark:text-slate-100 min-h-7 min-w-0",role:"button"},Kge={class:"menu-label truncate min-w-0 flex-1"};function Yge(e,t,n,s,o,a){const i=M("fluent-icon"),r=M("Thumbnail");return p(),v("div",jge,[n.variant==="icon"&&n.option.icon?(p(),$(i,{key:0,icon:n.option.icon,size:"14",class:"flex-shrink-0"},null,8,["icon"])):w("",!0),n.variant==="label"&&n.option.color?(p(),v("span",{key:1,class:"label-pill flex-shrink-0",style:Ht({backgroundColor:n.option.color})},null,4)):w("",!0),n.variant==="agent"?(p(),$(r,{key:2,username:n.option.label,src:n.option.thumbnail,status:n.option.status,size:"20px",class:"flex-shrink-0"},null,8,["username","src","status"])):w("",!0),h("p",Kge,A(n.option.label),1)])}const rA=Ae(zge,[["render",Yge],["__scopeId","data-v-4f447fb7"]]),Xge={class:"flex items-center h-4"},qge={class:"my-0 mx-2 text-xs"},Zge={__name:"menuItemWithSubmenu",props:{option:{type:Object,default:()=>{}},subMenuAvailable:{type:Boolean,default:!0}},setup(e){const t=Is("menuRef"),{width:n,height:s}=qf(),{bottom:o,right:a}=ad(t),i=C(()=>s.value-o.value<240?"bottom-0":"top-0"),r=C(()=>n.value-a.value<240?"right-full":"left-full"),l=C(()=>[i.value,r.value]);return(c,u)=>{const d=M("fluent-icon");return p(),v("div",{ref_key:"menuRef",ref:t,class:se(["text-slate-800 dark:text-slate-100 menu-with-submenu min-width-calc w-full p-1 flex items-center h-7 rounded-md relative bg-n-alpha-3/50 backdrop-blur-[100px] justify-between hover:bg-n-brand/10 cursor-pointer dark:hover:bg-n-solid-3",e.subMenuAvailable?"":"opacity-50 cursor-not-allowed"])},[h("div",Xge,[y(d,{icon:e.option.icon,size:"14",class:"menu-icon"},null,8,["icon"]),h("p",qge,A(e.option.label),1)]),y(d,{icon:"chevron-right",size:"12"}),e.subMenuAvailable?(p(),v("div",{key:0,class:se(["submenu bg-n-alpha-3 backdrop-blur-[100px] p-1 shadow-lg rounded-md absolute hidden max-h-[15rem] overflow-y-auto overflow-x-hidden cursor-pointer",l.value])},[We(c.$slots,"default",{},void 0,!0)],2)):w("",!0)],2)}}},Qge=Ae(Zge,[["__scopeId","data-v-ae74c5e4"]]),Jge={components:{Spinner:bs}},e_e={class:"agent-placeholder"};function t_e(e,t,n,s,o,a){const i=M("Spinner");return p(),v("div",e_e,[y(i),h("p",null,A(e.$t("CONVERSATION.CARD_CONTEXT_MENU.AGENTS_LOADING")),1)])}const n_e=Ae(Jge,[["render",t_e],["__scopeId","data-v-315e92c0"]]),s_e={components:{MenuItem:rA,MenuItemWithSubmenu:Qge,AgentLoadingPlaceholder:n_e},props:{chatId:{type:Number,default:null},status:{type:String,default:""},hasUnreadMessages:{type:Boolean,default:!1},inboxId:{type:Number,default:null},priority:{type:String,default:null}},emits:["updateConversation","assignPriority","markAsUnread","markAsRead","assignAgent","assignTeam","assignLabel","deleteConversation"],setup(){const{isAdmin:e}=ka();return{isAdmin:e}},data(){return{STATUS_TYPE:It.STATUS_TYPE,readOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_READ"),icon:"mail"},unreadOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_UNREAD"),icon:"mail"},statusMenuConfig:[{key:It.STATUS_TYPE.RESOLVED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.RESOLVED"),icon:"checkmark"},{key:It.STATUS_TYPE.OPEN,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.REOPEN"),icon:"arrow-redo"},{key:It.STATUS_TYPE.PENDING,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.PENDING"),icon:"book-clock"}],snoozeOption:{key:It.STATUS_TYPE.SNOOZED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.SNOOZE.TITLE"),icon:"snooze"},priorityConfig:{key:"priority",label:this.$t("CONVERSATION.PRIORITY.TITLE"),icon:"warning",options:[{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),key:null},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),key:"urgent"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),key:"high"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),key:"medium"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),key:"low"}].filter(e=>e.key!==this.priority)},labelMenuConfig:{key:"label",icon:"tag",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_LABEL")},agentMenuConfig:{key:"agent",icon:"person-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_AGENT")},teamMenuConfig:{key:"team",icon:"people-team-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_TEAM")},deleteOption:{key:"delete",icon:"delete",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.DELETE")}}},computed:{...lt({labels:"labels/getLabels",teams:"teams/getTeams",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags",currentUser:"getCurrentUser",currentAccountId:"getCurrentAccountId"}),filteredAgentOnAvailability(){const e=this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.inboxId),t=iA(e,this.currentUser,this.currentAccountId);return oA(t)},assignableAgents(){return[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"},...this.filteredAgentOnAvailability]},showSnooze(){return this.status===It.STATUS_TYPE.OPEN}},mounted(){this.$store.dispatch("inboxAssignableAgents/fetch",[this.inboxId])},methods:{toggleStatus(e,t){this.$emit("updateConversation",e,t)},async snoozeConversation(){await this.$store.dispatch("setContextMenuChatId",this.chatId),document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},assignPriority(e){this.$emit("assignPriority",e)},deleteConversation(){this.$emit("deleteConversation",this.chatId)},show(e){return this.status!==e},generateMenuLabelConfig(e,t="text"){return{key:e.id,...t==="icon"&&{icon:e.icon},...t==="label"&&{color:e.color},...t==="agent"&&{thumbnail:e.thumbnail},...t==="agent"&&{status:e.availability_status},...t==="text"&&{label:e.label},...t==="label"&&{label:e.title},...t==="agent"&&{label:e.name},...t==="team"&&{label:e.name}}}}},a_e={class:"p-1 rounded-md shadow-xl bg-n-alpha-3/50 backdrop-blur-[100px]"};function o_e(e,t,n,s,o,a){const i=M("MenuItem"),r=M("MenuItemWithSubmenu"),l=M("AgentLoadingPlaceholder");return p(),v("div",a_e,[n.hasUnreadMessages?(p(),$(i,{key:1,option:o.readOption,variant:"icon",onClick:t[1]||(t[1]=Fe(c=>e.$emit("markAsRead"),["stop"]))},null,8,["option"])):(p(),$(i,{key:0,option:o.unreadOption,variant:"icon",onClick:t[0]||(t[0]=Fe(c=>e.$emit("markAsUnread"),["stop"]))},null,8,["option"])),t[4]||(t[4]=h("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1)),(p(!0),v(pe,null,Ne(o.statusMenuConfig,c=>(p(),v(pe,null,[a.show(c.key)?(p(),$(i,{key:c.key,option:c,variant:"icon",onClick:Fe(u=>a.toggleStatus(c.key,null),["stop"])},null,8,["option","onClick"])):w("",!0)],64))),256)),a.showSnooze?(p(),$(i,{key:2,option:o.snoozeOption,variant:"icon",onClick:t[2]||(t[2]=Fe(c=>a.snoozeConversation(),["stop"]))},null,8,["option"])):w("",!0),t[5]||(t[5]=h("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1)),y(r,{option:o.priorityConfig},{default:K(()=>[(p(!0),v(pe,null,Ne(o.priorityConfig.options,(c,u)=>(p(),$(i,{key:u,option:c,onClick:Fe(d=>a.assignPriority(c.key),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option"]),y(r,{option:o.labelMenuConfig,"sub-menu-available":!!e.labels.length},{default:K(()=>[(p(!0),v(pe,null,Ne(e.labels,c=>(p(),$(i,{key:c.id,option:a.generateMenuLabelConfig(c,"label"),variant:"label",onClick:Fe(u=>e.$emit("assignLabel",c),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"]),y(r,{option:o.agentMenuConfig,"sub-menu-available":!!a.assignableAgents.length},{default:K(()=>[e.assignableAgentsUiFlags.isFetching?(p(),$(l,{key:0})):(p(!0),v(pe,{key:1},Ne(a.assignableAgents,c=>(p(),$(i,{key:c.id,option:a.generateMenuLabelConfig(c,"agent"),variant:"agent",onClick:Fe(u=>e.$emit("assignAgent",c),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"]),y(r,{option:o.teamMenuConfig,"sub-menu-available":!!e.teams.length},{default:K(()=>[(p(!0),v(pe,null,Ne(e.teams,c=>(p(),$(i,{key:c.id,option:a.generateMenuLabelConfig(c,"team"),onClick:Fe(u=>e.$emit("assignTeam",c),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"]),s.isAdmin?(p(),v(pe,{key:3},[t[3]||(t[3]=h("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1)),y(i,{option:o.deleteOption,variant:"icon",onClick:Fe(a.deleteConversation,["stop"])},null,8,["option","onClick"])],64)):w("",!0)])}const i_e=Ae(s_e,[["render",o_e]]),lA=6e4,bf=lA*60,bu=bf*24,r_e={name:"TimeAgo",props:{isAutoRefreshEnabled:{type:Boolean,default:!0},lastActivityTimestamp:{type:[String,Date,Number],default:""},createdAtTimestamp:{type:[String,Date,Number],default:""}},data(){return{lastActivityAtTimeAgo:rs(this.lastActivityTimestamp),createdAtTimeAgo:rs(this.createdAtTimestamp),timer:null}},computed:{lastActivityTime(){return sc(this.lastActivityAtTimeAgo)},createdAtTime(){return sc(this.createdAtTimeAgo)},createdAt(){return Date.now()-this.createdAtTimestamp*1e3>bu*30?`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.OLDEST")} ${P_(this.createdAtTimestamp)}`:`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.LATEST")} ${this.createdAtTimeAgo}`},lastActivity(){return Date.now()-this.lastActivityTimestamp*1e3>bu*30?`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.NOT_ACTIVE")} ${P_(this.lastActivityTimestamp)}`:`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.ACTIVE")} ${this.lastActivityAtTimeAgo}`},tooltipText(){return`${this.createdAt}
              ${this.lastActivity}`}},watch:{lastActivityTimestamp(){this.lastActivityAtTimeAgo=rs(this.lastActivityTimestamp)},createdAtTimestamp(){this.createdAtTimeAgo=rs(this.createdAtTimestamp)}},mounted(){this.isAutoRefreshEnabled&&this.createTimer()},unmounted(){clearTimeout(this.timer)},methods:{createTimer(){this.timer=setTimeout(()=>{this.lastActivityAtTimeAgo=rs(this.lastActivityTimestamp),this.createdAtTimeAgo=rs(this.createdAtTimestamp),this.createTimer()},this.refreshTime())},refreshTime(){const e=Date.now()-this.lastActivityTimestamp*1e3;return e>bu?bu:e>bf?bf:lA}}},l_e={class:"ml-auto leading-4 text-xxs text-n-slate-10 hover:text-slate-11"};function c_e(e,t,n,s,o,a){const i=qe("tooltip");return re((p(),v("div",l_e,[h("span",null,A(`${a.createdAtTime} • ${a.lastActivityTime}`),1)])),[[i,{content:a.tooltipText,delay:{show:1e3,hide:0},hideOnClick:!0},void 0,{top:!0}]])}const u_e=Ae(r_e,[["render",c_e]]),d_e={name:"PriorityMark",props:{priority:{type:String,default:"",validate:e=>[...Object.values(Ks),""].includes(e)}},data(){return{CONVERSATION_PRIORITY:Ks}},computed:{tooltipText(){return this.$t(`CONVERSATION.PRIORITY.OPTIONS.${this.priority.toUpperCase()}`)},isUrgent(){return this.priority===Ks.URGENT}}};function p_e(e,t,n,s,o,a){const i=M("fluent-icon"),r=qe("tooltip");return n.priority?re((p(),v("span",{key:0,class:se(["shrink-0 rounded-sm inline-flex items-center justify-center w-3.5 h-3.5",{"bg-n-ruby-4 text-n-ruby-10":a.isUrgent,"bg-n-slate-4 text-n-slate-11":!a.isUrgent}])},[y(i,{icon:`priority-${n.priority.toLowerCase()}`,size:a.isUrgent?12:14,class:"flex-shrink-0","view-box":"0 0 14 14"},null,8,["icon","size"])],2)),[[r,{content:a.tooltipText,delay:{show:1500,hide:0},hideOnClick:!0}]]):w("",!0)}const h_e=Ae(d_e,[["render",p_e]]),m_e=6e4,cA={__name:"SLACardLabel",props:{chat:{type:Object,default:()=>({})},showExtendedInfo:{type:Boolean,default:!1},parentWidth:{type:Number,default:1e3}},setup(e){const t=e,{t:n}=Me(),s=X(null),o=X({threshold:null,isSlaMissed:!1,type:null,icon:null}),a=C(()=>{var S;return(S=t.chat)==null?void 0:S.applied_sla}),i=C(()=>{var S;return(S=t.chat)==null?void 0:S.sla_events}),r=C(()=>{var S;return(S=o.value)==null?void 0:S.threshold}),l=C(()=>{var S;return(S=o.value)==null?void 0:S.isSlaMissed}),c=C(()=>l.value?"text-n-ruby-11":"text-n-amber-11"),u=C(()=>{var E,b;const S=(b=(E=o.value)==null?void 0:E.type)==null?void 0:b.toUpperCase(),_=l.value?"MISSED":"DUE";return n(`CONVERSATION.HEADER.SLA_STATUS.${S}`,{status:n(`CONVERSATION.HEADER.SLA_STATUS.${_}`)})}),d=C(()=>{var S;return t.showExtendedInfo&&((S=i.value)==null?void 0:S.length)>0}),m=C(()=>t.showExtendedInfo?"h-[26px] rounded-lg bg-n-alpha-1":"rounded h-5  border border-n-strong"),f=()=>{o.value=T0({appliedSla:a.value,chat:t.chat})},g=()=>{s.value=setTimeout(()=>{f(),g()},m_e)};ct(()=>t.chat,()=>{f()});const T=C(()=>t.showExtendedInfo?"ltr:pr-1.5 rtl:pl-1.5 ltr:border-r rtl:border-l border-n-strong":"");return dt(()=>{f(),g()}),zo(()=>{s.value&&clearTimeout(s.value)}),(S,_)=>{const E=M("fluent-icon");return r.value?(p(),v("div",{key:0,class:se(["relative flex items-center cursor-pointer min-w-fit group",m.value])},[h("div",{class:se(["flex items-center w-full truncate px-1.5",e.showExtendedInfo?"":"gap-1"])},[h("div",{class:se(["flex items-center gap-1",T.value])},[y(E,{size:"12",icon:o.value.icon,type:"outline","icon-lib":l.value?"lucide":"fluent",class:se(["flex-shrink-0",c.value])},null,8,["icon","icon-lib","class"]),e.showExtendedInfo&&e.parentWidth>650?(p(),v("span",{key:0,class:se(["text-xs font-medium",c.value])},A(u.value),3)):w("",!0)],2),h("span",{class:se(["text-xs font-medium",[c.value,e.showExtendedInfo&&"ltr:pl-1.5 rtl:pr-1.5"]])},A(o.value.threshold),3)],2),d.value?(p(),$(FS,{key:0,"sla-missed-events":i.value,class:"start-0 xl:start-auto xl:end-0 top-7 hidden group-hover:flex"},null,8,["sla-missed-events"])):w("",!0)],2)):w("",!0)}}},i_={__name:"ContextMenu",props:{x:{type:Number,default:0},y:{type:Number,default:0}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,o=_o("contextMenuElementTarget",null),a=Is("menuRef"),i=C(()=>{var T;return o!=null&&o.value?(T=o.value)==null?void 0:T.$el:null}),r=n$(i),{width:l,height:c}=qf(),{width:u,height:d}=ad(a),m=(T,S,_,E,b,I)=>{let O=T,x=S;const L=O+_>b-16,F=x+E>I-16;return L&&(O=b-_-16),F&&(x=I-E-16),{left:Math.max(16,O),top:Math.max(16,x)}},f=C(()=>{if(!a.value)return{top:`${n.y}px`,left:`${n.x}px`};const{left:T,top:S}=m(n.x,n.y,u.value,d.value,l.value,c.value);return{top:`${S}px`,left:`${T}px`}});dt(()=>{r.value=!0,tn(()=>{var T;return(T=a.value)==null?void 0:T.focus()})});const g=()=>{r.value=!1,s("close")};return zo(()=>{r.value=!1}),(T,S)=>(p(),$(gc,{to:"body"},{default:K(()=>[h("div",{ref_key:"menuRef",ref:a,class:"fixed outline-none z-[9999] cursor-pointer",style:Ht(f.value),tabindex:"0",onBlur:g},[We(T.$slots,"default")],36)]),_:3}))}},f_e={components:{CardLabels:BS,InboxName:o_,Thumbnail:Hn,ConversationContextMenu:i_e,TimeAgo:u_e,MessagePreview:a_,PriorityMark:h_e,SLACardLabel:cA,ContextMenu:i_},mixins:[Yo],props:{activeLabel:{type:String,default:""},chat:{type:Object,default:()=>{}},hideInboxName:{type:Boolean,default:!1},hideThumbnail:{type:Boolean,default:!1},teamId:{type:[String,Number],default:0},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1},conversationType:{type:String,default:""},selected:{type:Boolean,default:!1},enableContextMenu:{type:Boolean,default:!1}},emits:["contextMenuToggle","assignAgent","assignLabel","assignTeam","markAsUnread","markAsRead","assignPriority","updateConversationStatus","deleteConversation"],data(){return{hovered:!1,showContextMenu:!1,contextMenu:{x:null,y:null}}},computed:{...lt({currentChat:"getSelectedChat",inboxesList:"inboxes/getInboxes",activeInbox:"getSelectedInbox",accountId:"getCurrentAccountId"}),chatMetadata(){return this.chat.meta||{}},assignee(){return this.chatMetadata.assignee||{}},currentContact(){return this.$store.getters["contacts/getContact"](this.chatMetadata.sender.id)},isActiveChat(){return this.currentChat.id===this.chat.id},unreadCount(){return this.chat.unread_count},hasUnread(){return this.unreadCount>0},isInboxNameVisible(){return!this.activeInbox},lastMessageInChat(){return $ge(this.chat)},inbox(){const{inbox_id:e}=this.chat;return this.$store.getters["inboxes/getInbox"](e)},showInboxName(){return!this.hideInboxName&&this.isInboxNameVisible&&this.inboxesList.length>1},inboxName(){return this.inbox.name||""},hasSlaPolicyId(){var e;return(e=this.chat)==null?void 0:e.sla_policy_id}},methods:{onCardClick(e){const{activeInbox:t,chat:n}=this,s=At(Ff({accountId:this.accountId,activeInbox:t,id:n.id,label:this.activeLabel,teamId:this.teamId,foldersId:this.foldersId,conversationType:this.conversationType}));if(e.metaKey||e.ctrlKey){window.open(window.chatwootConfig.hostURL+s,"_blank","noopener noreferrer nofollow");return}this.isActiveChat||Wn.push({path:s})},onThumbnailHover(){this.hovered=!this.hideThumbnail},onThumbnailLeave(){this.hovered=!1},onSelectConversation(e){const t=e?"selectConversation":"deSelectConversation";this.$emit(t,this.chat.id,this.inbox.id)},openContextMenu(e){this.enableContextMenu&&(e.preventDefault(),this.$emit("contextMenuToggle",!0),this.contextMenu.x=e.pageX||e.clientX,this.contextMenu.y=e.pageY||e.clientY,this.showContextMenu=!0)},closeContextMenu(){this.$emit("contextMenuToggle",!1),this.showContextMenu=!1,this.contextMenu.x=null,this.contextMenu.y=null},onUpdateConversation(e,t){this.closeContextMenu(),this.$emit("updateConversationStatus",this.chat.id,e,t)},async onAssignAgent(e){this.$emit("assignAgent",e,[this.chat.id]),this.closeContextMenu()},async onAssignLabel(e){this.$emit("assignLabel",[e.title],[this.chat.id]),this.closeContextMenu()},async onAssignTeam(e){this.$emit("assignTeam",e,this.chat.id),this.closeContextMenu()},async markAsUnread(){this.$emit("markAsUnread",this.chat.id),this.closeContextMenu()},async markAsRead(){this.$emit("markAsRead",this.chat.id),this.closeContextMenu()},async assignPriority(e){this.$emit("assignPriority",e,this.chat.id),this.closeContextMenu()},async deleteConversation(){this.$emit("deleteConversation",this.chat.id),this.closeContextMenu()}}},g_e=["value","checked"],__e={class:"px-0 py-3 border-b group-hover:border-transparent flex-1 border-n-slate-3 w-[calc(100%-40px)]"},v_e={class:"flex justify-between conversation-card--meta"},b_e={class:"flex gap-2 ml-2 rtl:mr-2 rtl:ml-0"},E_e={key:0,class:"text-n-slate-11 text-xs font-medium leading-3 py-0.5 px-0 inline-flex text-ellipsis overflow-hidden whitespace-nowrap"},T_e={class:"absolute flex flex-col conversation--meta ltr:right-4 rtl:left-4 top-4"},y_e={class:"ml-auto font-normal leading-4 text-xxs"},S_e={class:"unread shadow-lg rounded-full hidden text-xxs font-semibold h-4 leading-4 ml-auto mt-1 min-w-[1rem] px-1 py-0 text-center text-white bg-n-teal-9"};function A_e(e,t,n,s,o,a){const i=M("Thumbnail"),r=M("InboxName"),l=M("fluent-icon"),c=M("PriorityMark"),u=M("MessagePreview"),d=M("TimeAgo"),m=M("SLACardLabel"),f=M("CardLabels"),g=M("ConversationContextMenu"),T=M("ContextMenu");return p(),v("div",{class:se(["relative flex items-start flex-grow-0 flex-shrink-0 w-auto max-w-full px-3 py-0 border-t-0 border-b-0 border-l-2 border-r-0 border-transparent border-solid cursor-pointer conversation hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3 group",{"active animate-card-select bg-n-alpha-1 dark:bg-n-alpha-3 border-n-weak":a.isActiveChat,"unread-chat":a.hasUnread,"has-inbox-name":a.showInboxName,"conversation-selected":n.selected}]),onClick:t[4]||(t[4]=(...S)=>a.onCardClick&&a.onCardClick(...S)),onContextmenu:t[5]||(t[5]=S=>a.openContextMenu(S))},[h("div",{class:"relative",onMouseenter:t[2]||(t[2]=(...S)=>a.onThumbnailHover&&a.onThumbnailHover(...S)),onMouseleave:t[3]||(t[3]=(...S)=>a.onThumbnailLeave&&a.onThumbnailLeave(...S))},[o.hovered||n.selected?(p(),v("label",{key:0,class:"checkbox-wrapper absolute inset-0 z-20 backdrop-blur-[2px]",onClick:t[1]||(t[1]=Fe(()=>{},["stop"]))},[h("input",{value:n.selected,checked:n.selected,class:"checkbox",type:"checkbox",onChange:t[0]||(t[0]=S=>a.onSelectConversation(S.target.checked))},null,40,g_e)])):w("",!0),n.hideThumbnail?w("",!0):(p(),$(i,{key:1,src:a.currentContact.thumbnail,badge:e.inboxBadge,username:a.currentContact.name,status:a.currentContact.availability_status,size:"32px"},null,8,["src","badge","username","status"]))],32),h("div",__e,[h("div",v_e,[a.showInboxName?(p(),$(r,{key:0,inbox:a.inbox},null,8,["inbox"])):w("",!0),h("div",b_e,[n.showAssignee&&a.assignee.name?(p(),v("span",E_e,[y(l,{icon:"person",size:"12",class:"text-n-slate-11"}),Re(" "+A(a.assignee.name),1)])):w("",!0),y(c,{priority:n.chat.priority},null,8,["priority"])])]),h("h4",{class:se(["conversation--user text-sm my-0 mx-2 capitalize pt-0.5 text-ellipsis overflow-hidden whitespace-nowrap w-[calc(100%-70px)] text-n-slate-12",a.hasUnread?"font-semibold":"font-medium"])},A(a.currentContact.name),3),a.lastMessageInChat?(p(),$(u,{key:0,message:a.lastMessageInChat,class:se(["conversation--message my-0 mx-2 leading-6 h-6 max-w-[96%] w-[16.875rem] text-sm",a.hasUnread?"font-medium text-n-slate-12":"text-n-slate-11"])},null,8,["message","class"])):(p(),v("p",{key:1,class:se(["conversation--message text-n-slate-11 text-sm my-0 mx-2 leading-6 h-6 max-w-[96%] w-[16.875rem] overflow-hidden text-ellipsis whitespace-nowrap",a.hasUnread?"font-medium text-n-slate-12":"text-n-slate-11"])},[y(l,{size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-10",icon:"info"}),h("span",null,A(e.$t("CHAT_LIST.NO_MESSAGES")),1)],2)),h("div",T_e,[h("span",y_e,[y(d,{"last-activity-timestamp":n.chat.timestamp,"created-at-timestamp":n.chat.created_at},null,8,["last-activity-timestamp","created-at-timestamp"])]),h("span",S_e,A(a.unreadCount>9?"9+":a.unreadCount),1)]),y(f,{"conversation-labels":n.chat.labels,class:"mt-0.5 mx-2 mb-0"},vo({_:2},[a.hasSlaPolicyId?{name:"before",fn:K(()=>[y(m,{chat:n.chat,class:"ltr:mr-1 rtl:ml-1"},null,8,["chat"])]),key:"0"}:void 0]),1032,["conversation-labels"])]),o.showContextMenu?(p(),$(T,{key:0,x:o.contextMenu.x,y:o.contextMenu.y,onClose:a.closeContextMenu},{default:K(()=>[y(g,{status:n.chat.status,"inbox-id":a.inbox.id,priority:n.chat.priority,"chat-id":n.chat.id,"has-unread-messages":a.hasUnread,onUpdateConversation:a.onUpdateConversation,onAssignAgent:a.onAssignAgent,onAssignLabel:a.onAssignLabel,onAssignTeam:a.onAssignTeam,onMarkAsUnread:a.markAsUnread,onMarkAsRead:a.markAsRead,onAssignPriority:a.assignPriority,onDeleteConversation:a.deleteConversation},null,8,["status","inbox-id","priority","chat-id","has-unread-messages","onUpdateConversation","onAssignAgent","onAssignLabel","onAssignTeam","onMarkAsUnread","onMarkAsRead","onAssignPriority","onDeleteConversation"])]),_:1},8,["x","y","onClose"])):w("",!0)],34)}const uA=Ae(f_e,[["render",A_e],["__scopeId","data-v-b8607e56"]]),I_e={components:{ConversationCard:uA},inject:["selectConversation","deSelectConversation","assignAgent","assignTeam","assignLabels","updateConversationStatus","toggleContextMenu","markAsUnread","markAsRead","assignPriority","isConversationSelected","deleteConversation"],props:{source:{type:Object,required:!0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1}}};function C_e(e,t,n,s,o,a){const i=M("ConversationCard");return p(),$(i,{key:n.source.id,"active-label":n.label,"team-id":n.teamId,"folders-id":n.foldersId,chat:n.source,"conversation-type":n.conversationType,selected:a.isConversationSelected(n.source.id),"show-assignee":n.showAssignee,"enable-context-menu":"",onSelectConversation:a.selectConversation,onDeSelectConversation:a.deSelectConversation,onAssignAgent:a.assignAgent,onAssignTeam:a.assignTeam,onAssignLabel:a.assignLabels,onUpdateConversationStatus:a.updateConversationStatus,onContextMenuToggle:a.toggleContextMenu,onMarkAsUnread:a.markAsUnread,onMarkAsRead:a.markAsRead,onAssignPriority:a.assignPriority,onDeleteConversation:a.deleteConversation},null,8,["active-label","team-id","folders-id","chat","conversation-type","selected","show-assignee","onSelectConversation","onDeSelectConversation","onAssignAgent","onAssignTeam","onAssignLabel","onUpdateConversationStatus","onContextMenuToggle","onMarkAsUnread","onMarkAsRead","onAssignPriority","onDeleteConversation"])}const O_e=Ae(I_e,[["render",C_e]]),N_e={props:{show:{type:Boolean,default:!1},activeCustomView:{type:Object,default:()=>{}},customViewsId:{type:[String,Number],default:0},activeFilterType:{type:Number,default:0},openLastItemAfterDelete:{type:Function,default:()=>{}}},emits:["close","update:show"],computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},activeCustomViews(){return this.activeFilterType===0?"conversation":this.activeFilterType===1?"contact":""},deleteMessage(){return` ${this.activeCustomView&&this.activeCustomView.name}?`},deleteConfirmText(){return`${this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.YES")}`},deleteRejectText(){return`${this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.NO")}`},isFolderSection(){return this.activeFilterType===0&&this.$route.name!=="home"},isSegmentSection(){return this.activeFilterType===1&&this.$route.name!=="contacts_dashboard"}},methods:{async deleteSavedCustomViews(){var e;try{const t=Number(this.customViewsId),n=this.activeCustomViews;await this.$store.dispatch("customViews/delete",{id:t,filterType:n}),this.closeDeletePopup(),ce(this.activeFilterType===0?this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE")),Pt(sr.DELETE_FILTER,{type:this.filterType===0?"folder":"segment"})}catch(t){const n=(e=t==null?void 0:t.response)!=null&&e.message||this.activeFilterType===0?this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE");ce(n)}this.openLastItemAfterDelete()},closeDeletePopup(){this.$emit("close")}}};function w_e(e,t,n,s,o,a){const i=M("woot-delete-modal");return p(),v("div",null,[a.localShow?(p(),$(i,{key:0,show:a.localShow,"onUpdate:show":t[0]||(t[0]=r=>a.localShow=r),"on-close":a.closeDeletePopup,"on-confirm":a.deleteSavedCustomViews,title:e.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.TITLE"),message:e.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.MESSAGE"),"message-value":a.deleteMessage,"confirm-text":a.deleteConfirmText,"reject-text":a.deleteRejectText},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])):w("",!0)])}const R_e=Ae(N_e,[["render",w_e]]),Eu=It.SNOOZE_OPTIONS,x_e=e=>{const t=RT(TL(e,1));return MT(t)?t:mc(t,{days:(8-t.getDay())%7})},$_e=e=>{const t=Yi(mc(e,{months:1}));return MT(t)?t:mc(t,{days:(8-t.getDay())%7})},M_e=e=>mc(e,{days:1}),dm=e=>qL(XL(YL(e,9),0),0),r_=(e,t=new Date)=>{let n=null;return e===Eu.AN_HOUR_FROM_NOW?n=mc(t,{hours:1}):e===Eu.UNTIL_TOMORROW?n=dm(M_e(t)):e===Eu.UNTIL_NEXT_WEEK?n=dm(x_e(t)):e===Eu.UNTIL_NEXT_MONTH&&(n=dm($_e(t))),n?co(n):null},L_e=e=>{if(!e)return null;const t=new Date(e);return fC(t)?ms(t,"h.mmaaa"):e?ms(t,"d MMM, h.mmaaa"):null},k_e=e=>e?co(new Date(e)):null,D_e=e=>{if(!e)return null;const t={minutes:"m",minute:"m",hours:"h",hour:"h",days:"d",day:"d",months:"mo",month:"mo",years:"y",year:"y"};return e.replace(/^in\s+/i,"").replace(/\s(minute|hour|day|month|year)s?\b/gi,(s,o)=>t[o.toLowerCase()]||s)},Q1="CMD_MUTE_CONVERSATION",J1="CMD_UNMUTE_CONVERSATION",eE="CMD_SEND_TRANSCRIPT",P_e="CMD_REOPEN_CONVERSATION",B_e="CMD_RESOLVE_CONVERSATION",F_e="CMD_SNOOZE_CONVERSATION",U_e="CMD_AI_ASSIST",tE="CMD_BULK_ACTION_SNOOZE_CONVERSATION",nE="CMD_BULK_ACTION_REOPEN_CONVERSATION",sE="CMD_BULK_ACTION_RESOLVE_CONVERSATION",aE="CMD_SNOOZE_NOTIFICATION",G_e={components:{Thumbnail:Hn,Spinner:bs,NextButton:oe},props:{selectedInboxes:{type:Array,default:()=>[]},conversationCount:{type:Number,default:0}},emits:["select","close"],data(){return{query:"",selectedAgent:null,goBackToAgentList:!1}},computed:{...lt({uiFlags:"bulkActions/getUIFlags",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags"}),filteredAgents(){return this.query?this.assignableAgents.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase())):[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"},...this.assignableAgents]},assignableAgents(){return this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.selectedInboxes.join(","))},conversationLabel(){return this.conversationCount>1?"conversations":"conversation"}},mounted(){this.$store.dispatch("inboxAssignableAgents/fetch",this.selectedInboxes)},methods:{submit(){this.$emit("select",this.selectedAgent)},goBack(){this.goBackToAgentList=!0,this.selectedAgent=null},assignAgent(e){this.selectedAgent=e},onClose(){this.$emit("close")},onCloseAgentList(){this.selectedAgent===null&&!this.goBackToAgentList&&this.onClose(),this.goBackToAgentList=!1}}},V_e={class:"bulk-action__agents"},H_e={class:"flex items-center justify-between header"},W_e={class:"container"},z_e={key:0,class:"agent__list-loading"},j_e={key:1,class:"agent__list-container"},K_e={key:0},Y_e={class:"search-container"},X_e={class:"flex items-center justify-between h-8 gap-2 agent-list-search"},q_e=["placeholder"],Z_e=["onClick"],Q_e={class:"my-0 text-slate-800 dark:text-slate-75"},J_e={key:1,class:"agent-confirmation-container"},eve={key:0},tve={key:1},nve={class:"agent-confirmation-actions"};function sve(e,t,n,s,o,a){const i=M("NextButton"),r=M("Spinner"),l=M("fluent-icon"),c=M("Thumbnail"),u=qe("on-clickaway");return re((p(),v("div",V_e,[t[2]||(t[2]=h("div",{class:"triangle"},[h("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[h("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),h("div",H_e,[h("span",null,A(e.$t("BULK_ACTION.AGENT_SELECT_LABEL")),1),y(i,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:a.onClose},null,8,["onClick"])]),h("div",W_e,[e.assignableAgentsUiFlags.isFetching?(p(),v("div",z_e,[y(r),h("p",null,A(e.$t("BULK_ACTION.AGENT_LIST_LOADING")),1)])):(p(),v("div",j_e,[o.selectedAgent?(p(),v("div",J_e,[o.selectedAgent.id?(p(),v("p",eve,[Re(A(e.$t("BULK_ACTION.ASSIGN_CONFIRMATION_LABEL",{conversationCount:n.conversationCount,conversationLabel:a.conversationLabel}))+" ",1),h("strong",null,A(o.selectedAgent.name),1),t[1]||(t[1]=h("span",null,"?",-1))])):(p(),v("p",tve,A(e.$t("BULK_ACTION.UNASSIGN_CONFIRMATION_LABEL",{conversationCount:n.conversationCount,conversationLabel:a.conversationLabel})),1)),h("div",nve,[y(i,{faded:"",sm:"",slate:"",type:"reset",label:e.$t("BULK_ACTION.GO_BACK_LABEL"),onClick:a.goBack},null,8,["label","onClick"]),y(i,{sm:"",type:"submit",label:e.$t("BULK_ACTION.YES"),"is-loading":e.uiFlags.isUpdating,onClick:a.submit},null,8,["label","is-loading","onClick"])])])):(p(),v("ul",K_e,[h("li",Y_e,[h("div",X_e,[y(l,{icon:"search",class:"search-icon",size:"16"}),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.query=d),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm agent--search_input"},null,8,q_e),[[mt,o.query]])])]),(p(!0),v(pe,null,Ne(a.filteredAgents,d=>(p(),v("li",{key:d.id},[h("div",{class:"agent-list-item",onClick:m=>a.assignAgent(d)},[y(c,{src:d.thumbnail,status:d.availability_status,username:d.name,size:"22px"},null,8,["src","status","username"]),h("span",Q_e,A(d.name),1)],8,Z_e)]))),128))]))]))])])),[[u,a.onCloseAgentList]])}const ave=Ae(G_e,[["render",sve],["__scopeId","data-v-511d11ca"]]),ove={class:"absolute z-20 w-auto origin-top-right border border-solid rounded-lg shadow-md right-2 top-12 bg-n-alpha-3 backdrop-blur-[100px] border-n-weak"},ive={class:"p-2.5 flex gap-1 items-center justify-between"},rve={class:"text-sm font-medium text-slate-600 dark:text-slate-100"},lve={class:"px-2.5 pt-0 pb-2.5"},cve={__name:"UpdateActions",props:{showResolve:{type:Boolean,default:!0},showReopen:{type:Boolean,default:!0},showSnooze:{type:Boolean,default:!0}},emits:["update","close"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X([{icon:"i-lucide-check",key:"resolved"},{icon:"i-lucide-redo",key:"open"},{icon:"i-lucide-alarm-clock",key:"snoozed"}]),i=u=>{if(u==="snoozed"){const d=document.querySelector("ninja-keys");d==null||d.open({parent:"bulk_action_snooze_conversation"})}else s("update",u)},r=()=>{s("close")},l=u=>({resolved:n.showResolve,open:n.showReopen,snoozed:n.showSnooze})[u]||!1,c=u=>({resolved:o("CONVERSATION.HEADER.RESOLVE_ACTION"),open:o("CONVERSATION.HEADER.REOPEN_ACTION"),snoozed:o("BULK_ACTION.UPDATE.SNOOZE_UNTIL")})[u]||"";return(u,d)=>{const m=qe("on-clickaway");return re((p(),v("div",ove,[d[0]||(d[0]=h("div",{class:"right-[var(--triangle-position)] block z-10 absolute text-left -top-3"},[h("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[h("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px",class:"fill-n-alpha-3 backdrop-blur-[100px] stroke-n-weak"})])],-1)),h("div",ive,[h("span",rve,A(u.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")),1),y(oe,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:r})]),h("div",lve,[y(Bd,{class:"m-0 list-none"},{default:K(()=>[(p(!0),v(pe,null,Ne(a.value,f=>(p(),v(pe,null,[l(f.key)?(p(),$(dc,{key:f.key},{default:K(()=>[y(oe,{ghost:"",sm:"",slate:"",class:"!w-full ltr:!justify-start rtl:!justify-end",icon:f.icon,label:c(f.key),onClick:g=>i(f.key)},null,8,["icon","label","onClick"])]),_:2},1024)):w("",!0)],64))),256))]),_:1})])])),[[m,r]])}}},uve={components:{NextButton:oe},emits:["update","close","assign"],data(){return{query:"",selectedLabels:[]}},computed:{...lt({labels:"labels/getLabels"}),filteredLabels(){return this.labels.filter(e=>e.title.toLowerCase().includes(this.query.toLowerCase()))}},methods:{isLabelSelected(e){return this.selectedLabels.includes(e)},assignLabels(e){this.$emit("update",e)},onClose(){this.$emit("close")}}},dve={class:"labels-container"},pve={class:"flex items-center justify-between header"},hve={class:"labels-list"},mve={class:"labels-list__header"},fve={class:"flex items-center justify-between h-8 gap-2 label-list-search"},gve=["placeholder"],_ve={class:"labels-list__body"},vve=["value"],bve={class:"overflow-hidden label-title whitespace-nowrap text-ellipsis"},Eve={class:"labels-list__footer"};function Tve(e,t,n,s,o,a){const i=M("NextButton"),r=M("fluent-icon"),l=qe("on-clickaway");return re((p(),v("div",dve,[t[3]||(t[3]=h("div",{class:"triangle"},[h("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[h("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),h("div",pve,[h("span",null,A(e.$t("BULK_ACTION.LABELS.ASSIGN_LABELS")),1),y(i,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:a.onClose},null,8,["onClick"])]),h("div",hve,[h("header",mve,[h("div",fve,[y(r,{icon:"search",class:"search-icon",size:"16"}),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>o.query=c),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm label--search_input"},null,8,gve),[[mt,o.query]])])]),h("ul",_ve,[(p(!0),v(pe,null,Ne(a.filteredLabels,c=>(p(),v("li",{key:c.id,class:"label__list-item"},[h("label",{class:se(["item",{"label-selected":a.isLabelSelected(c.title)}])},[re(h("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>o.selectedLabels=u),type:"checkbox",value:c.title,class:"label-checkbox"},null,8,vve),[[pn,o.selectedLabels]]),h("span",bve,A(c.title),1),h("span",{class:"label-pill",style:Ht({backgroundColor:c.color})},null,4)],2)]))),128))]),h("footer",Eve,[y(i,{sm:"",type:"submit",label:e.$t("BULK_ACTION.LABELS.ASSIGN_SELECTED_LABELS"),disabled:!o.selectedLabels.length,onClick:t[2]||(t[2]=c=>e.$emit("assign",o.selectedLabels))},null,8,["label","disabled"])])])])),[[l,a.onClose]])}const yve=Ae(uve,[["render",Tve],["__scopeId","data-v-0f0f58eb"]]),Sve={components:{NextButton:oe},emits:["assignTeam","close"],data(){return{query:"",selectedteams:[]}},computed:{...lt({teams:"teams/getTeams"}),filteredTeams(){return[{name:"None",id:0},...this.teams.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase()))]}},methods:{assignTeam(e){this.$emit("assignTeam",e)},onClose(){this.$emit("close")}}},Ave={class:"bulk-action__teams"},Ive={class:"flex items-center justify-between header"},Cve={class:"container"},Ove={class:"team__list-container"},Nve={class:"search-container"},wve={class:"flex items-center justify-between h-8 gap-2 agent-list-search"},Rve=["placeholder"],xve=["onClick"],$ve={class:"my-0 ltr:ml-2 rtl:mr-2 text-slate-800 dark:text-slate-75"},Mve={key:1},Lve={class:"team__list-item"},kve={class:"my-0 ltr:ml-2 rtl:mr-2 text-slate-800 dark:text-slate-75"};function Dve(e,t,n,s,o,a){const i=M("NextButton"),r=M("fluent-icon"),l=qe("on-clickaway");return re((p(),v("div",Ave,[t[1]||(t[1]=h("div",{class:"triangle"},[h("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[h("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),h("div",Ive,[h("span",null,A(e.$t("BULK_ACTION.TEAMS.TEAM_SELECT_LABEL")),1),y(i,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:a.onClose},null,8,["onClick"])]),h("div",Cve,[h("div",Ove,[h("ul",null,[h("li",Nve,[h("div",wve,[y(r,{icon:"search",class:"search-icon",size:"16"}),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>o.query=c),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm agent--search_input"},null,8,Rve),[[mt,o.query]])])]),a.filteredTeams.length?(p(!0),v(pe,{key:0},Ne(a.filteredTeams,c=>(p(),v("li",{key:c.id},[h("div",{class:"team__list-item",onClick:u=>a.assignTeam(c)},[h("span",$ve,A(c.name),1)],8,xve)]))),128)):(p(),v("li",Mve,[h("div",Lve,[h("span",kve,A(e.$t("BULK_ACTION.TEAMS.NO_TEAMS_AVAILABLE")),1)])]))])])])])),[[l,a.onClose]])}const Pve=Ae(Sve,[["render",Dve],["__scopeId","data-v-0cb2fd57"]]),Bve={components:{DatePicker:SS,NextButton:oe},emits:["close","chooseTime"],data(){return{snoozeTime:null,lang:{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearFormat:"YYYY",monthFormat:"MMMM"}}},methods:{onClose(){this.$emit("close")},chooseTime(){this.$emit("chooseTime",this.snoozeTime)},disabledDate(e){const t=new Date;return t.setDate(t.getDate()-1),e<t},disabledTime(e){const t=new Date;return t.setHours(t.getHours()+1),e<t}}},Fve={class:"flex flex-col"},Uve={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Gve(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("DatePicker"),l=M("NextButton");return p(),v("div",Fve,[y(i,{"header-title":e.$t("CONVERSATION.CUSTOM_SNOOZE.TITLE")},null,8,["header-title"]),h("form",{class:"modal-content w-full pt-2 px-5 pb-6",onSubmit:t[1]||(t[1]=Fe((...c)=>a.chooseTime&&a.chooseTime(...c),["prevent"]))},[y(r,{value:o.snoozeTime,"onUpdate:value":t[0]||(t[0]=c=>o.snoozeTime=c),type:"datetime",inline:"","input-class":"mx-input ",lang:o.lang,"disabled-date":a.disabledDate,"disabled-time":a.disabledTime},null,8,["value","lang","disabled-date","disabled-time"]),h("div",Uve,[y(l,{faded:"",slate:"",type:"reset",label:e.$t("CONVERSATION.CUSTOM_SNOOZE.CANCEL"),onClick:Fe(a.onClose,["prevent"])},null,8,["label","onClick"]),y(l,{type:"submit",label:e.$t("CONVERSATION.CUSTOM_SNOOZE.APPLY")},null,8,["label"])])],32)])}const l_=Ae(Bve,[["render",Gve]]),Vve={components:{AgentSelector:ave,UpdateActions:cve,LabelActions:yve,TeamActions:Pve,CustomSnoozeModal:l_,NextButton:oe},props:{conversations:{type:Array,default:()=>[]},allConversationsSelected:{type:Boolean,default:!1},selectedInboxes:{type:Array,default:()=>[]},showOpenAction:{type:Boolean,default:!1},showResolvedAction:{type:Boolean,default:!1},showSnoozedAction:{type:Boolean,default:!1}},emits:["selectAllConversations","assignAgent","updateConversations","assignLabels","assignTeam","resolveConversations"],data(){return{showAgentsList:!1,showUpdateActions:!1,showLabelActions:!1,showTeamsList:!1,popoverPositions:{},showCustomTimeSnoozeModal:!1}},mounted(){wt.on(tE,this.onCmdSnoozeConversation),wt.on(nE,this.onCmdReopenConversation),wt.on(sE,this.onCmdResolveConversation)},unmounted(){wt.off(tE,this.onCmdSnoozeConversation),wt.off(nE,this.onCmdReopenConversation),wt.off(sE,this.onCmdResolveConversation)},methods:{onCmdSnoozeConversation(e){e===It.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?this.showCustomTimeSnoozeModal=!0:this.updateConversations("snoozed",r_(e)||null)},onCmdReopenConversation(){this.updateConversations("open",null)},onCmdResolveConversation(){this.updateConversations("resolved",null)},customSnoozeTime(e){this.showCustomTimeSnoozeModal=!1,e&&this.updateConversations("snoozed",co(e))},hideCustomSnoozeModal(){this.showCustomTimeSnoozeModal=!1},selectAll(e){this.$emit("selectAllConversations",e.target.checked)},submit(e){this.$emit("assignAgent",e)},updateConversations(e,t){this.$emit("updateConversations",e,t)},assignLabels(e){this.$emit("assignLabels",e)},assignTeam(e){this.$emit("assignTeam",e)},resolveConversations(){this.$emit("resolveConversations")},toggleUpdateActions(){this.showUpdateActions=!this.showUpdateActions},toggleLabelActions(){this.showLabelActions=!this.showLabelActions},toggleAgentList(){this.showAgentsList=!this.showAgentsList},toggleTeamsList(){this.showTeamsList=!this.showTeamsList}}},Hve={class:"bulk-action__container"},Wve={class:"flex items-center justify-between"},zve={class:"flex items-center justify-between bulk-action__panel"},jve=["checked",".indeterminate"],Kve={class:"flex items-center gap-1 bulk-action__actions"},Yve={key:0,class:"bulk-action__alert"};function Xve(e,t,n,s,o,a){const i=M("NextButton"),r=M("LabelActions"),l=M("UpdateActions"),c=M("AgentSelector"),u=M("TeamActions"),d=M("CustomSnoozeModal"),m=M("woot-modal"),f=qe("tooltip");return p(),v("div",Hve,[h("div",Wve,[h("label",zve,[h("input",{type:"checkbox",class:"checkbox",checked:n.allConversationsSelected,".indeterminate":!n.allConversationsSelected,onChange:t[0]||(t[0]=g=>a.selectAll(g))},null,40,jve),h("span",null,A(e.$t("BULK_ACTION.CONVERSATIONS_SELECTED",{conversationCount:n.conversations.length})),1)]),h("div",Kve,[re(y(i,{icon:"i-lucide-tags",slate:"",xs:"",faded:"",onClick:a.toggleLabelActions},null,8,["onClick"]),[[f,e.$t("BULK_ACTION.LABELS.ASSIGN_LABELS")]]),re(y(i,{icon:"i-lucide-repeat",slate:"",xs:"",faded:"",onClick:a.toggleUpdateActions},null,8,["onClick"]),[[f,e.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")]]),re(y(i,{icon:"i-lucide-user-round-plus",slate:"",xs:"",faded:"",onClick:a.toggleAgentList},null,8,["onClick"]),[[f,e.$t("BULK_ACTION.ASSIGN_AGENT_TOOLTIP")]]),re(y(i,{icon:"i-lucide-users-round",slate:"",xs:"",faded:"",onClick:a.toggleTeamsList},null,8,["onClick"]),[[f,e.$t("BULK_ACTION.ASSIGN_TEAM_TOOLTIP")]])]),y(qs,{name:"popover-animation"},{default:K(()=>[o.showLabelActions?(p(),$(r,{key:0,class:"label-actions-box",onAssign:a.assignLabels,onClose:t[1]||(t[1]=g=>o.showLabelActions=!1)},null,8,["onAssign"])):w("",!0)]),_:1}),y(qs,{name:"popover-animation"},{default:K(()=>[o.showUpdateActions?(p(),$(l,{key:0,class:"update-actions-box","selected-inboxes":n.selectedInboxes,"conversation-count":n.conversations.length,"show-resolve":!n.showResolvedAction,"show-reopen":!n.showOpenAction,"show-snooze":!n.showSnoozedAction,onUpdate:a.updateConversations,onClose:t[2]||(t[2]=g=>o.showUpdateActions=!1)},null,8,["selected-inboxes","conversation-count","show-resolve","show-reopen","show-snooze","onUpdate"])):w("",!0)]),_:1}),y(qs,{name:"popover-animation"},{default:K(()=>[o.showAgentsList?(p(),$(c,{key:0,class:"agent-actions-box","selected-inboxes":n.selectedInboxes,"conversation-count":n.conversations.length,onSelect:a.submit,onClose:t[3]||(t[3]=g=>o.showAgentsList=!1)},null,8,["selected-inboxes","conversation-count","onSelect"])):w("",!0)]),_:1}),y(qs,{name:"popover-animation"},{default:K(()=>[o.showTeamsList?(p(),$(u,{key:0,class:"team-actions-box",onAssignTeam:a.assignTeam,onClose:t[4]||(t[4]=g=>o.showTeamsList=!1)},null,8,["onAssignTeam"])):w("",!0)]),_:1})]),n.allConversationsSelected?(p(),v("div",Yve,A(e.$t("BULK_ACTION.ALL_CONVERSATIONS_SELECTED_ALERT")),1)):w("",!0),y(m,{show:o.showCustomTimeSnoozeModal,"onUpdate:show":t[5]||(t[5]=g=>o.showCustomTimeSnoozeModal=g),"on-close":a.hideCustomSnoozeModal},{default:K(()=>[y(d,{onClose:a.hideCustomSnoozeModal,onChooseTime:a.customSnoozeTime},null,8,["onClose","onChooseTime"])]),_:1},8,["show","on-close"])])}const qve=Ae(Vve,[["render",Xve],["__scopeId","data-v-c800de0c"]]),dA={__name:"IntersectionObserver",props:{options:{type:Object,default:()=>({root:document,rootMargin:"100px 0 100px 0)"})}},emits:["observed"],setup(e,{emit:t}){const n=t,s=X("");return e$(s,([{isIntersecting:o}])=>{o&&n("observed")},e.options),(o,a)=>(p(),v("div",{ref_key:"observedElement",ref:s,class:"h-6 w-full"},null,512))}};function Zve(e){const t=()=>{const o=e.value.querySelectorAll("div.conversations-list div.conversation"),a=e.value.querySelector("div.conversations-list div.conversation.active"),i=[...o].indexOf(a),r=o.length-1;return{allConversations:o,activeConversation:a,activeConversationIndex:i,lastConversationIndex:r}},n=o=>{const{allConversations:a,activeConversationIndex:i,lastConversationIndex:r}=t(),l=o==="previous"?i-1:i+1;a.length>0&&l>=0&&l<=r?a[l].click():a.length>0&&a[o==="previous"?0:r].click()};$s({"Alt+KeyJ":{action:()=>n("previous"),allowOnFocusedInput:!0},"Alt+KeyK":{action:()=>n("next"),allowOnFocusedInput:!0}})}function Qve(){const e=So(),{t}=Me(),n=Oe("bulkActions/getSelectedConversationIds"),s=X([]);function o(f,g){e.dispatch("bulkActions/setSelectedConversationIds",f),s.value=[...s.value,g]}function a(f,g){e.dispatch("bulkActions/removeSelectedConversationIds",f),s.value=s.value.filter(T=>T!==g)}function i(){e.dispatch("bulkActions/clearSelectedConversationIds"),s.value=[]}function r(f,g){const T=N(g);f?(e.dispatch("bulkActions/setSelectedConversationIds",T.map(S=>S.id)),s.value=T.map(S=>S.inbox_id)):i()}function l(f){return n.value.includes(f)}async function c(f,g=null){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:g||n.value,fields:{assignee_id:f.id}}),e.dispatch("bulkActions/clearSelectedConversationIds"),g?ce(t("CONVERSATION.CARD_CONTEXT_MENU.API.AGENT_ASSIGNMENT.SUCCESFUL",{agentName:f.name,conversationId:g})):ce(t("BULK_ACTION.ASSIGN_SUCCESFUL"))}catch{ce(t("BULK_ACTION.ASSIGN_FAILED"))}}async function u(f,g=null){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:g||n.value,labels:{add:f}}),e.dispatch("bulkActions/clearSelectedConversationIds"),g?ce(t("CONVERSATION.CARD_CONTEXT_MENU.API.LABEL_ASSIGNMENT.SUCCESFUL",{labelName:f[0],conversationId:g})):ce(t("BULK_ACTION.LABELS.ASSIGN_SUCCESFUL"))}catch{ce(t("BULK_ACTION.LABELS.ASSIGN_FAILED"))}}async function d(f){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:n.value,fields:{team_id:f.id}}),e.dispatch("bulkActions/clearSelectedConversationIds"),ce(t("BULK_ACTION.TEAMS.ASSIGN_SUCCESFUL"))}catch{ce(t("BULK_ACTION.TEAMS.ASSIGN_FAILED"))}}async function m(f,g){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:n.value,fields:{status:f},snoozed_until:g}),e.dispatch("bulkActions/clearSelectedConversationIds"),ce(t("BULK_ACTION.UPDATE.UPDATE_SUCCESFUL"))}catch{ce(t("BULK_ACTION.UPDATE.UPDATE_FAILED"))}}return{selectedConversations:n,selectedInboxes:s,selectConversation:o,deSelectConversation:a,selectAllConversations:r,resetBulkActions:i,isConversationSelected:l,onAssignAgent:c,onAssignLabels:u,onAssignTeamsForBulk:d,onUpdateConversations:m}}const ga=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],Nl=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],zr=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],Jve=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],jr=[{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"},{value:"days_before",label:"Is x days before"}],ebe=[{attributeKey:"status",attributeI18nKey:"STATUS",inputType:"multi_select",dataType:"text",filterOperators:ga,attributeModel:"standard"},{attributeKey:"assignee_id",attributeI18nKey:"ASSIGNEE_NAME",inputType:"search_select",dataType:"text",filterOperators:Nl,attributeModel:"standard"},{attributeKey:"priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",dataType:"text",filterOperators:ga,attributeModel:"standard"},{attributeKey:"inbox_id",attributeI18nKey:"INBOX_NAME",inputType:"search_select",dataType:"text",filterOperators:Nl,attributeModel:"standard"},{attributeKey:"team_id",attributeI18nKey:"TEAM_NAME",inputType:"search_select",dataType:"number",filterOperators:Nl,attributeModel:"standard"},{attributeKey:"display_id",attributeI18nKey:"CONVERSATION_IDENTIFIER",inputType:"plain_text",dataType:"Number",filterOperators:zr,attributeModel:"standard"},{attributeKey:"campaign_id",attributeI18nKey:"CAMPAIGN_NAME",inputType:"search_select",dataType:"Number",filterOperators:Nl,attributeModel:"standard"},{attributeKey:"labels",attributeI18nKey:"LABELS",inputType:"multi_select",dataType:"text",filterOperators:Nl,attributeModel:"standard"},{attributeKey:"browser_language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",dataType:"text",filterOperators:ga,attributeModel:"additional"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",dataType:"text",filterOperators:ga,attributeModel:"additional"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:zr,attributeModel:"additional"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:jr,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:jr,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:jr,attributeModel:"standard"}],tbe=[{name:"Standard Filters",i18nGroup:"STANDARD_FILTERS",attributes:[{key:"status",i18nKey:"STATUS"},{key:"assignee_id",i18nKey:"ASSIGNEE_NAME"},{key:"inbox_id",i18nKey:"INBOX_NAME"},{key:"team_id",i18nKey:"TEAM_NAME"},{key:"display_id",i18nKey:"CONVERSATION_IDENTIFIER"},{key:"campaign_id",i18nKey:"CAMPAIGN_NAME"},{key:"labels",i18nKey:"LABELS"},{key:"created_at",i18nKey:"CREATED_AT"},{key:"last_activity_at",i18nKey:"LAST_ACTIVITY"}]},{name:"Additional Filters",i18nGroup:"ADDITIONAL_FILTERS",attributes:[{key:"browser_language",i18nKey:"BROWSER_LANGUAGE"},{key:"country_code",i18nKey:"COUNTRY_NAME"},{key:"referer",i18nKey:"REFERER_LINK"}]}],nbe=[{attributeKey:"name",attributeI18nKey:"NAME",inputType:"plain_text",dataType:"text",filterOperators:ga,attribute_type:"standard"},{attributeKey:"email",attributeI18nKey:"EMAIL",inputType:"plain_text",dataType:"text",filterOperators:zr,attribute_type:"standard"},{attributeKey:"phone_number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",dataType:"text",filterOperators:zr,attribute_type:"standard"},{attributeKey:"identifier",attributeI18nKey:"IDENTIFIER",inputType:"plain_text",dataType:"number",filterOperators:ga,attribute_type:"standard"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY",inputType:"search_select",dataType:"number",filterOperators:ga,attribute_type:"standard"},{attributeKey:"city",attributeI18nKey:"CITY",inputType:"plain_text",dataType:"Number",filterOperators:zr,attribute_type:"standard"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:jr,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:jr,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:jr,attributeModel:"standard"},{attributeKey:"blocked",attributeI18nKey:"BLOCKED",inputType:"search_select",dataType:"text",filterOperators:ga,attributeModel:"standard"}],sbe=e=>{switch(e){case"date":return"date";case"text":return"plain_text";case"list":return"search_select";case"checkbox":return"search_select";default:return"plain_text"}},abe=e=>{switch(e){case"list":return ga;case"text":return zr;case"number":return ga;case"link":return ga;case"date":return Jve;case"checkbox":return ga;default:return ga}},obe=({filteri18nKey:e,attributeModel:t})=>{const{t:n}=Me(),{getters:s}=pt(),o=tbe;return{setFilterAttributes:()=>{const l=s["attributes/getAttributesByModel"](t),c={name:n(`${e}.GROUPS.CUSTOM_ATTRIBUTES`),attributes:l.map(m=>({key:m.attribute_key,name:m.attribute_display_name}))},u=o.map(m=>({name:n(`${e}.GROUPS.${m.i18nGroup}`),attributes:m.attributes.map(f=>({key:f.key,name:n(`${e}.ATTRIBUTES.${f.i18nKey}`)}))})),d=l.map(m=>({attributeKey:m.attribute_key,attributeI18nKey:`CUSTOM_ATTRIBUTE_${m.attribute_display_type.toUpperCase()}`,inputType:sbe(m.attribute_display_type),filterOperators:abe(m.attribute_display_type),attributeModel:"custom_attributes"}));return{filterGroups:[...u,c],filterTypes:[...d]}},initializeStatusAndAssigneeFilterToModal:(l,c,u)=>l!==""?{attribute_key:"status",attribute_model:"standard",filter_operator:"equal_to",values:[{id:l,name:n(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${l}.TEXT`)}],query_operator:"and",custom_attribute_type:""}:u===It.ASSIGNEE_TYPE.ME?{attribute_key:"assignee_id",filter_operator:"equal_to",values:c,query_operator:"and",custom_attribute_type:""}:null,initializeInboxTeamAndLabelFilterToModal:(l,c,u,d,m)=>{const f=[];return l&&f.push({attribute_key:"inbox_id",attribute_model:"standard",filter_operator:"equal_to",values:[{id:l,name:c.name}],query_operator:"and",custom_attribute_type:""}),u&&f.push({attribute_key:"team_id",attribute_model:"standard",filter_operator:"equal_to",values:d,query_operator:"and",custom_attribute_type:""}),m&&f.push({attribute_key:"labels",attribute_model:"standard",filter_operator:"equal_to",values:[{id:m,name:m}],query_operator:"and",custom_attribute_type:""}),f}}},ibe=(e,t,n)=>{if((e==="created_at"||e==="last_activity_at")&&t==="days_before")return"plain_text";const s=n.find(o=>o.attributeKey===e);return s==null?void 0:s.inputType},rbe=e=>({text:"string",number:"string",date:"string",checkbox:"multi_select",list:"multi_select",link:"string"})[e],lbe=(e,t)=>{const n=t.find(a=>a.attribute_key===e),{attribute_display_type:s}=n;return rbe(s)},Tu=(e,t,n,s)=>{const o=t==null?void 0:t.find(a=>a[n]===e[0]);return{id:e[0],name:o?o[s]:e[0]}},cbe=e=>e.map(t=>({id:t,name:t})),ube=(e,t)=>t.filter(s=>e.includes(s.title)).map(({title:s})=>({id:s,name:s})),dbe=(e,t)=>t.filter(s=>e.includes(s.id)).map(({id:s,name:o})=>({id:s.toLowerCase(),name:o})),pbe=(e,t)=>t.filter(s=>e.includes(s.id)).map(({id:s,name:o})=>({id:s,name:o})),hbe=(e,t)=>t.filter(n=>e.includes(n.id)),mbe=(e,t)=>{const{attribute_key:n,values:s}=e,{languages:o,countries:a,agents:i,inboxes:r,teams:l,campaigns:c,labels:u,priority:d}=t;switch(n){case"status":return cbe(s);case"assignee_id":return Tu(s,i,"id","name");case"inbox_id":return Tu(s,r,"id","name");case"team_id":return Tu(s,l,"id","name");case"campaign_id":return Tu(s,c,"id","title");case"labels":return ube(s,u);case"priority":return hbe(s,d);case"browser_language":return dbe(s,o);case"country_code":return pbe(s,a);default:return{id:s[0],name:s[0]}}},pA=(e,t)=>{const{attribute_key:n,filter_operator:s,values:o}=e,{filterTypes:a,allCustomAttributes:i}=t,r=ibe(n,s,a);return r===void 0?lbe(n,i)==="string"?o[0].toString():{id:o[0],name:o[0]}:r==="multi_select"||r==="search_select"?mbe(e,t):o[0].toString()},fbe={key:3,class:"flex items-center justify-center p-4 overflow-auto"},gbe={key:0,class:"text-center"},_be={key:1,class:"p-4 text-center text-slate-400 dark:text-slate-300"},vbe={__name:"ChatList",props:{conversationInbox:{type:[String,Number],default:0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showConversationList:{default:!0,type:Boolean},isOnExpandedLayout:{default:!1,type:Boolean}},emits:["conversationLoad"],setup(e,{emit:t}){const n=e,s=t,{uiSettings:o}=ln(),{t:a}=Me(),i=xn(),r=sn(),l=So(),c=X(null),u=X(null);Pn("contextMenuElementTarget",u);const d=X(It.ASSIGNEE_TYPE.ME),m=X(It.STATUS_TYPE.OPEN),f=X(It.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC),g=X(!1),T=X([]),S=X({}),_=X(!1),E=X(!1),b=X(!1),I=X([]),R=X(ebe.map(nt=>({...nt,attributeName:a(`FILTER.ATTRIBUTES.${nt.attributeI18nKey}`)}))),O=Oe("getCurrentUser"),x=Oe("getFilteredConversations"),L=Oe("getMineChats"),F=Oe("getAllStatusChats"),D=Oe("getUnAssignedChats"),V=Oe("getChatListLoadingStatus"),B=Oe("getSelectedInbox"),P=Oe("conversationStats/getStats"),k=Oe("getAppliedConversationFiltersV2"),U=Oe("customViews/getConversationCustomViews"),j=Oe("agents/getAgents"),z=Oe("teams/getTeams"),Y=Oe("inboxes/getInboxes"),te=Oe("campaigns/getAllCampaigns"),Z=Oe("labels/getLabels"),G=Oe("getCurrentAccountId"),H=Oe("teams/getTeam");Zve(c);const{selectedConversations:W,selectedInboxes:J,selectConversation:ee,deSelectConversation:ge,selectAllConversations:Ee,resetBulkActions:le,isConversationSelected:_e,onAssignAgent:$e,onAssignLabels:He,onAssignTeamsForBulk:Je,onUpdateConversations:Xe}=Qve(),{initializeStatusAndAssigneeFilterToModal:Qe,initializeInboxTeamAndLabelFilterToModal:rt}=obe({filteri18nKey:"FILTER",attributeModel:"conversation_attribute"}),at=C(()=>({root:c.value,rootMargin:"100px 0px 100px 0px"})),Et=C(()=>k.value.length!==0),Lt=C(()=>{if(n.foldersId){const nt=U.value.filter(Yt=>Yt.id===Number(n.foldersId)),[vt]=nt;return vt}}),q=C(()=>{var nt;return(nt=Lt.value)==null?void 0:nt.name}),ae=C(()=>!!(Lt.value&&n.foldersId!==0)),ie=C(()=>Et.value||ae.value),be=C(()=>{const{id:nt,name:vt}=O.value;return{id:nt,name:vt}}),fe=C(()=>Df(O.value,G.value)),Se=C(()=>jO(KO,fe.value,nt=>nt.permissions).map(({key:nt,count:vt})=>({key:nt,name:a(`CHAT_LIST.ASSIGNEE_TYPE_TABS.${nt}`),count:P.value[vt]||0}))),Le=C(()=>ie.value||d.value===It.ASSIGNEE_TYPE.ALL),ke=C(()=>ie.value?"appliedFilters":d.value),De=Xs("inboxes/getInbox",B),Ue=Xs("conversationPage/getCurrentPageFilter",d),de=Xs("conversationPage/getCurrentPageFilter",ke),Ce=Xs("conversationPage/getHasEndReached",ke),Pe=Xs("attributes/getAttributesByModel","conversation_attribute"),Q=C(()=>Se.value.find(vt=>vt.key===d.value).count),ne=C(()=>{const vt=T.value&&Array.isArray(T.value)&&!T.value.length,Yt=!ie.value&&vt,ds=T.value.length<25&&Q.value<25&&Q.value>T.value.length;return Yt&&ds?1:Ue.value+1}),ue=C(()=>({inboxId:n.conversationInbox?n.conversationInbox:void 0,assigneeType:d.value,status:m.value,sortBy:f.value,page:ne.value,labels:n.label?[n.label]:void 0,teamId:n.teamId||void 0,conversationType:n.conversationType||void 0})),ve=C(()=>n.teamId?H.value(n.teamId):{}),we=C(()=>Et.value?a("CHAT_LIST.TAB_HEADING"):De.value.name?De.value.name:ve.value.name?ve.value.name:n.label?`#${n.label}`:n.conversationType==="mention"?a("CHAT_LIST.MENTION_HEADING"):n.conversationType==="participating"?a("CONVERSATION_PARTICIPANTS.SIDEBAR_MENU_TITLE"):n.conversationType==="unattended"?a("CHAT_LIST.UNATTENDED_HEADING"):ae.value?Lt.value.name:a("CHAT_LIST.TAB_HEADING")),he=C(()=>{let nt=[];if(ie.value)nt=[...x.value];else{const vt=ue.value;d.value==="me"?nt=[...L.value(vt)]:d.value==="unassigned"?nt=[...D.value(vt)]:nt=[...F.value(vt)]}if(Lt.value){const{payload:vt}=Lt.value.query;nt=nt.filter(Yt=>YO(Yt,vt))}return nt}),Te=C(()=>he.value.length&&Ce.value&&!V.value),Ie=C(()=>he.value.length===W.value.length&&he.value.every(nt=>W.value.includes(nt.id))),ye=C(()=>[...new Set(J.value)]);function Be(){const{conversations_filter_by:nt={}}=o.value,{status:vt,order_by:Yt}=nt;m.value=vt||It.STATUS_TYPE.OPEN,f.value=Object.values(It.SORT_BY_TYPE).includes(Yt)?Yt:It.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC}function xe(){s("conversationLoad")}function Ge(nt){nt=As(nt);let vt=de.value+1;l.dispatch("fetchFilteredConversations",{queryData:po(nt),page:vt}).then(xe),g.value=!1}function ot(nt){nt=As(nt);let vt=de.value+1;l.dispatch("fetchFilteredConversations",{queryData:nt,page:vt}).then(xe)}function Tt(nt){nt=As(nt),le(),S.value=po(nt),l.dispatch("conversationPage/reset"),l.dispatch("emptyAllConversations"),Ge(nt)}function Ze(){g.value=!1,I.value=[]}function St(nt,vt){const Yt=As(nt),ds={...N(Lt),name:N(vt),query:po(Yt)};l.dispatch("customViews/update",ds),Ze()}function Ve(){_.value=!0}function ft(){_.value=!1}function Bt(){E.value=!0}function et(){E.value=!1}function gt(){return{agents:j.value,teams:z.value,inboxes:Y.value,labels:Z.value,campaigns:te.value,languages:Gf,countries:xa,priority:[{id:"low",name:a("CONVERSATION.PRIORITY.OPTIONS.LOW")},{id:"medium",name:a("CONVERSATION.PRIORITY.OPTIONS.MEDIUM")},{id:"high",name:a("CONVERSATION.PRIORITY.OPTIONS.HIGH")},{id:"urgent",name:a("CONVERSATION.PRIORITY.OPTIONS.URGENT")}],filterTypes:R.value,allCustomAttributes:Pe.value}}function tt(){const nt=Qe(m.value,be.value,d.value);nt&&(I.value=[...I.value,fo(nt)]);const vt=rt(n.conversationInbox,De.value,n.teamId,ve.value,n.label).map(fo);I.value=[...I.value,...vt]}function Ct(nt){var ds,Pa;const vt=(Pa=(ds=N(nt))==null?void 0:ds.query)==null?void 0:Pa.payload;if(!Array.isArray(vt))return;const Yt=vt.map(In=>{const Sa=fo(In),xi=Array.isArray(Sa.values)?pA(As(In),gt()):[];return{attributeKey:Sa.attributeKey,attributeModel:Sa.attributeModel,customAttributeType:Sa.customAttributeType,filterOperator:Sa.filterOperator,queryOperator:Sa.queryOperator??"and",values:xi}});I.value=[...I.value,...Yt]}function vn(){I.value=[...k.value]}function ut(){if(g.value===!0){Ze();return}!Et.value&&!ae.value&&tt(),ae.value&&Ct(Lt.value),Et.value&&vn(),g.value=!0}function $t(){l.dispatch("updateChatListFilters",ue.value),l.dispatch("fetchAllConversations").then(xe)}function Mt(){if(I.value=[],le(),l.dispatch("conversationPage/reset"),l.dispatch("emptyAllConversations"),l.dispatch("clearConversationFilters"),ae.value){const nt=Lt.value.query;ot(nt)}n.foldersId||$t()}function Tn(){if(!(Ce.value||V.value))if(!ie.value)$t();else if(ae.value){const nt=Lt.value.query;ot(nt)}else Et.value&&Ge(k.value)}function Os(){const nt=u.value;if(nt&&nt.hasScrollbar){const{scrollTop:vt,scrollHeight:Yt,clientHeight:ds}=nt.$el;Yt-(vt+ds)<100&&Tn()}}function $n(nt){d.value!==nt&&(le(),wt.emit("clearSearchInput"),d.value=nt,Ue.value||$t())}function Sn(nt,vt){vt==="status"?m.value=nt:f.value=nt,Mt()}function _s(){const vt=U.value[U.value.length-1].id;i.push({name:"folder_conversations",params:{id:vt}})}function Ns(){U.value.length>0?_s():(i.push({name:"home"}),$t())}function Es(){const{params:{accountId:nt,inbox_id:vt,label:Yt,teamId:ds},name:Pa}=r;let In="";XO({route:{name:Pa}})?In="mention":qO({route:{name:Pa}})&&(In="unattended"),i.push(S0({accountId:nt,conversationType:In,customViewId:n.foldersId,inboxId:vt,label:Yt,teamId:ds}))}async function na(nt,vt=null){l.dispatch("setCurrentChatPriority",{priority:nt,conversationId:vt}),l.dispatch("assignPriority",{conversationId:vt,priority:nt}).then(()=>{Pt(ua.CHANGE_PRIORITY,{newValue:nt,from:"Context menu"}),ce(a("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:nt,conversationId:vt}))})}async function Ls(nt){try{await l.dispatch("markMessagesUnread",{id:nt}),Es()}catch{}}async function us(nt){try{await l.dispatch("markMessagesRead",{id:nt})}catch{}}async function sa(nt,vt=null){try{await l.dispatch("assignTeam",{conversationId:vt,teamId:nt.id}),ce(a("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.SUCCESFUL",{team:nt.name,conversationId:vt}))}catch{ce(a("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.FAILED"))}}function to(nt,vt,Yt){l.dispatch("toggleStatus",{conversationId:nt,status:vt,snoozedUntil:Yt}).then(()=>{ce(a("CONVERSATION.CHANGE_STATUS"))})}function No(nt){return W.value.length?W.value.every(vt=>{var Yt;return((Yt=l.getters.getConversationById(vt))==null?void 0:Yt.status)===nt}):!1}function mr(nt){b.value=nt}function fr(nt){Ee(nt,he)}Ei("fetch_conversation_stats",()=>{ie.value||l.dispatch("conversationStats/get",ue.value)}),Zs(u,"scroll",Os),dt(()=>{l.dispatch("setChatListFilters",ue.value),Be(),l.dispatch("setChatStatusFilter",m.value),l.dispatch("setChatSortFilter",f.value),Mt(),ae.value&&l.dispatch("campaigns/get")});const Jo=X(null),dn=X(null);async function gr(){try{await l.dispatch("deleteConversation",dn.value),Es(),dn.value=null,Jo.value.close(),ce(a("CONVERSATION.SUCCESS_DELETE_CONVERSATION"))}catch{ce(a("CONVERSATION.FAIL_DELETE_CONVERSATION"))}}const _r=nt=>{dn.value=nt,Jo.value.open()};return Pn("selectConversation",ee),Pn("deSelectConversation",ge),Pn("assignAgent",$e),Pn("assignTeam",sa),Pn("assignLabels",He),Pn("updateConversationStatus",to),Pn("toggleContextMenu",mr),Pn("markAsUnread",Ls),Pn("markAsRead",us),Pn("assignPriority",na),Pn("isConversationSelected",_e),Pn("deleteConversation",_r),ct(ve,()=>Mt()),ct(C(()=>n.conversationInbox),()=>Mt()),ct(C(()=>n.label),()=>Mt()),ct(C(()=>n.conversationType),()=>Mt()),ct(Lt,(nt,vt)=>{nt!==vt&&l.dispatch("customViews/setActiveConversationFolder",nt||null),Mt()}),ct(x,()=>{T.value=he.value}),ct(ue,(nt,vt)=>{nt!==vt&&l.dispatch("updateChatListFilters",nt)}),(nt,vt)=>(p(),v("div",{class:se(["flex flex-col flex-shrink-0 bg-n-solid-1 conversations-list-wrap",[{hidden:!e.showConversationList},e.isOnExpandedLayout?"basis-full":"w-[340px] 2xl:w-[412px]"]])},[We(nt.$slots,"default"),y(Yfe,{"page-title":we.value,"has-applied-filters":Et.value,"has-active-folders":ae.value,"active-status":m.value,"is-on-expanded-layout":e.isOnExpandedLayout,"conversation-stats":N(P),"is-list-loading":N(V)&&!he.value.length,onAddFolders:Ve,onDeleteFolders:Bt,onFiltersModal:ut,onResetFilters:Mt,onBasicFilterChange:Sn},null,8,["page-title","has-applied-filters","has-active-folders","active-status","is-on-expanded-layout","conversation-stats","is-list-loading"]),_.value?(p(),$(gc,{key:0,to:"#saveFilterTeleportTarget"},{default:K(()=>[y(Oge,{modelValue:I.value,"onUpdate:modelValue":vt[0]||(vt[0]=Yt=>I.value=Yt),"custom-views-query":S.value,"open-last-saved-item":_s,onClose:ft},null,8,["modelValue","custom-views-query"])]),_:1})):w("",!0),E.value?(p(),$(R_e,{key:1,show:E.value,"onUpdate:show":vt[1]||(vt[1]=Yt=>E.value=Yt),"active-custom-view":Lt.value,"custom-views-id":e.foldersId,"open-last-item-after-delete":Ns,onClose:et},null,8,["show","active-custom-view","custom-views-id"])):w("",!0),ie.value?w("",!0):(p(),$(wge,{key:2,items:Se.value,"active-tab":d.value,"is-compact":"",onChatTabChange:$n},null,8,["items","active-tab"])),!N(V)&&!he.value.length?(p(),v("p",fbe,A(nt.$t("CHAT_LIST.LIST.404")),1)):w("",!0),N(W).length?(p(),$(qve,{key:4,conversations:N(W),"all-conversations-selected":Ie.value,"selected-inboxes":ye.value,"show-open-action":No("open"),"show-resolved-action":No("resolved"),"show-snoozed-action":No("snoozed"),onSelectAllConversations:fr,onAssignAgent:N($e),onUpdateConversations:N(Xe),onAssignLabels:N(He),onAssignTeam:N(Je)},null,8,["conversations","all-conversations-selected","selected-inboxes","show-open-action","show-resolved-action","show-snoozed-action","onAssignAgent","onUpdateConversations","onAssignLabels","onAssignTeam"])):w("",!0),h("div",{ref_key:"conversationListRef",ref:c,class:se(["flex-1 overflow-hidden conversations-list hover:overflow-y-auto",{"overflow-hidden":b.value}])},[y(N(s_),{ref_key:"conversationDynamicScroller",ref:u,items:he.value,"min-item-size":24,class:"w-full h-full overflow-auto"},{default:K(({item:Yt,index:ds,active:Pa})=>[y(N(tA),{item:Yt,active:Pa,"data-index":ds,"size-dependencies":[Yt.messages,Yt.labels,Yt.uuid,Yt.inbox_id]},{default:K(()=>[y(O_e,{source:Yt,label:e.label,"team-id":e.teamId,"folders-id":e.foldersId,"conversation-type":e.conversationType,"show-assignee":Le.value,onSelectConversation:N(ee),onDeSelectConversation:N(ge)},null,8,["source","label","team-id","folders-id","conversation-type","show-assignee","onSelectConversation","onDeSelectConversation"])]),_:2},1032,["item","active","data-index","size-dependencies"])]),after:K(()=>[N(V)?(p(),v("div",gbe,vt[4]||(vt[4]=[h("span",{class:"mt-4 mb-4 spinner"},null,-1)]))):Te.value?(p(),v("p",_be,A(nt.$t("CHAT_LIST.EOF")),1)):(p(),$(dA,{key:2,options:at.value,onObserved:Tn},null,8,["options"]))]),_:1},8,["items"])],2),y(cs,{ref_key:"deleteConversationDialogRef",ref:Jo,type:"alert",title:nt.$t("CONVERSATION.DELETE_CONVERSATION.TITLE",{conversationId:dn.value}),description:nt.$t("CONVERSATION.DELETE_CONVERSATION.DESCRIPTION"),"confirm-button-label":nt.$t("CONVERSATION.DELETE_CONVERSATION.CONFIRM"),onConfirm:gr,onClose:vt[2]||(vt[2]=Yt=>dn.value=null)},null,8,["title","description","confirm-button-label"]),g.value?(p(),$(gc,{key:5,to:"#conversationFilterTeleportTarget"},{default:K(()=>[y(bge,{modelValue:I.value,"onUpdate:modelValue":vt[3]||(vt[3]=Yt=>I.value=Yt),"folder-name":q.value,"is-folder-view":ae.value,onApplyFilter:Tt,onUpdateFolder:St,onClose:Ze},null,8,["modelValue","folder-name","is-folder-view"])]),_:1})):w("",!0)],2))}},bbe={components:{NextButton:oe},props:{show:{type:Boolean,default:!1},currentChat:{type:Object,default:()=>({})}},emits:["cancel","update:show"],setup(){return{v$:bt()}},data(){return{email:"",selectedType:"",isSubmitting:!1}},validations:{email:{required:Ye,email:Ii,minLength:Qt(4)}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},sentToOtherEmailAddress(){return this.selectedType==="other_email_address"},isFormValid(){return this.selectedType?this.sentToOtherEmailAddress?!!this.email&&!this.v$.email.$error:!0:!1},selectedEmailAddress(){const{meta:e}=this.currentChat;switch(this.selectedType){case"contact":return e.sender.email;case"assignee":return e.assignee.email;case"other_email_address":return this.email;default:return""}}},methods:{onCancel(){this.$emit("cancel")},async onSubmit(){this.isSubmitting=!1;try{await this.$store.dispatch("sendEmailTranscript",{email:this.selectedEmailAddress,conversationId:this.currentChat.id}),ce(this.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS")),this.onCancel()}catch{ce(this.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR"))}finally{this.isSubmitting=!1}}}},Ebe={class:"flex flex-col h-auto overflow-auto"},Tbe={class:"w-full"},ybe={key:0,class:"flex items-center gap-2"},Sbe={for:"contact"},Abe={key:1,class:"flex items-center gap-2"},Ibe={for:"assignee"},Cbe={class:"flex items-center gap-2"},Obe={for:"other_email_address"},Nbe={key:2,class:"w-[50%] mt-1"},wbe=["placeholder"],Rbe={key:0,class:"message"},xbe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function $be(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("NextButton"),l=M("woot-modal");return p(),$(l,{show:a.localShow,"onUpdate:show":t[6]||(t[6]=c=>a.localShow=c),"on-close":a.onCancel},{default:K(()=>[h("div",Ebe,[y(i,{"header-title":e.$t("EMAIL_TRANSCRIPT.TITLE"),"header-content":e.$t("EMAIL_TRANSCRIPT.DESC")},null,8,["header-title","header-content"]),h("form",{class:"w-full",onSubmit:t[5]||(t[5]=Fe((...c)=>a.onSubmit&&a.onSubmit(...c),["prevent"]))},[h("div",Tbe,[n.currentChat.meta.sender&&n.currentChat.meta.sender.email?(p(),v("div",ybe,[re(h("input",{id:"contact","onUpdate:modelValue":t[0]||(t[0]=c=>o.selectedType=c),type:"radio",name:"selectedType",value:"contact"},null,512),[[Op,o.selectedType]]),h("label",Sbe,A(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_CONTACT")),1)])):w("",!0),n.currentChat.meta.assignee?(p(),v("div",Abe,[re(h("input",{id:"assignee","onUpdate:modelValue":t[1]||(t[1]=c=>o.selectedType=c),type:"radio",name:"selectedType",value:"assignee"},null,512),[[Op,o.selectedType]]),h("label",Ibe,A(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_AGENT")),1)])):w("",!0),h("div",Cbe,[re(h("input",{id:"other_email_address","onUpdate:modelValue":t[2]||(t[2]=c=>o.selectedType=c),type:"radio",name:"selectedType",value:"other_email_address"},null,512),[[Op,o.selectedType]]),h("label",Obe,A(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_OTHER_EMAIL_ADDRESS")),1)]),a.sentToOtherEmailAddress?(p(),v("div",Nbe,[h("label",{class:se({error:s.v$.email.$error})},[re(h("input",{"onUpdate:modelValue":t[3]||(t[3]=c=>o.email=c),type:"text",placeholder:e.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.PLACEHOLDER"),onInput:t[4]||(t[4]=(...c)=>s.v$.email.$touch&&s.v$.email.$touch(...c))},null,40,wbe),[[mt,o.email]]),s.v$.email.$error?(p(),v("span",Rbe,A(e.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.ERROR")),1)):w("",!0)],2)])):w("",!0)]),h("div",xbe,[y(r,{faded:"",slate:"",type:"reset",label:e.$t("EMAIL_TRANSCRIPT.CANCEL"),onClick:Fe(a.onCancel,["prevent"])},null,8,["label","onClick"]),y(r,{type:"submit",label:e.$t("EMAIL_TRANSCRIPT.SUBMIT"),disabled:!a.isFormValid},null,8,["label","disabled"])])],32)])]),_:1},8,["show","on-close"])}const Mbe=Ae(bbe,[["render",$be]]),Lbe={class:"relative flex items-center justify-end resolve-actions"},kbe={key:0,class:"dropdown-pane dropdown-pane--open left-auto top-full mt-0.5 start-0 xl:start-auto xl:end-0 max-w-[12.5rem] min-w-[9.75rem]"},Dbe={__name:"ResolveAction",setup(e){const t=pt(),n=nn(),{t:s}=Me(),o=X(null),a=X(!1),[i,r]=es(),l=()=>r(!1),c=()=>r(!0),u=C(()=>n.getSelectedChat.value),d=C(()=>u.value.status===It.STATUS_TYPE.OPEN),m=C(()=>u.value.status===It.STATUS_TYPE.PENDING),f=C(()=>u.value.status===It.STATUS_TYPE.RESOLVED),g=C(()=>u.value.status===It.STATUS_TYPE.SNOOZED),T=C(()=>!m.value&&!g.value),S=C(()=>m.value||g.value),_=()=>{const x=document.querySelectorAll(".conversations-list .conversation"),L=document.querySelector("div.conversations-list div.conversation.active"),F=[...x].indexOf(L),D=x.length-1;return{all:x,activeIndex:F,lastIndex:D}},E=()=>{document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},b=(x,L)=>{l(),a.value=!0,t.dispatch("toggleStatus",{conversationId:u.value.id,status:x,snoozedUntil:L}).then(()=>{ce(s("CONVERSATION.CHANGE_STATUS")),a.value=!1})},I=()=>{b(It.STATUS_TYPE.OPEN)},R=()=>{b(It.STATUS_TYPE.RESOLVED)};return $s({"Alt+KeyM":{action:()=>{var x;return(x=o.value)==null?void 0:x.$el.click()},allowOnFocusedInput:!0},"Alt+KeyE":{action:async()=>{await b(It.STATUS_TYPE.RESOLVED)}},"$mod+Alt+KeyE":{action:async x=>{const{all:L,activeIndex:F,lastIndex:D}=_();await b(It.STATUS_TYPE.RESOLVED),F<D?L[F+1].click():L.length>1&&(L[0].click(),document.querySelector(".conversations-list").scrollTop=0),x.preventDefault()}}}),Ei(P_e,I),Ei(B_e,R),(x,L)=>{const F=qe("on-clickaway");return p(),v("div",Lbe,[h("div",{class:se(["rounded-lg shadow outline-1 outline flex-shrink-0",S.value?"outline-transparent":"outline-n-container"])},[d.value?(p(),$(oe,{key:0,label:N(s)("CONVERSATION.HEADER.RESOLVE_ACTION"),size:"sm",color:"slate",class:"ltr:rounded-r-none rtl:rounded-l-none !outline-0","is-loading":a.value,onClick:R},null,8,["label","is-loading"])):f.value?(p(),$(oe,{key:1,label:N(s)("CONVERSATION.HEADER.REOPEN_ACTION"),size:"sm",color:"slate",class:"ltr:rounded-r-none rtl:rounded-l-none !outline-0","is-loading":a.value,onClick:I},null,8,["label","is-loading"])):S.value?(p(),$(oe,{key:2,label:N(s)("CONVERSATION.HEADER.OPEN_ACTION"),size:"sm",color:"slate","is-loading":a.value,onClick:I},null,8,["label","is-loading"])):w("",!0),T.value?(p(),$(oe,{key:3,ref_key:"arrowDownButtonRef",ref:o,icon:"i-lucide-chevron-down",disabled:a.value,size:"sm",class:"ltr:rounded-l-none rtl:rounded-r-none !outline-0",color:"slate","trailing-icon":"",onClick:c},null,8,["disabled"])):w("",!0)],2),N(i)?re((p(),v("div",kbe,[y(Bd,{class:"mb-0"},{default:K(()=>[m.value?w("",!0):(p(),$(dc,{key:0},{default:K(()=>[y(oe,{label:N(s)("CONVERSATION.RESOLVE_DROPDOWN.SNOOZE_UNTIL"),ghost:"",slate:"",sm:"",start:"",icon:"i-lucide-alarm-clock-minus",class:"w-full",onClick:L[0]||(L[0]=()=>E())},null,8,["label"])]),_:1})),m.value?w("",!0):(p(),$(dc,{key:1},{default:K(()=>[y(oe,{label:N(s)("CONVERSATION.RESOLVE_DROPDOWN.MARK_PENDING"),ghost:"",slate:"",sm:"",start:"",icon:"i-lucide-circle-dot-dashed",class:"w-full",onClick:L[1]||(L[1]=()=>b(N(It).STATUS_TYPE.PENDING))},null,8,["label"])]),_:1}))]),_:1})])),[[F,l]]):w("",!0)])}}},Pbe=Ae(Dbe,[["__scopeId","data-v-ee10a39f"]]),Bbe={class:"relative flex items-center gap-2 actions--container"},Fbe={class:"relative flex items-center group"},Ube={__name:"MoreActions",setup(e){const t=So(),{t:n}=Me(),[s,o]=es(!1),[a,i]=es(!1),r=C(()=>t.getters.getSelectedChat),l=C(()=>{const m=[];return r.value.muted?m.push({icon:"i-lucide-volume-1",label:n("CONTACT_PANEL.UNMUTE_CONTACT"),action:"unmute",value:"unmute"}):m.push({icon:"i-lucide-volume-off",label:n("CONTACT_PANEL.MUTE_CONTACT"),action:"mute",value:"mute"}),m.push({icon:"i-lucide-share",label:n("CONTACT_PANEL.SEND_TRANSCRIPT"),action:"send_transcript",value:"send_transcript"}),m}),c=({action:m})=>{i(!1),m==="mute"?(t.dispatch("muteConversation",r.value.id),ce(n("CONTACT_PANEL.MUTED_SUCCESS"))):m==="unmute"?(t.dispatch("unmuteConversation",r.value.id),ce(n("CONTACT_PANEL.UNMUTED_SUCCESS"))):m==="send_transcript"&&o()},u=()=>{t.dispatch("muteConversation",r.value.id),ce(n("CONTACT_PANEL.MUTED_SUCCESS"))},d=()=>{t.dispatch("unmuteConversation",r.value.id),ce(n("CONTACT_PANEL.UNMUTED_SUCCESS"))};return wt.on(Q1,u),wt.on(J1,d),wt.on(eE,o),zo(()=>{wt.off(Q1,u),wt.off(J1,d),wt.off(eE,o)}),(m,f)=>{const g=qe("tooltip"),T=qe("on-clickaway");return p(),v("div",Bbe,[y(Pbe,{"conversation-id":r.value.id,status:r.value.status},null,8,["conversation-id","status"]),re((p(),v("div",Fbe,[re(y(oe,{size:"sm",variant:"ghost",color:"slate",icon:"i-lucide-more-vertical",class:"rounded-md group-hover:bg-n-alpha-2",onClick:f[0]||(f[0]=S=>N(i)())},null,512),[[g,m.$t("CONVERSATION.HEADER.MORE_ACTIONS")]]),N(a)?(p(),$(Hs,{key:0,"menu-items":l.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:c},null,8,["menu-items"])):w("",!0)])),[[T,()=>N(i)(!1)]]),N(s)?(p(),$(Mbe,{key:0,show:N(s),"current-chat":r.value,onCancel:N(o)},null,8,["show","current-chat","onCancel"])):w("",!0)])}}},c_=()=>{const e=Oe("getSelectedChat"),t=Oe("inboxes/getInboxById"),n=C(()=>{const O=e.value.inbox_id;return fo(t.value(O),{deep:!0})}),s=C(()=>n.value.channelType),o=C(()=>s.value===yt.API),a=C(()=>s.value===yt.FB),i=C(()=>s.value===yt.WEB),r=C(()=>s.value===yt.TWILIO),l=C(()=>s.value===yt.LINE),c=C(()=>s.value===yt.EMAIL),u=C(()=>s.value===yt.TELEGRAM),d=C(()=>n.value.provider||""),m=C(()=>c.value&&n.value.provider==="microsoft"),f=C(()=>c.value&&n.value.provider==="google"),g=C(()=>{const{medium:O=""}=n.value;return r.value&&O==="sms"}),T=C(()=>s.value===yt.SMS||g.value),S=C(()=>{const{medium:O=""}=n.value;return r.value&&O==="whatsapp"}),_=C(()=>s.value===yt.WHATSAPP&&d.value==="whatsapp_cloud"),E=C(()=>s.value===yt.WHATSAPP&&d.value==="default"),b=C(()=>s.value===yt.WHATSAPP||S.value),I=C(()=>s.value===yt.INSTAGRAM),R=C(()=>s.value===yt.VOICE);return{inbox:n,isAFacebookInbox:a,isALineChannel:l,isAPIInbox:o,isASmsInbox:T,isATelegramChannel:u,isATwilioChannel:r,isAWebWidgetInbox:i,isAWhatsAppChannel:b,isAMicrosoftInbox:m,isAGoogleInbox:f,isATwilioWhatsAppChannel:S,isAWhatsAppCloudChannel:_,is360DialogWhatsAppChannel:E,isAnEmailChannel:c,isAnInstagramChannel:I,isAVoiceChannel:R}},Gbe={class:"flex items-center justify-start w-full xl:w-auto max-w-full min-w-0 xl:flex-1"},Vbe={class:"flex flex-col items-start min-w-0 ml-2 overflow-hidden rtl:ml-0 rtl:mr-2"},Hbe={class:"flex flex-row items-center max-w-full gap-1 p-0 m-0"},Wbe={class:"text-sm font-medium truncate leading-tight text-n-slate-12"},zbe={class:"flex items-center gap-2 overflow-hidden text-xs conversation--header--actions text-ellipsis whitespace-nowrap"},jbe={key:1,class:"font-medium text-n-amber-10"},Kbe={class:"flex flex-row items-center justify-start xl:justify-end flex-shrink-0 gap-2 w-full xl:w-auto header-actions-wrap"},Ybe={__name:"ConversationHeader",props:{chat:{type:Object,default:()=>({})},showBackButton:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=Me(),s=So(),o=sn(),a=X(null),{width:i}=uc(a),{isAWebWidgetInbox:r}=c_(),l=C(()=>s.getters.getSelectedChat),c=C(()=>s.getters.getCurrentAccountId),u=C(()=>t.chat.meta),d=C(()=>{const{params:{inbox_id:b,label:I,teamId:R},name:O}=o;return S0({accountId:c,inboxId:b,label:I,teamId:R,conversationType:O==="conversation_mentions"?"mention":""})}),m=C(()=>r.value?u.value.hmac_verified:!0),f=C(()=>s.getters["contacts/getContact"](t.chat.meta.sender.id)),g=C(()=>l.value.status===It.STATUS_TYPE.SNOOZED),T=C(()=>{const{snoozed_until:b}=l.value;return b?`${n("CONVERSATION.HEADER.SNOOZED_UNTIL")} ${L_e(b)}`:n("CONVERSATION.HEADER.SNOOZED_UNTIL_NEXT_REPLY")}),S=C(()=>{const{inbox_id:b}=t.chat;return s.getters["inboxes/getInbox"](b)}),_=C(()=>s.getters["inboxes/getInboxes"].length>1),E=C(()=>{var b;return(b=t.chat)==null?void 0:b.sla_policy_id});return(b,I)=>{const R=M("fluent-icon"),O=qe("tooltip");return p(),v("div",{ref_key:"conversationHeader",ref:a,class:"flex flex-col gap-3 items-center justify-between flex-1 w-full min-w-0 xl:flex-row px-3 py-2 border-b bg-n-background border-n-weak h-24 xl:h-12"},[h("div",Gbe,[e.showBackButton?(p(),$(lr,{key:0,"back-url":d.value,class:"ltr:mr-2 rtl:ml-2"},null,8,["back-url"])):w("",!0),y(Hn,{src:f.value.thumbnail,username:f.value.name,status:f.value.availability_status,size:"32px",class:"flex-shrink-0"},null,8,["src","username","status"]),h("div",Vbe,[h("div",Hbe,[h("span",Wbe,A(f.value.name),1),m.value?w("",!0):re((p(),$(R,{key:0,size:"14",class:"text-n-amber-10 my-0 mx-0 min-w-[14px] flex-shrink-0",icon:"warning"},null,512)),[[O,b.$t("CONVERSATION.UNVERIFIED_SESSION")]])]),h("div",zbe,[_.value?(p(),$(o_,{key:0,inbox:S.value,class:"!mx-0"},null,8,["inbox"])):w("",!0),g.value?(p(),v("span",jbe,A(T.value),1)):w("",!0)])])]),h("div",Kbe,[E.value?(p(),$(cA,{key:0,chat:e.chat,"show-extended-info":"","parent-width":N(i),class:"hidden md:flex"},null,8,["chat","parent-width"])):w("",!0),y(Ube,{"conversation-id":l.value.id},null,8,["conversation-id"])])],512)}}},Xbe={components:{LoadingState:Rc},props:{config:{type:Array,default:()=>[]},currentChat:{type:Object,default:()=>({})},isVisible:{type:Boolean,default:!1},position:{type:Number,required:!0}},data(){return{hasOpenedAtleastOnce:!1,iframeLoading:!0}},computed:{dashboardAppContext(){return{conversation:this.currentChat,contact:this.$store.getters["contacts/getContact"](this.contactId),currentAgent:this.currentAgent}},contactId(){var e,t,n;return(n=(t=(e=this.currentChat)==null?void 0:e.meta)==null?void 0:t.sender)==null?void 0:n.id},currentAgent(){const{id:e,name:t,email:n}=this.$store.getters.getCurrentUser;return{id:e,name:t,email:n}}},watch:{isVisible(){this.isVisible&&(this.hasOpenedAtleastOnce=!0)}},mounted(){window.addEventListener("message",this.triggerEvent)},unmounted(){window.removeEventListener("message",this.triggerEvent)},methods:{triggerEvent(e){this.isVisible&&e.data==="chatwoot-dashboard-app:fetch-info"&&this.onIframeLoad(0)},getFrameId(e){return`dashboard-app--frame-${this.position}-${e}`},onIframeLoad(e){const t=document.getElementById(this.getFrameId(e)),n={event:"appContext",data:this.dashboardAppContext};t.contentWindow.postMessage(JSON.stringify(n),"*"),this.iframeLoading=!1}}},qbe={key:0,class:"dashboard-app--container"},Zbe=["id","src","onLoad"];function Qbe(e,t,n,s,o,a){const i=M("LoadingState");return o.hasOpenedAtleastOnce?(p(),v("div",qbe,[(p(!0),v(pe,null,Ne(n.config,(r,l)=>(p(),v("div",{key:l,class:"dashboard-app--list"},[o.iframeLoading?(p(),$(i,{key:0,message:e.$t("DASHBOARD_APPS.LOADING_MESSAGE"),class:"dashboard-app_loading-container"},null,8,["message"])):w("",!0),r.type==="frame"&&r.url?(p(),v("iframe",{key:1,id:a.getFrameId(l),src:r.url,onLoad:()=>a.onIframeLoad(l)},null,40,Zbe)):w("",!0)]))),128))])):w("",!0)}const Jbe=Ae(Xbe,[["render",Qbe],["__scopeId","data-v-dd08e7a5"]]),e1e={class:"h-full w-full bg-white dark:bg-slate-900 border border-slate-100 dark:border-white/10 rounded-lg p-4 flex flex-col"},t1e={class:"flex-1 flex items-center justify-center"},n1e=["src","alt"],s1e={class:"mt-auto"},a1e={class:"text-base text-slate-800 dark:text-slate-100 font-interDisplay font-semibold tracking-[0.3px]"},o1e={class:"text-slate-600 dark:text-slate-400 text-sm"},yu={__name:"OnboardingFeatureCard",props:{imageSrc:{type:String,default:""},imageAlt:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},to:{type:String,default:""},linkText:{type:String,default:""}},setup(e){return(t,n)=>{const s=M("router-link");return p(),v("div",e1e,[h("div",t1e,[h("img",{src:e.imageSrc,alt:e.imageAlt,class:"h-36 w-auto mx-auto"},null,8,n1e)]),h("div",s1e,[h("p",a1e,A(e.title),1),h("p",o1e,A(e.description),1),e.to?(p(),$(s,{key:0,to:{name:e.to},class:"no-underline text-woot-500 text-sm font-medium"},{default:K(()=>[h("span",null,A(e.linkText),1),n[0]||(n[0]=h("span",{class:"ml-2"},A("→"),-1))]),_:1},8,["to"])):w("",!0)])])}}},i1e={class:"min-h-screen lg:max-w-5xl max-w-4xl mx-auto grid grid-cols-2 grid-rows-[auto_1fr_1fr] auto-rows-min gap-4 p-8 w-full font-inter overflow-auto"},r1e={class:"col-span-full self-start"},l1e={class:"text-xl font-semibold text-slate-900 dark:text-white font-interDisplay tracking-[0.3px]"},c1e={class:"text-slate-600 dark:text-slate-400 max-w-2xl text-base"},u1e={__name:"OnboardingView",setup(e){const t=nn(),{t:n}=Me(),s=C(()=>t["globalConfig/get"].value),o=C(()=>t.getCurrentUser.value),a=C(()=>{const i=new Date().getHours();let r;return i<12?r="ONBOARDING.GREETING_MORNING":i<18?r="ONBOARDING.GREETING_AFTERNOON":r="ONBOARDING.GREETING_EVENING",n(r,{name:o.value.name,installationName:s.value.installationName})});return(i,r)=>(p(),v("div",i1e,[h("div",r1e,[h("p",l1e,A(a.value),1),h("p",c1e,A(i.$t("ONBOARDING.DESCRIPTION",{installationName:s.value.installationName})),1)]),y(yu,{"image-src":"/dashboard/images/onboarding/omnichannel-inbox.png","image-alt":"Omnichannel",to:"settings_inbox_new",title:i.$t("ONBOARDING.ALL_CONVERSATION.TITLE"),description:i.$t("ONBOARDING.ALL_CONVERSATION.DESCRIPTION"),"link-text":i.$t("ONBOARDING.ALL_CONVERSATION.NEW_LINK")},null,8,["title","description","link-text"]),y(yu,{"image-src":"/dashboard/images/onboarding/teams.png","image-alt":"Teams",to:"settings_teams_new",title:i.$t("ONBOARDING.TEAM_MEMBERS.TITLE"),description:i.$t("ONBOARDING.TEAM_MEMBERS.DESCRIPTION"),"link-text":i.$t("ONBOARDING.TEAM_MEMBERS.NEW_LINK")},null,8,["title","description","link-text"]),y(yu,{"image-src":"/dashboard/images/onboarding/canned-responses.png","image-alt":"Canned responses",to:"canned_list",title:i.$t("ONBOARDING.CANNED_RESPONSES.TITLE"),description:i.$t("ONBOARDING.CANNED_RESPONSES.DESCRIPTION"),"link-text":i.$t("ONBOARDING.CANNED_RESPONSES.NEW_LINK")},null,8,["title","description","link-text"]),y(yu,{"image-src":"/dashboard/images/onboarding/labels.png","image-alt":"Labels",to:"labels_list",title:i.$t("ONBOARDING.LABELS.TITLE"),description:i.$t("ONBOARDING.LABELS.DESCRIPTION"),"link-text":i.$t("ONBOARDING.LABELS.NEW_LINK")},null,8,["title","description","link-text"])]))}},d1e={props:{customClass:{type:String,default:""}}};function p1e(e,t,n,s,o,a){return p(),v("kbd",{class:se(["hotkey p-0.5 min-w-[1rem] uppercase",n.customClass])},[We(e.$slots,"default")],2)}const Br=Ae(d1e,[["render",p1e]]),h1e={components:{Hotkey:Br},data(){return{keyShortcuts:[{key:"K",description:this.$t("CONVERSATION.EMPTY_STATE.CMD_BAR")},{key:"/",description:this.$t("CONVERSATION.EMPTY_STATE.KEYBOARD_SHORTCUTS")}]}}},m1e={class:"flex flex-col gap-2 mt-9"},f1e={class:"flex items-center gap-2"},g1e={class:"text-sm font-medium text-center text-n-slate-12"};function _1e(e,t,n,s,o,a){const i=M("Hotkey");return p(),v("div",m1e,[(p(!0),v(pe,null,Ne(o.keyShortcuts,r=>(p(),v("div",{key:r.key,class:"flex items-center gap-2"},[h("div",f1e,[y(i,{"custom-class":"w-8 h-6 text-lg font-medium text-n-slate-12 outline outline-n-container outline-1 bg-n-alpha-3"},{default:K(()=>t[0]||(t[0]=[Re(" ⌘ ")])),_:1}),y(i,{"custom-class":"w-8 h-6 text-xs font-medium text-n-slate-12 outline outline-n-container outline-1 bg-n-alpha-3"},{default:K(()=>[Re(A(r.key),1)]),_:2},1024)]),h("span",g1e,A(r.description),1)]))),128))])}const v1e=Ae(h1e,[["render",_1e]]),b1e="/vite/assets/no-chat-dark-QmAk5Fw3.svg",E1e="/vite/assets/no-chat-DhexzS-m.svg",T1e={components:{FeaturePlaceholder:v1e},props:{message:{type:String,required:!0}}},y1e={class:"flex flex-col items-center justify-center h-full"},S1e={class:"text-sm text-slate-800 dark:text-slate-200 font-medium text-center"};function A1e(e,t,n,s,o,a){const i=M("FeaturePlaceholder");return p(),v("div",y1e,[t[1]||(t[1]=h("img",{class:"m-4 w-32 hidden dark:block",src:b1e,alt:"No Chat dark"},null,-1)),t[2]||(t[2]=h("img",{class:"m-4 w-32 block dark:hidden",src:E1e,alt:"No Chat"},null,-1)),h("span",S1e,[Re(A(n.message)+" ",1),t[0]||(t[0]=h("br",null,null,-1))]),y(i)])}const I1e=Ae(T1e,[["render",A1e]]),C1e={components:{OnboardingView:u1e,EmptyStateMessage:I1e},props:{isOnExpandedLayout:{type:Boolean,default:!1}},setup(){const{isAdmin:e}=ka(),{accountScopedUrl:t}=zn();return{isAdmin:e,accountScopedUrl:t}},computed:{...lt({currentChat:"getSelectedChat",allConversations:"getAllConversations",inboxesList:"inboxes/getInboxes",uiFlags:"inboxes/getUIFlags",loadingChatList:"getChatListLoadingStatus"}),loadingIndicatorMessage(){return this.uiFlags.isFetching?this.$t("CONVERSATION.LOADING_INBOXES"):this.$t("CONVERSATION.LOADING_CONVERSATIONS")},conversationMissingMessage(){return this.isOnExpandedLayout?this.$t("CONVERSATION.404"):this.$t("CONVERSATION.SELECT_A_CONVERSATION")},newInboxURL(){return this.accountScopedUrl("settings/inboxes/new")},emptyClassName(){return!this.inboxesList.length&&!this.uiFlags.isFetching&&!this.loadingChatList&&this.isAdmin?"h-full overflow-auto w-full":"flex-1 min-w-0 px-0 flex flex-col items-center justify-center h-full"}}},O1e={key:1,class:"clearfix mx-auto"},N1e={key:2,class:"flex flex-col items-center justify-center h-full"};function w1e(e,t,n,s,o,a){const i=M("woot-loading-state"),r=M("OnboardingView"),l=M("EmptyStateMessage");return p(),v("div",{class:se(a.emptyClassName)},[e.uiFlags.isFetching||e.loadingChatList?(p(),$(i,{key:0,message:a.loadingIndicatorMessage},null,8,["message"])):w("",!0),!e.inboxesList.length&&!e.uiFlags.isFetching&&!e.loadingChatList?(p(),v("div",O1e,[s.isAdmin?(p(),$(r,{key:0})):(p(),$(l,{key:1,message:e.$t("CONVERSATION.NO_INBOX_AGENT")},null,8,["message"]))])):!e.uiFlags.isFetching&&!e.loadingChatList?(p(),v("div",N1e,[e.allConversations.length?e.allConversations.length&&!e.currentChat.id?(p(),$(l,{key:1,message:a.conversationMissingMessage},null,8,["message"])):w("",!0):(p(),$(l,{key:0,message:e.$t("CONVERSATION.NO_MESSAGE_1")},null,8,["message"]))])):w("",!0)],2)}const R1e=Ae(C1e,[["render",w1e]]);class x1e extends Io{constructor(){super("integrations",{accountScoped:!0}),this.conversation_events=["summarize","reply_suggestion","label_suggestion"],this.message_events=["rephrase"]}processEvent({type:t="rephrase",content:n,tone:s,conversationId:o,hookId:a}){let i={tone:s,content:n};return this.conversation_events.includes(t)&&(i={conversation_display_id:o}),axios.post(`${this.url}/hooks/${a}/process_event`,{event:{name:t,data:i}})}}const oE=new x1e,$1e=e=>e.toLowerCase().split(",").filter(t=>t.trim()).map(t=>t.trim()).filter((t,n,s)=>s.indexOf(t)===n);function Gc(){const e=pt(),t=nn(),{t:n}=Me(),s=C(()=>t["integrations/getUIFlags"].value),o=Oe("integrations/getAppIntegrations"),a=Oe("getSelectedChat"),i=Oe("draftMessages/getReplyEditorMode"),r=C(()=>{var b;return(b=o.value.find(I=>I.id==="openai"&&!!I.hooks.length))==null?void 0:b.hooks[0]}),l=C(()=>!!r.value),c=C(()=>{if(r.value){const{settings:b={}}=r.value||{};return b.label_suggestion}return!1}),u=C(()=>s.value.isFetching),d=C(()=>{var b;return(b=r.value)==null?void 0:b.id}),m=C(()=>{var b;return(b=a.value)==null?void 0:b.id}),f=C(()=>`draft-${m.value}-${i.value}`),g=C(()=>t["draftMessages/get"].value(f.value)),T=async()=>{o.value.length||await e.dispatch("integrations/get")},S=async(b,I)=>{const R=Zu[b.toUpperCase()];R&&Pt(R,{type:b,...I})},_=async()=>{if(!m.value)return[];try{const b=await oE.processEvent({type:"label_suggestion",hookId:d.value,conversationId:m.value}),{data:{message:I}}=b;return $1e(I)}catch{return[]}},E=async(b="rephrase")=>{var I;try{const R=await oE.processEvent({hookId:d.value,type:b,content:g.value,conversationId:m.value}),{data:{message:O}}=R;return O}catch(R){const O=R.response.data.error,x=((I=O==null?void 0:O.error)==null?void 0:I.message)||n("INTEGRATION_SETTINGS.OPEN_AI.GENERATE_ERROR");return ce(x),""}};return dt(()=>{T()}),{draftMessage:g,uiFlags:s,appIntegrations:o,currentChat:a,replyMode:i,isAIIntegrationEnabled:l,isLabelSuggestionFeatureEnabled:c,isFetchingAppIntegrations:u,fetchIntegrationsIfRequired:T,recordAnalytics:S,fetchLabelSuggestions:_,processEvent:E}}const iE=[],M1e={mounted(){const e=this.getKeyboardEvents();if(e){const t=this.wrapEventsInKeybindingsHandler(e),n=KC(t);this.addEventHandler(n)}},unmounted(){var e;if(this.$el&&((e=this.$el.dataset)!=null&&e.keydownHandlerIndex)){const t=iE[this.$el.dataset.keydownHandlerIndex];document.removeEventListener("keydown",t)}},methods:{addEventHandler(e){const t=iE.push(e)-1,n=this.getElementToBind();n&&n.dataset&&(document.addEventListener("keydown",e),n.dataset.keydownHandlerIndex=t)},getElementToBind(){return this.$el},getKeyboardEvents(){return null},wrapEventsInKeybindingsHandler(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this.keydownWrapper(e[n])}),t},keydownWrapper(e){return t=>{const n=typeof e=="function"?e:e.action,s=typeof e=="function"?!1:e.allowOnFocusedInput;zC(t)&&(jC(t)&&t.target.blur(),!s)||n(t)}}}},L1e={class:"reply-editor bg-n-slate-9/10 rounded-md py-1 pl-2 pr-1 text-xs tracking-wide mt-2 flex items-center gap-1.5 -mx-2"},k1e={class:"flex-grow gap-1 mt-px text-xs truncate"},D1e={__name:"ReplyToMessage",props:{message:{type:Object,required:!0}},emits:["dismiss"],setup(e,{emit:t}){const n=t;return(s,o)=>{const a=M("fluent-icon"),i=qe("tooltip");return p(),v("div",L1e,[y(a,{class:"flex-shrink-0 icon",icon:"arrow-reply",size:"14"}),h("div",k1e,[Re(A(s.$t("CONVERSATION.REPLYBOX.REPLYING_TO"))+" ",1),y(a_,{message:e.message,"show-message-type":!1,"default-empty-message":s.$t("CONVERSATION.REPLY_MESSAGE_NOT_FOUND"),class:"inline"},null,8,["message","default-empty-message"])]),re(y(oe,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:o[0]||(o[0]=Fe(r=>n("dismiss"),["stop"]))},null,512),[[i,s.$t("CONVERSATION.REPLYBOX.DISMISS_REPLY")]])])}}},P1e={class:"flex overflow-auto max-h-[12.5rem]"},B1e={class:"max-w-[4rem] flex-shrink-0 w-6 flex items-center"},F1e=["src"],U1e={key:1,class:"relative w-6 h-6 text-lg text-left -top-px"},G1e={class:"max-w-3/5 min-w-[50%] overflow-hidden text-ellipsis"},V1e={class:"h-4 overflow-hidden text-sm font-medium text-ellipsis whitespace-nowrap"},H1e={class:"w-[30%] justify-center"},W1e={class:"overflow-hidden text-xs text-ellipsis whitespace-nowrap"},z1e={class:"flex items-center justify-center"},j1e={__name:"AttachmentsPreview",props:{attachments:{type:Array,default:()=>[]}},emits:["removeAttachment"],setup(e,{emit:t}){const n=e,s=t,o=C(()=>n.attachments.filter(u=>!(u!=null&&u.isRecordedAudio))),a=C(()=>n.attachments.filter(u=>u.isRecordedAudio)),i=u=>{s("removeAttachment",o.value.filter((d,m)=>m!==u).concat(a.value))},r=u=>{const d=u.byte_size||u.size;return PC(d,0)},l=u=>(u.content_type||u.type).includes("image"),c=u=>u.filename||u.name;return(u,d)=>(p(),v("div",P1e,[(p(!0),v(pe,null,Ne(o.value,(m,f)=>(p(),v("div",{key:m.id,class:"preview-item flex items-center p-1 bg-slate-50 dark:bg-slate-800 gap-1 rounded-md w-[15rem] mb-1"},[h("div",B1e,[l(m.resource)?(p(),v("img",{key:0,class:"object-cover w-6 h-6 rounded-sm",src:m.thumb},null,8,F1e)):(p(),v("span",U1e," 📄 "))]),h("div",G1e,[h("span",V1e,A(c(m.resource)),1)]),h("div",H1e,[h("span",W1e,A(r(m.resource)),1)]),h("div",z1e,[y(oe,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:g=>i(f)},null,8,["onClick"])])]))),128))]))}},K1e={__name:"EditorModeToggle",props:{mode:{type:String,default:Ts.REPLY}},emits:["toggleMode"],setup(e){const t=e,n=Is("wootEditorReplyMode"),s=Is("wootEditorPrivateMode"),o=uc(n),a=uc(s),i=C(()=>t.mode===Ts.NOTE),r=C(()=>`${(i.value?a.width.value:o.width.value)+16}px`),l=C(()=>`${i.value?o.width.value+16:0}px`);return(c,u)=>(p(),v("button",{class:"flex items-center w-auto h-8 p-1 transition-all border rounded-full bg-n-alpha-2 group relative duration-300 ease-in-out z-0",onClick:u[0]||(u[0]=d=>c.$emit("toggleMode"))},[h("div",{ref_key:"wootEditorReplyMode",ref:n,class:"flex items-center gap-1 px-2 z-20"},A(c.$t("CONVERSATION.REPLYBOX.REPLY")),513),h("div",{ref_key:"wootEditorPrivateMode",ref:s,class:"flex items-center gap-1 px-2 z-20"},A(c.$t("CONVERSATION.REPLYBOX.PRIVATE_NOTE")),513),h("div",{class:"absolute shadow-sm rounded-full h-6 w-[var(--chip-width)] transition-all duration-300 ease-in-out translate-x-[var(--translate-x)] rtl:translate-x-[var(--rtl-translate-x)] bg-n-solid-1",style:Ht({"--chip-width":r.value,"--translate-x":l.value,"--rtl-translate-x":"calc(-1 * var(--translate-x))"})},null,4)]))}},Y1e={name:"ReplyTopPanel",components:{NextButton:oe,EditorModeToggle:K1e},props:{mode:{type:String,default:Ts.REPLY},isMessageLengthReachingThreshold:{type:Boolean,default:()=>!1},charactersRemaining:{type:Number,default:()=>0}},emits:["setReplyMode","togglePopout"],setup(e,{emit:t}){const n=r=>{t("setReplyMode",r)},s=()=>{n(Ts.REPLY)},o=()=>{n(Ts.NOTE)},a=()=>{const r=e.mode===Ts.REPLY?Ts.NOTE:Ts.REPLY;n(r)};return $s({"Alt+KeyP":{action:()=>o(),allowOnFocusedInput:!0},"Alt+KeyL":{action:()=>s(),allowOnFocusedInput:!0}}),{handleModeToggle:a,handleReplyClick:s,handleNoteClick:o,REPLY_EDITOR_MODES:Ts}},computed:{replyButtonClass(){return{"is-active":this.mode===Ts.REPLY}},noteButtonClass(){return{"is-active":this.mode===Ts.NOTE}},charLengthClass(){return this.charactersRemaining<0?"text-red-600":"text-slate-600"},characterLengthWarning(){return this.charactersRemaining<0?`${-this.charactersRemaining} ${G_.NEGATIVE}`:`${this.charactersRemaining} ${G_.UNDER_50}`}}},X1e={class:"flex justify-between h-[3.25rem] gap-2 ltr:pl-3 rtl:pr-3"},q1e={class:"flex items-center mx-4 my-0"},Z1e={key:0,class:"text-xs"};function Q1e(e,t,n,s,o,a){const i=M("EditorModeToggle"),r=M("NextButton");return p(),v("div",X1e,[y(i,{mode:n.mode,class:"mt-3",onToggleMode:s.handleModeToggle},null,8,["mode","onToggleMode"]),h("div",q1e,[n.isMessageLengthReachingThreshold?(p(),v("div",Z1e,[h("span",{class:se(a.charLengthClass)},A(a.characterLengthWarning),3)])):w("",!0)]),y(r,{ghost:"",class:"ltr:rounded-bl-md rtl:rounded-br-md ltr:rounded-br-none rtl:rounded-bl-none ltr:rounded-tl-none rtl:rounded-tr-none text-n-slate-11 ltr:rounded-tr-[11px] rtl:rounded-tl-[11px]",icon:"i-lucide-maximize-2",onClick:t[0]||(t[0]=l=>e.$emit("togglePopout"))})])}const J1e=Ae(Y1e,[["render",Q1e]]),pm=e=>e.length?e.replace(/\s+/g,"").split(",").every(n=>Ii.$validator(n)):!0,eEe={components:{ButtonV4:oe},props:{ccEmails:{type:String,default:""},bccEmails:{type:String,default:""},toEmails:{type:String,default:""}},emits:["update:bccEmails","update:ccEmails","update:toEmails"],setup(){return{v$:bt()}},data(){return{showBcc:!1,ccEmailsVal:"",bccEmailsVal:"",toEmailsVal:""}},watch:{bccEmails(e){e!==this.bccEmailsVal&&(this.bccEmailsVal=e)},ccEmails(e){e!==this.ccEmailsVal&&(this.ccEmailsVal=e)},toEmails(e){e!==this.toEmailsVal&&(this.toEmailsVal=e)}},mounted(){this.ccEmailsVal=this.ccEmails,this.bccEmailsVal=this.bccEmails,this.toEmailsVal=this.toEmails},validations:{ccEmailsVal:{hasValidEmails(e){return pm(e)}},bccEmailsVal:{hasValidEmails(e){return pm(e)}},toEmailsVal:{hasValidEmails(e){return pm(e)}}},methods:{handleAddBcc(){this.showBcc=!0},onBlur(){this.v$.$touch(),this.$emit("update:bccEmails",this.bccEmailsVal),this.$emit("update:ccEmails",this.ccEmailsVal),this.$emit("update:toEmails",this.toEmailsVal)}}},tEe={key:0},nEe={class:"input-group-label"},sEe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},aEe={class:"input-group-wrap"},oEe={class:"input-group-label"},iEe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},rEe={key:0,class:"message"},lEe={key:1,class:"input-group-wrap"},cEe={class:"input-group-label"},uEe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},dEe={key:0,class:"message"};function pEe(e,t,n,s,o,a){const i=M("woot-input"),r=M("ButtonV4");return p(),v("div",null,[n.toEmails?(p(),v("div",tEe,[h("div",{class:se(["input-group small",{error:s.v$.toEmailsVal.$error}])},[h("label",nEe,A(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.TO")),1),h("div",sEe,[y(i,{modelValue:s.v$.toEmailsVal.$model,"onUpdate:modelValue":t[0]||(t[0]=l=>s.v$.toEmailsVal.$model=l),type:"text",class:se(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.toEmailsVal.$error}]),placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER"),onBlur:a.onBlur},null,8,["modelValue","class","placeholder","onBlur"])])],2)])):w("",!0),h("div",aEe,[h("div",{class:se(["input-group small",{error:s.v$.ccEmailsVal.$error}])},[h("label",oEe,A(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.LABEL")),1),h("div",iEe,[y(i,{modelValue:s.v$.ccEmailsVal.$model,"onUpdate:modelValue":t[1]||(t[1]=l=>s.v$.ccEmailsVal.$model=l),class:se(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.ccEmailsVal.$error}]),type:"text",placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER"),onBlur:a.onBlur},null,8,["modelValue","class","placeholder","onBlur"])]),o.showBcc?w("",!0):(p(),$(r,{key:0,label:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.ADD_BCC"),ghost:"",xs:"",primary:"",onClick:a.handleAddBcc},null,8,["label","onClick"]))],2),s.v$.ccEmailsVal.$error?(p(),v("span",rEe,A(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.ERROR")),1)):w("",!0)]),o.showBcc?(p(),v("div",lEe,[h("div",{class:se(["input-group small",{error:s.v$.bccEmailsVal.$error}])},[h("label",cEe,A(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.LABEL")),1),h("div",uEe,[y(i,{modelValue:s.v$.bccEmailsVal.$model,"onUpdate:modelValue":t[2]||(t[2]=l=>s.v$.bccEmailsVal.$model=l),type:"text",class:se(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.bccEmailsVal.$error}]),placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.PLACEHOLDER"),onBlur:a.onBlur},null,8,["modelValue","class","placeholder","onBlur"])])],2),s.v$.bccEmailsVal.$error?(p(),v("span",dEe,A(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.ERROR")),1)):w("",!0)])):w("",!0)])}const hEe=Ae(eEe,[["render",pEe],["__scopeId","data-v-ac39d4f8"]]);class mEe extends Io{constructor(){super("integrations/dyte",{accountScoped:!0})}createAMeeting(t){return axios.post(`${this.url}/create_a_meeting`,{conversation_id:t})}addParticipantToMeeting(t){return axios.post(`${this.url}/add_participant_to_meeting`,{message_id:t})}}const u_=new mEe,fEe={components:{NextButton:oe},props:{conversationId:{type:Number,default:0}},data(){return{isLoading:!1}},computed:{...lt({appIntegrations:"integrations/getAppIntegrations"}),isVideoIntegrationEnabled(){return this.appIntegrations.find(e=>e.id==="dyte"&&!!e.hooks.length)}},mounted(){this.appIntegrations.length||this.$store.dispatch("integrations/get")},methods:{async onClick(){this.isLoading=!0;try{await u_.createAMeeting(this.conversationId)}catch{ce(this.$t("INTEGRATION_SETTINGS.DYTE.CREATE_ERROR"))}finally{this.isLoading=!1}}}};function gEe(e,t,n,s,o,a){const i=M("NextButton"),r=qe("tooltip");return a.isVideoIntegrationEnabled?re((p(),$(i,{key:0,icon:"i-ph-video-camera",slate:"",faded:"",sm:"",onClick:a.onClick},null,8,["onClick"])),[[r,e.$t("INTEGRATION_SETTINGS.DYTE.START_VIDEO_CALL_HELP_TEXT"),void 0,{"top-end":!0}]]):w("",!0)}const _Ee=Ae(fEe,[["render",gEe]]),vEe={components:{NextButton:oe},emits:["close"],setup(){const{updateUISettings:e}=ln(),{recordAnalytics:t}=Gc(),n=bt();return{updateUISettings:e,v$:n,recordAnalytics:t}},data(){return{value:""}},validations:{value:{required:Ye}},methods:{onClose(){this.$emit("close")},onDismiss(){ce(this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DISMISS_MESSAGE")),this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.onClose()},async finishOpenAI(){var t,n;const e={app_id:"openai",settings:{api_key:this.value}};try{await this.$store.dispatch("integrations/createHook",e),this.alertMessage=this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.SUCCESS_MESSAGE"),this.recordAnalytics(Zu.ADDED_AI_INTEGRATION_VIA_CTA_BUTTON),this.onClose()}catch(s){const o=(n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.message;this.alertMessage=o||this.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE")}finally{ce(this.alertMessage)}},openOpenAIDoc(){window.open("https://www.chatwoot.com/blog/v2-17","_blank")}}},bEe={class:"flex-1 min-w-0 px-0"},EEe={class:"w-full mt-2"},TEe={class:"flex flex-row justify-between w-full gap-2 px-0 py-2"},yEe={class:"flex items-center gap-1"};function SEe(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("woot-input"),l=M("NextButton");return p(),v("div",bEe,[y(i,{"header-title":e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.TITLE"),"header-content":e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DESC")},null,8,["header-title","header-content"]),h("form",{class:"flex flex-col flex-wrap modal-content",onSubmit:t[1]||(t[1]=Fe((...c)=>a.finishOpenAI&&a.finishOpenAI(...c),["prevent"]))},[h("div",EEe,[y(r,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=c=>o.value=c),type:"text",class:se({error:s.v$.value.$error}),placeholder:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.KEY_PLACEHOLDER"),onBlur:s.v$.value.$touch},null,8,["modelValue","class","placeholder","onBlur"])]),h("div",TEe,[y(l,{ghost:"",type:"button",class:"!px-3",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.NEED_HELP"),onClick:Fe(a.openOpenAIDoc,["prevent"])},null,8,["label","onClick"]),h("div",yEe,[y(l,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.DISMISS"),onClick:Fe(a.onDismiss,["prevent"])},null,8,["label","onClick"]),y(l,{type:"submit",disabled:s.v$.value.$invalid,label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.FINISH")},null,8,["disabled","label"])])])],32)])}const AEe=Ae(vEe,[["render",SEe]]),IEe={},CEe={class:"animation-container margin-top-1"},OEe={class:"ai-typing--wrap"};function NEe(e,t){const n=M("fluent-icon");return p(),v("div",CEe,[h("div",OEe,[y(n,{icon:"wand",size:"14",class:"ai-typing--icon"}),h("label",null,A(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.AI_WRITING")),1)]),t[0]||(t[0]=h("span",{class:"loader"},null,-1)),t[1]||(t[1]=h("span",{class:"loader"},null,-1)),t[2]||(t[2]=h("span",{class:"loader"},null,-1))])}const wEe=Ae(IEe,[["render",NEe],["__scopeId","data-v-d85990a2"]]),REe={components:{AILoader:wEe,NextButton:oe},props:{aiOption:{type:String,required:!0}},emits:["close","applyText"],setup(){const{formatMessage:e}=ya(),{draftMessage:t,processEvent:n,recordAnalytics:s}=Gc();return{draftMessage:t,processEvent:n,recordAnalytics:s,formatMessage:e}},data(){return{generatedContent:"",isGenerating:!0}},computed:{headerTitle(){var t;const e=(t=this.aiOption)==null?void 0:t.toUpperCase();return e?this.$t("INTEGRATION_SETTINGS.OPEN_AI.WITH_AI",{option:this.$t(`INTEGRATION_SETTINGS.OPEN_AI.OPTIONS.${e}`)}):""}},mounted(){this.generateAIContent(this.aiOption)},methods:{onClose(){this.$emit("close")},async generateAIContent(e="rephrase"){this.isGenerating=!0,this.generatedContent=await this.processEvent(e),this.isGenerating=!1},applyText(){this.recordAnalytics(this.aiOption),this.$emit("applyText",this.generatedContent),this.onClose()}}},xEe={class:"flex flex-col"},$Ee={key:0,class:"w-full"},MEe={class:"mt-1 text-base text-slate-700 dark:text-slate-100"},LEe={class:"mt-1 text-base text-slate-700 dark:text-slate-100"},kEe={key:1},DEe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function PEe(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("AILoader"),l=M("NextButton"),c=qe("dompurify-html");return p(),v("div",xEe,[y(i,{"header-title":a.headerTitle},null,8,["header-title"]),h("form",{class:"flex flex-col w-full modal-content",onSubmit:t[0]||(t[0]=Fe((...u)=>a.applyText&&a.applyText(...u),["prevent"]))},[s.draftMessage?(p(),v("div",$Ee,[h("h4",MEe,A(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.DRAFT_TITLE")),1),re(h("p",null,null,512),[[c,s.formatMessage(s.draftMessage,!1)]]),h("h4",LEe,A(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.GENERATED_TITLE")),1)])):w("",!0),h("div",null,[o.isGenerating?(p(),$(r,{key:0})):re((p(),v("p",kEe,null,512)),[[c,s.formatMessage(o.generatedContent,!1)]])]),h("div",DEe,[y(l,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.CANCEL"),onClick:Fe(a.onClose,["prevent"])},null,8,["label","onClick"]),y(l,{type:"submit",disabled:!o.generatedContent,label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.APPLY")},null,8,["disabled","label"])])],32)])}const BEe=Ae(REe,[["render",PEe],["__scopeId","data-v-c445b386"]]),FEe={class:"relative"},UEe={__name:"AIAssistanceCTAButton",emits:["open"],setup(e,{emit:t}){const n=t,s=()=>{n("open")};return(o,a)=>(p(),v("div",FEe,[y(oe,{class:"cta-btn cta-btn-light dark:cta-btn-dark hover:cta-btn-light-hover dark:hover:cta-btn-dark-hover",label:o.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),icon:"i-ph-magic-wand",sm:"",onClick:s},null,8,["label"]),a[0]||(a[0]=h("div",{class:"radar-ping-animation absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-woot-500 dark:bg-woot-500"},null,-1)),a[1]||(a[1]=h("div",{class:"absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-woot-500 dark:bg-woot-500 opacity-50"},null,-1))]))}},GEe=Ae(UEe,[["__scopeId","data-v-df78d33f"]]),VEe={components:{NextButton:oe,AIAssistanceModal:BEe,AICTAModal:AEe,AIAssistanceCTAButton:GEe},emits:["replaceText"],setup(e,{emit:t}){const{uiSettings:n,updateUISettings:s}=ln(),{isAIIntegrationEnabled:o,draftMessage:a,recordAnalytics:i}=Gc(),{isAdmin:r}=ka(),l=X(""),c=d=>{l.value=d};return $s({"$mod+KeyZ":{action:()=>{l.value&&(t("replaceText",l.value),l.value="")},allowOnFocusedInput:!0}}),{uiSettings:n,updateUISettings:s,isAdmin:r,initialMessage:l,initializeMessage:c,recordAnalytics:i,isAIIntegrationEnabled:o,draftMessage:a}},data:()=>({showAIAssistanceModal:!1,showAICtaModal:!1,aiOption:""}),computed:{...lt({isAChatwootInstance:"globalConfig/isAChatwootInstance"}),isAICTAModalDismissed(){return this.uiSettings.is_open_ai_cta_modal_dismissed},shouldShowAIAssistCTAButtonForAdmin(){return this.isAdmin&&!this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed&&this.isAChatwootInstance},shouldShowAIAssistCTAButton(){return this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed}},mounted(){wt.on(U_e,this.onAIAssist),this.initializeMessage(this.draftMessage)},methods:{hideAIAssistanceModal(){this.recordAnalytics("DISMISS_AI_SUGGESTION",{aiOption:this.aiOption}),this.showAIAssistanceModal=!1},openAIAssist(){this.isAICTAModalDismissed||this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.initializeMessage(this.draftMessage),document.querySelector("ninja-keys").open({parent:"ai_assist"})},hideAICtaModal(){this.showAICtaModal=!1},openAICta(){this.showAICtaModal=!0},onAIAssist(e){this.aiOption=e,this.showAIAssistanceModal=!0},insertText(e){this.$emit("replaceText",e)}}},HEe={key:0,class:"relative"},WEe={key:1,class:"relative"};function zEe(e,t,n,s,o,a){const i=M("AIAssistanceCTAButton"),r=M("NextButton"),l=M("AIAssistanceModal"),c=M("woot-modal"),u=M("AICTAModal"),d=qe("tooltip");return p(),v("div",null,[s.isAIIntegrationEnabled?(p(),v("div",HEe,[a.shouldShowAIAssistCTAButton?(p(),$(i,{key:0,onOpen:a.openAIAssist},null,8,["onOpen"])):re((p(),$(r,{key:1,icon:"i-ph-magic-wand",slate:"",faded:"",sm:"",onClick:a.openAIAssist},null,8,["onClick"])),[[d,e.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),void 0,{"top-end":!0}]]),y(c,{show:e.showAIAssistanceModal,"onUpdate:show":t[0]||(t[0]=m=>e.showAIAssistanceModal=m),"on-close":a.hideAIAssistanceModal},{default:K(()=>[y(l,{"ai-option":e.aiOption,onApplyText:a.insertText,onClose:a.hideAIAssistanceModal},null,8,["ai-option","onApplyText","onClose"])]),_:1},8,["show","on-close"])])):a.shouldShowAIAssistCTAButtonForAdmin?(p(),v("div",WEe,[y(i,{onClick:a.openAICta},null,8,["onClick"]),y(c,{show:e.showAICtaModal,"onUpdate:show":t[1]||(t[1]=m=>e.showAICtaModal=m),"on-close":a.hideAICtaModal},{default:K(()=>[y(u,{onClose:a.hideAICtaModal},null,8,["onClose"])]),_:1},8,["show","on-close"])])):w("",!0)])}const jEe=Ae(VEe,[["render",zEe]]),KEe={name:"ReplyBottomPanel",components:{NextButton:oe,FileUpload:m0,VideoCallButton:_Ee,AIAssistanceButton:jEe},mixins:[Yo],props:{mode:{type:String,default:Ts.REPLY},onSend:{type:Function,default:()=>{}},sendButtonText:{type:String,default:""},recordingAudioDurationText:{type:String,default:"00:00"},inbox:{type:Object,default:()=>({})},showFileUpload:{type:Boolean,default:!1},showAudioRecorder:{type:Boolean,default:!1},onFileUpload:{type:Function,default:()=>{}},toggleEmojiPicker:{type:Function,default:()=>{}},toggleAudioRecorder:{type:Function,default:()=>{}},toggleAudioRecorderPlayPause:{type:Function,default:()=>{}},isRecordingAudio:{type:Boolean,default:!1},recordingAudioState:{type:String,default:""},isSendDisabled:{type:Boolean,default:!1},showEditorToggle:{type:Boolean,default:!1},isOnPrivateNote:{type:Boolean,default:!1},enableMultipleFileUpload:{type:Boolean,default:!0},hasWhatsappTemplates:{type:Boolean,default:!1},conversationId:{type:Number,required:!0},message:{type:String,default:""},newConversationModalActive:{type:Boolean,default:!1},portalSlug:{type:String,required:!0},conversationType:{type:String,default:""}},emits:["replaceText","toggleInsertArticle","toggleEditor","selectWhatsappTemplate"],setup(){const{setSignatureFlagForInbox:e,fetchSignatureFlagFromUISettings:t}=ln(),n=X(!1);return $s({"$mod+Alt+KeyA":{action:()=>{document.querySelector("#conversationAttachment").click()},allowOnFocusedInput:!0}}),{setSignatureFlagForInbox:e,fetchSignatureFlagFromUISettings:t,uploadRef:n}},computed:{...lt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"integrations/getUIFlags"}),isNote(){return this.mode===Ts.NOTE},wrapClass(){return{"is-note-mode":this.isNote}},showAttachButton(){return this.showFileUpload||this.isNote},showAudioRecorderButton(){return this.isALineChannel?!1:this.isFeatureEnabledonAccount(this.accountId,_t.VOICE_RECORDER)&&this.showAudioRecorder},showAudioPlayStopButton(){return this.showAudioRecorder&&this.isRecordingAudio},isInstagramDM(){return this.conversationType==="instagram_direct_message"},allowedFileTypes(){return this.isATwilioWhatsAppChannel?tC:this.isALineChannel?nC:this.isAnInstagramChannel||this.isInstagramDM?sC:u0},enableDragAndDrop(){return!this.newConversationModalActive},audioRecorderPlayStopIcon(){switch(this.recordingAudioState){case"playing":return"i-ph-pause";case"paused":return"i-ph-play";case"stopped":return"i-ph-play";default:return"i-ph-stop"}},showMessageSignatureButton(){return!this.isOnPrivateNote},sendWithSignature(){return this.fetchSignatureFlagFromUISettings(this.channelType)},signatureToggleTooltip(){return this.sendWithSignature?this.$t("CONVERSATION.FOOTER.DISABLE_SIGN_TOOLTIP"):this.$t("CONVERSATION.FOOTER.ENABLE_SIGN_TOOLTIP")},enableInsertArticleInReply(){return this.portalSlug},isFetchingAppIntegrations(){return this.uiFlags.isFetching}},mounted(){Rf.start()},methods:{toggleMessageSignature(){this.setSignatureFlagForInbox(this.channelType,!this.sendWithSignature)},replaceText(e){this.$emit("replaceText",e)},toggleInsertArticle(){this.$emit("toggleInsertArticle")}}},YEe={class:"left-wrap"},XEe={class:"fixed top-0 bottom-0 left-0 right-0 z-20 flex flex-col items-center justify-center w-full h-full gap-2 text-slate-900 dark:text-slate-50 bg-modal-backdrop-light dark:bg-modal-backdrop-dark"},qEe={class:"text-2xl break-words text-slate-900 dark:text-slate-50"},ZEe={class:"right-wrap"};function QEe(e,t,n,s,o,a){const i=M("NextButton"),r=M("FileUpload"),l=M("VideoCallButton"),c=M("AIAssistanceButton"),u=M("fluent-icon"),d=qe("tooltip");return p(),v("div",{class:se(["flex justify-between p-3",a.wrapClass])},[h("div",YEe,[re(y(i,{icon:"i-ph-smiley-sticker",slate:"",faded:"",sm:"",onClick:n.toggleEmojiPicker},null,8,["onClick"]),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_EMOJI_ICON"),void 0,{"top-end":!0}]]),re((p(),$(r,{ref:"uploadRef","input-id":"conversationAttachment",size:4096*4096,accept:a.allowedFileTypes,multiple:n.enableMultipleFileUpload,drop:a.enableDragAndDrop,"drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0},onInputFile:n.onFileUpload},{default:K(()=>[a.showAttachButton?re((p(),$(i,{key:0,icon:"i-ph-paperclip",slate:"",faded:"",sm:""},null,512)),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),void 0,{"top-end":!0}]]):w("",!0)]),_:1},8,["accept","multiple","drop","onInputFile"])),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),void 0,{"top-end":!0}]]),a.showAudioRecorderButton?re((p(),$(i,{key:0,icon:n.isRecordingAudio?"i-ph-microphone-slash":"i-ph-microphone",slate:"",faded:"",sm:"",onClick:n.toggleAudioRecorder},null,8,["icon","onClick"])),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_AUDIORECORDER_ICON"),void 0,{"top-end":!0}]]):w("",!0),n.showEditorToggle?re((p(),$(i,{key:1,icon:"i-ph-quotes",slate:"",faded:"",sm:"",onClick:t[0]||(t[0]=m=>e.$emit("toggleEditor"))},null,512)),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),void 0,{"top-end":!0}]]):w("",!0),a.showAudioPlayStopButton?re((p(),$(i,{key:2,icon:a.audioRecorderPlayStopIcon,slate:"",faded:"",sm:"",label:n.recordingAudioDurationText,onClick:n.toggleAudioRecorderPlayPause},null,8,["icon","label","onClick"])),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),void 0,{"top-end":!0}]]):w("",!0),a.showMessageSignatureButton?re((p(),$(i,{key:3,icon:"i-ph-signature",slate:"",faded:"",sm:"",onClick:a.toggleMessageSignature},null,8,["onClick"])),[[d,a.signatureToggleTooltip,void 0,{"top-end":!0}]]):w("",!0),n.hasWhatsappTemplates?re((p(),$(i,{key:4,icon:"i-ph-whatsapp-logo",slate:"",faded:"",sm:"",onClick:t[1]||(t[1]=m=>e.$emit("selectWhatsappTemplate"))},null,512)),[[d,e.$t("CONVERSATION.FOOTER.WHATSAPP_TEMPLATES"),void 0,{"top-end":!0}]]):w("",!0),(e.isAWebWidgetInbox||e.isAPIInbox)&&!n.isOnPrivateNote?(p(),$(l,{key:5,"conversation-id":n.conversationId},null,8,["conversation-id"])):w("",!0),a.isFetchingAppIntegrations?w("",!0):(p(),$(c,{key:6,"conversation-id":n.conversationId,"is-private-note":n.isOnPrivateNote,message:n.message,onReplaceText:a.replaceText},null,8,["conversation-id","is-private-note","message","onReplaceText"])),y(qs,{name:"modal-fade"},{default:K(()=>[re(h("div",XEe,[y(u,{icon:"cloud-backup",size:"40"}),h("h4",qEe,A(e.$t("CONVERSATION.REPLYBOX.DRAG_DROP")),1)],512),[[Jt,s.uploadRef&&s.uploadRef.dropActive]])]),_:1}),a.enableInsertArticleInReply?re((p(),$(i,{key:7,icon:"i-ph-article-ny-times",slate:"",faded:"",sm:"",onClick:a.toggleInsertArticle},null,8,["onClick"])),[[d,e.$t("HELP_CENTER.ARTICLE_SEARCH.OPEN_ARTICLE_SEARCH"),void 0,{"top-end":!0}]]):w("",!0)]),h("div",ZEe,[y(i,{label:n.sendButtonText,type:"submit",sm:"",color:a.isNote?"amber":"blue",disabled:n.isSendDisabled,class:"flex-shrink-0",onClick:n.onSend},null,8,["label","color","disabled","onClick"])])],2)}const JEe=Ae(KEe,[["render",QEe],["__scopeId","data-v-c025a121"]]),e0e={af:"Afrikaans",af_NA:"Afrikaans (Namibia)",af_ZA:"Afrikaans (South Africa)",ak:"Akan",ak_GH:"Akan (Ghana)",sq:"Albanian",sq_AL:"Albanian (Albania)",sq_XK:"Albanian (Kosovo)",sq_MK:"Albanian (Macedonia)",am:"Amharic",am_ET:"Amharic (Ethiopia)",ar:"Arabic",ar_DZ:"Arabic (Algeria)",ar_BH:"Arabic (Bahrain)",ar_TD:"Arabic (Chad)",ar_KM:"Arabic (Comoros)",ar_DJ:"Arabic (Djibouti)",ar_EG:"Arabic (Egypt)",ar_ER:"Arabic (Eritrea)",ar_IQ:"Arabic (Iraq)",ar_IL:"Arabic (Israel)",ar_JO:"Arabic (Jordan)",ar_KW:"Arabic (Kuwait)",ar_LB:"Arabic (Lebanon)",ar_LY:"Arabic (Libya)",ar_MR:"Arabic (Mauritania)",ar_MA:"Arabic (Morocco)",ar_OM:"Arabic (Oman)",ar_PS:"Arabic (Palestinian Territories)",ar_QA:"Arabic (Qatar)",ar_SA:"Arabic (Saudi Arabia)",ar_SO:"Arabic (Somalia)",ar_SS:"Arabic (South Sudan)",ar_SD:"Arabic (Sudan)",ar_SY:"Arabic (Syria)",ar_TN:"Arabic (Tunisia)",ar_AE:"Arabic (United Arab Emirates)",ar_EH:"Arabic (Western Sahara)",ar_YE:"Arabic (Yemen)",hy:"Armenian",hy_AM:"Armenian (Armenia)",as:"Assamese",as_IN:"Assamese (India)",az:"Azerbaijani",az_AZ:"Azerbaijani (Azerbaijan)",az_Cyrl_AZ:"Azerbaijani (Cyrillic, Azerbaijan)",az_Cyrl:"Azerbaijani (Cyrillic)",az_Latn_AZ:"Azerbaijani (Latin, Azerbaijan)",az_Latn:"Azerbaijani (Latin)",bm:"Bambara",bm_Latn_ML:"Bambara (Latin, Mali)",bm_Latn:"Bambara (Latin)",eu:"Basque",eu_ES:"Basque (Spain)",be:"Belarusian",be_BY:"Belarusian (Belarus)",bn:"Bengali",bn_BD:"Bengali (Bangladesh)",bn_IN:"Bengali (India)",bs:"Bosnian",bs_BA:"Bosnian (Bosnia & Herzegovina)",bs_Cyrl_BA:"Bosnian (Cyrillic, Bosnia & Herzegovina)",bs_Cyrl:"Bosnian (Cyrillic)",bs_Latn_BA:"Bosnian (Latin, Bosnia & Herzegovina)",bs_Latn:"Bosnian (Latin)",br:"Breton",br_FR:"Breton (France)",bg:"Bulgarian",bg_BG:"Bulgarian (Bulgaria)",my:"Burmese",my_MM:"Burmese (Myanmar (Burma))",ca:"Catalan",ca_AD:"Catalan (Andorra)",ca_FR:"Catalan (France)",ca_IT:"Catalan (Italy)",ca_ES:"Catalan (Spain)",zh:"Chinese",zh_CN:"Chinese (China)",zh_HK:"Chinese (Hong Kong SAR China)",zh_MO:"Chinese (Macau SAR China)",zh_Hans_CN:"Chinese (Simplified, China)",zh_Hans_HK:"Chinese (Simplified, Hong Kong SAR China)",zh_Hans_MO:"Chinese (Simplified, Macau SAR China)",zh_Hans_SG:"Chinese (Simplified, Singapore)",zh_Hans:"Chinese (Simplified)",zh_SG:"Chinese (Singapore)",zh_TW:"Chinese (Taiwan)",zh_Hant_HK:"Chinese (Traditional, Hong Kong SAR China)",zh_Hant_MO:"Chinese (Traditional, Macau SAR China)",zh_Hant_TW:"Chinese (Traditional, Taiwan)",zh_Hant:"Chinese (Traditional)",kw:"Cornish",kw_GB:"Cornish (United Kingdom)",hr:"Croatian",hr_BA:"Croatian (Bosnia & Herzegovina)",hr_HR:"Croatian (Croatia)",cs:"Czech",cs_CZ:"Czech (Czech Republic)",da:"Danish",da_DK:"Danish (Denmark)",da_GL:"Danish (Greenland)",nl:"Dutch",nl_AW:"Dutch (Aruba)",nl_BE:"Dutch (Belgium)",nl_BQ:"Dutch (Caribbean Netherlands)",nl_CW:"Dutch (Curaçao)",nl_NL:"Dutch (Netherlands)",nl_SX:"Dutch (Sint Maarten)",nl_SR:"Dutch (Suriname)",dz:"Dzongkha",dz_BT:"Dzongkha (Bhutan)",en:"English",en_AS:"English (American Samoa)",en_AI:"English (Anguilla)",en_AG:"English (Antigua & Barbuda)",en_AU:"English (Australia)",en_BS:"English (Bahamas)",en_BB:"English (Barbados)",en_BE:"English (Belgium)",en_BZ:"English (Belize)",en_BM:"English (Bermuda)",en_BW:"English (Botswana)",en_IO:"English (British Indian Ocean Territory)",en_VG:"English (British Virgin Islands)",en_CM:"English (Cameroon)",en_CA:"English (Canada)",en_KY:"English (Cayman Islands)",en_CX:"English (Christmas Island)",en_CC:"English (Cocos (Keeling) Islands)",en_CK:"English (Cook Islands)",en_DG:"English (Diego Garcia)",en_DM:"English (Dominica)",en_ER:"English (Eritrea)",en_FK:"English (Falkland Islands)",en_FJ:"English (Fiji)",en_GM:"English (Gambia)",en_GH:"English (Ghana)",en_GI:"English (Gibraltar)",en_GD:"English (Grenada)",en_GU:"English (Guam)",en_GG:"English (Guernsey)",en_GY:"English (Guyana)",en_HK:"English (Hong Kong SAR China)",en_IN:"English (India)",en_IE:"English (Ireland)",en_IM:"English (Isle of Man)",en_JM:"English (Jamaica)",en_JE:"English (Jersey)",en_KE:"English (Kenya)",en_KI:"English (Kiribati)",en_LS:"English (Lesotho)",en_LR:"English (Liberia)",en_MO:"English (Macau SAR China)",en_MG:"English (Madagascar)",en_MW:"English (Malawi)",en_MY:"English (Malaysia)",en_MT:"English (Malta)",en_MH:"English (Marshall Islands)",en_MU:"English (Mauritius)",en_FM:"English (Micronesia)",en_MS:"English (Montserrat)",en_NA:"English (Namibia)",en_NR:"English (Nauru)",en_NZ:"English (New Zealand)",en_NG:"English (Nigeria)",en_NU:"English (Niue)",en_NF:"English (Norfolk Island)",en_MP:"English (Northern Mariana Islands)",en_PK:"English (Pakistan)",en_PW:"English (Palau)",en_PG:"English (Papua New Guinea)",en_PH:"English (Philippines)",en_PN:"English (Pitcairn Islands)",en_PR:"English (Puerto Rico)",en_RW:"English (Rwanda)",en_WS:"English (Samoa)",en_SC:"English (Seychelles)",en_SL:"English (Sierra Leone)",en_SG:"English (Singapore)",en_SX:"English (Sint Maarten)",en_SB:"English (Solomon Islands)",en_ZA:"English (South Africa)",en_SS:"English (South Sudan)",en_SH:"English (St. Helena)",en_KN:"English (St. Kitts & Nevis)",en_LC:"English (St. Lucia)",en_VC:"English (St. Vincent & Grenadines)",en_SD:"English (Sudan)",en_SZ:"English (Swaziland)",en_TZ:"English (Tanzania)",en_TK:"English (Tokelau)",en_TO:"English (Tonga)",en_TT:"English (Trinidad & Tobago)",en_TC:"English (Turks & Caicos Islands)",en_TV:"English (Tuvalu)",en_UM:"English (U.S. Outlying Islands)",en_VI:"English (U.S. Virgin Islands)",en_UG:"English (Uganda)",en_GB:"English (United Kingdom)",en_US:"English (United States)",en_VU:"English (Vanuatu)",en_ZM:"English (Zambia)",en_ZW:"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",et_EE:"Estonian (Estonia)",ee:"Ewe",ee_GH:"Ewe (Ghana)",ee_TG:"Ewe (Togo)",fo:"Faroese",fo_FO:"Faroese (Faroe Islands)",fi:"Finnish",fi_FI:"Finnish (Finland)",fr:"French",fr_DZ:"French (Algeria)",fr_BE:"French (Belgium)",fr_BJ:"French (Benin)",fr_BF:"French (Burkina Faso)",fr_BI:"French (Burundi)",fr_CM:"French (Cameroon)",fr_CA:"French (Canada)",fr_CF:"French (Central African Republic)",fr_TD:"French (Chad)",fr_KM:"French (Comoros)",fr_CG:"French (Congo - Brazzaville)",fr_CD:"French (Congo - Kinshasa)",fr_CI:"French (Côte d’Ivoire)",fr_DJ:"French (Djibouti)",fr_GQ:"French (Equatorial Guinea)",fr_FR:"French (France)",fr_GF:"French (French Guiana)",fr_PF:"French (French Polynesia)",fr_GA:"French (Gabon)",fr_GP:"French (Guadeloupe)",fr_GN:"French (Guinea)",fr_HT:"French (Haiti)",fr_LU:"French (Luxembourg)",fr_MG:"French (Madagascar)",fr_ML:"French (Mali)",fr_MQ:"French (Martinique)",fr_MR:"French (Mauritania)",fr_MU:"French (Mauritius)",fr_YT:"French (Mayotte)",fr_MC:"French (Monaco)",fr_MA:"French (Morocco)",fr_NC:"French (New Caledonia)",fr_NE:"French (Niger)",fr_RE:"French (Réunion)",fr_RW:"French (Rwanda)",fr_SN:"French (Senegal)",fr_SC:"French (Seychelles)",fr_BL:"French (St. Barthélemy)",fr_MF:"French (St. Martin)",fr_PM:"French (St. Pierre & Miquelon)",fr_CH:"French (Switzerland)",fr_SY:"French (Syria)",fr_TG:"French (Togo)",fr_TN:"French (Tunisia)",fr_VU:"French (Vanuatu)",fr_WF:"French (Wallis & Futuna)",ff:"Fulah",ff_CM:"Fulah (Cameroon)",ff_GN:"Fulah (Guinea)",ff_MR:"Fulah (Mauritania)",ff_SN:"Fulah (Senegal)",gl:"Galician",gl_ES:"Galician (Spain)",lg:"Ganda",lg_UG:"Ganda (Uganda)",ka:"Georgian",ka_GE:"Georgian (Georgia)",de:"German",de_AT:"German (Austria)",de_BE:"German (Belgium)",de_DE:"German (Germany)",de_LI:"German (Liechtenstein)",de_LU:"German (Luxembourg)",de_CH:"German (Switzerland)",el:"Greek",el_CY:"Greek (Cyprus)",el_GR:"Greek (Greece)",gu:"Gujarati",gu_IN:"Gujarati (India)",ha:"Hausa",ha_GH:"Hausa (Ghana)",ha_Latn_GH:"Hausa (Latin, Ghana)",ha_Latn_NE:"Hausa (Latin, Niger)",ha_Latn_NG:"Hausa (Latin, Nigeria)",ha_Latn:"Hausa (Latin)",ha_NE:"Hausa (Niger)",ha_NG:"Hausa (Nigeria)",he:"Hebrew",he_IL:"Hebrew (Israel)",hi:"Hindi",hi_IN:"Hindi (India)",hu:"Hungarian",hu_HU:"Hungarian (Hungary)",is:"Icelandic",is_IS:"Icelandic (Iceland)",ig:"Igbo",ig_NG:"Igbo (Nigeria)",id:"Indonesian",id_ID:"Indonesian (Indonesia)",ga:"Irish",ga_IE:"Irish (Ireland)",it:"Italian",it_IT:"Italian (Italy)",it_SM:"Italian (San Marino)",it_CH:"Italian (Switzerland)",ja:"Japanese",ja_JP:"Japanese (Japan)",kl:"Kalaallisut",kl_GL:"Kalaallisut (Greenland)",kn:"Kannada",kn_IN:"Kannada (India)",ks:"Kashmiri",ks_Arab_IN:"Kashmiri (Arabic, India)",ks_Arab:"Kashmiri (Arabic)",ks_IN:"Kashmiri (India)",kk:"Kazakh",kk_Cyrl_KZ:"Kazakh (Cyrillic, Kazakhstan)",kk_Cyrl:"Kazakh (Cyrillic)",kk_KZ:"Kazakh (Kazakhstan)",km:"Khmer",km_KH:"Khmer (Cambodia)",ki:"Kikuyu",ki_KE:"Kikuyu (Kenya)",rw:"Kinyarwanda",rw_RW:"Kinyarwanda (Rwanda)",ko:"Korean",ko_KP:"Korean (North Korea)",ko_KR:"Korean (South Korea)",ky:"Kyrgyz",ky_Cyrl_KG:"Kyrgyz (Cyrillic, Kyrgyzstan)",ky_Cyrl:"Kyrgyz (Cyrillic)",ky_KG:"Kyrgyz (Kyrgyzstan)",lo:"Lao",lo_LA:"Lao (Laos)",lv:"Latvian",lv_LV:"Latvian (Latvia)",ln:"Lingala",ln_AO:"Lingala (Angola)",ln_CF:"Lingala (Central African Republic)",ln_CG:"Lingala (Congo - Brazzaville)",ln_CD:"Lingala (Congo - Kinshasa)",lt:"Lithuanian",lt_LT:"Lithuanian (Lithuania)",lu:"Luba-Katanga",lu_CD:"Luba-Katanga (Congo - Kinshasa)",lb:"Luxembourgish",lb_LU:"Luxembourgish (Luxembourg)",mk:"Macedonian",mk_MK:"Macedonian (Macedonia)",mg:"Malagasy",mg_MG:"Malagasy (Madagascar)",ms:"Malay",ms_BN:"Malay (Brunei)",ms_Latn_BN:"Malay (Latin, Brunei)",ms_Latn_MY:"Malay (Latin, Malaysia)",ms_Latn_SG:"Malay (Latin, Singapore)",ms_Latn:"Malay (Latin)",ms_MY:"Malay (Malaysia)",ms_SG:"Malay (Singapore)",ml:"Malayalam",ml_IN:"Malayalam (India)",mt:"Maltese",mt_MT:"Maltese (Malta)",gv:"Manx",gv_IM:"Manx (Isle of Man)",mr:"Marathi",mr_IN:"Marathi (India)",mn:"Mongolian",mn_Cyrl_MN:"Mongolian (Cyrillic, Mongolia)",mn_Cyrl:"Mongolian (Cyrillic)",mn_MN:"Mongolian (Mongolia)",ne:"Nepali",ne_IN:"Nepali (India)",ne_NP:"Nepali (Nepal)",nd:"North Ndebele",nd_ZW:"North Ndebele (Zimbabwe)",se:"Northern Sami",se_FI:"Northern Sami (Finland)",se_NO:"Northern Sami (Norway)",se_SE:"Northern Sami (Sweden)",no:"Norwegian",no_NO:"Norwegian (Norway)",nb:"Norwegian Bokmål",nb_NO:"Norwegian Bokmål (Norway)",nb_SJ:"Norwegian Bokmål (Svalbard & Jan Mayen)",nn:"Norwegian Nynorsk",nn_NO:"Norwegian Nynorsk (Norway)",or:"Oriya",or_IN:"Oriya (India)",om:"Oromo",om_ET:"Oromo (Ethiopia)",om_KE:"Oromo (Kenya)",os:"Ossetic",os_GE:"Ossetic (Georgia)",os_RU:"Ossetic (Russia)",ps:"Pashto",ps_AF:"Pashto (Afghanistan)",fa:"Persian",fa_AF:"Persian (Afghanistan)",fa_IR:"Persian (Iran)",pl:"Polish",pl_PL:"Polish (Poland)",pt:"Portuguese",pt_AO:"Portuguese (Angola)",pt_BR:"Portuguese (Brazil)",pt_CV:"Portuguese (Cape Verde)",pt_GW:"Portuguese (Guinea-Bissau)",pt_MO:"Portuguese (Macau SAR China)",pt_MZ:"Portuguese (Mozambique)",pt_PT:"Portuguese (Portugal)",pt_ST:"Portuguese (São Tomé & Príncipe)",pt_TL:"Portuguese (Timor-Leste)",pa:"Punjabi",pa_Arab_PK:"Punjabi (Arabic, Pakistan)",pa_Arab:"Punjabi (Arabic)",pa_Guru_IN:"Punjabi (Gurmukhi, India)",pa_Guru:"Punjabi (Gurmukhi)",pa_IN:"Punjabi (India)",pa_PK:"Punjabi (Pakistan)",qu:"Quechua",qu_BO:"Quechua (Bolivia)",qu_EC:"Quechua (Ecuador)",qu_PE:"Quechua (Peru)",ro:"Romanian",ro_MD:"Romanian (Moldova)",ro_RO:"Romanian (Romania)",rm:"Romansh",rm_CH:"Romansh (Switzerland)",rn:"Rundi",rn_BI:"Rundi (Burundi)",ru:"Russian",ru_BY:"Russian (Belarus)",ru_KZ:"Russian (Kazakhstan)",ru_KG:"Russian (Kyrgyzstan)",ru_MD:"Russian (Moldova)",ru_RU:"Russian (Russia)",ru_UA:"Russian (Ukraine)",sg:"Sango",sg_CF:"Sango (Central African Republic)",gd:"Scottish Gaelic",gd_GB:"Scottish Gaelic (United Kingdom)",sr:"Serbian",sr_BA:"Serbian (Bosnia & Herzegovina)",sr_Cyrl_BA:"Serbian (Cyrillic, Bosnia & Herzegovina)",sr_Cyrl_XK:"Serbian (Cyrillic, Kosovo)",sr_Cyrl_ME:"Serbian (Cyrillic, Montenegro)",sr_Cyrl_RS:"Serbian (Cyrillic, Serbia)",sr_Cyrl:"Serbian (Cyrillic)",sr_XK:"Serbian (Kosovo)",sr_Latn_BA:"Serbian (Latin, Bosnia & Herzegovina)",sr_Latn_XK:"Serbian (Latin, Kosovo)",sr_Latn_ME:"Serbian (Latin, Montenegro)",sr_Latn_RS:"Serbian (Latin, Serbia)",sr_Latn:"Serbian (Latin)",sr_ME:"Serbian (Montenegro)",sr_RS:"Serbian (Serbia)",sh:"Serbo-Croatian",sh_BA:"Serbo-Croatian (Bosnia & Herzegovina)",sn:"Shona",sn_ZW:"Shona (Zimbabwe)",ii:"Sichuan Yi",ii_CN:"Sichuan Yi (China)",si:"Sinhala",si_LK:"Sinhala (Sri Lanka)",sk:"Slovak",sk_SK:"Slovak (Slovakia)",sl:"Slovenian",sl_SI:"Slovenian (Slovenia)",so:"Somali",so_DJ:"Somali (Djibouti)",so_ET:"Somali (Ethiopia)",so_KE:"Somali (Kenya)",so_SO:"Somali (Somalia)",es:"Spanish",es_AR:"Spanish (Argentina)",es_BO:"Spanish (Bolivia)",es_IC:"Spanish (Canary Islands)",es_EA:"Spanish (Ceuta & Melilla)",es_CL:"Spanish (Chile)",es_CO:"Spanish (Colombia)",es_CR:"Spanish (Costa Rica)",es_CU:"Spanish (Cuba)",es_DO:"Spanish (Dominican Republic)",es_EC:"Spanish (Ecuador)",es_SV:"Spanish (El Salvador)",es_GQ:"Spanish (Equatorial Guinea)",es_GT:"Spanish (Guatemala)",es_HN:"Spanish (Honduras)",es_MX:"Spanish (Mexico)",es_NI:"Spanish (Nicaragua)",es_PA:"Spanish (Panama)",es_PY:"Spanish (Paraguay)",es_PE:"Spanish (Peru)",es_PH:"Spanish (Philippines)",es_PR:"Spanish (Puerto Rico)",es_ES:"Spanish (Spain)",es_US:"Spanish (United States)",es_UY:"Spanish (Uruguay)",es_VE:"Spanish (Venezuela)",sw:"Swahili",sw_KE:"Swahili (Kenya)",sw_TZ:"Swahili (Tanzania)",sw_UG:"Swahili (Uganda)",sv:"Swedish",sv_AX:"Swedish (Åland Islands)",sv_FI:"Swedish (Finland)",sv_SE:"Swedish (Sweden)",tl:"Tagalog",tl_PH:"Tagalog (Philippines)",ta:"Tamil",ta_IN:"Tamil (India)",ta_MY:"Tamil (Malaysia)",ta_SG:"Tamil (Singapore)",ta_LK:"Tamil (Sri Lanka)",te:"Telugu",te_IN:"Telugu (India)",th:"Thai",th_TH:"Thai (Thailand)",bo:"Tibetan",bo_CN:"Tibetan (China)",bo_IN:"Tibetan (India)",ti:"Tigrinya",ti_ER:"Tigrinya (Eritrea)",ti_ET:"Tigrinya (Ethiopia)",to:"Tongan",to_TO:"Tongan (Tonga)",tr:"Turkish",tr_CY:"Turkish (Cyprus)",tr_TR:"Turkish (Turkey)",uk:"Ukrainian",uk_UA:"Ukrainian (Ukraine)",ur:"Urdu",ur_IN:"Urdu (India)",ur_PK:"Urdu (Pakistan)",ug:"Uyghur",ug_Arab_CN:"Uyghur (Arabic, China)",ug_Arab:"Uyghur (Arabic)",ug_CN:"Uyghur (China)",uz:"Uzbek",uz_AF:"Uzbek (Afghanistan)",uz_Arab_AF:"Uzbek (Arabic, Afghanistan)",uz_Arab:"Uzbek (Arabic)",uz_Cyrl_UZ:"Uzbek (Cyrillic, Uzbekistan)",uz_Cyrl:"Uzbek (Cyrillic)",uz_Latn_UZ:"Uzbek (Latin, Uzbekistan)",uz_Latn:"Uzbek (Latin)",uz_UZ:"Uzbek (Uzbekistan)",vi:"Vietnamese",vi_VN:"Vietnamese (Vietnam)",cy:"Welsh",cy_GB:"Welsh (United Kingdom)",fy:"Western Frisian",fy_NL:"Western Frisian (Netherlands)",yi:"Yiddish",yo:"Yoruba",yo_BJ:"Yoruba (Benin)",yo_NG:"Yoruba (Nigeria)",zu:"Zulu",zu_ZA:"Zulu (South Africa)"},t0e={class:"flex flex-col py-1"},n0e={class:"flex items-center justify-between py-2 mb-1"},s0e={class:"text-base text-slate-900 dark:text-slate-25"},a0e={class:"relative"},o0e={class:"absolute ltr:left-0 rtl:right-0 w-8 top-0.5 h-8 flex justify-center items-center"},i0e=["placeholder","value"],r0e={__name:"Header",props:{title:{type:String,default:"Chatwoot"}},emits:["search","close"],setup(e,{emit:t}){const n=t,s=X(null),o=X("");dt(()=>{s.value.focus()});const a=l=>{n("search",l.target.value)},i=()=>{n("close")};return $s({Slash:{action:l=>{l.preventDefault(),s.value.focus()}},Escape:{action:()=>{i()},allowOnFocusedInput:!0}}),(l,c)=>{const u=M("fluent-icon");return p(),v("div",t0e,[h("div",n0e,[h("h3",s0e,A(e.title),1),y(oe,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:i})]),h("div",a0e,[h("div",o0e,[y(u,{icon:"search",class:"",size:"18"})]),h("input",{ref_key:"searchInputRef",ref:s,type:"text",placeholder:l.$t("HELP_CENTER.ARTICLE_SEARCH.PLACEHOLDER"),class:"block w-full !h-9 ltr:!pl-8 rtl:!pr-8 dark:!bg-n-slate-2 !border-n-weak !bg-n-slate-2 text-sm rounded-md leading-8 text-slate-700 shadow-sm ring-2 ring-transparent ring-slate-300 border border-solid placeholder:text-slate-400 focus:border-woot-600 focus:ring-woot-200 !mb-0 focus:bg-slate-25 dark:focus:bg-slate-700 dark:focus:ring-woot-700",value:o.value,onInput:a},null,40,i0e)])])}}},l0e={class:"w-full mb-0 -mx-1 text-sm rounded-sm ltr:text-left rtl:text-right text-slate-900 dark:text-slate-25 hover:underline group-hover:underline"},c0e={class:"flex content-between items-center gap-0.5 w-full"},u0e={class:"w-full mb-0 text-sm ltr:text-left rtl:text-right text-slate-600 dark:text-slate-300"},d0e={class:"flex gap-0.5"},p0e={__name:"ArticleSearchResultItem",props:{id:{type:Number,default:0},title:{type:String,default:"Untitled"},url:{type:String,default:""},category:{type:String,default:""},locale:{type:String,default:""}},emits:["insert","preview"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=l=>{l.stopPropagation(),s("insert",n.id)},i=l=>{l.stopPropagation(),s("preview",n.id)},r=async l=>{l.stopPropagation(),await Go(n.url),ce(o("CONTACT_PANEL.COPY_SUCCESSFUL"))};return(l,c)=>(p(),v("button",{class:"flex flex-col w-full gap-1 px-2 py-1 bg-white border border-transparent border-solid rounded-md cursor-pointer dark:bg-slate-900 hover:bg-slate-25 hover:dark:bg-slate-800 group focus:outline-none focus:bg-slate-25 focus:border-slate-500 dark:focus:border-slate-400 dark:focus:bg-slate-800",onClick:i},[h("h4",l0e,A(e.title),1),h("div",c0e,[h("p",u0e,A(e.locale)+" "+A(" / ")+" "+A(e.category||l.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.UNCATEGORIZED")),1),h("div",d0e,[y(oe,{title:l.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.COPY_LINK"),faded:"",slate:"",xs:"",type:"reset",icon:"i-lucide-copy",class:"invisible group-hover:visible",onClick:r},null,8,["title"]),y(oe,{xs:"",faded:"",slate:"",label:l.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.INSERT_ARTICLE"),onClick:a},null,8,["label"])])])]))}},h0e={name:"SearchResults",components:{SearchResultItem:p0e},props:{articles:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},searchQuery:{type:String,default:""}},emits:["preview","insert"],computed:{showNoResults(){return this.searchQuery&&this.articles.length===0}},methods:{handlePreview(e){this.$emit("preview",e)},handleInsert(e){this.$emit("insert",e)}}},m0e={class:"flex justify-end h-full gap-1 py-4 overflow-y-auto bg-white dark:bg-slate-900"},f0e={class:"flex flex-col w-full gap-1"},g0e={key:0,class:"empty-state-message"},_0e={key:1,class:"empty-state-message"};function v0e(e,t,n,s,o,a){const i=M("SearchResultItem");return p(),v("div",m0e,[h("div",f0e,[n.isLoading?(p(),v("div",g0e,A(e.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.SEARCH_LOADER")),1)):a.showNoResults?(p(),v("div",_0e,A(e.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.NO_RESULT")),1)):(p(!0),v(pe,{key:2},Ne(n.articles,r=>(p(),$(i,{id:r.id,key:r.id,title:r.title,body:r.content,url:r.url,category:r.category.name,locale:r.localeName,onPreview:a.handlePreview,onInsert:a.handleInsert},null,8,["id","title","body","url","category","locale","onPreview","onInsert"]))),128))])])}const b0e=Ae(h0e,[["render",v0e],["__scopeId","data-v-b70aa636"]]),E0e={class:"h-full w-full flex flex-col flex-1 overflow-hidden"},T0e={class:"py-1"},y0e={class:"-ml-4 h-full overflow-y-auto"},S0e={class:"w-full h-full min-h-0"},A0e={class:"flex justify-end gap-2 py-2"},I0e={__name:"ArticleView",props:{url:{type:String,default:""}},emits:["back","insert"],setup(e,{emit:t}){const n=t,s=Oe("accounts/isRTL"),o=i=>{i.stopPropagation(),n("back")},a=i=>{i.stopPropagation(),n("insert")};return(i,r)=>(p(),v("div",E0e,[h("div",T0e,[y(oe,{link:"",xs:"",label:i.$t("HELP_CENTER.ARTICLE_SEARCH.BACK_RESULTS"),icon:"i-lucide-chevron-left",onClick:o},null,8,["label"])]),h("div",y0e,[h("div",S0e,[y(fN,{url:e.url,"is-rtl":N(s),"is-dir-applied":""},null,8,["url","is-rtl"])])]),h("div",A0e,[y(oe,{faded:"",slate:"",sm:"",type:"reset",icon:"i-lucide-chevron-left",label:i.$t("HELP_CENTER.ARTICLE_SEARCH.BACK"),onClick:o},null,8,["label"]),y(oe,{sm:"",type:"submit",icon:"i-lucide-arrow-down-to-dot",label:i.$t("HELP_CENTER.ARTICLE_SEARCH.INSERT_ARTICLE"),onClick:a},null,8,["label"])])]))}},C0e=e=>e.startsWith("https")?e:`https://${e}`,O0e=()=>{const{hostURL:e,helpCenterURL:t}=window.chatwootConfig||{},n=t||e||"";if(!n)throw new Error("No valid base URL found in configuration");return n},N0e=e=>e?C0e(e):O0e(),hA=(e,t)=>`${N0e(t)}/hc/${e}`,w0e=(e,t,n,s,o)=>`${hA(e,o)}/articles/${s}`,uze=e=>{switch(e){case"draft":return 0;case"published":return 1;case"archived":return 2;default:return}},dze=[{label:"Articles",icon:"i-lucide-book",action:"portals_articles_index",value:["portals_articles_index","portals_articles_new","portals_articles_edit"]},{label:"Categories",icon:"i-lucide-folder",action:"portals_categories_index",value:["portals_categories_index","portals_categories_articles_index","portals_categories_articles_edit"]},{label:"Locales",icon:"i-lucide-languages",action:"portals_locales_index",value:["portals_locales_index"]},{label:"Settings",icon:"i-lucide-settings",action:"portals_settings_index",value:["portals_settings_index"]}],tr={DRAFT:"draft",PUBLISHED:"published",ARCHIVED:"archived"},R0e={publish:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.PUBLISH",value:tr.PUBLISHED,action:"publish",icon:"i-lucide-check"},draft:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.DRAFT",value:tr.DRAFT,action:"draft",icon:"i-lucide-pencil-line"},archive:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.ARCHIVE",value:tr.ARCHIVED,action:"archive",icon:"i-lucide-archive-restore"},delete:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.DELETE",value:"delete",action:"delete",icon:"i-lucide-trash"}},rE={[tr.ARCHIVED]:["publish","draft"],[tr.DRAFT]:["publish","archive"],[tr.PUBLISHED]:["draft","archive"]},pze={ALL:"all"},hze="all",mze=[{key:"ALL",value:"all"},{key:"MINE",value:"mine"},{key:"DRAFT",value:"draft"},{key:"ARCHIVED",value:"archived"}],fze=[{label:"HELP_CENTER.LOCALES_PAGE.LOCALE_CARD.DROPDOWN_MENU.MAKE_DEFAULT",action:"change-default",value:"default",icon:"i-lucide-star"},{label:"HELP_CENTER.LOCALES_PAGE.LOCALE_CARD.DROPDOWN_MENU.DELETE",action:"delete",value:"delete",icon:"i-lucide-trash"}],gze={published:["archive","draft"],archived:["draft"],draft:["archive"]},x0e={name:"ArticleSearchPopover",components:{SearchHeader:r0e,SearchResults:b0e,ArticleView:I0e},props:{selectedPortalSlug:{type:String,required:!0}},emits:["close","insert"],data(){return{searchQuery:"",isLoading:!1,searchResults:[],activeId:"",debounceSearch:()=>{}}},computed:{...lt({portalBySlug:"portals/portalBySlug"}),portal(){return this.portalBySlug(this.selectedPortalSlug)},portalCustomDomain(){var e;return(e=this.portal)==null?void 0:e.custom_domain},articleViewerUrl(){const e=this.activeArticle(this.activeId);if(!e)return"";const t=document.body.classList.contains("dark"),n=new URL(e.url);return n.searchParams.set("show_plain_layout","true"),t&&n.searchParams.set("theme","dark"),`${n}`},searchResultsWithUrl(){return this.searchResults.map(e=>({...e,localeName:this.localeName(e.category.locale||"en"),url:this.generateArticleUrl(e)}))}},mounted(){this.fetchArticlesByQuery(this.searchQuery),this.debounceSearch=Uo(this.fetchArticlesByQuery,500,!1)},methods:{generateArticleUrl(e){return w0e(this.selectedPortalSlug,"","",e.slug,this.portalCustomDomain)},localeName(e){return e0e[e]},activeArticle(e){return this.searchResultsWithUrl.find(t=>t.id===e)},onSearch(e){this.searchQuery=e,this.activeId="",this.debounceSearch(e)},onClose(){this.$emit("close"),this.searchQuery="",this.activeId="",this.searchResults=[]},async fetchArticlesByQuery(e){try{const t=e?"":"views";this.isLoading=!0,this.searchResults=[];const{data:n}=await ZO.searchArticles({portalSlug:this.selectedPortalSlug,query:e,sort:t});this.searchResults=n.payload,this.isLoading=!0}catch{}finally{this.isLoading=!1}},handlePreview(e){this.activeId=e},onBack(){this.activeId=""},onInsert(e){const t=this.activeArticle(e||this.activeId);this.$emit("insert",t),ce(this.$t("HELP_CENTER.ARTICLE_SEARCH.SUCCESS_ARTICLE_INSERTED")),this.onClose()}}},$0e={class:"fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen bg-modal-backdrop-light dark:bg-modal-backdrop-dark"},M0e={class:"flex flex-col px-4 pb-4 rounded-md shadow-md border border-solid border-slate-50 dark:border-slate-800 bg-white dark:bg-slate-900 z-[1000] max-w-[720px] md:w-[20rem] lg:w-[24rem] xl:w-[28rem] 2xl:w-[32rem] h-[calc(100vh-20rem)] max-h-[40rem]"};function L0e(e,t,n,s,o,a){const i=M("SearchHeader"),r=M("ArticleView"),l=M("SearchResults"),c=qe("on-clickaway");return p(),v("div",$0e,[re((p(),v("div",M0e,[y(i,{title:e.$t("HELP_CENTER.ARTICLE_SEARCH.TITLE"),class:"w-full sticky top-0 bg-[inherit]",onClose:a.onClose,onSearch:a.onSearch},null,8,["title","onClose","onSearch"]),o.activeId?(p(),$(r,{key:0,url:a.articleViewerUrl,onBack:a.onBack,onInsert:a.onInsert},null,8,["url","onBack","onInsert"])):(p(),$(l,{key:1,"search-query":o.searchQuery,"is-loading":o.isLoading,"portal-slug":n.selectedPortalSlug,articles:a.searchResultsWithUrl,onPreview:a.handlePreview,onInsert:a.onInsert},null,8,["search-query","is-loading","portal-slug","articles","onPreview","onInsert"]))])),[[c,a.onClose]])])}const k0e=Ae(x0e,[["render",L0e]]),D0e={class:"my-0 mx-4 px-1 flex max-h-[8vh] items-baseline justify-between hover:bg-slate-25 dark:hover:bg-slate-800 border border-dashed border-slate-100 dark:border-slate-700 rounded-sm overflow-auto"},P0e={class:"w-fit !m-0"},B0e={__name:"MessageSignatureMissingAlert",setup(e){const t=xn(),n=()=>t.push({name:"profile_settings_index"});return(s,o)=>(p(),v("div",D0e,[h("p",P0e,[Re(A(s.$t("CONVERSATION.FOOTER.MESSAGE_SIGNATURE_NOT_CONFIGURED"))+" ",1),y(oe,{link:"",label:s.$t("CONVERSATION.FOOTER.CLICK_HERE"),onClick:n},null,8,["label"])])]))}};function Vs(e,t,n,s){return new(n||(n=Promise))(function(o,a){function i(c){try{l(s.next(c))}catch(u){a(u)}}function r(c){try{l(s.throw(c))}catch(u){a(u)}}function l(c){var u;c.done?o(c.value):(u=c.value,u instanceof n?u:new n(function(d){d(u)})).then(i,r)}l((s=s.apply(e,t||[])).next())})}let Vc=class{constructor(){this.listeners={}}on(t,n,s){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),s==null?void 0:s.once){const o=()=>{this.un(t,o),this.un(t,n)};return this.on(t,o),o}return()=>this.un(t,n)}un(t,n){var s;(s=this.listeners[t])===null||s===void 0||s.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(s=>s(...n))}};const lE={decode:function(e,t){return Vs(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const s=n[0];if(s.some(o=>o>1||o<-1)){const o=s.length;let a=0;for(let i=0;i<o;i++){const r=Math.abs(s[i]);r>a&&(a=r)}for(const i of n)for(let r=0;r<o;r++)i[r]/=a}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function mA(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[s,o]of Object.entries(t))if(s==="children")for(const[a,i]of Object.entries(t))typeof i=="string"?n.appendChild(document.createTextNode(i)):n.appendChild(mA(a,i));else s==="style"?Object.assign(n.style,o):s==="textContent"?n.textContent=o:n.setAttribute(s,o.toString());return n}function cE(e,t,n){const s=mA(e,t||{});return n==null||n.appendChild(s),s}var F0e=Object.freeze({__proto__:null,createElement:cE,default:cE});const U0e={fetchBlob:function(e,t,n){return Vs(this,void 0,void 0,function*(){const s=yield fetch(e,n);if(s.status>=400)throw new Error(`Failed to fetch ${e}: ${s.status} (${s.statusText})`);return function(o,a){Vs(this,void 0,void 0,function*(){if(!o.body||!o.headers)return;const i=o.body.getReader(),r=Number(o.headers.get("Content-Length"))||0;let l=0;const c=d=>Vs(this,void 0,void 0,function*(){l+=(d==null?void 0:d.length)||0;const m=Math.round(l/r*100);a(m)}),u=()=>Vs(this,void 0,void 0,function*(){let d;try{d=yield i.read()}catch{return}d.done||(c(d.value),yield u())});u()})}(s.clone(),t),s.blob()})}};class G0e extends Vc{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,s){return this.media.addEventListener(t,n,s),()=>this.media.removeEventListener(t,n,s)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const s=this.getSrc();if(t&&s===t)return;this.revokeSrc();const o=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=o}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Vs(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class Jr extends Vc{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const s=this.parentFromOptionsContainer(t.container);this.parent=s;const[o,a]=this.initHtml();s.appendChild(o),this.container=o,this.scrollContainer=a.querySelector(".scroll"),this.wrapper=a.querySelector(".wrapper"),this.canvasWrapper=a.querySelector(".canvases"),this.progressWrapper=a.querySelector(".progress"),this.cursor=a.querySelector(".cursor"),n&&a.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const s=this.wrapper.getBoundingClientRect(),o=n.clientX-s.left,a=n.clientY-s.top;return[o/s.width,a/s.height]};if(this.wrapper.addEventListener("click",n=>{const[s,o]=t(n);this.emit("click",s,o)}),this.wrapper.addEventListener("dblclick",n=>{const[s,o]=t(n);this.emit("dblclick",s,o)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,a=n/s,i=(n+o)/s;this.emit("scroll",a,i,n,n+o)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,s,o,a=3,i=0,r=100){if(!t)return()=>{};const l=matchMedia("(pointer: coarse)").matches;let c=()=>{};const u=d=>{if(d.button!==i)return;d.preventDefault(),d.stopPropagation();let m=d.clientX,f=d.clientY,g=!1;const T=Date.now(),S=R=>{if(R.preventDefault(),R.stopPropagation(),l&&Date.now()-T<r)return;const O=R.clientX,x=R.clientY,L=O-m,F=x-f;if(g||Math.abs(L)>a||Math.abs(F)>a){const D=t.getBoundingClientRect(),{left:V,top:B}=D;g||(s==null||s(m-V,f-B),g=!0),n(L,F,O-V,x-B),m=O,f=x}},_=R=>{if(g){const O=R.clientX,x=R.clientY,L=t.getBoundingClientRect(),{left:F,top:D}=L;o==null||o(O-F,x-D)}c()},E=R=>{R.relatedTarget&&R.relatedTarget!==document.documentElement||_(R)},b=R=>{g&&(R.stopPropagation(),R.preventDefault())},I=R=>{g&&R.preventDefault()};document.addEventListener("pointermove",S),document.addEventListener("pointerup",_),document.addEventListener("pointerout",E),document.addEventListener("pointercancel",E),document.addEventListener("touchmove",I,{passive:!1}),document.addEventListener("click",b,{capture:!0}),c=()=>{document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",_),document.removeEventListener("pointerout",E),document.removeEventListener("pointercancel",E),document.removeEventListener("touchmove",I),setTimeout(()=>{document.removeEventListener("click",b,{capture:!0})},10)}};return t.addEventListener("pointerdown",u),()=>{c(),t.removeEventListener("pointerdown",u)}}(this.wrapper,(t,n,s)=>{this.emit("drag",Math.max(0,Math.min(1,s/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var s;const o=((s=this.audioData)===null||s===void 0?void 0:s.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const a=this.parent.clientHeight||128;return n!=null&&n.every(i=>!i.overlay)?a/o:a}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),s=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${s?` nonce="${s}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,s=n*t;this.setScroll(s)}destroy(){var t,n;this.subscriptions.forEach(s=>s()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.call(this)}createDelay(t=10){let n,s;const o=()=>{n&&clearTimeout(n),s&&s()};return this.timeouts.push(o),()=>new Promise((a,i)=>{o(),s=i,n=setTimeout(()=>{n=void 0,s=void 0,a()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),s=n.getContext("2d"),o=n.height*(window.devicePixelRatio||1),a=s.createLinearGradient(0,0,0,o),i=1/(t.length-1);return t.forEach((r,l)=>{const c=l*i;a.addColorStop(c,r)}),a}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,s,o){const a=t[0],i=t[1]||t[0],r=a.length,{width:l,height:c}=s.canvas,u=c/2,d=this.getPixelRatio(),m=n.barWidth?n.barWidth*d:1,f=n.barGap?n.barGap*d:n.barWidth?m/2:0,g=n.barRadius||0,T=l/(m+f)/r,S=g&&"roundRect"in s?"roundRect":"rect";s.beginPath();let _=0,E=0,b=0;for(let I=0;I<=r;I++){const R=Math.round(I*T);if(R>_){const L=Math.round(E*u*o),F=L+Math.round(b*u*o)||1;let D=u-L;n.barAlign==="top"?D=0:n.barAlign==="bottom"&&(D=c-F),s[S](_*(m+f),D,m,F,g),_=R,E=0,b=0}const O=Math.abs(a[I]||0),x=Math.abs(i[I]||0);O>E&&(E=O),x>b&&(b=x)}s.fill(),s.closePath()}renderLineWaveform(t,n,s,o){const a=i=>{const r=t[i]||t[0],l=r.length,{height:c}=s.canvas,u=c/2,d=s.canvas.width/l;s.moveTo(0,u);let m=0,f=0;for(let g=0;g<=l;g++){const T=Math.round(g*d);if(T>m){const _=u+(Math.round(f*u*o)||1)*(i===0?-1:1);s.lineTo(m,_),m=T,f=0}const S=Math.abs(r[g]||0);S>f&&(f=S)}s.lineTo(m,u)};s.beginPath(),a(0),a(1),s.fill(),s.closePath()}renderWaveform(t,n,s){if(s.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,s);let o=n.barHeight||1;if(n.normalize){const a=Array.from(t[0]).reduce((i,r)=>Math.max(i,Math.abs(r)),0);o=a?1/a:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,s,o):this.renderLineWaveform(t,n,s,o)}renderSingleCanvas(t,n,s,o,a,i,r){const l=this.getPixelRatio(),c=document.createElement("canvas");c.width=Math.round(s*l),c.height=Math.round(o*l),c.style.width=`${s}px`,c.style.height=`${o}px`,c.style.left=`${Math.round(a)}px`,i.appendChild(c);const u=c.getContext("2d");if(this.renderWaveform(t,n,u),c.width>0&&c.height>0){const d=c.cloneNode(),m=d.getContext("2d");m.drawImage(c,0,0),m.globalCompositeOperation="source-in",m.fillStyle=this.convertColorValues(n.progressColor),m.fillRect(0,0,c.width,c.height),r.appendChild(d)}}renderMultiCanvas(t,n,s,o,a,i){const r=this.getPixelRatio(),{clientWidth:l}=this.scrollContainer,c=s/r;let u=Math.min(Jr.MAX_CANVAS_WIDTH,l,c),d={};if(n.barWidth||n.barGap){const S=n.barWidth||.5,_=S+(n.barGap||S/2);u%_!=0&&(u=Math.floor(u/_)*_)}const m=S=>{if(S<0||S>=f||d[S])return;d[S]=!0;const _=S*u,E=Math.min(c-_,u);if(E<=0)return;const b=t.map(I=>{const R=Math.floor(_/c*I.length),O=Math.floor((_+E)/c*I.length);return I.slice(R,O)});this.renderSingleCanvas(b,n,E,o,_,a,i)},f=Math.ceil(c/u);if(!this.isScrollable){for(let S=0;S<f;S++)m(S);return}const g=this.scrollContainer.scrollLeft/c,T=Math.floor(g*f);m(T-1),m(T),m(T+1),f>1&&(this.unsubscribeOnScroll=this.on("scroll",()=>{const{scrollLeft:S}=this.scrollContainer,_=Math.floor(S/c*f);Object.keys(d).length>Jr.MAX_NODES&&(a.innerHTML="",i.innerHTML="",d={}),m(_-1),m(_),m(_+1)}))}renderChannel(t,n,s,o){var{overlay:a}=n,i=function(u,d){var m={};for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&d.indexOf(f)<0&&(m[f]=u[f]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var g=0;for(f=Object.getOwnPropertySymbols(u);g<f.length;g++)d.indexOf(f[g])<0&&Object.prototype.propertyIsEnumerable.call(u,f[g])&&(m[f[g]]=u[f[g]])}return m}(n,["overlay"]);const r=document.createElement("div"),l=this.getHeight(i.height,i.splitChannels);r.style.height=`${l}px`,a&&o>0&&(r.style.marginTop=`-${l}px`),this.canvasWrapper.style.minHeight=`${l}px`,this.canvasWrapper.appendChild(r);const c=r.cloneNode();this.progressWrapper.appendChild(c),this.renderMultiCanvas(t,i,s,l,r,c)}render(t){return Vs(this,void 0,void 0,function*(){var n;this.timeouts.forEach(l=>l()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const s=this.getPixelRatio(),o=this.scrollContainer.clientWidth,a=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=a>o;const i=this.options.fillParent&&!this.isScrollable,r=(i?o:a)*s;if(this.wrapper.style.width=i?"100%":`${a}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let l=0;l<t.numberOfChannels;l++){const c=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[l]);this.renderChannel([t.getChannelData(l)],c,r,l)}else{const l=[t.getChannelData(0)];t.numberOfChannels>1&&l.push(t.getChannelData(1)),this.renderChannel(l,this.options,r,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){var t;if((t=this.unsubscribeOnScroll)===null||t===void 0||t.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:n}=this.scrollContainer,{right:s}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&n!==this.scrollContainer.scrollWidth){const{right:o}=this.progressWrapper.getBoundingClientRect();let a=o-s;a*=2,a=a<0?Math.floor(a):Math.ceil(a),a/=2,this.scrollContainer.scrollLeft+=a}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:s,scrollWidth:o,clientWidth:a}=this.scrollContainer,i=t*o,r=s,l=s+a,c=a/2;if(this.isDragging)i+30>l?this.scrollContainer.scrollLeft+=30:i-30<r&&(this.scrollContainer.scrollLeft-=30);else{(i<r||i>l)&&(this.scrollContainer.scrollLeft=i-(this.options.autoCenter?c:0));const u=i-s-c;n&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=Math.min(u,10))}{const u=this.scrollContainer.scrollLeft,d=u/o,m=(u+a)/o;this.emit("scroll",d,m,u,u+a)}}renderProgress(t,n){if(isNaN(t))return;const s=100*t;this.canvasWrapper.style.clipPath=`polygon(${s}% 0, 100% 0, 100% 100%, ${s}% 100%)`,this.progressWrapper.style.width=`${s}%`,this.cursor.style.left=`${s}%`,this.cursor.style.transform=`translateX(-${Math.round(s)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,s){return Vs(this,void 0,void 0,function*(){const o=this.canvasWrapper.querySelectorAll("canvas");if(!o.length)throw new Error("No waveform data");if(s==="dataURL"){const a=Array.from(o).map(i=>i.toDataURL(t,n));return Promise.resolve(a)}return Promise.all(Array.from(o).map(a=>new Promise((i,r)=>{a.toBlob(l=>{l?i(l):r(new Error("Could not export image"))},t,n)})))})}}Jr.MAX_CANVAS_WIDTH=8e3,Jr.MAX_NODES=10;class V0e extends Vc{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class uE extends Vc{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Vs(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Vs(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,s;const o=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+o),(s=this.bufferNode)===null||s===void 0||s.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return Vs(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let s=0;s<n;s++)t.push(this.buffer.getChannelData(s));return t}}const H0e={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Tc extends G0e{static create(t){return new Tc(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new uE:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},H0e,t),this.timer=new V0e;const s=n?void 0:this.getMediaElement();this.renderer=new Jr(this.options,s),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const o=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:a,duration:i}=this.options;(o||a&&i)&&this.load(o,a,i).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,s,o)=>{const a=this.getDuration();this.emit("scroll",t*a,n*a,s,o)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let s;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?s=0:this.options.dragToSeek===!0?s=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(s=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},s),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,s,o){return Vs(this,void 0,void 0,function*(){var a;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!s){const r=this.options.fetchParams||{};window.AbortController&&!r.signal&&(this.abortController=new AbortController,r.signal=(a=this.abortController)===null||a===void 0?void 0:a.signal);const l=c=>this.emit("loading",c);n=yield U0e.fetchBlob(t,l,r)}this.setSrc(t,n);const i=yield new Promise(r=>{const l=o||this.getDuration();l?r(l):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>r(this.getDuration()),{once:!0}))});if(!t&&!n){const r=this.getMediaElement();r instanceof uE&&(r.duration=i)}if(s)this.decodedData=lE.createBuffer(s,i||0);else if(n){const r=yield n.arrayBuffer();this.decodedData=yield lE.decode(r,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,s){return Vs(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,s)}catch(o){throw this.emit("error",o),o}})}loadBlob(t,n,s){return Vs(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,s)}catch(o){throw this.emit("error",o),o}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:s=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const o=Math.min(t,this.decodedData.numberOfChannels),a=[];for(let i=0;i<o;i++){const r=this.decodedData.getChannelData(i),l=[],c=r.length/n;for(let u=0;u<n;u++){const d=r.slice(Math.floor(u*c),Math.ceil((u+1)*c));let m=0;for(let f=0;f<d.length;f++){const g=d[f];Math.abs(g)>Math.abs(m)&&(m=g)}l.push(Math.round(m*s)/s)}a.push(l)}return a}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return Vs(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Vs(this,arguments,void 0,function*(t="image/png",n=1,s="dataURL"){return this.renderer.exportImage(t,n,s)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}Tc.BasePlugin=class extends Vc{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},Tc.dom=F0e;function hm(e,t,n,s){return new(n||(n=Promise))(function(o,a){function i(c){try{l(s.next(c))}catch(u){a(u)}}function r(c){try{l(s.throw(c))}catch(u){a(u)}}function l(c){var u;c.done?o(c.value):(u=c.value,u instanceof n?u:new n(function(d){d(u)})).then(i,r)}l((s=s.apply(e,[])).next())})}class fA{constructor(){this.listeners={}}on(t,n,s){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),s==null?void 0:s.once){const o=()=>{this.un(t,o),this.un(t,n)};return this.on(t,o),o}return()=>this.un(t,n)}un(t,n){var s;(s=this.listeners[t])===null||s===void 0||s.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(s=>s(...n))}}class W0e extends fA{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}class z0e extends fA{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const j0e=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class d_ extends W0e{constructor(t){var n,s,o,a,i,r;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(s=t.scrollingWaveform)!==null&&s!==void 0&&s,scrollingWaveformWindow:(o=t.scrollingWaveformWindow)!==null&&o!==void 0?o:5,continuousWaveform:(a=t.continuousWaveform)!==null&&a!==void 0&&a,renderRecordedAudio:(i=t.renderRecordedAudio)===null||i===void 0||i,mediaRecorderTimeslice:(r=t.mediaRecorderTimeslice)!==null&&r!==void 0?r:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new z0e,this.subscriptions.push(this.timer.on("tick",()=>{const l=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+l,this.emit("record-progress",this.duration)}))}static create(t){return new d_(t||{})}renderMicStream(t){var n;const s=new AudioContext,o=s.createMediaStreamSource(t),a=s.createAnalyser();o.connect(a),this.options.continuousWaveform&&(a.fftSize=32);const i=a.frequencyBinCount,r=new Float32Array(i);let l=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const c=setInterval(()=>{var u,d,m,f;if(!this.isWaveformPaused){if(a.getFloatTimeDomainData(r),this.options.scrollingWaveform){const g=Math.floor((this.options.scrollingWaveformWindow||0)*s.sampleRate),T=Math.min(g,this.dataWindow?this.dataWindow.length+i:i),S=new Float32Array(g);if(this.dataWindow){const _=Math.max(0,g-this.dataWindow.length);S.set(this.dataWindow.slice(-T+i),_)}S.set(r,g-i),this.dataWindow=S}else if(this.options.continuousWaveform){if(!this.dataWindow){const T=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((d=(u=this.wavesurfer)===null||u===void 0?void 0:u.getWidth())!==null&&d!==void 0?d:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(T)}let g=0;for(let T=0;T<i;T++){const S=Math.abs(r[T]);S>g&&(g=S)}if(l+1>this.dataWindow.length){const T=new Float32Array(2*this.dataWindow.length);T.set(this.dataWindow,0),this.dataWindow=T}this.dataWindow[l]=g,l++}else this.dataWindow=r;if(this.wavesurfer){const g=((f=(m=this.dataWindow)===null||m===void 0?void 0:m.length)!==null&&f!==void 0?f:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:g).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(T=>{console.error("Error rendering real-time recording data:",T)})}}},10);return{onDestroy:()=>{clearInterval(c),o==null||o.disconnect(),s==null||s.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(c),this.stopMic()}}}startMic(t){return hm(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(a){throw new Error("Error accessing the microphone: "+a.message)}const{onDestroy:s,onEnd:o}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",s)),this.subscriptions.push(this.once("record-end",o)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return hm(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const s=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||j0e.find(i=>MediaRecorder.isTypeSupported(i)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=s,this.stopRecording();const o=[];s.ondataavailable=i=>{i.data.size>0&&o.push(i.data),this.emit("record-data-available",i.data)};const a=i=>{var r;const l=new Blob(o,{type:s.mimeType});this.emit(i,l),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(r=this.wavesurfer)===null||r===void 0||r.load(URL.createObjectURL(l)))};s.onpause=()=>a("record-pause"),s.onstop=()=>a("record-end"),s.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return hm(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}var p_={};function K0e(e){return new Int8Array(e)}function Y0e(e){return new Int16Array(e)}function gA(e){return new Int32Array(e)}function _A(e){return new Float32Array(e)}function X0e(e){return new Float64Array(e)}function vA(e){if(e.length==1)return _A(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(vA(e));return n}function bA(e){if(e.length==1)return gA(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(bA(e));return n}function EA(e){if(e.length==1)return Y0e(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(EA(e));return n}function TA(e){if(e.length==1)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(TA(e));return n}var yA={};yA.fill=function(e,t,n,s){if(arguments.length==2)for(var o=0;o<e.length;o++)e[o]=arguments[1];else for(var o=t;o<n;o++)e[o]=s};var Hc={};Hc.arraycopy=function(e,t,n,s,o){for(var a=t+o;t<a;)n[s++]=e[t++]};Hc.out={};Hc.out.println=function(e){console.log(e)};Hc.out.printf=function(){console.log.apply(console,arguments)};var _p={};_p.SQRT2=1.4142135623730951;_p.FAST_LOG10=function(e){return Math.log10(e)};_p.FAST_LOG10_X=function(e,t){return Math.log10(e)*t};function Wo(e){this.ordinal=e}Wo.short_block_allowed=new Wo(0);Wo.short_block_coupled=new Wo(1);Wo.short_block_dispensed=new Wo(2);Wo.short_block_forced=new Wo(3);var SA={};SA.MAX_VALUE=34028235e31;function Ta(e){this.ordinal=e}Ta.vbr_off=new Ta(0);Ta.vbr_mt=new Ta(1);Ta.vbr_rh=new Ta(2);Ta.vbr_abr=new Ta(3);Ta.vbr_mtrh=new Ta(4);Ta.vbr_default=Ta.vbr_mtrh;var q0e=function(e){},Fn={System:Hc,VbrMode:Ta,Float:SA,ShortBlock:Wo,Util:_p,Arrays:yA,new_array_n:TA,new_byte:K0e,new_double:X0e,new_float:_A,new_float_n:vA,new_int:gA,new_int_n:bA,new_short_n:EA,assert:q0e},mm,dE;function Z0e(){if(dE)return mm;dE=1;var e=Fn,t=e.System,n=e.Util,s=e.Arrays,o=e.new_float,a=Ws();function i(){var r=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*n.SQRT2*.5/2384e-9,.017876148*n.SQRT2*.5/2384e-9,.003134727*n.SQRT2*.5/2384e-9,.002457142*n.SQRT2*.5/2384e-9,971317e-9*n.SQRT2*.5/2384e-9,218868e-9*n.SQRT2*.5/2384e-9,101566e-9*n.SQRT2*.5/2384e-9,13828e-9*n.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],l=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],c=l[a.SHORT_TYPE],u=l[a.SHORT_TYPE],d=l[a.SHORT_TYPE],m=l[a.SHORT_TYPE],f=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function g(_,E,b){for(var I=10,R=E+238-14-286,O=-15;O<0;O++){var x,L,F;x=r[I+-10],L=_[R+-224]*x,F=_[E+224]*x,x=r[I+-9],L+=_[R+-160]*x,F+=_[E+160]*x,x=r[I+-8],L+=_[R+-96]*x,F+=_[E+96]*x,x=r[I+-7],L+=_[R+-32]*x,F+=_[E+32]*x,x=r[I+-6],L+=_[R+32]*x,F+=_[E+-32]*x,x=r[I+-5],L+=_[R+96]*x,F+=_[E+-96]*x,x=r[I+-4],L+=_[R+160]*x,F+=_[E+-160]*x,x=r[I+-3],L+=_[R+224]*x,F+=_[E+-224]*x,x=r[I+-2],L+=_[E+-256]*x,F-=_[R+256]*x,x=r[I+-1],L+=_[E+-192]*x,F-=_[R+192]*x,x=r[I+0],L+=_[E+-128]*x,F-=_[R+128]*x,x=r[I+1],L+=_[E+-64]*x,F-=_[R+64]*x,x=r[I+2],L+=_[E+0]*x,F-=_[R+0]*x,x=r[I+3],L+=_[E+64]*x,F-=_[R+-64]*x,x=r[I+4],L+=_[E+128]*x,F-=_[R+-128]*x,x=r[I+5],L+=_[E+192]*x,F-=_[R+-192]*x,L*=r[I+6],x=F-L,b[30+O*2]=F+L,b[31+O*2]=r[I+7]*x,I+=18,E--,R++}{var L,F,D,V;F=_[E+-16]*r[I+-10],L=_[E+-32]*r[I+-2],F+=(_[E+-48]-_[E+16])*r[I+-9],L+=_[E+-96]*r[I+-1],F+=(_[E+-80]+_[E+48])*r[I+-8],L+=_[E+-160]*r[I+0],F+=(_[E+-112]-_[E+80])*r[I+-7],L+=_[E+-224]*r[I+1],F+=(_[E+-144]+_[E+112])*r[I+-6],L-=_[E+32]*r[I+2],F+=(_[E+-176]-_[E+144])*r[I+-5],L-=_[E+96]*r[I+3],F+=(_[E+-208]+_[E+176])*r[I+-4],L-=_[E+160]*r[I+4],F+=(_[E+-240]-_[E+208])*r[I+-3],L-=_[E+224],D=L-F,V=L+F,F=b[14],L=b[15]-F,b[31]=V+F,b[30]=D+L,b[15]=D-L,b[14]=V-F}{var B;B=b[28]-b[0],b[0]+=b[28],b[28]=B*r[I+-2*18+7],B=b[29]-b[1],b[1]+=b[29],b[29]=B*r[I+-2*18+7],B=b[26]-b[2],b[2]+=b[26],b[26]=B*r[I+-4*18+7],B=b[27]-b[3],b[3]+=b[27],b[27]=B*r[I+-4*18+7],B=b[24]-b[4],b[4]+=b[24],b[24]=B*r[I+-6*18+7],B=b[25]-b[5],b[5]+=b[25],b[25]=B*r[I+-6*18+7],B=b[22]-b[6],b[6]+=b[22],b[22]=B*n.SQRT2,B=b[23]-b[7],b[7]+=b[23],b[23]=B*n.SQRT2-b[7],b[7]-=b[6],b[22]-=b[7],b[23]-=b[22],B=b[6],b[6]=b[31]-B,b[31]=b[31]+B,B=b[7],b[7]=b[30]-B,b[30]=b[30]+B,B=b[22],b[22]=b[15]-B,b[15]=b[15]+B,B=b[23],b[23]=b[14]-B,b[14]=b[14]+B,B=b[20]-b[8],b[8]+=b[20],b[20]=B*r[I+-10*18+7],B=b[21]-b[9],b[9]+=b[21],b[21]=B*r[I+-10*18+7],B=b[18]-b[10],b[10]+=b[18],b[18]=B*r[I+-12*18+7],B=b[19]-b[11],b[11]+=b[19],b[19]=B*r[I+-12*18+7],B=b[16]-b[12],b[12]+=b[16],b[16]=B*r[I+-14*18+7],B=b[17]-b[13],b[13]+=b[17],b[17]=B*r[I+-14*18+7],B=-b[20]+b[24],b[20]+=b[24],b[24]=B*r[I+-12*18+7],B=-b[21]+b[25],b[21]+=b[25],b[25]=B*r[I+-12*18+7],B=b[4]-b[8],b[4]+=b[8],b[8]=B*r[I+-12*18+7],B=b[5]-b[9],b[5]+=b[9],b[9]=B*r[I+-12*18+7],B=b[0]-b[12],b[0]+=b[12],b[12]=B*r[I+-4*18+7],B=b[1]-b[13],b[1]+=b[13],b[13]=B*r[I+-4*18+7],B=b[16]-b[28],b[16]+=b[28],b[28]=B*r[I+-4*18+7],B=-b[17]+b[29],b[17]+=b[29],b[29]=B*r[I+-4*18+7],B=n.SQRT2*(b[2]-b[10]),b[2]+=b[10],b[10]=B,B=n.SQRT2*(b[3]-b[11]),b[3]+=b[11],b[11]=B,B=n.SQRT2*(-b[18]+b[26]),b[18]+=b[26],b[26]=B-b[18],B=n.SQRT2*(-b[19]+b[27]),b[19]+=b[27],b[27]=B-b[19],B=b[2],b[19]-=b[3],b[3]-=B,b[2]=b[31]-B,b[31]+=B,B=b[3],b[11]-=b[19],b[18]-=B,b[3]=b[30]-B,b[30]+=B,B=b[18],b[27]-=b[11],b[19]-=B,b[18]=b[15]-B,b[15]+=B,B=b[19],b[10]-=B,b[19]=b[14]-B,b[14]+=B,B=b[10],b[11]-=B,b[10]=b[23]-B,b[23]+=B,B=b[11],b[26]-=B,b[11]=b[22]-B,b[22]+=B,B=b[26],b[27]-=B,b[26]=b[7]-B,b[7]+=B,B=b[27],b[27]=b[6]-B,b[6]+=B,B=n.SQRT2*(b[0]-b[4]),b[0]+=b[4],b[4]=B,B=n.SQRT2*(b[1]-b[5]),b[1]+=b[5],b[5]=B,B=n.SQRT2*(b[16]-b[20]),b[16]+=b[20],b[20]=B,B=n.SQRT2*(b[17]-b[21]),b[17]+=b[21],b[21]=B,B=-n.SQRT2*(b[8]-b[12]),b[8]+=b[12],b[12]=B-b[8],B=-n.SQRT2*(b[9]-b[13]),b[9]+=b[13],b[13]=B-b[9],B=-n.SQRT2*(b[25]-b[29]),b[25]+=b[29],b[29]=B-b[25],B=-n.SQRT2*(b[24]+b[28]),b[24]-=b[28],b[28]=B-b[24],B=b[24]-b[16],b[24]=B,B=b[20]-B,b[20]=B,B=b[28]-B,b[28]=B,B=b[25]-b[17],b[25]=B,B=b[21]-B,b[21]=B,B=b[29]-B,b[29]=B,B=b[17]-b[1],b[17]=B,B=b[9]-B,b[9]=B,B=b[25]-B,b[25]=B,B=b[5]-B,b[5]=B,B=b[21]-B,b[21]=B,B=b[13]-B,b[13]=B,B=b[29]-B,b[29]=B,B=b[1]-b[0],b[1]=B,B=b[16]-B,b[16]=B,B=b[17]-B,b[17]=B,B=b[8]-B,b[8]=B,B=b[9]-B,b[9]=B,B=b[24]-B,b[24]=B,B=b[25]-B,b[25]=B,B=b[4]-B,b[4]=B,B=b[5]-B,b[5]=B,B=b[20]-B,b[20]=B,B=b[21]-B,b[21]=B,B=b[12]-B,b[12]=B,B=b[13]-B,b[13]=B,B=b[28]-B,b[28]=B,B=b[29]-B,b[29]=B,B=b[0],b[0]+=b[31],b[31]-=B,B=b[1],b[1]+=b[30],b[30]-=B,B=b[16],b[16]+=b[15],b[15]-=B,B=b[17],b[17]+=b[14],b[14]-=B,B=b[8],b[8]+=b[23],b[23]-=B,B=b[9],b[9]+=b[22],b[22]-=B,B=b[24],b[24]+=b[7],b[7]-=B,B=b[25],b[25]+=b[6],b[6]-=B,B=b[4],b[4]+=b[27],b[27]-=B,B=b[5],b[5]+=b[26],b[26]-=B,B=b[20],b[20]+=b[11],b[11]-=B,B=b[21],b[21]+=b[10],b[10]-=B,B=b[12],b[12]+=b[19],b[19]-=B,B=b[13],b[13]+=b[18],b[18]-=B,B=b[28],b[28]+=b[3],b[3]-=B,B=b[29],b[29]+=b[2],b[2]-=B}}function T(_,E){for(var b=0;b<3;b++){var I,R,O,x,L,F;x=_[E+2*3]*l[a.SHORT_TYPE][0]-_[E+5*3],I=_[E+0*3]*l[a.SHORT_TYPE][2]-_[E+3*3],R=x+I,O=x-I,x=_[E+5*3]*l[a.SHORT_TYPE][0]+_[E+2*3],I=_[E+3*3]*l[a.SHORT_TYPE][2]+_[E+0*3],L=x+I,F=-x+I,I=(_[E+1*3]*l[a.SHORT_TYPE][1]-_[E+4*3])*2069978111953089e-26,x=(_[E+4*3]*l[a.SHORT_TYPE][1]+_[E+1*3])*2069978111953089e-26,_[E+3*0]=R*190752519173728e-25+I,_[E+3*5]=-L*190752519173728e-25+x,O=O*.8660254037844387*1907525191737281e-26,L=L*.5*1907525191737281e-26+x,_[E+3*1]=O-L,_[E+3*2]=O+L,R=R*.5*1907525191737281e-26-I,F=F*.8660254037844387*1907525191737281e-26,_[E+3*3]=R+F,_[E+3*4]=R-F,E++}}function S(_,E,b){var I,R;{var O,x,L,F,D,V,B,P;O=b[17]-b[9],L=b[15]-b[11],F=b[14]-b[12],D=b[0]+b[8],V=b[1]+b[7],B=b[2]+b[6],P=b[3]+b[5],_[E+17]=D+B-P-(V-b[4]),R=(D+B-P)*u[19]+(V-b[4]),I=(O-L-F)*u[18],_[E+5]=I+R,_[E+6]=I-R,x=(b[16]-b[10])*u[18],V=V*u[19]+b[4],I=O*u[12]+x+L*u[13]+F*u[14],R=-D*u[16]+V-B*u[17]+P*u[15],_[E+1]=I+R,_[E+2]=I-R,I=O*u[13]-x-L*u[14]+F*u[12],R=-D*u[17]+V-B*u[15]+P*u[16],_[E+9]=I+R,_[E+10]=I-R,I=O*u[14]-x+L*u[12]-F*u[13],R=D*u[15]-V+B*u[16]-P*u[17],_[E+13]=I+R,_[E+14]=I-R}{var k,U,j,z,Y,te,Z,G;k=b[8]-b[0],j=b[6]-b[2],z=b[5]-b[3],Y=b[17]+b[9],te=b[16]+b[10],Z=b[15]+b[11],G=b[14]+b[12],_[E+0]=Y+Z+G+(te+b[13]),I=(Y+Z+G)*u[19]-(te+b[13]),R=(k-j+z)*u[18],_[E+11]=I+R,_[E+12]=I-R,U=(b[7]-b[1])*u[18],te=b[13]-te*u[19],I=Y*u[15]-te+Z*u[16]+G*u[17],R=k*u[14]+U+j*u[12]+z*u[13],_[E+3]=I+R,_[E+4]=I-R,I=-Y*u[17]+te-Z*u[15]-G*u[16],R=k*u[13]+U-j*u[14]-z*u[12],_[E+7]=I+R,_[E+8]=I-R,I=-Y*u[16]+te-Z*u[17]-G*u[15],R=k*u[12]-U+j*u[13]-z*u[14],_[E+15]=I+R,_[E+16]=I-R}}this.mdct_sub48=function(_,E,b){for(var I=E,R=286,O=0;O<_.channels_out;O++){for(var x=0;x<_.mode_gr;x++){for(var L,F=_.l3_side.tt[x][O],D=F.xr,V=0,B=_.sb_sample[O][1-x],P=0,k=0;k<18/2;k++)for(g(I,R,B[P]),g(I,R+32,B[P+1]),P+=2,R+=64,L=1;L<32;L+=2)B[P-1][L]*=-1;for(L=0;L<32;L++,V+=18){var U=F.block_type,j=_.sb_sample[O][x],z=_.sb_sample[O][1-x];if(F.mixed_block_flag!=0&&L<2&&(U=0),_.amp_filter[L]<1e-12)s.fill(D,V+0,V+18,0);else{if(_.amp_filter[L]<1)for(var k=0;k<18;k++)z[k][f[L]]*=_.amp_filter[L];if(U==a.SHORT_TYPE){for(var k=-12/4;k<0;k++){var Y=l[a.SHORT_TYPE][k+3];D[V+k*3+9]=j[9+k][f[L]]*Y-j[8-k][f[L]],D[V+k*3+18]=j[14-k][f[L]]*Y+j[15+k][f[L]],D[V+k*3+10]=j[15+k][f[L]]*Y-j[14-k][f[L]],D[V+k*3+19]=z[2-k][f[L]]*Y+z[3+k][f[L]],D[V+k*3+11]=z[3+k][f[L]]*Y-z[2-k][f[L]],D[V+k*3+20]=z[8-k][f[L]]*Y+z[9+k][f[L]]}T(D,V)}else{for(var te=o(18),k=-36/4;k<0;k++){var Z,G;Z=l[U][k+27]*z[k+9][f[L]]+l[U][k+36]*z[8-k][f[L]],G=l[U][k+9]*j[k+9][f[L]]-l[U][k+18]*j[8-k][f[L]],te[k+9]=Z-G*c[3+k+9],te[k+18]=Z*c[3+k+9]+G}S(D,V,te)}}if(U!=a.SHORT_TYPE&&L!=0)for(var k=7;k>=0;--k){var H,W;H=D[V+k]*d[20+k]+D[V+-1-k]*m[28+k],W=D[V+k]*m[28+k]-D[V+-1-k]*d[20+k],D[V+-1-k]=H,D[V+k]=W}}}if(I=b,R=286,_.mode_gr==1)for(var J=0;J<18;J++)t.arraycopy(_.sb_sample[O][1][J],0,_.sb_sample[O][0][J],0,32)}}}return mm=i,mm}var fm,pE;function AA(){if(pE)return fm;pE=1;var e=Ws(),t=Fn,n=t.System,s=t.new_float,o=t.new_float_n;function a(){this.l=s(e.SBMAX_l),this.s=o([e.SBMAX_s,3]);var i=this;this.assign=function(r){n.arraycopy(r.l,0,i.l,0,e.SBMAX_l);for(var l=0;l<e.SBMAX_s;l++)for(var c=0;c<3;c++)i.s[l][c]=r.s[l][c]}}return fm=a,fm}var gm,hE;function Q0e(){if(hE)return gm;hE=1;var e=AA();function t(){this.thm=new e,this.en=new e}return gm=t,gm}function Za(e){var t=e;this.ordinal=function(){return t}}Za.STEREO=new Za(0);Za.JOINT_STEREO=new Za(1);Za.DUAL_CHANNEL=new Za(2);Za.MONO=new Za(3);Za.NOT_SET=new Za(4);var Wc=Za,_m,mE;function Ws(){if(mE)return _m;mE=1;var e=Fn,t=e.System,n=e.VbrMode,s=e.new_array_n,o=e.new_float,a=e.new_float_n,i=e.new_int,r=e.assert;l.ENCDELAY=576,l.POSTDELAY=1152,l.MDCTDELAY=48,l.FFTOFFSET=224+l.MDCTDELAY,l.DECDELAY=528,l.SBLIMIT=32,l.CBANDS=64,l.SBPSY_l=21,l.SBPSY_s=12,l.SBMAX_l=22,l.SBMAX_s=13,l.PSFB21=6,l.PSFB12=6,l.BLKSIZE=1024,l.HBLKSIZE=l.BLKSIZE/2+1,l.BLKSIZE_s=256,l.HBLKSIZE_s=l.BLKSIZE_s/2+1,l.NORM_TYPE=0,l.START_TYPE=1,l.SHORT_TYPE=2,l.STOP_TYPE=3,l.MPG_MD_LR_LR=0,l.MPG_MD_LR_I=1,l.MPG_MD_MS_LR=2,l.MPG_MD_MS_I=3,l.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function l(){var c=Z0e(),u=Q0e(),d=Wc,m=l.FFTOFFSET,f=l.MPG_MD_MS_LR,g=null;this.psy=null;var T=null,S=null,_=null;this.setModules=function(O,x,L,F){g=O,this.psy=x,T=x,S=F,_=L};var E=new c;function b(O){var x,L;if(O.ATH.useAdjust==0){O.ATH.adjust=1;return}if(L=O.loudness_sq[0][0],x=O.loudness_sq[1][0],O.channels_out==2?(L+=O.loudness_sq[0][1],x+=O.loudness_sq[1][1]):(L+=L,x+=x),O.mode_gr==2&&(L=Math.max(L,x)),L*=.5,L*=O.ATH.aaSensitivityP,L>.03125)O.ATH.adjust>=1?O.ATH.adjust=1:O.ATH.adjust<O.ATH.adjustLimit&&(O.ATH.adjust=O.ATH.adjustLimit),O.ATH.adjustLimit=1;else{var F=31.98*L+625e-6;O.ATH.adjust>=F?(O.ATH.adjust*=F*.075+.925,O.ATH.adjust<F&&(O.ATH.adjust=F)):O.ATH.adjustLimit>=F?O.ATH.adjust=F:O.ATH.adjust<O.ATH.adjustLimit&&(O.ATH.adjust=O.ATH.adjustLimit),O.ATH.adjustLimit=F}}function I(O){var x,L;for(r(0<=O.bitrate_index&&O.bitrate_index<16),r(0<=O.mode_ext&&O.mode_ext<4),O.bitrate_stereoMode_Hist[O.bitrate_index][4]++,O.bitrate_stereoMode_Hist[15][4]++,O.channels_out==2&&(O.bitrate_stereoMode_Hist[O.bitrate_index][O.mode_ext]++,O.bitrate_stereoMode_Hist[15][O.mode_ext]++),x=0;x<O.mode_gr;++x)for(L=0;L<O.channels_out;++L){var F=O.l3_side.tt[x][L].block_type|0;O.l3_side.tt[x][L].mixed_block_flag!=0&&(F=4),O.bitrate_blockType_Hist[O.bitrate_index][F]++,O.bitrate_blockType_Hist[O.bitrate_index][5]++,O.bitrate_blockType_Hist[15][F]++,O.bitrate_blockType_Hist[15][5]++}}function R(O,x){var L=O.internal_flags,F,D;if(L.lame_encode_frame_init==0){var V,B,P=o(2014),k=o(2014);for(L.lame_encode_frame_init=1,V=0,B=0;V<286+576*(1+L.mode_gr);++V)V<576*L.mode_gr?(P[V]=0,L.channels_out==2&&(k[V]=0)):(P[V]=x[0][B],L.channels_out==2&&(k[V]=x[1][B]),++B);for(D=0;D<L.mode_gr;D++)for(F=0;F<L.channels_out;F++)L.l3_side.tt[D][F].block_type=l.SHORT_TYPE;E.mdct_sub48(L,P,k),r(576>=l.FFTOFFSET),r(L.mf_size>=l.BLKSIZE+O.framesize-l.FFTOFFSET),r(L.mf_size>=512+O.framesize-32)}}this.lame_encode_mp3_frame=function(O,x,L,F,D,V){var B,P=s([2,2]);P[0][0]=new u,P[0][1]=new u,P[1][0]=new u,P[1][1]=new u;var k=s([2,2]);k[0][0]=new u,k[0][1]=new u,k[1][0]=new u,k[1][1]=new u;var U,j=[null,null],z=O.internal_flags,Y=a([2,4]),te=[.5,.5],Z=[[0,0],[0,0]],G=[[0,0],[0,0]],H,W,J;if(j[0]=x,j[1]=L,z.lame_encode_frame_init==0&&R(O,j),z.padding=0,(z.slot_lag-=z.frac_SpF)<0&&(z.slot_lag+=O.out_samplerate,z.padding=1),z.psymodel!=0){var ee,ge=[null,null],Ee=0,le=i(2);for(J=0;J<z.mode_gr;J++){for(W=0;W<z.channels_out;W++)ge[W]=j[W],Ee=576+J*576-l.FFTOFFSET;if(O.VBR==n.vbr_mtrh||O.VBR==n.vbr_mt?ee=T.L3psycho_anal_vbr(O,ge,Ee,J,P,k,Z[J],G[J],Y[J],le):ee=T.L3psycho_anal_ns(O,ge,Ee,J,P,k,Z[J],G[J],Y[J],le),ee!=0)return-4;for(O.mode==d.JOINT_STEREO&&(te[J]=Y[J][2]+Y[J][3],te[J]>0&&(te[J]=Y[J][3]/te[J])),W=0;W<z.channels_out;W++){var _e=z.l3_side.tt[J][W];_e.block_type=le[W],_e.mixed_block_flag=0}}}else for(J=0;J<z.mode_gr;J++)for(W=0;W<z.channels_out;W++)z.l3_side.tt[J][W].block_type=l.NORM_TYPE,z.l3_side.tt[J][W].mixed_block_flag=0,G[J][W]=Z[J][W]=700;if(b(z),E.mdct_sub48(z,j[0],j[1]),z.mode_ext=l.MPG_MD_LR_LR,O.force_ms)z.mode_ext=l.MPG_MD_MS_LR;else if(O.mode==d.JOINT_STEREO){var $e=0,He=0;for(J=0;J<z.mode_gr;J++)for(W=0;W<z.channels_out;W++)$e+=G[J][W],He+=Z[J][W];if($e<=1*He){var Je=z.l3_side.tt[0],Xe=z.l3_side.tt[z.mode_gr-1];Je[0].block_type==Je[1].block_type&&Xe[0].block_type==Xe[1].block_type&&(z.mode_ext=l.MPG_MD_MS_LR)}}if(z.mode_ext==f?(U=k,H=G):(U=P,H=Z),O.analysis&&z.pinfo!=null)for(J=0;J<z.mode_gr;J++)for(W=0;W<z.channels_out;W++)z.pinfo.ms_ratio[J]=z.ms_ratio[J],z.pinfo.ms_ener_ratio[J]=te[J],z.pinfo.blocktype[J][W]=z.l3_side.tt[J][W].block_type,z.pinfo.pe[J][W]=H[J][W],t.arraycopy(z.l3_side.tt[J][W].xr,0,z.pinfo.xr[J][W],0,576),z.mode_ext==f&&(z.pinfo.ers[J][W]=z.pinfo.ers[J][W+2],t.arraycopy(z.pinfo.energy[J][W+2],0,z.pinfo.energy[J][W],0,z.pinfo.energy[J][W].length));if(O.VBR==n.vbr_off||O.VBR==n.vbr_abr){var Qe,rt;for(Qe=0;Qe<18;Qe++)z.nsPsy.pefirbuf[Qe]=z.nsPsy.pefirbuf[Qe+1];for(rt=0,J=0;J<z.mode_gr;J++)for(W=0;W<z.channels_out;W++)rt+=H[J][W];for(z.nsPsy.pefirbuf[18]=rt,rt=z.nsPsy.pefirbuf[9],Qe=0;Qe<9;Qe++)rt+=(z.nsPsy.pefirbuf[Qe]+z.nsPsy.pefirbuf[18-Qe])*l.fircoef[Qe];for(rt=670*5*z.mode_gr*z.channels_out/rt,J=0;J<z.mode_gr;J++)for(W=0;W<z.channels_out;W++)H[J][W]*=rt}if(z.iteration_loop.iteration_loop(O,H,te,U),g.format_bitstream(O),B=g.copy_buffer(z,F,D,V,1),O.bWriteVbrTag&&S.addVbrFrame(O),O.analysis&&z.pinfo!=null){for(W=0;W<z.channels_out;W++){var at;for(at=0;at<m;at++)z.pinfo.pcmdata[W][at]=z.pinfo.pcmdata[W][at+O.framesize];for(at=m;at<1600;at++)z.pinfo.pcmdata[W][at]=j[W][at-m]}_.set_frame_pinfo(O,U)}return I(z),B}}return _m=l,_m}var IA=Fn,fE=IA.Util,gE=IA.new_float,ss=Ws();function J0e(){var e=gE(ss.BLKSIZE),t=gE(ss.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function s(a,i,r){var l=0,c,u,d;r<<=1;var m=i+r;c=4;do{var f,g,T,S,_,E,b;b=c>>1,S=c,_=c<<1,E=_+S,c=_<<1,u=i,d=u+b;do{var I,R,O,x;R=a[u+0]-a[u+S],I=a[u+0]+a[u+S],x=a[u+_]-a[u+E],O=a[u+_]+a[u+E],a[u+_]=I-O,a[u+0]=I+O,a[u+E]=R-x,a[u+S]=R+x,R=a[d+0]-a[d+S],I=a[d+0]+a[d+S],x=fE.SQRT2*a[d+E],O=fE.SQRT2*a[d+_],a[d+_]=I-O,a[d+0]=I+O,a[d+E]=R-x,a[d+S]=R+x,d+=c,u+=c}while(u<m);for(g=n[l+0],f=n[l+1],T=1;T<b;T++){var L,F;L=1-2*f*f,F=2*f*g,u=i+T,d=i+S-T;do{var D,V,B,I,R,P,O,k,x,U;V=F*a[u+S]-L*a[d+S],D=L*a[u+S]+F*a[d+S],R=a[u+0]-D,I=a[u+0]+D,P=a[d+0]-V,B=a[d+0]+V,V=F*a[u+E]-L*a[d+E],D=L*a[u+E]+F*a[d+E],x=a[u+_]-D,O=a[u+_]+D,U=a[d+_]-V,k=a[d+_]+V,V=f*O-g*U,D=g*O+f*U,a[u+_]=I-D,a[u+0]=I+D,a[d+E]=P-V,a[d+S]=P+V,V=g*k-f*x,D=f*k+g*x,a[d+_]=B-D,a[d+0]=B+D,a[u+E]=R-V,a[u+S]=R+V,d+=c,u+=c}while(u<m);L=g,g=L*n[l+0]-f*n[l+1],f=L*n[l+1]+f*n[l+0]}l+=2}while(c<r)}var o=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(a,i,r,l,c){for(var u=0;u<3;u++){var d=ss.BLKSIZE_s/2,m=65535&576/3*(u+1),f=ss.BLKSIZE_s/8-1;do{var g,T,S,_,E,b=o[f<<2]&255;g=t[b]*l[r][c+b+m],E=t[127-b]*l[r][c+b+m+128],T=g-E,g=g+E,S=t[b+64]*l[r][c+b+m+64],E=t[63-b]*l[r][c+b+m+192],_=S-E,S=S+E,d-=4,i[u][d+0]=g+S,i[u][d+2]=g-S,i[u][d+1]=T+_,i[u][d+3]=T-_,g=t[b+1]*l[r][c+b+m+1],E=t[126-b]*l[r][c+b+m+129],T=g-E,g=g+E,S=t[b+65]*l[r][c+b+m+65],E=t[62-b]*l[r][c+b+m+193],_=S-E,S=S+E,i[u][d+ss.BLKSIZE_s/2+0]=g+S,i[u][d+ss.BLKSIZE_s/2+2]=g-S,i[u][d+ss.BLKSIZE_s/2+1]=T+_,i[u][d+ss.BLKSIZE_s/2+3]=T-_}while(--f>=0);s(i[u],d,ss.BLKSIZE_s/2)}},this.fft_long=function(a,i,r,l,c){var u=ss.BLKSIZE/8-1,d=ss.BLKSIZE/2;do{var m,f,g,T,S,_=o[u]&255;m=e[_]*l[r][c+_],S=e[_+512]*l[r][c+_+512],f=m-S,m=m+S,g=e[_+256]*l[r][c+_+256],S=e[_+768]*l[r][c+_+768],T=g-S,g=g+S,d-=4,i[d+0]=m+g,i[d+2]=m-g,i[d+1]=f+T,i[d+3]=f-T,m=e[_+1]*l[r][c+_+1],S=e[_+513]*l[r][c+_+513],f=m-S,m=m+S,g=e[_+257]*l[r][c+_+257],S=e[_+769]*l[r][c+_+769],T=g-S,g=g+S,i[d+ss.BLKSIZE/2+0]=m+g,i[d+ss.BLKSIZE/2+2]=m-g,i[d+ss.BLKSIZE/2+1]=f+T,i[d+ss.BLKSIZE/2+3]=f-T}while(--u>=0);s(i,d,ss.BLKSIZE/2)},this.init_fft=function(a){for(var i=0;i<ss.BLKSIZE;i++)e[i]=.42-.5*Math.cos(2*Math.PI*(i+.5)/ss.BLKSIZE)+.08*Math.cos(4*Math.PI*(i+.5)/ss.BLKSIZE);for(var i=0;i<ss.BLKSIZE_s/2;i++)t[i]=.5*(1-Math.cos(2*Math.PI*(i+.5)/ss.BLKSIZE_s))}}var eTe=J0e,Qo=Fn,Cr=Qo.VbrMode,_E=Qo.Float,Or=Qo.ShortBlock,ia=Qo.Util,tTe=Qo.Arrays,ps=Qo.new_float,Ia=Qo.new_float_n,Bi=Qo.new_int,Vt=Qo.assert,nTe=eTe,je=Ws();function sTe(){var e=Wc,t=new nTe,n=2.302585092994046,s=2,o=16,a=2,i=16,r=.34,l=1/(14752*14752)/(je.BLKSIZE/2),c=.01,u=.8,d=.6,m=.3,f=3.5,g=21,T=.2302585093;function S(Q,ne){for(var ue=0,ve=0;ve<je.BLKSIZE/2;++ve)ue+=Q[ve]*ne.ATH.eql_w[ve];return ue*=l,ue}function _(Q,ne,ue,ve,we,he,Te,Ie,ye,Be,xe){var Ge=Q.internal_flags;if(ye<2)t.fft_long(Ge,ve[we],ye,Be,xe),t.fft_short(Ge,he[Te],ye,Be,xe);else if(ye==2){for(var ot=je.BLKSIZE-1;ot>=0;--ot){var Tt=ve[we+0][ot],Ze=ve[we+1][ot];ve[we+0][ot]=(Tt+Ze)*ia.SQRT2*.5,ve[we+1][ot]=(Tt-Ze)*ia.SQRT2*.5}for(var St=2;St>=0;--St)for(var ot=je.BLKSIZE_s-1;ot>=0;--ot){var Tt=he[Te+0][St][ot],Ze=he[Te+1][St][ot];he[Te+0][St][ot]=(Tt+Ze)*ia.SQRT2*.5,he[Te+1][St][ot]=(Tt-Ze)*ia.SQRT2*.5}}ne[0]=ve[we+0][0],ne[0]*=ne[0];for(var ot=je.BLKSIZE/2-1;ot>=0;--ot){var Ve=ve[we+0][je.BLKSIZE/2-ot],ft=ve[we+0][je.BLKSIZE/2+ot];ne[je.BLKSIZE/2-ot]=(Ve*Ve+ft*ft)*.5}for(var St=2;St>=0;--St){ue[St][0]=he[Te+0][St][0],ue[St][0]*=ue[St][0];for(var ot=je.BLKSIZE_s/2-1;ot>=0;--ot){var Ve=he[Te+0][St][je.BLKSIZE_s/2-ot],ft=he[Te+0][St][je.BLKSIZE_s/2+ot];ue[St][je.BLKSIZE_s/2-ot]=(Ve*Ve+ft*ft)*.5}}{for(var Bt=0,ot=11;ot<je.HBLKSIZE;ot++)Bt+=ne[ot];Ge.tot_ener[ye]=Bt}if(Q.analysis){for(var ot=0;ot<je.HBLKSIZE;ot++)Ge.pinfo.energy[Ie][ye][ot]=Ge.pinfo.energy_save[ye][ot],Ge.pinfo.energy_save[ye][ot]=ne[ot];Ge.pinfo.pe[Ie][ye]=Ge.pe[ye]}Q.athaa_loudapprox==2&&ye<2&&(Ge.loudness_sq[Ie][ye]=Ge.loudness_sq_save[ye],Ge.loudness_sq_save[ye]=S(ne,Ge))}var E=8,b=23,I=15,R,O,x,L=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function F(){R=Math.pow(10,(E+1)/16),O=Math.pow(10,(b+1)/16),x=Math.pow(10,I/10)}var D=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],V=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],B=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function P(Q,ne,ue,ve,we,he){var Te;if(ne>Q)if(ne<Q*O)Te=ne/Q;else return Q+ne;else{if(Q>=ne*O)return Q+ne;Te=Q/ne}if(Q+=ne,ve+3<=6){if(Te>=R)return Q;var Ie=0|ia.FAST_LOG10_X(Te,16);return Q*V[Ie]}var Ie=0|ia.FAST_LOG10_X(Te,16);if(ne=we.ATH.cb_l[ue]*we.ATH.adjust,Q<x*ne){if(Q>ne){var ye,Be;return ye=1,Ie<=13&&(ye=B[Ie]),Be=ia.FAST_LOG10_X(Q/ne,10/15),Q*((D[Ie]-ye)*Be+ye)}return Ie>13?Q:Q*B[Ie]}return Q*D[Ie]}var k=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function U(Q,ne,ue){var ve;if(Q<0&&(Q=0),ne<0&&(ne=0),Q<=0)return ne;if(ne<=0)return Q;if(ne>Q?ve=ne/Q:ve=Q/ne,-2<=ue&&ue<=2){if(ve>=R)return Q+ne;var we=0|ia.FAST_LOG10_X(ve,16);return(Q+ne)*k[we]}return ve<O?Q+ne:(Q<ne&&(Q=ne),Q)}function j(Q,ne){var ue=Q.internal_flags;if(ue.channels_out>1){for(var ve=0;ve<je.SBMAX_l;ve++){var we=ue.thm[0].l[ve],he=ue.thm[1].l[ve];ue.thm[0].l[ve]+=he*ne,ue.thm[1].l[ve]+=we*ne}for(var ve=0;ve<je.SBMAX_s;ve++)for(var Te=0;Te<3;Te++){var we=ue.thm[0].s[ve][Te],he=ue.thm[1].s[ve][Te];ue.thm[0].s[ve][Te]+=he*ne,ue.thm[1].s[ve][Te]+=we*ne}}}function z(Q){for(var ne=0;ne<je.SBMAX_l;ne++)if(!(Q.thm[0].l[ne]>1.58*Q.thm[1].l[ne]||Q.thm[1].l[ne]>1.58*Q.thm[0].l[ne])){var ue=Q.mld_l[ne]*Q.en[3].l[ne],ve=Math.max(Q.thm[2].l[ne],Math.min(Q.thm[3].l[ne],ue));ue=Q.mld_l[ne]*Q.en[2].l[ne];var we=Math.max(Q.thm[3].l[ne],Math.min(Q.thm[2].l[ne],ue));Q.thm[2].l[ne]=ve,Q.thm[3].l[ne]=we}for(var ne=0;ne<je.SBMAX_s;ne++)for(var he=0;he<3;he++)if(!(Q.thm[0].s[ne][he]>1.58*Q.thm[1].s[ne][he]||Q.thm[1].s[ne][he]>1.58*Q.thm[0].s[ne][he])){var ue=Q.mld_s[ne]*Q.en[3].s[ne][he],ve=Math.max(Q.thm[2].s[ne][he],Math.min(Q.thm[3].s[ne][he],ue));ue=Q.mld_s[ne]*Q.en[2].s[ne][he];var we=Math.max(Q.thm[3].s[ne][he],Math.min(Q.thm[2].s[ne][he],ue));Q.thm[2].s[ne][he]=ve,Q.thm[3].s[ne][he]=we}}function Y(Q,ne,ue){var ve=ne,we=Math.pow(10,ue);ne*=2,ve*=2;for(var he=0;he<je.SBMAX_l;he++){var Te,Ie,ye,Be;if(Be=Q.ATH.cb_l[Q.bm_l[he]]*we,Te=Math.min(Math.max(Q.thm[0].l[he],Be),Math.max(Q.thm[1].l[he],Be)),Ie=Math.max(Q.thm[2].l[he],Be),ye=Math.max(Q.thm[3].l[he],Be),Te*ne<Ie+ye){var xe=Te*ve/(Ie+ye);Ie*=xe,ye*=xe}Q.thm[2].l[he]=Math.min(Ie,Q.thm[2].l[he]),Q.thm[3].l[he]=Math.min(ye,Q.thm[3].l[he])}we*=je.BLKSIZE_s/je.BLKSIZE;for(var he=0;he<je.SBMAX_s;he++)for(var Ge=0;Ge<3;Ge++){var Te,Ie,ye,Be;if(Be=Q.ATH.cb_s[Q.bm_s[he]]*we,Te=Math.min(Math.max(Q.thm[0].s[he][Ge],Be),Math.max(Q.thm[1].s[he][Ge],Be)),Ie=Math.max(Q.thm[2].s[he][Ge],Be),ye=Math.max(Q.thm[3].s[he][Ge],Be),Te*ne<Ie+ye){var xe=Te*ne/(Ie+ye);Ie*=xe,ye*=xe}Q.thm[2].s[he][Ge]=Math.min(Q.thm[2].s[he][Ge],Ie),Q.thm[3].s[he][Ge]=Math.min(Q.thm[3].s[he][Ge],ye)}}function te(Q,ne,ue,ve,we){var he,Te,Ie=0,ye=0;for(he=Te=0;he<je.SBMAX_s;++Te,++he){for(var Be=Q.bo_s[he],xe=Q.npart_s,Ge=Be<xe?Be:xe;Te<Ge;)Vt(ne[Te]>=0),Vt(ue[Te]>=0),Ie+=ne[Te],ye+=ue[Te],Te++;if(Q.en[ve].s[he][we]=Ie,Q.thm[ve].s[he][we]=ye,Te>=xe){++he;break}Vt(ne[Te]>=0),Vt(ue[Te]>=0);{var ot=Q.PSY.bo_s_weight[he],Tt=1-ot;Ie=ot*ne[Te],ye=ot*ue[Te],Q.en[ve].s[he][we]+=Ie,Q.thm[ve].s[he][we]+=ye,Ie=Tt*ne[Te],ye=Tt*ue[Te]}}for(;he<je.SBMAX_s;++he)Q.en[ve].s[he][we]=0,Q.thm[ve].s[he][we]=0}function Z(Q,ne,ue,ve){var we,he,Te=0,Ie=0;for(we=he=0;we<je.SBMAX_l;++he,++we){for(var ye=Q.bo_l[we],Be=Q.npart_l,xe=ye<Be?ye:Be;he<xe;)Vt(ne[he]>=0),Vt(ue[he]>=0),Te+=ne[he],Ie+=ue[he],he++;if(Q.en[ve].l[we]=Te,Q.thm[ve].l[we]=Ie,he>=Be){++we;break}Vt(ne[he]>=0),Vt(ue[he]>=0);{var Ge=Q.PSY.bo_l_weight[we],ot=1-Ge;Te=Ge*ne[he],Ie=Ge*ue[he],Q.en[ve].l[we]+=Te,Q.thm[ve].l[we]+=Ie,Te=ot*ne[he],Ie=ot*ue[he]}}for(;we<je.SBMAX_l;++we)Q.en[ve].l[we]=0,Q.thm[ve].l[we]=0}function G(Q,ne,ue,ve,we,he){var Te=Q.internal_flags,Ie,ye;for(ye=Ie=0;ye<Te.npart_s;++ye){for(var Be=0,xe=Te.numlines_s[ye],Ge=0;Ge<xe;++Ge,++Ie){var ot=ne[he][Ie];Be+=ot}ue[ye]=Be}for(Vt(ye==Te.npart_s),Ie=ye=0;ye<Te.npart_s;ye++){var Tt=Te.s3ind_s[ye][0],Ze=Te.s3_ss[Ie++]*ue[Tt];for(++Tt;Tt<=Te.s3ind_s[ye][1];)Ze+=Te.s3_ss[Ie]*ue[Tt],++Ie,++Tt;{var St=a*Te.nb_s1[we][ye];ve[ye]=Math.min(Ze,St)}if(Te.blocktype_old[we&1]==je.SHORT_TYPE){var St=i*Te.nb_s2[we][ye],Ve=ve[ye];ve[ye]=Math.min(St,Ve)}Te.nb_s2[we][ye]=Te.nb_s1[we][ye],Te.nb_s1[we][ye]=Ze,Vt(ve[ye]>=0)}for(;ye<=je.CBANDS;++ye)ue[ye]=0,ve[ye]=0}function H(Q,ne,ue,ve){var we=Q.internal_flags;Q.short_blocks==Or.short_block_coupled&&!(ne[0]!=0&&ne[1]!=0)&&(ne[0]=ne[1]=0);for(var he=0;he<we.channels_out;he++)ve[he]=je.NORM_TYPE,Q.short_blocks==Or.short_block_dispensed&&(ne[he]=1),Q.short_blocks==Or.short_block_forced&&(ne[he]=0),ne[he]!=0?(Vt(we.blocktype_old[he]!=je.START_TYPE),we.blocktype_old[he]==je.SHORT_TYPE&&(ve[he]=je.STOP_TYPE)):(ve[he]=je.SHORT_TYPE,we.blocktype_old[he]==je.NORM_TYPE&&(we.blocktype_old[he]=je.START_TYPE),we.blocktype_old[he]==je.STOP_TYPE&&(we.blocktype_old[he]=je.SHORT_TYPE)),ue[he]=we.blocktype_old[he],we.blocktype_old[he]=ve[he]}function W(Q,ne,ue){return ue>=1?Q:ue<=0?ne:ne>0?Math.pow(Q/ne,ue)*ne:0}var J=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function ee(Q,ne){for(var ue=309.07,ve=0;ve<je.SBMAX_s-1;ve++)for(var we=0;we<3;we++){var he=Q.thm.s[ve][we];if(he>0){var Te=he*ne,Ie=Q.en.s[ve][we];Ie>Te&&(Ie>Te*1e10?ue+=J[ve]*(10*n):ue+=J[ve]*ia.FAST_LOG10(Ie/Te))}}return ue}var ge=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function Ee(Q,ne){for(var ue=281.0575,ve=0;ve<je.SBMAX_l-1;ve++){var we=Q.thm.l[ve];if(we>0){var he=we*ne,Te=Q.en.l[ve];Te>he&&(Te>he*1e10?ue+=ge[ve]*(10*n):ue+=ge[ve]*ia.FAST_LOG10(Te/he))}}return ue}function le(Q,ne,ue,ve,we){var he,Te;for(he=Te=0;he<Q.npart_l;++he){var Ie=0,ye=0,Be;for(Be=0;Be<Q.numlines_l[he];++Be,++Te){var xe=ne[Te];Ie+=xe,ye<xe&&(ye=xe)}ue[he]=Ie,ve[he]=ye,we[he]=Ie*Q.rnumlines_l[he],Vt(Q.rnumlines_l[he]>=0),Vt(ue[he]>=0),Vt(ve[he]>=0),Vt(we[he]>=0)}}function _e(Q,ne,ue,ve){var we=L.length-1,he=0,Te=ue[he]+ue[he+1];if(Te>0){var Ie=ne[he];Ie<ne[he+1]&&(Ie=ne[he+1]),Vt(Q.numlines_l[he]+Q.numlines_l[he+1]-1>0),Te=20*(Ie*2-Te)/(Te*(Q.numlines_l[he]+Q.numlines_l[he+1]-1));var ye=0|Te;ye>we&&(ye=we),ve[he]=ye}else ve[he]=0;for(he=1;he<Q.npart_l-1;he++)if(Te=ue[he-1]+ue[he]+ue[he+1],Te>0){var Ie=ne[he-1];Ie<ne[he]&&(Ie=ne[he]),Ie<ne[he+1]&&(Ie=ne[he+1]),Vt(Q.numlines_l[he-1]+Q.numlines_l[he]+Q.numlines_l[he+1]-1>0),Te=20*(Ie*3-Te)/(Te*(Q.numlines_l[he-1]+Q.numlines_l[he]+Q.numlines_l[he+1]-1));var ye=0|Te;ye>we&&(ye=we),ve[he]=ye}else ve[he]=0;if(Vt(he==Q.npart_l-1),Te=ue[he-1]+ue[he],Te>0){var Ie=ne[he-1];Ie<ne[he]&&(Ie=ne[he]),Vt(Q.numlines_l[he-1]+Q.numlines_l[he]-1>0),Te=20*(Ie*2-Te)/(Te*(Q.numlines_l[he-1]+Q.numlines_l[he]-1));var ye=0|Te;ye>we&&(ye=we),ve[he]=ye}else ve[he]=0;Vt(he==Q.npart_l-1)}var $e=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(Q,ne,ue,ve,we,he,Te,Ie,ye,Be){var xe=Q.internal_flags,Ge=Ia([2,je.BLKSIZE]),ot=Ia([2,3,je.BLKSIZE_s]),Tt=ps(je.CBANDS+1),Ze=ps(je.CBANDS+1),St=ps(je.CBANDS+2),Ve=Bi(2),ft=Bi(2),Bt,et,gt,tt,Ct,vn,ut,$t,Mt=Ia([2,576]),Tn,Os=Bi(je.CBANDS+2),$n=Bi(je.CBANDS+2);for(tTe.fill($n,0),Bt=xe.channels_out,Q.mode==e.JOINT_STEREO&&(Bt=4),Q.VBR==Cr.vbr_off?Tn=xe.ResvMax==0?0:xe.ResvSize/xe.ResvMax*.5:Q.VBR==Cr.vbr_rh||Q.VBR==Cr.vbr_mtrh||Q.VBR==Cr.vbr_mt?Tn=.6:Tn=1,et=0;et<xe.channels_out;et++){var Sn=ne[et],_s=ue+576-350-g+192;for(tt=0;tt<576;tt++){var Ns,Es;for(Ns=Sn[_s+tt+10],Es=0,Ct=0;Ct<(g-1)/2-1;Ct+=2)Ns+=$e[Ct]*(Sn[_s+tt+Ct]+Sn[_s+tt+g-Ct]),Es+=$e[Ct+1]*(Sn[_s+tt+Ct+1]+Sn[_s+tt+g-Ct-1]);Mt[et][tt]=Ns+Es}we[ve][et].en.assign(xe.en[et]),we[ve][et].thm.assign(xe.thm[et]),Bt>2&&(he[ve][et].en.assign(xe.en[et+2]),he[ve][et].thm.assign(xe.thm[et+2]))}for(et=0;et<Bt;et++){var na,Ls,us=ps(12),sa=[0,0,0,0],to=ps(12),No=1,mr,fr=ps(je.CBANDS),Jo=ps(je.CBANDS),dn=[0,0,0,0],gr=ps(je.HBLKSIZE),_r=Ia([3,je.HBLKSIZE_s]);for(Vt(xe.npart_s<=je.CBANDS),Vt(xe.npart_l<=je.CBANDS),tt=0;tt<3;tt++)us[tt]=xe.nsPsy.last_en_subshort[et][tt+6],Vt(xe.nsPsy.last_en_subshort[et][tt+4]>0),to[tt]=us[tt]/xe.nsPsy.last_en_subshort[et][tt+4],sa[0]+=us[tt];if(et==2)for(tt=0;tt<576;tt++){var nt,vt;nt=Mt[0][tt],vt=Mt[1][tt],Mt[0][tt]=nt+vt,Mt[1][tt]=nt-vt}{var Yt=Mt[et&1],ds=0;for(tt=0;tt<9;tt++){for(var Pa=ds+64,In=1;ds<Pa;ds++)In<Math.abs(Yt[ds])&&(In=Math.abs(Yt[ds]));xe.nsPsy.last_en_subshort[et][tt]=us[tt+3]=In,sa[1+tt/3]+=In,In>us[tt+3-2]?(Vt(us[tt+3-2]>0),In=In/us[tt+3-2]):us[tt+3-2]>In*10?In=us[tt+3-2]/(In*10):In=0,to[tt+3]=In}}if(Q.analysis){var Sa=to[0];for(tt=1;tt<12;tt++)Sa<to[tt]&&(Sa=to[tt]);xe.pinfo.ers[ve][et]=xe.pinfo.ers_save[et],xe.pinfo.ers_save[et]=Sa}for(mr=et==3?xe.nsPsy.attackthre_s:xe.nsPsy.attackthre,tt=0;tt<12;tt++)dn[tt/3]==0&&to[tt]>mr&&(dn[tt/3]=tt%3+1);for(tt=1;tt<4;tt++){var xi;sa[tt-1]>sa[tt]?(Vt(sa[tt]>0),xi=sa[tt-1]/sa[tt]):(Vt(sa[tt-1]>0),xi=sa[tt]/sa[tt-1]),xi<1.7&&(dn[tt]=0,tt==1&&(dn[0]=0))}for(dn[0]!=0&&xe.nsPsy.lastAttacks[et]!=0&&(dn[0]=0),(xe.nsPsy.lastAttacks[et]==3||dn[0]+dn[1]+dn[2]+dn[3]!=0)&&(No=0,dn[1]!=0&&dn[0]!=0&&(dn[1]=0),dn[2]!=0&&dn[1]!=0&&(dn[2]=0),dn[3]!=0&&dn[2]!=0&&(dn[3]=0)),et<2?ft[et]=No:No==0&&(ft[0]=ft[1]=0),ye[et]=xe.tot_ener[et],Ls=ot,na=Ge,_(Q,gr,_r,na,et&1,Ls,et&1,ve,et,ne,ue),le(xe,gr,Tt,fr,Jo),_e(xe,fr,Jo,Os),$t=0;$t<3;$t++){var ml,ks;for(G(Q,_r,Ze,St,et,$t),te(xe,Ze,St,et,$t),ut=0;ut<je.SBMAX_s;ut++){if(ks=xe.thm[et].s[ut][$t],ks*=u,dn[$t]>=2||dn[$t+1]==1){var vr=$t!=0?$t-1:2,In=W(xe.thm[et].s[ut][vr],ks,d*Tn);ks=Math.min(ks,In)}if(dn[$t]==1){var vr=$t!=0?$t-1:2,In=W(xe.thm[et].s[ut][vr],ks,m*Tn);ks=Math.min(ks,In)}else if($t!=0&&dn[$t-1]==3||$t==0&&xe.nsPsy.lastAttacks[et]==3){var vr=$t!=2?$t+1:0,In=W(xe.thm[et].s[ut][vr],ks,m*Tn);ks=Math.min(ks,In)}ml=us[$t*3+3]+us[$t*3+4]+us[$t*3+5],us[$t*3+5]*6<ml&&(ks*=.5,us[$t*3+4]*6<ml&&(ks*=.5)),xe.thm[et].s[ut][$t]=ks}}for(xe.nsPsy.lastAttacks[et]=dn[2],vn=0,gt=0;gt<xe.npart_l;gt++){for(var wo=xe.s3ind[gt][0],fl=Tt[wo]*L[Os[wo]],Ro=xe.s3_ll[vn++]*fl;++wo<=xe.s3ind[gt][1];)fl=Tt[wo]*L[Os[wo]],Ro=P(Ro,xe.s3_ll[vn++]*fl,wo,wo-gt,xe);Ro*=.158489319246111,xe.blocktype_old[et&1]==je.SHORT_TYPE?St[gt]=Ro:St[gt]=W(Math.min(Ro,Math.min(s*xe.nb_1[et][gt],o*xe.nb_2[et][gt])),Ro,Tn),xe.nb_2[et][gt]=xe.nb_1[et][gt],xe.nb_1[et][gt]=Ro}for(;gt<=je.CBANDS;++gt)Tt[gt]=0,St[gt]=0;Z(xe,Tt,St,et)}if((Q.mode==e.STEREO||Q.mode==e.JOINT_STEREO)&&Q.interChRatio>0&&j(Q,Q.interChRatio),Q.mode==e.JOINT_STEREO){var $i;z(xe),$i=Q.msfix,Math.abs($i)>0&&Y(xe,$i,Q.ATHlower*xe.ATH.adjust)}for(H(Q,ft,Be,Ve),et=0;et<Bt;et++){var Mi,Li=0,gl,no;et>1?(Mi=Ie,Li=-2,gl=je.NORM_TYPE,(Be[0]==je.SHORT_TYPE||Be[1]==je.SHORT_TYPE)&&(gl=je.SHORT_TYPE),no=he[ve][et-2]):(Mi=Te,Li=0,gl=Be[et],no=we[ve][et]),gl==je.SHORT_TYPE?Mi[Li+et]=ee(no,xe.masking_lower):Mi[Li+et]=Ee(no,xe.masking_lower),Q.analysis&&(xe.pinfo.pe[ve][et]=Mi[Li+et])}return 0};function He(Q,ne,ue,ve,we,he,Te,Ie){var ye=Q.internal_flags;if(ve<2)t.fft_long(ye,Te[Ie],ve,ne,ue);else if(ve==2)for(var Be=je.BLKSIZE-1;Be>=0;--Be){var xe=Te[Ie+0][Be],Ge=Te[Ie+1][Be];Te[Ie+0][Be]=(xe+Ge)*ia.SQRT2*.5,Te[Ie+1][Be]=(xe-Ge)*ia.SQRT2*.5}he[0]=Te[Ie+0][0],he[0]*=he[0];for(var Be=je.BLKSIZE/2-1;Be>=0;--Be){var ot=Te[Ie+0][je.BLKSIZE/2-Be],Tt=Te[Ie+0][je.BLKSIZE/2+Be];he[je.BLKSIZE/2-Be]=(ot*ot+Tt*Tt)*.5}{for(var Ze=0,Be=11;Be<je.HBLKSIZE;Be++)Ze+=he[Be];ye.tot_ener[ve]=Ze}if(Q.analysis){for(var Be=0;Be<je.HBLKSIZE;Be++)ye.pinfo.energy[we][ve][Be]=ye.pinfo.energy_save[ve][Be],ye.pinfo.energy_save[ve][Be]=he[Be];ye.pinfo.pe[we][ve]=ye.pe[ve]}}function Je(Q,ne,ue,ve,we,he,Te,Ie){var ye=Q.internal_flags;if(we==0&&ve<2&&t.fft_short(ye,Te[Ie],ve,ne,ue),ve==2)for(var Be=je.BLKSIZE_s-1;Be>=0;--Be){var xe=Te[Ie+0][we][Be],Ge=Te[Ie+1][we][Be];Te[Ie+0][we][Be]=(xe+Ge)*ia.SQRT2*.5,Te[Ie+1][we][Be]=(xe-Ge)*ia.SQRT2*.5}he[we][0]=Te[Ie+0][we][0],he[we][0]*=he[we][0];for(var Be=je.BLKSIZE_s/2-1;Be>=0;--Be){var ot=Te[Ie+0][we][je.BLKSIZE_s/2-Be],Tt=Te[Ie+0][we][je.BLKSIZE_s/2+Be];he[we][je.BLKSIZE_s/2-Be]=(ot*ot+Tt*Tt)*.5}}function Xe(Q,ne,ue,ve){var we=Q.internal_flags;Q.athaa_loudapprox==2&&ue<2&&(we.loudness_sq[ne][ue]=we.loudness_sq_save[ue],we.loudness_sq_save[ue]=S(ve,we))}var Qe=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function rt(Q,ne,ue,ve,we,he,Te,Ie,ye,Be){for(var xe=Ia([2,576]),Ge=Q.internal_flags,ot=Ge.channels_out,Tt=Q.mode==e.JOINT_STEREO?4:ot,Ze=0;Ze<ot;Ze++){firbuf=ne[Ze];for(var St=ue+576-350-g+192,Ve=0;Ve<576;Ve++){var ft,Bt;ft=firbuf[St+Ve+10],Bt=0;for(var et=0;et<(g-1)/2-1;et+=2)ft+=Qe[et]*(firbuf[St+Ve+et]+firbuf[St+Ve+g-et]),Bt+=Qe[et+1]*(firbuf[St+Ve+et+1]+firbuf[St+Ve+g-et-1]);xe[Ze][Ve]=ft+Bt}we[ve][Ze].en.assign(Ge.en[Ze]),we[ve][Ze].thm.assign(Ge.thm[Ze]),Tt>2&&(he[ve][Ze].en.assign(Ge.en[Ze+2]),he[ve][Ze].thm.assign(Ge.thm[Ze+2]))}for(var Ze=0;Ze<Tt;Ze++){var gt=ps(12),tt=ps(12),Ct=[0,0,0,0],vn=xe[Ze&1],ut=0,$t=Ze==3?Ge.nsPsy.attackthre_s:Ge.nsPsy.attackthre,Mt=1;if(Ze==2)for(var Ve=0,et=576;et>0;++Ve,--et){var Tn=xe[0][Ve],Os=xe[1][Ve];xe[0][Ve]=Tn+Os,xe[1][Ve]=Tn-Os}for(var Ve=0;Ve<3;Ve++)tt[Ve]=Ge.nsPsy.last_en_subshort[Ze][Ve+6],Vt(Ge.nsPsy.last_en_subshort[Ze][Ve+4]>0),gt[Ve]=tt[Ve]/Ge.nsPsy.last_en_subshort[Ze][Ve+4],Ct[0]+=tt[Ve];for(var Ve=0;Ve<9;Ve++){for(var $n=ut+64,Sn=1;ut<$n;ut++)Sn<Math.abs(vn[ut])&&(Sn=Math.abs(vn[ut]));Ge.nsPsy.last_en_subshort[Ze][Ve]=tt[Ve+3]=Sn,Ct[1+Ve/3]+=Sn,Sn>tt[Ve+3-2]?(Vt(tt[Ve+3-2]>0),Sn=Sn/tt[Ve+3-2]):tt[Ve+3-2]>Sn*10?Sn=tt[Ve+3-2]/(Sn*10):Sn=0,gt[Ve+3]=Sn}for(var Ve=0;Ve<3;++Ve){var _s=tt[Ve*3+3]+tt[Ve*3+4]+tt[Ve*3+5],Ns=1;tt[Ve*3+5]*6<_s&&(Ns*=.5,tt[Ve*3+4]*6<_s&&(Ns*=.5)),Ie[Ze][Ve]=Ns}if(Q.analysis){for(var Es=gt[0],Ve=1;Ve<12;Ve++)Es<gt[Ve]&&(Es=gt[Ve]);Ge.pinfo.ers[ve][Ze]=Ge.pinfo.ers_save[Ze],Ge.pinfo.ers_save[Ze]=Es}for(var Ve=0;Ve<12;Ve++)ye[Ze][Ve/3]==0&&gt[Ve]>$t&&(ye[Ze][Ve/3]=Ve%3+1);for(var Ve=1;Ve<4;Ve++){var na=Ct[Ve-1],Ls=Ct[Ve],us=Math.max(na,Ls);us<4e4&&na<1.7*Ls&&Ls<1.7*na&&(Ve==1&&ye[Ze][0]<=ye[Ze][Ve]&&(ye[Ze][0]=0),ye[Ze][Ve]=0)}ye[Ze][0]<=Ge.nsPsy.lastAttacks[Ze]&&(ye[Ze][0]=0),(Ge.nsPsy.lastAttacks[Ze]==3||ye[Ze][0]+ye[Ze][1]+ye[Ze][2]+ye[Ze][3]!=0)&&(Mt=0,ye[Ze][1]!=0&&ye[Ze][0]!=0&&(ye[Ze][1]=0),ye[Ze][2]!=0&&ye[Ze][1]!=0&&(ye[Ze][2]=0),ye[Ze][3]!=0&&ye[Ze][2]!=0&&(ye[Ze][3]=0)),Ze<2?Be[Ze]=Mt:Mt==0&&(Be[0]=Be[1]=0),Te[Ze]=Ge.tot_ener[Ze]}}function at(Q,ne,ue){if(ue==0)for(var ve=0;ve<Q.npart_s;ve++)Q.nb_s2[ne][ve]=Q.nb_s1[ne][ve],Q.nb_s1[ne][ve]=0}function Et(Q,ne){for(var ue=0;ue<Q.npart_l;ue++)Q.nb_2[ne][ue]=Q.nb_1[ne][ue],Q.nb_1[ne][ue]=0}function Lt(Q,ne,ue,ve){var we=L.length-1,he=0,Te=ue[he]+ue[he+1];if(Te>0){var Ie=ne[he];Ie<ne[he+1]&&(Ie=ne[he+1]),Vt(Q.numlines_s[he]+Q.numlines_s[he+1]-1>0),Te=20*(Ie*2-Te)/(Te*(Q.numlines_s[he]+Q.numlines_s[he+1]-1));var ye=0|Te;ye>we&&(ye=we),ve[he]=ye}else ve[he]=0;for(he=1;he<Q.npart_s-1;he++)if(Te=ue[he-1]+ue[he]+ue[he+1],Vt(he+1<Q.npart_s),Te>0){var Ie=ne[he-1];Ie<ne[he]&&(Ie=ne[he]),Ie<ne[he+1]&&(Ie=ne[he+1]),Vt(Q.numlines_s[he-1]+Q.numlines_s[he]+Q.numlines_s[he+1]-1>0),Te=20*(Ie*3-Te)/(Te*(Q.numlines_s[he-1]+Q.numlines_s[he]+Q.numlines_s[he+1]-1));var ye=0|Te;ye>we&&(ye=we),ve[he]=ye}else ve[he]=0;if(Vt(he==Q.npart_s-1),Te=ue[he-1]+ue[he],Te>0){var Ie=ne[he-1];Ie<ne[he]&&(Ie=ne[he]),Vt(Q.numlines_s[he-1]+Q.numlines_s[he]-1>0),Te=20*(Ie*2-Te)/(Te*(Q.numlines_s[he-1]+Q.numlines_s[he]-1));var ye=0|Te;ye>we&&(ye=we),ve[he]=ye}else ve[he]=0;Vt(he==Q.npart_s-1)}function q(Q,ne,ue,ve,we,he){var Te=Q.internal_flags,Ie=new float[je.CBANDS],ye=ps(je.CBANDS),Be,xe,Ge,ot=new int[je.CBANDS];for(Ge=xe=0;Ge<Te.npart_s;++Ge){var Tt=0,Ze=0,St=Te.numlines_s[Ge];for(Be=0;Be<St;++Be,++xe){var Ve=ne[he][xe];Tt+=Ve,Ze<Ve&&(Ze=Ve)}ue[Ge]=Tt,Ie[Ge]=Ze,ye[Ge]=Tt/St,Vt(ye[Ge]>=0)}for(Vt(Ge==Te.npart_s);Ge<je.CBANDS;++Ge)Ie[Ge]=0,ye[Ge]=0;for(Lt(Te,Ie,ye,ot),xe=Ge=0;Ge<Te.npart_s;Ge++){var ft=Te.s3ind_s[Ge][0],Bt=Te.s3ind_s[Ge][1],et,gt,tt,Ct,vn;for(et=ot[ft],gt=1,Ct=Te.s3_ss[xe]*ue[ft]*L[ot[ft]],++xe,++ft;ft<=Bt;)et+=ot[ft],gt+=1,tt=Te.s3_ss[xe]*ue[ft]*L[ot[ft]],Ct=U(Ct,tt,ft-Ge),++xe,++ft;et=(1+2*et)/(2*gt),vn=L[et]*.5,Ct*=vn,ve[Ge]=Ct,Te.nb_s2[we][Ge]=Te.nb_s1[we][Ge],Te.nb_s1[we][Ge]=Ct,tt=Ie[Ge],tt*=Te.minval_s[Ge],tt*=vn,ve[Ge]>tt&&(ve[Ge]=tt),Te.masking_lower>1&&(ve[Ge]*=Te.masking_lower),ve[Ge]>ue[Ge]&&(ve[Ge]=ue[Ge]),Te.masking_lower<1&&(ve[Ge]*=Te.masking_lower),Vt(ve[Ge]>=0)}for(;Ge<je.CBANDS;++Ge)ue[Ge]=0,ve[Ge]=0}function ae(Q,ne,ue,ve,we){var he=ps(je.CBANDS),Te=ps(je.CBANDS),Ie=Bi(je.CBANDS+2),ye;le(Q,ne,ue,he,Te),_e(Q,he,Te,Ie);var Be=0;for(ye=0;ye<Q.npart_l;ye++){var xe,Ge,ot,Tt,Ze=Q.s3ind[ye][0],St=Q.s3ind[ye][1],Ve=0,ft=0;for(Ve=Ie[Ze],ft+=1,Ge=Q.s3_ll[Be]*ue[Ze]*L[Ie[Ze]],++Be,++Ze;Ze<=St;)Ve+=Ie[Ze],ft+=1,xe=Q.s3_ll[Be]*ue[Ze]*L[Ie[Ze]],Tt=U(Ge,xe,Ze-ye),Ge=Tt,++Be,++Ze;if(Ve=(1+2*Ve)/(2*ft),ot=L[Ve]*.5,Ge*=ot,Q.blocktype_old[we&1]==je.SHORT_TYPE){var Bt=s*Q.nb_1[we][ye];Bt>0?ve[ye]=Math.min(Ge,Bt):ve[ye]=Math.min(Ge,ue[ye]*m)}else{var et=o*Q.nb_2[we][ye],gt=s*Q.nb_1[we][ye],Bt;et<=0&&(et=Ge),gt<=0&&(gt=Ge),Q.blocktype_old[we&1]==je.NORM_TYPE?Bt=Math.min(gt,et):Bt=gt,ve[ye]=Math.min(Ge,Bt)}Q.nb_2[we][ye]=Q.nb_1[we][ye],Q.nb_1[we][ye]=Ge,xe=he[ye],xe*=Q.minval_l[ye],xe*=ot,ve[ye]>xe&&(ve[ye]=xe),Q.masking_lower>1&&(ve[ye]*=Q.masking_lower),ve[ye]>ue[ye]&&(ve[ye]=ue[ye]),Q.masking_lower<1&&(ve[ye]*=Q.masking_lower),Vt(ve[ye]>=0)}for(;ye<je.CBANDS;++ye)ue[ye]=0,ve[ye]=0}function ie(Q,ne){var ue=Q.internal_flags;Q.short_blocks==Or.short_block_coupled&&!(ne[0]!=0&&ne[1]!=0)&&(ne[0]=ne[1]=0);for(var ve=0;ve<ue.channels_out;ve++)Q.short_blocks==Or.short_block_dispensed&&(ne[ve]=1),Q.short_blocks==Or.short_block_forced&&(ne[ve]=0)}function be(Q,ne,ue){for(var ve=Q.internal_flags,we=0;we<ve.channels_out;we++){var he=je.NORM_TYPE;ne[we]!=0?(Vt(ve.blocktype_old[we]!=je.START_TYPE),ve.blocktype_old[we]==je.SHORT_TYPE&&(he=je.STOP_TYPE)):(he=je.SHORT_TYPE,ve.blocktype_old[we]==je.NORM_TYPE&&(ve.blocktype_old[we]=je.START_TYPE),ve.blocktype_old[we]==je.STOP_TYPE&&(ve.blocktype_old[we]=je.SHORT_TYPE)),ue[we]=ve.blocktype_old[we],ve.blocktype_old[we]=he}}function fe(Q,ne,ue,ve,we,he,Te){for(var Ie=he*2,ye=he>0?Math.pow(10,we):1,Be,xe,Ge=0;Ge<Te;++Ge){var ot=Q[2][Ge],Tt=Q[3][Ge],Ze=ne[0][Ge],St=ne[1][Ge],Ve=ne[2][Ge],ft=ne[3][Ge];if(Ze<=1.58*St&&St<=1.58*Ze){var Bt=ue[Ge]*Tt,et=ue[Ge]*ot;xe=Math.max(Ve,Math.min(ft,Bt)),Be=Math.max(ft,Math.min(Ve,et))}else xe=Ve,Be=ft;if(he>0){var gt,tt,Ct=ve[Ge]*ye;if(gt=Math.min(Math.max(Ze,Ct),Math.max(St,Ct)),Ve=Math.max(xe,Ct),ft=Math.max(Be,Ct),tt=Ve+ft,tt>0&&gt*Ie<tt){var vn=gt*Ie/tt;Ve*=vn,ft*=vn}xe=Math.min(Ve,xe),Be=Math.min(ft,Be)}xe>ot&&(xe=ot),Be>Tt&&(Be=Tt),ne[2][Ge]=xe,ne[3][Ge]=Be}}this.L3psycho_anal_vbr=function(Q,ne,ue,ve,we,he,Te,Ie,ye,Be){var xe=Q.internal_flags,Ge,ot,Tt=ps(je.HBLKSIZE),Ze=Ia([3,je.HBLKSIZE_s]),St=Ia([2,je.BLKSIZE]),Ve=Ia([2,3,je.BLKSIZE_s]),ft=Ia([4,je.CBANDS]),Bt=Ia([4,je.CBANDS]),et=Ia([4,3]),gt=.6,tt=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],Ct=Bi(2),vn=Q.mode==e.JOINT_STEREO?4:xe.channels_out;rt(Q,ne,ue,ve,we,he,ye,et,tt,Ct),ie(Q,Ct);{for(var ut=0;ut<vn;ut++){var $t=ut&1;Ge=St,He(Q,ne,ue,ut,ve,Tt,Ge,$t),Xe(Q,ve,ut,Tt),Ct[$t]!=0?ae(xe,Tt,ft[ut],Bt[ut],ut):Et(xe,ut)}Ct[0]+Ct[1]==2&&Q.mode==e.JOINT_STEREO&&fe(ft,Bt,xe.mld_cb_l,xe.ATH.cb_l,Q.ATHlower*xe.ATH.adjust,Q.msfix,xe.npart_l);for(var ut=0;ut<vn;ut++){var $t=ut&1;Ct[$t]!=0&&Z(xe,ft[ut],Bt[ut],ut)}}{for(var Mt=0;Mt<3;Mt++){for(var ut=0;ut<vn;++ut){var $t=ut&1;Ct[$t]!=0?at(xe,ut,Mt):(ot=Ve,Je(Q,ne,ue,ut,Mt,Ze,ot,$t),q(Q,Ze,ft[ut],Bt[ut],ut,Mt))}Ct[0]+Ct[1]==0&&Q.mode==e.JOINT_STEREO&&fe(ft,Bt,xe.mld_cb_s,xe.ATH.cb_s,Q.ATHlower*xe.ATH.adjust,Q.msfix,xe.npart_s);for(var ut=0;ut<vn;++ut){var $t=ut&1;Ct[$t]==0&&te(xe,ft[ut],Bt[ut],ut,Mt)}}for(var ut=0;ut<vn;ut++){var $t=ut&1;if(Ct[$t]==0)for(var Tn=0;Tn<je.SBMAX_s;Tn++){for(var Os=ps(3),Mt=0;Mt<3;Mt++){var $n=xe.thm[ut].s[Tn][Mt];if($n*=u,tt[ut][Mt]>=2||tt[ut][Mt+1]==1){var Sn=Mt!=0?Mt-1:2,_s=W(xe.thm[ut].s[Tn][Sn],$n,d*gt);$n=Math.min($n,_s)}else if(tt[ut][Mt]==1){var Sn=Mt!=0?Mt-1:2,_s=W(xe.thm[ut].s[Tn][Sn],$n,m*gt);$n=Math.min($n,_s)}else if(Mt!=0&&tt[ut][Mt-1]==3||Mt==0&&xe.nsPsy.lastAttacks[ut]==3){var Sn=Mt!=2?Mt+1:0,_s=W(xe.thm[ut].s[Tn][Sn],$n,m*gt);$n=Math.min($n,_s)}$n*=et[ut][Mt],Os[Mt]=$n}for(var Mt=0;Mt<3;Mt++)xe.thm[ut].s[Tn][Mt]=Os[Mt]}}}for(var ut=0;ut<vn;ut++)xe.nsPsy.lastAttacks[ut]=tt[ut][2];be(Q,Ct,Be);for(var ut=0;ut<vn;ut++){var Ns,Es,na,Ls;ut>1?(Ns=Ie,Es=-2,na=je.NORM_TYPE,(Be[0]==je.SHORT_TYPE||Be[1]==je.SHORT_TYPE)&&(na=je.SHORT_TYPE),Ls=he[ve][ut-2]):(Ns=Te,Es=0,na=Be[ut],Ls=we[ve][ut]),na==je.SHORT_TYPE?Ns[Es+ut]=ee(Ls,xe.masking_lower):Ns[Es+ut]=Ee(Ls,xe.masking_lower),Q.analysis&&(xe.pinfo.pe[ve][ut]=Ns[Es+ut])}return 0};function Se(Q,ne){var ue=Q,ve;return ue>=0?ve=-ue*27:ve=ue*ne,ve<=-72?0:Math.exp(ve*T)}function Le(Q){var ne=0,ue=0;{var ve=0,we,he;for(ve=0;Se(ve,Q)>1e-20;ve-=1);for(we=ve,he=0;Math.abs(he-we)>1e-12;)ve=(he+we)/2,Se(ve,Q)>0?he=ve:we=ve;ne=we}{var ve=0,we,he;for(ve=0;Se(ve,Q)>1e-20;ve+=1);for(we=0,he=ve;Math.abs(he-we)>1e-12;)ve=(he+we)/2,Se(ve,Q)>0?we=ve:he=ve;ue=he}{var Te=0,Ie=1e3,ye;for(ye=0;ye<=Ie;++ye){var ve=ne+ye*(ue-ne)/Ie,Be=Se(ve,Q);Te+=Be}{var xe=(Ie+1)/(Te*(ue-ne));return xe}}}function ke(Q){var ne,ue,ve,we;return ne=Q,ne>=0?ne*=3:ne*=1.5,ne>=.5&&ne<=2.5?(we=ne-.5,ue=8*(we*we-2*we)):ue=0,ne+=.474,ve=15.811389+7.5*ne-17.5*Math.sqrt(1+ne*ne),ve<=-60?0:(ne=Math.exp((ue+ve)*T),ne/=.6609193,ne)}function De(Q){return Q<0&&(Q=0),Q=Q*.001,13*Math.atan(.76*Q)+3.5*Math.atan(Q*Q/(7.5*7.5))}function Ue(Q,ne,ue,ve,we,he,Te,Ie,ye,Be,xe,Ge){var ot=ps(je.CBANDS+1),Tt=Ie/(Ge>15?2*576:2*192),Ze=Bi(je.HBLKSIZE),St;Ie/=ye;var Ve=0,ft=0;for(St=0;St<je.CBANDS;St++){var Bt,et;for(Bt=De(Ie*Ve),ot[St]=Ie*Ve,et=Ve;De(Ie*et)-Bt<r&&et<=ye/2;et++);for(Q[St]=et-Ve,ft=St+1;Ve<et;)Vt(Ve<je.HBLKSIZE),Ze[Ve++]=St;if(Ve>ye/2){Ve=ye/2,++St;break}}Vt(St<je.CBANDS),ot[St]=Ie*Ve;for(var gt=0;gt<Ge;gt++){var tt,Ct,vn,ut,$t;vn=Be[gt],ut=Be[gt+1],tt=0|Math.floor(.5+xe*(vn-.5)),tt<0&&(tt=0),Ct=0|Math.floor(.5+xe*(ut-.5)),Ct>ye/2&&(Ct=ye/2),ue[gt]=(Ze[tt]+Ze[Ct])/2,ne[gt]=Ze[Ct];var Mt=Tt*ut;Te[gt]=(Mt-ot[ne[gt]])/(ot[ne[gt]+1]-ot[ne[gt]]),Te[gt]<0?Te[gt]=0:Te[gt]>1&&(Te[gt]=1),$t=De(Ie*Be[gt]*xe),$t=Math.min($t,15.5)/15.5,he[gt]=Math.pow(10,1.25*(1-Math.cos(Math.PI*$t))-2.5)}Ve=0;for(var Tn=0;Tn<ft;Tn++){var Os=Q[Tn],Bt,$n;Bt=De(Ie*Ve),$n=De(Ie*(Ve+Os-1)),ve[Tn]=.5*(Bt+$n),Bt=De(Ie*(Ve-.5)),$n=De(Ie*(Ve+Os-.5)),we[Tn]=$n-Bt,Ve+=Os}return ft}function de(Q,ne,ue,ve,we,he){var Te=Ia([je.CBANDS,je.CBANDS]),Ie,ye=0;if(he)for(var Be=0;Be<ne;Be++)for(Ie=0;Ie<ne;Ie++){var xe=ke(ue[Be]-ue[Ie])*ve[Ie];Te[Be][Ie]=xe*we[Be]}else for(Ie=0;Ie<ne;Ie++)for(var Ge=15+Math.min(21/ue[Ie],12),ot=Le(Ge),Be=0;Be<ne;Be++){var xe=ot*Se(ue[Be]-ue[Ie],Ge)*ve[Ie];Te[Be][Ie]=xe*we[Be]}for(var Be=0;Be<ne;Be++){for(Ie=0;Ie<ne&&!(Te[Be][Ie]>0);Ie++);for(Q[Be][0]=Ie,Ie=ne-1;Ie>0&&!(Te[Be][Ie]>0);Ie--);Q[Be][1]=Ie,ye+=Q[Be][1]-Q[Be][0]+1}for(var Tt=ps(ye),Ze=0,Be=0;Be<ne;Be++)for(Ie=Q[Be][0];Ie<=Q[Be][1];Ie++)Tt[Ze++]=Te[Be][Ie];return Tt}function Ce(Q){var ne=De(Q);return ne=Math.min(ne,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*ne))-2.5)}this.psymodel_init=function(Q){var ne=Q.internal_flags,ue,ve=!0,we=13,he=24,Te=0,Ie=0,ye=-8.25,Be=-4.5,xe=ps(je.CBANDS),Ge=ps(je.CBANDS),ot=ps(je.CBANDS),Tt=Q.out_samplerate;switch(Q.experimentalZ){default:case 0:ve=!0;break;case 1:ve=!(Q.VBR==Cr.vbr_mtrh||Q.VBR==Cr.vbr_mt);break;case 2:ve=!1;break;case 3:we=8,Te=-1.75,Ie=-.0125,ye=-8.25,Be=-2.25;break}for(ne.ms_ener_ratio_old=.25,ne.blocktype_old[0]=ne.blocktype_old[1]=je.NORM_TYPE,ue=0;ue<4;++ue){for(var Ve=0;Ve<je.CBANDS;++Ve)ne.nb_1[ue][Ve]=1e20,ne.nb_2[ue][Ve]=1e20,ne.nb_s1[ue][Ve]=ne.nb_s2[ue][Ve]=1;for(var Ze=0;Ze<je.SBMAX_l;Ze++)ne.en[ue].l[Ze]=1e20,ne.thm[ue].l[Ze]=1e20;for(var Ve=0;Ve<3;++Ve){for(var Ze=0;Ze<je.SBMAX_s;Ze++)ne.en[ue].s[Ze][Ve]=1e20,ne.thm[ue].s[Ze][Ve]=1e20;ne.nsPsy.lastAttacks[ue]=0}for(var Ve=0;Ve<9;Ve++)ne.nsPsy.last_en_subshort[ue][Ve]=10}for(ne.loudness_sq_save[0]=ne.loudness_sq_save[1]=0,ne.npart_l=Ue(ne.numlines_l,ne.bo_l,ne.bm_l,xe,Ge,ne.mld_l,ne.PSY.bo_l_weight,Tt,je.BLKSIZE,ne.scalefac_band.l,je.BLKSIZE/(2*576),je.SBMAX_l),Vt(ne.npart_l<je.CBANDS),ue=0;ue<ne.npart_l;ue++){var St=Te;xe[ue]>=we&&(St=Ie*(xe[ue]-we)/(he-we)+Te*(he-xe[ue])/(he-we)),ot[ue]=Math.pow(10,St/10),ne.numlines_l[ue]>0?ne.rnumlines_l[ue]=1/ne.numlines_l[ue]:ne.rnumlines_l[ue]=0}ne.s3_ll=de(ne.s3ind,ne.npart_l,xe,Ge,ot,ve);var Ve=0;for(ue=0;ue<ne.npart_l;ue++){var ft;ft=_E.MAX_VALUE;for(var Bt=0;Bt<ne.numlines_l[ue];Bt++,Ve++){var et=Tt*Ve/(1e3*je.BLKSIZE),gt;gt=this.ATHformula(et*1e3,Q)-20,gt=Math.pow(10,.1*gt),gt*=ne.numlines_l[ue],ft>gt&&(ft=gt)}ne.ATH.cb_l[ue]=ft,ft=-20+xe[ue]*20/10,ft>6&&(ft=100),ft<-15&&(ft=-15),ft-=8,ne.minval_l[ue]=Math.pow(10,ft/10)*ne.numlines_l[ue]}for(ne.npart_s=Ue(ne.numlines_s,ne.bo_s,ne.bm_s,xe,Ge,ne.mld_s,ne.PSY.bo_s_weight,Tt,je.BLKSIZE_s,ne.scalefac_band.s,je.BLKSIZE_s/(2*192),je.SBMAX_s),Vt(ne.npart_s<je.CBANDS),Ve=0,ue=0;ue<ne.npart_s;ue++){var ft,St=ye;xe[ue]>=we&&(St=Be*(xe[ue]-we)/(he-we)+ye*(he-xe[ue])/(he-we)),ot[ue]=Math.pow(10,St/10),ft=_E.MAX_VALUE;for(var Bt=0;Bt<ne.numlines_s[ue];Bt++,Ve++){var et=Tt*Ve/(1e3*je.BLKSIZE_s),gt;gt=this.ATHformula(et*1e3,Q)-20,gt=Math.pow(10,.1*gt),gt*=ne.numlines_s[ue],ft>gt&&(ft=gt)}ne.ATH.cb_s[ue]=ft,ft=-7+xe[ue]*7/12,xe[ue]>12&&(ft*=1+Math.log(1+ft)*3.1),xe[ue]<12&&(ft*=1+Math.log(1-ft)*2.3),ft<-15&&(ft=-15),ft-=8,ne.minval_s[ue]=Math.pow(10,ft/10)*ne.numlines_s[ue]}ne.s3_ss=de(ne.s3ind_s,ne.npart_s,xe,Ge,ot,ve),F(),t.init_fft(ne),ne.decay=Math.exp(-1*n/(c*Tt/192));{var tt;tt=f,Q.exp_nspsytune&2&&(tt=1),Math.abs(Q.msfix)>0&&(tt=Q.msfix),Q.msfix=tt;for(var Ct=0;Ct<ne.npart_l;Ct++)ne.s3ind[Ct][1]>ne.npart_l-1&&(ne.s3ind[Ct][1]=ne.npart_l-1)}var vn=576*ne.mode_gr/Tt;if(ne.ATH.decay=Math.pow(10,-12/10*vn),ne.ATH.adjust=.01,ne.ATH.adjustLimit=1,Vt(ne.bo_l[je.SBMAX_l-1]<=ne.npart_l),Vt(ne.bo_s[je.SBMAX_s-1]<=ne.npart_s),Q.ATHtype!=-1){var et,ut=Q.out_samplerate/je.BLKSIZE,$t=0;for(et=0,ue=0;ue<je.BLKSIZE/2;++ue)et+=ut,ne.ATH.eql_w[ue]=1/Math.pow(10,this.ATHformula(et,Q)/10),$t+=ne.ATH.eql_w[ue];for($t=1/$t,ue=je.BLKSIZE/2;--ue>=0;)ne.ATH.eql_w[ue]*=$t}{for(var Ct=Ve=0;Ct<ne.npart_s;++Ct)for(ue=0;ue<ne.numlines_s[Ct];++ue)++Ve;for(var Ct=Ve=0;Ct<ne.npart_l;++Ct)for(ue=0;ue<ne.numlines_l[Ct];++ue)++Ve}for(Ve=0,ue=0;ue<ne.npart_l;ue++){var et=Tt*(Ve+ne.numlines_l[ue]/2)/(1*je.BLKSIZE);ne.mld_cb_l[ue]=Ce(et),Ve+=ne.numlines_l[ue]}for(;ue<je.CBANDS;++ue)ne.mld_cb_l[ue]=1;for(Ve=0,ue=0;ue<ne.npart_s;ue++){var et=Tt*(Ve+ne.numlines_s[ue]/2)/(1*je.BLKSIZE_s);ne.mld_cb_s[ue]=Ce(et),Ve+=ne.numlines_s[ue]}for(;ue<je.CBANDS;++ue)ne.mld_cb_s[ue]=1;return 0};function Pe(Q,ne){Q<-.3&&(Q=3410),Q/=1e3,Q=Math.max(.1,Q);var ue=3.64*Math.pow(Q,-.8)-6.8*Math.exp(-.6*Math.pow(Q-3.4,2))+6*Math.exp(-.15*Math.pow(Q-8.7,2))+(.6+.04*ne)*.001*Math.pow(Q,4);return ue}this.ATHformula=function(Q,ne){var ue;switch(ne.ATHtype){case 0:ue=Pe(Q,9);break;case 1:ue=Pe(Q,-1);break;case 2:ue=Pe(Q,0);break;case 3:ue=Pe(Q,1)+6;break;case 4:ue=Pe(Q,ne.ATHcurve);break;default:ue=Pe(Q,0);break}return ue}}var aTe=sTe,oTe=Wc;function iTe(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=oTe.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var rTe=iTe,lTe=Ws(),CA={};CA.SFBMAX=lTe.SBMAX_s*3;var vp=CA,OA=Fn,cTe=OA.new_float,Fi=OA.new_int,vm=vp;function uTe(){this.xr=cTe(576),this.l3_enc=Fi(576),this.scalefac=Fi(vm.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Fi(3),this.subblock_gain=Fi(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Fi(vm.SFBMAX),this.window=Fi(vm.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Fi(4),this.max_nonzero_coeff=0;var e=this;function t(s){return new Int32Array(s)}function n(s){return new Float32Array(s)}this.assign=function(s){e.xr=n(s.xr),e.l3_enc=t(s.l3_enc),e.scalefac=t(s.scalefac),e.xrpow_max=s.xrpow_max,e.part2_3_length=s.part2_3_length,e.big_values=s.big_values,e.count1=s.count1,e.global_gain=s.global_gain,e.scalefac_compress=s.scalefac_compress,e.block_type=s.block_type,e.mixed_block_flag=s.mixed_block_flag,e.table_select=t(s.table_select),e.subblock_gain=t(s.subblock_gain),e.region0_count=s.region0_count,e.region1_count=s.region1_count,e.preflag=s.preflag,e.scalefac_scale=s.scalefac_scale,e.count1table_select=s.count1table_select,e.part2_length=s.part2_length,e.sfb_lmax=s.sfb_lmax,e.sfb_smin=s.sfb_smin,e.psy_lmax=s.psy_lmax,e.sfbmax=s.sfbmax,e.psymax=s.psymax,e.sfbdivide=s.sfbdivide,e.width=t(s.width),e.window=t(s.window),e.count1bits=s.count1bits,e.sfb_partition_table=s.sfb_partition_table.slice(0),e.slen=t(s.slen),e.max_nonzero_coeff=s.max_nonzero_coeff}}var h_=uTe,dTe=Fn,vE=dTe.new_int,pTe=h_;function hTe(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[vE(4),vE(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new pTe}var mTe=hTe,NA=Fn,Su=NA.System,Au=NA.new_int,Iu=Ws();function fTe(e,t,n,s){this.l=Au(1+Iu.SBMAX_l),this.s=Au(1+Iu.SBMAX_s),this.psfb21=Au(1+Iu.PSFB21),this.psfb12=Au(1+Iu.PSFB12);var o=this.l,a=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],Su.arraycopy(this.arrL,0,o,0,Math.min(this.arrL.length,this.l.length)),Su.arraycopy(this.arrS,0,a,0,Math.min(this.arrS.length,this.s.length)),Su.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),Su.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var wA=fTe,m_=Fn,bm=m_.new_float,gTe=m_.new_float_n,_Te=m_.new_int,bE=Ws();function vTe(){this.last_en_subshort=gTe([4,9]),this.lastAttacks=_Te(4),this.pefirbuf=bm(19),this.longfact=bm(bE.SBMAX_l),this.shortfact=bm(bE.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var bTe=vTe;function ETe(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var TTe=ETe,ul=Fn,yTe=ul.new_byte,STe=ul.new_double,Ca=ul.new_float,Ui=ul.new_float_n,Ga=ul.new_int,Cu=ul.new_int_n,ATe=mTe,ITe=wA,CTe=bTe,OTe=TTe,EE=AA(),Xn=Ws(),NTe=vp;Bo.MFSIZE=3*1152+Xn.ENCDELAY-Xn.MDCTDELAY;Bo.MAX_HEADER_BUF=256;Bo.MAX_BITS_PER_CHANNEL=4095;Bo.MAX_BITS_PER_GRANULE=7680;Bo.BPC=320;function Bo(){var e=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Ui([2,Bo.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new ATe,this.ms_ratio=Ca(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Ga(2),this.CurrentStep=Ga(2),this.masking_lower=0,this.bv_scf=Ga(576),this.pseudohalf=Ga(NTe.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Bo.BPC+1),this.itime=STe(2),this.sideinfo_len=0,this.sb_sample=Ui([2,2,18,Xn.SBLIMIT]),this.amp_filter=Ca(32);function t(){this.write_timing=0,this.ptr=0,this.buf=yTe(e)}this.header=new Array(Bo.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new ITe,this.minval_l=Ca(Xn.CBANDS),this.minval_s=Ca(Xn.CBANDS),this.nb_1=Ui([4,Xn.CBANDS]),this.nb_2=Ui([4,Xn.CBANDS]),this.nb_s1=Ui([4,Xn.CBANDS]),this.nb_s2=Ui([4,Xn.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=Ca(4),this.loudness_sq=Ui([2,2]),this.loudness_sq_save=Ca(2),this.mld_l=Ca(Xn.SBMAX_l),this.mld_s=Ca(Xn.SBMAX_s),this.bm_l=Ga(Xn.SBMAX_l),this.bo_l=Ga(Xn.SBMAX_l),this.bm_s=Ga(Xn.SBMAX_s),this.bo_s=Ga(Xn.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=Cu([Xn.CBANDS,2]),this.s3ind_s=Cu([Xn.CBANDS,2]),this.numlines_s=Ga(Xn.CBANDS),this.numlines_l=Ga(Xn.CBANDS),this.rnumlines_l=Ca(Xn.CBANDS),this.mld_cb_l=Ca(Xn.CBANDS),this.mld_cb_s=Ca(Xn.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=Ca(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Ga(2),this.nsPsy=new CTe,this.VBR_seek_table=new OTe,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=Cu([16,5]),this.bitrate_blockType_Hist=Cu([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new EE;for(var n=0;n<this.thm.length;n++)this.thm[n]=new EE;for(var n=0;n<this.header.length;n++)this.header[n]=new t}var bp=Bo,wTe=Fn,Gi=wTe.new_float,Vi=Ws();function RTe(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Gi(Vi.SBMAX_l),this.s=Gi(Vi.SBMAX_s),this.psfb21=Gi(Vi.PSFB21),this.psfb12=Gi(Vi.PSFB12),this.cb_l=Gi(Vi.CBANDS),this.cb_s=Gi(Vi.CBANDS),this.eql_w=Gi(Vi.BLKSIZE/2)}var xTe=RTe,RA=Fn,ra=RA.System,TE=RA.Arrays;Jn.STEPS_per_dB=100;Jn.MAX_dB=120;Jn.GAIN_NOT_ENOUGH_SAMPLES=-24601;Jn.GAIN_ANALYSIS_ERROR=0;Jn.GAIN_ANALYSIS_OK=1;Jn.INIT_GAIN_ANALYSIS_ERROR=0;Jn.INIT_GAIN_ANALYSIS_OK=1;Jn.YULE_ORDER=10;Jn.MAX_ORDER=Jn.YULE_ORDER;Jn.MAX_SAMP_FREQ=48e3;Jn.RMS_WINDOW_TIME_NUMERATOR=1;Jn.RMS_WINDOW_TIME_DENOMINATOR=20;Jn.MAX_SAMPLES_PER_WINDOW=Jn.MAX_SAMP_FREQ*Jn.RMS_WINDOW_TIME_NUMERATOR/Jn.RMS_WINDOW_TIME_DENOMINATOR+1;function Jn(){var e=64.82,t=.95,n=Jn.RMS_WINDOW_TIME_NUMERATOR,s=Jn.RMS_WINDOW_TIME_DENOMINATOR,o=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],a=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function i(d,m,f,g,T,S){for(;T--!=0;)f[g]=1e-10+d[m+0]*S[0]-f[g-1]*S[1]+d[m-1]*S[2]-f[g-2]*S[3]+d[m-2]*S[4]-f[g-3]*S[5]+d[m-3]*S[6]-f[g-4]*S[7]+d[m-4]*S[8]-f[g-5]*S[9]+d[m-5]*S[10]-f[g-6]*S[11]+d[m-6]*S[12]-f[g-7]*S[13]+d[m-7]*S[14]-f[g-8]*S[15]+d[m-8]*S[16]-f[g-9]*S[17]+d[m-9]*S[18]-f[g-10]*S[19]+d[m-10]*S[20],++g,++m}function r(d,m,f,g,T,S){for(;T--!=0;)f[g]=d[m+0]*S[0]-f[g-1]*S[1]+d[m-1]*S[2]-f[g-2]*S[3]+d[m-2]*S[4],++g,++m}function l(d,m){for(var f=0;f<MAX_ORDER;f++)d.linprebuf[f]=d.lstepbuf[f]=d.loutbuf[f]=d.rinprebuf[f]=d.rstepbuf[f]=d.routbuf[f]=0;switch(0|m){case 48e3:d.reqindex=0;break;case 44100:d.reqindex=1;break;case 32e3:d.reqindex=2;break;case 24e3:d.reqindex=3;break;case 22050:d.reqindex=4;break;case 16e3:d.reqindex=5;break;case 12e3:d.reqindex=6;break;case 11025:d.reqindex=7;break;case 8e3:d.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return d.sampleWindow=0|(m*n+s-1)/s,d.lsum=0,d.rsum=0,d.totsamp=0,TE.ill(d.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(d,m){return l(d,m)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(d.linpre=MAX_ORDER,d.rinpre=MAX_ORDER,d.lstep=MAX_ORDER,d.rstep=MAX_ORDER,d.lout=MAX_ORDER,d.rout=MAX_ORDER,TE.fill(d.B,0),INIT_GAIN_ANALYSIS_OK)};function c(d){return d*d}this.AnalyzeSamples=function(d,m,f,g,T,S,_){var E,b,I,R,O,x,L;if(S==0)return GAIN_ANALYSIS_OK;switch(L=0,O=S,_){case 1:g=m,T=f;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(S<MAX_ORDER?(ra.arraycopy(m,f,d.linprebuf,MAX_ORDER,S),ra.arraycopy(g,T,d.rinprebuf,MAX_ORDER,S)):(ra.arraycopy(m,f,d.linprebuf,MAX_ORDER,MAX_ORDER),ra.arraycopy(g,T,d.rinprebuf,MAX_ORDER,MAX_ORDER));O>0;){x=O>d.sampleWindow-d.totsamp?d.sampleWindow-d.totsamp:O,L<MAX_ORDER?(E=d.linpre+L,b=d.linprebuf,I=d.rinpre+L,R=d.rinprebuf,x>MAX_ORDER-L&&(x=MAX_ORDER-L)):(E=f+L,b=m,I=T+L,R=g),i(b,E,d.lstepbuf,d.lstep+d.totsamp,x,o[d.reqindex]),i(R,I,d.rstepbuf,d.rstep+d.totsamp,x,o[d.reqindex]),r(d.lstepbuf,d.lstep+d.totsamp,d.loutbuf,d.lout+d.totsamp,x,a[d.reqindex]),r(d.rstepbuf,d.rstep+d.totsamp,d.routbuf,d.rout+d.totsamp,x,a[d.reqindex]),E=d.lout+d.totsamp,b=d.loutbuf,I=d.rout+d.totsamp,R=d.routbuf;for(var F=x%8;F--!=0;)d.lsum+=c(b[E++]),d.rsum+=c(R[I++]);for(F=x/8;F--!=0;)d.lsum+=c(b[E+0])+c(b[E+1])+c(b[E+2])+c(b[E+3])+c(b[E+4])+c(b[E+5])+c(b[E+6])+c(b[E+7]),E+=8,d.rsum+=c(R[I+0])+c(R[I+1])+c(R[I+2])+c(R[I+3])+c(R[I+4])+c(R[I+5])+c(R[I+6])+c(R[I+7]),I+=8;if(O-=x,L+=x,d.totsamp+=x,d.totsamp==d.sampleWindow){var D=Jn.STEPS_per_dB*10*Math.log10((d.lsum+d.rsum)/d.totsamp*.5+1e-37),V=D<=0?0:0|D;V>=d.A.length&&(V=d.A.length-1),d.A[V]++,d.lsum=d.rsum=0,ra.arraycopy(d.loutbuf,d.totsamp,d.loutbuf,0,MAX_ORDER),ra.arraycopy(d.routbuf,d.totsamp,d.routbuf,0,MAX_ORDER),ra.arraycopy(d.lstepbuf,d.totsamp,d.lstepbuf,0,MAX_ORDER),ra.arraycopy(d.rstepbuf,d.totsamp,d.rstepbuf,0,MAX_ORDER),d.totsamp=0}if(d.totsamp>d.sampleWindow)return GAIN_ANALYSIS_ERROR}return S<MAX_ORDER?(ra.arraycopy(d.linprebuf,S,d.linprebuf,0,MAX_ORDER-S),ra.arraycopy(d.rinprebuf,S,d.rinprebuf,0,MAX_ORDER-S),ra.arraycopy(m,f,d.linprebuf,MAX_ORDER-S,S),ra.arraycopy(g,T,d.rinprebuf,MAX_ORDER-S,S)):(ra.arraycopy(m,f+S-MAX_ORDER,d.linprebuf,0,MAX_ORDER),ra.arraycopy(g,T+S-MAX_ORDER,d.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function u(d,m){var f,g=0;for(f=0;f<m;f++)g+=d[f];if(g==0)return GAIN_NOT_ENOUGH_SAMPLES;var T=0|Math.ceil(g*(1-t));for(f=m;f-- >0&&!((T-=d[f])<=0););return e-f/Jn.STEPS_per_dB}this.GetTitleGain=function(d){for(var m=u(d.A,d.A.length),f=0;f<d.A.length;f++)d.B[f]+=d.A[f],d.A[f]=0;for(var f=0;f<MAX_ORDER;f++)d.linprebuf[f]=d.lstepbuf[f]=d.loutbuf[f]=d.rinprebuf[f]=d.rstepbuf[f]=d.routbuf[f]=0;return d.totsamp=0,d.lsum=d.rsum=0,m}}var xA=Jn,$A=Fn,Nr=$A.new_float,yE=$A.new_int,la=xA;function $Te(){this.linprebuf=Nr(la.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Nr(la.MAX_SAMPLES_PER_WINDOW+la.MAX_ORDER),this.lstep=0,this.loutbuf=Nr(la.MAX_SAMPLES_PER_WINDOW+la.MAX_ORDER),this.lout=0,this.rinprebuf=Nr(la.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Nr(la.MAX_SAMPLES_PER_WINDOW+la.MAX_ORDER),this.rstep=0,this.routbuf=Nr(la.MAX_SAMPLES_PER_WINDOW+la.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=yE(0|la.STEPS_per_dB*la.MAX_dB),this.B=yE(0|la.STEPS_per_dB*la.MAX_dB)}var MTe=$Te;function LTe(e){this.bits=e}var MA=LTe,f_=Fn,SE=f_.new_float,kTe=f_.new_int,AE=f_.assert,DTe=MA,IE=Ws(),PTe=vp,BTe=bp;function FTe(e){var t=e;this.quantize=t,this.iteration_loop=function(n,s,o,a){var i=n.internal_flags,r=SE(PTe.SFBMAX),l=SE(576),c=kTe(2),u=0,d,m=i.l3_side,f=new DTe(u);this.quantize.rv.ResvFrameBegin(n,f),u=f.bits;for(var g=0;g<i.mode_gr;g++){d=this.quantize.qupvt.on_pe(n,s,c,u,g,g),i.mode_ext==IE.MPG_MD_MS_LR&&(this.quantize.ms_convert(i.l3_side,g),this.quantize.qupvt.reduce_side(c,o[g],u,d));for(var T=0;T<i.channels_out;T++){var S,_,E=m.tt[g][T];E.block_type!=IE.SHORT_TYPE?(S=0,_=i.PSY.mask_adjust-S):(S=0,_=i.PSY.mask_adjust_short-S),i.masking_lower=Math.pow(10,_*.1),this.quantize.init_outer_loop(i,E),this.quantize.init_xrpow(i,E,l)&&(this.quantize.qupvt.calc_xmin(n,a[g][T],E,r),this.quantize.outer_loop(n,E,r,l,T,c[T])),this.quantize.iteration_finish_one(i,g,T),AE(E.part2_3_length<=BTe.MAX_BITS_PER_CHANNEL),AE(E.part2_3_length<=c[T])}}this.quantize.rv.ResvFrameEnd(i,u)}}var UTe=FTe;function on(e,t,n,s){this.xlen=e,this.linmax=t,this.table=n,this.hlen=s}var st={};st.t1HB=[1,1,1,0];st.t2HB=[1,2,1,3,1,1,3,2,0];st.t3HB=[3,2,1,1,1,1,3,2,0];st.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];st.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];st.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];st.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];st.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];st.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];st.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];st.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];st.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];st.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];st.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];st.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];st.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];st.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];st.t1l=[1,4,3,5];st.t2l=[1,4,7,4,5,7,6,7,8];st.t3l=[2,3,7,4,4,7,6,7,8];st.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];st.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];st.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];st.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];st.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];st.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];st.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];st.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];st.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];st.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];st.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];st.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];st.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];st.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];st.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];st.ht=[new on(0,0,null,null),new on(2,0,st.t1HB,st.t1l),new on(3,0,st.t2HB,st.t2l),new on(3,0,st.t3HB,st.t3l),new on(0,0,null,null),new on(4,0,st.t5HB,st.t5l),new on(4,0,st.t6HB,st.t6l),new on(6,0,st.t7HB,st.t7l),new on(6,0,st.t8HB,st.t8l),new on(6,0,st.t9HB,st.t9l),new on(8,0,st.t10HB,st.t10l),new on(8,0,st.t11HB,st.t11l),new on(8,0,st.t12HB,st.t12l),new on(16,0,st.t13HB,st.t13l),new on(0,0,null,st.t16_5l),new on(16,0,st.t15HB,st.t15l),new on(1,1,st.t16HB,st.t16l),new on(2,3,st.t16HB,st.t16l),new on(3,7,st.t16HB,st.t16l),new on(4,15,st.t16HB,st.t16l),new on(6,63,st.t16HB,st.t16l),new on(8,255,st.t16HB,st.t16l),new on(10,1023,st.t16HB,st.t16l),new on(13,8191,st.t16HB,st.t16l),new on(4,15,st.t24HB,st.t24l),new on(5,31,st.t24HB,st.t24l),new on(6,63,st.t24HB,st.t24l),new on(7,127,st.t24HB,st.t24l),new on(8,255,st.t24HB,st.t24l),new on(9,511,st.t24HB,st.t24l),new on(11,2047,st.t24HB,st.t24l),new on(13,8191,st.t24HB,st.t24l),new on(0,0,st.t32HB,st.t32l),new on(0,0,st.t33HB,st.t33l)];st.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];st.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];st.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];st.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];st.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];st.scfsi_band=[0,6,11,16,21];var g_=st,Em,CE;function LA(){if(CE)return Em;CE=1;var e=wA,t=Fn,n=t.VbrMode,s=t.Float,o=t.Util,a=t.new_float,i=t.new_int,r=t.assert,l=Ws(),c=MA,u=bp;d.Q_MAX=257,d.Q_MAX2=116,d.LARGE_BITS=1e5,d.IXMAX_VAL=8206;function d(){var m=__(),f=null,g=null,T=null;this.setModules=function(U,j,z){f=U,g=j,T=z};function S(U){return r(0<=U+d.Q_MAX2&&U<d.Q_MAX),L[U+d.Q_MAX2]}this.IPOW20=function(U){return r(0<=U&&U<d.Q_MAX),F[U]};var _=2220446049250313e-31,E=d.IXMAX_VAL,b=E+2,I=d.Q_MAX,R=d.Q_MAX2;d.LARGE_BITS;var O=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var x=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=x,this.sfBandIndex=[new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var L=a(I+R+1),F=a(I),D=a(b),V=a(b);this.adj43=V;function B(U,j){var z=T.ATHformula(j,U);return z-=O,z=Math.pow(10,z/10+U.ATHlower),z}function P(U){for(var j=U.internal_flags.ATH.l,z=U.internal_flags.ATH.psfb21,Y=U.internal_flags.ATH.s,te=U.internal_flags.ATH.psfb12,Z=U.internal_flags,G=U.out_samplerate,H=0;H<l.SBMAX_l;H++){var W=Z.scalefac_band.l[H],J=Z.scalefac_band.l[H+1];j[H]=s.MAX_VALUE;for(var ee=W;ee<J;ee++){var ge=ee*G/1152,Ee=B(U,ge);j[H]=Math.min(j[H],Ee)}}for(var H=0;H<l.PSFB21;H++){var W=Z.scalefac_band.psfb21[H],J=Z.scalefac_band.psfb21[H+1];z[H]=s.MAX_VALUE;for(var ee=W;ee<J;ee++){var ge=ee*G/1152,Ee=B(U,ge);z[H]=Math.min(z[H],Ee)}}for(var H=0;H<l.SBMAX_s;H++){var W=Z.scalefac_band.s[H],J=Z.scalefac_band.s[H+1];Y[H]=s.MAX_VALUE;for(var ee=W;ee<J;ee++){var ge=ee*G/384,Ee=B(U,ge);Y[H]=Math.min(Y[H],Ee)}Y[H]*=Z.scalefac_band.s[H+1]-Z.scalefac_band.s[H]}for(var H=0;H<l.PSFB12;H++){var W=Z.scalefac_band.psfb12[H],J=Z.scalefac_band.psfb12[H+1];te[H]=s.MAX_VALUE;for(var ee=W;ee<J;ee++){var ge=ee*G/384,Ee=B(U,ge);te[H]=Math.min(te[H],Ee)}te[H]*=Z.scalefac_band.s[13]-Z.scalefac_band.s[12]}if(U.noATH){for(var H=0;H<l.SBMAX_l;H++)j[H]=1e-20;for(var H=0;H<l.PSFB21;H++)z[H]=1e-20;for(var H=0;H<l.SBMAX_s;H++)Y[H]=1e-20;for(var H=0;H<l.PSFB12;H++)te[H]=1e-20}Z.ATH.floor=10*Math.log10(B(U,-1))}this.iteration_init=function(U){var j=U.internal_flags,z=j.l3_side,Y;if(j.iteration_init_init==0){for(j.iteration_init_init=1,z.main_data_begin=0,P(U),D[0]=0,Y=1;Y<b;Y++)D[Y]=Math.pow(Y,4/3);for(Y=0;Y<b-1;Y++)V[Y]=Y+1-Math.pow(.5*(D[Y]+D[Y+1]),.75);for(V[Y]=.5,Y=0;Y<I;Y++)F[Y]=Math.pow(2,(Y-210)*-.1875);for(Y=0;Y<=I+R;Y++)L[Y]=Math.pow(2,(Y-210-R)*.25);f.huffman_init(j);{var te,Z,G,H;for(Y=U.exp_nspsytune>>2&63,Y>=32&&(Y-=64),te=Math.pow(10,Y/4/10),Y=U.exp_nspsytune>>8&63,Y>=32&&(Y-=64),Z=Math.pow(10,Y/4/10),Y=U.exp_nspsytune>>14&63,Y>=32&&(Y-=64),G=Math.pow(10,Y/4/10),Y=U.exp_nspsytune>>20&63,Y>=32&&(Y-=64),H=G*Math.pow(10,Y/4/10),Y=0;Y<l.SBMAX_l;Y++){var W;Y<=6?W=te:Y<=13?W=Z:Y<=20?W=G:W=H,j.nsPsy.longfact[Y]=W}for(Y=0;Y<l.SBMAX_s;Y++){var W;Y<=5?W=te:Y<=10?W=Z:Y<=11?W=G:W=H,j.nsPsy.shortfact[Y]=W}}}},this.on_pe=function(U,j,z,Y,te,Z){var G=U.internal_flags,H=0,W,J=i(2),ee,ge=new c(H),Ee=g.ResvMaxBits(U,Y,ge,Z);H=ge.bits;var le=H+Ee;for(le>u.MAX_BITS_PER_GRANULE&&(le=u.MAX_BITS_PER_GRANULE),W=0,ee=0;ee<G.channels_out;++ee)z[ee]=Math.min(u.MAX_BITS_PER_CHANNEL,H/G.channels_out),J[ee]=0|z[ee]*j[te][ee]/700-z[ee],J[ee]>Y*3/4&&(J[ee]=Y*3/4),J[ee]<0&&(J[ee]=0),J[ee]+z[ee]>u.MAX_BITS_PER_CHANNEL&&(J[ee]=Math.max(0,u.MAX_BITS_PER_CHANNEL-z[ee])),W+=J[ee];if(W>Ee)for(ee=0;ee<G.channels_out;++ee)J[ee]=Ee*J[ee]/W;for(ee=0;ee<G.channels_out;++ee)z[ee]+=J[ee],Ee-=J[ee];for(W=0,ee=0;ee<G.channels_out;++ee)W+=z[ee];if(W>u.MAX_BITS_PER_GRANULE){var _e=0;for(ee=0;ee<G.channels_out;++ee)z[ee]*=u.MAX_BITS_PER_GRANULE,z[ee]/=W,_e+=z[ee]}return le},this.reduce_side=function(U,j,z,Y){r(U[0]+U[1]<=u.MAX_BITS_PER_GRANULE);var te=.33*(.5-j)/.5;te<0&&(te=0),te>.5&&(te=.5);var Z=0|te*.5*(U[0]+U[1]);Z>u.MAX_BITS_PER_CHANNEL-U[0]&&(Z=u.MAX_BITS_PER_CHANNEL-U[0]),Z<0&&(Z=0),U[1]>=125&&(U[1]-Z>125?(U[0]<z&&(U[0]+=Z),U[1]-=Z):(U[0]+=U[1]-125,U[1]=125)),Z=U[0]+U[1],Z>Y&&(U[0]=Y*U[0]/Z,U[1]=Y*U[1]/Z),r(U[0]<=u.MAX_BITS_PER_CHANNEL),r(U[1]<=u.MAX_BITS_PER_CHANNEL),r(U[0]+U[1]<=u.MAX_BITS_PER_GRANULE)},this.athAdjust=function(U,j,z){var Y=90.30873362,te=94.82444863,Z=o.FAST_LOG10_X(j,10),G=U*U,H=0;return Z-=z,G>1e-20&&(H=1+o.FAST_LOG10_X(G,10/Y)),H<0&&(H=0),Z*=H,Z+=z+Y-te,Math.pow(10,.1*Z)},this.calc_xmin=function(U,j,z,Y){var te=0,Z=U.internal_flags,G,H=0,W=0,J=Z.ATH,ee=z.xr,ge=U.VBR==n.vbr_mtrh?1:0,Ee=Z.masking_lower;for((U.VBR==n.vbr_mtrh||U.VBR==n.vbr_mt)&&(Ee=1),G=0;G<z.psy_lmax;G++){var le,_e,$e,He,Je,Xe;U.VBR==n.vbr_rh||U.VBR==n.vbr_mtrh?_e=athAdjust(J.adjust,J.l[G],J.floor):_e=J.adjust*J.l[G],Je=z.width[G],$e=_e/Je,He=_,Xe=Je>>1,le=0;do{var Qe,rt;Qe=ee[H]*ee[H],le+=Qe,He+=Qe<$e?Qe:$e,H++,rt=ee[H]*ee[H],le+=rt,He+=rt<$e?rt:$e,H++}while(--Xe>0);if(le>_e&&W++,G==l.SBPSY_l){var at=_e*Z.nsPsy.longfact[G];He<at&&(He=at)}if(ge!=0&&(_e=He),!U.ATHonly){var Et=j.en.l[G];if(Et>0){var at;at=le*j.thm.l[G]*Ee/Et,ge!=0&&(at*=Z.nsPsy.longfact[G]),_e<at&&(_e=at)}}ge!=0?Y[te++]=_e:Y[te++]=_e*Z.nsPsy.longfact[G]}var Lt=575;if(z.block_type!=l.SHORT_TYPE)for(var q=576;q--!=0&&m.EQ(ee[q],0);)Lt=q;z.max_nonzero_coeff=Lt;for(var ae=z.sfb_smin;G<z.psymax;ae++,G+=3){var Je,ie,be;for(U.VBR==n.vbr_rh||U.VBR==n.vbr_mtrh?be=athAdjust(J.adjust,J.s[ae],J.floor):be=J.adjust*J.s[ae],Je=z.width[G],ie=0;ie<3;ie++){var le=0,_e,$e,He,Xe=Je>>1;$e=be/Je,He=_;do{var Qe,rt;Qe=ee[H]*ee[H],le+=Qe,He+=Qe<$e?Qe:$e,H++,rt=ee[H]*ee[H],le+=rt,He+=rt<$e?rt:$e,H++}while(--Xe>0);if(le>be&&W++,ae==l.SBPSY_s){var at=be*Z.nsPsy.shortfact[ae];He<at&&(He=at)}if(ge!=0?_e=He:_e=be,!U.ATHonly&&!U.ATHshort){var Et=j.en.s[ae][ie];if(Et>0){var at;at=le*j.thm.s[ae][ie]*Ee/Et,ge!=0&&(at*=Z.nsPsy.shortfact[ae]),_e<at&&(_e=at)}}ge!=0?Y[te++]=_e:Y[te++]=_e*Z.nsPsy.shortfact[ae]}U.useTemporal&&(Y[te-3]>Y[te-3+1]&&(Y[te-3+1]+=(Y[te-3]-Y[te-3+1])*Z.decay),Y[te-3+1]>Y[te-3+2]&&(Y[te-3+2]+=(Y[te-3+1]-Y[te-3+2])*Z.decay))}return W};function k(U){this.s=U}this.calc_noise_core=function(U,j,z,Y){var te=0,Z=j.s,G=U.l3_enc;if(Z>U.count1)for(;z--!=0;){var H;H=U.xr[Z],Z++,te+=H*H,H=U.xr[Z],Z++,te+=H*H}else if(Z>U.big_values){var W=a(2);for(W[0]=0,W[1]=Y;z--!=0;){var H;H=Math.abs(U.xr[Z])-W[G[Z]],Z++,te+=H*H,H=Math.abs(U.xr[Z])-W[G[Z]],Z++,te+=H*H}}else for(;z--!=0;){var H;H=Math.abs(U.xr[Z])-D[G[Z]]*Y,Z++,te+=H*H,H=Math.abs(U.xr[Z])-D[G[Z]]*Y,Z++,te+=H*H}return j.s=Z,te},this.calc_noise=function(U,j,z,Y,te){var Z=0,G=0,H,W,J=0,ee=0,ge=0,Ee=-20,le=0,_e=U.scalefac,$e=0;for(Y.over_SSD=0,H=0;H<U.psymax;H++){var He=U.global_gain-(_e[$e++]+(U.preflag!=0?x[H]:0)<<U.scalefac_scale+1)-U.subblock_gain[U.window[H]]*8,Je=0;if(te!=null&&te.step[H]==He)Je=te.noise[H],le+=U.width[H],z[Z++]=Je/j[G++],Je=te.noise_log[H];else{var Xe=S(He);if(W=U.width[H]>>1,le+U.width[H]>U.max_nonzero_coeff){var Qe;Qe=U.max_nonzero_coeff-le+1,Qe>0?W=Qe>>1:W=0}var rt=new k(le);Je=this.calc_noise_core(U,rt,W,Xe),le=rt.s,te!=null&&(te.step[H]=He,te.noise[H]=Je),Je=z[Z++]=Je/j[G++],Je=o.FAST_LOG10(Math.max(Je,1e-20)),te!=null&&(te.noise_log[H]=Je)}if(te!=null&&(te.global_gain=U.global_gain),ge+=Je,Je>0){var at;at=Math.max(0|Je*10+.5,1),Y.over_SSD+=at*at,J++,ee+=Je}Ee=Math.max(Ee,Je)}return Y.over_count=J,Y.tot_noise=ge,Y.over_noise=ee,Y.max_noise=Ee,J},this.set_pinfo=function(U,j,z,Y,te){var Z=U.internal_flags,G,H,W,J,ee,ge=j.scalefac_scale==0?.5:1,Ee=j.scalefac,le=a(L3Side.SFBMAX),_e=a(L3Side.SFBMAX),$e=new CalcNoiseResult;calc_xmin(U,z,j,le),calc_noise(j,le,_e,$e,null);var He=0;for(H=j.sfb_lmax,j.block_type!=l.SHORT_TYPE&&j.mixed_block_flag==0&&(H=22),G=0;G<H;G++){var Je=Z.scalefac_band.l[G],Xe=Z.scalefac_band.l[G+1],Qe=Xe-Je;for(J=0;He<Xe;He++)J+=j.xr[He]*j.xr[He];J/=Qe,ee=1e15,Z.pinfo.en[Y][te][G]=ee*J,Z.pinfo.xfsf[Y][te][G]=ee*le[G]*_e[G]/Qe,z.en.l[G]>0&&!U.ATHonly?J=J/z.en.l[G]:J=0,Z.pinfo.thr[Y][te][G]=ee*Math.max(J*z.thm.l[G],Z.ATH.l[G]),Z.pinfo.LAMEsfb[Y][te][G]=0,j.preflag!=0&&G>=11&&(Z.pinfo.LAMEsfb[Y][te][G]=-ge*x[G]),G<l.SBPSY_l&&(r(Ee[G]>=0),Z.pinfo.LAMEsfb[Y][te][G]-=ge*Ee[G])}if(j.block_type==l.SHORT_TYPE)for(H=G,G=j.sfb_smin;G<l.SBMAX_s;G++)for(var Je=Z.scalefac_band.s[G],Xe=Z.scalefac_band.s[G+1],Qe=Xe-Je,rt=0;rt<3;rt++){for(J=0,W=Je;W<Xe;W++)J+=j.xr[He]*j.xr[He],He++;J=Math.max(J/Qe,1e-20),ee=1e15,Z.pinfo.en_s[Y][te][3*G+rt]=ee*J,Z.pinfo.xfsf_s[Y][te][3*G+rt]=ee*le[H]*_e[H]/Qe,z.en.s[G][rt]>0?J=J/z.en.s[G][rt]:J=0,(U.ATHonly||U.ATHshort)&&(J=0),Z.pinfo.thr_s[Y][te][3*G+rt]=ee*Math.max(J*z.thm.s[G][rt],Z.ATH.s[G]),Z.pinfo.LAMEsfb_s[Y][te][3*G+rt]=-2*j.subblock_gain[rt],G<l.SBPSY_s&&(Z.pinfo.LAMEsfb_s[Y][te][3*G+rt]-=ge*Ee[H]),H++}Z.pinfo.LAMEqss[Y][te]=j.global_gain,Z.pinfo.LAMEmainbits[Y][te]=j.part2_3_length+j.part2_length,Z.pinfo.LAMEsfbits[Y][te]=j.part2_length,Z.pinfo.over[Y][te]=$e.over_count,Z.pinfo.max_noise[Y][te]=$e.max_noise*10,Z.pinfo.over_noise[Y][te]=$e.over_noise*10,Z.pinfo.tot_noise[Y][te]=$e.tot_noise*10,Z.pinfo.over_SSD[Y][te]=$e.over_SSD}}return Em=d,Em}var Tm,OE;function kA(){if(OE)return Tm;OE=1;var e=Fn,t=e.System,n=e.Arrays,s=e.new_int,o=e.assert,a=Ws(),i=g_,r=h_,l=LA();function c(){var u=null;this.qupvt=null,this.setModules=function(Z){this.qupvt=Z,u=Z};function d(Z){this.bits=0|Z}var m=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function f(Z,G,H,W,J,ee){var ge=.5946/G;for(Z=Z>>1;Z--!=0;)J[ee++]=ge>H[W++]?0:1,J[ee++]=ge>H[W++]?0:1}function g(Z,G,H,W,J,ee){Z=Z>>1;var ge=Z%2;for(Z=Z>>1;Z--!=0;){var Ee,le,_e,$e,He,Je,Xe,Qe;Ee=H[W++]*G,le=H[W++]*G,He=0|Ee,_e=H[W++]*G,Je=0|le,$e=H[W++]*G,Xe=0|_e,Ee+=u.adj43[He],Qe=0|$e,le+=u.adj43[Je],J[ee++]=0|Ee,_e+=u.adj43[Xe],J[ee++]=0|le,$e+=u.adj43[Qe],J[ee++]=0|_e,J[ee++]=0|$e}if(ge!=0){var Ee,le,He,Je;Ee=H[W++]*G,le=H[W++]*G,He=0|Ee,Je=0|le,Ee+=u.adj43[He],le+=u.adj43[Je],J[ee++]=0|Ee,J[ee++]=0|le}}function T(Z,G,H,W,J){var ee,ge,Ee=0,le,_e=0,$e=0,He=0,Je=G,Xe=0,Qe=Je,rt=0,at=Z,Et=0;for(le=J!=null&&W.global_gain==J.global_gain,W.block_type==a.SHORT_TYPE?ge=38:ge=21,ee=0;ee<=ge;ee++){var Lt=-1;if((le||W.block_type==a.NORM_TYPE)&&(Lt=W.global_gain-(W.scalefac[ee]+(W.preflag!=0?u.pretab[ee]:0)<<W.scalefac_scale+1)-W.subblock_gain[W.window[ee]]*8),o(W.width[ee]>=0),le&&J.step[ee]==Lt)_e!=0&&(g(_e,H,at,Et,Qe,rt),_e=0),$e!=0&&(f($e,H,at,Et,Qe,rt),$e=0);else{var q=W.width[ee];if(Ee+W.width[ee]>W.max_nonzero_coeff){var ae;ae=W.max_nonzero_coeff-Ee+1,n.fill(G,W.max_nonzero_coeff,576,0),q=ae,q<0&&(q=0),ee=ge+1}if(_e==0&&$e==0&&(Qe=Je,rt=Xe,at=Z,Et=He),J!=null&&J.sfb_count1>0&&ee>=J.sfb_count1&&J.step[ee]>0&&Lt>=J.step[ee]?(_e!=0&&(g(_e,H,at,Et,Qe,rt),_e=0,Qe=Je,rt=Xe,at=Z,Et=He),$e+=q):($e!=0&&(f($e,H,at,Et,Qe,rt),$e=0,Qe=Je,rt=Xe,at=Z,Et=He),_e+=q),q<=0){$e!=0&&(f($e,H,at,Et,Qe,rt),$e=0),_e!=0&&(g(_e,H,at,Et,Qe,rt),_e=0);break}}ee<=ge&&(Xe+=W.width[ee],He+=W.width[ee],Ee+=W.width[ee])}_e!=0&&(g(_e,H,at,Et,Qe,rt),_e=0),$e!=0&&(f($e,H,at,Et,Qe,rt),$e=0)}function S(Z,G,H){var W=0,J=0;do{var ee=Z[G++],ge=Z[G++];W<ee&&(W=ee),J<ge&&(J=ge)}while(G<H);return W<J&&(W=J),W}function _(Z,G,H,W,J,ee){var ge=i.ht[W].xlen*65536+i.ht[J].xlen,Ee=0,le;do{var _e=Z[G++],$e=Z[G++];_e!=0&&(_e>14&&(_e=15,Ee+=ge),_e*=16),$e!=0&&($e>14&&($e=15,Ee+=ge),_e+=$e),Ee+=i.largetbl[_e]}while(G<H);return le=Ee&65535,Ee>>=16,Ee>le&&(Ee=le,W=J),ee.bits+=Ee,W}function E(Z,G,H,W){var J=0,ee=i.ht[1].hlen;do{var ge=Z[G+0]*2+Z[G+1];G+=2,J+=ee[ge]}while(G<H);return W.bits+=J,1}function b(Z,G,H,W,J){var ee=0,ge,Ee=i.ht[W].xlen,le;W==2?le=i.table23:le=i.table56;do{var _e=Z[G+0]*Ee+Z[G+1];G+=2,ee+=le[_e]}while(G<H);return ge=ee&65535,ee>>=16,ee>ge&&(ee=ge,W++),J.bits+=ee,W}function I(Z,G,H,W,J){var ee=0,ge=0,Ee=0,le=i.ht[W].xlen,_e=i.ht[W].hlen,$e=i.ht[W+1].hlen,He=i.ht[W+2].hlen;do{var Je=Z[G+0]*le+Z[G+1];G+=2,ee+=_e[Je],ge+=$e[Je],Ee+=He[Je]}while(G<H);var Xe=W;return ee>ge&&(ee=ge,Xe++),ee>Ee&&(ee=Ee,Xe=W+2),J.bits+=ee,Xe}var R=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function O(Z,G,H,W){var J=S(Z,G,H);switch(J){case 0:return J;case 1:return E(Z,G,H,W);case 2:case 3:return b(Z,G,H,R[J-1],W);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return I(Z,G,H,R[J-1],W);default:if(J>l.IXMAX_VAL)return W.bits=l.LARGE_BITS,-1;J-=15;var ee;for(ee=24;ee<32&&!(i.ht[ee].linmax>=J);ee++);var ge;for(ge=ee-8;ge<24&&!(i.ht[ge].linmax>=J);ge++);return _(Z,G,H,ge,ee,W)}}this.noquant_count_bits=function(Z,G,H){var W=G.l3_enc,J=Math.min(576,G.max_nonzero_coeff+2>>1<<1);for(H!=null&&(H.sfb_count1=0);J>1&&!(W[J-1]|W[J-2]);J-=2);G.count1=J;for(var ee=0,ge=0;J>3;J-=4){var Ee;if(((W[J-1]|W[J-2]|W[J-3]|W[J-4])&2147483647)>1)break;Ee=((W[J-4]*2+W[J-3])*2+W[J-2])*2+W[J-1],ee+=i.t32l[Ee],ge+=i.t33l[Ee]}var le=ee;if(G.count1table_select=0,ee>ge&&(le=ge,G.count1table_select=1),G.count1bits=le,G.big_values=J,J==0)return le;if(G.block_type==a.SHORT_TYPE)ee=3*Z.scalefac_band.s[3],ee>G.big_values&&(ee=G.big_values),ge=G.big_values;else if(G.block_type==a.NORM_TYPE){if(ee=G.region0_count=Z.bv_scf[J-2],ge=G.region1_count=Z.bv_scf[J-1],o(ee+ge+2<a.SBPSY_l),ge=Z.scalefac_band.l[ee+ge+2],ee=Z.scalefac_band.l[ee+1],ge<J){var _e=new d(le);G.table_select[2]=O(W,ge,J,_e),le=_e.bits}}else G.region0_count=7,G.region1_count=a.SBMAX_l-1-7-1,ee=Z.scalefac_band.l[8],ge=J,ee>ge&&(ee=ge);if(ee=Math.min(ee,J),ge=Math.min(ge,J),0<ee){var _e=new d(le);G.table_select[0]=O(W,0,ee,_e),le=_e.bits}if(ee<ge){var _e=new d(le);G.table_select[1]=O(W,ee,ge,_e),le=_e.bits}if(Z.use_best_huffman==2&&(G.part2_3_length=le,best_huffman_divide(Z,G),le=G.part2_3_length),H!=null&&G.block_type==a.NORM_TYPE){for(var $e=0;Z.scalefac_band.l[$e]<G.big_values;)$e++;H.sfb_count1=$e}return le},this.count_bits=function(Z,G,H,W){var J=H.l3_enc,ee=l.IXMAX_VAL/u.IPOW20(H.global_gain);if(H.xrpow_max>ee)return l.LARGE_BITS;if(T(G,J,u.IPOW20(H.global_gain),H,W),Z.substep_shaping&2)for(var ge=0,Ee=H.global_gain+H.scalefac_scale,le=.634521682242439/u.IPOW20(Ee),_e=0;_e<H.sfbmax;_e++){var $e=H.width[_e];if(Z.pseudohalf[_e]==0)ge+=$e;else{var He;for(He=ge,ge+=$e;He<ge;++He)J[He]=G[He]>=le?J[He]:0}}return this.noquant_count_bits(Z,H,W)};function x(Z,G,H,W,J,ee,ge){for(var Ee=G.big_values,le=0;le<=22;le++)W[le]=l.LARGE_BITS;for(var le=0;le<16;le++){var _e=Z.scalefac_band.l[le+1];if(_e>=Ee)break;var $e=0,He=new d($e),Je=O(H,0,_e,He);$e=He.bits;for(var Xe=0;Xe<8;Xe++){var Qe=Z.scalefac_band.l[le+Xe+2];if(Qe>=Ee)break;var rt=$e;He=new d(rt);var at=O(H,_e,Qe,He);rt=He.bits,W[le+Xe]>rt&&(W[le+Xe]=rt,J[le+Xe]=le,ee[le+Xe]=Je,ge[le+Xe]=at)}}}function L(Z,G,H,W,J,ee,ge,Ee){for(var le=G.big_values,_e=2;_e<a.SBMAX_l+1;_e++){var $e=Z.scalefac_band.l[_e];if($e>=le)break;var He=J[_e-2]+G.count1bits;if(H.part2_3_length<=He)break;var Je=new d(He),Xe=O(W,$e,le,Je);He=Je.bits,!(H.part2_3_length<=He)&&(H.assign(G),H.part2_3_length=He,H.region0_count=ee[_e-2],H.region1_count=_e-2-ee[_e-2],H.table_select[0]=ge[_e-2],H.table_select[1]=Ee[_e-2],H.table_select[2]=Xe)}}this.best_huffman_divide=function(Z,G){var H=new r,W=G.l3_enc,J=s(23),ee=s(23),ge=s(23),Ee=s(23);if(!(G.block_type==a.SHORT_TYPE&&Z.mode_gr==1)){H.assign(G),G.block_type==a.NORM_TYPE&&(x(Z,G,W,J,ee,ge,Ee),L(Z,H,G,W,J,ee,ge,Ee));var le=H.big_values;if(!(le==0||(W[le-2]|W[le-1])>1)&&(le=G.count1+2,!(le>576))){H.assign(G),H.count1=le;for(var _e=0,$e=0;le>H.big_values;le-=4){var He=((W[le-4]*2+W[le-3])*2+W[le-2])*2+W[le-1];_e+=i.t32l[He],$e+=i.t33l[He]}if(H.big_values=le,H.count1table_select=0,_e>$e&&(_e=$e,H.count1table_select=1),H.count1bits=_e,H.block_type==a.NORM_TYPE)L(Z,H,G,W,J,ee,ge,Ee);else{if(H.part2_3_length=_e,_e=Z.scalefac_band.l[8],_e>le&&(_e=le),_e>0){var Je=new d(H.part2_3_length);H.table_select[0]=O(W,0,_e,Je),H.part2_3_length=Je.bits}if(le>_e){var Je=new d(H.part2_3_length);H.table_select[1]=O(W,_e,le,Je),H.part2_3_length=Je.bits}G.part2_3_length>H.part2_3_length&&G.assign(H)}}}};var F=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],D=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],V=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],B=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];c.slen1_tab=V,c.slen2_tab=B;function P(Z,G){for(var H,W=G.tt[1][Z],J=G.tt[0][Z],ee=0;ee<i.scfsi_band.length-1;ee++){for(H=i.scfsi_band[ee];H<i.scfsi_band[ee+1]&&!(J.scalefac[H]!=W.scalefac[H]&&W.scalefac[H]>=0);H++);if(H==i.scfsi_band[ee+1]){for(H=i.scfsi_band[ee];H<i.scfsi_band[ee+1];H++)W.scalefac[H]=-1;G.scfsi[Z][ee]=1}}var ge=0,Ee=0;for(H=0;H<11;H++)W.scalefac[H]!=-1&&(Ee++,ge<W.scalefac[H]&&(ge=W.scalefac[H]));for(var le=0,_e=0;H<a.SBPSY_l;H++)W.scalefac[H]!=-1&&(_e++,le<W.scalefac[H]&&(le=W.scalefac[H]));for(var ee=0;ee<16;ee++)if(ge<F[ee]&&le<D[ee]){var $e=V[ee]*Ee+B[ee]*_e;W.part2_length>$e&&(W.part2_length=$e,W.scalefac_compress=ee)}}this.best_scalefac_store=function(Z,G,H,W){var J=W.tt[G][H],ee,ge,Ee,le,_e=0;for(Ee=0,ee=0;ee<J.sfbmax;ee++){var $e=J.width[ee];for(Ee+=$e,le=-$e;le<0&&J.l3_enc[le+Ee]==0;le++);le==0&&(J.scalefac[ee]=_e=-2)}if(J.scalefac_scale==0&&J.preflag==0){var He=0;for(ee=0;ee<J.sfbmax;ee++)J.scalefac[ee]>0&&(He|=J.scalefac[ee]);if(!(He&1)&&He!=0){for(ee=0;ee<J.sfbmax;ee++)J.scalefac[ee]>0&&(J.scalefac[ee]>>=1);J.scalefac_scale=_e=1}}if(J.preflag==0&&J.block_type!=a.SHORT_TYPE&&Z.mode_gr==2){for(ee=11;ee<a.SBPSY_l&&!(J.scalefac[ee]<u.pretab[ee]&&J.scalefac[ee]!=-2);ee++);if(ee==a.SBPSY_l){for(ee=11;ee<a.SBPSY_l;ee++)J.scalefac[ee]>0&&(J.scalefac[ee]-=u.pretab[ee]);J.preflag=_e=1}}for(ge=0;ge<4;ge++)W.scfsi[H][ge]=0;for(Z.mode_gr==2&&G==1&&W.tt[0][H].block_type!=a.SHORT_TYPE&&W.tt[1][H].block_type!=a.SHORT_TYPE&&(P(H,W),_e=0),ee=0;ee<J.sfbmax;ee++)J.scalefac[ee]==-2&&(J.scalefac[ee]=0);_e!=0&&(Z.mode_gr==2?this.scale_bitcount(J):this.scale_bitcount_lsf(Z,J))};function k(Z,G){for(var H=0;H<G;++H)if(Z[H]<0)return!1;return!0}var U=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],j=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],z=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(Z){var G,H,W=0,J=0,ee,ge=Z.scalefac;if(o(k(ge,Z.sfbmax)),Z.block_type==a.SHORT_TYPE)ee=U,Z.mixed_block_flag!=0&&(ee=j);else if(ee=z,Z.preflag==0){for(H=11;H<a.SBPSY_l&&!(ge[H]<u.pretab[H]);H++);if(H==a.SBPSY_l)for(Z.preflag=1,H=11;H<a.SBPSY_l;H++)ge[H]-=u.pretab[H]}for(H=0;H<Z.sfbdivide;H++)W<ge[H]&&(W=ge[H]);for(;H<Z.sfbmax;H++)J<ge[H]&&(J=ge[H]);for(Z.part2_length=l.LARGE_BITS,G=0;G<16;G++)W<F[G]&&J<D[G]&&Z.part2_length>ee[G]&&(Z.part2_length=ee[G],Z.scalefac_compress=G);return Z.part2_length==l.LARGE_BITS};var Y=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(Z,G){var H,W,J,ee,ge,Ee,le,_e,$e=s(4),He=G.scalefac;for(G.preflag!=0?H=2:H=0,le=0;le<4;le++)$e[le]=0;if(G.block_type==a.SHORT_TYPE){W=1;var Je=u.nr_of_sfb_block[H][W];for(_e=0,J=0;J<4;J++)for(ee=Je[J]/3,le=0;le<ee;le++,_e++)for(ge=0;ge<3;ge++)He[_e*3+ge]>$e[J]&&($e[J]=He[_e*3+ge])}else{W=0;var Je=u.nr_of_sfb_block[H][W];for(_e=0,J=0;J<4;J++)for(ee=Je[J],le=0;le<ee;le++,_e++)He[_e]>$e[J]&&($e[J]=He[_e])}for(Ee=!1,J=0;J<4;J++)$e[J]>Y[H][J]&&(Ee=!0);if(!Ee){var Xe,Qe,rt,at;for(G.sfb_partition_table=u.nr_of_sfb_block[H][W],J=0;J<4;J++)G.slen[J]=te[$e[J]];switch(Xe=G.slen[0],Qe=G.slen[1],rt=G.slen[2],at=G.slen[3],H){case 0:G.scalefac_compress=(Xe*5+Qe<<4)+(rt<<2)+at;break;case 1:G.scalefac_compress=400+(Xe*5+Qe<<2)+rt;break;case 2:G.scalefac_compress=500+Xe*3+Qe;break;default:t.err.printf(`intensity stereo not implemented yet
`);break}}if(!Ee)for(o(G.sfb_partition_table!=null),G.part2_length=0,J=0;J<4;J++)G.part2_length+=G.slen[J]*G.sfb_partition_table[J];return Ee};var te=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(Z){for(var G=2;G<=576;G+=2){for(var H=0,W;Z.scalefac_band.l[++H]<G;);for(W=m[H][0];Z.scalefac_band.l[W+1]>G;)W--;for(W<0&&(W=m[H][0]),Z.bv_scf[G-2]=W,W=m[H][1];Z.scalefac_band.l[W+Z.bv_scf[G-2]+2]>G;)W--;W<0&&(W=m[H][1]),Z.bv_scf[G-1]=W}}}return Tm=c,Tm}var ym,NE;function __(){if(NE)return ym;NE=1;var e=Fn,t=e.System,n=e.Arrays,s=e.new_byte,o=e.new_float_n,a=e.new_int,i=e.assert,r=kA(),l=g_,c=Ws(),u=bp;d.EQ=function(m,f){return Math.abs(m)>Math.abs(f)?Math.abs(m-f)<=Math.abs(m)*1e-6:Math.abs(m-f)<=Math.abs(f)*1e-6},d.NEQ=function(m,f){return!d.EQ(m,f)};function d(){var m=v_(),f=this,g=32773,T=null,S=null,_=null,E=null;this.setModules=function(G,H,W,J){T=G,S=H,_=W,E=J};var b=null,I=0,R=0,O=0;this.getframebits=function(G){var H=G.internal_flags,W;H.bitrate_index!=0?W=l.bitrate_table[G.version][H.bitrate_index]:W=G.brate;var J=0|(G.version+1)*72e3*W/G.out_samplerate+H.padding;return 8*J};function x(G){t.arraycopy(G.header[G.w_ptr].buf,0,b,R,G.sideinfo_len),R+=G.sideinfo_len,I+=G.sideinfo_len*8,G.w_ptr=G.w_ptr+1&u.MAX_HEADER_BUF-1}function L(G,H,W){for(;W>0;){var J;O==0&&(O=8,R++,i(R<m.LAME_MAXMP3BUFFER),i(G.header[G.w_ptr].write_timing>=I),G.header[G.w_ptr].write_timing==I&&x(G),b[R]=0),J=Math.min(W,O),W-=J,O-=J,b[R]|=H>>W<<O,I+=J}}function F(G,H,W){for(;W>0;){var J;O==0&&(O=8,R++,i(R<m.LAME_MAXMP3BUFFER),b[R]=0),J=Math.min(W,O),W-=J,O-=J,b[R]|=H>>W<<O,I+=J}}function D(G,H){var W=G.internal_flags,J;if(H>=8&&(L(W,76,8),H-=8),H>=8&&(L(W,65,8),H-=8),H>=8&&(L(W,77,8),H-=8),H>=8&&(L(W,69,8),H-=8),H>=32){var ee=_.getLameShortVersion();if(H>=32)for(J=0;J<ee.length&&H>=8;++J)H-=8,L(W,ee.charAt(J),8)}for(;H>=1;H-=1)L(W,W.ancillary_flag,1),W.ancillary_flag^=G.disable_reservoir?0:1}function V(G,H,W){for(var J=G.header[G.h_ptr].ptr;W>0;){var ee=Math.min(W,8-(J&7));W-=ee,G.header[G.h_ptr].buf[J>>3]|=H>>W<<8-(J&7)-ee,J+=ee}G.header[G.h_ptr].ptr=J}function B(G,H){G<<=8;for(var W=0;W<8;W++)G<<=1,H<<=1,(H^G)&65536&&(H^=g);return H}this.CRC_writeheader=function(G,H){var W=65535;W=B(H[2]&255,W),W=B(H[3]&255,W);for(var J=6;J<G.sideinfo_len;J++)W=B(H[J]&255,W);H[4]=byte(W>>8),H[5]=byte(W&255)};function P(G,H){var W=G.internal_flags,J,ee,ge;if(J=W.l3_side,W.header[W.h_ptr].ptr=0,n.fill(W.header[W.h_ptr].buf,0,W.sideinfo_len,0),G.out_samplerate<16e3?V(W,4094,12):V(W,4095,12),V(W,G.version,1),V(W,1,2),V(W,G.error_protection?0:1,1),V(W,W.bitrate_index,4),V(W,W.samplerate_index,2),V(W,W.padding,1),V(W,G.extension,1),V(W,G.mode.ordinal(),2),V(W,W.mode_ext,2),V(W,G.copyright,1),V(W,G.original,1),V(W,G.emphasis,2),G.error_protection&&V(W,0,16),G.version==1){for(i(J.main_data_begin>=0),V(W,J.main_data_begin,9),W.channels_out==2?V(W,J.private_bits,3):V(W,J.private_bits,5),ge=0;ge<W.channels_out;ge++){var Ee;for(Ee=0;Ee<4;Ee++)V(W,J.scfsi[ge][Ee],1)}for(ee=0;ee<2;ee++)for(ge=0;ge<W.channels_out;ge++){var le=J.tt[ee][ge];V(W,le.part2_3_length+le.part2_length,12),V(W,le.big_values/2,9),V(W,le.global_gain,8),V(W,le.scalefac_compress,4),le.block_type!=c.NORM_TYPE?(V(W,1,1),V(W,le.block_type,2),V(W,le.mixed_block_flag,1),le.table_select[0]==14&&(le.table_select[0]=16),V(W,le.table_select[0],5),le.table_select[1]==14&&(le.table_select[1]=16),V(W,le.table_select[1],5),V(W,le.subblock_gain[0],3),V(W,le.subblock_gain[1],3),V(W,le.subblock_gain[2],3)):(V(W,0,1),le.table_select[0]==14&&(le.table_select[0]=16),V(W,le.table_select[0],5),le.table_select[1]==14&&(le.table_select[1]=16),V(W,le.table_select[1],5),le.table_select[2]==14&&(le.table_select[2]=16),V(W,le.table_select[2],5),i(0<=le.region0_count&&le.region0_count<16),i(0<=le.region1_count&&le.region1_count<8),V(W,le.region0_count,4),V(W,le.region1_count,3)),V(W,le.preflag,1),V(W,le.scalefac_scale,1),V(W,le.count1table_select,1)}}else for(i(J.main_data_begin>=0),V(W,J.main_data_begin,8),V(W,J.private_bits,W.channels_out),ee=0,ge=0;ge<W.channels_out;ge++){var le=J.tt[ee][ge];V(W,le.part2_3_length+le.part2_length,12),V(W,le.big_values/2,9),V(W,le.global_gain,8),V(W,le.scalefac_compress,9),le.block_type!=c.NORM_TYPE?(V(W,1,1),V(W,le.block_type,2),V(W,le.mixed_block_flag,1),le.table_select[0]==14&&(le.table_select[0]=16),V(W,le.table_select[0],5),le.table_select[1]==14&&(le.table_select[1]=16),V(W,le.table_select[1],5),V(W,le.subblock_gain[0],3),V(W,le.subblock_gain[1],3),V(W,le.subblock_gain[2],3)):(V(W,0,1),le.table_select[0]==14&&(le.table_select[0]=16),V(W,le.table_select[0],5),le.table_select[1]==14&&(le.table_select[1]=16),V(W,le.table_select[1],5),le.table_select[2]==14&&(le.table_select[2]=16),V(W,le.table_select[2],5),i(0<=le.region0_count&&le.region0_count<16),i(0<=le.region1_count&&le.region1_count<8),V(W,le.region0_count,4),V(W,le.region1_count,3)),V(W,le.scalefac_scale,1),V(W,le.count1table_select,1)}G.error_protection&&CRC_writeheader(W,W.header[W.h_ptr].buf);{var _e=W.h_ptr;i(W.header[_e].ptr==W.sideinfo_len*8),W.h_ptr=_e+1&u.MAX_HEADER_BUF-1,W.header[W.h_ptr].write_timing=W.header[_e].write_timing+H,W.h_ptr==W.w_ptr&&t.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function k(G,H){var W=l.ht[H.count1table_select+32],J,ee=0,ge=H.big_values,Ee=H.big_values;for(i(H.count1table_select<2),J=(H.count1-H.big_values)/4;J>0;--J){var le=0,_e=0,$e;$e=H.l3_enc[ge+0],$e!=0&&(_e+=8,H.xr[Ee+0]<0&&le++),$e=H.l3_enc[ge+1],$e!=0&&(_e+=4,le*=2,H.xr[Ee+1]<0&&le++),$e=H.l3_enc[ge+2],$e!=0&&(_e+=2,le*=2,H.xr[Ee+2]<0&&le++),$e=H.l3_enc[ge+3],$e!=0&&(_e++,le*=2,H.xr[Ee+3]<0&&le++),ge+=4,Ee+=4,L(G,le+W.table[_e],W.hlen[_e]),ee+=W.hlen[_e]}return ee}function U(G,H,W,J,ee){var ge=l.ht[H],Ee=0;if(H==0)return Ee;for(var le=W;le<J;le+=2){var _e=0,$e=0,He=ge.xlen,Je=ge.xlen,Xe=0,Qe=ee.l3_enc[le],rt=ee.l3_enc[le+1];if(Qe!=0&&(ee.xr[le]<0&&Xe++,_e--),H>15){if(Qe>14){var at=Qe-15;i(at<=ge.linmax),Xe|=at<<1,$e=He,Qe=15}if(rt>14){var Et=rt-15;i(Et<=ge.linmax),Xe<<=He,Xe|=Et,$e+=He,rt=15}Je=16}rt!=0&&(Xe<<=1,ee.xr[le+1]<0&&Xe++,_e--),Qe=Qe*Je+rt,$e-=_e,_e+=ge.hlen[Qe],L(G,ge.table[Qe],_e),L(G,Xe,$e),Ee+=_e+$e}return Ee}function j(G,H){var W=3*G.scalefac_band.s[3];W>H.big_values&&(W=H.big_values);var J=U(G,H.table_select[0],0,W,H);return J+=U(G,H.table_select[1],W,H.big_values,H),J}function z(G,H){var W,J,ee,ge;W=H.big_values;var Ee=H.region0_count+1;return i(Ee<G.scalefac_band.l.length),ee=G.scalefac_band.l[Ee],Ee+=H.region1_count+1,i(Ee<G.scalefac_band.l.length),ge=G.scalefac_band.l[Ee],ee>W&&(ee=W),ge>W&&(ge=W),J=U(G,H.table_select[0],0,ee,H),J+=U(G,H.table_select[1],ee,ge,H),J+=U(G,H.table_select[2],ge,W,H),J}function Y(G){var H,W,J,ee,ge=0,Ee=G.internal_flags,le=Ee.l3_side;if(G.version==1)for(H=0;H<2;H++)for(W=0;W<Ee.channels_out;W++){var _e=le.tt[H][W],$e=r.slen1_tab[_e.scalefac_compress],He=r.slen2_tab[_e.scalefac_compress];for(ee=0,J=0;J<_e.sfbdivide;J++)_e.scalefac[J]!=-1&&(L(Ee,_e.scalefac[J],$e),ee+=$e);for(;J<_e.sfbmax;J++)_e.scalefac[J]!=-1&&(L(Ee,_e.scalefac[J],He),ee+=He);i(ee==_e.part2_length),_e.block_type==c.SHORT_TYPE?ee+=j(Ee,_e):ee+=z(Ee,_e),ee+=k(Ee,_e),i(ee==_e.part2_3_length+_e.part2_length),ge+=ee}else for(H=0,W=0;W<Ee.channels_out;W++){var _e=le.tt[H][W],Je,Xe,Qe=0;if(i(_e.sfb_partition_table!=null),ee=0,J=0,Xe=0,_e.block_type==c.SHORT_TYPE){for(;Xe<4;Xe++){var rt=_e.sfb_partition_table[Xe]/3,at=_e.slen[Xe];for(Je=0;Je<rt;Je++,J++)L(Ee,Math.max(_e.scalefac[J*3+0],0),at),L(Ee,Math.max(_e.scalefac[J*3+1],0),at),L(Ee,Math.max(_e.scalefac[J*3+2],0),at),Qe+=3*at}ee+=j(Ee,_e)}else{for(;Xe<4;Xe++){var rt=_e.sfb_partition_table[Xe],at=_e.slen[Xe];for(Je=0;Je<rt;Je++,J++)L(Ee,Math.max(_e.scalefac[J],0),at),Qe+=at}ee+=z(Ee,_e)}ee+=k(Ee,_e),i(ee==_e.part2_3_length),i(Qe==_e.part2_length),ge+=Qe+ee}return ge}function te(){this.total=0}function Z(G,H){var W=G.internal_flags,J,ee,ge,Ee,le;return le=W.w_ptr,Ee=W.h_ptr-1,Ee==-1&&(Ee=u.MAX_HEADER_BUF-1),J=W.header[Ee].write_timing-I,H.total=J,J>=0&&(ee=1+Ee-le,Ee<le&&(ee=1+Ee-le+u.MAX_HEADER_BUF),J-=ee*8*W.sideinfo_len),ge=f.getframebits(G),J+=ge,H.total+=ge,H.total%8!=0?H.total=1+H.total/8:H.total=H.total/8,H.total+=R+1,J<0&&t.err.println(`strange error flushing buffer ... 
`),J}this.flush_bitstream=function(G){var H=G.internal_flags,W,J,ee=H.h_ptr-1;if(ee==-1&&(ee=u.MAX_HEADER_BUF-1),W=H.l3_side,!((J=Z(G,new te))<0)){if(D(G,J),i(H.header[ee].write_timing+this.getframebits(G)==I),H.ResvSize=0,W.main_data_begin=0,H.findReplayGain){var ge=T.GetTitleGain(H.rgdata);i(NEQ(ge,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),H.RadioGain=Math.floor(ge*10+.5)|0}H.findPeakSample&&(H.noclipGainChange=Math.ceil(Math.log10(H.PeakSample/32767)*20*10)|0,H.noclipGainChange>0&&(EQ(G.scale,1)||EQ(G.scale,0))?H.noclipScale=Math.floor(32767/H.PeakSample*100)/100:H.noclipScale=-1)}},this.add_dummy_byte=function(G,H,W){for(var J=G.internal_flags,ee;W-- >0;)for(F(J,H,8),ee=0;ee<u.MAX_HEADER_BUF;++ee)J.header[ee].write_timing+=8},this.format_bitstream=function(G){var H=G.internal_flags,W;W=H.l3_side;var J=this.getframebits(G);D(G,W.resvDrain_pre),P(G,J);var ee=8*H.sideinfo_len;if(ee+=Y(G),D(G,W.resvDrain_post),ee+=W.resvDrain_post,W.main_data_begin+=(J-ee)/8,Z(G,new te)!=H.ResvSize&&t.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),W.main_data_begin*8!=H.ResvSize&&(t.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*W.main_data_begin,H.ResvSize,W.resvDrain_post,W.resvDrain_pre,8*H.sideinfo_len,ee-W.resvDrain_post-8*H.sideinfo_len,ee,ee%8,J),t.err.println("This is a fatal error.  It has several possible causes:"),t.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),t.err.println(" 9%%  Your system is overclocked"),t.err.println(" 1%%  bug in LAME encoding library"),H.ResvSize=W.main_data_begin*8),I>1e9){var ge;for(ge=0;ge<u.MAX_HEADER_BUF;++ge)H.header[ge].write_timing-=I;I=0}return 0},this.copy_buffer=function(G,H,W,J,ee){var ge=R+1;if(ge<=0)return 0;if(J!=0&&ge>J)return-1;if(t.arraycopy(b,0,H,W,ge),R=-1,O=0,ee!=0){var Ee=a(1);if(Ee[0]=G.nMusicCRC,E.updateMusicCRC(Ee,H,W,ge),G.nMusicCRC=Ee[0],ge>0&&(G.VBR_seek_table.nBytesWritten+=ge),G.decode_on_the_fly){for(var le=o([2,1152]),_e=ge,$e=-1,He;$e!=0;)if($e=S.hip_decode1_unclipped(G.hip,H,W,_e,le[0],le[1]),_e=0,$e==-1&&($e=0),$e>0){if(G.findPeakSample){for(He=0;He<$e;He++)le[0][He]>G.PeakSample?G.PeakSample=le[0][He]:-le[0][He]>G.PeakSample&&(G.PeakSample=-le[0][He]);if(G.channels_out>1)for(He=0;He<$e;He++)le[1][He]>G.PeakSample?G.PeakSample=le[1][He]:-le[1][He]>G.PeakSample&&(G.PeakSample=-le[1][He])}if(G.findReplayGain&&T.AnalyzeSamples(G.rgdata,le[0],0,le[1],0,$e,G.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return ge},this.init_bit_stream_w=function(G){b=s(m.LAME_MAXMP3BUFFER),G.h_ptr=G.w_ptr=0,G.header[G.h_ptr].write_timing=0,R=-1,O=0,I=0}}return ym=d,ym}var Sm,wE;function v_(){if(wE)return Sm;wE=1;var e=Fn,t=e.System,n=e.VbrMode,s=e.ShortBlock,o=e.new_float,a=e.new_int_n,i=e.new_short_n,r=e.assert,l=aTe,c=rTe,u=bp,d=xTe,m=MTe,f=UTe,g=__(),T=g_,S=Ws();function _(){var E=Wc,b=this,I=128*1024;_.V9=410,_.V8=420,_.V7=430,_.V6=440,_.V5=450,_.V4=460,_.V3=470,_.V2=480,_.V1=490,_.V0=500,_.R3MIX=1e3,_.STANDARD=1001,_.EXTREME=1002,_.INSANE=1003,_.STANDARD_FAST=1004,_.EXTREME_FAST=1005,_.MEDIUM=1006,_.MEDIUM_FAST=1007;var R=16384+I;_.LAME_MAXMP3BUFFER=R;var O,x,L,F,D,V=new l,B,P,k;this.enc=new S,this.setModules=function(q,ae,ie,be,fe,Se,Le,ke,De){O=q,x=ae,L=ie,F=be,D=fe,B=Se,P=ke,k=De,this.enc.setModules(x,V,F,B)};function U(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=o(S.SBMAX_l),this.bo_s_weight=o(S.SBMAX_s)}function j(){this.lowerlimit=0}function z(q,ae){this.lowpass=ae}var Y=4294479419;function te(q){var ae;return q.class_id=Y,ae=q.internal_flags=new u,q.mode=E.NOT_SET,q.original=1,q.in_samplerate=44100,q.num_channels=2,q.num_samples=-1,q.bWriteVbrTag=!0,q.quality=-1,q.short_blocks=null,ae.subblock_gain=-1,q.lowpassfreq=0,q.highpassfreq=0,q.lowpasswidth=-1,q.highpasswidth=-1,q.VBR=n.vbr_off,q.VBR_q=4,q.ATHcurve=-1,q.VBR_mean_bitrate_kbps=128,q.VBR_min_bitrate_kbps=0,q.VBR_max_bitrate_kbps=0,q.VBR_hard_min=0,ae.VBR_min_bitrate=1,ae.VBR_max_bitrate=13,q.quant_comp=-1,q.quant_comp_short=-1,q.msfix=-1,ae.resample_ratio=1,ae.OldValue[0]=180,ae.OldValue[1]=180,ae.CurrentStep[0]=4,ae.CurrentStep[1]=4,ae.masking_lower=1,ae.nsPsy.attackthre=-1,ae.nsPsy.attackthre_s=-1,q.scale=-1,q.athaa_type=-1,q.ATHtype=-1,q.athaa_loudapprox=-1,q.athaa_sensitivity=0,q.useTemporal=null,q.interChRatio=-1,ae.mf_samples_to_encode=S.ENCDELAY+S.POSTDELAY,q.encoder_padding=0,ae.mf_size=S.ENCDELAY-S.MDCTDELAY,q.findReplayGain=!1,q.decode_on_the_fly=!1,ae.decode_on_the_fly=!1,ae.findReplayGain=!1,ae.findPeakSample=!1,ae.RadioGain=0,ae.AudiophileGain=0,ae.noclipGainChange=0,ae.noclipScale=-1,q.preset=0,q.write_id3tag_automatic=!0,0}this.lame_init=function(){var q=new c;return te(q),q.lame_allocated_gfp=1,q};function Z(q){return q>1?0:q<=0?1:Math.cos(Math.PI/2*q)}this.nearestBitrateFullIndex=function(q){var ae=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],ie=0,be=0,fe=0,Se=0;Se=ae[16],fe=16,be=ae[16],ie=16;for(var Le=0;Le<16;Le++)if(Math.max(q,ae[Le+1])!=q){Se=ae[Le+1],fe=Le+1,be=ae[Le],ie=Le;break}return Se-q>q-be?ie:fe};function G(q,ae){var ie=44100;return ae>=48e3?ie=48e3:ae>=44100?ie=44100:ae>=32e3?ie=32e3:ae>=24e3?ie=24e3:ae>=22050?ie=22050:ae>=16e3?ie=16e3:ae>=12e3?ie=12e3:ae>=11025?ie=11025:ae>=8e3&&(ie=8e3),q==-1?ie:(q<=15960&&(ie=44100),q<=15250&&(ie=32e3),q<=11220&&(ie=24e3),q<=9970&&(ie=22050),q<=7230&&(ie=16e3),q<=5420&&(ie=12e3),q<=4510&&(ie=11025),q<=3970&&(ie=8e3),ae<ie?ae>44100?48e3:ae>32e3?44100:ae>24e3?32e3:ae>22050?24e3:ae>16e3?22050:ae>12e3?16e3:ae>11025?12e3:ae>8e3?11025:8e3:ie)}function H(q,ae){switch(q){case 44100:return ae.version=1,0;case 48e3:return ae.version=1,1;case 32e3:return ae.version=1,2;case 22050:return ae.version=0,0;case 24e3:return ae.version=0,1;case 16e3:return ae.version=0,2;case 11025:return ae.version=0,0;case 12e3:return ae.version=0,1;case 8e3:return ae.version=0,2;default:return ae.version=0,-1}}function W(q,ae,ie){ie<16e3&&(ae=2);for(var be=T.bitrate_table[ae][1],fe=2;fe<=14;fe++)T.bitrate_table[ae][fe]>0&&Math.abs(T.bitrate_table[ae][fe]-q)<Math.abs(be-q)&&(be=T.bitrate_table[ae][fe]);return be}function J(q,ae,ie){ie<16e3&&(ae=2);for(var be=0;be<=14;be++)if(T.bitrate_table[ae][be]>0&&T.bitrate_table[ae][be]==q)return be;return-1}function ee(q,ae){var ie=[new z(8,2e3),new z(16,3700),new z(24,3900),new z(32,5500),new z(40,7e3),new z(48,7500),new z(56,1e4),new z(64,11e3),new z(80,13500),new z(96,15100),new z(112,15600),new z(128,17e3),new z(160,17500),new z(192,18600),new z(224,19400),new z(256,19700),new z(320,20500)],be=b.nearestBitrateFullIndex(ae);q.lowerlimit=ie[be].lowpass}function ge(q){var ae=q.internal_flags,ie=32,be=-1;if(ae.lowpass1>0){for(var fe=999,Se=0;Se<=31;Se++){var Le=Se/31;Le>=ae.lowpass2&&(ie=Math.min(ie,Se)),ae.lowpass1<Le&&Le<ae.lowpass2&&(fe=Math.min(fe,Se))}fe==999?ae.lowpass1=(ie-.75)/31:ae.lowpass1=(fe-.75)/31,ae.lowpass2=ie/31}if(ae.highpass2>0&&ae.highpass2<.9*(.75/31)&&(ae.highpass1=0,ae.highpass2=0,t.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),ae.highpass2>0){for(var ke=-1,Se=0;Se<=31;Se++){var Le=Se/31;Le<=ae.highpass1&&(be=Math.max(be,Se)),ae.highpass1<Le&&Le<ae.highpass2&&(ke=Math.max(ke,Se))}ae.highpass1=be/31,ke==-1?ae.highpass2=(be+.75)/31:ae.highpass2=(ke+.75)/31}for(var Se=0;Se<32;Se++){var De,Ue,Le=Se/31;ae.highpass2>ae.highpass1?De=Z((ae.highpass2-Le)/(ae.highpass2-ae.highpass1+1e-20)):De=1,ae.lowpass2>ae.lowpass1?Ue=Z((Le-ae.lowpass1)/(ae.lowpass2-ae.lowpass1+1e-20)):Ue=1,ae.amp_filter[Se]=De*Ue}}function Ee(q){var ae=q.internal_flags;switch(q.quality){default:case 9:ae.psymodel=0,ae.noise_shaping=0,ae.noise_shaping_amp=0,ae.noise_shaping_stop=0,ae.use_best_huffman=0,ae.full_outer_loop=0;break;case 8:q.quality=7;case 7:ae.psymodel=1,ae.noise_shaping=0,ae.noise_shaping_amp=0,ae.noise_shaping_stop=0,ae.use_best_huffman=0,ae.full_outer_loop=0;break;case 6:ae.psymodel=1,ae.noise_shaping==0&&(ae.noise_shaping=1),ae.noise_shaping_amp=0,ae.noise_shaping_stop=0,ae.subblock_gain==-1&&(ae.subblock_gain=1),ae.use_best_huffman=0,ae.full_outer_loop=0;break;case 5:ae.psymodel=1,ae.noise_shaping==0&&(ae.noise_shaping=1),ae.noise_shaping_amp=0,ae.noise_shaping_stop=0,ae.subblock_gain==-1&&(ae.subblock_gain=1),ae.use_best_huffman=0,ae.full_outer_loop=0;break;case 4:ae.psymodel=1,ae.noise_shaping==0&&(ae.noise_shaping=1),ae.noise_shaping_amp=0,ae.noise_shaping_stop=0,ae.subblock_gain==-1&&(ae.subblock_gain=1),ae.use_best_huffman=1,ae.full_outer_loop=0;break;case 3:ae.psymodel=1,ae.noise_shaping==0&&(ae.noise_shaping=1),ae.noise_shaping_amp=1,ae.noise_shaping_stop=1,ae.subblock_gain==-1&&(ae.subblock_gain=1),ae.use_best_huffman=1,ae.full_outer_loop=0;break;case 2:ae.psymodel=1,ae.noise_shaping==0&&(ae.noise_shaping=1),ae.substep_shaping==0&&(ae.substep_shaping=2),ae.noise_shaping_amp=1,ae.noise_shaping_stop=1,ae.subblock_gain==-1&&(ae.subblock_gain=1),ae.use_best_huffman=1,ae.full_outer_loop=0;break;case 1:ae.psymodel=1,ae.noise_shaping==0&&(ae.noise_shaping=1),ae.substep_shaping==0&&(ae.substep_shaping=2),ae.noise_shaping_amp=2,ae.noise_shaping_stop=1,ae.subblock_gain==-1&&(ae.subblock_gain=1),ae.use_best_huffman=1,ae.full_outer_loop=0;break;case 0:ae.psymodel=1,ae.noise_shaping==0&&(ae.noise_shaping=1),ae.substep_shaping==0&&(ae.substep_shaping=2),ae.noise_shaping_amp=2,ae.noise_shaping_stop=1,ae.subblock_gain==-1&&(ae.subblock_gain=1),ae.use_best_huffman=1,ae.full_outer_loop=0;break}}function le(q){var ae=q.internal_flags;q.frameNum=0,q.write_id3tag_automatic&&P.id3tag_write_v2(q),ae.bitrate_stereoMode_Hist=a([16,5]),ae.bitrate_blockType_Hist=a([16,6]),ae.PeakSample=0,q.bWriteVbrTag&&B.InitVbrTag(q)}this.lame_init_params=function(q){var ae=q.internal_flags;if(ae.Class_ID=0,ae.ATH==null&&(ae.ATH=new d),ae.PSY==null&&(ae.PSY=new U),ae.rgdata==null&&(ae.rgdata=new m),ae.channels_in=q.num_channels,ae.channels_in==1&&(q.mode=E.MONO),ae.channels_out=q.mode==E.MONO?1:2,ae.mode_ext=S.MPG_MD_MS_LR,q.mode==E.MONO&&(q.force_ms=!1),q.VBR==n.vbr_off&&q.VBR_mean_bitrate_kbps!=128&&q.brate==0&&(q.brate=q.VBR_mean_bitrate_kbps),q.VBR==n.vbr_off||q.VBR==n.vbr_mtrh||q.VBR==n.vbr_mt||(q.free_format=!1),q.VBR==n.vbr_off&&q.brate==0&&g.EQ(q.compression_ratio,0)&&(q.compression_ratio=11.025),q.VBR==n.vbr_off&&q.compression_ratio>0&&(q.out_samplerate==0&&(q.out_samplerate=map2MP3Frequency(int(.97*q.in_samplerate))),q.brate=0|q.out_samplerate*16*ae.channels_out/(1e3*q.compression_ratio),ae.samplerate_index=H(q.out_samplerate,q),q.free_format||(q.brate=W(q.brate,q.version,q.out_samplerate))),q.out_samplerate!=0&&(q.out_samplerate<16e3?(q.VBR_mean_bitrate_kbps=Math.max(q.VBR_mean_bitrate_kbps,8),q.VBR_mean_bitrate_kbps=Math.min(q.VBR_mean_bitrate_kbps,64)):q.out_samplerate<32e3?(q.VBR_mean_bitrate_kbps=Math.max(q.VBR_mean_bitrate_kbps,8),q.VBR_mean_bitrate_kbps=Math.min(q.VBR_mean_bitrate_kbps,160)):(q.VBR_mean_bitrate_kbps=Math.max(q.VBR_mean_bitrate_kbps,32),q.VBR_mean_bitrate_kbps=Math.min(q.VBR_mean_bitrate_kbps,320))),q.lowpassfreq==0){var ie=16e3;switch(q.VBR){case n.vbr_off:{var be=new j;ee(be,q.brate),ie=be.lowerlimit;break}case n.vbr_abr:{var be=new j;ee(be,q.VBR_mean_bitrate_kbps),ie=be.lowerlimit;break}case n.vbr_rh:{var fe=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=q.VBR_q&&q.VBR_q<=9){var Se=fe[q.VBR_q],Le=fe[q.VBR_q+1],ke=q.VBR_q_frac;ie=linear_int(Se,Le,ke)}else ie=19500;break}default:{var fe=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=q.VBR_q&&q.VBR_q<=9){var Se=fe[q.VBR_q],Le=fe[q.VBR_q+1],ke=q.VBR_q_frac;ie=linear_int(Se,Le,ke)}else ie=19500}}q.mode==E.MONO&&(q.VBR==n.vbr_off||q.VBR==n.vbr_abr)&&(ie*=1.5),q.lowpassfreq=ie|0}if(q.out_samplerate==0&&(2*q.lowpassfreq>q.in_samplerate&&(q.lowpassfreq=q.in_samplerate/2),q.out_samplerate=G(q.lowpassfreq|0,q.in_samplerate)),q.lowpassfreq=Math.min(20500,q.lowpassfreq),q.lowpassfreq=Math.min(q.out_samplerate/2,q.lowpassfreq),q.VBR==n.vbr_off&&(q.compression_ratio=q.out_samplerate*16*ae.channels_out/(1e3*q.brate)),q.VBR==n.vbr_abr&&(q.compression_ratio=q.out_samplerate*16*ae.channels_out/(1e3*q.VBR_mean_bitrate_kbps)),q.bWriteVbrTag||(q.findReplayGain=!1,q.decode_on_the_fly=!1,ae.findPeakSample=!1),ae.findReplayGain=q.findReplayGain,ae.decode_on_the_fly=q.decode_on_the_fly,ae.decode_on_the_fly&&(ae.findPeakSample=!0),ae.findReplayGain&&O.InitGainAnalysis(ae.rgdata,q.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return q.internal_flags=null,-6;switch(ae.decode_on_the_fly&&!q.decode_only&&(ae.hip!=null&&k.hip_decode_exit(ae.hip),ae.hip=k.hip_decode_init()),ae.mode_gr=q.out_samplerate<=24e3?1:2,q.framesize=576*ae.mode_gr,q.encoder_delay=S.ENCDELAY,ae.resample_ratio=q.in_samplerate/q.out_samplerate,q.VBR){case n.vbr_mt:case n.vbr_rh:case n.vbr_mtrh:{var De=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];q.compression_ratio=De[q.VBR_q]}break;case n.vbr_abr:q.compression_ratio=q.out_samplerate*16*ae.channels_out/(1e3*q.VBR_mean_bitrate_kbps);break;default:q.compression_ratio=q.out_samplerate*16*ae.channels_out/(1e3*q.brate);break}if(q.mode==E.NOT_SET&&(q.mode=E.JOINT_STEREO),q.highpassfreq>0?(ae.highpass1=2*q.highpassfreq,q.highpasswidth>=0?ae.highpass2=2*(q.highpassfreq+q.highpasswidth):ae.highpass2=1*2*q.highpassfreq,ae.highpass1/=q.out_samplerate,ae.highpass2/=q.out_samplerate):(ae.highpass1=0,ae.highpass2=0),q.lowpassfreq>0?(ae.lowpass2=2*q.lowpassfreq,q.lowpasswidth>=0?(ae.lowpass1=2*(q.lowpassfreq-q.lowpasswidth),ae.lowpass1<0&&(ae.lowpass1=0)):ae.lowpass1=1*2*q.lowpassfreq,ae.lowpass1/=q.out_samplerate,ae.lowpass2/=q.out_samplerate):(ae.lowpass1=0,ae.lowpass2=0),ge(q),ae.samplerate_index=H(q.out_samplerate,q),ae.samplerate_index<0)return q.internal_flags=null,-1;if(q.VBR==n.vbr_off){if(q.free_format)ae.bitrate_index=0;else if(q.brate=W(q.brate,q.version,q.out_samplerate),ae.bitrate_index=J(q.brate,q.version,q.out_samplerate),ae.bitrate_index<=0)return q.internal_flags=null,-1}else ae.bitrate_index=1;q.analysis&&(q.bWriteVbrTag=!1),ae.pinfo!=null&&(q.bWriteVbrTag=!1),x.init_bit_stream_w(ae);for(var Ue=ae.samplerate_index+3*q.version+6*(q.out_samplerate<16e3?1:0),de=0;de<S.SBMAX_l+1;de++)ae.scalefac_band.l[de]=F.sfBandIndex[Ue].l[de];for(var de=0;de<S.PSFB21+1;de++){var Ce=(ae.scalefac_band.l[22]-ae.scalefac_band.l[21])/S.PSFB21,Pe=ae.scalefac_band.l[21]+de*Ce;ae.scalefac_band.psfb21[de]=Pe}ae.scalefac_band.psfb21[S.PSFB21]=576;for(var de=0;de<S.SBMAX_s+1;de++)ae.scalefac_band.s[de]=F.sfBandIndex[Ue].s[de];for(var de=0;de<S.PSFB12+1;de++){var Ce=(ae.scalefac_band.s[13]-ae.scalefac_band.s[12])/S.PSFB12,Pe=ae.scalefac_band.s[12]+de*Ce;ae.scalefac_band.psfb12[de]=Pe}ae.scalefac_band.psfb12[S.PSFB12]=192,q.version==1?ae.sideinfo_len=ae.channels_out==1?21:36:ae.sideinfo_len=ae.channels_out==1?13:21,q.error_protection&&(ae.sideinfo_len+=2),le(q),ae.Class_ID=Y;{var Q;for(Q=0;Q<19;Q++)ae.nsPsy.pefirbuf[Q]=700*ae.mode_gr*ae.channels_out;q.ATHtype==-1&&(q.ATHtype=4)}switch(r(q.VBR_q<=9),r(q.VBR_q>=0),q.VBR){case n.vbr_mt:q.VBR=n.vbr_mtrh;case n.vbr_mtrh:{q.useTemporal==null&&(q.useTemporal=!1),L.apply_preset(q,500-q.VBR_q*10,0),q.quality<0&&(q.quality=LAME_DEFAULT_QUALITY),q.quality<5&&(q.quality=0),q.quality>5&&(q.quality=5),ae.PSY.mask_adjust=q.maskingadjust,ae.PSY.mask_adjust_short=q.maskingadjust_short,q.experimentalY?ae.sfb21_extra=!1:ae.sfb21_extra=q.out_samplerate>44e3,ae.iteration_loop=new VBRNewIterationLoop(D);break}case n.vbr_rh:{L.apply_preset(q,500-q.VBR_q*10,0),ae.PSY.mask_adjust=q.maskingadjust,ae.PSY.mask_adjust_short=q.maskingadjust_short,q.experimentalY?ae.sfb21_extra=!1:ae.sfb21_extra=q.out_samplerate>44e3,q.quality>6&&(q.quality=6),q.quality<0&&(q.quality=LAME_DEFAULT_QUALITY),ae.iteration_loop=new VBROldIterationLoop(D);break}default:{var ne;ae.sfb21_extra=!1,q.quality<0&&(q.quality=LAME_DEFAULT_QUALITY),ne=q.VBR,ne==n.vbr_off&&(q.VBR_mean_bitrate_kbps=q.brate),L.apply_preset(q,q.VBR_mean_bitrate_kbps,0),q.VBR=ne,ae.PSY.mask_adjust=q.maskingadjust,ae.PSY.mask_adjust_short=q.maskingadjust_short,ne==n.vbr_off?ae.iteration_loop=new f(D):ae.iteration_loop=new ABRIterationLoop(D);break}}if(r(q.scale>=0),q.VBR!=n.vbr_off){if(ae.VBR_min_bitrate=1,ae.VBR_max_bitrate=14,q.out_samplerate<16e3&&(ae.VBR_max_bitrate=8),q.VBR_min_bitrate_kbps!=0&&(q.VBR_min_bitrate_kbps=W(q.VBR_min_bitrate_kbps,q.version,q.out_samplerate),ae.VBR_min_bitrate=J(q.VBR_min_bitrate_kbps,q.version,q.out_samplerate),ae.VBR_min_bitrate<0)||q.VBR_max_bitrate_kbps!=0&&(q.VBR_max_bitrate_kbps=W(q.VBR_max_bitrate_kbps,q.version,q.out_samplerate),ae.VBR_max_bitrate=J(q.VBR_max_bitrate_kbps,q.version,q.out_samplerate),ae.VBR_max_bitrate<0))return-1;q.VBR_min_bitrate_kbps=T.bitrate_table[q.version][ae.VBR_min_bitrate],q.VBR_max_bitrate_kbps=T.bitrate_table[q.version][ae.VBR_max_bitrate],q.VBR_mean_bitrate_kbps=Math.min(T.bitrate_table[q.version][ae.VBR_max_bitrate],q.VBR_mean_bitrate_kbps),q.VBR_mean_bitrate_kbps=Math.max(T.bitrate_table[q.version][ae.VBR_min_bitrate],q.VBR_mean_bitrate_kbps)}return q.tune&&(ae.PSY.mask_adjust+=q.tune_value_a,ae.PSY.mask_adjust_short+=q.tune_value_a),Ee(q),r(q.scale>=0),q.athaa_type<0?ae.ATH.useAdjust=3:ae.ATH.useAdjust=q.athaa_type,ae.ATH.aaSensitivityP=Math.pow(10,q.athaa_sensitivity/-10),q.short_blocks==null&&(q.short_blocks=s.short_block_allowed),q.short_blocks==s.short_block_allowed&&(q.mode==E.JOINT_STEREO||q.mode==E.STEREO)&&(q.short_blocks=s.short_block_coupled),q.quant_comp<0&&(q.quant_comp=1),q.quant_comp_short<0&&(q.quant_comp_short=0),q.msfix<0&&(q.msfix=0),q.exp_nspsytune=q.exp_nspsytune|1,q.internal_flags.nsPsy.attackthre<0&&(q.internal_flags.nsPsy.attackthre=l.NSATTACKTHRE),q.internal_flags.nsPsy.attackthre_s<0&&(q.internal_flags.nsPsy.attackthre_s=l.NSATTACKTHRE_S),r(q.scale>=0),q.scale<0&&(q.scale=1),q.ATHtype<0&&(q.ATHtype=4),q.ATHcurve<0&&(q.ATHcurve=4),q.athaa_loudapprox<0&&(q.athaa_loudapprox=2),q.interChRatio<0&&(q.interChRatio=0),q.useTemporal==null&&(q.useTemporal=!0),ae.slot_lag=ae.frac_SpF=0,q.VBR==n.vbr_off&&(ae.slot_lag=ae.frac_SpF=(q.version+1)*72e3*q.brate%q.out_samplerate|0),F.iteration_init(q),V.psymodel_init(q),r(q.scale>=0),0};function _e(q,ae){(q.in_buffer_0==null||q.in_buffer_nsamples<ae)&&(q.in_buffer_0=o(ae),q.in_buffer_1=o(ae),q.in_buffer_nsamples=ae)}this.lame_encode_flush=function(q,ae,ie,be){var fe=q.internal_flags,Se=i([2,1152]),Le=0,ke,De,Ue,de,Ce=fe.mf_samples_to_encode-S.POSTDELAY,Pe=$e(q);if(fe.mf_samples_to_encode<1)return 0;for(ke=0,q.in_samplerate!=q.out_samplerate&&(Ce+=16*q.out_samplerate/q.in_samplerate),Ue=q.framesize-Ce%q.framesize,Ue<576&&(Ue+=q.framesize),q.encoder_padding=Ue,de=(Ce+Ue)/q.framesize;de>0&&Le>=0;){var Q=Pe-fe.mf_size,ne=q.frameNum;Q*=q.in_samplerate,Q/=q.out_samplerate,Q>1152&&(Q=1152),Q<1&&(Q=1),De=be-ke,be==0&&(De=0),Le=this.lame_encode_buffer(q,Se[0],Se[1],Q,ae,ie,De),ie+=Le,ke+=Le,de-=ne!=q.frameNum?1:0}if(fe.mf_samples_to_encode=0,Le<0||(De=be-ke,be==0&&(De=0),x.flush_bitstream(q),Le=x.copy_buffer(fe,ae,ie,De,1),Le<0))return Le;if(ie+=Le,ke+=Le,De=be-ke,be==0&&(De=0),q.write_id3tag_automatic){if(P.id3tag_write_v1(q),Le=x.copy_buffer(fe,ae,ie,De,0),Le<0)return Le;ke+=Le}return ke},this.lame_encode_buffer=function(q,ae,ie,be,fe,Se,Le){var ke=q.internal_flags,De=[null,null];if(ke.Class_ID!=Y)return-3;if(be==0)return 0;_e(ke,be),De[0]=ke.in_buffer_0,De[1]=ke.in_buffer_1;for(var Ue=0;Ue<be;Ue++)De[0][Ue]=ae[Ue],ke.channels_in>1&&(De[1][Ue]=ie[Ue]);return He(q,De[0],De[1],be,fe,Se,Le)};function $e(q){var ae=S.BLKSIZE+q.framesize-S.FFTOFFSET;return ae=Math.max(ae,512+q.framesize-32),ae}function He(q,ae,ie,be,fe,Se,Le){var ke=q.internal_flags,De=0,Ue,de,Ce,Pe,Q,ne=[null,null],ue=[null,null];if(ke.Class_ID!=Y)return-3;if(be==0)return 0;if(Q=x.copy_buffer(ke,fe,Se,Le,0),Q<0)return Q;if(Se+=Q,De+=Q,ue[0]=ae,ue[1]=ie,g.NEQ(q.scale,0)&&g.NEQ(q.scale,1))for(de=0;de<be;++de)ue[0][de]*=q.scale,ke.channels_out==2&&(ue[1][de]*=q.scale);if(g.NEQ(q.scale_left,0)&&g.NEQ(q.scale_left,1))for(de=0;de<be;++de)ue[0][de]*=q.scale_left;if(g.NEQ(q.scale_right,0)&&g.NEQ(q.scale_right,1))for(de=0;de<be;++de)ue[1][de]*=q.scale_right;if(q.num_channels==2&&ke.channels_out==1)for(de=0;de<be;++de)ue[0][de]=.5*(ue[0][de]+ue[1][de]),ue[1][de]=0;Pe=$e(q),ne[0]=ke.mfbuf[0],ne[1]=ke.mfbuf[1];for(var ve=0;be>0;){var we=[null,null],he=0,Te=0;we[0]=ue[0],we[1]=ue[1];var Ie=new Xe;if(Lt(q,ne,we,ve,be,Ie),he=Ie.n_in,Te=Ie.n_out,ke.findReplayGain&&!ke.decode_on_the_fly&&O.AnalyzeSamples(ke.rgdata,ne[0],ke.mf_size,ne[1],ke.mf_size,Te,ke.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(be-=he,ve+=he,ke.channels_out==2,ke.mf_size+=Te,r(ke.mf_size<=u.MFSIZE),ke.mf_samples_to_encode<1&&(ke.mf_samples_to_encode=S.ENCDELAY+S.POSTDELAY),ke.mf_samples_to_encode+=Te,ke.mf_size>=Pe){var ye=Le-De;if(Le==0&&(ye=0),Ue=Je(q,ne[0],ne[1],fe,Se,ye),Ue<0)return Ue;for(Se+=Ue,De+=Ue,ke.mf_size-=q.framesize,ke.mf_samples_to_encode-=q.framesize,Ce=0;Ce<ke.channels_out;Ce++)for(de=0;de<ke.mf_size;de++)ne[Ce][de]=ne[Ce][de+q.framesize]}}return De}function Je(q,ae,ie,be,fe,Se){var Le=b.enc.lame_encode_mp3_frame(q,ae,ie,be,fe,Se);return q.frameNum++,Le}function Xe(){this.n_in=0,this.n_out=0}function Qe(){this.num_used=0}function rt(q,ae){return ae!=0?rt(ae,q%ae):q}function at(q,ae,ie){var be=Math.PI*ae;q/=ie,q<0&&(q=0),q>1&&(q=1);var fe=q-.5,Se=.42-.5*Math.cos(2*q*Math.PI)+.08*Math.cos(4*q*Math.PI);return Math.abs(fe)<1e-9?be/Math.PI:Se*Math.sin(ie*be*fe)/(Math.PI*ie*fe)}function Et(q,ae,ie,be,fe,Se,Le,ke,De){var Ue=q.internal_flags,de,Ce=0,Pe,Q=q.out_samplerate/rt(q.out_samplerate,q.in_samplerate);Q>u.BPC&&(Q=u.BPC);var ne=Math.abs(Ue.resample_ratio-Math.floor(.5+Ue.resample_ratio))<1e-4?1:0,ue=1/Ue.resample_ratio;ue>1&&(ue=1);var ve=31;ve%2==0&&--ve,ve+=ne;var we=ve+1;if(Ue.fill_buffer_resample_init==0){for(Ue.inbuf_old[0]=o(we),Ue.inbuf_old[1]=o(we),de=0;de<=2*Q;++de)Ue.blackfilt[de]=o(we);for(Ue.itime[0]=0,Ue.itime[1]=0,Ce=0;Ce<=2*Q;Ce++){var he=0,Te=(Ce-Q)/(2*Q);for(de=0;de<=ve;de++)he+=Ue.blackfilt[Ce][de]=at(de-Te,ue,ve);for(de=0;de<=ve;de++)Ue.blackfilt[Ce][de]/=he}Ue.fill_buffer_resample_init=1}var Ie=Ue.inbuf_old[De];for(Pe=0;Pe<be;Pe++){var ye,Be;if(ye=Pe*Ue.resample_ratio,Ce=0|Math.floor(ye-Ue.itime[De]),ve+Ce-ve/2>=Le)break;var Te=ye-Ue.itime[De]-(Ce+.5*(ve%2));Be=0|Math.floor(Te*2*Q+Q+.5);var xe=0;for(de=0;de<=ve;++de){var Ge=0|de+Ce-ve/2,ot;ot=Ge<0?Ie[we+Ge]:fe[Se+Ge],xe+=ot*Ue.blackfilt[Be][de]}ae[ie+Pe]=xe}if(ke.num_used=Math.min(Le,ve+Ce-ve/2),Ue.itime[De]+=ke.num_used-Pe*Ue.resample_ratio,ke.num_used>=we)for(de=0;de<we;de++)Ie[de]=fe[Se+ke.num_used+de-we];else{var Tt=we-ke.num_used;for(de=0;de<Tt;++de)Ie[de]=Ie[de+ke.num_used];for(Ce=0;de<we;++de,++Ce)Ie[de]=fe[Se+Ce];r(Ce==ke.num_used)}return Pe}function Lt(q,ae,ie,be,fe,Se){var Le=q.internal_flags;if(Le.resample_ratio<.9999||Le.resample_ratio>1.0001)for(var ke=0;ke<Le.channels_out;ke++){var De=new Qe;Se.n_out=Et(q,ae[ke],Le.mf_size,q.framesize,ie[ke],be,fe,De,ke),Se.n_in=De.num_used}else{Se.n_out=Math.min(q.framesize,fe),Se.n_in=Se.n_out;for(var Ue=0;Ue<Se.n_out;++Ue)ae[0][Le.mf_size+Ue]=ie[0][be+Ue],Le.channels_out==2&&(ae[1][Le.mf_size+Ue]=ie[1][be+Ue])}}}return Sm=_,Sm}var GTe=Fn,ao=GTe.VbrMode;function VTe(){var e=v_();function t(u,d,m,f,g,T,S,_,E,b,I,R,O,x,L){this.vbr_q=u,this.quant_comp=d,this.quant_comp_s=m,this.expY=f,this.st_lrm=g,this.st_s=T,this.masking_adj=S,this.masking_adj_short=_,this.ath_lower=E,this.ath_curve=b,this.ath_sensitivity=I,this.interch=R,this.safejoint=O,this.sfb21mod=x,this.msfix=L}function n(u,d,m,f,g,T,S,_,E,b,I,R,O,x){this.quant_comp=d,this.quant_comp_s=m,this.safejoint=f,this.nsmsfix=g,this.st_lrm=T,this.st_s=S,this.nsbass=_,this.scale=E,this.masking_adj=b,this.ath_lower=I,this.ath_curve=R,this.interch=O,this.sfscale=x}var s;this.setModules=function(u){s=u};var o=[new t(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new t(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new t(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new t(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new t(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new t(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new t(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new t(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new t(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],a=[new t(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new t(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new t(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new t(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new t(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new t(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new t(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new t(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new t(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function i(u,d,m){var f=u.VBR==ao.vbr_rh?o:a,g=u.VBR_q_frac,T=f[d],S=f[d+1],_=T;T.st_lrm=T.st_lrm+g*(S.st_lrm-T.st_lrm),T.st_s=T.st_s+g*(S.st_s-T.st_s),T.masking_adj=T.masking_adj+g*(S.masking_adj-T.masking_adj),T.masking_adj_short=T.masking_adj_short+g*(S.masking_adj_short-T.masking_adj_short),T.ath_lower=T.ath_lower+g*(S.ath_lower-T.ath_lower),T.ath_curve=T.ath_curve+g*(S.ath_curve-T.ath_curve),T.ath_sensitivity=T.ath_sensitivity+g*(S.ath_sensitivity-T.ath_sensitivity),T.interch=T.interch+g*(S.interch-T.interch),T.msfix=T.msfix+g*(S.msfix-T.msfix),c(u,_.vbr_q),m!=0?u.quant_comp=_.quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=_.quant_comp),m!=0?u.quant_comp_short=_.quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=_.quant_comp_s),_.expY!=0&&(u.experimentalY=_.expY!=0),m!=0?u.internal_flags.nsPsy.attackthre=_.st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=_.st_lrm),m!=0?u.internal_flags.nsPsy.attackthre_s=_.st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=_.st_s),m!=0?u.maskingadjust=_.masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=_.masking_adj),m!=0?u.maskingadjust_short=_.masking_adj_short:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=_.masking_adj_short),m!=0?u.ATHlower=-_.ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-_.ath_lower/10),m!=0?u.ATHcurve=_.ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=_.ath_curve),m!=0?u.athaa_sensitivity=_.ath_sensitivity:Math.abs(u.athaa_sensitivity- -1)>0||(u.athaa_sensitivity=_.ath_sensitivity),_.interch>0&&(m!=0?u.interChRatio=_.interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=_.interch)),_.safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|_.safejoint),_.sfb21mod>0&&(u.exp_nspsytune=u.exp_nspsytune|_.sfb21mod<<20),m!=0?u.msfix=_.msfix:Math.abs(u.msfix- -1)>0||(u.msfix=_.msfix),m==0&&(u.VBR_q=d,u.VBR_q_frac=g)}var r=[new n(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new n(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new n(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new n(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new n(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new n(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new n(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new n(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new n(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new n(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new n(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new n(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new n(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new n(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new n(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new n(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new n(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function l(u,d,m){var f=d,g=s.nearestBitrateFullIndex(d);if(u.VBR=ao.vbr_abr,u.VBR_mean_bitrate_kbps=f,u.VBR_mean_bitrate_kbps=Math.min(u.VBR_mean_bitrate_kbps,320),u.VBR_mean_bitrate_kbps=Math.max(u.VBR_mean_bitrate_kbps,8),u.brate=u.VBR_mean_bitrate_kbps,u.VBR_mean_bitrate_kbps>320&&(u.disable_reservoir=!0),r[g].safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|2),r[g].sfscale>0&&(u.internal_flags.noise_shaping=2),Math.abs(r[g].nsbass)>0){var T=int(r[g].nsbass*4);T<0&&(T+=64),u.exp_nspsytune=u.exp_nspsytune|T<<2}return m!=0?u.quant_comp=r[g].quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=r[g].quant_comp),m!=0?u.quant_comp_short=r[g].quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=r[g].quant_comp_s),m!=0?u.msfix=r[g].nsmsfix:Math.abs(u.msfix- -1)>0||(u.msfix=r[g].nsmsfix),m!=0?u.internal_flags.nsPsy.attackthre=r[g].st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=r[g].st_lrm),m!=0?u.internal_flags.nsPsy.attackthre_s=r[g].st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=r[g].st_s),m!=0?u.scale=r[g].scale:Math.abs(u.scale- -1)>0||(u.scale=r[g].scale),m!=0?u.maskingadjust=r[g].masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=r[g].masking_adj),r[g].masking_adj>0?m!=0?u.maskingadjust_short=r[g].masking_adj*.9:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=r[g].masking_adj*.9):m!=0?u.maskingadjust_short=r[g].masking_adj*1.1:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=r[g].masking_adj*1.1),m!=0?u.ATHlower=-r[g].ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-r[g].ath_lower/10),m!=0?u.ATHcurve=r[g].ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=r[g].ath_curve),m!=0?u.interChRatio=r[g].interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=r[g].interch),d}this.apply_preset=function(u,d,m){switch(d){case e.R3MIX:{d=e.V3,u.VBR=ao.vbr_mtrh;break}case e.MEDIUM:{d=e.V4,u.VBR=ao.vbr_rh;break}case e.MEDIUM_FAST:{d=e.V4,u.VBR=ao.vbr_mtrh;break}case e.STANDARD:{d=e.V2,u.VBR=ao.vbr_rh;break}case e.STANDARD_FAST:{d=e.V2,u.VBR=ao.vbr_mtrh;break}case e.EXTREME:{d=e.V0,u.VBR=ao.vbr_rh;break}case e.EXTREME_FAST:{d=e.V0,u.VBR=ao.vbr_mtrh;break}case e.INSANE:return d=320,u.preset=d,l(u,d,m),u.VBR=ao.vbr_off,d}switch(u.preset=d,d){case e.V9:return i(u,9,m),d;case e.V8:return i(u,8,m),d;case e.V7:return i(u,7,m),d;case e.V6:return i(u,6,m),d;case e.V5:return i(u,5,m),d;case e.V4:return i(u,4,m),d;case e.V3:return i(u,3,m),d;case e.V2:return i(u,2,m),d;case e.V1:return i(u,1,m),d;case e.V0:return i(u,0,m),d}return 8<=d&&d<=320?l(u,d,m):(u.preset=0,d)};function c(u,d){var m=0;return 0>d&&(m=-1,d=0),9<d&&(m=-1,d=9),u.VBR_q=d,u.VBR_q_frac=0,m}}var HTe=VTe;function WTe(){this.setModules=function(e,t){}}var zTe=WTe;function jTe(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var KTe=jTe,DA=Fn,RE=DA.new_float,YTe=DA.new_int;function XTe(){this.global_gain=0,this.sfb_count1=0,this.step=YTe(39),this.noise=RE(39),this.noise_log=RE(39)}var qTe=XTe,dl=Fn,ti=dl.System,xE=dl.VbrMode,Am=dl.Util,wr=dl.Arrays,wl=dl.new_float,Rl=dl.assert,ZTe=zTe,Im=KTe,QTe=qTe,rn=Ws(),$E=h_,ME=vp;function JTe(){var e;this.rv=null;var t;this.qupvt=null;var n,s=new ZTe,o;this.setModules=function(_,E,b,I){e=_,t=E,this.rv=E,n=b,this.qupvt=b,o=I,s.setModules(n,o)},this.ms_convert=function(_,E){for(var b=0;b<576;++b){var I=_.tt[E][0].xr[b],R=_.tt[E][1].xr[b];_.tt[E][0].xr[b]=(I+R)*(Am.SQRT2*.5),_.tt[E][1].xr[b]=(I-R)*(Am.SQRT2*.5)}};function a(_,E,b,I){I=0;for(var R=0;R<=b;++R){var O=Math.abs(_.xr[R]);I+=O,E[R]=Math.sqrt(O*Math.sqrt(O)),E[R]>_.xrpow_max&&(_.xrpow_max=E[R])}return I}this.init_xrpow=function(_,E,b){var I=0,R=0|E.max_nonzero_coeff;if(E.xrpow_max=0,wr.fill(b,R,576,0),I=a(E,b,R,I),I>1e-20){var O=0;_.substep_shaping&2&&(O=1);for(var x=0;x<E.psymax;x++)_.pseudohalf[x]=O;return!0}return wr.fill(E.l3_enc,0,576,0),!1};function i(_,E){var b=_.ATH,I=E.xr;if(E.block_type!=rn.SHORT_TYPE)for(var R=!1,O=rn.PSFB21-1;O>=0&&!R;O--){var x=_.scalefac_band.psfb21[O],L=_.scalefac_band.psfb21[O+1],F=n.athAdjust(b.adjust,b.psfb21[O],b.floor);_.nsPsy.longfact[21]>1e-12&&(F*=_.nsPsy.longfact[21]);for(var D=L-1;D>=x;D--)if(Math.abs(I[D])<F)I[D]=0;else{R=!0;break}}else for(var V=0;V<3;V++)for(var R=!1,O=rn.PSFB12-1;O>=0&&!R;O--){var x=_.scalefac_band.s[12]*3+(_.scalefac_band.s[13]-_.scalefac_band.s[12])*V+(_.scalefac_band.psfb12[O]-_.scalefac_band.psfb12[0]),L=x+(_.scalefac_band.psfb12[O+1]-_.scalefac_band.psfb12[O]),B=n.athAdjust(b.adjust,b.psfb12[O],b.floor);_.nsPsy.shortfact[12]>1e-12&&(B*=_.nsPsy.shortfact[12]);for(var D=L-1;D>=x;D--)if(Math.abs(I[D])<B)I[D]=0;else{R=!0;break}}}this.init_outer_loop=function(_,E){E.part2_3_length=0,E.big_values=0,E.count1=0,E.global_gain=210,E.scalefac_compress=0,E.table_select[0]=0,E.table_select[1]=0,E.table_select[2]=0,E.subblock_gain[0]=0,E.subblock_gain[1]=0,E.subblock_gain[2]=0,E.subblock_gain[3]=0,E.region0_count=0,E.region1_count=0,E.preflag=0,E.scalefac_scale=0,E.count1table_select=0,E.part2_length=0,E.sfb_lmax=rn.SBPSY_l,E.sfb_smin=rn.SBPSY_s,E.psy_lmax=_.sfb21_extra?rn.SBMAX_l:rn.SBPSY_l,E.psymax=E.psy_lmax,E.sfbmax=E.sfb_lmax,E.sfbdivide=11;for(var b=0;b<rn.SBMAX_l;b++)E.width[b]=_.scalefac_band.l[b+1]-_.scalefac_band.l[b],E.window[b]=3;if(E.block_type==rn.SHORT_TYPE){var I=wl(576);E.sfb_smin=0,E.sfb_lmax=0,E.mixed_block_flag!=0&&(E.sfb_smin=3,E.sfb_lmax=_.mode_gr*2+4),E.psymax=E.sfb_lmax+3*((_.sfb21_extra?rn.SBMAX_s:rn.SBPSY_s)-E.sfb_smin),E.sfbmax=E.sfb_lmax+3*(rn.SBPSY_s-E.sfb_smin),E.sfbdivide=E.sfbmax-18,E.psy_lmax=E.sfb_lmax;var R=_.scalefac_band.l[E.sfb_lmax];ti.arraycopy(E.xr,0,I,0,576);for(var b=E.sfb_smin;b<rn.SBMAX_s;b++)for(var O=_.scalefac_band.s[b],x=_.scalefac_band.s[b+1],L=0;L<3;L++)for(var F=O;F<x;F++)E.xr[R++]=I[3*F+L];for(var D=E.sfb_lmax,b=E.sfb_smin;b<rn.SBMAX_s;b++)E.width[D]=E.width[D+1]=E.width[D+2]=_.scalefac_band.s[b+1]-_.scalefac_band.s[b],E.window[D]=0,E.window[D+1]=1,E.window[D+2]=2,D+=3}E.count1bits=0,E.sfb_partition_table=n.nr_of_sfb_block[0][0],E.slen[0]=0,E.slen[1]=0,E.slen[2]=0,E.slen[3]=0,E.max_nonzero_coeff=575,wr.fill(E.scalefac,0),i(_,E)};function r(_){this.ordinal=_}r.BINSEARCH_NONE=new r(0),r.BINSEARCH_UP=new r(1),r.BINSEARCH_DOWN=new r(2);function l(_,E,b,I,R){var O,x=_.CurrentStep[I],L=!1,F=_.OldValue[I],D=r.BINSEARCH_NONE;for(E.global_gain=F,b-=E.part2_length;;){var V;if(O=o.count_bits(_,R,E,null),x==1||O==b)break;O>b?(D==r.BINSEARCH_DOWN&&(L=!0),L&&(x/=2),D=r.BINSEARCH_UP,V=x):(D==r.BINSEARCH_UP&&(L=!0),L&&(x/=2),D=r.BINSEARCH_DOWN,V=-x),E.global_gain+=V,E.global_gain<0&&(E.global_gain=0,L=!0),E.global_gain>255&&(E.global_gain=255,L=!0)}for(Rl(E.global_gain>=0),Rl(E.global_gain<256);O>b&&E.global_gain<255;)E.global_gain++,O=o.count_bits(_,R,E,null);return _.CurrentStep[I]=F-E.global_gain>=4?4:2,_.OldValue[I]=E.global_gain,E.part2_3_length=O,O}this.trancate_smallspectrums=function(_,E,b,I){var R=wl(ME.SFBMAX);if(!(!(_.substep_shaping&4)&&E.block_type==rn.SHORT_TYPE||_.substep_shaping&128)){n.calc_noise(E,b,R,new Im,null);for(var x=0;x<576;x++){var O=0;E.l3_enc[x]!=0&&(O=Math.abs(E.xr[x])),I[x]=O}var x=0,L=8;E.block_type==rn.SHORT_TYPE&&(L=6);do{var F,D,V,B,P=E.width[L];if(x+=P,!(R[L]>=1)&&(wr.sort(I,x-P,P),!BitStream.EQ(I[x-1],0))){F=(1-R[L])*b[L],D=0,B=0;do{var k;for(V=1;B+V<P&&!BitStream.NEQ(I[B+x-P],I[B+x+V-P]);V++);if(k=I[B+x-P]*I[B+x-P]*V,F<k){B!=0&&(D=I[B+x-P-1]);break}F-=k,B+=V}while(B<P);if(!BitStream.EQ(D,0))do Math.abs(E.xr[x-P])<=D&&(E.l3_enc[x-P]=0);while(--P>0)}}while(++L<E.psymax);E.part2_3_length=o.noquant_count_bits(_,E,null)}};function c(_){for(var E=0;E<_.sfbmax;E++)if(_.scalefac[E]+_.subblock_gain[_.window[E]]==0)return!1;return!0}function u(_){return Am.FAST_LOG10(.368+.632*_*_*_)}function d(_,E){for(var b=1e-37,I=0;I<E.psymax;I++)b+=u(_[I]);return Math.max(1e-20,b)}function m(_,E,b,I,R){var O;switch(_){default:case 9:{E.over_count>0?(O=b.over_SSD<=E.over_SSD,b.over_SSD==E.over_SSD&&(O=b.bits<E.bits)):O=b.max_noise<0&&b.max_noise*10+b.bits<=E.max_noise*10+E.bits;break}case 0:O=b.over_count<E.over_count||b.over_count==E.over_count&&b.over_noise<E.over_noise||b.over_count==E.over_count&&BitStream.EQ(b.over_noise,E.over_noise)&&b.tot_noise<E.tot_noise;break;case 8:b.max_noise=d(R,I);case 1:O=b.max_noise<E.max_noise;break;case 2:O=b.tot_noise<E.tot_noise;break;case 3:O=b.tot_noise<E.tot_noise&&b.max_noise<E.max_noise;break;case 4:O=b.max_noise<=0&&E.max_noise>.2||b.max_noise<=0&&E.max_noise<0&&E.max_noise>b.max_noise-.2&&b.tot_noise<E.tot_noise||b.max_noise<=0&&E.max_noise>0&&E.max_noise>b.max_noise-.2&&b.tot_noise<E.tot_noise+E.over_noise||b.max_noise>0&&E.max_noise>-.05&&E.max_noise>b.max_noise-.1&&b.tot_noise+b.over_noise<E.tot_noise+E.over_noise||b.max_noise>0&&E.max_noise>-.1&&E.max_noise>b.max_noise-.15&&b.tot_noise+b.over_noise+b.over_noise<E.tot_noise+E.over_noise+E.over_noise;break;case 5:O=b.over_noise<E.over_noise||BitStream.EQ(b.over_noise,E.over_noise)&&b.tot_noise<E.tot_noise;break;case 6:O=b.over_noise<E.over_noise||BitStream.EQ(b.over_noise,E.over_noise)&&(b.max_noise<E.max_noise||BitStream.EQ(b.max_noise,E.max_noise)&&b.tot_noise<=E.tot_noise);break;case 7:O=b.over_count<E.over_count||b.over_noise<E.over_noise;break}return E.over_count==0&&(O=O&&b.bits<E.bits),O}function f(_,E,b,I,R){var O=_.internal_flags,x;E.scalefac_scale==0?x=1.2968395546510096:x=1.6817928305074292;for(var L=0,F=0;F<E.sfbmax;F++)L<b[F]&&(L=b[F]);var D=O.noise_shaping_amp;switch(D==3&&(R?D=2:D=1),D){case 2:break;case 1:L>1?L=Math.pow(L,.5):L*=.95;break;case 0:default:L>1?L=1:L*=.95;break}for(var V=0,F=0;F<E.sfbmax;F++){var B=E.width[F],P;if(V+=B,!(b[F]<L)){if(O.substep_shaping&2&&(O.pseudohalf[F]=O.pseudohalf[F]==0?1:0,O.pseudohalf[F]==0&&O.noise_shaping_amp==2))return;for(E.scalefac[F]++,P=-B;P<0;P++)I[V+P]*=x,I[V+P]>E.xrpow_max&&(E.xrpow_max=I[V+P]);if(O.noise_shaping_amp==2)return}}}function g(_,E){for(var b=1.2968395546510096,I=0,R=0;R<_.sfbmax;R++){var O=_.width[R],x=_.scalefac[R];if(_.preflag!=0&&(x+=n.pretab[R]),I+=O,x&1){x++;for(var L=-O;L<0;L++)E[I+L]*=b,E[I+L]>_.xrpow_max&&(_.xrpow_max=E[I+L])}_.scalefac[R]=x>>1}_.preflag=0,_.scalefac_scale=1}function T(_,E,b){var I,R=E.scalefac;for(I=0;I<E.sfb_lmax;I++)if(R[I]>=16)return!0;for(var O=0;O<3;O++){var x=0,L=0;for(I=E.sfb_lmax+O;I<E.sfbdivide;I+=3)x<R[I]&&(x=R[I]);for(;I<E.sfbmax;I+=3)L<R[I]&&(L=R[I]);if(!(x<16&&L<8)){if(E.subblock_gain[O]>=7)return!0;E.subblock_gain[O]++;var F=_.scalefac_band.l[E.sfb_lmax];for(I=E.sfb_lmax+O;I<E.sfbmax;I+=3){var D,V=E.width[I],B=R[I];if(B=B-(4>>E.scalefac_scale),B>=0){R[I]=B,F+=V*3;continue}R[I]=0;{var P=210+(B<<E.scalefac_scale+1);D=n.IPOW20(P)}F+=V*(O+1);for(var k=-V;k<0;k++)b[F+k]*=D,b[F+k]>E.xrpow_max&&(E.xrpow_max=b[F+k]);F+=V*(3-O-1)}{var D=n.IPOW20(202);F+=E.width[I]*(O+1);for(var k=-E.width[I];k<0;k++)b[F+k]*=D,b[F+k]>E.xrpow_max&&(E.xrpow_max=b[F+k])}}}return!1}function S(_,E,b,I,R){var O=_.internal_flags;f(_,E,b,I,R);var x=c(E);return x?!1:(O.mode_gr==2?x=o.scale_bitcount(E):x=o.scale_bitcount_lsf(O,E),x?(O.noise_shaping>1&&(wr.fill(O.pseudohalf,0),E.scalefac_scale==0?(g(E,I),x=!1):E.block_type==rn.SHORT_TYPE&&O.subblock_gain>0&&(x=T(O,E,I)||c(E))),x||(O.mode_gr==2?x=o.scale_bitcount(E):x=o.scale_bitcount_lsf(O,E)),!x):!0)}this.outer_loop=function(_,E,b,I,R,O){var x=_.internal_flags,L=new $E,F=wl(576),D=wl(ME.SFBMAX),V=new Im,B,P=new QTe,k=9999999,U=!1,j=!1,z=0;if(l(x,E,O,R,I),x.noise_shaping==0)return 100;n.calc_noise(E,b,D,V,P),V.bits=E.part2_3_length,L.assign(E);var Y=0;for(ti.arraycopy(I,0,F,0,576);!U;){do{var te=new Im,Z,G=255;if(x.substep_shaping&2?Z=20:Z=3,x.sfb21_extra&&(D[L.sfbmax]>1||L.block_type==rn.SHORT_TYPE&&(D[L.sfbmax+1]>1||D[L.sfbmax+2]>1))||!S(_,L,D,I,j))break;L.scalefac_scale!=0&&(G=254);var H=O-L.part2_length;if(H<=0)break;for(;(L.part2_3_length=o.count_bits(x,I,L,P))>H&&L.global_gain<=G;)L.global_gain++;if(L.global_gain>G)break;if(V.over_count==0){for(;(L.part2_3_length=o.count_bits(x,I,L,P))>k&&L.global_gain<=G;)L.global_gain++;if(L.global_gain>G)break}if(n.calc_noise(L,b,D,te,P),te.bits=L.part2_3_length,E.block_type!=rn.SHORT_TYPE?B=_.quant_comp:B=_.quant_comp_short,B=m(B,V,te,L,D)?1:0,B!=0)k=E.part2_3_length,V=te,E.assign(L),Y=0,ti.arraycopy(I,0,F,0,576);else if(x.full_outer_loop==0&&(++Y>Z&&V.over_count==0||x.noise_shaping_amp==3&&j&&Y>30||x.noise_shaping_amp==3&&j&&L.global_gain-z>15))break}while(L.global_gain+L.scalefac_scale<255);x.noise_shaping_amp==3?j?U=!0:(L.assign(E),ti.arraycopy(F,0,I,0,576),Y=0,z=L.global_gain,j=!0):U=!0}return Rl(E.global_gain+E.scalefac_scale<=255),_.VBR==xE.vbr_rh||_.VBR==xE.vbr_mtrh?ti.arraycopy(F,0,I,0,576):x.substep_shaping&1&&trancate_smallspectrums(x,E,b,I),V.over_count},this.iteration_finish_one=function(_,E,b){var I=_.l3_side,R=I.tt[E][b];o.best_scalefac_store(_,E,b,I),_.use_best_huffman==1&&o.best_huffman_divide(_,R),t.ResvAdjust(_,R)},this.VBR_encode_granule=function(_,E,b,I,R,O,x){var L=_.internal_flags,F=new $E,D=wl(576),V=x,B=x+1,P=(x+O)/2,k,U,j=0,z=L.sfb21_extra;Rl(V<=LameInternalFlags.MAX_BITS_PER_CHANNEL),wr.fill(F.l3_enc,0);do P>V-42?L.sfb21_extra=!1:L.sfb21_extra=z,U=outer_loop(_,E,b,I,R,P),U<=0?(j=1,B=E.part2_3_length,F.assign(E),ti.arraycopy(I,0,D,0,576),x=B-32,k=x-O,P=(x+O)/2):(O=P+32,k=x-O,P=(x+O)/2,j!=0&&(j=2,E.assign(F),ti.arraycopy(D,0,I,0,576)));while(k>12);L.sfb21_extra=z,j==2&&ti.arraycopy(F.l3_enc,0,E.l3_enc,0,576),Rl(E.part2_3_length<=V)},this.get_framebits=function(_,E){var b=_.internal_flags;b.bitrate_index=b.VBR_min_bitrate;var I=e.getframebits(_);b.bitrate_index=1,I=e.getframebits(_);for(var R=1;R<=b.VBR_max_bitrate;R++){b.bitrate_index=R;var O=new MeanBits(I);E[R]=t.ResvFrameBegin(_,O),I=O.bits}},this.VBR_old_prepare=function(_,E,b,I,R,O,x,L,F){var D=_.internal_flags,V,B=0,P=1,k=0;D.bitrate_index=D.VBR_max_bitrate;var U=t.ResvFrameBegin(_,new MeanBits(0))/D.mode_gr;get_framebits(_,O);for(var j=0;j<D.mode_gr;j++){var z=n.on_pe(_,E,L[j],U,j,0);D.mode_ext==rn.MPG_MD_MS_LR&&(ms_convert(D.l3_side,j),n.reduce_side(L[j],b[j],U,z));for(var Y=0;Y<D.channels_out;++Y){var te=D.l3_side.tt[j][Y];te.block_type!=rn.SHORT_TYPE?(B=1.28/(1+Math.exp(3.5-E[j][Y]/300))-.05,V=D.PSY.mask_adjust-B):(B=2.56/(1+Math.exp(3.5-E[j][Y]/300))-.14,V=D.PSY.mask_adjust_short-B),D.masking_lower=Math.pow(10,V*.1),init_outer_loop(D,te),F[j][Y]=n.calc_xmin(_,I[j][Y],te,R[j][Y]),F[j][Y]!=0&&(P=0),x[j][Y]=126,k+=L[j][Y]}}for(var j=0;j<D.mode_gr;j++)for(var Y=0;Y<D.channels_out;Y++)k>O[D.VBR_max_bitrate]&&(L[j][Y]*=O[D.VBR_max_bitrate],L[j][Y]/=k),x[j][Y]>L[j][Y]&&(x[j][Y]=L[j][Y]);return P},this.bitpressure_strategy=function(_,E,b,I){for(var R=0;R<_.mode_gr;R++)for(var O=0;O<_.channels_out;O++){for(var x=_.l3_side.tt[R][O],L=E[R][O],F=0,D=0;D<x.psy_lmax;D++)L[F++]*=1+.029*D*D/rn.SBMAX_l/rn.SBMAX_l;if(x.block_type==rn.SHORT_TYPE)for(var D=x.sfb_smin;D<rn.SBMAX_s;D++)L[F++]*=1+.029*D*D/rn.SBMAX_s/rn.SBMAX_s,L[F++]*=1+.029*D*D/rn.SBMAX_s/rn.SBMAX_s,L[F++]*=1+.029*D*D/rn.SBMAX_s/rn.SBMAX_s;I[R][O]=0|Math.max(b[R][O],.9*I[R][O])}},this.VBR_new_prepare=function(_,E,b,I,R,O){var x=_.internal_flags,L=1,F=0,D=0,V;if(_.free_format){x.bitrate_index=0;var B=new MeanBits(F);V=t.ResvFrameBegin(_,B),F=B.bits,R[0]=V}else{x.bitrate_index=x.VBR_max_bitrate;var B=new MeanBits(F);t.ResvFrameBegin(_,B),F=B.bits,get_framebits(_,R),V=R[x.VBR_max_bitrate]}for(var P=0;P<x.mode_gr;P++){n.on_pe(_,E,O[P],F,P,0),x.mode_ext==rn.MPG_MD_MS_LR&&ms_convert(x.l3_side,P);for(var k=0;k<x.channels_out;++k){var U=x.l3_side.tt[P][k];x.masking_lower=Math.pow(10,x.PSY.mask_adjust*.1),init_outer_loop(x,U),n.calc_xmin(_,b[P][k],U,I[P][k])!=0&&(L=0),D+=O[P][k]}}for(var P=0;P<x.mode_gr;P++)for(var k=0;k<x.channels_out;k++)D>V&&(O[P][k]*=V,O[P][k]/=D);return L},this.calc_target_bits=function(_,E,b,I,R,O){var x=_.internal_flags,L=x.l3_side,F,D,V,B,P=0;x.bitrate_index=x.VBR_max_bitrate;var k=new MeanBits(P);for(O[0]=t.ResvFrameBegin(_,k),P=k.bits,x.bitrate_index=1,P=e.getframebits(_)-x.sideinfo_len*8,R[0]=P/(x.mode_gr*x.channels_out),P=_.VBR_mean_bitrate_kbps*_.framesize*1e3,x.substep_shaping&1&&(P*=1.09),P/=_.out_samplerate,P-=x.sideinfo_len*8,P/=x.mode_gr*x.channels_out,F=.93+.07*(11-_.compression_ratio)/(11-5.5),F<.9&&(F=.9),F>1&&(F=1),D=0;D<x.mode_gr;D++){var U=0;for(V=0;V<x.channels_out;V++){if(I[D][V]=int(F*P),E[D][V]>700){var j=int((E[D][V]-700)/1.4),z=L.tt[D][V];I[D][V]=int(F*P),z.block_type==rn.SHORT_TYPE&&j<P/2&&(j=P/2),j>P*3/2?j=P*3/2:j<0&&(j=0),I[D][V]+=j}I[D][V]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(I[D][V]=LameInternalFlags.MAX_BITS_PER_CHANNEL),U+=I[D][V]}if(U>LameInternalFlags.MAX_BITS_PER_GRANULE)for(V=0;V<x.channels_out;++V)I[D][V]*=LameInternalFlags.MAX_BITS_PER_GRANULE,I[D][V]/=U}if(x.mode_ext==rn.MPG_MD_MS_LR)for(D=0;D<x.mode_gr;D++)n.reduce_side(I[D],b[D],P*x.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(B=0,D=0;D<x.mode_gr;D++)for(V=0;V<x.channels_out;V++)I[D][V]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(I[D][V]=LameInternalFlags.MAX_BITS_PER_CHANNEL),B+=I[D][V];if(B>O[0])for(D=0;D<x.mode_gr;D++)for(V=0;V<x.channels_out;V++)I[D][V]*=O[0],I[D][V]/=B}}var eye=JTe,tye=Fn,LE=tye.assert;function nye(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var s=t.internal_flags,o,a=s.l3_side,i=e.getframebits(t);n.bits=(i-s.sideinfo_len*8)/s.mode_gr;var r=8*256*s.mode_gr-8;t.brate>320?o=8*int(t.brate*1e3/(t.out_samplerate/1152)/8+.5):(o=8*1440,t.strict_ISO&&(o=8*int(32e4/(t.out_samplerate/1152)/8+.5))),s.ResvMax=o-i,s.ResvMax>r&&(s.ResvMax=r),(s.ResvMax<0||t.disable_reservoir)&&(s.ResvMax=0);var l=n.bits*s.mode_gr+Math.min(s.ResvSize,s.ResvMax);return l>o&&(l=o),LE(s.ResvMax%8==0),LE(s.ResvMax>=0),a.resvDrain_pre=0,s.pinfo!=null&&(s.pinfo.mean_bits=n.bits/2,s.pinfo.resvsize=s.ResvSize),l},this.ResvMaxBits=function(t,n,s,o){var a=t.internal_flags,i,r=a.ResvSize,l=a.ResvMax;o!=0&&(r+=n),a.substep_shaping&1&&(l*=.9),s.bits=n,r*10>l*9?(i=r-l*9/10,s.bits+=i,a.substep_shaping|=128):(i=0,a.substep_shaping&=127,!t.disable_reservoir&&!(a.substep_shaping&1)&&(s.bits-=.1*n));var c=r<a.ResvMax*6/10?r:a.ResvMax*6/10;return c-=i,c<0&&(c=0),c},this.ResvAdjust=function(t,n){t.ResvSize-=n.part2_3_length+n.part2_length},this.ResvFrameEnd=function(t,n){var s,o=t.l3_side;t.ResvSize+=n*t.mode_gr;var a=0;o.resvDrain_post=0,o.resvDrain_pre=0,(s=t.ResvSize%8)!=0&&(a+=s),s=t.ResvSize-a-t.ResvMax,s>0&&(a+=s);{var i=Math.min(o.main_data_begin*8,a)/8;o.resvDrain_pre+=8*i,a-=8*i,t.ResvSize-=8*i,o.main_data_begin-=i}o.resvDrain_post+=a,t.ResvSize-=a}}var sye=nye;function aye(){var e="http://www.mp3dev.org/",t=3,n=98,s=4,o=0,a=93;this.getLameVersion=function(){return t+"."+n+"."+s},this.getLameShortVersion=function(){return t+"."+n+"."+s},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+n+"r"},this.getPsyVersion=function(){return o+"."+a},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var oye=aye,pl=Fn,iye=pl.System,Cm=pl.VbrMode,kE=pl.ShortBlock,rye=pl.Arrays,Ou=pl.new_byte,lye=pl.assert;yc.NUMTOCENTRIES=100;yc.MAXFRAMESIZE=2880;function yc(){var e,t,n;this.setModules=function(P,k,U){e=P,t=k,n=U};var s=1,o=2,a=4,i=8,r=yc.NUMTOCENTRIES,l=yc.MAXFRAMESIZE,c=r+4+4+4+4+4,u=c+9+1+1+8+1+1+3+1+1+2+4+2+2,d=128,m=64,f=32,g=null,T="Xing",S="Info",_=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function E(P,k){if(P.nVbrNumFrames++,P.sum+=k,P.seen++,!(P.seen<P.want)&&(P.pos<P.size&&(P.bag[P.pos]=P.sum,P.pos++,P.seen=0),P.pos==P.size)){for(var U=1;U<P.size;U+=2)P.bag[U/2]=P.bag[U];P.want*=2,P.pos/=2}}function b(P,k){if(!(P.pos<=0))for(var U=1;U<r;++U){var j=U/r,z,Y,te=0|Math.floor(j*P.pos);te>P.pos-1&&(te=P.pos-1),z=P.bag[te],Y=P.sum;var Z=0|256*z/Y;Z>255&&(Z=255),k[U]=255&Z}}this.addVbrFrame=function(P){var k=P.internal_flags,U=Tables.bitrate_table[P.version][k.bitrate_index];lye(k.VBR_seek_table.bag!=null),E(k.VBR_seek_table,U)};function I(P,k){var U=P[k+0]&255;return U<<=8,U|=P[k+1]&255,U<<=8,U|=P[k+2]&255,U<<=8,U|=P[k+3]&255,U}function R(P,k,U){P[k+0]=255&(U>>24&255),P[k+1]=255&(U>>16&255),P[k+2]=255&(U>>8&255),P[k+3]=255&(U&255)}function O(P,k,U){P[k+0]=255&(U>>8&255),P[k+1]=255&(U&255)}function x(P,k){return new String(P,k,T.length(),g).equals(T)||new String(P,k,S.length(),g).equals(S)}function L(P,k,U){return 255&(P<<k|U&~(-1<<k))}function F(P,k){var U=P.internal_flags;k[0]=L(k[0],8,255),k[1]=L(k[1],3,7),k[1]=L(k[1],1,P.out_samplerate<16e3?0:1),k[1]=L(k[1],1,P.version),k[1]=L(k[1],2,1),k[1]=L(k[1],1,P.error_protection?0:1),k[2]=L(k[2],4,U.bitrate_index),k[2]=L(k[2],2,U.samplerate_index),k[2]=L(k[2],1,0),k[2]=L(k[2],1,P.extension),k[3]=L(k[3],2,P.mode.ordinal()),k[3]=L(k[3],2,U.mode_ext),k[3]=L(k[3],1,P.copyright),k[3]=L(k[3],1,P.original),k[3]=L(k[3],2,P.emphasis),k[0]=255;var j=255&(k[1]&241),z;P.version==1?z=d:P.out_samplerate<16e3?z=f:z=m,P.VBR==Cm.vbr_off&&(z=P.brate);var Y;P.free_format?Y=0:Y=255&16*e.BitrateIndex(z,P.version,P.out_samplerate),P.version==1?(k[1]=255&(j|10),j=255&(k[2]&13),k[2]=255&(Y|j)):(k[1]=255&(j|2),j=255&(k[2]&13),k[2]=255&(Y|j))}this.getVbrTag=function(P){var k=new VBRTagData,U=0;k.flags=0;var j=P[U+1]>>3&1,z=P[U+2]>>2&3,Y=P[U+3]>>6&3,te=P[U+2]>>4&15;if(te=Tables.bitrate_table[j][te],P[U+1]>>4==14?k.samprate=Tables.samplerate_table[2][z]:k.samprate=Tables.samplerate_table[j][z],j!=0?Y!=3?U+=36:U+=21:Y!=3?U+=21:U+=13,!x(P,U))return null;U+=4,k.hId=j;var Z=k.flags=I(P,U);if(U+=4,Z&s&&(k.frames=I(P,U),U+=4),Z&o&&(k.bytes=I(P,U),U+=4),Z&a){if(k.toc!=null)for(var G=0;G<r;G++)k.toc[G]=P[U+G];U+=r}k.vbrScale=-1,Z&i&&(k.vbrScale=I(P,U),U+=4),k.headersize=(j+1)*72e3*te/k.samprate,U+=21;var H=P[U+0]<<4;H+=P[U+1]>>4;var W=(P[U+1]&15)<<8;return W+=P[U+2]&255,(H<0||H>3e3)&&(H=-1),(W<0||W>3e3)&&(W=-1),k.encDelay=H,k.encPadding=W,k},this.InitVbrTag=function(P){var k=P.internal_flags,U;P.version==1?U=d:P.out_samplerate<16e3?U=f:U=m,P.VBR==Cm.vbr_off&&(U=P.brate);var j=(P.version+1)*72e3*U/P.out_samplerate,z=k.sideinfo_len+u;if(k.VBR_seek_table.TotalFrameSize=j,j<z||j>l){P.bWriteVbrTag=!1;return}k.VBR_seek_table.nVbrNumFrames=0,k.VBR_seek_table.nBytesWritten=0,k.VBR_seek_table.sum=0,k.VBR_seek_table.seen=0,k.VBR_seek_table.want=1,k.VBR_seek_table.pos=0,k.VBR_seek_table.bag==null&&(k.VBR_seek_table.bag=new int[400],k.VBR_seek_table.size=400);var Y=Ou(l);F(P,Y);for(var te=k.VBR_seek_table.TotalFrameSize,Z=0;Z<te;++Z)t.add_dummy_byte(P,Y[Z]&255,1)};function D(P,k){var U=k^P;return k=k>>8^_[U&255],k}this.updateMusicCRC=function(P,k,U,j){for(var z=0;z<j;++z)P[0]=D(k[U+z],P[0])};function V(P,k,U,j,z){var Y=P.internal_flags,te=0,Z=P.encoder_delay,G=P.encoder_padding,H=100-10*P.VBR_q-P.quality,W=n.getLameVeryShortVersion(),J,ee=0,ge,Ee=[1,5,3,2,4,0,3],le=0|(P.lowpassfreq/100+.5>255?255:P.lowpassfreq/100+.5),_e=0,$e=0,He=0,Je=P.internal_flags.noise_shaping,Xe=0,Qe=0,rt=0,at=0,Et=0,Lt=(P.exp_nspsytune&1)!=0,q=(P.exp_nspsytune&2)!=0,ae=!1,ie=!1,be=P.internal_flags.nogap_total,fe=P.internal_flags.nogap_current,Se=P.ATHtype,Le=0,ke;switch(P.VBR){case vbr_abr:ke=P.VBR_mean_bitrate_kbps;break;case vbr_off:ke=P.brate;break;default:ke=P.VBR_min_bitrate_kbps}switch(P.VBR.ordinal()<Ee.length?J=Ee[P.VBR.ordinal()]:J=0,ge=16*ee+J,Y.findReplayGain&&(Y.RadioGain>510&&(Y.RadioGain=510),Y.RadioGain<-510&&(Y.RadioGain=-510),$e=8192,$e|=3072,Y.RadioGain>=0?$e|=Y.RadioGain:($e|=512,$e|=-Y.RadioGain)),Y.findPeakSample&&(_e=Math.abs(0|Y.PeakSample/32767*Math.pow(2,23)+.5)),be!=-1&&(fe>0&&(ie=!0),fe<be-1&&(ae=!0)),Le=Se+((Lt?1:0)<<4)+((q?1:0)<<5)+((ae?1:0)<<6)+((ie?1:0)<<7),H<0&&(H=0),P.mode){case MONO:Xe=0;break;case STEREO:Xe=1;break;case DUAL_CHANNEL:Xe=2;break;case JOINT_STEREO:P.force_ms?Xe=4:Xe=3;break;case NOT_SET:default:Xe=7;break}P.in_samplerate<=32e3?rt=0:P.in_samplerate==48e3?rt=2:P.in_samplerate>48e3?rt=3:rt=1,(P.short_blocks==kE.short_block_forced||P.short_blocks==kE.short_block_dispensed||P.lowpassfreq==-1&&P.highpassfreq==-1||P.scale_left<P.scale_right||P.scale_left>P.scale_right||P.disable_reservoir&&P.brate<320||P.noATH||P.ATHonly||Se==0||P.in_samplerate<=32e3)&&(Qe=1),at=Je+(Xe<<2)+(Qe<<5)+(rt<<6),Et=Y.nMusicCRC,R(U,j+te,H),te+=4;for(var De=0;De<9;De++)U[j+te+De]=255&W.charAt(De);te+=9,U[j+te]=255&ge,te++,U[j+te]=255&le,te++,R(U,j+te,_e),te+=4,O(U,j+te,$e),te+=2,O(U,j+te,He),te+=2,U[j+te]=255&Le,te++,ke>=255?U[j+te]=255:U[j+te]=255&ke,te++,U[j+te]=255&Z>>4,U[j+te+1]=255&(Z<<4)+(G>>8),U[j+te+2]=255&G,te+=3,U[j+te]=255&at,te++,U[j+te++]=0,O(U,j+te,P.preset),te+=2,R(U,j+te,k),te+=4,O(U,j+te,Et),te+=2;for(var Ue=0;Ue<te;Ue++)z=D(U[j+Ue],z);return O(U,j+te,z),te+=2,te}function B(P){P.seek(0);var k=Ou(10);P.readFully(k);var U;return new String(k,"ISO-8859-1").startsWith("ID3")?U=0:U=((k[6]&127)<<21|(k[7]&127)<<14|(k[8]&127)<<7|k[9]&127)+k.length,U}this.getLameTagFrame=function(P,k){var U=P.internal_flags;if(!P.bWriteVbrTag||U.Class_ID!=Lame.LAME_ID||U.VBR_seek_table.pos<=0)return 0;if(k.length<U.VBR_seek_table.TotalFrameSize)return U.VBR_seek_table.TotalFrameSize;rye.fill(k,0,U.VBR_seek_table.TotalFrameSize,0),F(P,k);var j=Ou(r);if(P.free_format)for(var z=1;z<r;++z)j[z]=255&255*z/100;else b(U.VBR_seek_table,j);var Y=U.sideinfo_len;P.error_protection&&(Y-=2),P.VBR==Cm.vbr_off?(k[Y++]=255&S.charAt(0),k[Y++]=255&S.charAt(1),k[Y++]=255&S.charAt(2),k[Y++]=255&S.charAt(3)):(k[Y++]=255&T.charAt(0),k[Y++]=255&T.charAt(1),k[Y++]=255&T.charAt(2),k[Y++]=255&T.charAt(3)),R(k,Y,s+o+a+i),Y+=4,R(k,Y,U.VBR_seek_table.nVbrNumFrames),Y+=4;var te=U.VBR_seek_table.nBytesWritten+U.VBR_seek_table.TotalFrameSize;R(k,Y,0|te),Y+=4,iye.arraycopy(j,0,k,Y,j.length),Y+=j.length,P.error_protection&&t.CRC_writeheader(U,k);for(var Z=0,z=0;z<Y;z++)Z=D(k[z],Z);return Y+=V(P,te,k,Y,Z),U.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(P,k){var U=P.internal_flags;if(U.VBR_seek_table.pos<=0||(k.seek(k.length()),k.length()==0))return-1;var j=B(k);k.seek(j);var z=Ou(l),Y=getLameTagFrame(P,z);return Y>z.length?-1:(Y<1||k.write(z,0,Y),0)}}var cye=yc,PA=Fn,DE=PA.new_byte,uye=PA.assert,dye=v_(),pye=HTe,hye=xA,mye=LA(),fye=eye,gye=kA(),_ye=sye,vye=Wc,bye=__();Ws();var Eye=oye,Tye=cye;function yye(){this.setModules=function(e,t){}}function Sye(){this.setModules=function(e,t,n){}}function Aye(){}function Iye(){this.setModules=function(e,t){}}function Cye(e,t,n){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var s=new dye,o=new yye,a=new hye,i=new bye,r=new pye,l=new mye,c=new fye,u=new Tye,d=new Eye,m=new Iye,f=new _ye,g=new gye,T=new Sye,S=new Aye;s.setModules(a,i,r,l,c,u,d,m,S),i.setModules(a,S,d,u),m.setModules(i,d),r.setModules(s),c.setModules(i,f,l,g),l.setModules(g,f,s.enc.psy),f.setModules(i),g.setModules(l),u.setModules(s,i,d),o.setModules(T,S),T.setModules(d,m,r);var _=s.lame_init();_.num_channels=e,_.in_samplerate=t,_.brate=n,_.mode=vye.STEREO,_.quality=3,_.bWriteVbrTag=!1,_.disable_reservoir=!0,_.write_id3tag_automatic=!1,s.lame_init_params(_);var E=1152,b=0|1.25*E+7200,I=DE(b);this.encodeBuffer=function(R,O){e==1&&(O=R),uye(R.length==O.length),R.length>E&&(E=R.length,b=0|1.25*E+7200,I=DE(b));var x=s.lame_encode_buffer(_,R,O,R.length,I,0,b);return new Int8Array(I.subarray(0,x))},this.flush=function(){var R=s.lame_encode_flush(_,I,0,b);return new Int8Array(I.subarray(0,R))}}function Wa(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Ep(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}Wa.RIFF=Ep("RIFF");Wa.WAVE=Ep("WAVE");Wa.fmt_=Ep("fmt ");Wa.data=Ep("data");Wa.readHeader=function(e){var t=new Wa,n=e.getUint32(0,!1);if(Wa.RIFF==n&&(e.getUint32(4,!0),Wa.WAVE==e.getUint32(8,!1)&&Wa.fmt_==e.getUint32(12,!1))){var s=e.getUint32(16,!0),o=20;switch(s){case 16:case 18:t.channels=e.getUint16(o+2,!0),t.sampleRate=e.getUint32(o+4,!0);break;default:throw"extended fmt chunk not implemented"}o+=s;for(var a=Wa.data,i=0;a!=n&&(n=e.getUint32(o,!1),i=e.getUint32(o+4,!0),a!=n);)o+=i+8;return t.dataLen=i,t.dataOffset=o+8,t}};p_.Mp3Encoder=Cye;p_.WavHeader=Wa;const Nu=(e,t,n)=>{for(let s=0;s<n.length;s++)e.setUint8(t+s,n.charCodeAt(s))},Oye=async(e,t,n)=>{const s=e.length*t*2,o=new ArrayBuffer(44+s),a=new DataView(o);Nu(a,0,"RIFF"),a.setUint32(4,36+s,!0),Nu(a,8,"WAVE"),Nu(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,t,!0),a.setUint32(24,n,!0),a.setUint32(28,n*t*2,!0),a.setUint16(32,t*2,!0),a.setUint16(34,16,!0),Nu(a,36,"data"),a.setUint32(40,s,!0);const i=44;for(let r=0;r<e.length;r++)for(let l=0;l<t;l++){const c=Math.max(-1,Math.min(1,e.getChannelData(l)[r]));a.setInt16(i+(r*t+l)*2,c*32767,!0)}return new Blob([o],{type:"audio/wav"})},BA=async e=>{const t=new(window.AudioContext||window.webkitAudioContext),n=await e.arrayBuffer();return await t.decodeAudioData(n)},Nye=async e=>{const t=await BA(e);return Oye(t,t.numberOfChannels,t.sampleRate)},wye=(e,t,n,s=128)=>{const o=[],a=new p_.Mp3Encoder(e,t,s),i=1152;for(let l=0;l<n.length;l+=i){const c=Math.min(l+i,n.length),u=n.subarray(l,c),d=a.encodeBuffer(u);d.length>0&&o.push(new Int8Array(d))}const r=a.flush();return r.length>0&&o.push(new Int8Array(r)),new Blob(o,{type:"audio/mp3"})},Rye=async(e,t=128)=>{try{const n=await BA(e),s=new Int16Array(n.length*n.numberOfChannels);let o=0;for(let a=0;a<n.length;a+=1)for(let i=0;i<n.numberOfChannels;i+=1){const r=Math.max(-1,Math.min(1,n.getChannelData(i)[a]));s[o]=r<0?r*32768:r*32767,o+=1}return wye(n.numberOfChannels,n.sampleRate,s,t)}catch{throw new Error("Conversion to MP3 failed.")}},xye=async(e,t,n=128)=>{let s;if(t==="audio/wav")s=await Nye(e);else if(t==="audio/mp3")s=await Rye(e,n);else throw new Error("Unsupported output format");return s},$ye={__name:"AudioRecorder",props:{audioRecordFormat:{type:String,required:!0}},emits:["recorderProgressChanged","finishRecord","pause","play"],setup(e,{expose:t,emit:n}){const s=e,o=n,a=X(null),i=X(null),r=X(null),l=X(!1),c=X(!1),u=X(!1),d=S=>{const _=xL({start:0,end:S});return ms(new Date(0,0,0,0,_.minutes,_.seconds),"mm:ss")},m=()=>{i.value=Tc.create({container:a.value,waveColor:"#1F93FF",progressColor:"#6E6F73",height:100,barWidth:2,barGap:1,barRadius:2,plugins:[d_.create({scrollingWaveform:!0,renderRecordedAudio:!1})]}),i.value.on("pause",()=>o("pause")),i.value.on("play",()=>o("play")),r.value=i.value.plugins[0],i.value.on("finish",()=>{c.value=!1}),r.value.on("record-end",async S=>{const _=URL.createObjectURL(S),E=await xye(S,s.audioRecordFormat),b=`${fO()}.mp3`,I=new File([E],b,{type:s.audioRecordFormat});i.value.load(_),o("finishRecord",{name:I.name,type:I.type,size:I.size,file:I}),u.value=!0,l.value=!1}),r.value.on("record-progress",S=>{o("recorderProgressChanged",d(S))})},f=()=>{l.value&&(r.value.stopRecording(),l.value=!1)},g=()=>{r.value.startRecording(),l.value=!0},T=()=>{u.value&&(i.value.playPause(),c.value=!c.value)};return dt(()=>{m(),g()}),zo(()=>{i.value&&i.value.destroy()}),t({playPause:T,stopRecording:f,record:r}),(S,_)=>(p(),v("div",{ref_key:"waveformContainer",ref:a,class:"w-full p-1"},null,512))}},Mye=["DOCUMENT","IMAGE","VIDEO"],Lye={props:{inboxId:{type:Number,default:void 0}},emits:["onSelect"],data(){return{query:""}},computed:{whatsAppTemplateMessages(){return this.$store.getters["inboxes/getWhatsAppTemplates"](this.inboxId).filter(e=>e.status.toLowerCase()==="approved").filter(e=>e.components.every(t=>!Mye.includes(t.format)))},filteredTemplateMessages(){return this.whatsAppTemplateMessages.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase()))}},methods:{getTemplatebody(e){return e.components.find(t=>t.type==="BODY").text}}},kye={class:"w-full"},Dye={class:"gap-1 bg-n-alpha-black2 items-center flex mb-2.5 py-0 px-2.5 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 focus-within:outline-n-brand dark:focus-within:outline-n-brand"},Pye=["placeholder"],Bye={class:"bg-n-background outline-n-container outline outline-1 rounded-lg max-h-[18.75rem] overflow-y-auto p-2.5"},Fye=["onClick"],Uye={class:"flex items-center justify-between mb-2.5"},Gye={class:"text-sm"},Vye={class:"inline-block px-2 py-1 text-xs leading-none bg-n-slate-3 rounded-lg cursor-default text-n-slate-12"},Hye={class:"font-medium"},Wye={class:"label-body"},zye={class:"mt-5"},jye={class:"font-medium"},Kye={key:0};function Yye(e,t,n,s,o,a){const i=M("fluent-icon");return p(),v("div",kye,[h("div",Dye,[y(i,{icon:"search",class:"text-n-slate-12",size:"16"}),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.query=r),type:"search",placeholder:e.$t("WHATSAPP_TEMPLATES.PICKER.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-9 bg-transparent text-n-slate-12 !text-sm !outline-0"},null,8,Pye),[[mt,o.query]])]),h("div",Bye,[(p(!0),v(pe,null,Ne(a.filteredTemplateMessages,(r,l)=>(p(),v("div",{key:r.id},[h("button",{class:"rounded-lg cursor-pointer block p-2.5 text-left w-full hover:bg-n-alpha-2 dark:hover:bg-n-solid-2",onClick:c=>e.$emit("onSelect",r)},[h("div",null,[h("div",Uye,[h("p",Gye,A(r.name),1),h("span",Vye,A(e.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.LANGUAGE"))+" : "+A(r.language),1)]),h("div",null,[h("p",Hye,A(e.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.TEMPLATE_BODY")),1),h("p",Wye,A(a.getTemplatebody(r)),1)]),h("div",zye,[h("p",jye,A(e.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.CATEGORY")),1),h("p",null,A(r.category),1)])])],8,Fye),l!=a.filteredTemplateMessages.length-1?(p(),v("hr",{key:`hr-${l}`,class:"border-b border-solid border-n-weak my-2.5 mx-auto max-w-[95%]"})):w("",!0)]))),128)),a.filteredTemplateMessages.length?w("",!0):(p(),v("div",Kye,[h("p",null,[Re(A(e.$t("WHATSAPP_TEMPLATES.PICKER.NO_TEMPLATES_FOUND"))+" ",1),h("strong",null,A(o.query),1)])]))])])}const Xye=Ae(Lye,[["render",Yye],["__scopeId","data-v-7dfb4722"]]),qye={components:{NextButton:oe},props:{template:{type:Object,default:()=>({})}},emits:["sendMessage","resetTemplate"],setup(e,{emit:t}){const n=m=>m.replace(/{{|}}/g,""),s=m=>Object.keys(m).every(g=>m[g]),o=X({}),a=C(()=>e.template.components.find(m=>m.type==="BODY").text),i=C(()=>a.value.match(/{{([^}]+)}}/g)),r=C(()=>a.value.replace(/{{([^}]+)}}/g,(m,f)=>{const g=n(f);return o.value[g]||`{{${f}}}`})),l=bt({processedParams:{requiredIfKeysPresent:qu(i),allKeysRequired:s}},{processedParams:o}),c=()=>{const m=a.value.match(/{{([^}]+)}}/g);if(!m)return;const f=m.map(g=>n(g));o.value=f.reduce((g,T)=>(g[T]="",g),{})},u=()=>{t("resetTemplate")},d=()=>{if(l.value.$touch(),l.value.$invalid)return;const m={message:r.value,templateParams:{name:e.template.name,category:e.template.category,language:e.template.language,namespace:e.template.namespace,processed_params:o.value}};t("sendMessage",m)};return dt(c),{processedParams:o,variables:i,templateString:a,processedString:r,v$:l,resetTemplate:u,sendMessage:d}}},Zye={class:"w-full"},Qye={key:0,class:"p-2.5"},Jye={class:"text-sm font-semibold mb-2.5"},eSe={class:"bg-n-alpha-black2 text-n-slate-12 inline-block rounded-md text-xs py-2.5 px-6"},tSe={key:0,class:"bg-n-ruby-9/20 rounded-md text-n-ruby-9 p-2.5 text-center"},nSe={class:"flex justify-end gap-2"};function sSe(e,t,n,s,o,a){const i=M("woot-input"),r=M("NextButton");return p(),v("div",Zye,[re(h("textarea",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.processedString=l),rows:"4",readonly:"",class:"template-input"},null,512),[[mt,s.processedString]]),s.variables?(p(),v("div",Qye,[h("p",Jye,A(e.$t("WHATSAPP_TEMPLATES.PARSER.VARIABLES_LABEL")),1),(p(!0),v(pe,null,Ne(s.processedParams,(l,c)=>(p(),v("div",{key:c,class:"items-center flex mb-2.5"},[h("span",eSe,A(c),1),y(i,{modelValue:s.processedParams[c],"onUpdate:modelValue":u=>s.processedParams[c]=u,type:"text",class:"flex-1 text-sm ml-2.5",styles:{marginBottom:0}},null,8,["modelValue","onUpdate:modelValue"])]))),128)),s.v$.$dirty&&s.v$.$invalid?(p(),v("p",tSe,A(e.$t("WHATSAPP_TEMPLATES.PARSER.FORM_ERROR_MESSAGE")),1)):w("",!0)])):w("",!0),h("footer",nSe,[y(r,{faded:"",slate:"",type:"reset",label:e.$t("WHATSAPP_TEMPLATES.PARSER.GO_BACK_LABEL"),onClick:s.resetTemplate},null,8,["label","onClick"]),y(r,{type:"button",label:e.$t("WHATSAPP_TEMPLATES.PARSER.SEND_MESSAGE_LABEL"),onClick:s.sendMessage},null,8,["label","onClick"])])])}const aSe=Ae(qye,[["render",sSe]]),oSe={components:{TemplatesPicker:Xye,TemplateParser:aSe},props:{show:{type:Boolean,default:!1},inboxId:{type:Number,default:void 0}},emits:["onSend","cancel","update:show"],data(){return{selectedWaTemplate:null}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},modalHeaderContent(){return this.selectedWaTemplate?this.$t("WHATSAPP_TEMPLATES.MODAL.TEMPLATE_SELECTED_SUBTITLE",{templateName:this.selectedWaTemplate.name}):this.$t("WHATSAPP_TEMPLATES.MODAL.SUBTITLE")}},methods:{pickTemplate(e){this.selectedWaTemplate=e},onResetTemplate(){this.selectedWaTemplate=null},onSendMessage(e){this.$emit("onSend",e)},onClose(){this.$emit("cancel")}}},iSe={class:"row modal-content"};function rSe(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("TemplatesPicker"),l=M("TemplateParser"),c=M("woot-modal");return p(),$(c,{show:a.localShow,"onUpdate:show":t[0]||(t[0]=u=>a.localShow=u),"on-close":a.onClose,size:"modal-big"},{default:K(()=>[y(i,{"header-title":e.$t("WHATSAPP_TEMPLATES.MODAL.TITLE"),"header-content":a.modalHeaderContent},null,8,["header-title","header-content"]),h("div",iSe,[o.selectedWaTemplate?(p(),$(l,{key:1,template:o.selectedWaTemplate,onResetTemplate:a.onResetTemplate,onSendMessage:a.onSendMessage},null,8,["template","onResetTemplate","onSendMessage"])):(p(),$(r,{key:0,"inbox-id":n.inboxId,onOnSelect:a.pickTemplate},null,8,["inbox-id","onOnSelect"]))])]),_:1},8,["show","on-close"])}const lSe=Ae(oSe,[["render",rSe],["__scopeId","data-v-7b498b96"]]),cSe={computed:{...lt({accountId:"getCurrentAccountId"})},methods:{onFileUpload(e){this.globalConfig.directUploadsEnabled?this.onDirectFileUpload(e):this.onIndirectFileUpload(e)},onDirectFileUpload(e){const t=this.isATwilioSMSChannel?xm:$m;e&&(nc(e,t)?new Rf.DirectUpload(e.file,`/api/v1/accounts/${this.accountId}/conversations/${this.currentChat.id}/direct_uploads`,{directUploadWillCreateBlobWithXHR:s=>{s.setRequestHeader("api_access_token",this.currentUser.access_token)}}).create((s,o)=>{s?ce(s):this.attachFile({file:e,blob:o})}):ce(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:t})))},onIndirectFileUpload(e){const t=this.isATwilioSMSChannel?xm:$m;e&&(nc(e,t)?this.attachFile({file:e}):ce(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:t})))}}},uSe=Nd(()=>Ao(()=>import("./EmojiInput-D8KWfRV_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),dSe={components:{ArticleSearchPopover:k0e,AttachmentPreview:j1e,AudioRecorder:$ye,Banner:$c,CannedResponse:Eg,EmojiInput:uSe,MessageSignatureMissingAlert:B0e,ReplyBottomPanel:JEe,ReplyEmailHead:hEe,ReplyToMessage:D1e,ReplyTopPanel:J1e,ResizableTextArea:wf,WhatsappTemplates:lSe,WootMessageEditor:Ko},mixins:[Yo,cSe,M1e],emits:["update:popoutReplyBox","togglePopout"],setup(){const{uiSettings:e,updateUISettings:t,isEditorHotKeyEnabled:n,fetchSignatureFlagFromUISettings:s}=ln(),o=Z2(),a=Is("replyEditor");return{uiSettings:e,popoutReplyBox:o,updateUISettings:t,isEditorHotKeyEnabled:n,fetchSignatureFlagFromUISettings:s,replyEditor:a}},data(){return{message:"",inReplyTo:{},isFocused:!1,showEmojiPicker:!1,attachedFiles:[],isRecordingAudio:!1,recordingAudioState:"",recordingAudioDurationText:"",isUploading:!1,replyType:Ts.REPLY,mentionSearchKey:"",hasSlashCommand:!1,bccEmails:"",ccEmails:"",toEmails:"",doAutoSaveDraft:()=>{},showWhatsAppTemplatesModal:!1,updateEditorSelectionWith:"",undefinedVariableMessage:"",showMentions:!1,showUserMentions:!1,showCannedMenu:!1,showVariablesMenu:!1,newConversationModalActive:!1,showArticleSearchPopover:!1,hasRecordedAudio:!1}},computed:{...lt({isRTL:"accounts/isRTL",currentChat:"getSelectedChat",messageSignature:"getMessageSignature",currentUser:"getCurrentUser",lastEmail:"getLastEmailInSelectedChat",globalConfig:"globalConfig/get"}),currentContact(){return this.$store.getters["contacts/getContact"](this.currentChat.meta.sender.id)},shouldShowReplyToMessage(){var e;return((e=this.inReplyTo)==null?void 0:e.id)&&!this.isPrivate&&this.inboxHasFeature(_c.REPLY_TO)&&!this.is360DialogWhatsAppChannel},showRichContentEditor(){if(this.isOnPrivateNote||this.isRichEditorEnabled)return!0;if(this.isAPIInbox){const{display_rich_content_editor:e=!1}=this.uiSettings;return e}return!1},assignedAgent:{get(){return this.currentChat.meta.assignee},set(e){const t=e?e.id:0;this.$store.dispatch("setCurrentChatAssignee",e),this.$store.dispatch("assignAgent",{conversationId:this.currentChat.id,agentId:t}).then(()=>{ce(this.$t("CONVERSATION.CHANGE_AGENT"))})}},showSelfAssignBanner(){return this.message!==""&&!this.isOnPrivateNote&&(!this.assignedAgent||this.assignedAgent.id!==this.currentUser.id)},hasWhatsappTemplates(){return!!this.$store.getters["inboxes/getWhatsAppTemplates"](this.inboxId).length},isPrivate(){return this.currentChat.can_reply||this.isAWhatsAppChannel?this.isOnPrivateNote:!0},inboxId(){return this.currentChat.inbox_id},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},messagePlaceHolder(){return this.isPrivate?this.$t("CONVERSATION.FOOTER.PRIVATE_MSG_INPUT"):this.$t("CONVERSATION.FOOTER.MSG_INPUT")},isMessageLengthReachingThreshold(){return this.message.length>this.maxLength-50},charactersRemaining(){return this.maxLength-this.message.length},isReplyButtonDisabled(){return this.isATwitterInbox?!0:this.hasAttachments||this.hasRecordedAudio?!1:this.isMessageEmpty||this.message.length===0||this.message.length>this.maxLength},sender(){return{name:this.currentUser.name,thumbnail:this.currentUser.avatar_url}},conversationType(){const{additional_attributes:e}=this.currentChat;return(e?e.type:"")||""},maxLength(){return this.isPrivate?so.GENERAL:this.isAFacebookInbox?so.FACEBOOK:this.isAnInstagramChannel?so.INSTAGRAM:this.isATwilioWhatsAppChannel?so.TWILIO_WHATSAPP:this.isAWhatsAppCloudChannel?so.WHATSAPP_CLOUD:this.isASmsInbox?so.TWILIO_SMS:this.isAnEmailChannel?so.EMAIL:this.isATwilioSMSChannel?so.TWILIO_SMS:this.isAWhatsAppChannel?so.WHATSAPP_CLOUD:so.GENERAL},showFileUpload(){return this.isAWebWidgetInbox||this.isAFacebookInbox||this.isAWhatsAppChannel||this.isAPIInbox||this.isAnEmailChannel||this.isASmsInbox||this.isATelegramChannel||this.isALineChannel||this.isAnInstagramChannel},replyButtonLabel(){let e=this.$t("CONVERSATION.REPLYBOX.SEND");this.isPrivate&&(e=this.$t("CONVERSATION.REPLYBOX.CREATE"));const t=this.isEditorHotKeyEnabled("cmd_enter")?"(⌘ + ↵)":"(↵)";return`${e} ${t}`},replyBoxClass(){return{"is-private":this.isPrivate,"is-focused":this.isFocused||this.hasAttachments}},hasAttachments(){return this.attachedFiles.length},isRichEditorEnabled(){return this.isAWebWidgetInbox||this.isAnEmailChannel},showAudioRecorder(){return!this.isOnPrivateNote&&this.showFileUpload},showAudioRecorderEditor(){return this.showAudioRecorder&&this.isRecordingAudio},isOnPrivateNote(){return this.replyType===Ts.NOTE},isOnExpandedLayout(){const{LAYOUT_TYPES:{CONDENSED:e}}=It,{conversation_display_type:t=e}=this.uiSettings;return t!==e},emojiDialogClassOnExpandedLayoutAndRTLView(){return this.isOnExpandedLayout||this.popoutReplyBox?"emoji-dialog--expanded":this.isRTL?"emoji-dialog--rtl":""},isMessageEmpty(){return this.message?!this.message.trim().replace(/\n/g,"").length:!0},showReplyHead(){return!this.isOnPrivateNote&&this.isAnEmailChannel},enableMultipleFileUpload(){return this.isAnEmailChannel||this.isAWebWidgetInbox||this.isAPIInbox||this.isAWhatsAppChannel||this.isATelegramChannel},isSignatureEnabledForInbox(){return!this.isPrivate&&this.sendWithSignature},isSignatureAvailable(){return!!this.signatureToApply},sendWithSignature(){return this.fetchSignatureFlagFromUISettings(this.channelType)},editorMessageKey(){const{editor_message_key:e}=this.uiSettings;return e},commandPlusEnterToSendEnabled(){return this.editorMessageKey==="cmd_enter"},enterToSendEnabled(){return this.editorMessageKey==="enter"},conversationId(){return this.currentChat.id},conversationIdByRoute(){return this.conversationId},editorStateId(){return`draft-${this.conversationIdByRoute}-${this.replyType}`},audioRecordFormat(){return this.isAWhatsAppChannel||this.isATelegramChannel?Np.MP3:this.isAPIInbox?Np.MP3:Np.WAV},messageVariables(){return iO({conversation:this.currentChat,contact:this.currentContact})},signatureToApply(){return this.showRichContentEditor?this.messageSignature:Qi(this.messageSignature)},connectedPortalSlug(){const{help_center:e={}}=this.inbox,{slug:t=""}=e;return t}},watch:{currentChat(e,t){const{can_reply:n}=e;t&&t.id!==e.id&&this.setCCAndToEmailsFromLastChat(),!this.isOnPrivateNote&&(n||this.isAWhatsAppChannel?this.replyType=Ts.REPLY:this.replyType=Ts.NOTE,this.fetchAndSetReplyTo())},lastEmail:{handler(e){e&&this.setCCAndToEmailsFromLastChat()},deep:!0},conversationIdByRoute(e,t){e!==t&&(this.setToDraft(t,this.replyType),this.getFromDraft(),this.resetRecorderAndClearAttachments())},message(e){const t=uo(e,this.signatureToApply),n=t.startsWith("/");this.hasSlashCommand=n&&!this.showRichContentEditor,this.showMentions=this.hasSlashCommand,this.mentionSearchKey=this.hasSlashCommand?t.substring(1):"",this.doAutoSaveDraft()},replyType(e,t){this.setToDraft(this.conversationIdByRoute,t),this.getFromDraft()}},mounted(){this.getFromDraft(),document.addEventListener("paste",this.onPaste),document.addEventListener("keydown",this.handleKeyEvents),this.setCCAndToEmailsFromLastChat(),this.doAutoSaveDraft=Uo(()=>{this.saveDraft(this.conversationIdByRoute,this.replyType)},500,!0),this.fetchAndSetReplyTo(),wt.on(jt.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),wt.on(jt.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive),wt.on(jt.INSERT_INTO_NORMAL_EDITOR,this.addIntoEditor)},unmounted(){document.removeEventListener("paste",this.onPaste),document.removeEventListener("keydown",this.handleKeyEvents),wt.off(jt.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),wt.off(jt.INSERT_INTO_NORMAL_EDITOR,this.addIntoEditor),wt.off(jt.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive)},methods:{handleInsert(e){const{url:t,title:n}=e;if(this.isRichEditorEnabled){const a=n.split(`
`).filter(i=>i.trim()!=="").join(" ");wt.emit(jt.INSERT_INTO_RICH_EDITOR,`[${a}](${t})`)}else this.addIntoEditor(`${this.$t("CONVERSATION.REPLYBOX.INSERT_READ_MORE")} ${t}`);Pt(ua.INSERT_ARTICLE_LINK)},toggleRichContentEditor(){this.updateUISettings({display_rich_content_editor:!this.showRichContentEditor});const e=Qi(this.messageSignature);if(!this.showRichContentEditor&&this.messageSignature){let t=uo(this.message,this.messageSignature);t=Qi(t),t=li(t,e),this.message=t}else this.message=BC(this.message,e,this.messageSignature)},resetRecorderAndClearAttachments(){this.resetAudioRecorderInput(),this.attachedFiles=[]},saveDraft(e,t){if(this.message||this.message===""){const n=`draft-${e}-${t}`,s=oO(this.message||"");this.$store.dispatch("draftMessages/set",{key:n,message:s})}},setToDraft(e,t){this.saveDraft(e,t),this.message=""},getFromDraft(){if(this.conversationIdByRoute){const e=`draft-${this.conversationIdByRoute}-${this.replyType}`,t=this.$store.getters["draftMessages/get"](e)||"";this.message=this.toggleSignatureForDraft(t)}},toggleSignatureForDraft(e){return this.isPrivate?e:this.sendWithSignature?li(e,this.signatureToApply):uo(e,this.signatureToApply)},removeFromDraft(){if(this.conversationIdByRoute){const e=`draft-${this.conversationIdByRoute}-${this.replyType}`;this.$store.dispatch("draftMessages/delete",{key:e})}},getElementToBind(){return this.replyEditor},getKeyboardEvents(){return{Escape:{action:()=>{this.hideEmojiPicker(),this.hideMentions()},allowOnFocusedInput:!0},"$mod+KeyK":{action:e=>{e.preventDefault(),document.querySelector("ninja-keys").open()},allowOnFocusedInput:!0},Enter:{action:e=>{this.isAValidEvent("enter")&&(this.onSendReply(),e.preventDefault())},allowOnFocusedInput:!0},"$mod+Enter":{action:()=>{this.isAValidEvent("cmd_enter")&&this.onSendReply()},allowOnFocusedInput:!0}}},isAValidEvent(e){return!this.showUserMentions&&!this.showMentions&&!this.showCannedMenu&&!this.showVariablesMenu&&this.isFocused&&this.isEditorHotKeyEnabled(e)},onPaste(e){const t=e.clipboardData.files;!this.showRichContentEditor&&t.length!==0&&this.$refs.messageInput.$el.blur(),!(!t.length||!t[0])&&t.forEach(n=>{const{name:s,type:o,size:a}=n;this.onFileUpload({name:s,type:o,size:a,file:n})})},toggleUserMention(e){this.showUserMentions=e},toggleCannedMenu(e){this.showCannedMenu=e},toggleVariablesMenu(e){this.showVariablesMenu=e},openWhatsappTemplateModal(){this.showWhatsAppTemplatesModal=!0},hideWhatsappTemplatesModal(){this.showWhatsAppTemplatesModal=!1},onClickSelfAssign(){const{account_id:e,availability_status:t,available_name:n,email:s,id:o,name:a,role:i,avatar_url:r}=this.currentUser,l={account_id:e,availability_status:t,available_name:n,email:s,id:o,name:a,role:i,thumbnail:r};this.assignedAgent=l},confirmOnSendReply(){if(!this.isReplyButtonDisabled&&!this.showMentions){const e=this.isATwilioWhatsAppChannel||this.isAWhatsAppCloudChannel||this.is360DialogWhatsAppChannel,t=this.isAnInstagramChannel;if((e||t)&&!this.isPrivate)this.sendMessageAsMultipleMessages(this.message);else{const n=this.getMessagePayload(this.message);this.sendMessage(n)}this.isPrivate||this.clearEmailField(),this.clearMessage(),this.hideEmojiPicker(),this.$emit("update:popoutReplyBox",!1)}},sendMessageAsMultipleMessages(e){this.getMultipleMessagesPayload(e).forEach(n=>{this.sendMessage(n)})},sendMessageAnalyticsData(e){var t;return e?Pt(ua.SENT_PRIVATE_NOTE):Pt(ua.SENT_MESSAGE,{channelType:this.channelType,signatureEnabled:this.sendWithSignature,hasReplyTo:!!((t=this.inReplyTo)!=null&&t.id)})},async onSendReply(){const e=aO({message:this.message,variables:this.messageVariables});if(e.length>0){const t=e.length>1?e.length:1;this.undefinedVariableMessage=this.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.MESSAGE",{undefinedVariablesCount:t,undefinedVariables:e.join(", ")}),await this.$refs.confirmDialog.showConfirmation()&&this.confirmOnSendReply()}else this.confirmOnSendReply()},async sendMessage(e){var t,n;try{await this.$store.dispatch("createPendingMessageAndSend",e),wt.emit(jt.SCROLL_TO_MESSAGE),wt.emit(jt.MESSAGE_SENT),this.removeFromDraft(),this.sendMessageAnalyticsData(e.private)}catch(s){const o=((n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.error)||this.$t("CONVERSATION.MESSAGE_ERROR");ce(o)}},async onSendWhatsAppReply(e){this.sendMessage({conversationId:this.currentChat.id,...e}),this.hideWhatsappTemplatesModal()},replaceText(e){this.sendWithSignature&&!this.private&&(e=li(e,this.signatureToApply));const t=sO({message:e,variables:this.messageVariables});setTimeout(()=>{Pt(ua.INSERTED_A_CANNED_RESPONSE),this.message=t},100)},setReplyMode(e=Ts.REPLY){const{can_reply:t}=this.currentChat;if(this.$store.dispatch("draftMessages/setReplyEditorMode",{mode:e}),(t||this.isAWhatsAppChannel)&&(this.replyType=e),this.showRichContentEditor){this.isRecordingAudio&&this.toggleAudioRecorder();return}this.$nextTick(()=>this.$refs.messageInput.focus())},clearEditorSelection(){this.updateEditorSelectionWith=""},insertIntoTextEditor(e,t,n){const{message:s}=this,o=s.slice(0,t)+e+s.slice(n,s.length);this.message=o},addIntoEditor(e){if(this.showRichContentEditor&&(this.updateEditorSelectionWith=e,this.onFocus()),!this.showRichContentEditor){const{selectionStart:t,selectionEnd:n}=this.$refs.messageInput.$el;this.insertIntoTextEditor(e,t,n)}},clearMessage(){this.message="",this.sendWithSignature&&!this.isPrivate&&(this.message=li(this.message,this.signatureToApply)),this.attachedFiles=[],this.isRecordingAudio=!1,this.resetReplyToMessage(),this.resetAudioRecorderInput()},clearEmailField(){this.ccEmails="",this.bccEmails="",this.toEmails=""},toggleEmojiPicker(){this.showEmojiPicker=!this.showEmojiPicker},toggleAudioRecorder(){this.isRecordingAudio=!this.isRecordingAudio,this.isRecorderAudioStopped=!this.isRecordingAudio,this.isRecordingAudio||this.resetAudioRecorderInput()},toggleAudioRecorderPlayPause(){this.isRecordingAudio&&(this.isRecorderAudioStopped?this.isRecorderAudioStopped&&this.$refs.audioRecorderInput.playPause():(this.isRecorderAudioStopped=!0,this.$refs.audioRecorderInput.stopRecording()))},hideEmojiPicker(){this.showEmojiPicker&&this.toggleEmojiPicker()},hideMentions(){this.showMentions=!1},onTypingOn(){this.toggleTyping("on")},onTypingOff(){this.toggleTyping("off")},onBlur(){this.isFocused=!1,this.saveDraft(this.conversationIdByRoute,this.replyType)},onFocus(){this.isFocused=!0},onRecordProgressChanged(e){this.recordingAudioDurationText=e},onFinishRecorder(e){this.recordingAudioState="stopped",this.hasRecordedAudio=!0;const t={...e,isRecordedAudio:!0};return e&&this.onFileUpload(t)},toggleTyping(e){const t=this.currentChat.id,n=this.isPrivate;t&&this.$store.dispatch("conversationTypingStatus/toggleTyping",{status:e,conversationId:t,isPrivate:n})},attachFile({blob:e,file:t}){const n=new FileReader;n.readAsDataURL(t.file),n.onloadend=()=>{this.attachedFiles.push({currentChatId:this.currentChat.id,resource:e||t,isPrivate:this.isPrivate,thumb:n.result,blobSignedId:e?e.signed_id:void 0,isRecordedAudio:(t==null?void 0:t.isRecordedAudio)||!1})}},removeAttachment(e){this.attachedFiles=e},setReplyToInPayload(e){var t;return(t=this.inReplyTo)!=null&&t.id?{...e,contentAttributes:{...e.contentAttributes,in_reply_to:this.inReplyTo.id}}:e},getMultipleMessagesPayload(e){const t=[];if(this.attachedFiles&&this.attachedFiles.length){let s=this.isAnInstagramChannel?"":e;this.attachedFiles.forEach(o=>{const a=this.globalConfig.directUploadsEnabled?o.blobSignedId:o.resource.file;let i={conversationId:this.currentChat.id,files:[a],private:!1,message:s,sender:this.sender};i=this.setReplyToInPayload(i),t.push(i),this.isAnInstagramChannel||(s="")})}const n=!this.attachedFiles||!this.attachedFiles.length;if(this.isAnInstagramChannel&&this.message||!this.isAnInstagramChannel&&n){let s={conversationId:this.currentChat.id,message:e,private:!1,sender:this.sender};s=this.setReplyToInPayload(s),t.push(s)}return t},getMessagePayload(e){let t={conversationId:this.currentChat.id,message:e,private:this.isPrivate,sender:this.sender};return t=this.setReplyToInPayload(t),this.attachedFiles&&this.attachedFiles.length&&(t.files=[],this.attachedFiles.forEach(n=>{this.globalConfig.directUploadsEnabled?t.files.push(n.blobSignedId):t.files.push(n.resource.file)})),this.ccEmails&&!this.isOnPrivateNote&&(t.ccEmails=this.ccEmails),this.bccEmails&&!this.isOnPrivateNote&&(t.bccEmails=this.bccEmails),this.toEmails&&!this.isOnPrivateNote&&(t.toEmails=this.toEmails),t},setCcEmails(e){this.bccEmails=e.bccEmails,this.ccEmails=e.ccEmails},setCCAndToEmailsFromLastChat(){var i,r,l;const e=((l=(r=(i=this.currentChat)==null?void 0:i.meta)==null?void 0:r.sender)==null?void 0:l.email)||"",{email:t,forward_to_email:n}=this.inbox,{cc:s,bcc:o,to:a}=nO(this.lastEmail,e,t,n);this.toEmails=a.join(", "),this.ccEmails=s.join(", "),this.bccEmails=o.join(", ")},fetchAndSetReplyTo(){var n,s;const e=Na.MESSAGE_REPLY_TO,t=va.getFromJsonStore(e,this.conversationId);this.inReplyTo=(s=(n=this.currentChat)==null?void 0:n.messages)==null?void 0:s.find(o=>o.id===t)},resetReplyToMessage(){const e=Na.MESSAGE_REPLY_TO;va.deleteFromJsonStore(e,this.conversationId),wt.emit(jt.TOGGLE_REPLY_TO_MESSAGE)},onNewConversationModalActive(e){this.newConversationModalActive=e},onSearchPopoverClose(){this.showArticleSearchPopover=!1},toggleInsertArticle(){this.showArticleSearchPopover=!this.showArticleSearchPopover},resetAudioRecorderInput(){this.recordingAudioDurationText="00:00",this.isRecordingAudio=!1,this.recordingAudioState="",this.hasRecordedAudio=!1,this.attachedFiles=this.attachedFiles.filter(e=>!(e!=null&&e.isRecordedAudio))}}},pSe={class:"reply-box__top"};function hSe(e,t,n,s,o,a){const i=M("Banner"),r=M("ReplyTopPanel"),l=M("ArticleSearchPopover"),c=M("ReplyToMessage"),u=M("CannedResponse"),d=M("EmojiInput"),m=M("ReplyEmailHead"),f=M("AudioRecorder"),g=M("ResizableTextArea"),T=M("WootMessageEditor"),S=M("AttachmentPreview"),_=M("MessageSignatureMissingAlert"),E=M("ReplyBottomPanel"),b=M("WhatsappTemplates"),I=M("woot-confirm-modal"),R=qe("on-clickaway");return p(),v(pe,null,[a.showSelfAssignBanner?(p(),$(i,{key:0,"action-button-variant":"ghost","color-scheme":"secondary",class:"mx-2 mb-2 rounded-lg banner--self-assign","banner-message":e.$t("CONVERSATION.NOT_ASSIGNED_TO_YOU"),"has-action-button":"","action-button-label":e.$t("CONVERSATION.ASSIGN_TO_ME"),onPrimaryAction:a.onClickSelfAssign},null,8,["banner-message","action-button-label","onPrimaryAction"])):w("",!0),h("div",{ref:"replyEditor",class:se(["reply-box",a.replyBoxClass])},[y(r,{mode:o.replyType,"is-message-length-reaching-threshold":a.isMessageLengthReachingThreshold,"characters-remaining":a.charactersRemaining,"popout-reply-box":s.popoutReplyBox,onSetReplyMode:a.setReplyMode,onTogglePopout:t[0]||(t[0]=O=>e.$emit("togglePopout"))},null,8,["mode","is-message-length-reaching-threshold","characters-remaining","popout-reply-box","onSetReplyMode"]),o.showArticleSearchPopover&&a.connectedPortalSlug?(p(),$(l,{key:0,"selected-portal-slug":a.connectedPortalSlug,onInsert:a.handleInsert,onClose:a.onSearchPopoverClose},null,8,["selected-portal-slug","onInsert","onClose"])):w("",!0),h("div",pSe,[a.shouldShowReplyToMessage?(p(),$(c,{key:0,message:o.inReplyTo,onDismiss:a.resetReplyToMessage},null,8,["message","onDismiss"])):w("",!0),o.showMentions&&o.hasSlashCommand?re((p(),$(u,{key:1,class:"normal-editor__canned-box","search-key":o.mentionSearchKey,onReplace:a.replaceText},null,8,["search-key","onReplace"])),[[R,a.hideMentions]]):w("",!0),o.showEmojiPicker?re((p(),$(d,{key:2,class:se(a.emojiDialogClassOnExpandedLayoutAndRTLView),"on-click":a.addIntoEditor},null,8,["class","on-click"])),[[R,a.hideEmojiPicker]]):w("",!0),a.showReplyHead?(p(),$(m,{key:3,"cc-emails":o.ccEmails,"onUpdate:ccEmails":t[1]||(t[1]=O=>o.ccEmails=O),"bcc-emails":o.bccEmails,"onUpdate:bccEmails":t[2]||(t[2]=O=>o.bccEmails=O),"to-emails":o.toEmails,"onUpdate:toEmails":t[3]||(t[3]=O=>o.toEmails=O)},null,8,["cc-emails","bcc-emails","to-emails"])):w("",!0),a.showAudioRecorderEditor?(p(),$(f,{key:4,ref:"audioRecorderInput","audio-record-format":a.audioRecordFormat,onRecorderProgressChanged:a.onRecordProgressChanged,onFinishRecord:a.onFinishRecorder,onPlay:t[4]||(t[4]=O=>o.recordingAudioState="playing"),onPause:t[5]||(t[5]=O=>o.recordingAudioState="paused")},null,8,["audio-record-format","onRecorderProgressChanged","onFinishRecord"])):a.showRichContentEditor?(p(),$(T,{key:6,modelValue:o.message,"onUpdate:modelValue":t[7]||(t[7]=O=>o.message=O),"editor-id":a.editorStateId,class:"input","is-private":a.isOnPrivateNote,placeholder:a.messagePlaceHolder,"update-selection-with":o.updateEditorSelectionWith,"min-height":4,"enable-variables":"",variables:a.messageVariables,signature:a.signatureToApply,"allow-signature":"","channel-type":e.channelType,onTypingOff:a.onTypingOff,onTypingOn:a.onTypingOn,onFocus:a.onFocus,onBlur:a.onBlur,onToggleUserMention:a.toggleUserMention,onToggleCannedMenu:a.toggleCannedMenu,onToggleVariablesMenu:a.toggleVariablesMenu,onClearSelection:a.clearEditorSelection},null,8,["modelValue","editor-id","is-private","placeholder","update-selection-with","variables","signature","channel-type","onTypingOff","onTypingOn","onFocus","onBlur","onToggleUserMention","onToggleCannedMenu","onToggleVariablesMenu","onClearSelection"])):(p(),$(g,{key:5,ref:"messageInput",modelValue:o.message,"onUpdate:modelValue":t[6]||(t[6]=O=>o.message=O),class:"rounded-none input",placeholder:a.messagePlaceHolder,"min-height":4,signature:a.signatureToApply,"allow-signature":"","send-with-signature":a.sendWithSignature,onTypingOff:a.onTypingOff,onTypingOn:a.onTypingOn,onFocus:a.onFocus,onBlur:a.onBlur},null,8,["modelValue","placeholder","signature","send-with-signature","onTypingOff","onTypingOn","onFocus","onBlur"]))]),a.hasAttachments&&!a.showAudioRecorderEditor?(p(),v("div",{key:1,class:"attachment-preview-box",onPaste:t[8]||(t[8]=(...O)=>a.onPaste&&a.onPaste(...O))},[y(S,{class:"flex-col mt-4",attachments:o.attachedFiles,onRemoveAttachment:a.removeAttachment},null,8,["attachments","onRemoveAttachment"])],32)):w("",!0),a.isSignatureEnabledForInbox&&!a.isSignatureAvailable?(p(),$(_,{key:2})):w("",!0),y(E,{"conversation-id":a.conversationId,"enable-multiple-file-upload":a.enableMultipleFileUpload,"has-whatsapp-templates":a.hasWhatsappTemplates,inbox:a.inbox,"is-on-private-note":a.isOnPrivateNote,"is-recording-audio":o.isRecordingAudio,"is-send-disabled":a.isReplyButtonDisabled,mode:o.replyType,"on-file-upload":e.onFileUpload,"on-send":a.onSendReply,"conversation-type":a.conversationType,"recording-audio-duration-text":o.recordingAudioDurationText,"recording-audio-state":o.recordingAudioState,"send-button-text":a.replyButtonLabel,"show-audio-recorder":a.showAudioRecorder,"show-editor-toggle":e.isAPIInbox&&!a.isOnPrivateNote,"show-emoji-picker":o.showEmojiPicker,"show-file-upload":a.showFileUpload,"toggle-audio-recorder-play-pause":a.toggleAudioRecorderPlayPause,"toggle-audio-recorder":a.toggleAudioRecorder,"toggle-emoji-picker":a.toggleEmojiPicker,message:o.message,"portal-slug":a.connectedPortalSlug,"new-conversation-modal-active":o.newConversationModalActive,onSelectWhatsappTemplate:a.openWhatsappTemplateModal,onToggleEditor:a.toggleRichContentEditor,onReplaceText:a.replaceText,onToggleInsertArticle:a.toggleInsertArticle},null,8,["conversation-id","enable-multiple-file-upload","has-whatsapp-templates","inbox","is-on-private-note","is-recording-audio","is-send-disabled","mode","on-file-upload","on-send","conversation-type","recording-audio-duration-text","recording-audio-state","send-button-text","show-audio-recorder","show-editor-toggle","show-emoji-picker","show-file-upload","toggle-audio-recorder-play-pause","toggle-audio-recorder","toggle-emoji-picker","message","portal-slug","new-conversation-modal-active","onSelectWhatsappTemplate","onToggleEditor","onReplaceText","onToggleInsertArticle"]),y(b,{"inbox-id":a.inbox.id,show:o.showWhatsAppTemplatesModal,onClose:a.hideWhatsappTemplatesModal,onOnSend:a.onSendWhatsAppReply,onCancel:a.hideWhatsappTemplatesModal},null,8,["inbox-id","show","onClose","onOnSend","onCancel"]),y(I,{ref:"confirmDialog",title:e.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.TITLE"),description:o.undefinedVariableMessage},null,8,["title","description"])],2)],64)}const mSe=Ae(dSe,[["render",hSe],["__scopeId","data-v-adc17129"]]),fSe={mixins:[Yo],props:{sender:{type:Object,default:()=>({})},createdAt:{type:Number,default:0},storySender:{type:String,default:""},externalError:{type:String,default:""},storyId:{type:String,default:""},isEmail:{type:Boolean,default:!0},isPrivate:{type:Boolean,default:!0},isATweet:{type:Boolean,default:!0},messageType:{type:Number,default:1},messageStatus:{type:String,default:""},sourceId:{type:String,default:""},inboxId:{type:[String,Number],default:0}},computed:{inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},isIncoming(){return fa.INCOMING===this.messageType},isOutgoing(){return fa.OUTGOING===this.messageType},isTemplate(){return fa.TEMPLATE===this.messageType},isDelivered(){return Vl.DELIVERED===this.messageStatus},isRead(){return Vl.READ===this.messageStatus},isSent(){return Vl.SENT===this.messageStatus},readableTime(){return Ac(this.createdAt,"LLL d, h:mm a")},screenName(){const{additional_attributes:e={}}=this.sender||{};return(e==null?void 0:e.screen_name)||""},linkToTweet(){if(!this.sourceId||!this.inbox.name)return"";const{screenName:e,sourceId:t}=this;return`https://twitter.com/${e||this.inbox.name}/status/${t}`},linkToStory(){if(!this.storyId||!this.storySender)return"";const{storySender:e,storyId:t}=this;return`https://www.instagram.com/stories/direct/${e}_${t}`},showStatusIndicators(){return!!((this.isOutgoing||this.isTemplate)&&!this.isPrivate)},showSentIndicator(){return this.showStatusIndicators?this.isAnEmailChannel?!!this.sourceId:this.isAWhatsAppChannel||this.isATwilioChannel||this.isAFacebookInbox||this.isASmsInbox||this.isATelegramChannel?this.sourceId&&this.isSent:!!this.isALineChannel:!1},showDeliveredIndicator(){return this.showStatusIndicators?this.isAWhatsAppChannel||this.isATwilioChannel||this.isASmsInbox||this.isAFacebookInbox?this.sourceId&&this.isDelivered:this.isAWebWidgetInbox||this.isAPIInbox?this.isSent:this.isALineChannel?this.isDelivered:!1:!1},showReadIndicator(){return this.showStatusIndicators?this.isAWhatsAppChannel||this.isATwilioChannel||this.isAFacebookInbox?this.sourceId&&this.isRead:this.isAWebWidgetInbox||this.isAPIInbox?this.isRead:!1:!1}}},gSe={class:"message-text--metadata"},_Se={key:0,class:"read-indicator-wrap"},vSe={key:1,class:"read-indicator-wrap"},bSe={key:2,class:"read-indicator-wrap"},ESe={key:3,class:"read-indicator-wrap"},TSe=["href"];function ySe(e,t,n,s,o,a){const i=M("fluent-icon"),r=qe("tooltip");return p(),v("div",gSe,[h("span",{class:se(["time",{"has-status-icon":a.showSentIndicator||a.showDeliveredIndicator||a.showReadIndicator}])},A(a.readableTime),3),n.externalError?(p(),v("span",_Se,[re(y(i,{icon:"error-circle",class:"action--icon",size:"14"},null,512),[[r,n.externalError,void 0,{"top-start":!0}]])])):w("",!0),a.showReadIndicator?(p(),v("span",vSe,[re(y(i,{icon:"checkmark-double",class:"action--icon read-tick read-indicator",size:"14"},null,512),[[r,e.$t("CHAT_LIST.MESSAGE_READ"),void 0,{"top-start":!0}]])])):a.showDeliveredIndicator?(p(),v("span",bSe,[re(y(i,{icon:"checkmark-double",class:"action--icon read-tick",size:"14"},null,512),[[r,e.$t("CHAT_LIST.DELIVERED"),void 0,{"top-start":!0}]])])):a.showSentIndicator?(p(),v("span",ESe,[re(y(i,{icon:"checkmark",class:"action--icon read-tick",size:"14"},null,512),[[r,e.$t("CHAT_LIST.SENT"),void 0,{"top-start":!0}]])])):w("",!0),n.isEmail?re((p(),$(i,{key:4,icon:"mail",class:"action--icon",size:"16"},null,512)),[[r,e.$t("CHAT_LIST.RECEIVED_VIA_EMAIL"),void 0,{"top-start":!0}]]):w("",!0),n.isPrivate?re((p(),$(i,{key:5,icon:"lock-closed",class:"action--icon lock--icon--private",size:"16",onMouseenter:t[0]||(t[0]=l=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=l=>e.isHovered=!1)},null,512)),[[r,e.$t("CONVERSATION.VISIBLE_TO_AGENTS"),void 0,{"top-start":!0}]]):w("",!0),n.isATweet&&(a.isOutgoing||a.isIncoming)&&a.linkToTweet?(p(),v("a",{key:6,href:a.linkToTweet,target:"_blank",rel:"noopener noreferrer nofollow"},[re(y(i,{icon:"open",class:"cursor-pointer action--icon",size:"16"},null,512),[[r,e.$t("CHAT_LIST.VIEW_TWEET_IN_TWITTER"),void 0,{"top-start":!0}]])],8,TSe)):w("",!0)])}const SSe=Ae(fSe,[["render",ySe],["__scopeId","data-v-9ed7aa7d"]]),ASe={components:{NextButton:oe},props:{name:{type:String,default:""},phoneNumber:{type:String,default:""}},computed:{formattedPhoneNumber(){return this.phoneNumber.replace(/\s|-|[A-Za-z]/g,"")},rawPhoneNumber(){return this.phoneNumber.replace(/\D/g,"")}},methods:{async addContact(){try{let e=await this.filterContactByNumber(this.rawPhoneNumber);e||(e=await this.$store.dispatch("contacts/create",this.getContactObject()),ce(this.$t("CONTACT_FORM.SUCCESS_MESSAGE"))),this.openContactNewTab(e.id)}catch(e){e instanceof Oc?e.data.includes("phone_number")&&ce(this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):e instanceof nl?ce(e.data):ce(this.$t("CONTACT_FORM.ERROR_MESSAGE"))}},getContactObject(){return{name:this.name,phone_number:`+${this.rawPhoneNumber}`}},async filterContactByNumber(e){const n={payload:[{attribute_key:"phone_number",filter_operator:"equal_to",values:[e],attribute_model:"standard",custom_attribute_type:""}]};return(await this.$store.dispatch("contacts/filter",{queryPayload:n,resetState:!1})).shift()},openContactNewTab(e){const n=`/app/accounts/${window.location.pathname.split("/")[3]}/contacts/${e}`;window.open(n,"_blank")}}},ISe={class:"contact--group"},CSe={class:"meta"},OSe={class:"overflow-hidden whitespace-nowrap text-ellipsis margin-bottom-0"},NSe={key:0,class:"link-wrap"};function wSe(e,t,n,s,o,a){const i=M("fluent-icon"),r=M("NextButton");return p(),v("div",ISe,[y(i,{icon:"call",class:"file--icon",size:"18"}),h("div",CSe,[h("p",OSe,A(n.phoneNumber),1)]),a.formattedPhoneNumber?(p(),v("div",NSe,[y(r,{ghost:"",xs:"",label:e.$t("CONVERSATION.SAVE_CONTACT"),onClick:Fe(a.addContact,["prevent"])},null,8,["label","onClick"])])):w("",!0)])}const RSe=Ae(ASe,[["render",wSe],["__scopeId","data-v-e7d8a514"]]),xSe={props:{url:{type:String,required:!0}},computed:{fileName(){return this.url?this.url.substring(this.url.lastIndexOf("/")+1)||this.$t("CONVERSATION.UNKNOWN_FILE_TYPE"):this.$t("CONVERSATION.UNKNOWN_FILE_TYPE")}},methods:{openLink(){const e=window.open(this.url,"_blank","noopener");e&&e.focus()}}},$Se={class:"file message-text__wrap"},MSe={class:"icon-wrap"},LSe={class:"meta"},kSe={class:"attachment-name text-slate-700 dark:text-slate-400"},DSe=["href"];function PSe(e,t,n,s,o,a){const i=M("fluent-icon");return p(),v("div",$Se,[h("div",MSe,[y(i,{icon:"document",class:"file--icon",size:"32"})]),h("div",LSe,[h("h5",kSe,A(decodeURI(a.fileName)),1),h("a",{class:"download clear link button small",rel:"noreferrer noopener nofollow",target:"_blank",href:n.url},A(e.$t("CONVERSATION.DOWNLOAD")),9,DSe)])])}const BSe=Ae(xSe,[["render",PSe],["__scopeId","data-v-8d1b32d5"]]),FSe=e=>{const i="center center",r=X(1),l=X(i),c=X(0),u=C(()=>({transform:`rotate(${c.value}deg)`})),d=C(()=>({transform:`scale(${r.value})`,cursor:r.value<3?"zoom-in":"zoom-out",transformOrigin:`${l.value}`})),m=()=>{e.value&&(l.value=i)},f=R=>{if(!e.value)return;m();const O=R==="clockwise"?90:-90;c.value=(c.value+O)%360,r.value=1,m()},g=(R,O)=>{if(!e.value)return{x:50,y:50};const x=e.value.getBoundingClientRect(),{relativeX:L,relativeY:F}=rO(R,O,x),{rotatedX:D,rotatedY:V}=lO(L,F,c.value);return cO(D,V,x.width,x.height)},T=(R,O,x)=>{if(!e.value)return;const L=Math.max(1,Math.min(3,r.value+R));if(L!==r.value){if(O!=null&&x!=null&&r.value===1){const{x:F,y:D}=g(O,x);l.value=`${F}% ${D}%`}r.value=L}},S=R=>{if(!e.value)return;R.preventDefault();const O=r.value>=3?1:3,{x,y:L}=g(R.clientX,R.clientY);l.value=`${x}% ${L}%`,r.value=O},_=R=>{if(!e.value)return;R.preventDefault();const O=R.deltaY>0?-.2:.2;T(O,R.clientX,R.clientY)},E=Uo(R=>{if(!e.value||r.value!==1)return;const{x:O,y:x}=g(R.clientX,R.clientY);l.value=`${O}% ${x}%`},100,!1),b=Uo(()=>{e.value&&r.value===1&&(l.value=i)},110,!1);return{zoomScale:r,imgTransformOriginPoint:l,activeImageRotation:c,imageWrapperStyle:u,imageStyle:d,getZoomOrigin:g,resetTransformOrigin:m,onRotate:f,onZoom:T,onDoubleClickZoomImage:S,onWheelImageZoom:_,onMouseMove:E,onMouseLeave:b,resetZoomAndRotation:()=>{c.value=0,r.value=1,m()}}},USe={key:0,class:"flex items-center min-w-[15rem] shrink-0"},GSe={class:"flex flex-col ml-2 rtl:ml-0 rtl:mr-2 overflow-hidden"},VSe={class:"text-base leading-5 m-0 font-medium"},HSe={class:"overflow-hidden text-n-slate-12 whitespace-nowrap text-ellipsis"},WSe={class:"text-xs text-n-slate-11 whitespace-nowrap text-ellipsis"},zSe={class:"flex-1 mx-2 px-2 truncate text-sm font-medium text-center text-n-slate-12"},jSe={class:"truncate"},KSe={class:"flex items-center gap-2 ml-2 shrink-0"},YSe={class:"flex items-stretch flex-1 h-full overflow-hidden"},XSe={class:"flex items-center justify-center w-16 shrink-0"},qSe={class:"flex-1 flex items-center justify-center overflow-hidden"},ZSe=["src"],QSe=["src"],JSe=["src"],eAe={class:"flex items-center justify-center w-16 shrink-0"},tAe={class:"z-10 flex items-center justify-center h-12 border-t border-n-weak"},nAe={class:"rounded-md flex items-center justify-center px-3 py-1 bg-n-slate-3 text-n-slate-12 text-sm font-medium"},hl={__name:"GalleryView",props:hn({attachment:{type:Object,required:!0},allAttachments:{type:Array,required:!0}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:hn(["close"],["update:show"]),setup(e,{emit:t}){const n=e,s=t,o=wn(e,"show"),{t:a}=Me(),i=nn(),r={IMAGE:"image",VIDEO:"video",IG_REEL:"ig_reel",AUDIO:"audio"},l=X(!1),c=X({}),u=X(""),d=X(n.allAttachments.findIndex(Z=>Z.message_id===n.attachment.message_id)||0),m=Is("imageRef"),{imageWrapperStyle:f,imageStyle:g,onRotate:T,activeImageRotation:S,onZoom:_,onDoubleClickZoomImage:E,onWheelImageZoom:b,onMouseMove:I,onMouseLeave:R,resetZoomAndRotation:O}=FSe(m),x=C(()=>i.getCurrentUser.value),L=C(()=>n.allAttachments.length>1),F=C(()=>{const{created_at:Z}=c.value;return Z&&Ac(Z,"LLL d yyyy, h:mm a")||""}),D=C(()=>u.value===r.IMAGE),V=C(()=>[r.VIDEO,r.IG_REEL].includes(u.value)),B=C(()=>u.value===r.AUDIO),P=C(()=>{var ee,ge,Ee;const{name:Z,available_name:G,avatar_url:H,thumbnail:W,id:J}=((ee=c.value)==null?void 0:ee.sender)||((ge=n.attachment)==null?void 0:ge.sender)||{};return{name:((Ee=x.value)==null?void 0:Ee.id)===J?"You":Z||G||"",avatar:W||H||""}}),k=C(()=>{const{data_url:Z}=c.value;if(!Z)return"";const G=Z.split("/").pop();return G?decodeURIComponent(G):""}),U=()=>s("close"),j=Z=>{const{file_type:G}=Z;Object.values(r).includes(G)&&(c.value=Z,u.value=G)},z=(Z,G)=>{Z&&(d.value=G,j(Z),O())},Y=async()=>{const{file_type:Z,data_url:G,extension:H}=c.value;if(Object.values(r).includes(Z))try{l.value=!0,await Mf({url:G,type:Z,extension:H})}catch{ce(a("GALLERY_VIEW.ERROR_DOWNLOADING"))}finally{l.value=!1}};return $s({Escape:{action:U},ArrowLeft:{action:()=>{z(n.allAttachments[d.value-1],d.value-1)}},ArrowRight:{action:()=>{z(n.allAttachments[d.value+1],d.value+1)}}}),dt(()=>{j(n.attachment)}),(Z,G)=>{const H=M("woot-modal"),W=qe("dompurify-html");return p(),$(gc,{to:"body"},{default:K(()=>[y(H,{show:o.value,"onUpdate:show":G[14]||(G[14]=J=>o.value=J),"full-width":"","show-close-button":!1,"on-close":U},{default:K(()=>[h("div",{class:"bg-n-background flex flex-col h-[inherit] w-[inherit] overflow-hidden select-none",onClick:U},[h("header",{class:"z-10 flex items-center justify-between w-full h-16 px-6 py-2 bg-n-background border-b border-n-weak",onClick:G[4]||(G[4]=Fe(()=>{},["stop"]))},[P.value?(p(),v("div",USe,[P.value.avatar?(p(),$(Hn,{key:0,username:P.value.name,src:P.value.avatar,class:"flex-shrink-0"},null,8,["username","src"])):w("",!0),h("div",GSe,[h("h3",VSe,[h("span",HSe,A(P.value.name),1)]),h("span",WSe,A(F.value),1)])])):w("",!0),h("div",zSe,[re(h("span",jSe,null,512),[[W,k.value]])]),h("div",KSe,[D.value?(p(),$(oe,{key:0,icon:"i-lucide-zoom-in",slate:"",ghost:"",onClick:G[0]||(G[0]=J=>N(_)(.1))})):w("",!0),D.value?(p(),$(oe,{key:1,icon:"i-lucide-zoom-out",slate:"",ghost:"",onClick:G[1]||(G[1]=J=>N(_)(-.1))})):w("",!0),D.value?(p(),$(oe,{key:2,icon:"i-lucide-rotate-ccw",slate:"",ghost:"",onClick:G[2]||(G[2]=J=>N(T)("counter-clockwise"))})):w("",!0),D.value?(p(),$(oe,{key:3,icon:"i-lucide-rotate-cw",slate:"",ghost:"",onClick:G[3]||(G[3]=J=>N(T)("clockwise"))})):w("",!0),y(oe,{icon:"i-lucide-download",slate:"",ghost:"","is-loading":l.value,disabled:l.value,onClick:Y},null,8,["is-loading","disabled"]),y(oe,{icon:"i-lucide-x",slate:"",ghost:"",onClick:U})])]),h("main",YSe,[h("div",XSe,[L.value?(p(),$(oe,{key:0,icon:"ltr:i-lucide-chevron-left rtl:i-lucide-chevron-right",class:"z-10",blue:"",faded:"",lg:"",disabled:d.value===0,onClick:G[5]||(G[5]=Fe(J=>z(e.allAttachments[d.value-1],d.value-1),["stop"]))},null,8,["disabled"])):w("",!0)]),h("div",qSe,[D.value?(p(),v("div",{key:0,style:Ht(N(f)),class:se(["flex items-center justify-center origin-center",{"w-[calc(100dvh-8rem)] h-[calc(100dvw-7rem)]":N(S)%180!==0,"size-full":N(S)%180===0}])},[(p(),v("img",{ref_key:"imageRef",ref:m,key:c.value.message_id,src:c.value.data_url,style:Ht(N(g)),class:"max-h-full max-w-full object-contain duration-100 ease-in-out transform select-none",onClick:G[6]||(G[6]=Fe(()=>{},["stop"])),onDblclick:G[7]||(G[7]=Fe((...J)=>N(E)&&N(E)(...J),["stop"])),onWheel:G[8]||(G[8]=Fe((...J)=>N(b)&&N(b)(...J),["prevent","stop"])),onMousemove:G[9]||(G[9]=(...J)=>N(I)&&N(I)(...J)),onMouseleave:G[10]||(G[10]=(...J)=>N(R)&&N(R)(...J))},null,44,ZSe))],6)):w("",!0),V.value?(p(),v("video",{key:c.value.message_id,src:c.value.data_url,controls:"",playsInline:"",class:"max-h-full max-w-full object-contain",onClick:G[11]||(G[11]=Fe(()=>{},["stop"]))},null,8,QSe)):w("",!0),B.value?(p(),v("audio",{key:c.value.message_id,controls:"",class:"w-full max-w-md",onClick:G[12]||(G[12]=Fe(()=>{},["stop"]))},[h("source",{src:`${c.value.data_url}?t=${Date.now()}`},null,8,JSe)])):w("",!0)]),h("div",eAe,[L.value?(p(),$(oe,{key:0,icon:"ltr:i-lucide-chevron-right rtl:i-lucide-chevron-left",class:"z-10",blue:"",faded:"",lg:"",disabled:d.value===e.allAttachments.length-1,onClick:G[13]||(G[13]=Fe(J=>z(e.allAttachments[d.value+1],d.value+1),["stop"]))},null,8,["disabled"])):w("",!0)])]),h("footer",tAe,[h("div",nAe,A(`${d.value+1} / ${e.allAttachments.length}`),1)])])]),_:1},8,["show"])]),_:1})}}},wu={IMAGE:"image",VIDEO:"video",AUDIO:"audio",IG_REEL:"ig_reel"},sAe={components:{GalleryView:hl},props:{attachment:{type:Object,required:!0}},emits:["error"],data(){return{show:!1,isImageError:!1}},computed:{...lt({currentChatAttachments:"getSelectedChatAttachments"}),isImage(){return this.attachment.file_type===wu.IMAGE},isVideo(){return this.attachment.file_type===wu.VIDEO||this.attachment.file_type===wu.IG_REEL},isAudio(){return this.attachment.file_type===wu.AUDIO},timeStampURL(){return A0(this.dataUrl)},attachmentTypeClasses(){return{image:this.isImage,video:this.isVideo}},filteredCurrentChatAttachments(){return this.currentChatAttachments.filter(t=>["image","video","audio"].includes(t.file_type))},dataUrl(){return this.attachment.data_url},imageWidth(){return this.attachment.width?`${this.attachment.width}px`:"auto"},imageHeight(){return this.attachment.height?`${this.attachment.height}px`:"auto"}},watch:{attachment(){this.isImageError=!1}},methods:{onClose(){this.show=!1},onClick(e){if(YC(e)){window.open(this.attachment.data_url,"_blank");return}this.show=!0},onImgError(){this.isImageError=!0,this.$emit("error")}}},aAe=["src","width","height"],oAe=["src"],iAe={key:2,controls:"",class:"skip-context-menu mb-0.5"},rAe=["src"];function lAe(e,t,n,s,o,a){const i=M("GalleryView");return p(),v("div",{class:se(["message-text__wrap",a.attachmentTypeClasses])},[a.isImage&&!o.isImageError?(p(),v("img",{key:0,class:"bg-woot-200 dark:bg-woot-900",src:a.dataUrl,width:a.imageWidth,height:a.imageHeight,onClick:t[0]||(t[0]=(...r)=>a.onClick&&a.onClick(...r)),onError:t[1]||(t[1]=(...r)=>a.onImgError&&a.onImgError(...r))},null,40,aAe)):w("",!0),a.isVideo?(p(),v("video",{key:1,src:a.dataUrl,muted:"",playsInline:"",onError:t[2]||(t[2]=(...r)=>a.onImgError&&a.onImgError(...r)),onClick:t[3]||(t[3]=(...r)=>a.onClick&&a.onClick(...r))},null,40,oAe)):a.isAudio?(p(),v("audio",iAe,[h("source",{src:a.timeStampURL},null,8,rAe)])):w("",!0),o.show?(p(),$(i,{key:3,show:o.show,"onUpdate:show":t[4]||(t[4]=r=>o.show=r),attachment:n.attachment,"all-attachments":a.filteredCurrentChatAttachments,onError:a.onImgError,onClose:a.onClose},null,8,["show","attachment","all-attachments","onError","onClose"])):w("",!0)],2)}const cAe=Ae(sAe,[["render",lAe]]),uAe={components:{NextButton:oe},props:{messageId:{type:Number,required:!0}},data(){return{isLoading:!1,dyteAuthToken:"",isSDKMounted:!1}},computed:{meetingLink(){return f0(this.dyteAuthToken)}},methods:{async joinTheCall(){this.isLoading=!0;try{const{data:{token:e}={}}=await u_.addParticipantToMeeting(this.messageId);this.dyteAuthToken=e}catch{ce(this.$t("INTEGRATION_SETTINGS.DYTE.JOIN_ERROR"))}finally{this.isLoading=!1}},leaveTheRoom(){this.dyteAuthToken=""}}},dAe={key:0,class:"video-call--container"},pAe=["src"];function hAe(e,t,n,s,o,a){const i=M("NextButton");return p(),v("div",null,[y(i,{blue:"",sm:"",icon:"i-lucide-video",label:e.$t("INTEGRATION_SETTINGS.DYTE.CLICK_HERE_TO_JOIN"),"is-loading":o.isLoading,onClick:a.joinTheCall},null,8,["label","is-loading","onClick"]),o.dyteAuthToken?(p(),v("div",dAe,[h("iframe",{src:a.meetingLink,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"},null,8,pAe),y(i,{sm:"",class:"mt-2",label:e.$t("INTEGRATION_SETTINGS.DYTE.LEAVE_THE_ROOM"),onClick:a.leaveTheRoom},null,8,["label","onClick"])])):w("",!0)])}const mAe=Ae(uAe,[["render",hAe]]),fAe={components:{DyteVideoCall:mAe},mixins:[Yo],props:{messageId:{type:[String,Number],default:0},contentAttributes:{type:Object,default:()=>({})},inboxId:{type:[String,Number],default:0}},computed:{showDyteIntegration(){return(this.isAPIInbox||this.isAWebWidgetInbox)&&this.contentAttributes.type==="dyte"},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)}}};function gAe(e,t,n,s,o,a){const i=M("DyteVideoCall");return a.showDyteIntegration?(p(),$(i,{key:0,"message-id":n.messageId,"meeting-data":n.contentAttributes.data},null,8,["message-id","meeting-data"])):w("",!0)}const _Ae=Ae(fAe,[["render",gAe]]),vAe={class:"flex flex-row items-center justify-start gap-1 w-full py-1 px-0 cursor-pointer overflow-hidden"},bAe={class:"flex flex-col items-start flex-1 min-w-0"},EAe=["title"],TAe={class:"flex items-center"},yAe=["href"],SAe={__name:"Location",props:{latitude:{type:Number,default:void 0},longitude:{type:Number,default:void 0},name:{type:String,default:""}},setup(e){const t=e,n=C(()=>`https://maps.google.com/?q=${t.latitude},${t.longitude}`);return(s,o)=>{const a=M("fluent-icon");return p(),v("div",vAe,[y(a,{icon:"location",class:"text-slate-600 dark:text-slate-200 leading-none my-0 flex items-center flex-shrink-0",size:"32"}),h("div",bAe,[h("h5",{class:"text-sm text-slate-800 dark:text-slate-100 truncate m-0 w-full",title:e.name},A(e.name),9,EAe),h("div",TAe,[h("a",{class:"text-woot-600 dark:text-woot-600 text-xs underline",rel:"noreferrer noopener nofollow",target:"_blank",href:n.value},A(s.$t("COMPONENTS.LOCATION_BUBBLE.SEE_ON_MAP")),9,yAe)])])])}}},AAe={props:{emailAttributes:{type:Object,default:()=>({})},isIncoming:{type:Boolean,default:!0},cc:{type:Array,default:()=>[]},bcc:{type:Array,default:()=>[]}},computed:{fromMail(){return(this.emailAttributes.from||[]).join(", ")},toMails(){return(this.emailAttributes.to||[]).join(", ")},ccMails(){return(this.emailAttributes.cc||this.cc||[]).join(", ")},bccMails(){return(this.emailAttributes.bcc||this.bcc||[]).join(", ")},subject(){return this.emailAttributes.subject||""},showHead(){return this.toMails||this.ccMails||this.bccMails||this.fromMail}}},IAe={key:0,class:"meta-wrap"},CAe={class:"message__content--type"},OAe={key:1,class:"meta-wrap"},NAe={class:"message__content--type"},wAe={key:2,class:"meta-wrap"},RAe={class:"message__content--type"},xAe={key:3,class:"meta-wrap"},$Ae={class:"message__content--type"},MAe={key:4,class:"meta-wrap"},LAe={class:"message__content--type"};function kAe(e,t,n,s,o,a){return a.showHead?(p(),v("div",{key:0,class:se(["message__mail-head",{"is-incoming":n.isIncoming}])},[a.fromMail?(p(),v("div",IAe,[h("span",CAe,A(e.$t("EMAIL_HEADER.FROM"))+":",1),h("span",null,A(a.fromMail),1)])):w("",!0),a.toMails?(p(),v("div",OAe,[h("span",NAe,A(e.$t("EMAIL_HEADER.TO"))+":",1),h("span",null,A(a.toMails),1)])):w("",!0),a.ccMails?(p(),v("div",wAe,[h("span",RAe,A(e.$t("EMAIL_HEADER.CC"))+":",1),h("span",null,A(a.ccMails),1)])):w("",!0),a.bccMails?(p(),v("div",xAe,[h("span",$Ae,A(e.$t("EMAIL_HEADER.BCC"))+":",1),h("span",null,A(a.bccMails),1)])):w("",!0),a.subject?(p(),v("div",MAe,[h("span",LAe,A(e.$t("EMAIL_HEADER.SUBJECT"))+": ",1),h("span",null,A(a.subject),1)])):w("",!0)],2)):w("",!0)}const DAe=Ae(AAe,[["render",kAe],["__scopeId","data-v-eb0d5be1"]]),PAe={name:"ReplyTo",components:{MessagePreview:a_},props:{message:{type:Object,required:!0},messageType:{type:Number,required:!0},parentHasAttachments:{type:Boolean,required:!0}},data(){return{MESSAGE_TYPE:fa}},methods:{scrollToMessage(){wt.emit(jt.SCROLL_TO_MESSAGE,{messageId:this.message.id})}}};function BAe(e,t,n,s,o,a){const i=M("MessagePreview");return p(),v("div",{class:se(["px-2 py-1.5 rounded-sm min-w-[10rem] mb-2",{"bg-slate-50 dark:bg-slate-600 dark:text-slate-50":n.messageType===o.MESSAGE_TYPE.INCOMING,"bg-woot-600 text-woot-50":n.messageType===o.MESSAGE_TYPE.OUTGOING,"-mx-2":!n.parentHasAttachments}]),onClick:t[0]||(t[0]=(...r)=>a.scrollToMessage&&a.scrollToMessage(...r))},[y(i,{class:"cursor-pointer",message:n.message,"show-message-type":!1,"default-empty-message":e.$t("CONVERSATION.REPLY_MESSAGE_NOT_FOUND")},null,8,["message","default-empty-message"])],2)}const FAe=Ae(PAe,[["render",BAe]]),PE={a:["class","href","id","style","target"],address:["class","id","style"],b:["class","id","style"],blockquote:["class","id","style"],br:["class","id","style"],caption:["class","id","style"],cite:["class","id","style"],code:["class","id","style"],col:["align","bgcolor","char","charoff","class","id","style","valign","width"],colgroup:["align","bgcolor","char","charoff","class","id","style","valign","width"],center:["class","id","style"],dd:["class","id","style"],div:["align","class","dir","id","style"],dt:["class","id","style"],em:["class","id","style"],font:["class","color","face","id","size","style"],h1:["align","class","dir","id","style"],h2:["align","class","dir","id","style"],h3:["align","class","dir","id","style"],h4:["align","class","dir","id","style"],h5:["align","class","dir","id","style"],h6:["align","class","dir","id","style"],hr:["align","size","width"],i:["class","id","style"],img:["align","alt","border","class","height","hspace","id","src","style","title","usemap","vspace","width"],label:["class","id","style"],legend:["class","id","style"],li:["class","dir","id","style","type"],ol:["class","dir","id","style","type","start","reversed"],p:["align","class","dir","id","style"],pre:["class","id","style"],span:["class","id","style"],strong:["class","id","style"],style:[],sub:["class","id","style"],sup:["class","id","style"],table:["align","bgcolor","border","cellpadding","cellspacing","class","dir","frame","id","rules","style","width"],tbody:["class","id","style"],td:["abbr","align","bgcolor","class","colspan","dir","height","id","lang","rowspan","scope","style","valign","width"],tfoot:["align","bgcolor","char","charoff","class","id","style","valign"],th:["abbr","align","bgcolor","class","colspan","dir","height","id","lang","rowspan","scope","style","valign","width"],thead:["align","bgcolol","char","charoff","class","id","style","valign"],tr:["align","bgcolor","char","charoff","class","dir","id","style","valign"],u:["class","id","style"],ul:["class","dir","id","style"]},UAe=["script","iframe","textarea","title","noscript","noembed","svg"],GAe=["azimuth","background","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-repeat-x","background-repeat-y","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","box-sizing","break-after","break-before","break-inside","caption-side","clear","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","direction","display","elevation","empty-cells","float","font","font-family","font-feature-settings","font-kerning","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","height","image-orientation","image-resolution","ime-mode","isolation","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","letter-spacing","line-break","line-height","list-style","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","mix-blend-mode","object-fit","object-position","opacity","outline","outline-color","outline-style","outline-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","quotes","richness","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","table-layout","text-align","text-align-last","text-autospace","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-style","text-indent","text-justify","text-kashida-space","text-orientation","text-overflow","text-transform","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","unicode-bidi","vertical-align","voice-family","white-space","white-space-collapse","width","word-break","word-spacing","word-wrap","writing-mode","zoom"];function VAe(e,t){return t?e.split(",").map(n=>n.trim()).map(n=>{const s=n.replace(/\./g,"."+t+"_").replace(/#/g,"#"+t+"_");return s.toLowerCase().startsWith("body")?"#"+t+" "+s.substring(4):"#"+t+" "+s}).join(","):e}function HAe(e,t,n){return e.trim().replace(/expression\((.*?)\)/g,"").replace(/url\(["']?(.*?)["']?\)/g,(s,o)=>n?`url("${encodeURI(n(decodeURI(o)))}")`:t.includes(o.toLowerCase().split(":")[0])?s:"")}function FA(e,t,n,s,o){if(!e)return;const a=[];for(let i=0;i<e.length;i++){const r=e[i];a.push(r)}for(const i of a)if(n.includes(i)){const r=e.getPropertyValue(i);e.setProperty(i,HAe(r,t,o),s?e.getPropertyPriority(i):void 0)}else e.removeProperty(i)}function BE(e,t,n,s,o,a){e.selectorText=VAe(e.selectorText,t),FA(e.style,n,s,o,a)}const FE=["http","https","mailto"];function WAe(e,{dropAllHtmlTags:t=!1,rewriteExternalLinks:n,rewriteExternalResources:s,id:o="msg_"+String.fromCharCode(...new Array(24).fill(void 0).map(()=>Math.random()*25%25+65)),allowedSchemas:a=FE,allowedCssProperties:i=GAe,preserveCssPriority:r=!0,noWrapper:l=!1}){var c,u,d,m,f;l&&(o="");const g=new DOMParser().parseFromString(e,"text/html");a=Array.isArray(a)?a.map(I=>I.toLowerCase()):FE;const T=g.createNodeIterator(g.documentElement,NodeFilter.SHOW_COMMENT);let S;for(;S=T.nextNode();)(c=S.parentNode)==null||c.removeChild(S);const _=[...UAe];t&&_.push("style"),g.querySelectorAll(_.join(", ")).forEach(I=>I.remove()),g.querySelectorAll("head > style").forEach(I=>{g.body.appendChild(I)});const E=[],b=g.createNodeIterator(g.body,NodeFilter.SHOW_ELEMENT,{acceptNode:()=>NodeFilter.FILTER_ACCEPT});for(;S=b.nextNode();){const I=S,R=I.tagName.toLowerCase();if(!(R==="body"||R==="html")){if(t){if(S.textContent){const O=g.createTextNode(S.textContent);(u=S.parentNode)==null||u.replaceChild(O,S)}else(d=S.parentNode)==null||d.removeChild(S);continue}if(R in PE){const O=PE[R];for(const x of I.getAttributeNames())if(!O.includes(x))I.removeAttribute(x);else if(x==="class"&&!l)I.setAttribute(x,((m=I.getAttribute(x))==null?void 0:m.split(" ").map(L=>o+"_"+L).join(" "))??"");else if(x==="id"&&!l)I.setAttribute(x,o+"_"+(I.getAttribute(x)??""));else if(x==="href"||x==="src"){const L=I.getAttribute(x)??"";x==="href"&&n?I.setAttribute(x,n(L)):x==="src"&&s?I.setAttribute(x,s(L)):a.includes(L.toLowerCase().split(":")[0])||I.removeAttribute(x)}FA(I.style,a,i,r,s),R==="a"&&(I.setAttribute("rel","noopener noreferrer"),I.setAttribute("target","_blank"))}else I.insertAdjacentHTML("afterend",I.innerHTML),E.push(I)}}for(const I of E)try{try{(f=I.parentNode)==null||f.removeChild(I)}catch{I.outerHTML=""}}catch{try{I.remove()}catch{}}if(g.querySelectorAll("body style").forEach(I=>{const R=I,O=R.sheet,x=[];if(!O.cssRules){R.textContent="";return}for(let L=0;L<O.cssRules.length;L++){const F=O.cssRules[L];if("selectorText"in F)BE(F,o,a,i,r,s),x.push(F);else if("cssRules"in F&&"media"in F){const D=F,V=[];for(let B=0;B<D.cssRules.length;B++){const P=D.cssRules[B];P.type===P.STYLE_RULE&&(BE(P,o,a,i,r,s),V.push(P))}for(;D.cssRules.length>0;)D.deleteRule(0);for(const B of V)D.insertRule(B.cssText,D.cssRules.length);x.push(D)}}R.textContent=x.map(L=>L.cssText).join(`
`)}),l)return g.body.innerHTML;{const I=g.createElement("div");return I.id=o,I.innerHTML=g.body.innerHTML,I.outerHTML}}function zAe(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function jAe(e,t,n){let s=e??"";return(s==null?void 0:s.length)===0&&t&&(s=zAe(t).split(`
`).map(o=>"<p>"+o+"</p>").join(`
`)),WAe(s,n??{})}const KAe=["innerHTML"],YAe=["title"],Ef=yo({__name:"Letter",props:{className:{},html:{},text:{},useIframe:{type:Boolean},iframeTitle:{},rewriteExternalLinks:{},rewriteExternalResources:{},allowedCssProperties:{},allowedSchemas:{},preserveCssPriority:{type:Boolean}},setup(e){const t=e,{className:n,html:s,text:o,useIframe:a,iframeTitle:i,rewriteExternalLinks:r,rewriteExternalResources:l,allowedSchemas:c,allowedCssProperties:u,preserveCssPriority:d}=ls(t),m=jAe(s,o,{rewriteExternalResources:l,rewriteExternalLinks:r,allowedSchemas:c,preserveCssPriority:d,allowedCssProperties:u}),f="data:text/html;charset=utf-8,"+encodeURIComponent(m);return(g,T)=>N(a)?N(a)?(p(),v("div",{key:1,class:se([N(n)])},[h("iframe",{src:f,title:N(i)},null,8,YAe)],2)):w("",!0):(p(),v("div",{key:0,class:se([N(n)]),innerHTML:N(m)},null,10,KAe))}}),XAe={components:{Letter:Ef,GalleryView:hl},props:{message:{type:String,default:""},isEmail:{type:Boolean,default:!0},displayQuotedButton:{type:Boolean,default:!1}},data(){return{showQuotedContent:!1,showGalleryViewer:!1,attachment:{},availableAttachments:[]}},computed:{isQuotedContentPresent(){return this.isEmail?this.showQuotedContent:this.message.includes("<blockquote")},showQuoteToggle(){return this.isEmail?this.displayQuotedButton:!1}},methods:{toggleQuotedContent(){this.showQuotedContent=!this.showQuotedContent},handleClickOnContent(e){const t=e.target.tagName==="IMG",n=e.target.closest("A");t&&!n&&this.openImagePreview(e.target.src)},openImagePreview(e){this.showGalleryViewer=!0,this.attachment={file_type:"image",data_url:e,message_id:Math.floor(Math.random()*100)},this.availableAttachments=[{...this.attachment}]},onClose(){this.showGalleryViewer=!1,this.resetAttachmentData()},resetAttachmentData(){this.attachment={},this.availableAttachments=[]}}},qAe={key:0,class:"text-content"},ZAe={key:0,class:"flex items-center gap-0.5"},QAe={key:1,class:"flex items-center gap-0.5"};function JAe(e,t,n,s,o,a){const i=M("Letter"),r=M("fluent-icon"),l=M("GalleryView"),c=qe("dompurify-html");return p(),v("div",{class:se(["message-text__wrap",{"show--quoted":a.isQuotedContentPresent,"hide--quoted":!a.isQuotedContentPresent}])},[n.isEmail?(p(),v("div",{key:1,onClick:t[0]||(t[0]=(...u)=>a.handleClickOnContent&&a.handleClickOnContent(...u))},[y(i,{class:"text-content bg-white dark:bg-white text-slate-900 dark:text-slate-900 p-2 rounded-[4px]",html:n.message},null,8,["html"])])):re((p(),v("div",qAe,null,512)),[[c,n.message]]),a.showQuoteToggle?(p(),v("button",{key:2,class:"py-1 text-xs cursor-pointer text-slate-300 dark:text-slate-300",onClick:t[1]||(t[1]=(...u)=>a.toggleQuotedContent&&a.toggleQuotedContent(...u))},[o.showQuotedContent?(p(),v("span",ZAe,[y(r,{icon:"chevron-up",size:"16"}),Re(" "+A(e.$t("CHAT_LIST.HIDE_QUOTED_TEXT")),1)])):(p(),v("span",QAe,[y(r,{icon:"chevron-down",size:"16"}),Re(" "+A(e.$t("CHAT_LIST.SHOW_QUOTED_TEXT")),1)]))])):w("",!0),o.showGalleryViewer?(p(),$(l,{key:3,show:o.showGalleryViewer,"onUpdate:show":t[2]||(t[2]=u=>o.showGalleryViewer=u),attachment:o.attachment,"all-attachments":o.availableAttachments,onError:a.onClose,onClose:a.onClose},null,8,["show","attachment","all-attachments","onError","onClose"])):w("",!0)],2)}const eIe=Ae(XAe,[["render",JAe]]),tIe={components:{AddCannedModal:Sy,MenuItem:rA,ContextMenu:i_,NextButton:oe},props:{message:{type:Object,required:!0},isOpen:{type:Boolean,default:!1},enabledOptions:{type:Object,default:()=>({})},contextMenuPosition:{type:Object,default:()=>({})},hideButton:{type:Boolean,default:!1}},emits:["open","close","replyTo"],setup(){const{getPlainText:e}=ya();return{getPlainText:e}},data(){return{isCannedResponseModalOpen:!1,showDeleteModal:!1}},computed:{...lt({getAccount:"accounts/getAccount",currentAccountId:"getCurrentAccountId"}),plainTextContent(){return this.getPlainText(this.messageContent)},conversationId(){return this.message.conversation_id??this.message.conversationId},messageId(){return this.message.id},messageContent(){return this.message.content},contentAttributes(){return As(this.message.content_attributes??this.message.contentAttributes)}},methods:{async copyLinkToMessage(){const e=window.chatwootConfig.hostURL+At(Ff({id:this.conversationId,accountId:this.currentAccountId}));await Go(`${e}?messageId=${this.messageId}`),ce(this.$t("CONVERSATION.CONTEXT_MENU.LINK_COPIED")),this.handleClose()},async handleCopy(){await Go(this.plainTextContent),ce(this.$t("CONTACT_PANEL.COPY_SUCCESSFUL")),this.handleClose()},showCannedResponseModal(){Pt(ar.ADDED_TO_CANNED_RESPONSE),this.isCannedResponseModalOpen=!0},hideCannedResponseModal(){this.isCannedResponseModalOpen=!1,this.handleClose()},handleOpen(e){this.$emit("open",e)},handleClose(e){this.$emit("close",e)},handleTranslate(){const{locale:e}=this.getAccount(this.currentAccountId);this.$store.dispatch("translateMessage",{conversationId:this.conversationId,messageId:this.messageId,targetLanguage:e||"en"}),Pt(ua.TRANSLATE_A_MESSAGE),this.handleClose()},handleReplyTo(){this.$emit("replyTo",this.message),this.handleClose()},openDeleteModal(){this.handleClose(),this.showDeleteModal=!0},async confirmDeletion(){try{await this.$store.dispatch("deleteMessage",{conversationId:this.conversationId,messageId:this.messageId}),ce(this.$t("CONVERSATION.SUCCESS_DELETE_MESSAGE")),this.handleClose()}catch{ce(this.$t("CONVERSATION.FAIL_DELETE_MESSSAGE"))}},closeDeleteModal(){this.showDeleteModal=!1}}},nIe={class:"context-menu"},sIe={class:"menu-container"},aIe={key:5};function oIe(e,t,n,s,o,a){const i=M("AddCannedModal"),r=M("woot-modal"),l=M("woot-delete-modal"),c=M("NextButton"),u=M("MenuItem"),d=M("ContextMenu");return p(),v("div",nIe,[o.isCannedResponseModalOpen&&n.enabledOptions.cannedResponse?(p(),$(r,{key:0,show:o.isCannedResponseModalOpen,"onUpdate:show":t[0]||(t[0]=m=>o.isCannedResponseModalOpen=m),"on-close":a.hideCannedResponseModal},{default:K(()=>[y(i,{"response-content":a.plainTextContent,"on-close":a.hideCannedResponseModal},null,8,["response-content","on-close"])]),_:1},8,["show","on-close"])):w("",!0),o.showDeleteModal&&n.enabledOptions.delete?(p(),$(l,{key:1,show:o.showDeleteModal,"onUpdate:show":t[1]||(t[1]=m=>o.showDeleteModal=m),class:"context-menu--delete-modal","on-close":a.closeDeleteModal,"on-confirm":a.confirmDeletion,title:e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.TITLE"),message:e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.MESSAGE"),"confirm-text":e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.DELETE"),"reject-text":e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.CANCEL")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])):w("",!0),n.hideButton?w("",!0):(p(),$(c,{key:2,ghost:"",slate:"",sm:"",icon:"i-lucide-ellipsis-vertical",class:"invisible group-hover/context-menu:visible",onClick:a.handleOpen},null,8,["onClick"])),n.isOpen&&!o.isCannedResponseModalOpen?(p(),$(d,{key:3,x:n.contextMenuPosition.x,y:n.contextMenuPosition.y,onClose:a.handleClose},{default:K(()=>[h("div",sIe,[n.enabledOptions.replyTo?(p(),$(u,{key:0,option:{icon:"arrow-reply",label:e.$t("CONVERSATION.CONTEXT_MENU.REPLY_TO")},variant:"icon",onClick:Fe(a.handleReplyTo,["stop"])},null,8,["option","onClick"])):w("",!0),n.enabledOptions.copy?(p(),$(u,{key:1,option:{icon:"clipboard",label:e.$t("CONVERSATION.CONTEXT_MENU.COPY")},variant:"icon",onClick:Fe(a.handleCopy,["stop"])},null,8,["option","onClick"])):w("",!0),n.enabledOptions.translate?(p(),$(u,{key:2,option:{icon:"translate",label:e.$t("CONVERSATION.CONTEXT_MENU.TRANSLATE")},variant:"icon",onClick:Fe(a.handleTranslate,["stop"])},null,8,["option","onClick"])):w("",!0),t[2]||(t[2]=h("hr",null,null,-1)),n.enabledOptions.copyLink?(p(),$(u,{key:3,option:{icon:"link",label:e.$t("CONVERSATION.CONTEXT_MENU.COPY_PERMALINK")},variant:"icon",onClick:Fe(a.copyLinkToMessage,["stop"])},null,8,["option","onClick"])):w("",!0),n.enabledOptions.cannedResponse?(p(),$(u,{key:4,option:{icon:"comment-add",label:e.$t("CONVERSATION.CONTEXT_MENU.CREATE_A_CANNED_RESPONSE")},variant:"icon",onClick:Fe(a.showCannedResponseModal,["stop"])},null,8,["option","onClick"])):w("",!0),n.enabledOptions.delete?(p(),v("hr",aIe)):w("",!0),n.enabledOptions.delete?(p(),$(u,{key:6,option:{icon:"delete",label:e.$t("CONVERSATION.CONTEXT_MENU.DELETE")},variant:"icon",onClick:Fe(a.openDeleteModal,["stop"])},null,8,["option","onClick"])):w("",!0)])]),_:1},8,["x","y","onClose"])):w("",!0)])}const UA=Ae(tIe,[["render",oIe],["__scopeId","data-v-e3b8bbc4"]]),iIe={components:{},props:{url:{type:String,required:!0}},emits:["error"],data(){return{show:!1}},methods:{onClose(){this.show=!1},onClick(){this.show=!0}}},rIe={class:"image message-text__wrap"},lIe=["src"],cIe=["src"];function uIe(e,t,n,s,o,a){const i=M("woot-modal");return p(),v("div",rIe,[h("img",{src:n.url,onClick:t[0]||(t[0]=(...r)=>a.onClick&&a.onClick(...r)),onError:t[1]||(t[1]=r=>e.$emit("error"))},null,40,lIe),y(i,{show:o.show,"onUpdate:show":t[2]||(t[2]=r=>o.show=r),"full-width":"","on-close":a.onClose},{default:K(()=>[h("img",{src:n.url,class:"modal-image skip-context-menu"},null,8,cIe)]),_:1},8,["show","on-close"])])}const dIe=Ae(iIe,[["render",uIe]]),pIe={props:{url:{type:String,required:!0}},emits:["error"],data(){return{show:!1}},mounted(){this.$refs.videoElement.onerror=()=>{this.$emit("error")}},methods:{onClose(){this.show=!1},onClick(){this.show=!0}}},hIe={class:"video message-text__wrap"},mIe=["src"],fIe=["src"];function gIe(e,t,n,s,o,a){const i=M("woot-modal");return p(),v("div",hIe,[h("video",{ref:"videoElement",src:n.url,muted:"",playsInline:"",onClick:t[0]||(t[0]=(...r)=>a.onClick&&a.onClick(...r))},null,8,mIe),y(i,{show:o.show,"onUpdate:show":t[1]||(t[1]=r=>o.show=r),"on-close":a.onClose},{default:K(()=>[h("video",{src:n.url,controls:"",playsInline:"",class:"modal-video skip-context-menu mx-auto"},null,8,fIe)]),_:1},8,["show","on-close"])])}const _Ie=Ae(pIe,[["render",gIe]]),vIe={},bIe={class:"flex items-center justify-center px-8 h-28 w-full bg-slate-100 text-slate-700 dark:bg-slate-500 dark:text-slate-75"},EIe={class:"mb-0 text-slate-700 dark:text-slate-75"};function TIe(e,t,n,s,o,a){const i=M("fluent-icon");return p(),v("div",bIe,[y(i,{icon:"document-error",size:"32"}),h("p",EIe,A(e.$t("COMPONENTS.FILE_BUBBLE.INSTAGRAM_STORY_UNAVAILABLE")),1)])}const yIe=Ae(vIe,[["render",TIe]]),SIe={components:{BubbleImage:dIe,BubbleVideo:_Ie,InstagramStoryErrorPlaceHolder:yIe},props:{storyUrl:{type:String,default:""}},emits:["error"],data(){return{hasImgStoryError:!1,hasVideoStoryError:!1}},methods:{onImageLoadError(){this.hasImgStoryError=!0,this.emitError()},onVideoLoadError(){this.hasVideoStoryError=!0,this.emitError()},emitError(){this.$emit("error")}}};function AIe(e,t,n,s,o,a){const i=M("BubbleImage"),r=M("BubbleVideo"),l=M("InstagramStoryErrorPlaceHolder");return o.hasImgStoryError?o.hasVideoStoryError?(p(),$(l,{key:2})):(p(),$(r,{key:1,url:n.storyUrl,onError:a.onVideoLoadError},null,8,["url","onError"])):(p(),$(i,{key:0,url:n.storyUrl,onError:a.onImageLoadError},null,8,["url","onError"]))}const GA=Ae(SIe,[["render",AIe]]),IIe={components:{InstagramStory:GA},props:{storyUrl:{type:String,default:""}},data(){return{hasImgStoryError:!1,hasVideoStoryError:!1}},methods:{onImageLoadError(){this.hasImgStoryError=!0},onVideoLoadError(){this.hasVideoStoryError=!0}}},CIe={class:"my-0 px-2 pb-0 pt-0 border-l-4 border-solid border-slate-75 dark:border-slate-600 text-slate-600 dark:text-slate-200"};function OIe(e,t,n,s,o,a){const i=M("InstagramStory");return p(),v("blockquote",CIe,[h("span",null,A(e.$t("CONVERSATION.REPLIED_TO_STORY")),1),y(i,{"story-url":n.storyUrl,class:"mt-3 rounded-md"},null,8,["story-url"])])}const NIe=Ae(IIe,[["render",OIe]]),wIe={INCOMING_EMAIL:"incoming_email"},RIe=e=>{const{submitted_values:t=[]}=e,[n]=t;return n&&n.title?`<strong>${n.title}</strong>`:""},xIe=e=>{const{submitted_email:t=""}=e;return t?`<strong>${t}</strong>`:""},$Ie=(e,{noResponseText:t})=>{const{items:n,submitted_values:s=[]}=e;if(s.length){const o=s.reduce((i,r)=>(i[r.name]=r.value,i),{});let a="";return n.forEach(i=>{a+=`<div>${i.label}</div>`;const r=o[i.name]||t;a+=`<strong>${r}</strong><br/><br/>`}),a}return""},MIe=(e,{ratingTitle:t,feedbackTitle:n})=>{const{submitted_values:{csat_survey_response:s={}}={}}=e,{rating:o,feedback_message:a}=s||{};let i="";if(o){const[r={}]=fi.filter(l=>l.value===o);i+=`<div><strong>${t}</strong></div>`,i+=`<p>${r.emoji}</p>`}return a&&(i+=`<div><strong>${n}</strong></div>`,i+=`<p>${a}</p>`),i},LIe=(e,t,{noResponseText:n="No response",csat:{ratingTitle:s="Rating",feedbackTitle:o="Feedback"}={}}={})=>{const i={input_select:RIe,input_email:xIe,form:$Ie,input_csat:MIe}[e];return i&&typeof i=="function"?i(t,{noResponseText:n,ratingTitle:s,feedbackTitle:o}):""},kIe={components:{BubbleActions:SSe,BubbleContact:RSe,BubbleFile:BSe,BubbleImageAudioVideo:cAe,BubbleIntegration:_Ae,BubbleLocation:SAe,BubbleMailHead:DAe,BubbleReplyTo:FAe,BubbleText:eIe,ContextMenu:UA,InstagramStory:GA,InstagramStoryReply:NIe,Spinner:bs,NextButton:oe},props:{data:{type:Object,required:!0},isATweet:{type:Boolean,default:!1},isAFacebookInbox:{type:Boolean,default:!1},isInstagram:{type:Boolean,default:!1},isAWhatsAppChannel:{type:Boolean,default:!1},isAnEmailInbox:{type:Boolean,default:!1},inboxSupportsReplyTo:{type:Object,default:()=>({})},inReplyTo:{type:Object,default:()=>({})}},setup(){const{formatMessage:e}=ya();return{formatMessage:e}},data(){return{showContextMenu:!1,hasMediaLoadError:!1,contextMenuPosition:{},showBackgroundHighlight:!1}},computed:{attachments(){var e;return(e=this.data)==null?void 0:e.attachments.map(t=>({...t,sender:this.data.sender||{},created_at:this.data.created_at||""}))},hasOneDayPassed(){var e;return gC(new Date,(e=this.data)==null?void 0:e.created_at)>=1},shouldRenderMessage(){return this.hasAttachments||this.data.content||this.isEmailContentType||this.isUnsupported||this.isAnIntegrationMessage},emailMessageContent(){const{html_content:{full:e}={},text_content:{full:t}={}}=this.contentAttributes.email||{};return e||(t?t.replace(/\n/g,"<br>"):"")},displayQuotedButton(){return this.emailMessageContent.includes("<blockquote")?!0:(this.isIncoming,!1)},message(){if(this.emailMessageContent&&this.isIncoming)return this.emailMessageContent;const e=LIe(this.contentType,this.contentAttributes,{noResponseText:this.$t("CONVERSATION.NO_RESPONSE"),csat:{ratingTitle:this.$t("CONVERSATION.RATING_TITLE"),feedbackTitle:this.$t("CONVERSATION.FEEDBACK_TITLE")}});return this.contentType==="input_csat"?this.$t("CONVERSATION.CSAT_REPLY_MESSAGE")+e:this.formatMessage(this.data.content,this.isATweet,this.data.private)+e},inReplyToMessageId(){var e;return(e=this.data.content_attributes)==null?void 0:e.in_reply_to},isAnInstagramStory(){return this.contentAttributes.image_type==="story_mention"},contextMenuEnabledOptions(){return{copy:this.hasText,delete:(this.hasText||this.hasAttachments)&&!this.isMessageDeleted&&!this.isFailed,cannedResponse:this.isOutgoing&&this.hasText&&!this.isMessageDeleted,copyLink:!this.isFailed||!this.isProcessing,translate:(!this.isFailed||!this.isProcessing)&&!this.isMessageDeleted&&this.hasText,replyTo:!this.data.private&&this.inboxSupportsReplyTo.outgoing}},contentAttributes(){return this.data.content_attributes||{}},externalError(){return this.contentAttributes.external_error||""},sender(){return this.data.sender||{}},status(){return this.data.status},storySender(){return this.contentAttributes.story_sender||null},storyId(){return this.contentAttributes.story_id||null},storyUrl(){return this.contentAttributes.story_url||null},contentType(){const{data:{content_type:e}}=this;return e},twitterProfileLink(){const e=this.sender.additional_attributes||{},{screen_name:t}=e;return`https://twitter.com/${t}`},alignBubble(){const{message_type:e}=this.data,t=e===fa.ACTIVITY,n=e===fa.INCOMING,s=e===fa.OUTGOING||e===fa.TEMPLATE;return{center:t,left:n,right:s,"has-context-menu":this.showContextMenu,"has-tweet-menu":this.isATweet,"has-bg":this.showBackgroundHighlight}},createdAt(){return this.contentAttributes.external_created_at||this.data.created_at},isBubble(){return[0,1,3].includes(this.data.message_type)},isIncoming(){return this.data.message_type===fa.INCOMING},isOutgoing(){return this.data.message_type===fa.OUTGOING},isTemplate(){return this.data.message_type===fa.TEMPLATE},isAnIntegrationMessage(){return this.contentType==="integrations"},emailHeadAttributes(){return{email:this.contentAttributes.email,cc:this.contentAttributes.cc_emails,bcc:this.contentAttributes.bcc_emails}},hasAttachments(){return!!(this.data.attachments&&this.data.attachments.length>0)},isMessageDeleted(){return this.contentAttributes.deleted},hasText(){return!!this.data.content},tooltipForSender(){const e=this.senderNameForAvatar,{message_type:t}=this.data;return t===fa.OUTGOING||t===fa.TEMPLATE?{content:`${this.$t("CONVERSATION.SENT_BY")} ${e}`}:!1},errorMessageTooltip(){return this.isFailed?this.externalError||this.$t("CONVERSATION.SEND_FAILED"):""},wrapClass(){return{wrap:this.isBubble,"activity-wrap":!this.isBubble,"is-pending":this.isPending,"is-failed":this.isFailed,"is-email":this.isEmailContentType}},bubbleClass(){return{bubble:this.isBubble,"is-private":this.data.private,"is-unsupported":this.isUnsupported,"is-image":this.hasMediaAttachment("image"),"is-video":this.hasMediaAttachment("video"),"is-text":this.hasText,"is-from-bot":this.isSentByBot,"is-failed":this.isFailed,"is-email":this.isEmailContentType}},isUnsupported(){return this.contentAttributes.is_unsupported??!1},isPending(){return this.data.status===Vl.PROGRESS},isFailed(){return this.data.status===Vl.FAILED},isSentByBot(){return this.isPending||this.isFailed?!1:!this.sender.type||this.sender.type==="agent_bot"},shouldShowContextMenu(){return!this.isUnsupported},showAvatar(){return this.isOutgoing||this.isTemplate?!0:this.isATweet&&this.isIncoming&&this.sender},senderNameForAvatar(){if(this.isOutgoing||this.isTemplate){const{name:e=this.$t("CONVERSATION.BOT")}=this.sender||{};return e}return""},isEmailContentType(){return this.contentType===wIe.INCOMING_EMAIL}},watch:{data(){this.hasMediaLoadError=!1}},mounted(){this.hasMediaLoadError=!1,wt.on(jt.ON_MESSAGE_LIST_SCROLL,this.closeContextMenu),this.setupHighlightTimer()},unmounted(){wt.off(jt.ON_MESSAGE_LIST_SCROLL,this.closeContextMenu),clearTimeout(this.higlightTimeout)},methods:{isAttachmentImageVideoAudio(e){return["image","audio","video","story_mention","ig_reel"].includes(e)},hasMediaAttachment(e){return this.hasAttachments&&this.data.attachments.length>0?this.compareMessageFileType(this.data,e):!1},compareMessageFileType(e,t){try{const{attachments:n=[{}]}=e,{file_type:s}=n[0];return s===t&&!this.hasMediaLoadError}catch(n){return xf("attachment-parsing-error",{messageData:e,type:t,hasMediaLoadError:this.hasMediaLoadError}),el(n),!1}},handleContextMenuClick(){this.showContextMenu=!this.showContextMenu},async retrySendMessage(){await this.$store.dispatch("sendMessageWithData",this.data)},onMediaLoadError(){this.hasMediaLoadError=!0},openContextMenu(e){var n,s;(n=e.target)!=null&&n.classList.contains("skip-context-menu")||((s=e.target)==null?void 0:s.tagName.toLowerCase())==="a"||getSelection().toString()||(e.preventDefault(),e.type==="contextmenu"&&Pt(ar.OPEN_MESSAGE_CONTEXT_MENU),this.contextMenuPosition={x:e.pageX||e.clientX,y:e.pageY||e.clientY},this.showContextMenu=!0)},closeContextMenu(){this.showContextMenu=!1,this.contextMenuPosition={x:null,y:null}},handleReplyTo(){const e=Na.MESSAGE_REPLY_TO,{conversation_id:t,id:n}=this.data;va.updateJsonStore(e,t,n),wt.emit(jt.TOGGLE_REPLY_TO_MESSAGE,this.data)},setupHighlightTimer(){if(Number(this.$route.query.messageId)!==Number(this.data.id))return;this.showBackgroundHighlight=!0;const e=1e3;this.higlightTimeout=setTimeout(()=>{this.showBackgroundHighlight=!1},e)}}},DIe=["id"],PIe={key:0,class:"message-failed--alert"},BIe={key:2},FIe={key:4,class:"chat-bubble has-attachment agent"},UIe={key:5},GIe={key:2,class:"sender--info"},VIe=["href"],HIe={key:0,class:"context-menu-wrap"};function WIe(e,t,n,s,o,a){const i=M("NextButton"),r=M("BubbleMailHead"),l=M("InstagramStoryReply"),c=M("BubbleReplyTo"),u=M("BubbleText"),d=M("BubbleIntegration"),m=M("InstagramStory"),f=M("BubbleImageAudioVideo"),g=M("BubbleLocation"),T=M("BubbleContact"),S=M("BubbleFile"),_=M("BubbleActions"),E=M("Spinner"),b=M("woot-thumbnail"),I=M("ContextMenu"),R=qe("tooltip");return a.shouldRenderMessage?(p(),v("li",{key:0,id:`message${n.data.id}`,class:se(["group/context-menu",[a.alignBubble]])},[h("div",{class:se(a.wrapClass)},[a.isFailed&&!a.hasOneDayPassed&&!n.isAnEmailInbox?(p(),v("div",PIe,[re(y(i,{ghost:"",xs:"",ruby:"",icon:"i-lucide-refresh-ccw",onClick:a.retrySendMessage},null,8,["onClick"]),[[R,e.$t("CONVERSATION.TRY_AGAIN"),void 0,{"top-end":!0}]])])):w("",!0),h("div",{class:se(a.bubbleClass),onContextmenu:t[0]||(t[0]=O=>a.openContextMenu(O))},[y(r,{"email-attributes":a.contentAttributes.email,cc:a.emailHeadAttributes.cc,bcc:a.emailHeadAttributes.bcc,"is-incoming":a.isIncoming},null,8,["email-attributes","cc","bcc","is-incoming"]),a.storyUrl?(p(),$(l,{key:0,"story-url":a.storyUrl},null,8,["story-url"])):w("",!0),a.inReplyToMessageId&&n.inboxSupportsReplyTo.incoming?(p(),$(c,{key:1,message:n.inReplyTo,"message-type":n.data.message_type,"parent-has-attachments":a.hasAttachments},null,8,["message","message-type","parent-has-attachments"])):w("",!0),a.isUnsupported?(p(),v("div",BIe,[n.isAFacebookInbox&&n.isInstagram?(p(),v(pe,{key:0},[Re(A(e.$t("CONVERSATION.UNSUPPORTED_MESSAGE_INSTAGRAM")),1)],64)):n.isAFacebookInbox?(p(),v(pe,{key:1},[Re(A(e.$t("CONVERSATION.UNSUPPORTED_MESSAGE_FACEBOOK")),1)],64)):(p(),v(pe,{key:2},[Re(A(e.$t("CONVERSATION.UNSUPPORTED_MESSAGE")),1)],64))])):n.data.content?(p(),$(u,{key:3,message:a.message,"is-email":a.isEmailContentType,"display-quoted-button":a.displayQuotedButton},null,8,["message","is-email","display-quoted-button"])):w("",!0),y(d,{"message-id":n.data.id,"content-attributes":a.contentAttributes,"inbox-id":n.data.inbox_id},null,8,["message-id","content-attributes","inbox-id"]),a.isPending&&a.hasAttachments?(p(),v("span",FIe,A(e.$t("CONVERSATION.UPLOADING_ATTACHMENTS")),1)):w("",!0),!a.isPending&&a.hasAttachments?(p(),v("div",UIe,[(p(!0),v(pe,null,Ne(a.attachments,O=>(p(),v("div",{key:O.id},[a.isAnInstagramStory?(p(),$(m,{key:0,"story-url":O.data_url,onError:a.onMediaLoadError},null,8,["story-url","onError"])):a.isAttachmentImageVideoAudio(O.file_type)?(p(),$(f,{key:1,attachment:O,onError:a.onMediaLoadError},null,8,["attachment","onError"])):O.file_type==="location"?(p(),$(g,{key:2,latitude:O.coordinates_lat,longitude:O.coordinates_long,name:O.fallback_title},null,8,["latitude","longitude","name"])):O.file_type==="contact"?(p(),$(T,{key:3,name:n.data.content,"phone-number":O.fallback_title},null,8,["name","phone-number"])):(p(),$(S,{key:4,url:O.data_url},null,8,["url"]))]))),128))])):w("",!0),y(_,{id:n.data.id,sender:n.data.sender,"story-sender":a.storySender,"external-error":a.errorMessageTooltip,"story-id":`${a.storyId}`,"is-a-tweet":n.isATweet,"is-a-whatsapp-channel":n.isAWhatsAppChannel,"is-email":a.isEmailContentType,"is-private":n.data.private,"message-type":n.data.message_type,"message-status":a.status,"source-id":n.data.source_id,"inbox-id":n.data.inbox_id,"created-at":a.createdAt},null,8,["id","sender","story-sender","external-error","story-id","is-a-tweet","is-a-whatsapp-channel","is-email","is-private","message-type","message-status","source-id","inbox-id","created-at"])],34),a.isPending?(p(),$(E,{key:1,size:"tiny"})):w("",!0),a.showAvatar?re((p(),v("div",GIe,[y(b,{src:a.sender.thumbnail,username:a.senderNameForAvatar,size:"16px"},null,8,["src","username"]),n.isATweet&&a.isIncoming?(p(),v("a",{key:0,class:"sender--available-name",href:a.twitterProfileLink,target:"_blank",rel:"noopener noreferrer nofollow"},A(a.sender.name),9,VIe)):w("",!0)])),[[R,a.tooltipForSender,void 0,{left:!0}]]):w("",!0)],2),a.shouldShowContextMenu?(p(),v("div",HIe,[a.isBubble&&!a.isMessageDeleted?(p(),$(I,{key:0,"context-menu-position":o.contextMenuPosition,"is-open":o.showContextMenu,"enabled-options":a.contextMenuEnabledOptions,message:n.data,onOpen:a.openContextMenu,onClose:a.closeContextMenu,onReplyTo:a.handleReplyTo},null,8,["context-menu-position","is-open","enabled-options","message","onOpen","onClose","onReplyTo"])):w("",!0)])):w("",!0)],10,DIe)):w("",!0)}const zIe=Ae(kIe,[["render",WIe]]),qn={INCOMING:0,OUTGOING:1,ACTIVITY:2,TEMPLATE:3},bn={USER:"user",AGENT:"agent",ACTIVITY:"activity",PRIVATE:"private",BOT:"bot",ERROR:"error",TEMPLATE:"template",EMAIL:"email",UNSUPPORTED:"unsupported"},Rr={USER:"User",AGENT_BOT:"agent_bot",CAPTAIN_ASSISTANT:"captain_assistant"},os={LEFT:"left",RIGHT:"right",CENTER:"center"},fn={SENT:"sent",DELIVERED:"delivered",READ:"read",FAILED:"failed",PROGRESS:"progress"},Qn={IMAGE:"image",AUDIO:"audio",VIDEO:"video",FILE:"file",LOCATION:"location",FALLBACK:"fallback",SHARE:"share",STORY_MENTION:"story_mention",CONTACT:"contact",IG_REEL:"ig_reel"},io={TEXT:"text",INPUT_TEXT:"input_text",INPUT_TEXTAREA:"input_textarea",INPUT_EMAIL:"input_email",INPUT_SELECT:"input_select",CARDS:"cards",FORM:"form",ARTICLE:"article",INCOMING_EMAIL:"incoming_email",INPUT_CSAT:"input_csat",INTEGRATIONS:"integrations",STICKER:"sticker"};Qn.IMAGE,Qn.VIDEO,Qn.AUDIO,Qn.IG_REEL;const VA=Symbol("MessageControl");function ns(){const e=_o(VA,null);if(e===null)throw new Error("Component is missing a parent <Message /> component.");const t=Oe("getSelectedChatAttachments"),n=C(()=>{const s=t.value.filter(o=>[Qn.IMAGE,Qn.VIDEO,Qn.IG_REEL,Qn.AUDIO].includes(o.file_type));return As(s)});return{...e,filteredCurrentChatAttachments:n}}function jIe(e){Pn(VA,e)}const KIe={__name:"MessageStatus",props:{status:{type:String,required:!0,validator:e=>Object.values(fn).includes(e)}},setup(e){const{t}=Me(),n=["i-lucide-clock-1","i-lucide-clock-2","i-lucide-clock-3","i-lucide-clock-4","i-lucide-clock-5","i-lucide-clock-6","i-lucide-clock-7","i-lucide-clock-8","i-lucide-clock-9","i-lucide-clock-10","i-lucide-clock-11","i-lucide-clock-12"],s=X(n[0]);Vx(()=>{const c=(n.indexOf(s.value)+1)%n.length;s.value=n[c]},500,{immediate:e.status===fn.PROGRESS,immediateCallback:!1});const a=C(()=>({[fn.SENT]:"i-lucide-check",[fn.DELIVERED]:"i-lucide-check-check",[fn.READ]:"i-lucide-check-check"})[e.status]),i=C(()=>({[fn.SENT]:"text-n-slate-10",[fn.DELIVERED]:"text-n-slate-10",[fn.READ]:"text-[#7EB6FF]"})[e.status]),r=C(()=>({[fn.SENT]:t("CHAT_LIST.SENT"),[fn.DELIVERED]:t("CHAT_LIST.DELIVERED"),[fn.READ]:t("CHAT_LIST.MESSAGE_READ"),[fn.PROGRESS]:t("CHAT_LIST.SENDING")})[e.status]);return(l,c)=>{const u=qe("tooltip");return e.status===N(fn).PROGRESS?re((p(),$(Rt,{key:0,icon:s.value,class:"text-n-slate-10"},null,8,["icon"])),[[u,r.value,void 0,{"top-start":!0}]]):re((p(),$(Rt,{key:1,icon:a.value,class:se([i.value,"size-[14px]"])},null,8,["icon","class"])),[[u,r.value,void 0,{"top-start":!0}]])}}},YIe={class:"text-xs flex items-center gap-1.5"},XIe={class:"inline"},qIe={class:"inline"},ZIe={__name:"MessageMeta",setup(e){const{isAFacebookInbox:t,isALineChannel:n,isAPIInbox:s,isASmsInbox:o,isATelegramChannel:a,isATwilioChannel:i,isAWebWidgetInbox:r,isAWhatsAppChannel:l,isAnEmailChannel:c,isAnInstagramChannel:u}=c_(),{status:d,isPrivate:m,createdAt:f,sourceId:g,messageType:T,contentAttributes:S}=ns(),_=C(()=>Ac(f.value,"LLL d, h:mm a")),E=C(()=>{var x;return m.value||d.value===fn.FAILED||(x=S.value)!=null&&x.deleted?!1:T.value===qn.OUTGOING||T.value===qn.TEMPLATE}),b=C(()=>E.value?c.value?!!g.value:l.value||i.value||t.value||o.value||a.value||u.value?g.value&&d.value===fn.SENT:!!n.value:!1),I=C(()=>E.value?l.value||i.value||o.value||t.value?g.value&&d.value===fn.DELIVERED:r.value||s.value?d.value===fn.SENT:n.value?d.value===fn.DELIVERED:!1:!1),R=C(()=>E.value?l.value||i.value||t.value||u.value?g.value&&d.value===fn.READ:r.value||s.value?d.value===fn.READ:!1:!1),O=C(()=>R.value?fn.READ:I.value?fn.DELIVERED:b.value?fn.SENT:fn.PROGRESS);return(x,L)=>(p(),v("div",YIe,[h("div",XIe,[h("time",qIe,A(_.value),1)]),N(m)?(p(),$(Rt,{key:0,icon:"i-lucide-lock-keyhole",class:"size-3"})):w("",!0),E.value?(p(),$(KIe,{key:1,status:O.value},null,8,["status"])):w("",!0)]))}},QIe={class:"line-clamp-2 break-all"},eo={__name:"Base",setup(e){const{variant:t,orientation:n,inReplyTo:s,shouldGroupWithNext:o}=ns(),{t:a}=Me(),i={[bn.AGENT]:"bg-n-solid-blue text-n-slate-12",[bn.PRIVATE]:"bg-n-solid-amber text-n-amber-12 [&_.prosemirror-mention-node]:font-semibold",[bn.USER]:"bg-n-slate-4 text-n-slate-12",[bn.ACTIVITY]:"bg-n-alpha-1 text-n-slate-11 text-sm",[bn.BOT]:"bg-n-solid-iris text-n-slate-12",[bn.TEMPLATE]:"bg-n-solid-iris text-n-slate-12",[bn.ERROR]:"bg-n-ruby-4 text-n-ruby-12",[bn.EMAIL]:"w-full",[bn.UNSUPPORTED]:"bg-n-solid-amber/70 border border-dashed border-n-amber-12 text-n-amber-12"},r={[os.LEFT]:"left-bubble rounded-xl ltr:rounded-bl-sm rtl:rounded-br-sm",[os.RIGHT]:"right-bubble rounded-xl ltr:rounded-br-sm rtl:rounded-bl-sm",[os.CENTER]:"rounded-md"},l=C(()=>({[os.LEFT]:"justify-start",[os.RIGHT]:"justify-end",[os.CENTER]:"justify-center"})[n.value]),c=C(()=>{const m=[i[t.value]];return t.value!==bn.ACTIVITY?m.push(r[n.value]):m.push("rounded-lg"),m}),u=()=>{wt.emit(jt.SCROLL_TO_MESSAGE,{messageId:s.value.id})},d=C(()=>{if(!s)return"";const{content:m,attachments:f}=s.value;if(m)return m;if(f!=null&&f.length){const g=f[0],T=g.fileType??g.file_type;return a(`CHAT_LIST.ATTACHMENTS.${T}.CONTENT`)}return a("CONVERSATION.REPLY_MESSAGE_NOT_FOUND")});return(m,f)=>(p(),v("div",{class:se(["text-sm",[c.value,{"max-w-lg":N(t)!==N(bn).EMAIL}]])},[N(s)?(p(),v("div",{key:0,class:"bg-n-alpha-black1 rounded-lg p-2 -mx-1 mb-2 cursor-pointer",onClick:u},[h("span",QIe,A(d.value),1)])):w("",!0),We(m.$slots,"default"),!N(o)&&N(t)!==N(bn).ACTIVITY?(p(),$(ZIe,{key:1,class:se([[l.value,N(t)===N(bn).EMAIL?"px-3 pb-3":"",N(t)===N(bn).PRIVATE?"text-n-amber-12/50":"text-n-slate-11"],"mt-2"])},null,8,["class"])):w("",!0)],2))}},JIe={class:"prose prose-bubble"},HA={__name:"FormattedContent",props:{content:{type:String,required:!0}},setup(e){const t=e,{variant:n}=ns(),s=C(()=>n.value===bn.ACTIVITY?t.content:new wd(t.content).formattedMessage);return(o,a)=>{const i=qe("dompurify-html");return re((p(),v("span",JIe,null,512)),[[i,s.value]])}}},e2e={key:0,class:"flex flex-col items-center justify-center gap-1 text-xs text-center rounded-lg size-full bg-n-alpha-1 text-n-slate-11"},t2e=["src"],n2e={__name:"Image",props:{attachment:{type:Object,required:!0}},setup(e){const t=X(!1),n=X(!1),{filteredCurrentChatAttachments:s}=ns(),o=()=>{t.value=!0};return(a,i)=>(p(),v(pe,null,[h("div",{class:"size-[72px] overflow-hidden contain-content rounded-xl cursor-pointer",onClick:i[0]||(i[0]=r=>n.value=!0)},[t.value?(p(),v("div",e2e,[y(Rt,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),Re(" "+A(a.$t("COMPONENTS.MEDIA.LOADING_FAILED")),1)])):(p(),v("img",{key:1,class:"object-cover w-full h-full skip-context-menu",src:e.attachment.dataUrl,onError:o},null,40,t2e))]),n.value?(p(),$(hl,{key:0,show:n.value,"onUpdate:show":i[1]||(i[1]=r=>n.value=r),attachment:N(As)(e.attachment),"all-attachments":N(s),onError:o,onClose:i[2]||(i[2]=()=>n.value=!1)},null,8,["show","attachment","all-attachments"])):w("",!0)],64))}},s2e=["src"],a2e={class:"absolute w-full h-full inset-0 p-1 flex items-center justify-center"},o2e={class:"size-7 bg-n-slate-1/60 backdrop-blur-sm rounded-full overflow-hidden shadow-[0_5px_15px_rgba(0,0,0,0.4)]"},i2e={__name:"Video",props:{attachment:{type:Object,required:!0}},setup(e){const t=X(!1),{filteredCurrentChatAttachments:n}=ns();return(s,o)=>(p(),v(pe,null,[h("div",{class:"size-[72px] overflow-hidden contain-content rounded-xl cursor-pointer relative group",onClick:o[0]||(o[0]=a=>t.value=!0)},[h("video",{src:e.attachment.dataUrl,class:"w-full h-full object-cover",muted:"",playsInline:""},null,8,s2e),h("div",a2e,[h("div",o2e,[y(Rt,{icon:"i-teenyicons-play-small-solid",class:"size-7 text-n-slate-12/80 backdrop-blur"})])])]),t.value?(p(),$(hl,{key:0,show:t.value,"onUpdate:show":o[1]||(o[1]=a=>t.value=a),attachment:N(As)(e.attachment),"all-attachments":N(n),onError:s.onError,onClose:o[2]||(o[2]=()=>t.value=!1)},null,8,["show","attachment","all-attachments","onError"])):w("",!0)],64))}},r2e=["src"],l2e={class:"flex gap-1 w-full flex-1 items-center justify-start"},c2e={class:"tabular-nums text-xs"},u2e={class:"flex-1 items-center flex px-2"},d2e=["max","value"],p2e={class:"text-xs text-n-slate-11 font-medium"},h2e={key:0,class:"text-n-slate-12 p-3 text-sm bg-n-alpha-1 rounded-lg w-full break-words"},WA=Object.assign({inheritAttrs:!1},{__name:"Audio",props:{attachment:{type:Object,required:!0}},setup(e){const t=C(()=>A0(e.attachment.dataUrl)),n=Is("audioPlayer"),s=X(!1),o=X(!1),a=X(0),i=X(0),r=X(1),l=()=>{var E;i.value=(E=n.value)==null?void 0:E.duration},c=C(()=>`${r.value}x`);dt(()=>{var E;i.value=(E=n.value)==null?void 0:E.duration,n.value.playbackRate=r.value});const u=E=>{if(!E||Number.isNaN(E))return"00:00";const b=Math.floor(E/60),I=Math.floor(E%60);return`${b.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}`},d=()=>{n.value.muted=!n.value.muted,o.value=n.value.muted},m=()=>{var E;a.value=(E=n.value)==null?void 0:E.currentTime},f=E=>{const b=Number(E.target.value);n.value.currentTime=b,a.value=b},g=()=>{s.value?(n.value.pause(),s.value=!1):(n.value.play(),s.value=!0)},T=()=>{s.value=!1,a.value=0,r.value=1,n.value.playbackRate=1},S=()=>{const E=[1,1.5,2],I=(E.indexOf(r.value)+1)%E.length;r.value=E[I],n.value.playbackRate=r.value},_=async()=>{const{fileType:E,dataUrl:b,extension:I}=e.attachment;Mf({url:b,type:E,extension:I})};return(E,b)=>(p(),v(pe,null,[h("audio",{ref_key:"audioPlayer",ref:n,controls:"",class:"hidden",onLoadedmetadata:l,onTimeupdate:m,onEnded:T},[h("source",{src:t.value},null,8,r2e)],544),h("div",fs(E.$attrs,{class:"rounded-xl w-full gap-2 p-1.5 bg-n-alpha-white flex flex-col items-center border border-n-container shadow-[0px_2px_8px_0px_rgba(94,94,94,0.06)]"}),[h("div",l2e,[h("button",{class:"p-0 border-0 size-8",onClick:g},[s.value?(p(),$(Rt,{key:0,class:"size-8",icon:"i-teenyicons-pause-small-solid"})):(p(),$(Rt,{key:1,class:"size-8",icon:"i-teenyicons-play-small-solid"}))]),h("div",c2e,A(u(a.value))+" / "+A(u(i.value)),1),h("div",u2e,[h("input",{type:"range",min:"0",max:i.value,value:a.value,class:"w-full h-1 bg-n-slate-12/40 rounded-lg appearance-none cursor-pointer accent-current",onInput:f},null,40,d2e)]),h("button",{class:"border-0 w-10 h-6 grid place-content-center bg-n-alpha-2 hover:bg-alpha-3 rounded-2xl",onClick:S},[h("span",p2e,A(c.value),1)]),h("button",{class:"p-0 border-0 size-8 grid place-content-center",onClick:d},[o.value?(p(),$(Rt,{key:0,class:"size-4",icon:"i-lucide-volume-off"})):(p(),$(Rt,{key:1,class:"size-4",icon:"i-lucide-volume-2"}))]),h("button",{class:"p-0 border-0 size-8 grid place-content-center",onClick:_},[y(Rt,{class:"size-4",icon:"i-lucide-download"})])]),e.attachment.transcribedText?(p(),v("div",h2e,A(e.attachment.transcribedText),1)):w("",!0)],16)],64))}}),zA={__name:"FileIcon",props:{fileType:{type:String,required:!0}},setup(e){const t=C(()=>({"7z":"i-woot-file-zip",csv:"i-woot-file-csv",doc:"i-woot-file-doc",docx:"i-woot-file-doc",json:"i-woot-file-txt",odt:"i-woot-file-doc",pdf:"i-woot-file-pdf",ppt:"i-woot-file-ppt",pptx:"i-woot-file-ppt",rar:"i-woot-file-zip",rtf:"i-woot-file-doc",tar:"i-woot-file-zip",txt:"i-woot-file-txt",xls:"i-woot-file-xls",xlsx:"i-woot-file-xls",zip:"i-woot-file-zip"})[e.fileType]||"i-teenyicons-text-document-solid");return(n,s)=>(p(),$(Rt,{icon:t.value},null,8,["icon"]))}},m2e={class:"h-9 bg-n-alpha-white gap-2 overflow-hidden items-center flex px-2 rounded-lg border border-n-container"},f2e=["title"],g2e=["href"],_2e={__name:"File",props:{attachment:{type:Object,required:!0}},setup(e){const{t}=Me(),n=C(()=>{var a;return uO(((a=e.attachment)==null?void 0:a.dataUrl)||"")}),s=C(()=>{const{base:a,type:i}=n.value,r=(l,c,u)=>l.length>c?`${l.substring(0,c).trimEnd()}${u?"..":"..."}`:l;return i?`${r(a,12,!0)}.${i}`:r(a,14,!1)}),o=C(()=>({"7z":"dark:text-[#EDEEF0] text-[#2F265F]",csv:"text-amber-12",doc:"dark:text-[#D6E1FF] text-[#1F2D5C]",docx:"dark:text-[#D6E1FF] text-[#1F2D5C]",json:"text-n-slate-12",odt:"dark:text-[#D6E1FF] text-[#1F2D5C]",pdf:"text-n-slate-12",ppt:"dark:text-[#FFE0C2] text-[#582D1D]",pptx:"dark:text-[#FFE0C2] text-[#582D1D]",rar:"dark:text-[#EDEEF0] text-[#2F265F]",rtf:"dark:text-[#D6E1FF] text-[#1F2D5C]",tar:"dark:text-[#EDEEF0] text-[#2F265F]",txt:"text-n-slate-12",xls:"text-n-teal-12",xlsx:"text-n-teal-12",zip:"dark:text-[#EDEEF0] text-[#2F265F]"})[n.value.type]||"text-n-slate-12");return(a,i)=>{const r=qe("tooltip");return p(),v("div",m2e,[y(zA,{class:"flex-shrink-0","file-type":n.value.type},null,8,["file-type"]),h("span",{class:se(["flex-1 min-w-0 text-sm max-w-36",o.value]),title:n.value.name},A(s.value),11,f2e),re((p(),v("a",{class:"flex-shrink-0 size-9 grid place-content-center cursor-pointer text-n-slate-11 hover:text-n-slate-12 transition-colors",href:e.attachment.dataUrl,rel:"noreferrer noopener nofollow",target:"_blank"},[y(Rt,{icon:"i-lucide-download"})],8,g2e)),[[r,N(t)("CONVERSATION.DOWNLOAD")]])])}}},jA=Object.assign({inheritAttrs:!1},{__name:"AttachmentChips",props:{attachments:{type:Array,default:()=>[]}},setup(e){const t=e,n=If(),{orientation:s}=ns(),o=C(()=>{const c=[n.class,"flex","flex-wrap"];return s.value==="right"&&c.push("justify-end"),c}),a=C(()=>Array.isArray(t.attachments)?t.attachments:[]),i=C(()=>{const c=[Qn.IMAGE,Qn.VIDEO];return a.value.filter(d=>c.includes(d.fileType)).sort((d,m)=>c.indexOf(d.fileType)-c.indexOf(m.fileType))}),r=C(()=>a.value.filter(c=>c.fileType===Qn.AUDIO)),l=C(()=>a.value.filter(c=>c.fileType===Qn.FILE));return(c,u)=>(p(),v(pe,null,[i.value.length?(p(),v("div",{key:0,class:se(o.value)},[(p(!0),v(pe,null,Ne(i.value,d=>(p(),v(pe,{key:d.id},[d.fileType===N(Qn).IMAGE?(p(),$(n2e,{key:0,attachment:d},null,8,["attachment"])):d.fileType===N(Qn).VIDEO?(p(),$(i2e,{key:1,attachment:d},null,8,["attachment"])):w("",!0)],64))),128))],2)):w("",!0),r.value.length?(p(),v("div",{key:1,class:se(o.value)},[(p(!0),v(pe,null,Ne(r.value,d=>(p(),v("div",{key:d.id},[y(WA,{class:"bg-n-alpha-3 dark:bg-n-alpha-2 text-n-slate-12",attachment:d},null,8,["attachment"])]))),128))],2)):w("",!0),l.value.length?(p(),v("div",{key:2,class:se(o.value)},[(p(!0),v(pe,null,Ne(l.value,d=>(p(),$(_2e,{key:d.id,attachment:d},null,8,["attachment"]))),128))],2)):w("",!0)],64))}}),KA={__name:"TranslationToggle",props:{showingOriginal:Boolean},emits:["toggle"],setup(e){return(t,n)=>(p(),v("span",null,[h("span",{class:"text-xs text-n-slate-11 cursor-pointer hover:underline select-none",onClick:n[0]||(n[0]=s=>t.$emit("toggle"))},A(e.showingOriginal?t.$t("CONVERSATION.VIEW_TRANSLATED"):t.$t("CONVERSATION.VIEW_ORIGINAL")),1)]))}};function YA(e){const t=C(()=>{if(!e.value)return!1;const{translations:s={}}=e.value;return Object.keys(s||{}).length>0}),n=C(()=>{if(!t.value)return null;const s=e.value.translations;return s[Object.keys(s)[0]]});return{hasTranslations:t,translationContent:n}}const v2e={class:"gap-3 flex flex-col"},b2e={key:0,class:"text-n-slate-11"},E2e={key:0,class:"px-2 py-1 rounded-lg bg-n-alpha-3"},T2e={__name:"Index",setup(e){const{content:t,attachments:n,contentAttributes:s,messageType:o}=ns(),{hasTranslations:a,translationContent:i}=YA(s),r=X(!1),l=C(()=>r.value?t.value:a.value?i.value:t.value),c=C(()=>o.value===qn.TEMPLATE),u=C(()=>{var m;return!t.value&&!((m=n.value)!=null&&m.length)}),d=()=>{r.value=!r.value};return(m,f)=>(p(),$(eo,{class:"px-4 py-3","data-bubble-name":"text"},{default:K(()=>[h("div",v2e,[u.value?(p(),v("span",b2e,A(m.$t("CONVERSATION.NO_CONTENT")),1)):w("",!0),l.value?(p(),$(HA,{key:1,content:l.value},null,8,["content"])):w("",!0),N(a)?(p(),$(KA,{key:2,class:"-mt-3","showing-original":r.value,onToggle:d},null,8,["showing-original"])):w("",!0),y(jA,{attachments:N(n),class:"gap-2"},null,8,["attachments"]),c.value?(p(),v(pe,{key:3},[N(s).submittedEmail?(p(),v("div",E2e,A(N(s).submittedEmail),1)):w("",!0)],64)):w("",!0)])]),_:1}))}},y2e=["title"],S2e={__name:"Activity",setup(e){const{content:t,createdAt:n}=ns(),s=C(()=>Ac(n.value,"LLL d, h:mm a"));return(o,a)=>{const i=qe("dompurify-html"),r=qe("tooltip");return re((p(),$(eo,{class:"px-3 py-1 !rounded-xl flex min-w-0 items-center gap-2","data-bubble-name":"activity"},{default:K(()=>[re(h("span",{title:N(t)},null,8,y2e),[[i,N(t)]])]),_:1})),[[r,s.value,void 0,{top:!0}]])}}},A2e={key:0,class:"flex items-center gap-1 text-center rounded-lg"},I2e={class:"mb-0 text-n-slate-11"},C2e={key:1,class:"relative group rounded-lg overflow-hidden"},O2e=["src","width","height"],N2e={class:"absolute right-2 bottom-2 hidden group-hover:flex gap-2"},w2e={__name:"Image",emits:["error"],setup(e,{emit:t}){const n=t,{t:s}=Me(),{filteredCurrentChatAttachments:o,attachments:a}=ns(),i=C(()=>a.value[0]),r=X(!1),l=X(!1),c=X(!1),u=()=>{r.value=!0,n("error")},d=async()=>{const{fileType:m,dataUrl:f,extension:g}=i.value;try{c.value=!0,await Mf({url:f,type:m,extension:g})}catch{ce(s("GALLERY_VIEW.ERROR_DOWNLOADING"))}finally{c.value=!1}};return(m,f)=>(p(),v(pe,null,[y(eo,{class:"overflow-hidden p-3","data-bubble-name":"image",onClick:f[1]||(f[1]=g=>l.value=!0)},{default:K(()=>[r.value?(p(),v("div",A2e,[y(Rt,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),h("p",I2e,A(m.$t("COMPONENTS.MEDIA.IMAGE_UNAVAILABLE")),1)])):(p(),v("div",C2e,[h("img",{class:"skip-context-menu",src:i.value.dataUrl,width:i.value.width,height:i.value.height,onClick:f[0]||(f[0]=(...g)=>m.onClick&&m.onClick(...g)),onError:u},null,40,O2e),f[4]||(f[4]=h("div",{class:"inset-0 p-2 pointer-events-none absolute bg-gradient-to-tl from-n-slate-12/30 dark:from-n-slate-1/50 via-transparent to-transparent hidden group-hover:flex"},null,-1)),h("div",N2e,[y(oe,{xs:"",solid:"",slate:"",icon:"i-lucide-expand",class:"opacity-60"}),y(oe,{xs:"",solid:"",slate:"",icon:"i-lucide-download",class:"opacity-60","is-loading":c.value,disabled:c.value,onClick:Fe(d,["stop"])},null,8,["is-loading","disabled"])])]))]),_:1}),l.value?(p(),$(hl,{key:0,show:l.value,"onUpdate:show":f[2]||(f[2]=g=>l.value=g),attachment:N(As)(i.value),"all-attachments":N(o),onError:u,onClose:f[3]||(f[3]=()=>l.value=!1)},null,8,["show","attachment","all-attachments"])):w("",!0)],64))}},R2e={class:"grid gap-4 min-w-64"},x2e={class:"grid gap-3"},$2e={class:"space-y-1 overflow-hidden"},M2e={key:0,class:"text-n-slate-12 text-sm truncate"},L2e={key:0,class:"truncate text-sm text-n-slate-12"},k2e={key:1,class:"truncate text-sm text-n-slate-11"},D2e={key:0,class:"mb-2"},P2e=["href"],Tp={__name:"BaseAttachment",props:{icon:{type:[String,Object],required:!0},iconBgColor:{type:String,default:"bg-n-alpha-3"},senderTranslationKey:{type:String,required:!0},content:{type:String,required:!0},title:{type:String,default:""},action:{type:Object,required:!0,validator:e=>e.label&&(e.href||e.onClick)}},setup(e){const{sender:t}=ns(),{t:n}=Me(),s=C(()=>{var o;return((o=t==null?void 0:t.value)==null?void 0:o.name)||""});return(o,a)=>(p(),$(eo,{class:"overflow-hidden p-3","data-bubble-name":"attachment"},{default:K(()=>[h("div",R2e,[h("div",x2e,[h("div",{class:se(["size-8 rounded-lg grid place-content-center",e.iconBgColor])},[We(o.$slots,"icon",{},()=>[y(Rt,{icon:e.icon,class:"text-white size-4"},null,8,["icon"])])],2),h("div",$2e,[s.value?(p(),v("div",M2e,A(N(n)(e.senderTranslationKey,{sender:s.value})),1)):w("",!0),We(o.$slots,"default",{},()=>[e.title?(p(),v("div",L2e,A(e.title),1)):w("",!0),e.content?(p(),v("div",k2e,A(e.content),1)):w("",!0)])])]),e.action?(p(),v("div",D2e,[e.action.href?(p(),v("a",{key:0,href:e.action.href,rel:"noreferrer noopener nofollow",target:"_blank",class:"w-full block bg-n-solid-3 px-4 py-2 rounded-lg text-sm text-center border border-n-container"},A(e.action.label),9,P2e)):(p(),v("button",{key:1,class:"w-full bg-n-solid-3 px-4 py-2 rounded-lg text-sm text-center border border-n-container",onClick:a[0]||(a[0]=(...i)=>e.action.onClick&&e.action.onClick(...i))},A(e.action.label),1))])):w("",!0)])]),_:3}))}},B2e={__name:"File",setup(e){const{attachments:t}=ns(),{t:n}=Me(),s=C(()=>t.value[0].dataUrl),o=C(()=>s.value&&s.value.substring(s.value.lastIndexOf("/")+1)||n("CONVERSATION.UNKNOWN_FILE_TYPE")),a=C(()=>o.value.split(".").pop());return(i,r)=>(p(),$(Tp,{icon:"i-teenyicons-user-circle-solid","icon-bg-color":"bg-n-alpha-3 dark:bg-n-alpha-white","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.FILE",content:decodeURI(o.value),action:{href:s.value,label:i.$t("CONVERSATION.DOWNLOAD")}},{icon:K(()=>[y(zA,{"file-type":a.value,class:"size-4"},null,8,["file-type"])]),_:1},8,["content","action"]))}},F2e={__name:"Audio",setup(e){const{attachments:t}=ns(),n=C(()=>t.value[0]);return(s,o)=>(p(),$(eo,{class:"bg-transparent","data-bubble-name":"audio"},{default:K(()=>[y(WA,{attachment:n.value,class:"p-2 text-n-slate-12 skip-context-menu"},null,8,["attachment"])]),_:1}))}},U2e={class:"relative group rounded-lg overflow-hidden"},G2e={key:0,class:"absolute p-2 flex items-start justify-end right-0 pointer-events-none"},V2e=["src"],UE={__name:"Video",emits:["error"],setup(e,{emit:t}){const n=t,s=X(!1),o=X(!1),{filteredCurrentChatAttachments:a,attachments:i}=ns(),r=()=>{s.value=!0,n("error")},l=C(()=>i.value[0]),c=C(()=>l.value.fileType===Qn.IG_REEL);return(u,d)=>(p(),v(pe,null,[y(eo,{class:"overflow-hidden p-3","data-bubble-name":"video",onClick:d[0]||(d[0]=m=>o.value=!0)},{default:K(()=>[h("div",U2e,[c.value?(p(),v("div",G2e,[y(Rt,{icon:"i-lucide-instagram",class:"text-white shadow-lg"})])):w("",!0),h("video",{controls:"",class:se(["rounded-lg skip-context-menu",{"max-w-48":c.value,"max-w-full":!c.value}]),src:l.value.dataUrl,onError:r},null,42,V2e)])]),_:1}),o.value?(p(),$(hl,{key:0,show:o.value,"onUpdate:show":d[1]||(d[1]=m=>o.value=m),attachment:N(As)(l.value),"all-attachments":N(a),onError:u.onError,onClose:d[2]||(d[2]=()=>o.value=!1)},null,8,["show","attachment","all-attachments","onError"])):w("",!0)],64))}},H2e={key:0,class:"mb-2"},W2e=["src"],z2e=["src"],j2e={key:3,class:"flex items-center gap-1 px-5 py-4 text-center rounded-lg bg-n-alpha-1"},K2e={class:"mb-0 text-n-slate-11"},Y2e={__name:"InstagramStory",emits:["error"],setup(e,{emit:t}){const n=t,{variant:s,content:o,attachments:a}=ns(),i=C(()=>a.value[0]),r=X(!1),l=X(!1),c=C(()=>s.value===bn.ACTIVITY?o.value:new wd(o.value).formattedMessage),u=()=>{r.value=!0,n("error")},d=()=>{l.value=!0,n("error")};return(m,f)=>{const g=qe("dompurify-html");return p(),$(eo,{class:"p-3 overflow-hidden","data-bubble-name":"ig-story"},{default:K(()=>[N(o)?re((p(),v("div",H2e,null,512)),[[g,c.value]]):w("",!0),r.value?l.value?(p(),v("div",j2e,[y(Rt,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),h("p",K2e,A(m.$t("COMPONENTS.FILE_BUBBLE.INSTAGRAM_STORY_UNAVAILABLE")),1)])):(p(),v("video",{key:2,class:"rounded-lg max-w-80 skip-context-menu",controls:"",src:i.value.dataUrl,onError:d},null,40,z2e)):(p(),v("img",{key:1,class:"rounded-lg max-w-80 skip-context-menu",src:i.value.dataUrl,onError:u},null,40,W2e))]),_:1})}}},X2e=["azimuth","background","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-repeat-x","background-repeat-y","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","box-sizing","break-after","break-before","break-inside","caption-side","clear","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","direction","display","elevation","empty-cells","float","font","font-family","font-feature-settings","font-kerning","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","height","image-orientation","image-resolution","ime-mode","isolation","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","letter-spacing","line-break","line-height","list-style","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","mix-blend-mode","object-fit","object-position","opacity","outline","outline-color","outline-style","outline-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","quotes","richness","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","table-layout","text-align","text-align-last","text-autospace","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-style","text-indent","text-justify","text-kashida-space","text-orientation","text-overflow","text-transform","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","unicode-bidi","vertical-align","voice-family","white-space","white-space-collapse","width","word-break","word-spacing","word-wrap","writing-mode","zoom"],GE=X2e,VE=[".gmail_quote_container",".gmail_quote",".OutlookQuote",".email-quote",".quoted-text",".quote",'[class*="quote"]','[class*="Quote"]'],q2e=[/On .* wrote:/i,/-----Original Message-----/i,/Sent: /i,/From: /i];class HE{static extractQuotes(t){const n=document.createElement("div");return n.innerHTML=t,VE.forEach(o=>{n.querySelectorAll(o).forEach(a=>{a.remove()})}),this.findTextNodeQuotes(n).forEach(o=>{o.remove()}),n.innerHTML}static hasQuotes(t){const n=document.createElement("div");n.innerHTML=t;for(const o of VE)if(n.querySelector(o))return!0;return this.findTextNodeQuotes(n).length>0}static findTextNodeQuotes(t){const n=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1);for(let o=s.nextNode();o!==null;o=s.nextNode())if(q2e.some(i=>i.test(o.textContent))){const i=this.findParentBlock(o);i&&!n.includes(i)&&n.push(i)}return n}static findParentBlock(t){const n=["DIV","P","BLOCKQUOTE","SECTION"];let s=t.parentElement;for(;s;){if(n.includes(s.tagName))return s;s=s.parentElement}return null}}const Z2e={key:1},Q2e={key:2},J2e={key:3},eCe={key:4},tCe={__name:"EmailMeta",setup(e){const{contentAttributes:t,status:n,sender:s}=ns(),o=C(()=>n.value===fn.FAILED),a=C(()=>{var m,f;return((f=(m=t.value)==null?void 0:m.email)==null?void 0:f.from)??[]}),i=C(()=>{const{toEmails:m,email:f}=t.value;return(f==null?void 0:f.to)??m??[]}),r=C(()=>{var m,f,g;return((m=t.value)==null?void 0:m.ccEmails)??((g=(f=t.value)==null?void 0:f.email)==null?void 0:g.cc)??[]}),l=C(()=>{const m=a.value[0]??"",f=s.value.email??"";return!m&&!f?null:m===f?s.value.name:null}),c=C(()=>{var m,f,g;return((m=t.value)==null?void 0:m.bccEmails)??((g=(f=t.value)==null?void 0:f.email)==null?void 0:g.bcc)??[]}),u=C(()=>{var m,f;return((f=(m=t.value)==null?void 0:m.email)==null?void 0:f.subject)??""}),d=C(()=>a.value[0]||i.value.length||r.value.length||c.value.length||u.value);return(m,f)=>re((p(),v("section",{class:se(["space-y-1 rtl:pl-9 ltr:pr-9 text-sm break-words",o.value?"text-n-ruby-11":"text-n-slate-11"])},[d.value?(p(),v(pe,{key:0},[a.value[0]?(p(),v("div",{key:0,class:se(o.value?"text-n-ruby-11":"text-n-slate-12")},[l.value?(p(),v(pe,{key:0},[h("span",null,A(l.value),1),Re(" <"+A(a.value[0])+"> ",1)],64)):(p(),v(pe,{key:1},[Re(A(a.value[0]),1)],64))],2)):w("",!0),i.value.length?(p(),v("div",Z2e,A(m.$t("EMAIL_HEADER.TO"))+": "+A(i.value.join(", ")),1)):w("",!0),r.value.length?(p(),v("div",Q2e,A(m.$t("EMAIL_HEADER.CC"))+": "+A(r.value.join(", ")),1)):w("",!0),c.value.length?(p(),v("div",J2e,A(m.$t("EMAIL_HEADER.BCC"))+": "+A(c.value.join(", ")),1)):w("",!0),u.value?(p(),v("div",eCe,A(m.$t("EMAIL_HEADER.SUBJECT"))+": "+A(u.value),1)):w("",!0)],64)):w("",!0)],2)),[[Jt,d.value]])}},nCe={key:0,class:"absolute left-0 right-0 bottom-0 h-40 px-8 flex items-end bg-gradient-to-t from-n-slate-4 via-n-slate-4 via-20% to-transparent"},sCe={key:1,class:"px-4 pb-4 space-y-2"},WE={__name:"Index",setup(e){const{content:t,contentAttributes:n,attachments:s,messageType:o}=ns(),a=X(!1),i=X(!1),r=X(!1),l=X(!1),c=Is("contentContainer");dt(()=>{var x;a.value=((x=c.value)==null?void 0:x.scrollHeight)>400});const u=C(()=>o.value===qn.OUTGOING),d=C(()=>!u.value),{hasTranslations:m,translationContent:f}=YA(n),g=C(()=>{var L,F,D;const x=((D=(F=(L=n==null?void 0:n.value)==null?void 0:L.email)==null?void 0:F.textContent)==null?void 0:D.full)??t.value;return x==null?void 0:x.replace(/\n/g,"<br>")}),T=C(()=>{var x,L,F;return((F=(L=(x=n==null?void 0:n.value)==null?void 0:x.email)==null?void 0:L.htmlContent)==null?void 0:F.full)??g.value}),S=C(()=>m.value&&!l.value?f.value:t.value),_=C(()=>m.value&&!l.value?f.value:g.value),E=C(()=>m.value&&!l.value?f.value:T.value),b=C(()=>HE.extractQuotes(E.value)),I=C(()=>HE.hasQuotes(E.value)),R=C(()=>l.value?"original":m.value?"translated":"original"),O=()=>{l.value=!l.value};return(x,L)=>(p(),$(eo,{class:se(["w-full",{"bg-n-slate-4":d.value,"bg-n-solid-blue":u.value}]),"data-bubble-name":"email"},{default:K(()=>[y(tCe,{class:se(["p-3",{"border-b border-n-strong":d.value,"border-b border-n-slate-8/20":u.value}])},null,8,["class"]),h("section",{ref_key:"contentContainer",ref:c,class:"p-3"},[h("div",{class:se({"max-h-[400px] overflow-hidden relative":!i.value&&a.value,"overflow-y-scroll relative":i.value})},[a.value&&!i.value?(p(),v("div",nCe,[h("button",{class:"text-n-slate-12 py-2 px-8 mx-auto text-center flex items-center gap-2",onClick:L[0]||(L[0]=F=>i.value=!0)},[y(Rt,{icon:"i-lucide-maximize-2"}),Re(" "+A(x.$t("EMAIL_HEADER.EXPAND")),1)])])):w("",!0),u.value&&N(t)?(p(),$(HA,{key:1,class:"text-n-slate-12",content:S.value},null,8,["content"])):(p(),v(pe,{key:2},[r.value?(p(),$(N(Ef),{key:`letter-quoted-${R.value}`,"class-name":"prose prose-bubble !max-w-none letter-render","allowed-css-properties":[...N(GE),"transform","transform-origin"],html:E.value,text:_.value},null,8,["allowed-css-properties","html","text"])):(p(),$(N(Ef),{key:`letter-unquoted-${R.value}`,"class-name":"prose prose-bubble !max-w-none letter-render",html:b.value,"allowed-css-properties":[...N(GE),"transform","transform-origin"],text:_.value},null,8,["html","allowed-css-properties","text"]))],64)),I.value?(p(),v("button",{key:3,class:"text-n-slate-11 px-1 leading-none text-sm bg-n-alpha-black2 text-center flex items-center gap-1 mt-2",onClick:L[1]||(L[1]=F=>r.value=!r.value)},[r.value?(p(),v(pe,{key:0},[Re(A(x.$t("CHAT_LIST.HIDE_QUOTED_TEXT")),1)],64)):(p(),v(pe,{key:1},[Re(A(x.$t("CHAT_LIST.SHOW_QUOTED_TEXT")),1)],64)),y(Rt,{icon:r.value?"i-lucide-chevron-up":"i-lucide-chevron-down"},null,8,["icon"])])):w("",!0)],2)],512),N(m)?(p(),$(KA,{key:0,class:"py-2 px-3","showing-original":l.value,onToggle:O},null,8,["showing-original"])):w("",!0),Array.isArray(N(s))&&N(s).length?(p(),v("section",sCe,[y(jA,{attachments:N(s),class:"gap-1"},null,8,["attachments"])])):w("",!0)]),_:1},8,["class"]))}},aCe={__name:"Unsupported",setup(e){return(t,n)=>(p(),$(eo,{class:"px-4 py-3 text-sm","data-bubble-name":"unsupported"},{default:K(()=>[Re(A(t.$t("CONVERSATION.UNSUPPORTED_MESSAGE")),1)]),_:1}))}},oCe={__name:"Contact",setup(e){const{attachments:t}=ns(),n=pt(),{t:s}=Me(),o=C(()=>t.value[0]),a=C(()=>o.value.fallbackTitle),i=C(()=>{const{meta:g}=o.value??{},{firstName:T,lastName:S}=g??{};return`${T??""} ${S??""}`.trim()}),r=C(()=>a.value.replace(/\s|-|[A-Za-z]/g,"")),l=C(()=>a.value.replace(/\D/g,""));function c(){return{name:i.value,phone_number:`+${l.value}`}}async function u(g){const S={payload:[{attribute_key:"phone_number",filter_operator:"equal_to",values:[g],attribute_model:"standard",custom_attribute_type:""}]};return(await n.dispatch("contacts/filter",{queryPayload:S,resetState:!1})).shift()}function d(g){const S=`/app/accounts/${window.location.pathname.split("/")[3]}/contacts/${g}`;window.open(S,"_blank")}async function m(){try{let g=await u(l);g||(g=await n.dispatch("contacts/create",c()),ce(s("CONTACT_FORM.SUCCESS_MESSAGE"))),d(g.id)}catch(g){g instanceof Oc?g.data.includes("phone_number")&&ce(s("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):g instanceof nl?ce(g.data):ce(s("CONTACT_FORM.ERROR_MESSAGE"))}}const f=C(()=>({label:s("CONVERSATION.SAVE_CONTACT"),onClick:m}));return(g,T)=>(p(),$(Tp,{icon:"i-teenyicons-user-circle-solid","icon-bg-color":"bg-[#D6409F]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.CONTACT",title:i.value,content:a.value,action:r.value?f.value:null},null,8,["title","content","action"]))}},iCe={key:0,class:"text-sm truncate text-n-slate-12"},rCe={key:1,class:"video-call--container"},lCe=["src"],cCe={key:2},uCe={__name:"Dyte",setup(e){const{content:t,sender:n,id:s}=ns(),{t:o}=Me(),a=X(!1),i=X(""),r=C(()=>f0(i.value)),l=async()=>{a.value=!0;try{const{data:{token:d}={}}=await u_.addParticipantToMeeting(s.value);i.value=d}catch{ce(o("INTEGRATION_SETTINGS.DYTE.JOIN_ERROR"))}finally{a.value=!1}},c=()=>{i.value=""},u=C(()=>({label:o("INTEGRATION_SETTINGS.DYTE.CLICK_HERE_TO_JOIN"),onClick:l}));return(d,m)=>(p(),$(Tp,{icon:"i-ph-video-camera-fill","icon-bg-color":"bg-[#2781F6]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.MEETING",action:u.value},{default:K(()=>[N(n)?w("",!0):(p(),v("div",iCe,A(N(t)),1)),i.value?(p(),v("div",rCe,[h("iframe",{src:r.value,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"},null,8,lCe),h("button",{class:"px-4 py-2 text-sm rounded-lg bg-n-solid-3 mt-3",onClick:c},A(d.$t("INTEGRATION_SETTINGS.DYTE.LEAVE_THE_ROOM")),1)])):(p(),v("div",cCe,A("")))]),_:1},8,["action"]))}},dCe={__name:"Location",setup(e){const{attachments:t}=ns(),{t:n}=Me(),s=C(()=>t.value[0]),o=C(()=>s.value.coordinatesLat),a=C(()=>s.value.coordinatesLong),i=C(()=>s.value.fallbackTitle??s.value.fallback_title),r=C(()=>`https://maps.google.com/?q=${o.value},${a.value}`);return(l,c)=>(p(),$(Tp,{icon:"i-ph-navigation-arrow-fill","icon-bg-color":"bg-[#0D9B8A]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.LOCATION",content:i.value,action:{label:N(n)("COMPONENTS.LOCATION_BUBBLE.SEE_ON_MAP"),href:r.value}},null,8,["content","action"]))}},pCe={key:0,class:"mt-4"},hCe={class:"text-n-slate-11 italic"},mCe={key:0},fCe={key:1,class:"flex mt-1"},gCe={key:2,class:"text-n-slate-11 italic mt-2"},_Ce={__name:"CSAT",setup(e){const{contentAttributes:t,content:n}=ns(),{t:s}=Me(),o=C(()=>{var u,d;return((d=(u=t.value)==null?void 0:u.submittedValues)==null?void 0:d.csatSurveyResponse)??{}}),a=C(()=>!!o.value.rating),i=C(()=>{var u;return((u=t.value)==null?void 0:u.displayType)||gi.EMOJI}),r=C(()=>i.value===gi.STAR),l=C(()=>a.value?fi.find(u=>u.value===o.value.rating):null),c=C(()=>o.value.rating||0);return(u,d)=>(p(),$(eo,{class:"px-4 py-3","data-bubble-name":"csat"},{default:K(()=>[h("h4",null,A(N(n)||N(s)("CONVERSATION.CSAT_REPLY_MESSAGE")),1),a.value?(p(),v("dl",pCe,[h("dt",hCe,A(N(s)("CONVERSATION.RATING_TITLE")),1),r.value?(p(),v("dd",fCe,[(p(),v(pe,null,Ne(5,m=>h("span",{key:m,class:"text-2xl mr-1"},[h("i",{class:se([m<=c.value?"i-ri-star-fill text-n-amber-9":"i-ri-star-line text-n-slate-10"])},null,2)])),64))])):(p(),v("dd",mCe,A(N(s)(l.value.translationKey)),1)),o.value.feedbackMessage?(p(),v("dt",gCe,A(N(s)("CONVERSATION.FEEDBACK_TITLE")),1)):w("",!0),h("dd",null,A(o.value.feedbackMessage),1)])):w("",!0)]),_:1}))}},vCe=["title"],bCe={key:0,class:"mt-4"},ECe={class:"text-n-slate-11 italic mt-2"},TCe={key:1,class:"my-2 font-medium"},yCe={__name:"Form",setup(e){const{content:t,contentAttributes:n,contentType:s}=ns(),{t:o}=Me(),{isAWebWidgetInbox:a}=c_(),i=C(()=>{var r;if(s.value===io.FORM){const{items:l,submittedValues:c=[]}=n.value;return c.length?c.map(u=>{const d=l.find(m=>m.name===u.name);return{title:u.value,value:u.value,label:d==null?void 0:d.label}}):[]}if(s.value===io.INPUT_SELECT){const[l]=((r=n.value)==null?void 0:r.submittedValues)??[];return l?[{title:l.title,value:l.value,label:""}]:[]}return[]});return(r,l)=>{const c=qe("dompurify-html");return p(),$(eo,{class:"px-4 py-3","data-bubble-name":"csat"},{default:K(()=>[re(h("span",{title:N(t)},null,8,vCe),[[c,N(t)]]),i.value.length?(p(),v("dl",bCe,[(p(!0),v(pe,null,Ne(i.value,u=>(p(),v(pe,{key:u.title},[h("dt",ECe,A(u.label||N(o)("CONVERSATION.RESPONSE")),1),h("dd",null,A(u.title),1)],64))),128))])):N(a)?(p(),v("div",TCe,A(N(o)("CONVERSATION.NO_RESPONSE")),1)):w("",!0)]),_:1})}}},SCe={class:"text-xs text-n-ruby-11 flex items-center gap-1.5"},ACe={class:"relative group"},ICe={class:"bg-n-alpha-2 rounded-md size-5 grid place-content-center cursor-pointer"},CCe={__name:"MessageError",props:{error:{type:String,required:!0}},setup(e){const{orientation:t}=ns(),{t:n}=Me();return(s,o)=>(p(),v("div",SCe,[h("span",null,A(N(n)("CHAT_LIST.FAILED_TO_SEND")),1),h("div",ACe,[h("div",ICe,[y(Rt,{icon:"i-lucide-alert-triangle",class:"text-n-ruby-11 size-[14px]"})]),h("div",{class:se(["absolute bg-n-alpha-3 px-4 py-3 border rounded-xl border-n-strong text-n-slate-12 bottom-6 w-52 text-xs backdrop-blur-[100px] shadow-[0px_0px_24px_0px_rgba(0,0,0,0.12)] opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all break-all",{"ltr:left-0 rtl:right-0":N(t)===N(os).LEFT,"ltr:right-0 rtl:left-0":N(t)===N(os).RIGHT}])},A(e.error),3)])]))}},OCe=["id","data-message-id"],NCe={key:0},wCe={key:0,class:"[grid-area:avatar] flex items-end"},RCe={key:2,class:"context-menu-wrap"},xCe={__name:"Message",props:{id:{type:Number,required:!0},messageType:{type:Number,required:!0,validator:e=>Object.values(qn).includes(e)},status:{type:String,required:!0,validator:e=>Object.values(fn).includes(e)},attachments:{type:Array,default:()=>[]},content:{type:String,default:null},contentAttributes:{type:Object,default:()=>({})},contentType:{type:String,default:"text",validator:e=>Object.values(io).includes(e)},conversationId:{type:Number,required:!0},createdAt:{type:Number,required:!0},currentUserId:{type:Number,required:!0},groupWithNext:{type:Boolean,default:!1},inboxId:{type:Number,default:null},inboxSupportsReplyTo:{type:Object,default:()=>({})},inReplyTo:{type:Object,default:null},isEmailInbox:{type:Boolean,default:!1},private:{type:Boolean,default:!1},sender:{type:Object,default:null},senderId:{type:Number,default:null},senderType:{type:String,default:null},sourceId:{type:String,default:""}},setup(e){const t=e,n=X({}),s=X(!1),o=X(!1),{t:a}=Me(),i=sn(),r=C(()=>{var k;return t.private?bn.PRIVATE:t.isEmailInbox&&[qn.INCOMING,qn.OUTGOING].includes(t.messageType)||t.contentType===io.INCOMING_EMAIL?bn.EMAIL:t.status===fn.FAILED?bn.ERROR:(k=t.contentAttributes)!=null&&k.isUnsupported?bn.UNSUPPORTED:(!t.sender||t.sender.type===Rr.AGENT_BOT)&&t.messageType===qn.OUTGOING?bn.BOT:{[qn.INCOMING]:bn.USER,[qn.ACTIVITY]:bn.ACTIVITY,[qn.OUTGOING]:bn.AGENT,[qn.TEMPLATE]:bn.TEMPLATE}[t.messageType]||bn.USER}),l=C(()=>{var k,U;if(t.messageType===qn.ACTIVITY)return!1;if(t.status===fn.PROGRESS&&t.messageType===qn.OUTGOING)return!0;const B=t.senderId??((k=t.sender)==null?void 0:k.id),P=((U=t.sender)==null?void 0:U.type)??t.senderType;return!P||!B||[Rr.AGENT_BOT,Rr.CAPTAIN_ASSISTANT].includes(P)?!0:P.toLowerCase()===Rr.USER.toLowerCase()}),c=C(()=>l.value?os.RIGHT:t.messageType===qn.ACTIVITY?os.CENTER:os.LEFT),u=C(()=>({[os.LEFT]:"justify-start",[os.RIGHT]:"justify-end",[os.CENTER]:"justify-center"})[c.value]),d=C(()=>({[os.LEFT]:"grid grid-cols-1fr",[os.RIGHT]:"grid grid-cols-[1fr_24px]"})[c.value]),m=C(()=>({[os.LEFT]:`
      "bubble"
      "meta"
    `,[os.RIGHT]:`
      "bubble avatar"
      "meta spacer"
    `})[c.value]),f=C(()=>t.status===fn.FAILED?!1:t.groupWithNext),g=C(()=>!(t.messageType===qn.ACTIVITY||c.value===os.LEFT)),T=C(()=>{var B;if(t.isEmailInbox&&!t.private&&[qn.INCOMING,qn.OUTGOING].includes(t.messageType))return WE;if(t.contentType===io.INPUT_CSAT)return _Ce;if([io.INPUT_SELECT,io.FORM].includes(t.contentType))return yCe;if(t.contentType===io.INCOMING_EMAIL)return WE;if((B=t.contentAttributes)!=null&&B.isUnsupported)return aCe;if(t.contentAttributes.type==="dyte")return uCe;if(t.contentAttributes.imageType==="story_mention")return Y2e;if(Array.isArray(t.attachments)&&t.attachments.length===1){const P=t.attachments[0].fileType;if(!t.content){if(P===Qn.IMAGE)return w2e;if(P===Qn.FILE)return B2e;if(P===Qn.AUDIO)return F2e;if(P===Qn.VIDEO||P===Qn.IG_REEL)return UE;if(P===Qn.LOCATION)return dCe}if(P===Qn.CONTACT)return oCe}return T2e}),S=C(()=>{var B;return!((B=t.contentAttributes)!=null&&B.isUnsupported)}),_=C(()=>t.messageType!==qn.ACTIVITY),E=C(()=>{var B;return(B=t.contentAttributes)==null?void 0:B.deleted}),b=C(()=>({id:t.id,content_attributes:t.contentAttributes,content:t.content,conversation_id:t.conversationId})),I=C(()=>{const B=!!t.content,P=!!(t.attachments&&t.attachments.length>0),k=t.messageType===qn.OUTGOING,U=t.status===fn.FAILED||t.status===fn.PROGRESS;return{copy:B,delete:(B||P)&&!U&&!E.value,cannedResponse:k&&B&&!E.value,copyLink:!U,translate:!U&&!E.value&&B,replyTo:!t.private&&t.inboxSupportsReplyTo.outgoing&&!U}}),R=C(()=>{var j;const B=!!(t.attachments&&t.attachments.length>0),P=t.contentType===io.INCOMING_EMAIL,k=(j=t.contentAttributes)==null?void 0:j.isUnsupported,U=t.contentType===io.INTEGRATIONS;return B||t.content||P||k||U});function O(B){var k,U;(k=B.target)!=null&&k.classList.contains("skip-context-menu")||["a","img"].includes((U=B.target)==null?void 0:U.tagName.toLowerCase())||getSelection().toString()||(B.preventDefault(),B.type==="contextmenu"&&Pt(ar.OPEN_MESSAGE_CONTEXT_MENU),n.value={x:B.pageX||B.clientX,y:B.pageY||B.clientY},o.value=!0)}function x(){o.value=!1,n.value={x:null,y:null}}function L(){const B=Na.MESSAGE_REPLY_TO,{conversationId:P,id:k}=t;va.updateJsonStore(B,P,k),wt.emit(jt.TOGGLE_REPLY_TO_MESSAGE,t)}const F=C(()=>{if(!t.sender)return{name:a("CONVERSATION.BOT"),src:""};const{sender:B}=t,{name:P,type:k,avatarUrl:U,thumbnail:j}=B||{};return[Rr.AGENT_BOT,Rr.CAPTAIN_ASSISTANT].includes(k)?{name:P??"",src:U??""}:{name:P??"",src:j??""}}),D=C(()=>F.value.name===""?"":`${a("CONVERSATION.SENT_BY")} ${F.value.name}`);return dt(()=>{if(Number(i.query.messageId)!==Number(t.id))return;s.value=!0,Hx(()=>{s.value=!1},1e3)}),jIe({...Q2(t),isPrivate:C(()=>t.private),variant:r,orientation:c,isBotOrAgentMessage:l,shouldGroupWithNext:f}),(B,P)=>{const k=qe("tooltip");return R.value?(p(),v("div",{key:0,id:`message${t.id}`,class:se(["flex w-full message-bubble-container mb-2",[u.value,{"group-with-next":f.value,"bg-n-alpha-1":s.value}]]),"data-message-id":t.id},[r.value===N(bn).ACTIVITY?(p(),v("div",NCe,[y(S2e,{content:e.content},null,8,["content"])])):(p(),v("div",{key:1,class:se([[d.value,{"gap-y-2":e.contentAttributes.externalError,"w-full":r.value===N(bn).EMAIL}],"gap-x-2"]),style:Ht({gridTemplateAreas:m.value})},[!f.value&&g.value?re((p(),v("div",wCe,[y(ts,fs(F.value,{size:24}),null,16)])),[[k,D.value,void 0,{"left-end":!0}]]):w("",!0),h("div",{class:se(["[grid-area:bubble] flex",{"ltr:ml-8 rtl:mr-8 justify-end":c.value===N(os).RIGHT,"ltr:mr-8 rtl:ml-8":c.value===N(os).LEFT,"min-w-0":r.value===N(bn).EMAIL}]),onContextmenu:P[0]||(P[0]=U=>O(U))},[(p(),$(vs(T.value)))],34),e.contentAttributes.externalError?(p(),$(CCe,{key:1,class:se(["[grid-area:meta]",u.value]),error:e.contentAttributes.externalError},null,8,["class","error"])):w("",!0)],6)),S.value?(p(),v("div",RCe,[_.value?(p(),$(UA,{key:0,"context-menu-position":n.value,"is-open":o.value,"enabled-options":I.value,message:b.value,"hide-button":"",onOpen:O,onClose:x,onReplyTo:L},null,8,["context-menu-position","is-open","enabled-options","message"])):w("",!0)])):w("",!0)],10,OCe)):w("",!0)}}},$Ce={class:"px-4 bg-n-background"},MCe={__name:"MessageList",props:{currentUserId:{type:Number,required:!0},firstUnreadId:{type:Number,default:null},isAnEmailChannel:{type:Boolean,default:!1},inboxSupportsReplyTo:{type:Object,default:()=>({incoming:!1,outgoing:!1})},messages:{type:Array,default:()=>[]}},setup(e){const t=e,n=C(()=>fo(t.messages,{deep:!0})),s=(a,i)=>{var T,S;if(a===i.length-1)return!1;const r=i[a],l=i[a+1];if(l.status==="failed")return!1;const c=l.senderId??((T=l.sender)==null?void 0:T.id),u=r.senderId??((S=r.sender)==null?void 0:S.id),d=c===u,m=l.messageType,f=r.messageType,g=m===qn.TEMPLATE&&f===qn.TEMPLATE;return!d||g||f!==m?!1:Math.floor(l.createdAt/60)===Math.floor(r.createdAt/60)},o=a=>{var l,c,u;if(!a)return null;const i=((l=a.contentAttributes)==null?void 0:l.inReplyTo)??((c=a.content_attributes)==null?void 0:c.in_reply_to);if(!i)return null;const r=(u=t.messages)==null?void 0:u.find(d=>d.id===i);return r?fo(r):null};return(a,i)=>(p(),v("ul",$Ce,[We(a.$slots,"beforeAll"),(p(!0),v(pe,null,Ne(n.value,(r,l)=>(p(),v(pe,{key:r.id},[e.firstUnreadId&&r.id===e.firstUnreadId?We(a.$slots,"unreadBadge",{key:0}):w("",!0),y(xCe,fs({ref_for:!0},r,{"is-email-inbox":e.isAnEmailChannel,"in-reply-to":o(r),"group-with-next":s(l,n.value),"inbox-supports-reply-to":e.inboxSupportsReplyTo,"current-user-id":e.currentUserId,"data-clarity-mask":"True"}),null,16,["is-email-inbox","in-reply-to","group-with-next","inbox-supports-reply-to","current-user-id"])],64))),128)),We(a.$slots,"after")]))}},LCe={name:"LabelSuggestion",components:{Avatar:EO,NextButton:oe},props:{suggestedLabels:{type:Array,required:!0},chatLabels:{type:Array,required:!1,default:()=>[]}},setup(){const{isAIIntegrationEnabled:e}=Gc();return{isAIIntegrationEnabled:e}},data(){return{isDismissed:!1,isHovered:!1,selectedLabels:[]}},computed:{...lt({allLabels:"labels/getLabels",currentAccountId:"getCurrentAccountId",currentChat:"getSelectedChat"}),conversationId(){var e;return(e=this.currentChat)==null?void 0:e.id},labelTooltip(){return this.preparedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.MULTIPLE_SUGGESTION"):this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.SINGLE_SUGGESTION")},addButtonText(){return this.selectedLabels.length===1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABEL"):this.selectedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABELS"):this.$t("LABEL_MGMT.SUGGESTIONS.ADD_ALL_LABELS")},preparedLabels(){return this.allLabels.filter(e=>this.suggestedLabels.includes(e.title))},shouldShowSuggestions(){return this.isDismissed||!this.isAIIntegrationEnabled?!1:this.preparedLabels.length&&this.chatLabels.length===0}},watch:{conversationId:{immediate:!0,handler(){this.selectedLabels=[],this.isDismissed=this.isConversationDismissed()}}},methods:{pushOrAddLabel(e){if(this.preparedLabels.length===1){this.addAllLabels();return}this.selectedLabels.includes(e)?this.selectedLabels=this.selectedLabels.filter(t=>t!==e):this.selectedLabels.push(e)},dismissSuggestions(){va.setFlag(Na.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId),this.isDismissed=!0,this.trackLabelEvent(Zu.DISMISS_LABEL_SUGGESTION)},isConversationDismissed(){return va.getFlag(Na.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId)},addAllLabels(){let e=this.selectedLabels;e.length||(e=this.preparedLabels.map(t=>t.title)),this.$store.dispatch("conversationLabels/update",{conversationId:this.conversationId,labels:e}),this.trackLabelEvent(Zu.APPLY_LABEL_SUGGESTION)},trackLabelEvent(e){const t={conversationId:this.conversationId,account:this.currentAccountId,suggestions:this.suggestedLabels,labelsApplied:this.selectedLabels.length?this.selectedLabels:this.suggestedLabels};Pt(e,t)}}},kCe={class:"wrap"},DCe={class:"label-suggestion--container"},PCe={class:"label-suggestion--title"},BCe={class:"label-suggestion--options"},FCe=["onClick"],UCe={key:0,class:"inline-flex items-center gap-1"},GCe={class:"sender--info has-tooltip","data-original-title":"null"};function VCe(e,t,n,s,o,a){const i=M("woot-label"),r=M("NextButton"),l=M("fluent-icon"),c=M("Avatar"),u=M("woot-thumbnail"),d=qe("tooltip");return a.shouldShowSuggestions?(p(),v("li",{key:0,class:"label-suggestion right",onMouseover:t[0]||(t[0]=m=>o.isHovered=!0),onMouseleave:t[1]||(t[1]=m=>o.isHovered=!1)},[h("div",kCe,[h("div",DCe,[h("h6",PCe,A(e.$t("LABEL_MGMT.SUGGESTIONS.SUGGESTED_LABELS")),1),h("div",BCe,[(p(!0),v(pe,null,Ne(a.preparedLabels,m=>re((p(),v("button",{key:m.title,class:"label-suggestion--option !px-0",onClick:f=>a.pushOrAddLabel(m.title)},[y(i,fs({variant:"dashed",ref_for:!0},m,{"bg-color":o.selectedLabels.includes(m.title)?"var(--w-100)":""}),null,16,["bg-color"])],8,FCe)),[[d,{content:o.selectedLabels.includes(m.title)?e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DESELECT"):a.labelTooltip,delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])),128)),a.preparedLabels.length===1?re((p(),$(r,{key:0,faded:"",xs:"",icon:"i-lucide-x",class:"flex-shrink-0",color:o.isHovered?"ruby":"blue",onClick:a.dismissSuggestions},null,8,["color","onClick"])),[[d,{content:e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]]):w("",!0)]),a.preparedLabels.length>1?(p(),v("div",UCe,[y(r,{xs:"",icon:"i-lucide-plus",class:"flex-shrink-0",variant:o.selectedLabels.length===0?"faded":"solid",label:a.addButtonText,onClick:a.addAllLabels},null,8,["variant","label","onClick"]),re(y(r,{faded:"",xs:"",icon:"i-lucide-x",class:"flex-shrink-0",color:o.isHovered?"ruby":"blue",onClick:a.dismissSuggestions},null,8,["color","onClick"]),[[d,{content:e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])])):w("",!0)]),h("div",GCe,[re((p(),$(u,{size:"16px"},{default:K(()=>[y(c,{class:"user-thumbnail thumbnail-rounded"},{default:K(()=>[y(l,{class:"chatwoot-ai-icon",icon:"chatwoot-ai"})]),_:1})]),_:1})),[[d,{content:e.$t("LABEL_MGMT.SUGGESTIONS.POWERED_BY"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])])])],32)):w("",!0)}const HCe=Ae(LCe,[["render",VCe],["__scopeId","data-v-c2e5390f"]]),WCe=(e,t)=>e+t.scrollHeight,zCe=(e,t,n)=>{let s=[...n].reduce(WCe,0);return e-s-t/2},Om={FACEBOOK:"https://developers.facebook.com/docs/messenger-platform/policy/policy-overview/",TWILIO_WHATSAPP:"https://www.twilio.com/docs/whatsapp/tutorial/send-whatsapp-notification-messages-templates#sending-non-template-messages-within-a-24-hour-session",WHATSAPP_CLOUD:"https://business.whatsapp.com/policy#:~:text=You%20may%20reply%20to%20a,messages%20via%20approved%20Message%20Templates."},jCe={components:{Message:zIe,NextMessageList:MCe,ReplyBox:mSe,Banner:$c,ConversationLabelSuggestion:HCe},mixins:[Yo],setup(){const e=X(!1),t=X(null),{isEnterprise:n}=Yd(),s=()=>{e.value=!1},o=()=>{e.value=!e.value};$s({Escape:{action:s}});const{isAIIntegrationEnabled:i,isLabelSuggestionFeatureEnabled:r,fetchIntegrationsIfRequired:l,fetchLabelSuggestions:c}=Gc(),u=Oe("getCurrentAccountId"),m=Oe("accounts/isFeatureEnabledonAccount").value(u.value,_t.CHATWOOT_V4);return Pn("contextMenuElementTarget",t),{isEnterprise:n,isPopOutReplyBox:e,closePopOutReplyBox:s,showPopOutReplyBox:o,isAIIntegrationEnabled:i,isLabelSuggestionFeatureEnabled:r,fetchIntegrationsIfRequired:l,fetchLabelSuggestions:c,showNextBubbles:m,conversationPanelRef:t}},data(){return{isLoadingPrevious:!0,heightBeforeLoad:null,conversationPanel:null,hasUserScrolled:!1,isProgrammaticScroll:!1,messageSentSinceOpened:!1,labelSuggestions:[]}},computed:{...lt({currentChat:"getSelectedChat",currentUserId:"getCurrentUserID",listLoadingStatus:"getAllMessagesLoaded",currentAccountId:"getCurrentAccountId"}),isOpen(){var e;return((e=this.currentChat)==null?void 0:e.status)===It.STATUS_TYPE.OPEN},shouldShowLabelSuggestions(){return this.isOpen&&this.isEnterprise&&this.isAIIntegrationEnabled&&!this.messageSentSinceOpened},inboxId(){return this.currentChat.inbox_id},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},typingUsersList(){return this.$store.getters["conversationTypingStatus/getUserList"](this.currentChat.id)},isAnyoneTyping(){return this.typingUsersList.length!==0},typingUserNames(){const e=this.typingUsersList;if(this.isAnyoneTyping){const[t,n]=QO(e);return this.$t(t,n)}return""},getMessages(){const e=this.currentChat.messages||[];return this.isAWhatsAppChannel?xge(e):e},readMessages(){return Mge(this.getMessages,this.currentChat.agent_last_seen_at)},unReadMessages(){return Lge(this.getMessages,this.currentChat.agent_last_seen_at)},shouldShowSpinner(){return this.currentChat&&this.currentChat.dataFetched===void 0||!this.listLoadingStatus&&this.isLoadingPrevious},conversationType(){const{additional_attributes:e}=this.currentChat;return(e?e.type:"")||""},isATweet(){return this.conversationType==="tweet"},getLastSeenAt(){const{contact_last_seen_at:e}=this.currentChat;return e},hasDuplicateInstagramInbox(){const e=this.inbox.instagram_id,{additional_attributes:t={}}=this.inbox,n=this.$store.getters["inboxes/getInstagramInboxByInstagramId"](e);return this.inbox.channel_type===yt.FB&&t.type==="instagram_direct_message"&&n},replyWindowBannerMessage(){if(this.isAWhatsAppChannel)return this.$t("CONVERSATION.TWILIO_WHATSAPP_CAN_REPLY");if(this.isAPIInbox){const{additional_attributes:e={}}=this.inbox;if(e){const{agent_reply_time_window_message:t,agent_reply_time_window:n}=e;return t||this.$t("CONVERSATION.API_HOURS_WINDOW",{hours:n})}return""}return this.$t("CONVERSATION.CANNOT_REPLY")},replyWindowLink(){return this.isAFacebookInbox||this.isAnInstagramChannel?Om.FACEBOOK:this.isAWhatsAppCloudChannel?Om.WHATSAPP_CLOUD:this.isAPIInbox?"":Om.TWILIO_WHATSAPP},replyWindowLinkText(){return this.isAWhatsAppChannel||this.isAFacebookInbox||this.isAnInstagramChannel?this.$t("CONVERSATION.24_HOURS_WINDOW"):this.isAPIInbox?"":this.$t("CONVERSATION.TWILIO_WHATSAPP_24_HOURS_WINDOW")},unreadMessageCount(){return this.currentChat.unread_count||0},unreadMessageLabel(){const e=this.unreadMessageCount>9?"9+":this.unreadMessageCount,t=this.unreadMessageCount>1?"CONVERSATION.UNREAD_MESSAGES":"CONVERSATION.UNREAD_MESSAGE";return`${e} ${this.$t(t)}`},isInstagramDM(){return this.conversationType==="instagram_direct_message"},inboxSupportsReplyTo(){const e=this.inboxHasFeature(_c.REPLY_TO),t=this.inboxHasFeature(_c.REPLY_TO_OUTGOING)&&!this.is360DialogWhatsAppChannel;return{incoming:e,outgoing:t}}},watch:{currentChat(e,t){e.id!==t.id&&(this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions(),this.messageSentSinceOpened=!1)}},created(){wt.on(jt.SCROLL_TO_MESSAGE,this.onScrollToMessage),wt.on(jt.FETCH_LABEL_SUGGESTIONS,this.fetchSuggestions),wt.on(jt.MESSAGE_SENT,()=>{this.messageSentSinceOpened=!0})},mounted(){this.addScrollListener(),this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions()},unmounted(){this.removeBusListeners(),this.removeScrollListener()},methods:{async fetchSuggestions(){this.labelSuggestions=[],!this.isLabelSuggestionDismissed()&&this.isEnterprise&&(await this.fetchIntegrationsIfRequired(),this.isLabelSuggestionFeatureEnabled&&(this.labelSuggestions=await this.fetchLabelSuggestions({conversationId:this.currentChat.id}),this.$nextTick(()=>{const{messageId:e}=this.$route.query;!e&&!this.hasUserScrolled&&this.scrollToBottom()})))},isLabelSuggestionDismissed(){return va.getFlag(Na.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.currentChat.id)},fetchAllAttachmentsFromCurrentChat(){this.$store.dispatch("fetchAllAttachments",this.currentChat.id)},removeBusListeners(){wt.off(jt.SCROLL_TO_MESSAGE,this.onScrollToMessage)},onScrollToMessage({messageId:e=""}={}){this.$nextTick(()=>{const t=document.getElementById("message"+e);t?(this.isProgrammaticScroll=!0,t.scrollIntoView({behavior:"smooth"}),this.fetchPreviousMessages()):this.scrollToBottom()}),this.makeMessagesRead()},addScrollListener(){this.conversationPanel=this.$el.querySelector(".conversation-panel"),this.setScrollParams(),this.conversationPanel.addEventListener("scroll",this.handleScroll),this.$nextTick(()=>this.scrollToBottom()),this.isLoadingPrevious=!1},removeScrollListener(){this.conversationPanel.removeEventListener("scroll",this.handleScroll)},scrollToBottom(){this.isProgrammaticScroll=!0;let e=[],t=this.conversationPanel.querySelector(".label-suggestion");this.unreadMessageCount>0?e=this.conversationPanel.querySelectorAll(".message--unread"):t?e=[t]:e=Array.from(this.conversationPanel.querySelectorAll(".message--read")).slice(-1),this.conversationPanel.scrollTop=zCe(this.conversationPanel.scrollHeight,this.$el.scrollHeight,e)},setScrollParams(){this.heightBeforeLoad=this.conversationPanel.scrollHeight,this.scrollTopBeforeLoad=this.conversationPanel.scrollTop},async fetchPreviousMessages(e=0){this.setScrollParams();const t=this.currentChat.dataFetched===!0&&!this.listLoadingStatus&&!this.isLoadingPrevious;if(e<100&&!this.isLoadingPrevious&&t){this.isLoadingPrevious=!0;try{await this.$store.dispatch("fetchPreviousMessages",{conversationId:this.currentChat.id,before:this.currentChat.messages[0].id});const n=this.conversationPanel.scrollHeight-this.heightBeforeLoad;this.conversationPanel.scrollTop=this.scrollTopBeforeLoad+n,this.setScrollParams()}catch{}finally{this.isLoadingPrevious=!1}}},handleScroll(e){this.isProgrammaticScroll?(this.isProgrammaticScroll=!1,this.hasUserScrolled=!1):this.hasUserScrolled=!0,wt.emit(jt.ON_MESSAGE_LIST_SCROLL),this.fetchPreviousMessages(e.target.scrollTop)},makeMessagesRead(){this.$store.dispatch("markMessagesRead",{id:this.currentChat.id})},getInReplyToMessage(e){var n,s;if(!e)return{};const t=(n=e.content_attributes)==null?void 0:n.in_reply_to;return t?(s=this.currentChat)==null?void 0:s.messages.find(o=>o.id===t):{}}}},KCe={class:"flex flex-col justify-between flex-grow h-full min-w-0 m-0"},YCe={class:"min-h-[4rem]"},XCe={key:0,class:"spinner message"},qCe={class:"unread--toast"},ZCe={key:3,ref:"conversationPanelRef",class:"conversation-panel"},QCe={class:"min-h-[4rem]"},JCe={key:0,class:"spinner message"},eOe={class:"unread--toast"},tOe={key:0,class:"absolute flex items-center w-full h-0 -top-7"},nOe={class:"flex py-2 pr-4 pl-5 shadow-md rounded-full bg-white dark:bg-slate-700 text-n-slate-11 text-xs font-semibold my-2.5 mx-auto"};function sOe(e,t,n,s,o,a){var d;const i=M("Banner"),r=M("ConversationLabelSuggestion"),l=M("NextMessageList"),c=M("Message"),u=M("ReplyBox");return p(),v("div",KCe,[e.currentChat.can_reply?a.hasDuplicateInstagramInbox?(p(),$(i,{key:1,"color-scheme":"alert",class:"mx-2 mt-2 overflow-hidden rounded-lg","banner-message":e.$t("CONVERSATION.OLD_INSTAGRAM_INBOX_REPLY_BANNER")},null,8,["banner-message"])):w("",!0):(p(),$(i,{key:0,"color-scheme":"alert",class:"mx-2 mt-2 overflow-hidden rounded-lg","banner-message":a.replyWindowBannerMessage,"href-link":a.replyWindowLink,"href-link-text":a.replyWindowLinkText},null,8,["banner-message","href-link","href-link-text"])),s.showNextBubbles?(p(),$(l,{key:2,ref:"conversationPanelRef",class:"conversation-panel","current-user-id":e.currentUserId,"first-unread-id":(d=a.unReadMessages[0])==null?void 0:d.id,"is-an-email-channel":e.isAnEmailChannel,"inbox-supports-reply-to":a.inboxSupportsReplyTo,messages:a.getMessages},{beforeAll:K(()=>[y(qs,{name:"slide-up"},{default:K(()=>[h("li",YCe,[a.shouldShowSpinner?(p(),v("span",XCe)):w("",!0)])]),_:1})]),unreadBadge:K(()=>[re(h("li",qCe,[h("span",null,A(a.unreadMessageLabel),1)],512),[[Jt,a.unreadMessageCount!=0]])]),after:K(()=>[a.shouldShowLabelSuggestions?(p(),$(r,{key:0,"suggested-labels":o.labelSuggestions,"chat-labels":e.currentChat.labels,"conversation-id":e.currentChat.id},null,8,["suggested-labels","chat-labels","conversation-id"])):w("",!0)]),_:1},8,["current-user-id","first-unread-id","is-an-email-channel","inbox-supports-reply-to","messages"])):(p(),v("ul",ZCe,[y(qs,{name:"slide-up"},{default:K(()=>[h("li",QCe,[a.shouldShowSpinner?(p(),v("span",JCe)):w("",!0)])]),_:1}),(p(!0),v(pe,null,Ne(a.readMessages,m=>(p(),$(c,{key:m.id,class:"message--read ph-no-capture","data-clarity-mask":"True",data:m,"is-a-tweet":a.isATweet,"is-a-whatsapp-channel":e.isAWhatsAppChannel,"is-web-widget-inbox":e.isAWebWidgetInbox,"is-a-facebook-inbox":e.isAFacebookInbox,"is-an-email-inbox":e.isAnEmailChannel,"is-instagram":a.isInstagramDM,"inbox-supports-reply-to":a.inboxSupportsReplyTo,"in-reply-to":a.getInReplyToMessage(m)},null,8,["data","is-a-tweet","is-a-whatsapp-channel","is-web-widget-inbox","is-a-facebook-inbox","is-an-email-inbox","is-instagram","inbox-supports-reply-to","in-reply-to"]))),128)),re(h("li",eOe,[h("span",null,A(a.unreadMessageCount>9?"9+":a.unreadMessageCount)+" "+A(a.unreadMessageCount>1?e.$t("CONVERSATION.UNREAD_MESSAGES"):e.$t("CONVERSATION.UNREAD_MESSAGE")),1)],512),[[Jt,a.unreadMessageCount!=0]]),(p(!0),v(pe,null,Ne(a.unReadMessages,m=>(p(),$(c,{key:m.id,class:"message--unread ph-no-capture","data-clarity-mask":"True",data:m,"is-a-tweet":a.isATweet,"is-a-whatsapp-channel":e.isAWhatsAppChannel,"is-web-widget-inbox":e.isAWebWidgetInbox,"is-a-facebook-inbox":e.isAFacebookInbox,"is-instagram-dm":a.isInstagramDM,"inbox-supports-reply-to":a.inboxSupportsReplyTo,"in-reply-to":a.getInReplyToMessage(m)},null,8,["data","is-a-tweet","is-a-whatsapp-channel","is-web-widget-inbox","is-a-facebook-inbox","is-instagram-dm","inbox-supports-reply-to","in-reply-to"]))),128)),a.shouldShowLabelSuggestions?(p(),$(r,{key:0,"suggested-labels":o.labelSuggestions,"chat-labels":e.currentChat.labels,"conversation-id":e.currentChat.id},null,8,["suggested-labels","chat-labels","conversation-id"])):w("",!0)],512)),h("div",{class:se(["conversation-footer",{"modal-mask":s.isPopOutReplyBox,"bg-n-background":s.showNextBubbles&&!s.isPopOutReplyBox}])},[a.isAnyoneTyping?(p(),v("div",tOe,[h("div",nOe,[Re(A(a.typingUserNames)+" ",1),t[1]||(t[1]=h("img",{class:"w-6 ltr:ml-2 rtl:mr-2",src:FC,alt:"Someone is typing"},null,-1))])])):w("",!0),y(u,{"popout-reply-box":s.isPopOutReplyBox,"onUpdate:popoutReplyBox":t[0]||(t[0]=m=>s.isPopOutReplyBox=m),onTogglePopout:s.showPopOutReplyBox},null,8,["popout-reply-box","onTogglePopout"])],2)])}const aOe=Ae(jCe,[["render",sOe],["__scopeId","data-v-65cedcf7"]]),oOe={components:{ConversationHeader:Ybe,DashboardAppFrame:Jbe,EmptyState:R1e,MessagesView:aOe},props:{inboxId:{type:[Number,String],default:"",required:!1},isInboxView:{type:Boolean,default:!1},isContactPanelOpen:{type:Boolean,default:!0},isOnExpandedLayout:{type:Boolean,default:!0}},data(){return{activeIndex:0}},computed:{...lt({currentChat:"getSelectedChat",dashboardApps:"dashboardApps/getRecords"}),dashboardAppTabs(){return[{key:"messages",index:0,name:this.$t("CONVERSATION.DASHBOARD_APP_TAB_MESSAGES")},...this.dashboardApps.map((e,t)=>({key:`dashboard-${e.id}`,index:t+1,name:e.title}))]},showContactPanel(){return this.isContactPanelOpen&&this.currentChat.id}},watch:{"currentChat.inbox_id":{immediate:!0,handler(e){e&&this.$store.dispatch("inboxAssignableAgents/fetch",[e])}},"currentChat.id"(){this.fetchLabels(),this.activeIndex=0}},mounted(){this.fetchLabels(),this.$store.dispatch("dashboardApps/get")},methods:{fetchLabels(){this.currentChat.id&&this.$store.dispatch("conversationLabels/get",this.currentChat.id)},onDashboardAppTabChange(e){this.activeIndex=e}}},iOe={class:"flex h-full min-h-0 m-0"};function rOe(e,t,n,s,o,a){const i=M("ConversationHeader"),r=M("woot-tabs-item"),l=M("woot-tabs"),c=M("MessagesView"),u=M("EmptyState"),d=M("DashboardAppFrame");return p(),v("div",{class:se(["conversation-details-wrap bg-n-background relative",{"border-l rtl:border-l-0 rtl:border-r border-n-weak":!n.isOnExpandedLayout}])},[e.currentChat.id?(p(),$(i,{key:0,chat:e.currentChat,"show-back-button":n.isOnExpandedLayout&&!n.isInboxView},null,8,["chat","show-back-button"])):w("",!0),e.dashboardApps.length&&e.currentChat.id?(p(),$(l,{key:1,index:o.activeIndex,class:"-mt-px dashboard-app--tabs border-t border-t-n-background",onChange:a.onDashboardAppTabChange},{default:K(()=>[(p(!0),v(pe,null,Ne(a.dashboardAppTabs,m=>(p(),$(r,{key:m.key,index:m.index,name:m.name,"show-badge":!1},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])):w("",!0),re(h("div",iOe,[e.currentChat.id?(p(),$(c,{key:0,"inbox-id":n.inboxId,"is-inbox-view":n.isInboxView},null,8,["inbox-id","is-inbox-view"])):w("",!0),!e.currentChat.id&&!n.isInboxView?(p(),$(u,{key:1,"is-on-expanded-layout":n.isOnExpandedLayout},null,8,["is-on-expanded-layout"])):w("",!0),We(e.$slots,"default",{},void 0,!0)],512),[[Jt,!o.activeIndex]]),(p(!0),v(pe,null,Ne(e.dashboardApps,(m,f)=>re((p(),$(d,{key:e.currentChat.id+"-"+m.id,"is-visible":o.activeIndex-1===f,config:e.dashboardApps[f].content,position:f,"current-chat":e.currentChat},null,8,["is-visible","config","position","current-chat"])),[[Jt,o.activeIndex-1===f]])),128))],2)}const XA=Ae(oOe,[["render",rOe],["__scopeId","data-v-295328da"]]),lOe={components:{SwitchLayout:nA},directives:{focus:{inserted(e){e.focus()}}},props:{isOnExpandedLayout:{type:Boolean,required:!0}},emits:["toggleConversationLayout"],computed:{...lt({accountId:"getCurrentAccountId"}),searchUrl(){return At(`accounts/${this.accountId}/search`)}}},cOe={class:"relative"},uOe={class:"flex px-4 pb-1 justify-between items-center flex-row gap-1 pt-2.5 border-b border-transparent"},dOe={class:"flex flex-shrink-0"},pOe={class:"mb-0 overflow-hidden text-sm search--label whitespace-nowrap text-ellipsis text-n-slate-11"};function hOe(e,t,n,s,o,a){const i=M("woot-sidemenu-icon"),r=M("fluent-icon"),l=M("router-link"),c=M("SwitchLayout");return p(),v("div",cOe,[h("div",uOe,[y(i,{size:"xs",class:"relative top-0 ltr:-ml-1.5 rtl:-mr-1.5 flex-shrink-0 focus:!bg-n-solid-3 dark:!hover:bg-n-solid-2 hover:!bg-n-alpha-2"}),y(l,{to:a.searchUrl,class:"inline-flex items-center flex-1 h-6 min-w-0 gap-1 px-2 py-0 text-left rounded-md rtl:mr-2.5 search-link rtl:text-right bg-n-slate-9/10 hover:bg-n-slate-3"},{default:K(()=>[h("div",dOe,[y(r,{icon:"search",class:"search--icon text-n-slate-11",size:"16"})]),h("p",pOe,A(e.$t("CONVERSATION.SEARCH_MESSAGES")),1)]),_:1},8,["to"]),y(c,{"is-on-expanded-layout":n.isOnExpandedLayout,onToggle:t[0]||(t[0]=u=>e.$emit("toggleConversationLayout"))},null,8,["is-on-expanded-layout"])])])}const mOe=Ae(lOe,[["render",hOe],["__scopeId","data-v-41ce9336"]]),qA={__name:"CmdBarConversationSnooze",setup(e){const t=pt(),n=nn(),{t:s}=Me(),o=X(!1),a=C(()=>n.getSelectedChat.value),i=C(()=>n.getContextMenuChatId.value),r=async(d,m)=>{var f;await t.dispatch("toggleStatus",{conversationId:((f=a.value)==null?void 0:f.id)||i.value,status:d,snoozedUntil:m}),t.dispatch("setContextMenuChatId",null),ce(s("CONVERSATION.CHANGE_STATUS"))},l=d=>{d===It.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?o.value=!0:r(It.STATUS_TYPE.SNOOZED,r_(d)||null)},c=d=>{o.value=!1,d&&r(It.STATUS_TYPE.SNOOZED,co(d))},u=()=>{t.dispatch("setContextMenuChatId",null),o.value=!1};return Ei(F_e,l),(d,m)=>{const f=M("woot-modal");return p(),$(f,{show:o.value,"onUpdate:show":m[0]||(m[0]=g=>o.value=g),"on-close":u},{default:K(()=>[y(l_,{onClose:u,onChooseTime:c})]),_:1},8,["show"])}}},fOe={class:"flex flex-col justify-center items-center absolute top-36 xl:top-24 ltr:right-2 rtl:left-2 bg-n-solid-2 border border-n-weak rounded-full gap-2 p-1"},gOe={__name:"SidepanelSwitch",setup(e){const{updateUISettings:t}=ln(),n=Oe("getCurrentAccountId"),s=Oe("accounts/isFeatureEnabledonAccount"),o=C(()=>s.value(n.value,_t.CAPTAIN)),{uiSettings:a}=ln(),i=C(()=>a.value.is_contact_sidebar_open),r=C(()=>a.value.is_copilot_panel_open),l=()=>{t({is_contact_sidebar_open:!i.value,is_copilot_panel_open:!1})},c=()=>{t({is_contact_sidebar_open:!0,is_copilot_panel_open:!1})},u=()=>{t({is_contact_sidebar_open:!1,is_copilot_panel_open:!0})};return $s({"Alt+KeyO":{action:l}}),(m,f)=>{const g=qe("tooltip");return p(),v("div",fOe,[re(y(oe,{ghost:"",slate:"",sm:"",class:se(["!rounded-full",{"bg-n-alpha-2":i.value}]),icon:"i-ph-user-bold",onClick:c},null,8,["class"]),[[g,m.$t("CONVERSATION.SIDEBAR.CONTACT"),void 0,{top:!0}]]),o.value?re((p(),$(oe,{key:0,ghost:"",slate:"",class:se(["!rounded-full",{"bg-n-alpha-2 !text-n-iris-9":r.value}]),sm:"",icon:"i-woot-captain",onClick:u},null,8,["class"])),[[g,m.$t("CONVERSATION.SIDEBAR.COPILOT"),void 0,{bottom:!0}]]):w("",!0)])}}},_Oe={props:{icon:{type:String,default:""},iconSize:{type:[Number,String],default:20},emoji:{type:String,default:""}},computed:{...lt({uiSettings:"getUISettings"}),isIconTypeEmoji(){const{icon_type:e}=this.uiSettings||{};return e==="emoji"},showEmoji(){return this.isIconTypeEmoji&&this.emoji&&TO(this.emoji)},showIcon(){return!this.showEmoji&&this.icon},iconContent(){return this.showEmoji?this.emoji:""},className(){return{"icon--emoji":this.showEmoji,"icon--font":this.showIcon,[this.icon]:this.showIcon}}}};function vOe(e,t,n,s,o,a){const i=M("fluent-icon");return a.showEmoji?(p(),v("i",{key:0,class:se(a.className)},A(a.iconContent),3)):a.showIcon?(p(),$(i,{key:1,size:n.iconSize,icon:n.icon,class:se(["flex-shrink-0",a.className])},null,8,["size","icon","class"])):w("",!0)}const ZA=Ae(_Oe,[["render",vOe],["__scopeId","data-v-abe899c4"]]),bOe={class:"text-sm"},EOe={class:"flex justify-between"},TOe={class:"text-n-slate-12 text-sm mb-0 py-0 pr-2 pl-0"},yOe={class:"flex flex-row"},SOe={class:"flex justify-end w-3 text-n-blue-text cursor-pointer"},xo={__name:"AccordionItem",props:{title:{type:String,required:!0},compact:{type:Boolean,default:!1},icon:{type:String,default:""},emoji:{type:String,default:""},isOpen:{type:Boolean,default:!0}},emits:["toggle"],setup(e,{emit:t}){const n=t,s=()=>{n("toggle")};return(o,a)=>{const i=M("fluent-icon");return p(),v("div",bOe,[h("button",{class:se(["flex items-center select-none w-full rounded-lg bg-n-slate-2 outline outline-1 outline-n-weak m-0 cursor-grab justify-between py-2 px-4 drag-handle",{"rounded-bl-none rounded-br-none":e.isOpen}]),onClick:Fe(s,["stop"])},[h("div",EOe,[y(ZA,{class:"inline-block w-5",icon:e.icon,emoji:e.emoji},null,8,["icon","emoji"]),h("h5",TOe,A(e.title),1)]),h("div",yOe,[We(o.$slots,"button"),h("div",SOe,[e.isOpen?(p(),$(i,{key:0,size:"24",icon:"subtract",type:"solid"})):(p(),$(i,{key:1,size:"24",icon:"add",type:"solid"}))])])],2),e.isOpen?(p(),v("div",{key:0,class:se(["bg-n-background outline outline-1 outline-n-weak -mt-[-1px] border-t-0 rounded-br-lg rounded-bl-lg",e.compact?"p-0":"px-2 py-4"])},[We(o.$slots,"default")],2)):w("",!0)])}}},AOe={components:{ConversationCard:uA,Spinner:gs},props:{contactId:{type:[String,Number],required:!0},conversationId:{type:[String,Number],required:!0}},computed:{conversations(){return this.$store.getters["contactConversations/getContactConversation"](this.contactId)},previousConversations(){return this.conversations.filter(e=>e.id!==Number(this.conversationId))},...lt({uiFlags:"contactConversations/getUIFlags"})},watch:{contactId(e,t){e&&e!==t&&this.$store.dispatch("contactConversations/get",e)}},mounted(){this.$store.dispatch("contactConversations/get",this.contactId)}},IOe={key:0,class:""},COe={key:0,class:"no-label-message px-4 p-3"},OOe={key:1,class:"contact-conversation--list"},NOe={key:1,class:"flex items-center justify-center py-5"};function wOe(e,t,n,s,o,a){const i=M("ConversationCard"),r=M("Spinner");return e.uiFlags.isFetching?(p(),v("div",NOe,[y(r)])):(p(),v("div",IOe,[a.previousConversations.length?(p(),v("div",OOe,[(p(!0),v(pe,null,Ne(a.previousConversations,l=>(p(),$(i,{key:l.id,chat:l,"hide-inbox-name":!1,"hide-thumbnail":"",class:"compact"},null,8,["chat"]))),128))])):(p(),v("div",COe,[h("span",null,A(e.$t("CONTACT_PANEL.CONVERSATIONS.NO_RECORDS_FOUND")),1)]))]))}const ROe=Ae(AOe,[["render",wOe],["__scopeId","data-v-603b8c8e"]]);function QA(e=!0){const{t}=Me(),n=Oe("getCurrentUser"),s=Oe("getSelectedChat"),o=Oe("getCurrentAccountId"),a=Oe("inboxAssignableAgents/getAssignableAgents"),i=C(()=>{var d;return(d=s.value)==null?void 0:d.inbox_id}),r=C(()=>{var d,m;return(m=(d=s.value)==null?void 0:d.meta)==null?void 0:m.assignee}),l=()=>({confirmed:!0,name:t("AGENT_MGMT.MULTI_SELECTOR.LIST.NONE")||"None",id:0,role:"agent",account_id:0,email:"None"}),c=C(()=>i.value?a.value(i.value):[]);return{agentsList:C(()=>{const d=c.value||[],m=iA(d,n.value,o.value),f=oA(m);return[...e&&r.value?[l()]:[],...f]}),assignableAgents:c}}const xOe={props:{title:{type:String,required:!0},value:{type:[String,Number],default:""},compact:{type:Boolean,default:!1}}},$Oe={class:"items-center flex justify-between mb-1.5"},MOe={class:"text-sm font-medium text-slate-800 dark:text-slate-100"},LOe={key:0,class:"break-words"};function kOe(e,t,n,s,o,a){return p(),v("div",{class:se(["overflow-auto",n.compact?"py-0 px-0":"py-3 px-4"])},[h("div",$Oe,[h("span",MOe,A(n.title),1),We(e.$slots,"button")]),n.value?(p(),v("div",LOe,[We(e.$slots,"default",{},()=>[Re(A(n.value),1)])])):w("",!0)],2)}const JA=Ae(xOe,[["render",kOe]]),DOe={components:{WootDropdownItem:dc,WootDropdownMenu:Bd,Thumbnail:Hn,NextButton:oe},props:{options:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]},hasThumbnail:{type:Boolean,default:!0},inputPlaceholder:{type:String,default:"Search"},noSearchResult:{type:String,default:"No results found"}},emits:["select"],data(){return{search:""}},computed:{filteredOptions(){return this.options.filter(e=>e.name.toLowerCase().includes(this.search.toLowerCase()))},noResult(){return this.filteredOptions.length===0&&this.search!==""}},mounted(){this.focusInput()},methods:{onclick(e){this.$emit("select",e)},focusInput(){this.$refs.searchbar.focus()},isActive(e){return this.selectedItems.some(t=>t&&e.id===t.id)}}},POe={class:"dropdown-wrap"},BOe={class:"flex-auto flex-grow-0 flex-shrink-0 mb-2 max-h-8"},FOe=["placeholder"],UOe={class:"flex items-start justify-start flex-auto overflow-auto mt-2"},GOe={class:"w-full max-h-[10rem]"},VOe={class:"flex items-center justify-between w-full min-w-0 gap-2"},HOe=["title"],WOe={key:0,class:"w-full justify-center items-center flex text-n-slate-10 py-2 px-2.5 overflow-hidden whitespace-nowrap text-ellipsis text-sm"};function zOe(e,t,n,s,o,a){const i=M("Thumbnail"),r=M("NextButton"),l=M("WootDropdownItem"),c=M("WootDropdownMenu");return p(),v("div",POe,[h("div",BOe,[re(h("input",{ref:"searchbar","onUpdate:modelValue":t[0]||(t[0]=u=>o.search=u),type:"text",class:"search-input",autofocus:"true",placeholder:n.inputPlaceholder},null,8,FOe),[[mt,o.search]])]),h("div",UOe,[h("div",GOe,[y(c,null,{default:K(()=>[(p(!0),v(pe,null,Ne(a.filteredOptions,u=>(p(),$(l,{key:u.id},{default:K(()=>[y(r,{slate:"",variant:a.isActive(u)?"faded":"ghost","trailing-icon":"",icon:a.isActive(u)?"i-lucide-check":"",class:"w-full !px-2.5",onClick:()=>a.onclick(u)},{default:K(()=>[h("div",VOe,[h("span",{class:"my-0 overflow-hidden text-sm leading-4 whitespace-nowrap text-ellipsis",title:u.name},A(u.name),9,HOe)]),n.hasThumbnail?(p(),$(i,{key:0,src:u.thumbnail,size:"24px",username:u.name,status:u.availability_status,"has-border":""},null,8,["src","username","status"])):w("",!0)]),_:2},1032,["variant","icon","onClick"])]),_:2},1024))),128))]),_:1}),a.noResult?(p(),v("h4",WOe,A(n.noSearchResult),1)):w("",!0)])])])}const eI=Ae(DOe,[["render",zOe],["__scopeId","data-v-11a6d251"]]),jOe={class:"flex items-center justify-between w-full min-w-0"},KOe={key:0,class:"text-sm text-ellipsis text-n-slate-12"},YOe=["title"],XOe={class:"flex items-center justify-between mb-1"},qOe={class:"m-0 overflow-hidden text-sm text-n-slate-11 whitespace-nowrap text-ellipsis"},ZOe={__name:"MultiselectDropdown",props:{options:{type:Array,default:()=>[]},selectedItem:{type:Object,default:()=>({})},hasThumbnail:{type:Boolean,default:!0},multiselectorTitle:{type:String,default:""},multiselectorPlaceholder:{type:String,default:"None"},noSearchResult:{type:String,default:"No results found"},inputPlaceholder:{type:String,default:"Search"}},emits:["select"],setup(e,{emit:t}){const n=e,s=t,[o,a]=es(!1),i=()=>a(!1),r=c=>{s("select",c),i()},l=C(()=>!!(n.selectedItem&&n.selectedItem.id));return(c,u)=>(p(),$(N(il),{onTrigger:i},{default:K(()=>[h("div",{class:"relative w-full mb-2",onKeyup:kn(i,["esc"])},[y(oe,{slate:"",outline:"","trailing-icon":"",icon:N(o)?"i-lucide-chevron-up":"i-lucide-chevron-down",class:"w-full !px-2",onClick:u[0]||(u[0]=()=>N(a)())},{default:K(()=>[h("div",jOe,[l.value?(p(),v("h4",{key:1,class:"items-center overflow-hidden text-sm leading-tight whitespace-nowrap text-ellipsis text-n-slate-12",title:e.selectedItem.name},A(e.selectedItem.name),9,YOe)):(p(),v("h4",KOe,A(e.multiselectorPlaceholder),1))]),l.value&&e.hasThumbnail?(p(),$(Hn,{key:0,src:e.selectedItem.thumbnail,size:"24px",status:e.selectedItem.availability_status,username:e.selectedItem.name},null,8,["src","status","username"])):w("",!0)]),_:1},8,["icon"]),h("div",{class:se([{"dropdown-pane--open":N(o)},"dropdown-pane"])},[h("div",XOe,[h("h4",qOe,A(e.multiselectorTitle),1),y(oe,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:i})]),N(o)?(p(),$(eI,{key:0,options:e.options,"selected-items":[e.selectedItem],"has-thumbnail":e.hasThumbnail,"input-placeholder":e.inputPlaceholder,"no-search-result":e.noSearchResult,onSelect:r},null,8,["options","selected-items","has-thumbnail","input-placeholder","no-search-result"])):w("",!0)],2)],32)]),_:1}))}},tI=Ae(ZOe,[["__scopeId","data-v-dd649946"]]);function QOe(){const e=pt(),t=nn(),n=C(()=>t.getSelectedChat.value),s=C(()=>{var d;return(d=n.value)==null?void 0:d.id}),o=C(()=>t["labels/getLabels"].value),a=C(()=>e.getters["conversationLabels/getConversationLabels"](s.value)),i=C(()=>o.value.filter(({title:d})=>a.value.includes(d))),r=C(()=>o.value.filter(({title:d})=>!a.value.includes(d))),l=async d=>{await e.dispatch("conversationLabels/update",{conversationId:s.value,labels:d})};return{accountLabels:o,savedLabels:a,activeLabels:i,inactiveLabels:r,addLabelToConversation:d=>{const m=i.value.map(f=>f.title);m.push(d.title),l(m)},removeLabelFromConversation:d=>{const m=i.value.map(f=>f.title).filter(f=>f!==d);l(m)},onUpdateLabels:l}}const JOe={components:{NextButton:oe},props:{title:{type:String,default:""},color:{type:String,default:""},selected:{type:Boolean,default:!1}},emits:["selectLabel"],methods:{onClick(){this.$emit("selectLabel",this.title)}}},eNe={class:"flex items-center min-w-0 gap-2"},tNe=["title"];function nNe(e,t,n,s,o,a){const i=M("NextButton"),r=M("woot-dropdown-item");return p(),$(r,null,{default:K(()=>[y(i,{slate:"",ghost:"",blue:"","trailing-icon":"",icon:n.selected?"i-lucide-circle-check":"",class:se(["w-full !px-2.5 justify-between",{"!flex-row":!n.selected}]),onClick:a.onClick},{default:K(()=>[h("div",eNe,[n.color?(p(),v("div",{key:0,class:"size-3 flex-shrink-0 rounded-full outline outline-1 outline-n-weak",style:Ht({backgroundColor:n.color})},null,4)):w("",!0),h("span",{class:"overflow-hidden text-ellipsis whitespace-nowrap leading-[1.1]",title:n.title},A(n.title),9,tNe)])]),_:1},8,["icon","class","onClick"])]),_:1})}const sNe=Ae(JOe,[["render",nNe]]),aNe=/[^a-zA-Z0-9_-]/g,oNe=/\s+/g,iNe=(e="")=>e?e.trim().toLowerCase().replace(oNe,"-").replace(aNe,""):"",rNe={components:{LabelDropdownItem:sNe,AddLabelModal:Mg,Hotkey:Br,NextButton:oe},props:{accountLabels:{type:Array,default:()=>[]},selectedLabels:{type:Array,default:()=>[]},allowCreation:{type:Boolean,default:!1}},emits:["update","add","remove"],data(){return{search:"",createModalVisible:!1}},computed:{createLabelPlaceholder(){const e=this.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.CREATE_LABEL");return this.search?`${e}:`:e},filteredActiveLabels(){return this.search?_g(this.accountLabels,this.search,["title"],{threshold:.9}):this.accountLabels},noResult(){return this.filteredActiveLabels.length===0},hasExactMatchInResults(){return this.filteredActiveLabels.some(e=>e.title===this.search)},shouldShowCreate(){return this.allowCreation&&this.filteredActiveLabels.length<3},parsedSearch(){return iNe(this.search)}},mounted(){this.focusInput()},methods:{focusInput(){this.$refs.searchbar.focus()},updateLabels(e){this.$emit("update",e)},onAdd(e){this.$emit("add",e)},onRemove(e){this.$emit("remove",e)},onAddRemove(e){this.selectedLabels.includes(e.title)?this.onRemove(e.title):this.onAdd(e)},showCreateModal(){this.createModalVisible=!0},hideCreateModal(){this.createModalVisible=!1}}},lNe={class:"flex flex-col w-full max-h-[12.5rem]"},cNe={class:"flex items-center justify-center mb-1"},uNe={class:"flex-grow m-0 overflow-hidden text-sm text-slate-800 dark:text-slate-100 whitespace-nowrap text-ellipsis"},dNe={class:"flex-auto flex-grow-0 flex-shrink-0 mb-2 max-h-8"},pNe=["placeholder"],hNe={class:"flex items-start justify-start flex-auto flex-grow flex-shrink overflow-auto"},mNe={class:"w-full my-1"},fNe={key:0,class:"flex justify-center py-4 px-2.5 font-medium text-xs text-slate-700 dark:text-slate-200"},gNe={key:1,class:"flex pt-1 border-t border-solid border-slate-100 dark:border-slate-900"};function _Ne(e,t,n,s,o,a){const i=M("Hotkey"),r=M("LabelDropdownItem"),l=M("woot-dropdown-menu"),c=M("NextButton"),u=M("AddLabelModal"),d=M("woot-modal");return p(),v("div",lNe,[h("div",cNe,[h("h4",uNe,A(e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.TITLE")),1),y(i,{"custom-class":"border border-solid text-slate-800 dark:text-slate-100 bg-slate-50 dark:bg-slate-600 text-xxs border-slate-75 dark:border-slate-600 flex-shrink-0"},{default:K(()=>t[2]||(t[2]=[Re(A("L"))])),_:1})]),h("div",dNe,[re(h("input",{ref:"searchbar","onUpdate:modelValue":t[0]||(t[0]=m=>o.search=m),type:"text",class:"search-input",autofocus:"true",placeholder:e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.PLACEHOLDER")},null,8,pNe),[[mt,o.search]])]),h("div",hNe,[h("div",mNe,[y(l,null,{default:K(()=>[(p(!0),v(pe,null,Ne(a.filteredActiveLabels,m=>(p(),$(r,{key:m.title,title:m.title,color:m.color,selected:n.selectedLabels.includes(m.title),onSelectLabel:f=>a.onAddRemove(m)},null,8,["title","color","selected","onSelectLabel"]))),128))]),_:1}),a.noResult?(p(),v("div",fNe,A(e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.NO_RESULT")),1)):w("",!0),n.allowCreation&&a.shouldShowCreate?(p(),v("div",gNe,[y(c,{icon:"i-lucide-plus",slate:"",sm:"",ghost:"",label:`${a.createLabelPlaceholder} ${a.parsedSearch}`,disabled:a.hasExactMatchInResults,onClick:a.showCreateModal},null,8,["label","disabled","onClick"]),y(d,{show:o.createModalVisible,"onUpdate:show":t[1]||(t[1]=m=>o.createModalVisible=m),"on-close":a.hideCreateModal},{default:K(()=>[y(u,{"prefill-title":a.parsedSearch,onClose:a.hideCreateModal},null,8,["prefill-title","onClose"])]),_:1},8,["show","on-close"])])):w("",!0)])])])}const vNe=Ae(rNe,[["render",_Ne]]),bNe={__name:"AddLabel",emits:["add"],setup(e,{emit:t}){const n=t,s=()=>{n("add")};return(o,a)=>(p(),$(oe,{faded:"",xs:"",icon:"i-lucide-plus",class:"mb-0.5 ltr:mr-0.5 rtl:ml-0.5 !rounded-[4px]",label:o.$t("CONTACT_PANEL.LABELS.CONVERSATION.ADD_BUTTON"),onClick:s},null,8,["label"]))}},ENe={components:{Spinner:bs,LabelDropdown:vNe,AddLabel:bNe},setup(){const{isAdmin:e}=ka(),{savedLabels:t,activeLabels:n,accountLabels:s,addLabelToConversation:o,removeLabelFromConversation:a}=QOe(),i=X(!1),r=()=>{i.value=!i.value},l=()=>{i.value=!1};return $s({KeyL:{action:u=>{u.preventDefault(),r()}},Escape:{action:()=>{i.value&&r()},allowOnFocusedInput:!0}}),{isAdmin:e,savedLabels:t,activeLabels:n,accountLabels:s,addLabelToConversation:o,removeLabelFromConversation:a,showSearchDropdownLabel:i,closeDropdownLabel:l,toggleLabels:r}},data(){return{selectedLabels:[]}},computed:{...lt({conversationUiFlags:"conversationLabels/getUIFlags"})}},TNe={class:"sidebar-labels-wrap"},yNe={key:0,class:"contact-conversation--list"},SNe={class:"dropdown-wrap"};function ANe(e,t,n,s,o,a){const i=M("AddLabel"),r=M("woot-label"),l=M("LabelDropdown"),c=M("Spinner"),u=qe("on-clickaway");return p(),v("div",TNe,[e.conversationUiFlags.isFetching?(p(),$(c,{key:1})):(p(),v("div",yNe,[re((p(),v("div",{class:"label-wrap flex flex-wrap",onKeyup:t[0]||(t[0]=kn((...d)=>s.closeDropdownLabel&&s.closeDropdownLabel(...d),["esc"]))},[y(i,{onAdd:s.toggleLabels},null,8,["onAdd"]),(p(!0),v(pe,null,Ne(s.activeLabels,d=>(p(),$(r,{key:d.id,title:d.title,description:d.description,"show-close":"",color:d.color,variant:"smooth",class:"max-w-[calc(100%-0.5rem)]",onRemove:s.removeLabelFromConversation},null,8,["title","description","color","onRemove"]))),128)),h("div",SNe,[h("div",{class:se([{"dropdown-pane--open":s.showSearchDropdownLabel},"dropdown-pane"])},[s.showSearchDropdownLabel?(p(),$(l,{key:0,"account-labels":s.accountLabels,"selected-labels":s.savedLabels,"allow-creation":s.isAdmin,onAdd:s.addLabelToConversation,onRemove:s.removeLabelFromConversation},null,8,["account-labels","selected-labels","allow-creation","onAdd","onRemove"])):w("",!0)],2)])],32)),[[u,s.closeDropdownLabel]])]))])}const INe=Ae(ENe,[["render",ANe],["__scopeId","data-v-a6b6c11e"]]),CNe={components:{ContactDetailsItem:JA,MultiselectDropdown:tI,ConversationLabels:INe,NextButton:oe},props:{conversationId:{type:[Number,String],required:!0}},setup(){const{agentsList:e}=QA();return{agentsList:e}},data(){return{priorityOptions:[{id:null,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),thumbnail:"/assets/images/dashboard/priority/none.svg"},{id:Ks.URGENT,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),thumbnail:`/assets/images/dashboard/priority/${Ks.URGENT}.svg`},{id:Ks.HIGH,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),thumbnail:`/assets/images/dashboard/priority/${Ks.HIGH}.svg`},{id:Ks.MEDIUM,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),thumbnail:`/assets/images/dashboard/priority/${Ks.MEDIUM}.svg`},{id:Ks.LOW,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),thumbnail:`/assets/images/dashboard/priority/${Ks.LOW}.svg`}]}},computed:{...lt({currentChat:"getSelectedChat",currentUser:"getCurrentUser",teams:"teams/getTeams"}),hasAnAssignedTeam(){var e,t;return!!((t=(e=this.currentChat)==null?void 0:e.meta)!=null&&t.team)},teamsList(){return this.hasAnAssignedTeam?[{id:0,name:this.$t("TEAMS_SETTINGS.LIST.NONE")},...this.teams]:this.teams},assignedAgent:{get(){return this.currentChat.meta.assignee},set(e){const t=e?e.id:0;this.$store.dispatch("setCurrentChatAssignee",e),this.$store.dispatch("assignAgent",{conversationId:this.currentChat.id,agentId:t}).then(()=>{ce(this.$t("CONVERSATION.CHANGE_AGENT"))})}},assignedTeam:{get(){return this.currentChat.meta.team},set(e){const t=this.currentChat.id,n=e?e.id:0;this.$store.dispatch("setCurrentChatTeam",{team:e,conversationId:t}),this.$store.dispatch("assignTeam",{conversationId:t,teamId:n}).then(()=>{ce(this.$t("CONVERSATION.CHANGE_TEAM"))})}},assignedPriority:{get(){return this.priorityOptions.find(t=>t.id===this.currentChat.priority)||this.priorityOptions[0]},set(e){var o;const t=this.currentChat.id,n=(o=this.currentChat)==null?void 0:o.priority,s=e?e.id:null;this.$store.dispatch("setCurrentChatPriority",{priority:s,conversationId:t}),this.$store.dispatch("assignPriority",{conversationId:t,priority:s}).then(()=>{Pt(ua.CHANGE_PRIORITY,{oldValue:n,newValue:s,from:"Conversation Sidebar"}),ce(this.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:e.name,conversationId:t}))})}},showSelfAssign(){return!this.assignedAgent||this.assignedAgent.id!==this.currentUser.id}},methods:{onSelfAssign(){const{account_id:e,availability_status:t,available_name:n,email:s,id:o,name:a,role:i,avatar_url:r}=this.currentUser,l={account_id:e,availability_status:t,available_name:n,email:s,id:o,name:a,role:i,thumbnail:r};this.assignedAgent=l},onClickAssignAgent(e){this.assignedAgent&&this.assignedAgent.id===e.id?this.assignedAgent=null:this.assignedAgent=e},onClickAssignTeam(e){this.assignedTeam&&this.assignedTeam.id===e.id?this.assignedTeam=null:this.assignedTeam=e},onClickAssignPriority(e){const t=this.assignedPriority&&this.assignedPriority.id===e.id;this.assignedPriority=t?null:e}}},ONe={class:"bg-white dark:bg-slate-900"},NNe={class:"multiselect-wrap--small"},wNe={class:"multiselect-wrap--small"},RNe={class:"multiselect-wrap--small"};function xNe(e,t,n,s,o,a){const i=M("NextButton"),r=M("ContactDetailsItem"),l=M("MultiselectDropdown"),c=M("ConversationLabels");return p(),v("div",ONe,[h("div",NNe,[y(r,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.ASSIGNEE_LABEL")},{button:K(()=>[a.showSelfAssign?(p(),$(i,{key:0,link:"",xs:"",icon:"i-lucide-arrow-right",class:"!gap-1",label:e.$t("CONVERSATION_SIDEBAR.SELF_ASSIGN"),onClick:a.onSelfAssign},null,8,["label","onClick"])):w("",!0)]),_:1},8,["title"]),y(l,{options:s.agentsList,"selected-item":a.assignedAgent,"multiselector-title":e.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.AGENT"),"multiselector-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.AGENT"),"input-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.AGENT"),onSelect:a.onClickAssignAgent},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),h("div",wNe,[y(r,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.TEAM_LABEL")},null,8,["title"]),y(l,{options:a.teamsList,"selected-item":a.assignedTeam,"multiselector-title":e.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.TEAM"),"multiselector-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.TEAM"),"input-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.TEAM"),onSelect:a.onClickAssignTeam},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),h("div",RNe,[y(r,{compact:"",title:e.$t("CONVERSATION.PRIORITY.TITLE")},null,8,["title"]),y(l,{options:o.priorityOptions,"selected-item":a.assignedPriority,"multiselector-title":e.$t("CONVERSATION.PRIORITY.TITLE"),"multiselector-placeholder":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SELECT_PLACEHOLDER"),"no-search-result":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.NO_RESULTS"),"input-placeholder":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.INPUT_PLACEHOLDER"),onSelect:a.onClickAssignPriority},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),y(r,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_LABELS")},null,8,["title"]),y(c,{"conversation-id":n.conversationId},null,8,["conversation-id"])])}const $Ne=Ae(CNe,[["render",xNe]]),MNe={components:{Thumbnail:Hn},props:{usersList:{type:Array,default:()=>[]},size:{type:String,default:"24px"},showMoreThumbnailsCount:{type:Boolean,default:!1},moreThumbnailsText:{type:String,default:""},gap:{type:String,default:"normal",validator(e){return["normal","","tight"].includes(e)}}}},LNe={class:"overlapping-thumbnails"},kNe={key:0,class:"thumbnail-more-text"};function DNe(e,t,n,s,o,a){const i=M("Thumbnail"),r=qe("tooltip");return p(),v("div",LNe,[(p(!0),v(pe,null,Ne(n.usersList,l=>re((p(),$(i,{key:l.id,title:l.name,src:l.thumbnail,username:l.name,"has-border":"",size:n.size,class:se(`overlapping-thumbnail gap-${n.gap}`)},null,8,["title","src","username","size","class"])),[[r,l.name]])),128)),n.showMoreThumbnailsCount?(p(),v("span",kNe,A(n.moreThumbnailsText),1)):w("",!0)])}const PNe=Ae(MNe,[["render",DNe],["__scopeId","data-v-4dc22040"]]),BNe={components:{Spinner:bs,ThumbnailGroup:PNe,MultiselectDropdownItems:eI,NextButton:oe},props:{conversationId:{type:[Number,String],required:!0}},setup(){const{agentsList:e}=QA(!1);return{agentsList:e}},data(){return{selectedWatchers:[],showDropDown:!1}},computed:{...lt({watchersUiFlas:"conversationWatchers/getUIFlags",currentUser:"getCurrentUser"}),watchersFromStore(){return this.$store.getters["conversationWatchers/getByConversationId"](this.conversationId)},watchersList:{get(){return this.selectedWatchers},set(e){this.selectedWatchers=[...e];const t=e.map(n=>n.id);this.updateParticipant(t)}},isUserWatching(){return this.selectedWatchers.some(e=>e.id===this.currentUser.id)},thumbnailList(){return this.selectedWatchers.slice(0,4)},moreAgentCount(){return this.watchersList.length-4},moreThumbnailsText(){return this.moreAgentCount>1?this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANTS_TEXT",{count:this.moreAgentCount}):this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANT_TEXT",{count:1})},showMoreThumbs(){return this.moreAgentCount>0},totalWatchersText(){return this.selectedWatchers.length>1?this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANTS_TEXT",{count:this.selectedWatchers.length}):this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANT_TEXT",{count:1})}},watch:{conversationId(){this.fetchParticipants()},watchersFromStore(e=[]){this.selectedWatchers=[...e]}},mounted(){this.fetchParticipants(),this.$store.dispatch("agents/get")},methods:{fetchParticipants(){const e=this.conversationId;this.$store.dispatch("conversationWatchers/show",{conversationId:e})},async updateParticipant(e){const t=this.conversationId;let n=this.$t("CONVERSATION_PARTICIPANTS.API.SUCCESS_MESSAGE");try{await this.$store.dispatch("conversationWatchers/update",{conversationId:t,userIds:e})}catch(s){n=(s==null?void 0:s.message)||this.$t("CONVERSATION_PARTICIPANTS.API.ERROR_MESSAGE")}finally{ce(n)}this.fetchParticipants()},onOpenDropdown(){this.showDropDown=!0},onCloseDropdown(){this.showDropDown=!1},onClickItem(e){if(this.watchersList.some(n=>n.id===e.id)){const n=this.watchersList.filter(s=>s.id!==e.id);this.watchersList=[...n]}else this.watchersList=[...this.watchersList,e]},onSelfAssign(){this.watchersList=[...this.selectedWatchers,this.currentUser]}}},FNe={class:"relative bg-white dark:bg-slate-900"},UNe={class:"flex justify-between"},GNe={class:"flex justify-between w-full mb-1"},VNe={key:0,class:"m-0 text-sm total-watchers"},HNe={key:1,class:"m-0 text-sm text-slate-400 dark:text-slate-700"},WNe={class:"flex items-center justify-between"},zNe={key:0,class:"m-0 text-sm text-slate-300 dark:text-slate-300"},jNe={class:"flex items-center justify-between mb-1"},KNe={class:"m-0 overflow-hidden text-sm whitespace-nowrap text-ellipsis text-slate-800 dark:text-slate-100"};function YNe(e,t,n,s,o,a){const i=M("Spinner"),r=M("NextButton"),l=M("ThumbnailGroup"),c=M("MultiselectDropdownItems"),u=qe("tooltip"),d=qe("on-clickaway");return p(),v("div",FNe,[h("div",UNe,[h("div",GNe,[h("div",null,[a.watchersList.length?(p(),v("p",VNe,[e.watchersUiFlas.isFetching?(p(),$(i,{key:0,size:"tiny"})):w("",!0),Re(" "+A(a.totalWatchersText),1)])):(p(),v("p",HNe,A(e.$t("CONVERSATION_PARTICIPANTS.NO_PARTICIPANTS_TEXT")),1))]),re(y(r,{slate:"",ghost:"",sm:"",icon:"i-lucide-settings",class:"relative -top-1",title:e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),onClick:a.onOpenDropdown},null,8,["title","onClick"]),[[u,e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),void 0,{left:!0}]])])]),h("div",WNe,[y(l,{"more-thumbnails-text":a.moreThumbnailsText,"show-more-thumbnails-count":a.showMoreThumbs,"users-list":a.thumbnailList},null,8,["more-thumbnails-text","show-more-thumbnails-count","users-list"]),a.isUserWatching?(p(),v("p",zNe,A(e.$t("CONVERSATION_PARTICIPANTS.YOU_ARE_WATCHING")),1)):(p(),$(r,{key:1,link:"",xs:"",icon:"i-lucide-arrow-right",class:"!gap-1",label:e.$t("CONVERSATION_PARTICIPANTS.WATCH_CONVERSATION"),onClick:a.onSelfAssign},null,8,["label","onClick"]))]),re((p(),v("div",{class:se([{"dropdown-pane--open":o.showDropDown},"dropdown-pane"])},[h("div",jNe,[h("h4",KNe,A(e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS")),1),y(r,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:a.onCloseDropdown},null,8,["onClick"])]),y(c,{options:s.agentsList,"selected-items":o.selectedWatchers,"has-thumbnail":"",onSelect:a.onClickItem},null,8,["options","selected-items","onSelect"])],2)),[[d,()=>{a.onCloseDropdown()}]])])}const XNe=Ae(BNe,[["render",YNe],["__scopeId","data-v-847efcb9"]]),qNe={components:{EmojiOrIcon:ZA,NextButton:oe},props:{href:{type:String,default:""},icon:{type:String,required:!0},emoji:{type:String,required:!0},value:{type:String,default:""},showCopy:{type:Boolean,default:!1}},methods:{async onCopy(e){e.preventDefault(),await Go(this.value),ce(this.$t("CONTACT_PANEL.COPY_SUCCESSFUL"))}}},ZNe={class:"w-full h-5 ltr:-ml-1 rtl:-mr-1"},QNe=["href"],JNe=["title"],ewe={key:1,class:"text-sm text-n-slate-11"},twe={key:1,class:"flex items-center gap-2 text-n-slate-11"},nwe={key:0,class:"overflow-hidden text-sm whitespace-nowrap text-ellipsis"},swe={key:1,class:"text-sm text-n-slate-11"};function awe(e,t,n,s,o,a){const i=M("EmojiOrIcon"),r=M("NextButton"),l=qe("dompurify-html");return p(),v("div",ZNe,[n.href?(p(),v("a",{key:0,href:n.href,class:"flex items-center gap-2 text-n-slate-11 hover:underline"},[y(i,{icon:n.icon,emoji:n.emoji,"icon-size":"14",class:"flex-shrink-0 ltr:ml-1 rtl:mr-1"},null,8,["icon","emoji"]),n.value?(p(),v("span",{key:0,class:"overflow-hidden text-sm whitespace-nowrap text-ellipsis",title:n.value},A(n.value),9,JNe)):(p(),v("span",ewe,A(e.$t("CONTACT_PANEL.NOT_AVAILABLE")),1)),n.showCopy?(p(),$(r,{key:2,ghost:"",xs:"",slate:"",class:"ltr:-ml-1 rtl:-mr-1",icon:"i-lucide-clipboard",onClick:a.onCopy},null,8,["onClick"])):w("",!0)],8,QNe)):(p(),v("div",twe,[y(i,{icon:n.icon,emoji:n.emoji,"icon-size":"14",class:"flex-shrink-0 ltr:ml-1 rtl:mr-1"},null,8,["icon","emoji"]),n.value?re((p(),v("span",nwe,null,512)),[[l,n.value]]):(p(),v("span",swe,A(e.$t("CONTACT_PANEL.NOT_AVAILABLE")),1))]))])}const owe=Ae(qNe,[["render",awe]]),iwe={props:{socialProfiles:{type:Object,default:()=>({})}},data(){return{socialMediaLinks:[{key:"facebook",icon:"facebook",link:"https://facebook.com/"},{key:"twitter",icon:"twitter",link:"https://twitter.com/"},{key:"linkedin",icon:"linkedin",link:"https://linkedin.com/"},{key:"github",icon:"github",link:"https://github.com/"},{key:"instagram",icon:"instagram",link:"https://instagram.com/"},{key:"telegram",icon:"telegram",link:"https://t.me/"}]}},computed:{availableProfiles(){return this.socialMediaLinks.filter(e=>!!this.socialProfiles[e.key])}}},rwe={key:0,class:"flex items-end gap-3 mx-0 my-2"},lwe=["href"];function cwe(e,t,n,s,o,a){const i=M("fluent-icon");return a.availableProfiles.length?(p(),v("div",rwe,[(p(!0),v(pe,null,Ne(a.availableProfiles,r=>(p(),v("a",{key:r.key,href:`${r.link}${n.socialProfiles[r.key]}`,target:"_blank",rel:"noopener noreferrer nofollow"},[y(i,{icon:`brand-${r.key}`,size:"16",class:"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"},null,8,["icon"])],8,lwe))),128))])):w("",!0)}const uwe=Ae(iwe,[["render",cwe]]),dwe={components:{NextButton:oe},props:{contact:{type:Object,default:()=>({})},inProgress:{type:Boolean,default:!1},onSubmit:{type:Function,default:()=>{}}},emits:["cancel","success"],setup(){return{v$:bt()}},data(){return{countries:xa,companyName:"",description:"",email:"",name:"",phoneNumber:"",activeDialCode:"",avatarFile:null,avatarUrl:"",country:{id:"",name:""},city:"",socialProfileUserNames:{facebook:"",twitter:"",linkedin:"",github:""},socialProfileKeys:[{key:"facebook",prefixURL:"https://facebook.com/"},{key:"twitter",prefixURL:"https://twitter.com/"},{key:"linkedin",prefixURL:"https://linkedin.com/"},{key:"github",prefixURL:"https://github.com/"}]}},validations:{name:{required:Ye},description:{},email:{email:Ii},companyName:{},phoneNumber:{},bio:{}},computed:{parsePhoneNumber(){return rd(this.phoneNumber)},isPhoneNumberNotValid(){return this.phoneNumber!==""?!F_(this.phoneNumber,this.activeDialCode)||(this.phoneNumber!==""?this.activeDialCode==="":!1):!1},phoneNumberError(){return this.activeDialCode===""?this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DIAL_CODE_ERROR"):F_(this.phoneNumber,this.activeDialCode)?"":this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.ERROR")},setPhoneNumber(){return this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode?this.phoneNumber:this.phoneNumber===""&&this.activeDialCode!==""?"":this.activeDialCode?`${this.activeDialCode}${this.phoneNumber}`:""}},watch:{contact(){this.setContactObject()}},mounted(){this.setContactObject(),this.setDialCode()},methods:{onCancel(){this.$emit("cancel")},onSuccess(){this.$emit("success")},countryNameWithCode({name:e,id:t}){return t?!e&&!t?"":`${e} (${t})`:e},setDialCode(){if(this.phoneNumber!==""&&this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode){const e=this.parsePhoneNumber.countryCallingCode;this.activeDialCode=`+${e}`}},setContactObject(){const{email:e,phone_number:t,name:n}=this.contact,s=this.contact.additional_attributes||{};this.name=n||"",this.email=e||"",this.phoneNumber=t||"",this.companyName=s.company_name||"",this.country={id:s.country_code||"",name:s.country||this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")},this.city=s.city||"",this.description=s.description||"",this.avatarUrl=this.contact.thumbnail||"";const{social_profiles:o={},screen_name:a}=s;this.socialProfileUserNames={twitter:o.twitter||a||"",facebook:o.facebook||"",linkedin:o.linkedin||"",github:o.github||"",instagram:o.instagram||""}},getContactObject(){this.country===null&&(this.country={id:"",name:""});const e={id:this.contact.id,name:this.name,email:this.email,phone_number:this.setPhoneNumber,additional_attributes:{...this.contact.additional_attributes,description:this.description,company_name:this.companyName,country_code:this.country.id,country:this.country.name===this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")?"":this.country.name,city:this.city,social_profiles:this.socialProfileUserNames}};return this.avatarFile&&(e.avatar=this.avatarFile,e.isFormData=!0),e},setPhoneCode(e){if(this.phoneNumber!==""&&this.parsePhoneNumber){const t=this.parsePhoneNumber.countryCallingCode;if(t===e)return;this.activeDialCode=`+${t}`;const n=this.phoneNumber.replace(`+${t}`,`${e}`);this.phoneNumber=n}else this.activeDialCode=e},async handleSubmit(){if(this.v$.$touch(),!(this.v$.$invalid||this.isPhoneNumberNotValid))try{await this.onSubmit(this.getContactObject()),this.onSuccess(),ce(this.$t("CONTACT_FORM.SUCCESS_MESSAGE"))}catch(e){e instanceof Oc?e.data.includes("email")?ce(this.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.DUPLICATE")):e.data.includes("phone_number")&&ce(this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):e instanceof nl?ce(e.data):ce(this.$t("CONTACT_FORM.ERROR_MESSAGE"))}},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{this.contact&&this.contact.id&&(await this.$store.dispatch("contacts/deleteAvatar",this.contact.id),ce(this.$t("CONTACT_FORM.DELETE_AVATAR.API.SUCCESS_MESSAGE"))),this.avatarFile=null,this.avatarUrl="",this.activeDialCode=""}catch(e){ce(e.message?e.message:this.$t("CONTACT_FORM.DELETE_AVATAR.API.ERROR_MESSAGE"))}}}},pwe={class:"w-full"},hwe={class:"w-full"},mwe=["placeholder"],fwe=["placeholder"],gwe={key:0,class:"message"},_we={class:"w-full"},vwe=["placeholder"],bwe={class:"w-full"},Ewe={key:0,class:"message"},Twe={key:0,class:"relative mx-0 mt-0 mb-2.5 p-2 rounded-md text-sm border border-solid border-yellow-500 text-yellow-700 dark:border-yellow-700 bg-yellow-200/60 dark:bg-yellow-200/20 dark:text-yellow-400"},ywe={class:"w-full"},Swe={class:"w-full"},Awe={class:"flex items-center h-10 px-2 text-sm border-solid bg-slate-50 border-y ltr:border-l rtl:border-r ltr:rounded-l-md rtl:rounded-r-md dark:bg-slate-700 text-slate-800 dark:text-slate-100 border-slate-200 dark:border-slate-600"},Iwe=["onUpdate:modelValue"],Cwe={class:"flex flex-row justify-start w-full gap-2 px-0 py-2"};function Owe(e,t,n,s,o,a){const i=M("woot-avatar-uploader"),r=M("woot-phone-input"),l=M("woot-input"),c=M("multiselect"),u=M("NextButton");return p(),v("form",{class:"w-full px-8 pt-6 pb-8 contact--form",onSubmit:t[10]||(t[10]=Fe((...d)=>a.handleSubmit&&a.handleSubmit(...d),["prevent"]))},[h("div",null,[h("div",pwe,[y(i,{label:e.$t("CONTACT_FORM.FORM.AVATAR.LABEL"),src:o.avatarUrl,"username-avatar":o.name,"delete-avatar":!!o.avatarUrl,class:"settings-item",onOnAvatarSelect:a.handleImageUpload,onOnAvatarDelete:a.handleAvatarDelete},null,8,["label","src","username-avatar","delete-avatar","onOnAvatarSelect","onOnAvatarDelete"])])]),h("div",null,[h("div",hwe,[h("label",{class:se({error:s.v$.name.$error})},[Re(A(e.$t("CONTACT_FORM.FORM.NAME.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.name=d),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.NAME.PLACEHOLDER"),onInput:t[1]||(t[1]=(...d)=>s.v$.name.$touch&&s.v$.name.$touch(...d))},null,40,mwe),[[mt,o.name]])],2),h("label",{class:se({error:s.v$.email.$error})},[Re(A(e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.LABEL"))+" ",1),re(h("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>o.email=d),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.PLACEHOLDER"),onInput:t[3]||(t[3]=(...d)=>s.v$.email.$touch&&s.v$.email.$touch(...d))},null,40,fwe),[[mt,o.email]]),s.v$.email.$error?(p(),v("span",gwe,A(e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.ERROR")),1)):w("",!0)],2)])]),h("div",_we,[h("label",{class:se({error:s.v$.description.$error})},[Re(A(e.$t("CONTACT_FORM.FORM.BIO.LABEL"))+" ",1),re(h("textarea",{"onUpdate:modelValue":t[4]||(t[4]=d=>o.description=d),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.BIO.PLACEHOLDER"),onInput:t[5]||(t[5]=(...d)=>s.v$.description.$touch&&s.v$.description.$touch(...d))},null,40,vwe),[[mt,o.description]])],2)]),h("div",null,[h("div",bwe,[h("label",{class:se({error:a.isPhoneNumberNotValid})},[Re(A(e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.LABEL"))+" ",1),y(r,{modelValue:o.phoneNumber,"onUpdate:modelValue":t[6]||(t[6]=d=>o.phoneNumber=d),value:o.phoneNumber,error:a.isPhoneNumberNotValid,placeholder:e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.PLACEHOLDER"),onBlur:s.v$.phoneNumber.$touch,onSetCode:a.setPhoneCode},null,8,["modelValue","value","error","placeholder","onBlur","onSetCode"]),a.isPhoneNumberNotValid?(p(),v("span",Ewe,A(a.phoneNumberError),1)):w("",!0)],2),a.isPhoneNumberNotValid||!o.phoneNumber?(p(),v("div",Twe,A(e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.HELP")),1)):w("",!0)])]),y(l,{modelValue:o.companyName,"onUpdate:modelValue":t[7]||(t[7]=d=>o.companyName=d),class:"w-full",label:e.$t("CONTACT_FORM.FORM.COMPANY_NAME.LABEL"),placeholder:e.$t("CONTACT_FORM.FORM.COMPANY_NAME.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),h("div",null,[h("div",ywe,[h("label",null,A(e.$t("CONTACT_FORM.FORM.COUNTRY.LABEL")),1),y(c,{modelValue:o.country,"onUpdate:modelValue":t[8]||(t[8]=d=>o.country=d),"track-by":"id",label:"name",placeholder:e.$t("CONTACT_FORM.FORM.COUNTRY.PLACEHOLDER"),"selected-label":"","select-label":e.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_PLACEHOLDER"),"deselect-label":e.$t("CONTACT_FORM.FORM.COUNTRY.REMOVE"),"custom-label":a.countryNameWithCode,"max-height":160,options:o.countries,"allow-empty":"","option-height":104},null,8,["modelValue","placeholder","select-label","deselect-label","custom-label","options"])])]),y(l,{modelValue:o.city,"onUpdate:modelValue":t[9]||(t[9]=d=>o.city=d),class:"w-full",label:e.$t("CONTACT_FORM.FORM.CITY.LABEL"),placeholder:e.$t("CONTACT_FORM.FORM.CITY.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),h("div",Swe,[h("label",null,A(e.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.SOCIAL_PROFILES")),1),(p(!0),v(pe,null,Ne(o.socialProfileKeys,d=>(p(),v("div",{key:d.key,class:"flex items-stretch w-full mb-4"},[h("span",Awe,A(d.prefixURL),1),re(h("input",{"onUpdate:modelValue":m=>o.socialProfileUserNames[d.key]=m,class:"input-group-field ltr:!rounded-l-none rtl:rounded-r-none !mb-0",type:"text"},null,8,Iwe),[[mt,o.socialProfileUserNames[d.key]]])]))),128))]),h("div",Cwe,[y(u,{type:"submit",label:e.$t("CONTACT_FORM.FORM.SUBMIT"),"is-loading":n.inProgress},null,8,["label","is-loading"]),y(u,{faded:"",slate:"",type:"reset",label:e.$t("CONTACT_FORM.FORM.CANCEL"),onClick:Fe(a.onCancel,["prevent"])},null,8,["label","onClick"])])],32)}const Nwe=Ae(dwe,[["render",Owe],["__scopeId","data-v-9842280c"]]),wwe={components:{ContactForm:Nwe},props:{show:{type:Boolean,default:!1},contact:{type:Object,default:()=>({})}},emits:["cancel","update:show"],computed:{...lt({uiFlags:"contacts/getUIFlags"}),localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{onCancel(){this.$emit("cancel")},onSuccess(){this.$emit("cancel")},async onSubmit(e){await this.$store.dispatch("contacts/update",e),await this.$store.dispatch("contacts/fetchContactableInbox",this.contact.id)}}},Rwe={class:"flex flex-col h-auto overflow-auto"};function xwe(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("ContactForm"),l=M("woot-modal");return p(),$(l,{show:a.localShow,"onUpdate:show":t[0]||(t[0]=c=>a.localShow=c),"on-close":a.onCancel,"modal-type":"right-aligned"},{default:K(()=>[h("div",Rwe,[y(i,{"header-title":`${e.$t("EDIT_CONTACT.TITLE")} - ${n.contact.name||n.contact.email}`,"header-content":e.$t("EDIT_CONTACT.DESC")},null,8,["header-title","header-content"]),y(r,{contact:n.contact,"in-progress":e.uiFlags.isUpdating,"on-submit":a.onSubmit,onSuccess:a.onSuccess,onCancel:a.onCancel},null,8,["contact","in-progress","on-submit","onSuccess","onCancel"])])]),_:1},8,["show","on-close"])}const $we=Ae(wwe,[["render",xwe]]),Mwe={props:{primaryContactName:{type:String,default:""},parentContactName:{type:String,default:""}}},Lwe={key:0,class:"my-4 relative p-2.5 border rounded-[4px] text-slate-800 dark:text-slate-100 border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800"},kwe={class:"text-base font-medium text-slate-900 dark:text-white"},Dwe={class:"ml-0 list-none"};function Pwe(e,t,n,s,o,a){const i=qe("dompurify-html");return n.parentContactName?(p(),v("div",Lwe,[h("h5",kwe,A(e.$t("MERGE_CONTACTS.SUMMARY.TITLE")),1),h("ul",Dwe,[h("li",null,[t[0]||(t[0]=h("span",{class:"inline-block mr-1"},"❌",-1)),re(h("span",null,null,512),[[i,e.$t("MERGE_CONTACTS.SUMMARY.DELETE_WARNING",{primaryContactName:n.primaryContactName})]])]),h("li",null,[t[1]||(t[1]=h("span",{class:"inline-block mr-1"},"✅",-1)),re(h("span",null,null,512),[[i,e.$t("MERGE_CONTACTS.SUMMARY.ATTRIBUTE_WARNING",{primaryContactName:n.primaryContactName,parentContactName:n.parentContactName})]])])])])):w("",!0)}const Bwe=Ae(Mwe,[["render",Pwe]]),Fwe={components:{Thumbnail:Hn},props:{name:{type:String,default:""},thumbnail:{type:String,default:""},email:{type:String,default:""},phoneNumber:{type:String,default:""},identifier:{type:[String,Number],required:!0}}},Uwe={class:"option-item--user"},Gwe={class:"option__user-data"},Vwe={class:"option__title"},Hwe={key:0,class:"user-identifier"},Wwe={class:"option__body"},zwe={key:0,class:"email-icon-wrap"},jwe={key:1,class:"phone-icon-wrap"},Kwe={key:2};function Ywe(e,t,n,s,o,a){const i=M("Thumbnail"),r=M("fluent-icon");return p(),v("div",Uwe,[y(i,{src:n.thumbnail,size:"28px",username:n.name},null,8,["src","username"]),h("div",Gwe,[h("h5",Vwe,[Re(A(n.name)+" ",1),n.identifier?(p(),v("span",Hwe,A(e.$t("MERGE_CONTACTS.DROPDOWN_ITEM.ID",{identifier:n.identifier})),1)):w("",!0)]),h("p",Wwe,[n.email?(p(),v("span",zwe,[y(r,{class:"merge-contact--icon",icon:"mail",size:"12"}),Re(" "+A(n.email),1)])):w("",!0),n.phoneNumber?(p(),v("span",jwe,[y(r,{class:"merge-contact--icon",icon:"call",size:"12"}),Re(" "+A(n.phoneNumber),1)])):w("",!0),!n.phoneNumber&&!n.email?(p(),v("span",Kwe,A("---"))):w("",!0)])])])}const Xwe=Ae(Fwe,[["render",Ywe],["__scopeId","data-v-8c9aead7"]]),qwe={components:{MergeContactSummary:Bwe,ContactDropdownItem:Xwe,NextButton:oe},props:{primaryContact:{type:Object,required:!0},isSearching:{type:Boolean,default:!1},isMerging:{type:Boolean,default:!1},searchResults:{type:Array,default:()=>[]}},emits:["search","submit","cancel"],setup(){return{v$:bt()}},validations:{primaryContact:{required:Ye},parentContact:{required:Ye}},data(){return{parentContact:void 0}},computed:{parentContactName(){return this.parentContact?this.parentContact.name:""}},methods:{searchChange(e){this.$emit("search",e)},onSubmit(){this.v$.$touch(),!this.v$.$invalid&&this.$emit("submit",this.parentContact.id)},onCancel(){this.$emit("cancel")}}},Zwe={class:"multiselect__label"},Qwe={key:0,class:"message"},Jwe={class:"flex multiselect-wrap--medium"},eRe={class:"w-8 relative text-base text-slate-100 dark:text-slate-600 after:content-[''] after:h-12 after:w-0 ltr:after:left-4 rtl:after:right-4 after:absolute after:border-l after:border-solid after:border-slate-100 after:dark:border-slate-600 before:content-[''] before:h-0 before:w-4 ltr:before:left-4 rtl:before:right-4 before:top-12 before:absolute before:border-b before:border-solid before:border-slate-100 before:dark:border-slate-600"},tRe={class:"flex flex-col w-full ltr:pl-8 rtl:pr-8"},nRe={class:"multiselect__label"},sRe={class:"flex justify-end gap-2 mt-6"};function aRe(e,t,n,s,o,a){const i=M("woot-label"),r=M("ContactDropdownItem"),l=M("multiselect"),c=M("fluent-icon"),u=M("MergeContactSummary"),d=M("NextButton");return p(),v("form",{onSubmit:t[1]||(t[1]=Fe((...m)=>a.onSubmit&&a.onSubmit(...m),["prevent"]))},[h("div",null,[h("div",null,[h("div",{class:se(["mt-1 multiselect-wrap--medium",{error:s.v$.parentContact.$error}])},[h("label",Zwe,[Re(A(e.$t("MERGE_CONTACTS.PARENT.TITLE"))+" ",1),y(i,{title:e.$t("MERGE_CONTACTS.PARENT.HELP_LABEL"),"color-scheme":"success",small:"",class:"ml-2"},null,8,["title"])]),y(l,{modelValue:o.parentContact,"onUpdate:modelValue":t[0]||(t[0]=m=>o.parentContact=m),options:n.searchResults,label:"name","track-by":"id","internal-search":!1,"clear-on-select":!1,"show-labels":!1,placeholder:e.$t("MERGE_CONTACTS.PARENT.PLACEHOLDER"),"allow-empty":"",loading:n.isSearching,"max-height":150,"open-direction":"top",onSearchChange:a.searchChange},{singleLabel:K(m=>[y(r,{thumbnail:m.option.thumbnail,identifier:m.option.id,name:m.option.name,email:m.option.email,"phone-number":m.option.phone_number},null,8,["thumbnail","identifier","name","email","phone-number"])]),option:K(m=>[y(r,{thumbnail:m.option.thumbnail,identifier:m.option.id,name:m.option.name,email:m.option.email,"phone-number":m.option.phone_number},null,8,["thumbnail","identifier","name","email","phone-number"])]),noResult:K(()=>[h("span",null,A(e.$t("AGENT_MGMT.SEARCH.NO_RESULTS")),1)]),_:1},8,["modelValue","options","placeholder","loading","onSearchChange"]),s.v$.parentContact.$error?(p(),v("span",Qwe,A(e.$t("MERGE_CONTACTS.FORM.CHILD_CONTACT.ERROR")),1)):w("",!0)],2)]),h("div",Jwe,[h("div",eRe,[y(c,{icon:"arrow-up",class:"absolute -top-1 ltr:left-2 rtl:right-2",size:"17"})]),h("div",tRe,[h("label",nRe,[Re(A(e.$t("MERGE_CONTACTS.PRIMARY.TITLE"))+" ",1),y(i,{title:e.$t("MERGE_CONTACTS.PRIMARY.HELP_LABEL"),"color-scheme":"alert",small:"",class:"ml-2"},null,8,["title"])]),y(l,{"model-value":n.primaryContact,disabled:"",options:[],"show-labels":!1,label:"name","track-by":"id"},{singleLabel:K(m=>[y(r,{thumbnail:m.option.thumbnail,name:m.option.name,identifier:m.option.id,email:m.option.email,"phone-number":m.option.phoneNumber},null,8,["thumbnail","name","identifier","email","phone-number"])]),_:1},8,["model-value"])])])]),y(u,{"primary-contact-name":n.primaryContact.name,"parent-contact-name":a.parentContactName},null,8,["primary-contact-name","parent-contact-name"]),h("div",sRe,[y(d,{faded:"",slate:"",type:"reset",label:e.$t("MERGE_CONTACTS.FORM.CANCEL"),onClick:Fe(a.onCancel,["prevent"])},null,8,["label","onClick"]),y(d,{type:"submit","is-loading":n.isMerging,label:e.$t("MERGE_CONTACTS.FORM.SUBMIT")},null,8,["is-loading","label"])])],32)}const oRe=Ae(qwe,[["render",aRe],["__scopeId","data-v-f9884f2d"]]),iRe={components:{MergeContact:oRe},props:{show:{type:Boolean,default:!1},primaryContact:{type:Object,required:!0}},emits:["close","update:show"],data(){return{isSearching:!1,searchResults:[]}},computed:{...lt({uiFlags:"contacts/getUIFlags"}),localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{onClose(){this.$emit("close")},async onContactSearch(e){this.isSearching=!0,this.searchResults=[];try{const{data:{payload:t}}=await Nc.search(e);this.searchResults=t.filter(n=>n.id!==this.primaryContact.id)}catch{ce(this.$t("MERGE_CONTACTS.SEARCH.ERROR_MESSAGE"))}finally{this.isSearching=!1}},async onMergeContacts(e){Pt(sr.MERGED_CONTACTS);try{await this.$store.dispatch("contacts/merge",{childId:this.primaryContact.id,parentId:e}),ce(this.$t("MERGE_CONTACTS.FORM.SUCCESS_MESSAGE")),this.onClose()}catch{ce(this.$t("MERGE_CONTACTS.FORM.ERROR_MESSAGE"))}}}};function rRe(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("MergeContact"),l=M("woot-modal");return p(),$(l,{show:a.localShow,"onUpdate:show":t[0]||(t[0]=c=>a.localShow=c),"on-close":a.onClose},{default:K(()=>[y(i,{"header-title":e.$t("MERGE_CONTACTS.TITLE"),"header-content":e.$t("MERGE_CONTACTS.DESCRIPTION")},null,8,["header-title","header-content"]),y(r,{"primary-contact":n.primaryContact,"is-searching":o.isSearching,"is-merging":e.uiFlags.isMerging,"search-results":o.searchResults,onSearch:a.onContactSearch,onCancel:a.onClose,onSubmit:a.onMergeContacts},null,8,["primary-contact","is-searching","is-merging","search-results","onSearch","onCancel","onSubmit"])]),_:1},8,["show","on-close"])}const lRe=Ae(iRe,[["render",rRe]]),zE={"Channel::Email":1,"Channel::Whatsapp":2,"Channel::Sms":3,"Channel::TwilioSms":4,"Channel::WebWidget":5,"Channel::Api":6},nI=({name:e,email:t,channelType:n,phoneNumber:s})=>n===yt.EMAIL?`${e} (${t})`:n===yt.TWILIO||n===yt.WHATSAPP?`${e} (${s})`:e,cRe=({name:e,id:t,email:n,channelType:s,phoneNumber:o,...a})=>({id:t,icon:wc(s,o,"line"),label:nI({name:e,email:n,channelType:s,phoneNumber:o}),action:"inbox",value:t,name:e,email:n,phoneNumber:o,channelType:s,...a}),uRe=(e,t)=>{const n=zE[e.channelType]||999,s=zE[t.channelType]||999;if(n!==s)return n-s;const o=e.name||"",a=t.name||"";return o.localeCompare(a)},dRe=e=>e?e.map(cRe).sort(uRe):[],pRe=e=>{var n;const t=((n=e.match(/^([^@]*)@/))==null?void 0:n[1])||e.split("@")[0];return t.charAt(0).toUpperCase()+t.slice(1)},sI=e=>e.map(t=>({...t.inbox,sourceId:t.sourceId})),jE=(e,t=[])=>!e||!e.length?[]:e.map(n=>{const s=t.find(o=>o.id===n.id)||{};return{...tl(s,{deep:!0}),...n}}),hRe=(e,t)=>{const n=[];return e.forEach(s=>{t?n.push(s.blobSignedId):n.push(s.resource.file)}),n},mRe=({targetInbox:e,selectedContact:t,message:n,subject:s,ccEmails:o,bccEmails:a,currentUser:i,attachedFiles:r=[],directUploadsEnabled:l=!1})=>{const c={inboxId:e.id,sourceId:e.sourceId,contactId:Number(t.id),message:{content:n},assigneeId:i.id};return r!=null&&r.length&&(c.files=hRe(r,l)),s&&(c.mailSubject=s),o&&(c.message.cc_emails=o),a&&(c.message.bcc_emails=a),c},fRe=({targetInbox:e,selectedContact:t,message:n,templateParams:s,currentUser:o})=>({inboxId:e.id,sourceId:e.sourceId,contactId:t.id,message:{content:n,template_params:s},assigneeId:o.id}),gRe=({keys:e=["email"],query:t})=>({payload:e.map(n=>{const s={attribute_key:n,filter_operator:"contains",values:[t],attribute_model:"standard"};return e.findIndex(o=>o===n)!==e.length-1&&(s.query_operator="or"),s})}),_Re=async({keys:e,query:t})=>{const{data:{payload:n}}=await Nc.filter(void 0,"name",gRe({keys:e,query:t})),s=tl(n,{deep:!0});return(s==null?void 0:s.filter(a=>a.phoneNumber||a.email))||[]},vRe=async e=>{const t={name:e.startsWith("+")?e.slice(1):pRe(e),...e.startsWith("+")?{phone_number:e}:{email:e}},{data:{payload:{contact:n}}}=await Nc.create(t);return tl(n,{deep:!0})},bRe=async e=>{const{data:{payload:t=[]}}=await Nc.getContactableInboxes(e),n=tl(t,{deep:!0});return sI(n)},ii={SINGLE:"single",MULTIPLE:"multiple"},ba={EMAIL:"email",TEL:"tel",TEXT:"text"},aI=e=>{if(!e)return!0;try{return $3(e)}catch{return!1}},ERe=e=>{try{const t=x3(e);return{isValid:(t==null?void 0:t.isValid())||!1,formattedValue:(t==null?void 0:t.formatInternational())||e}}catch{return{isValid:!1,formattedValue:e}}},TRe=e=>({newTag:{...e===ba.EMAIL?{email:Ii}:{},...e===ba.TEL?{isValidPhone:aI}:{}}}),yRe=(e,t,n)=>e===ba.TEL?!aI(t):n.$invalid,SRe=(e,t,n)=>{let s=!0,o=e;if(t===ba.EMAIL)s=!n;else if(t===ba.TEL){const{isValid:a,formattedValue:i}=ERe(e);s=a,o=i}return{isValid:s,formattedValue:o}},ARe=(e,t,n)=>({label:e,value:t,...n===ba.EMAIL?{email:t}:{},...n===ba.TEL?{phoneNumber:t}:{},thumbnail:{name:e,src:""},action:"create"}),IRe=({mode:e,tags:t,menuItems:n,newTag:s,isLoading:o,type:a,isNewTagInValidType:i})=>{if(e===ii.SINGLE&&t.length>=1)return[];const r=n.filter(u=>!t.includes(u.label)),l=s==null?void 0:s.trim();if(l&&!t.includes(l)&&!o&&!r.length){const{isValid:u,formattedValue:d}=SRe(l,a,i);if(u)return[ARe(d,l,a)]}return r},CRe=(e,t)=>!(e===ii.SINGLE&&t>=1),ORe=(e,t)=>e.find(n=>n.email===t),NRe={class:"relative flex items-center justify-between w-full gap-3 whitespace-nowrap"},wRe=["for"],RRe=["id","type","placeholder","disabled","onKeydown"],oI={__name:"InlineInput",props:hn({type:{type:String,default:"text"},customInputClass:{type:[String,Object,Array],default:""},customLabelClass:{type:[String,Object,Array],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},disabled:{type:Boolean,default:!1},focusOnMount:{type:Boolean,default:!1}},{modelValue:{type:[String,Number],default:""},modelModifiers:{}}),emits:hn(["enterPress","input","blur","focus"],["update:modelValue"]),setup(e,{expose:t,emit:n}){const s=e,o=n,a=wn(e,"modelValue"),i=X(null),r=()=>{o("enterPress")},l=d=>{o("input",d.target.value),a.value=d.target.value},c=d=>{o("blur",d.target.value)},u=d=>{o("focus",d.target.value)};return dt(()=>{tn(()=>{var d;s.focusOnMount&&((d=i.value)==null||d.focus())})}),t({focus:()=>{var d;return(d=i.value)==null?void 0:d.focus()}}),(d,m)=>(p(),v("div",NRe,[e.label?(p(),v("label",{key:0,for:e.id,class:se([e.customLabelClass,"mb-0.5 text-sm font-medium text-n-slate-12"])},A(e.label),11,wRe)):w("",!0),We(d.$slots,"prefix"),re(h("input",{id:e.id,ref_key:"inlineInputRef",ref:i,"onUpdate:modelValue":m[0]||(m[0]=f=>a.value=f),type:e.type,placeholder:e.placeholder,disabled:e.disabled,class:se([e.customInputClass,"flex w-full reset-base text-sm h-6 !mb-0 border-0 rounded-none outline-none outline-0 bg-transparent dark:bg-transparent placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 disabled:cursor-not-allowed disabled:opacity-50 text-n-slate-12 dark:text-n-slate-12 transition-all duration-500 ease-in-out"]),onInput:l,onFocus:u,onBlur:c,onKeydown:kn(Fe(r,["prevent"]),["enter"])},null,42,RRe),[[Cf,a.value]])]))}},xRe={class:"flex-grow min-w-0 text-sm truncate text-n-slate-12"},$Re=["onClick"],MRe={key:0,class:"relative flex items-center gap-2 flex-1 min-w-[200px] w-full"},Tf={__name:"TagInput",props:hn({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},type:{type:String,default:ba.TEXT},isLoading:{type:Boolean,default:!1},menuItems:{type:Array,default:()=>[],validator:e=>e.every(({action:t,value:n,label:s})=>t&&n&&s)},showDropdown:{type:Boolean,default:!1},mode:{type:String,default:ii.MULTIPLE,validator:e=>[ii.SINGLE,ii.MULTIPLE].includes(e)},focusOnMount:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:hn(["update:modelValue","input","blur","focus","onClickOutside","add","remove"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,o=wn(e,"modelValue"),a=X(null),i=X(n.modelValue),r=X(""),l=X(!0),c=C(()=>TRe(n.type)),u=bt(c,{newTag:r}),d=C(()=>yRe(n.type,r.value,u.value)),m=C(()=>n.mode===ii.SINGLE?l.value&&!i.value.length:l.value||!i.value.length),f=C(()=>n.mode===ii.SINGLE&&i.value.length>=1?!1:n.showDropdown),g=C(()=>IRe({mode:n.mode,tags:i.value,menuItems:n.menuItems,newTag:r.value,isLoading:n.isLoading,type:n.type,isNewTagInValidType:d.value})),T=F=>{const D=ORe(n.menuItems,F);return D?s("add",{value:F,...D}):s("add",{value:F,action:"create"})},S=F=>{var D;i.value.push(F),r.value="",o.value=i.value,(D=a.value)==null||D.focus()},_=async()=>{var D;const F=(D=r.value)==null?void 0:D.trim();if(F){if(!CRe(n.mode,i.value.length)){r.value="";return}if([ba.EMAIL,ba.TEL].includes(n.type)||n.allowCreate){if(!await u.value.$validate())return;T(F)}S(F)}},E=F=>{i.value.splice(F,1),o.value=i.value,s("remove")},b=async({email:F,phoneNumber:D,...V})=>{if(n.mode===ii.SINGLE&&i.value.length>=1||!n.showDropdown)return;const B=n.type==="email";if(r.value=B?F:D,!await u.value.$validate())return;const P=B?{email:F,...V}:{phoneNumber:D,...V};s("add",P),S(F)},I=()=>{var F;s("focus"),(F=a.value)==null||F.focus(),l.value=!0},R=F=>{F.key===","&&(F.preventDefault(),_())},O=()=>{i.value.length&&(l.value=!1),s("onClickOutside")};ct(()=>n.modelValue,F=>{i.value=F}),ct(()=>r.value,async F=>{var D;n.type==="email"&&((D=F==null?void 0:F.trim())==null?void 0:D.length)>2&&await u.value.$validate()});const x=F=>s("input",F),L=F=>s("blur",F);return(F,D)=>re((p(),v("div",{class:"flex flex-wrap w-full gap-2 border border-transparent focus:outline-none",tabindex:"0",onFocus:I,onClick:I},[(p(!0),v(pe,null,Ne(i.value,(V,B)=>(p(),v("div",{key:B,class:"flex items-center justify-center max-w-full gap-1 px-3 py-1 rounded-lg h-7 bg-n-alpha-2"},[h("span",xRe,A(V),1),h("span",{class:"flex-shrink-0 cursor-pointer i-lucide-x size-3.5 text-n-slate-11",onClick:Fe(P=>E(B),["stop"])},null,8,$Re)]))),128)),m.value||f.value?(p(),v("div",MRe,[y(oI,{ref_key:"tagInputRef",ref:a,modelValue:r.value,"onUpdate:modelValue":D[0]||(D[0]=V=>r.value=V),placeholder:e.placeholder,disabled:e.disabled,class:"w-full","focus-on-mount":e.focusOnMount,"custom-input-class":`w-full ${d.value?"!text-n-ruby-9 dark:!text-n-ruby-9":""}`,onEnterPress:_,onFocus:I,onInput:x,onBlur:L,onKeydown:R},null,8,["modelValue","placeholder","disabled","focus-on-mount","custom-input-class"]),f.value?(p(),$(Hs,{key:0,"menu-items":g.value,"is-searching":e.isLoading,class:"left-0 z-[100] top-8 overflow-y-auto max-h-60 w-[inherit] max-w-md dark:!outline-n-slate-5",onAction:b},null,8,["menu-items","is-searching"])):w("",!0)])):w("",!0)],32)),[[N(Co),()=>O()]])}},LRe={class:"relative flex-1 px-4 py-3 overflow-y-visible"},kRe={class:"flex items-baseline w-full gap-3 min-h-7"},DRe={class:"text-sm font-medium text-n-slate-11 whitespace-nowrap"},PRe={key:0,class:"flex items-center gap-1.5 rounded-md bg-n-alpha-2 px-3 min-h-7 min-w-0"},BRe={class:"text-sm truncate text-n-slate-12"},FRe={class:"text-sm truncate text-n-slate-12"},Ru="COMPOSE_NEW_CONVERSATION.FORM.CONTACT_SELECTOR",URe={__name:"ContactSelector",props:{contacts:{type:Array,required:!0},selectedContact:{type:Object,default:null},showContactsDropdown:{type:Boolean,required:!0},isLoading:{type:Boolean,required:!0},isCreatingContact:{type:Boolean,required:!0},contactId:{type:String,default:null},contactableInboxesList:{type:Array,default:()=>[]},showInboxesDropdown:{type:Boolean,required:!0},hasErrors:{type:Boolean,default:!1}},emits:["searchContacts","setSelectedContact","clearSelectedContact","updateDropdown"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(ba.EMAIL),i=C(()=>{var u;return(u=n.contacts)==null?void 0:u.map(({name:d,id:m,thumbnail:f,email:g,...T})=>({id:m,label:g?`${d} (${g})`:d,value:m,thumbnail:{name:d,src:f},...T,name:d,email:g,action:"contact"}))}),r=C(()=>{const{name:u,email:d="",phoneNumber:m=""}=n.selectedContact||{};return d?`${u} (${d})`:m?`${u} (${m})`:u||""}),l=C(()=>n.hasErrors?"[&_input]:placeholder:!text-n-ruby-9 [&_input]:dark:placeholder:!text-n-ruby-9":""),c=u=>{a.value=u.startsWith("+")?ba.TEL:ba.EMAIL,s("searchContacts",u)};return(u,d)=>{var m;return p(),v("div",LRe,[h("div",kRe,[h("label",DRe,A(N(o)(`${Ru}.LABEL`)),1),e.isCreatingContact?(p(),v("div",PRe,[h("span",BRe,A(N(o)(`${Ru}.CONTACT_CREATING`)),1)])):e.selectedContact?(p(),v("div",{key:1,class:se(["flex items-center gap-1.5 rounded-md bg-n-alpha-2 min-h-7 min-w-0",e.contactId?"px-3":"ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1"])},[h("span",FRe,A(e.isCreatingContact?N(o)(`${Ru}.CONTACT_CREATING`):r.value),1),e.contactId?w("",!0):(p(),$(oe,{key:0,variant:"ghost",icon:"i-lucide-x",color:"slate",disabled:e.contactId,size:"xs",onClick:d[0]||(d[0]=f=>s("clearSelectedContact"))},null,8,["disabled"]))],2)):(p(),$(Tf,{key:2,placeholder:N(o)(`${Ru}.TAG_INPUT_PLACEHOLDER`),mode:"single","menu-items":i.value,"show-dropdown":e.showContactsDropdown,"is-loading":e.isLoading,disabled:((m=e.contactableInboxesList)==null?void 0:m.length)>0&&e.showInboxesDropdown,"allow-create":"",type:a.value,class:se(["flex-1 min-h-7",l.value]),"focus-on-mount":"",onInput:c,onOnClickOutside:d[1]||(d[1]=f=>s("updateDropdown","contacts",!1)),onAdd:d[2]||(d[2]=f=>s("setSelectedContact",f)),onRemove:d[3]||(d[3]=f=>s("clearSelectedContact"))},null,8,["placeholder","menu-items","show-dropdown","is-loading","disabled","type","class"]))])])}}},GRe={class:"flex items-center flex-1 w-full gap-3 px-4 py-3 overflow-y-visible"},VRe={class:"mb-0.5 text-sm font-medium text-n-slate-11 whitespace-nowrap"},HRe={key:0,class:"flex items-center gap-1.5 rounded-md bg-n-alpha-2 truncate ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1 h-7 min-w-0"},WRe={class:"text-sm truncate text-n-slate-12"},zRe={key:1,class:"relative flex items-center h-7"},jRe={__name:"InboxSelector",props:{targetInbox:{type:Object,default:null},selectedContact:{type:Object,default:null},showInboxesDropdown:{type:Boolean,required:!0},contactableInboxesList:{type:Array,default:()=>[]},hasErrors:{type:Boolean,default:!1}},emits:["updateInbox","toggleDropdown","handleInboxAction"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=C(()=>nI(n.targetInbox));return(i,r)=>{var l;return p(),v("div",GRe,[h("label",VRe,A(N(o)("COMPOSE_NEW_CONVERSATION.FORM.INBOX_SELECTOR.LABEL")),1),e.targetInbox?(p(),v("div",HRe,[h("span",WRe,A(a.value),1),y(oe,{variant:"ghost",icon:"i-lucide-x",color:"slate",size:"xs",class:"flex-shrink-0",onClick:r[0]||(r[0]=c=>s("updateInbox",null))})])):re((p(),v("div",zRe,[y(oe,{label:N(o)("COMPOSE_NEW_CONVERSATION.FORM.INBOX_SELECTOR.BUTTON"),variant:"link",size:"sm",color:e.hasErrors?"ruby":"slate",disabled:!e.selectedContact,class:"hover:!no-underline",onClick:r[1]||(r[1]=c=>s("toggleDropdown",!e.showInboxesDropdown))},null,8,["label","color","disabled"]),((l=e.contactableInboxesList)==null?void 0:l.length)>0&&e.showInboxesDropdown?(p(),$(Hs,{key:0,"menu-items":e.contactableInboxesList,class:"left-0 z-[100] top-8 overflow-y-auto max-h-60 w-fit max-w-sm dark:!outline-n-slate-5",onAction:r[2]||(r[2]=c=>s("handleInboxAction",c))},null,8,["menu-items"])):w("",!0)])),[[N(Co),()=>s("toggleDropdown",!1)]])])}}},KRe={class:"flex flex-col divide-y divide-n-strong"},YRe={class:"flex items-baseline flex-1 w-full h-8 gap-3 px-4 py-3"},XRe={class:"flex items-baseline flex-1 w-full gap-3 px-4 py-3 min-h-8"},qRe={class:"mb-0.5 text-sm font-medium whitespace-nowrap text-n-slate-11"},ZRe={class:"flex items-center w-full gap-3 min-h-7"},QRe={key:0,class:"flex items-baseline flex-1 w-full gap-3 px-4 py-3 min-h-8"},JRe={class:"mb-0.5 text-sm font-medium whitespace-nowrap text-n-slate-11"},Hi="COMPOSE_NEW_CONVERSATION.FORM.EMAIL_OPTIONS",exe={__name:"EmailOptions",props:hn({contacts:{type:Array,required:!0},showCcEmailsDropdown:{type:Boolean,required:!1},showBccEmailsDropdown:{type:Boolean,required:!1},isLoading:{type:Boolean,default:!1},hasErrors:{type:Boolean,default:!1}},{subject:{type:String,default:""},subjectModifiers:{},ccEmails:{type:String,default:""},ccEmailsModifiers:{},bccEmails:{type:String,default:""},bccEmailsModifiers:{}}),emits:hn(["searchCcEmails","searchBccEmails","updateDropdown"],["update:subject","update:ccEmails","update:bccEmails"]),setup(e,{emit:t}){const n=e,s=t,o=X(!1),a=()=>{o.value=!o.value},i=wn(e,"subject"),r=wn(e,"ccEmails"),l=wn(e,"bccEmails"),{t:c}=Me(),u=C(()=>n.ccEmails?n.ccEmails.split(",").map(S=>S.trim()):[]),d=C(()=>n.bccEmails?n.bccEmails.split(",").map(S=>S.trim()):[]),m=C(()=>{var S;return(S=n.contacts)==null?void 0:S.map(({name:_,id:E,email:b})=>({id:E,label:b,email:b,thumbnail:{name:_,src:""},value:E,action:"email"}))}),f=S=>{r.value=S.join(",")},g=S=>{l.value=S.join(",")},T=C(()=>n.hasErrors?"placeholder:!text-n-ruby-9 dark:placeholder:!text-n-ruby-9":"");return(S,_)=>(p(),v("div",KRe,[h("div",YRe,[y(oI,{modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=E=>i.value=E),placeholder:N(c)(`${Hi}.SUBJECT_PLACEHOLDER`),label:N(c)(`${Hi}.SUBJECT_LABEL`),"focus-on-mount":"","custom-input-class":T.value},null,8,["modelValue","placeholder","label","custom-input-class"])]),h("div",XRe,[h("label",qRe,A(N(c)(`${Hi}.CC_LABEL`)),1),h("div",ZRe,[y(Tf,{"model-value":u.value,placeholder:N(c)(`${Hi}.CC_PLACEHOLDER`),"menu-items":m.value,"show-dropdown":e.showCcEmailsDropdown,"is-loading":e.isLoading,type:"email",class:"flex-1 min-h-7",onFocus:_[1]||(_[1]=E=>s("updateDropdown","cc",!0)),onInput:_[2]||(_[2]=E=>s("searchCcEmails",E)),onOnClickOutside:_[3]||(_[3]=E=>s("updateDropdown","cc",!1)),"onUpdate:modelValue":f},null,8,["model-value","placeholder","menu-items","show-dropdown","is-loading"]),y(oe,{label:N(c)(`${Hi}.BCC_BUTTON`),variant:"ghost",size:"sm",color:"slate",class:"flex-shrink-0",onClick:a},null,8,["label"])])]),o.value?(p(),v("div",QRe,[h("label",JRe,A(N(c)(`${Hi}.BCC_LABEL`)),1),y(Tf,{"model-value":d.value,placeholder:N(c)(`${Hi}.BCC_PLACEHOLDER`),"menu-items":m.value,"show-dropdown":e.showBccEmailsDropdown,"is-loading":e.isLoading,type:"email",class:"flex-1 min-h-7","focus-on-mount":"",onFocus:_[4]||(_[4]=E=>s("updateDropdown","bcc",!0)),onInput:_[5]||(_[5]=E=>s("searchBccEmails",E)),onOnClickOutside:_[6]||(_[6]=E=>s("updateDropdown","bcc",!1)),"onUpdate:modelValue":g},null,8,["model-value","placeholder","menu-items","show-dropdown","is-loading"])])):w("",!0)]))}},txe={__name:"MessageEditor",props:hn({isEmailOrWebWidgetInbox:{type:Boolean,required:!0},hasErrors:{type:Boolean,default:!1},hasAttachments:{type:Boolean,default:!1},sendWithSignature:{type:Boolean,default:!1},messageSignature:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,{t:n}=Me(),s=wn(e,"modelValue"),o=X({hasSlashCommand:!1,showMentions:!1,mentionSearchKey:""}),a=C(()=>Qi(t.messageSignature));ct(s,l=>{if(t.isEmailOrWebWidgetInbox)return;const c=l?uo(l,a.value):"",u=c.startsWith("/");o.value={...o.value,hasSlashCommand:u,showMentions:u,mentionSearchKey:u?c.slice(1):""}},{immediate:!0});const i=()=>{o.value.showMentions=!1},r=async l=>{const c=t.sendWithSignature?li(l,a.value):l;await tn(),s.value=c};return(l,c)=>{const u=qe("on-clickaway");return p(),v("div",{class:se(["flex-1 h-full",[!e.hasAttachments&&"min-h-[200px]"]])},[e.isEmailOrWebWidgetInbox?(p(),$(_a,{key:0,modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=d=>s.value=d),placeholder:N(n)("COMPOSE_NEW_CONVERSATION.FORM.MESSAGE_EDITOR.PLACEHOLDER"),class:se(["[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4 [&>div]:!bg-transparent h-full [&_.ProseMirror-woot-style]:!max-h-[200px]",e.hasErrors?"[&_.empty-node]:before:!text-n-ruby-9 [&_.empty-node]:dark:before:!text-n-ruby-9":""]),"enable-variables":"","show-character-count":!1},null,8,["modelValue","placeholder","class"])):(p(),$(Xd,{key:1,modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=d=>s.value=d),placeholder:N(n)("COMPOSE_NEW_CONVERSATION.FORM.MESSAGE_EDITOR.PLACEHOLDER"),class:"!px-0 [&>div]:!px-4 [&>div]:!border-transparent [&>div]:!bg-transparent","custom-text-area-class":e.hasErrors?"placeholder:!text-n-ruby-9 dark:placeholder:!text-n-ruby-9":"","auto-height":"","allow-signature":"",signature:e.messageSignature,"send-with-signature":e.sendWithSignature},{default:K(()=>[o.value.showMentions&&o.value.hasSlashCommand?re((p(),$(Eg,{key:0,class:"normal-editor__canned-box","search-key":o.value.mentionSearchKey,onReplace:r},null,8,["search-key"])),[[u,i]]):w("",!0)]),_:1},8,["modelValue","placeholder","custom-text-area-class","signature","send-with-signature"]))],2)}}},nxe=({isATwilioSMSChannel:e,attachFile:t})=>{const{t:n}=Me(),s=Oe("getCurrentAccountId"),o=Oe("getCurrentUser"),a=Oe("getSelectedChat"),i=Oe("globalConfig/get"),r=C(()=>e?xm:$m),l=d=>{d&&(nc(d,r.value)?new Rf.DirectUpload(d.file,`/api/v1/accounts/${s.value}/conversations/${a.value.id}/direct_uploads`,{directUploadWillCreateBlobWithXHR:f=>{f.setRequestHeader("api_access_token",o.value.access_token)}}).create((f,g)=>{f?ce(f):t({file:d,blob:g})}):ce(n("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:r.value})))},c=d=>{d&&(nc(d,r.value)?t({file:d}):ce(n("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:r.value})))};return{onFileUpload:d=>{i.value.directUploadsEnabled?l(d):c(d)}}},sxe={class:"absolute top-full mt-1.5 max-h-[30rem] overflow-y-auto left-0 flex flex-col gap-4 px-4 pt-6 pb-5 items-start w-[28.75rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},axe={class:"text-sm text-n-slate-12"},oxe=["innerHTML"],ixe={key:0,class:"text-sm font-medium text-n-slate-12"},rxe={class:"flex items-center h-8 text-sm min-w-6 ltr:text-left rtl:text-right text-n-slate-10"},lxe={class:"flex items-end justify-between w-full gap-3 h-14"},cxe={__name:"WhatsappTemplateParser",props:{template:{type:Object,required:!0}},emits:["sendMessage","back"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X({}),i=C(()=>{var S;return((S=n.template)==null?void 0:S.name)||""}),r=C(()=>{var S,_;return(_=(S=n.template)==null?void 0:S.components)==null?void 0:_.find(E=>E.type==="BODY").text}),l=S=>S.replace(/{{|}}/g,""),c=C(()=>r.value.replace(/{{([^}]+)}}/g,(S,_)=>{const E=l(_);return a.value[E]||`{{${_}}}`})),u=C(()=>(r.value.match(/{{([^}]+)}}/g)||[]).reduce((_,E)=>{const b=l(E),I=a.value[b]||E;return _.replace(E,`<span class="break-all text-n-slate-12">${I}</span>`)},r.value)),d=C(()=>{const S={};return Object.keys(a.value).forEach(_=>{S[_]={required:qu(!0)}}),{processedParams:S}}),m=bt(d,{processedParams:a}),f=S=>{var _;return(_=m.value.processedParams[S])!=null&&_.$error?"error":"info"},g=()=>{const S=r.value.match(/{{([^}]+)}}/g);if(!S)return;const _=S.map(E=>l(E));a.value=_.reduce((E,b)=>(E[b]="",E),{})},T=async()=>{if(!await m.value.$validate())return;const _={message:c.value,templateParams:{name:n.template.name,category:n.template.category,language:n.template.language,namespace:n.template.namespace,processed_params:a.value}};s("sendMessage",_)};return dt(()=>{g()}),(S,_)=>(p(),v("div",sxe,[h("span",axe,A(N(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.TEMPLATE_NAME",{templateName:i.value})),1),h("p",{class:"mb-0 text-sm text-n-slate-11",innerHTML:u.value},null,8,oxe),Object.keys(a.value).length?(p(),v("span",ixe,A(N(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.VARIABLES")),1)):w("",!0),(p(!0),v(pe,null,Ne(a.value,(E,b)=>(p(),v("div",{key:b,class:"flex items-center w-full gap-2"},[h("span",rxe,A(b),1),y(_n,{modelValue:a.value[b],"onUpdate:modelValue":I=>a.value[b]=I,"custom-input-class":"!h-8 w-full !bg-transparent",class:"w-full","message-type":f(b)},null,8,["modelValue","onUpdate:modelValue","message-type"])]))),128)),h("div",lxe,[y(oe,{label:N(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.BACK"),color:"slate",variant:"faded",class:"w-full font-medium",onClick:_[0]||(_[0]=E=>s("back"))},null,8,["label"]),y(oe,{label:N(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.SEND_MESSAGE"),class:"w-full font-medium",onClick:T},null,8,["label"])])]))}},uxe={class:"relative"},dxe={key:0,class:"absolute top-full mt-1.5 max-h-96 overflow-y-auto left-0 flex flex-col gap-2 p-4 items-center w-[21.875rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},pxe={class:"relative w-full"},hxe=["placeholder"],mxe=["onClick"],fxe={class:"text-sm text-n-slate-12"},gxe={class:"mb-0 text-xs leading-5 text-n-slate-11 line-clamp-2"},_xe={key:0,class:"w-full pt-2 text-sm text-n-slate-11"},vxe={__name:"WhatsAppOptions",props:{messageTemplates:{type:Array,default:()=>[]}},emits:["sendMessage"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=["DOCUMENT","IMAGE","VIDEO"],i=X(""),r=X(null),l=X(!1),c=C(()=>(Array.isArray(n.messageTemplates)?n.messageTemplates:[]).filter(_=>{var E;return((E=_==null?void 0:_.status)==null?void 0:E.toLowerCase())==="approved"}).filter(_=>{var E;return(E=_==null?void 0:_.components)==null?void 0:E.every(b=>!a.includes(b.format))})),u=C(()=>c.value.filter(S=>S.name.toLowerCase().includes(i.value.toLowerCase()))),d=S=>S.components.find(_=>_.type==="BODY").text,m=()=>{i.value="",l.value=!l.value},f=S=>{r.value=S,l.value=!1},g=()=>{r.value=null,l.value=!0},T=S=>{s("sendMessage",S),r.value=null};return(S,_)=>(p(),v("div",uxe,[y(oe,{icon:"i-ri-whatsapp-line",label:N(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.LABEL"),color:"slate",size:"sm",disabled:r.value,class:"!text-xs font-medium",onClick:m},null,8,["label","disabled"]),l.value?(p(),v("div",dxe,[h("div",pxe,[_[1]||(_[1]=h("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),re(h("input",{"onUpdate:modelValue":_[0]||(_[0]=E=>i.value=E),type:"search",placeholder:N(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.SEARCH_PLACEHOLDER"),class:"w-full h-8 py-2 pl-10 pr-2 text-sm reset-base outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,hxe),[[mt,i.value]])]),(p(!0),v(pe,null,Ne(u.value,E=>(p(),v("div",{key:E.id,class:"flex flex-col w-full gap-2 p-2 rounded-lg cursor-pointer dark:hover:bg-n-alpha-3 hover:bg-n-alpha-1",onClick:b=>f(E)},[h("span",fxe,A(E.name),1),h("p",gxe,A(d(E)),1)],8,mxe))),128)),u.value.length===0?(p(),v("p",_xe,A(N(o)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.EMPTY_STATE")),1)):w("",!0)])):w("",!0),r.value?(p(),$(cxe,{key:1,template:r.value,onSendMessage:T,onBack:g},null,8,["template"])):w("",!0)]))}},bxe={class:"flex items-center justify-between w-full h-[3.25rem] gap-2 px-4 py-3"},Exe={class:"flex items-center gap-2"},Txe={key:1,class:"relative"},yxe={class:"flex items-center gap-2"},Sxe={__name:"ActionButtons",props:{attachedFiles:{type:Array,default:()=>[]},isWhatsappInbox:{type:Boolean,default:!1},isEmailOrWebWidgetInbox:{type:Boolean,default:!1},isTwilioSmsInbox:{type:Boolean,default:!1},messageTemplates:{type:Array,default:()=>[]},channelType:{type:String,default:""},isLoading:{type:Boolean,default:!1},disableSendButton:{type:Boolean,default:!1},hasSelectedInbox:{type:Boolean,default:!1},hasNoInbox:{type:Boolean,default:!1},isDropdownActive:{type:Boolean,default:!1},messageSignature:{type:String,default:""}},emits:["discard","sendMessage","sendWhatsappMessage","insertEmoji","addSignature","removeSignature","attachFile"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(null),i=X(!1),r=Nd(()=>Ao(()=>import("./EmojiInput-D8KWfRV_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),l=C(()=>n.isEmailOrWebWidgetInbox?n.messageSignature:Qi(n.messageSignature)),{fetchSignatureFlagFromUISettings:c,setSignatureFlagForInbox:u,isEditorHotKeyEnabled:d}=ln(),m=C(()=>c(n.channelType)),f=()=>{l.value&&(m.value?s("addSignature",l.value):s("removeSignature",l.value))},g=()=>{u(n.channelType,!m.value),f()};ct(()=>n.hasSelectedInbox,b=>{tn(()=>{b&&n.isEmailOrWebWidgetInbox&&f()})},{immediate:!0});const T=b=>{s("insertEmoji",b)},{onFileUpload:S}=nxe({isATwilioSMSChannel:n.isTwilioSmsInbox,attachFile:({blob:b,file:I})=>{if(!I)return;const R=new FileReader;R.readAsDataURL(I.file),R.onloadend=()=>{const O={resource:b||I,isPrivate:!1,thumb:R.result,blobSignedId:b==null?void 0:b.signed_id};s("attachFile",[...n.attachedFiles,O])}}}),_=C(()=>{const b=d("cmd_enter")?"⌘ + ↵":"↵";return o("COMPOSE_NEW_CONVERSATION.FORM.ACTION_BUTTONS.SEND",{keyCode:b})});return $s({Enter:{action:()=>{d("enter")&&!n.isWhatsappInbox&&!n.isDropdownActive&&s("sendMessage")}},"$mod+Enter":{action:()=>{d("cmd_enter")&&!n.isWhatsappInbox&&!n.isDropdownActive&&s("sendMessage")}}}),(b,I)=>(p(),v("div",bxe,[h("div",Exe,[e.isWhatsappInbox?(p(),$(vxe,{key:0,"message-templates":e.messageTemplates,onSendMessage:I[0]||(I[0]=R=>s("sendWhatsappMessage",R))},null,8,["message-templates"])):w("",!0),!e.isWhatsappInbox&&!e.hasNoInbox?re((p(),v("div",Txe,[y(oe,{icon:"i-lucide-smile-plus",color:"slate",size:"sm",class:"!w-10",onClick:I[1]||(I[1]=R=>i.value=!i.value)}),i.value?(p(),$(N(r),{key:0,class:"left-0 top-full mt-1.5","on-click":T})):w("",!0)])),[[N(Co),()=>i.value=!1]]):w("",!0),e.isEmailOrWebWidgetInbox?(p(),$(N(m0),{key:2,ref_key:"uploadAttachment",ref:a,"input-id":"composeNewConversationAttachment",size:4096*4096,accept:N(u0),multiple:"","drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0},class:"p-px",onInputFile:N(S)},{default:K(()=>[y(oe,{icon:"i-lucide-plus",color:"slate",size:"sm",class:"!w-10 relative"})]),_:1},8,["accept","onInputFile"])):w("",!0),e.hasSelectedInbox&&!e.isWhatsappInbox?(p(),$(oe,{key:3,icon:"i-lucide-signature",color:"slate",size:"sm",class:"!w-10",onClick:g})):w("",!0)]),h("div",yxe,[y(oe,{label:N(o)("COMPOSE_NEW_CONVERSATION.FORM.ACTION_BUTTONS.DISCARD"),variant:"faded",color:"slate",size:"sm",class:"!text-xs font-medium",onClick:I[2]||(I[2]=R=>s("discard"))},null,8,["label"]),e.isWhatsappInbox?w("",!0):(p(),$(oe,{key:0,label:_.value,size:"sm",class:"!text-xs font-medium",disabled:e.isLoading||e.disableSendButton,"is-loading":e.isLoading,onClick:I[3]||(I[3]=R=>s("sendMessage"))},null,8,["label","disabled","is-loading"]))])]))}},Axe=Ae(Sxe,[["__scopeId","data-v-e90034b9"]]),Ixe={},Cxe={class:"flex items-center w-full px-4 py-3 dark:bg-n-amber-11/15 bg-n-amber-3"},Oxe={class:"text-sm dark:text-n-amber-11 text-n-amber-11"};function Nxe(e,t){return p(),v("div",Cxe,[h("span",Oxe,A(e.$t("COMPOSE_NEW_CONVERSATION.FORM.NO_INBOX_ALERT")),1)])}const wxe=Ae(Ixe,[["render",Nxe]]),Rxe={class:"flex flex-col gap-4 p-4"},xxe={key:0,class:"flex flex-wrap gap-3"},$xe=["src"],Mxe={key:1,class:"flex flex-wrap gap-3"},Lxe={class:"text-sm font-medium text-n-slate-11"},kxe={__name:"AttachmentPreviews",props:{attachments:{type:Array,required:!0}},emits:["update:attachments"],setup(e,{emit:t}){const n=e,s=t,o=l=>(l.content_type||l.type).includes("image"),a=C(()=>n.attachments.filter(l=>o(l.resource))),i=C(()=>n.attachments.filter(l=>!o(l.resource))),r=l=>{const c=n.attachments.filter(u=>u.resource.id!==l);s("update:attachments",c)};return(l,c)=>(p(),v("div",Rxe,[a.value.length>0?(p(),v("div",xxe,[(p(!0),v(pe,null,Ne(a.value,u=>(p(),v("div",{key:u.id,class:"relative group/image w-[4.5rem] h-[4.5rem]"},[h("img",{class:"object-cover w-[4.5rem] h-[4.5rem] rounded-lg",src:u.thumb},null,8,$xe),y(oe,{variant:"ghost",icon:"i-lucide-trash",color:"slate",class:"absolute top-1 right-1 !w-5 !h-5 transition-opacity duration-150 ease-in-out opacity-0 group-hover/image:opacity-100",onClick:d=>r(u.resource.id)},null,8,["onClick"])]))),128))])):w("",!0),i.value.length>0?(p(),v("div",Mxe,[(p(!0),v(pe,null,Ne(i.value,u=>(p(),v("div",{key:u.id,class:"max-w-[18.75rem] inline-flex items-center h-8 min-w-0 bg-n-alpha-2 dark:bg-n-solid-3 rounded-lg gap-3 ltr:pl-3 rtl:pr-3 ltr:pr-2 rtl:pl-2"},[h("span",Lxe,A(N(dO)(u.resource)),1),y(oe,{variant:"ghost",icon:"i-lucide-x",color:"slate",size:"xs",class:"shrink-0 !h-5 !w-5",onClick:d=>r(u.resource.id)},null,8,["onClick"])]))),128))])):w("",!0)]))}},Dxe={class:"w-[42rem] divide-y divide-n-strong overflow-visible transition-all duration-300 ease-in-out top-full justify-between flex flex-col bg-n-alpha-3 border border-n-strong shadow-sm backdrop-blur-[100px] rounded-xl"},Pxe={__name:"ComposeNewConversationForm",props:{contacts:{type:Array,default:()=>[]},contactId:{type:String,default:null},selectedContact:{type:Object,default:null},targetInbox:{type:Object,default:null},currentUser:{type:Object,default:null},isCreatingContact:{type:Boolean,default:!1},isFetchingInboxes:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isDirectUploadsEnabled:{type:Boolean,default:!1},contactConversationsUiFlags:{type:Object,default:null},contactsUiFlags:{type:Object,default:null},messageSignature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1}},emits:["searchContacts","discard","updateSelectedContact","updateTargetInbox","clearSelectedContact","createConversation"],setup(e,{emit:t}){const n=e,s=t,o=X(!1),a=X(!1),i=X(!1),r=X(!1),l=C(()=>n.contactConversationsUiFlags.isCreating),c=ls({message:"",subject:"",ccEmails:"",bccEmails:"",attachedFiles:[]}),u=C(()=>{var te,Z,G,H,W,J,ee,ge,Ee;return{isEmail:((te=n.targetInbox)==null?void 0:te.channelType)===yt.EMAIL,isTwilio:((Z=n.targetInbox)==null?void 0:Z.channelType)===yt.TWILIO,isWhatsapp:((G=n.targetInbox)==null?void 0:G.channelType)===yt.WHATSAPP,isWebWidget:((H=n.targetInbox)==null?void 0:H.channelType)===yt.WEB,isApi:((W=n.targetInbox)==null?void 0:W.channelType)===yt.API,isEmailOrWebWidget:((J=n.targetInbox)==null?void 0:J.channelType)===yt.EMAIL||((ee=n.targetInbox)==null?void 0:ee.channelType)===yt.WEB,isTwilioSMS:((ge=n.targetInbox)==null?void 0:ge.channelType)===yt.TWILIO&&((Ee=n.targetInbox)==null?void 0:Ee.medium)==="sms"}}),d=C(()=>{var te;return Object.keys(((te=n.targetInbox)==null?void 0:te.messageTemplates)||{}).length?n.targetInbox.messageTemplates:[]}),m=C(()=>{var te;return((te=n.targetInbox)==null?void 0:te.channelType)||""}),f=C(()=>({selectedContact:{required:Ye},targetInbox:{required:Ye},message:{required:qu(!u.value.isWhatsapp)},subject:{required:qu(u.value.isEmail)}})),g=bt(f,{selectedContact:C(()=>n.selectedContact),targetInbox:C(()=>n.targetInbox),message:C(()=>c.message),subject:C(()=>c.subject)}),T=C(()=>({isContactInvalid:g.value.selectedContact.$dirty&&g.value.selectedContact.$invalid,isInboxInvalid:g.value.targetInbox.$dirty&&g.value.targetInbox.$invalid,isSubjectInvalid:g.value.subject.$dirty&&g.value.subject.$invalid,isMessageInvalid:g.value.message.$dirty&&g.value.message.$invalid})),S=()=>{const{message:te,subject:Z,ccEmails:G,bccEmails:H,attachedFiles:W}=c;return mRe({targetInbox:n.targetInbox,selectedContact:n.selectedContact,message:te,subject:Z,ccEmails:G,bccEmails:H,currentUser:n.currentUser,attachedFiles:W,directUploadsEnabled:n.isDirectUploadsEnabled})},_=C(()=>{var te;return dRe((te=n.selectedContact)==null?void 0:te.contactInboxes)}),E=C(()=>n.selectedContact&&_.value.length===0&&!n.contactsUiFlags.isFetchingInboxes&&!n.isFetchingInboxes),b=C(()=>o.value||a.value||i.value||r.value),I=te=>{o.value=!0,s("searchContacts",{keys:["email","phone_number","name"],query:te})},R=(te,Z)=>{te==="cc"?i.value=Z:te==="bcc"?r.value=Z:o.value=Z},O=te=>{i.value=!0,s("searchContacts",{keys:["email"],query:te})},x=te=>{r.value=!0,s("searchContacts",{keys:["email"],query:te})},L=async({value:te,action:Z,...G})=>{g.value.$reset(),s("updateSelectedContact",{value:te,action:Z,...G}),o.value=!1,a.value=!0},F=({value:te,action:Z,...G})=>{g.value.$reset(),s("updateTargetInbox",{...G}),a.value=!1,c.attachedFiles=[]},D=te=>{if(g.value.$reset(),n.sendWithSignature){const Z=u.value.isEmailOrWebWidget?n.messageSignature:Qi(n.messageSignature);c.message=uo(c.message,Z)}s("updateTargetInbox",te),c.attachedFiles=[]},V=()=>{s("clearSelectedContact"),c.attachedFiles=[]},B=te=>{c.message+=te},P=te=>{c.message=li(c.message,te)},k=te=>{c.message=uo(c.message,te)},U=te=>{c.attachedFiles=te},j=()=>{Object.assign(c,{message:"",subject:"",ccEmails:"",bccEmails:"",attachedFiles:[]}),g.value.$reset()},z=async()=>{if(await g.value.$validate())try{await s("createConversation",{payload:S(),isFromWhatsApp:!1})&&j()}catch{}},Y=async({message:te,templateParams:Z})=>{const G=fRe({targetInbox:n.targetInbox,selectedContact:n.selectedContact,message:te,templateParams:Z,currentUser:n.currentUser});await s("createConversation",{payload:G,isFromWhatsApp:!0})};return(te,Z)=>(p(),v("div",Dxe,[y(URe,{contacts:e.contacts,"selected-contact":e.selectedContact,"show-contacts-dropdown":o.value,"is-loading":e.isLoading,"is-creating-contact":e.isCreatingContact,"contact-id":e.contactId,"contactable-inboxes-list":_.value,"show-inboxes-dropdown":a.value,"has-errors":T.value.isContactInvalid,onSearchContacts:I,onSetSelectedContact:L,onClearSelectedContact:V,onUpdateDropdown:R},null,8,["contacts","selected-contact","show-contacts-dropdown","is-loading","is-creating-contact","contact-id","contactable-inboxes-list","show-inboxes-dropdown","has-errors"]),E.value?(p(),$(wxe,{key:0})):(p(),$(jRe,{key:1,"target-inbox":e.targetInbox,"selected-contact":e.selectedContact,"show-inboxes-dropdown":a.value,"contactable-inboxes-list":_.value,"has-errors":T.value.isInboxInvalid,onUpdateInbox:D,onToggleDropdown:Z[0]||(Z[0]=G=>a.value=G),onHandleInboxAction:F},null,8,["target-inbox","selected-contact","show-inboxes-dropdown","contactable-inboxes-list","has-errors"])),u.value.isEmail?(p(),$(exe,{key:2,"cc-emails":c.ccEmails,"onUpdate:ccEmails":Z[1]||(Z[1]=G=>c.ccEmails=G),"bcc-emails":c.bccEmails,"onUpdate:bccEmails":Z[2]||(Z[2]=G=>c.bccEmails=G),subject:c.subject,"onUpdate:subject":Z[3]||(Z[3]=G=>c.subject=G),contacts:e.contacts,"show-cc-emails-dropdown":i.value,"show-bcc-emails-dropdown":r.value,"is-loading":e.isLoading,"has-errors":T.value.isSubjectInvalid,onSearchCcEmails:O,onSearchBccEmails:x,onUpdateDropdown:R},null,8,["cc-emails","bcc-emails","subject","contacts","show-cc-emails-dropdown","show-bcc-emails-dropdown","is-loading","has-errors"])):w("",!0),!u.value.isWhatsapp&&!E.value?(p(),$(txe,{key:3,modelValue:c.message,"onUpdate:modelValue":Z[4]||(Z[4]=G=>c.message=G),"message-signature":e.messageSignature,"send-with-signature":e.sendWithSignature,"is-email-or-web-widget-inbox":u.value.isEmailOrWebWidget,"has-errors":T.value.isMessageInvalid,"has-attachments":c.attachedFiles.length>0},null,8,["modelValue","message-signature","send-with-signature","is-email-or-web-widget-inbox","has-errors","has-attachments"])):w("",!0),c.attachedFiles.length>0?(p(),$(kxe,{key:4,attachments:c.attachedFiles,"onUpdate:attachments":Z[5]||(Z[5]=G=>c.attachedFiles=G)},null,8,["attachments"])):w("",!0),y(Axe,{"attached-files":c.attachedFiles,"is-whatsapp-inbox":u.value.isWhatsapp,"is-email-or-web-widget-inbox":u.value.isEmailOrWebWidget,"is-twilio-sms-inbox":u.value.isTwilioSMS,"message-templates":d.value,"channel-type":m.value,"is-loading":l.value,"disable-send-button":l.value,"has-selected-inbox":!!e.targetInbox,"has-no-inbox":E.value,"is-dropdown-active":b.value,"message-signature":e.messageSignature,onInsertEmoji:B,onAddSignature:P,onRemoveSignature:k,onAttachFile:U,onDiscard:Z[6]||(Z[6]=G=>te.$emit("discard")),onSendMessage:z,onSendWhatsappMessage:Y},null,8,["attached-files","is-whatsapp-inbox","is-email-or-web-widget-inbox","is-twilio-sms-inbox","message-templates","channel-type","is-loading","disable-send-button","has-selected-inbox","has-no-inbox","is-dropdown-active","message-signature"])]))}},yp={__name:"ComposeConversation",props:{alignPosition:{type:String,default:"left"},contactId:{type:String,default:null},isModal:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,o=pt(),{t:a}=Me(),{fetchSignatureFlagFromUISettings:i}=ln(),r=X([]),l=X(null),c=X(null),u=X(!1),d=X(!1),m=X(!1),f=X(!1),g=Oe("contacts/getContactById"),T=Oe("contacts/getUIFlags"),S=Oe("getCurrentUser"),_=Oe("globalConfig/get"),E=Oe("contactConversations/getUIFlags"),b=Oe("getMessageSignature"),I=Oe("inboxes/getInboxes"),R=C(()=>{var Z;return i((Z=c.value)==null?void 0:Z.channelType)}),O=C(()=>_.value.directUploadsEnabled),x=C(()=>g.value(n.contactId)),L=C(()=>n.isModal?"":n.alignPosition==="right"?"absolute ltr:left-0 ltr:right-[unset] rtl:right-0 rtl:left-[unset]":"absolute rtl:left-0 rtl:right-[unset] ltr:right-0 ltr:left-[unset]"),F=Uo(async Z=>{m.value=!0,r.value=[];try{r.value=await _Re(Z),m.value=!1}catch{ce(a("COMPOSE_NEW_CONVERSATION.CONTACT_SEARCH.ERROR_MESSAGE"))}finally{m.value=!1}},300,!1),D=()=>{r.value=[]},V=async({value:Z,action:G,...H})=>{let W;if(G==="create"){u.value=!0;try{W=await vRe(Z),u.value=!1}catch{u.value=!1;return}}else W=H;if(l.value=W,W!=null&&W.id){d.value=!0;try{const J=await bRe(W.id);l.value.contactInboxes=jE(J,I.value),d.value=!1}catch{d.value=!1}}},B=Z=>{c.value=Z,D()},P=()=>{l.value=null,c.value=null},k=()=>{f.value=!1,n.contactId||(l.value=null),c.value=null,D(),s("close")},U=async({payload:Z,isFromWhatsApp:G})=>{try{const H=await o.dispatch("contactConversations/create",{params:Z,isFromWhatsApp:G}),W={type:"link",to:`/app/accounts/${H.account_id}/conversations/${H.id}`,message:a("COMPOSE_NEW_CONVERSATION.FORM.GO_TO_CONVERSATION")};return k(),ce(a("COMPOSE_NEW_CONVERSATION.FORM.SUCCESS_MESSAGE"),W),!0}catch(H){return ce(H instanceof nl?H.data:a("COMPOSE_NEW_CONVERSATION.FORM.ERROR_MESSAGE")),!1}},j=()=>{f.value=!f.value};ct(x,()=>{var Z;if(x.value&&n.contactId){const G=((Z=x.value)==null?void 0:Z.contactInboxes)||[],H=sI(G);l.value={...x.value,contactInboxes:jE(H,I.value)}}},{immediate:!0,deep:!0});const z=()=>{f.value&&(f.value=!1,s("close"))},Y=()=>{n.isModal&&z()};return dt(()=>D()),$s({Escape:{action:()=>{f.value&&(f.value=!1)}}}),(Z,G)=>re((p(),v("div",{class:se(["relative",{"z-40":f.value}])},[We(Z.$slots,"trigger",{isOpen:f.value,toggle:j}),f.value?(p(),v("div",{key:0,class:se({"fixed z-50 bg-n-alpha-black1 backdrop-blur-[4px] flex items-start pt-[clamp(3rem,15vh,12rem)] justify-center inset-0":e.isModal}),onClick:Fe(Y,["self"])},[y(Pxe,{class:se([{"mt-2":!e.isModal},L.value]),contacts:r.value,"contact-id":e.contactId,"is-loading":m.value,"current-user":N(S),"selected-contact":l.value,"target-inbox":c.value,"is-creating-contact":u.value,"is-fetching-inboxes":d.value,"is-direct-uploads-enabled":O.value,"contact-conversations-ui-flags":N(E),"contacts-ui-flags":N(T),"message-signature":N(b),"send-with-signature":R.value,onSearchContacts:N(F),onResetContactSearch:D,onUpdateSelectedContact:V,onUpdateTargetInbox:B,onClearSelectedContact:P,onCreateConversation:U,onDiscard:k},null,8,["class","contacts","contact-id","is-loading","current-user","selected-contact","target-inbox","is-creating-contact","is-fetching-inboxes","is-direct-uploads-enabled","contact-conversations-ui-flags","contacts-ui-flags","message-signature","send-with-signature","onSearchContacts"])],2)):w("",!0)],2)),[[N(Co),[z,{ignore:["div.ProseMirror-prompt"]}]]])}},Bxe={components:{NextButton:oe,ContactInfoRow:owe,EditContact:$we,Thumbnail:Hn,ComposeConversation:yp,SocialIcons:uwe,ContactMergeModal:lRe},props:{contact:{type:Object,default:()=>({})},showAvatar:{type:Boolean,default:!0}},emits:["panelClose"],setup(){const{isAdmin:e}=ka();return{isAdmin:e}},data(){return{showEditModal:!1,showMergeModal:!1,showDeleteModal:!1}},computed:{...lt({uiFlags:"contacts/getUIFlags"}),contactProfileLink(){return`/app/accounts/${this.$route.params.accountId}/contacts/${this.contact.id}`},additionalAttributes(){return this.contact.additional_attributes||{}},location(){const{country:e="",city:t="",country_code:n}=this.additionalAttributes,s=[t,e].filter(o=>!!o).join(", ");return s?this.findCountryFlag(n,s):""},socialProfiles(){const{social_profiles:e,screen_name:t,social_telegram_user_name:n}=this.additionalAttributes;return{twitter:t,telegram:n,...e||{}}},confirmDeleteMessage(){return` ${this.contact.name}?`}},watch:{"contact.id":{handler(e){this.$store.dispatch("contacts/fetchContactableInbox",e)},immediate:!0}},methods:{dynamicTime:rs,toggleEditModal(){this.showEditModal=!this.showEditModal},openComposeConversationModal(e){e(),wt.emit(jt.NEW_CONVERSATION_MODAL,!0)},closeComposeConversationModal(){wt.emit(jt.NEW_CONVERSATION_MODAL,!1)},toggleDeleteModal(){this.showDeleteModal=!this.showDeleteModal},confirmDeletion(){this.deleteContact(this.contact),this.closeDelete()},closeDelete(){this.showDeleteModal=!1,this.showEditModal=!1},findCountryFlag(e,t){try{if(!e)return`${t} 🌎`;const n=e==null?void 0:e.toLowerCase();return`${t} <span class="fi fi-${n} size-3.5"></span>`}catch{return""}},async deleteContact({id:e}){try{await this.$store.dispatch("contacts/delete",e),this.$emit("panelClose"),ce(this.$t("DELETE_CONTACT.API.SUCCESS_MESSAGE")),ig(this.$route.name)?this.$router.push({name:oD(this.$route.name)}):rg(this.$route.name)?this.$router.push({name:"inbox_view"}):this.$route.name!=="contacts_dashboard"&&this.$router.push({name:"contacts_dashboard"})}catch(t){ce(t.message?t.message:this.$t("DELETE_CONTACT.API.ERROR_MESSAGE"))}},closeMergeModal(){this.showMergeModal=!1},openMergeModal(){this.showMergeModal=!0}}},Fxe={class:"relative items-center w-full p-4"},Uxe={class:"flex flex-col w-full gap-2 text-left rtl:text-right"},Gxe={class:"flex flex-row justify-between"},Vxe={class:"flex flex-col items-start gap-1.5 min-w-0 w-full"},Hxe={key:0,class:"flex items-center w-full min-w-0 gap-3"},Wxe={class:"flex-shrink max-w-full min-w-0 my-0 text-base capitalize break-words text-n-slate-12"},zxe={class:"flex flex-row items-center gap-2"},jxe={key:0,class:"i-lucide-info text-sm text-n-slate-10"},Kxe=["href"],Yxe={key:1,class:"break-words mb-0.5"},Xxe={class:"flex flex-col items-start w-full gap-2"},qxe={class:"flex items-center w-full mt-0.5 gap-2"};function Zxe(e,t,n,s,o,a){const i=M("Thumbnail"),r=M("ContactInfoRow"),l=M("SocialIcons"),c=M("NextButton"),u=M("ComposeConversation"),d=M("EditContact"),m=M("ContactMergeModal"),f=M("woot-delete-modal"),g=qe("tooltip");return p(),v("div",Fxe,[h("div",Uxe,[h("div",Gxe,[n.showAvatar?(p(),$(i,{key:0,src:n.contact.thumbnail,size:"48px",username:n.contact.name,status:n.contact.availability_status},null,8,["src","username","status"])):w("",!0)]),h("div",Vxe,[n.showAvatar?(p(),v("div",Hxe,[h("h3",Wxe,A(n.contact.name),1),h("div",zxe,[n.contact.created_at?re((p(),v("span",jxe,null,512)),[[g,`${e.$t("CONTACT_PANEL.CREATED_AT_LABEL")} ${a.dynamicTime(n.contact.created_at)}`,void 0,{left:!0}]]):w("",!0),h("a",{href:a.contactProfileLink,target:"_blank",rel:"noopener nofollow noreferrer",class:"leading-3"},t[1]||(t[1]=[h("span",{class:"i-lucide-external-link text-sm text-n-slate-10"},null,-1)]),8,Kxe)])])):w("",!0),a.additionalAttributes.description?(p(),v("p",Yxe,A(a.additionalAttributes.description),1)):w("",!0),h("div",Xxe,[y(r,{href:n.contact.email?`mailto:${n.contact.email}`:"",value:n.contact.email,icon:"mail",emoji:"✉️",title:e.$t("CONTACT_PANEL.EMAIL_ADDRESS"),"show-copy":""},null,8,["href","value","title"]),y(r,{href:n.contact.phone_number?`tel:${n.contact.phone_number}`:"",value:n.contact.phone_number,icon:"call",emoji:"📞",title:e.$t("CONTACT_PANEL.PHONE_NUMBER"),"show-copy":""},null,8,["href","value","title"]),n.contact.identifier?(p(),$(r,{key:0,value:n.contact.identifier,icon:"contact-identify",emoji:"🪪",title:e.$t("CONTACT_PANEL.IDENTIFIER")},null,8,["value","title"])):w("",!0),y(r,{value:a.additionalAttributes.company_name,icon:"building-bank",emoji:"🏢",title:e.$t("CONTACT_PANEL.COMPANY")},null,8,["value","title"]),a.location||a.additionalAttributes.location?(p(),$(r,{key:1,value:a.location||a.additionalAttributes.location,icon:"map",emoji:"🌍",title:e.$t("CONTACT_PANEL.LOCATION")},null,8,["value","title"])):w("",!0),y(l,{"social-profiles":a.socialProfiles},null,8,["social-profiles"])])]),h("div",qxe,[y(u,{"contact-id":String(n.contact.id),"is-modal":"",onClose:a.closeComposeConversationModal},{trigger:K(({toggle:T})=>[re(y(c,{icon:"i-ph-chat-circle-dots",slate:"",faded:"",sm:"",onClick:S=>a.openComposeConversationModal(T)},null,8,["onClick"]),[[g,e.$t("CONTACT_PANEL.NEW_MESSAGE"),void 0,{"top-end":!0}]])]),_:1},8,["contact-id","onClose"]),re(y(c,{icon:"i-ph-pencil-simple",slate:"",faded:"",sm:"",onClick:a.toggleEditModal},null,8,["onClick"]),[[g,e.$t("EDIT_CONTACT.BUTTON_LABEL"),void 0,{"top-end":!0}]]),re(y(c,{icon:"i-ph-arrows-merge",slate:"",faded:"",sm:"",disabled:e.uiFlags.isMerging,onClick:a.openMergeModal},null,8,["disabled","onClick"]),[[g,e.$t("CONTACT_PANEL.MERGE_CONTACT"),void 0,{"top-end":!0}]]),s.isAdmin?re((p(),$(c,{key:0,icon:"i-ph-trash",slate:"",faded:"",sm:"",ruby:"",disabled:e.uiFlags.isDeleting,onClick:a.toggleDeleteModal},null,8,["disabled","onClick"])),[[g,e.$t("DELETE_CONTACT.BUTTON_LABEL"),void 0,{"top-end":!0}]]):w("",!0)]),o.showEditModal?(p(),$(d,{key:0,show:o.showEditModal,contact:n.contact,onCancel:a.toggleEditModal},null,8,["show","contact","onCancel"])):w("",!0),o.showMergeModal?(p(),$(m,{key:1,"primary-contact":n.contact,show:o.showMergeModal,onClose:a.closeMergeModal},null,8,["primary-contact","show","onClose"])):w("",!0)]),o.showDeleteModal?(p(),$(f,{key:0,show:o.showDeleteModal,"onUpdate:show":t[0]||(t[0]=T=>o.showDeleteModal=T),"on-close":a.closeDelete,"on-confirm":a.confirmDeletion,title:e.$t("DELETE_CONTACT.CONFIRM.TITLE"),message:e.$t("DELETE_CONTACT.CONFIRM.MESSAGE"),"message-value":a.confirmDeleteMessage,"confirm-text":e.$t("DELETE_CONTACT.CONFIRM.YES"),"reject-text":e.$t("DELETE_CONTACT.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])):w("",!0)])}const Qxe=Ae(Bxe,[["render",Zxe]]),Jxe={class:"flex flex-col gap-2 border-b border-n-strong group/note"},e$e={class:"flex items-center justify-between gap-2"},t$e={class:"flex items-center gap-1.5 min-w-0"},n$e={class:"min-w-0 truncate"},s$e={class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},a$e={class:"font-medium text-n-slate-12"},o$e={class:"font-medium text-n-slate-12"},i$e={key:0},iI={__name:"ContactNoteItem",props:{note:{type:Object,required:!0},writtenBy:{type:String,required:!0},allowDelete:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1}},emits:["delete"],setup(e,{emit:t}){const n=e,s=t,o=Is("noteContentRef"),a=X(!1),[i,r]=es(),{t:l}=Me(),{formatMessage:c}=ya(),u=()=>{s("delete",n.note.id)};return dt(()=>{var d;n.collapsible&&(a.value=((d=o.value)==null?void 0:d.clientHeight)>91)}),(d,m)=>{var g,T,S,_,E,b;const f=qe("dompurify-html");return p(),v("div",Jxe,[h("div",e$e,[h("div",t$e,[y(ts,{name:((T=(g=e.note)==null?void 0:g.user)==null?void 0:T.name)||"Bot",src:(_=(S=e.note)==null?void 0:S.user)!=null&&_.name?(b=(E=e.note)==null?void 0:E.user)==null?void 0:b.thumbnail:"/assets/images/chatwoot_bot.png",size:16,"rounded-full":""},null,8,["name","src"]),h("div",n$e,[h("span",s$e,[h("span",a$e,A(e.writtenBy),1),Re(" "+A(N(l)("CONTACTS_LAYOUT.SIDEBAR.NOTES.WROTE"))+" ",1),h("span",o$e,A(N(rs)(e.note.createdAt)),1)])])]),e.allowDelete?(p(),$(oe,{key:0,variant:"faded",color:"ruby",size:"xs",icon:"i-lucide-trash",class:"opacity-0 group-hover/note:opacity-100",onClick:u})):w("",!0)]),re(h("p",{ref_key:"noteContentRef",ref:o,class:se(["mb-0 prose-sm prose-p:text-sm prose-p:leading-relaxed prose-p:mb-1 prose-p:mt-0 prose-ul:mb-1 prose-ul:mt-0 text-n-slate-12",{"line-clamp-4":e.collapsible&&!N(i)&&a.value}])},null,2),[[f,N(c)(e.note.content||"")]]),e.collapsible&&a.value?(p(),v("p",i$e,[y(oe,{variant:"faded",color:"blue",size:"xs",icon:N(i)?"i-lucide-chevron-up":"i-lucide-chevron-down",onClick:m[0]||(m[0]=()=>N(r)())},{default:K(()=>[N(i)?(p(),v(pe,{key:0},[Re(A(N(l)("CONTACTS_LAYOUT.SIDEBAR.NOTES.COLLAPSE")),1)],64)):(p(),v(pe,{key:1},[Re(A(N(l)("CONTACTS_LAYOUT.SIDEBAR.NOTES.EXPAND")),1)],64))]),_:1},8,["icon"])])):w("",!0)])}}},r$e={key:0,class:"p-8 grid place-content-center"},l$e={key:1,class:"p-8 grid place-content-center"},c$e={class:"text-center"},u$e={key:2,class:"max-h-[300px] overflow-scroll"},d$e={__name:"ContactNotes",props:{contactId:{type:String,required:!0}},setup(e){const{t}=Me(),n=pt(),s=Oe("getCurrentUser"),o=Oe("contactNotes/getUIFlags"),a=C(()=>o.value.isFetching),i=Oe("contactNotes/getAllNotesByContactId"),r=C(()=>i.value(e.contactId)),l=({user:c}={})=>{var d;const u=(d=s.value)==null?void 0:d.id;return(c==null?void 0:c.id)===u?t("CONTACTS_LAYOUT.SIDEBAR.NOTES.YOU"):(c==null?void 0:c.name)||t("CONVERSATION.BOT")};return ct(()=>e.contactId,()=>n.dispatch("contactNotes/get",{contactId:e.contactId}),{immediate:!0}),(c,u)=>a.value?(p(),v("div",r$e,[y(gs)])):r.value.length?(p(),v("div",u$e,[(p(!0),v(pe,null,Ne(r.value,d=>(p(),$(iI,{key:d.id,class:"p-4 last-of-type:border-b-0",note:d,collapsible:"","written-by":l(d)},null,8,["note","written-by"]))),128))])):(p(),v("div",l$e,[h("p",c$e,A(N(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.NO_NOTES")),1)]))}},p$e={class:"relative group w-[inherit] whitespace-normal z-20"},h$e={class:"bg-white dark:bg-slate-900 w-fit ltr:left-4 rtl:right-4 top-0 border p-2.5 group-hover:flex items-center hidden absolute border-slate-75 dark:border-slate-800 rounded-lg shadow-md"},m$e={class:"text-slate-800 dark:text-slate-75 mb-0 text-xs"},f$e={__name:"HelperTextPopup",props:{message:{type:String,default:""}},setup(e){return(t,n)=>{const s=M("fluent-icon");return p(),v("div",p$e,[y(s,{icon:"info",size:"14",class:"mt-0.5 text-slate-600 absolute dark:text-slate-400"}),h("div",h$e,[h("p",m$e,A(e.message),1)])])}}},g$e="yyyy-MM-dd",_$e={components:{MultiselectDropdown:tI,HelperTextPopup:f$e,NextButton:oe},props:{label:{type:String,required:!0},description:{type:String,default:""},values:{type:Array,default:()=>[]},value:{type:[String,Number,Boolean],default:""},showActions:{type:Boolean,default:!1},attributeType:{type:String,default:"text"},attributeRegex:{type:String,default:null},regexCue:{type:String,default:null},attributeKey:{type:String,required:!0},contactId:{type:Number,default:null}},emits:["update","delete","copy"],setup(){return{v$:bt()}},data(){return{isEditing:!1,editedValue:null}},computed:{displayValue(){return this.isAttributeTypeDate?this.value?new Date(this.value||new Date).toLocaleDateString():"---":this.isAttributeTypeCheckbox?this.value==="false"?!1:this.value:this.hasValue?this.value:"---"},formattedValue(){return this.isAttributeTypeDate?ms(this.value?new Date(this.value):new Date,g$e):this.value},listOptions(){return this.values.map((e,t)=>({id:t+1,name:e}))},selectedItem(){return{id:this.values.indexOf(this.editedValue)+1,name:this.editedValue}},isAttributeTypeCheckbox(){return this.attributeType==="checkbox"},isAttributeTypeList(){return this.attributeType==="list"},isAttributeTypeLink(){return this.attributeType==="link"},isAttributeTypeDate(){return this.attributeType==="date"},hasValue(){return this.value!==null&&this.value!==""},urlValue(){return Lm(this.value)?this.value:"---"},hrefURL(){return Lm(this.value)?this.value:""},notAttributeTypeCheckboxAndList(){return!this.isAttributeTypeCheckbox&&!this.isAttributeTypeList},inputType(){return this.isAttributeTypeLink?"url":this.attributeType},shouldShowErrorMessage(){return this.v$.editedValue.$error},errorMessage(){return this.v$.editedValue.url?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_URL"):this.v$.editedValue.regexValidation?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.REQUIRED"):this.regexCue?this.regexCue:this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_INPUT")}},watch:{value(){this.isEditing=!1,this.editedValue=this.formattedValue},contactId(){this.v$.$reset()}},validations(){return this.isAttributeTypeLink?{editedValue:{required:Ye,url:Ic}}:{editedValue:{required:Ye,regexValidation:e=>!(this.attributeRegex&&!Lf(this.attributeRegex).test(e))}}},mounted(){this.editedValue=this.formattedValue,wt.on(jt.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},unmounted(){wt.off(jt.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},methods:{onFocusAttribute(e){this.attributeKey===e&&this.onEdit()},focusInput(){this.$refs.inputfield&&this.$refs.inputfield.focus()},onClickAway(){this.v$.$reset(),this.isEditing=!1},onEdit(){this.isEditing=!0,this.$nextTick(()=>{this.focusInput()})},onUpdateListValue(e){e&&(this.editedValue=e.name,this.onUpdate())},onUpdate(){const e=this.attributeType==="date"?DT(this.editedValue):this.editedValue;this.v$.$touch(),!this.v$.$invalid&&(this.isEditing=!1,this.$emit("update",this.attributeKey,e))},onDelete(){this.isEditing=!1,this.v$.$reset(),this.$emit("delete",this.attributeKey)},onCopy(){this.$emit("copy",this.value)}}},v$e={class:"px-4 py-3"},b$e={class:"flex items-center mb-1"},E$e={class:"flex items-center w-full m-0 text-sm error"},T$e={key:0,class:"flex items-center"},y$e={class:"flex items-center justify-between w-full"},S$e={key:0},A$e={key:0},I$e={class:"flex items-center w-full mb-2"},C$e=["type"],O$e={key:0,class:"block w-full -mt-px text-sm font-normal text-n-ruby-11"},N$e=["href"],w$e={key:1,class:"group-hover:bg-n-slate-3 group-hover:dark:bg-n-solid-3 inline-block rounded-sm mb-0 break-all py-0.5 px-1"},R$e={class:"flex items-center max-w-[2rem] gap-1 ml-1 rtl:mr-1 rtl:ml-0"},x$e={key:1};function $$e(e,t,n,s,o,a){const i=M("HelperTextPopup"),r=M("NextButton"),l=M("MultiselectDropdown"),c=qe("tooltip"),u=qe("on-clickaway");return p(),v("div",v$e,[h("div",b$e,[h("h4",E$e,[a.isAttributeTypeCheckbox?(p(),v("div",T$e,[re(h("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.editedValue=d),class:"!my-0 ltr:mr-2 ltr:ml-0 rtl:mr-0 rtl:ml-2",type:"checkbox",onChange:t[1]||(t[1]=(...d)=>a.onUpdate&&a.onUpdate(...d))},null,544),[[pn,o.editedValue]])])):w("",!0),h("div",y$e,[h("span",{class:se(["w-full inline-flex gap-1.5 items-start font-medium whitespace-nowrap text-sm mb-0",s.v$.editedValue.$error?"text-n-ruby-11":"text-n-slate-12"])},[Re(A(n.label)+" ",1),n.description?(p(),$(i,{key:0,message:n.description,class:"mt-0.5"},null,8,["message"])):w("",!0)],2),n.showActions&&a.hasValue?re((p(),$(r,{key:0,slate:"",sm:"",link:"",icon:"i-lucide-trash-2",onClick:a.onDelete},null,8,["onClick"])),[[c,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.DELETE"),void 0,{left:!0}]]):w("",!0)])])]),a.notAttributeTypeCheckboxAndList?(p(),v("div",S$e,[o.isEditing?re((p(),v("div",A$e,[h("div",I$e,[re(h("input",{ref:"inputfield","onUpdate:modelValue":t[2]||(t[2]=d=>o.editedValue=d),type:a.inputType,class:se(["!h-8 ltr:!rounded-r-none rtl:!rounded-l-none !mb-0 !text-sm",{error:s.v$.editedValue.$error}]),autofocus:"true",onBlur:t[3]||(t[3]=(...d)=>s.v$.editedValue.$touch&&s.v$.editedValue.$touch(...d)),onKeyup:t[4]||(t[4]=kn((...d)=>a.onUpdate&&a.onUpdate(...d),["enter"]))},null,42,C$e),[[Cf,o.editedValue]]),h("div",null,[y(r,{sm:"",icon:"i-lucide-check",class:"ltr:rounded-l-none rtl:rounded-r-none h-[34px]",onClick:a.onUpdate},null,8,["onClick"])])]),a.shouldShowErrorMessage?(p(),v("span",O$e,A(a.errorMessage),1)):w("",!0)])),[[u,a.onClickAway]]):w("",!0),re(h("div",{class:se(["flex group",{"is-editable":n.showActions}])},[a.isAttributeTypeLink?(p(),v("a",{key:0,href:a.hrefURL,target:"_blank",rel:"noopener noreferrer",class:"group-hover:bg-n-slate-3 group-hover:dark:bg-n-solid-3 inline-block rounded-sm mb-0 break-all py-0.5 px-1"},A(a.urlValue),9,N$e)):(p(),v("p",w$e,A(a.displayValue),1)),h("div",R$e,[n.showActions&&a.hasValue?re((p(),$(r,{key:0,xs:"",slate:"",ghost:"",icon:"i-lucide-clipboard",class:"hidden group-hover:flex flex-shrink-0",onClick:a.onCopy},null,8,["onClick"])),[[c,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.COPY")]]):w("",!0),n.showActions?re((p(),$(r,{key:1,xs:"",slate:"",ghost:"",icon:"i-lucide-pen",class:"hidden group-hover:flex flex-shrink-0",onClick:a.onEdit},null,8,["onClick"])),[[c,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.EDIT"),void 0,{right:!0}]]):w("",!0)])],2),[[Jt,!o.isEditing]])])):w("",!0),a.isAttributeTypeList?(p(),v("div",x$e,[y(l,{options:a.listOptions,"selected-item":a.selectedItem,"has-thumbnail":!1,"multiselector-placeholder":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.PLACEHOLDER"),"no-search-result":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.NO_RESULT"),"input-placeholder":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.SEARCH_INPUT_PLACEHOLDER"),onSelect:a.onUpdateListValue},null,8,["options","selected-item","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])])):w("",!0)])}const M$e=Ae(_$e,[["render",$$e],["__scopeId","data-v-f4536664"]]),L$e={class:"conversation--details"},k$e={key:0,class:"p-3 text-center"},D$e={key:1,class:"flex items-center px-2 py-2"},P$e={__name:"CustomAttributes",props:{attributeType:{type:String,default:"conversation_attribute"},contactId:{type:Number,default:null},attributeFrom:{type:String,required:!0},emptyStateMessage:{type:String,default:""},staticElements:{type:Array,default:()=>[]}},setup(e){const t=e,n=pt(),s=nn(),o=sn(),{t:a}=Me(),{uiSettings:i,updateUISettings:r}=ln(),l=X(!1),[c,u]=es(!1),d=C(()=>s.getSelectedChat.value),m=C(()=>s["attributes/getAttributesByModel"].value(t.attributeType)),f=C(()=>{var k,U;return((U=(k=d.value.meta)==null?void 0:k.sender)==null?void 0:U.id)||o.params.contactId||t.contactId}),g=C(()=>s["contacts/getContact"].value(f.value)),T=C(()=>t.attributeType==="conversation_attribute"?d.value.custom_attributes||{}:g.value.custom_attributes||{}),S=C(()=>d.value.id),_=C(()=>c.value?a("CUSTOM_ATTRIBUTES.SHOW_LESS"):a("CUSTOM_ATTRIBUTES.SHOW_MORE")),E=C(()=>m.value.map(k=>{const U=Object.hasOwnProperty.call(T.value,k.attribute_key);return{...k,type:"custom_attribute",key:k.attribute_key,value:U?T.value[k.attribute_key]:""}})),b=C(()=>`conversation_elements_order_${t.attributeFrom}`),I=C(()=>{const k=i.value[b.value]??[],U=[...t.staticElements,...E.value];return k.length?U.sort((j,z)=>{const Y=k.indexOf(j.key),te=k.indexOf(z.key);return Y===-1&&te===-1?0:Y===-1?1:te===-1?-1:Y-te}):U}),R=C(()=>c.value||I.value.length<=5?I.value:I.value.slice(0,5)),O=(k=[],U=[])=>{const j=[...U],z=new Set(U);return k.filter(Y=>Y.startsWith("static-")&&!z.has(Y)).forEach(Y=>{const te=k.slice(k.indexOf(Y)).find(Z=>z.has(Z));te?j.splice(j.indexOf(te),0,Y):j.push(Y)}),j},x=()=>{l.value=!1;const k=i.value[b.value]??[],U=I.value.map(({key:z})=>z),j=O(k,U);r({[b.value]:j})},L=()=>{if(!i.value[b.value]){const U=I.value.map(j=>j.key);r({[b.value]:U})}c.value=i.value[`show_all_attributes_${t.attributeFrom}`]||!1},F=()=>{u(),r({[`show_all_attributes_${t.attributeFrom}`]:c.value})},D=async(k,U)=>{var z;const j={...T.value,[k]:U};try{t.attributeType==="conversation_attribute"?await n.dispatch("updateCustomAttributes",{conversationId:S.value,customAttributes:j}):n.dispatch("contacts/update",{id:t.contactId,customAttributes:j}),ce(a("CUSTOM_ATTRIBUTES.FORM.UPDATE.SUCCESS"))}catch(Y){const te=((z=Y==null?void 0:Y.response)==null?void 0:z.message)||a("CUSTOM_ATTRIBUTES.FORM.UPDATE.ERROR");ce(te)}},V=async k=>{var U;try{const{[k]:j,...z}=T.value;t.attributeType==="conversation_attribute"?await n.dispatch("updateCustomAttributes",{conversationId:S.value,customAttributes:z}):n.dispatch("contacts/deleteCustomAttributes",{id:t.contactId,customAttributes:[k]}),ce(a("CUSTOM_ATTRIBUTES.FORM.DELETE.SUCCESS"))}catch(j){const z=((U=j==null?void 0:j.response)==null?void 0:U.message)||a("CUSTOM_ATTRIBUTES.FORM.DELETE.ERROR");ce(z)}},B=async k=>{await Go(k),ce(a("CUSTOM_ATTRIBUTES.COPY_SUCCESSFUL"))};dt(()=>{L()});const P=["[&>*:nth-child(odd)]:!bg-n-background [&>*:nth-child(even)]:!bg-n-slate-2","dark:[&>*:nth-child(odd)]:!bg-n-background dark:[&>*:nth-child(even)]:!bg-n-solid-1"];return(k,U)=>(p(),v("div",L$e,[y(N(Pc),{list:R.value,disabled:!N(c),animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"key",class:se(["last:rounded-b-lg",P]),onStart:U[0]||(U[0]=j=>l.value=!0),onEnd:x},{item:K(({element:j})=>[h("div",{class:se(["drag-handle relative border-b border-n-weak/50 dark:border-n-weak/90",{"cursor-grab":N(c),"last:border-transparent dark:last:border-transparent":I.value.length<=5}])},[j.type==="static_attribute"?We(k.$slots,"staticItem",{key:0,element:j},void 0,!0):(p(),$(M$e,{key:j.id,"attribute-key":j.attribute_key,"attribute-type":j.attribute_display_type,values:j.attribute_values,label:j.attribute_display_name,description:j.attribute_description,value:j.value,"show-actions":"","attribute-regex":j.regex_pattern,"regex-cue":j.regex_cue,"contact-id":e.contactId,onUpdate:D,onDelete:V,onCopy:B},null,8,["attribute-key","attribute-type","values","label","description","value","attribute-regex","regex-cue","contact-id"]))],2)]),_:3},8,["list","disabled"]),!R.value.length&&e.emptyStateMessage?(p(),v("p",k$e,A(e.emptyStateMessage),1)):w("",!0),I.value.length>5?(p(),v("div",D$e,[y(oe,{ghost:"",xs:"",icon:N(c)?"i-lucide-chevron-up":"i-lucide-chevron-down",label:_.value,onClick:F},null,8,["icon","label"])])):w("",!0)]))}},rI=Ae(P$e,[["__scopeId","data-v-78e4300e"]]),B$e={class:"conversation--details"},F$e=["href"],U$e={__name:"ConversationInfo",props:{conversationAttributes:{type:Object,default:()=>({})},contactAttributes:{type:Object,default:()=>({})}},setup(e){const t=e,n=C(()=>t.conversationAttributes.referer),s=C(()=>{var u;return(u=t.conversationAttributes.initiated_at)==null?void 0:u.timestamp}),o=C(()=>t.conversationAttributes.browser),a=C(()=>{if(!o.value)return"";const{browser_name:u="",browser_version:d=""}=o.value;return`${u} ${d}`}),i=C(()=>dN(t.conversationAttributes.browser_language)),r=C(()=>{if(!o.value)return"";const{platform_name:u="",platform_version:d=""}=o.value;return`${u} ${d}`}),l=C(()=>t.contactAttributes.created_at_ip),c=C(()=>[{content:s,title:"CONTACT_PANEL.INITIATED_AT",key:"static-initiated-at",type:"static_attribute"},{content:i,title:"CONTACT_PANEL.BROWSER_LANGUAGE",key:"static-browser-language",type:"static_attribute"},{content:n,title:"CONTACT_PANEL.INITIATED_FROM",key:"static-referer",type:"static_attribute"},{content:a,title:"CONTACT_PANEL.BROWSER",key:"static-browser",type:"static_attribute"},{content:r,title:"CONTACT_PANEL.OS",key:"static-platform",type:"static_attribute"},{content:l,title:"CONTACT_PANEL.IP_ADDRESS",key:"static-ip-address",type:"static_attribute"}].filter(u=>!!u.content.value));return(u,d)=>(p(),v("div",B$e,[y(rI,{"static-elements":c.value,"attribute-class":"conversation--attribute","attribute-from":"conversation_panel","attribute-type":"conversation_attribute"},{staticItem:K(({element:m})=>[(p(),$(JA,{key:m.title,title:u.$t(m.title),value:m.content.value},{default:K(()=>[m.key==="static-referer"?(p(),v("a",{key:0,href:m.content.value,rel:"noopener noreferrer nofollow",target:"_blank",class:"text-n-brand"},A(m.content.value),9,F$e)):w("",!0)]),_:2},1032,["title","value"]))]),_:1},8,["static-elements"])]))}},G$e={class:"macro-preview absolute border border-n-weak max-h-[22.5rem] z-50 w-64 rounded-md bg-n-alpha-3 backdrop-blur-[100px] shadow-lg bottom-8 right-8 overflow-y-auto p-4 text-left rtl:text-right"},V$e={class:"mb-4 text-sm text-n-slate-12"},H$e={key:0,class:"top-[0.390625rem] absolute -bottom-1 left-0 w-px bg-slate-75 dark:bg-slate-600"},W$e={class:"mb-1 text-xs text-n-slate-11"},z$e={class:"text-n-slate-12 text-sm"},j$e={__name:"MacroPreview",props:{macro:{type:Object,required:!0}},setup(e){const t=e,n=Oe("labels/getLabels"),s=Oe("teams/getTeams"),o=Oe("agents/getAgents"),a=(r,l)=>({assign_team:yne(s.value,l),add_label:S1(n.value,l),remove_label:S1(n.value,l),assign_agent:Sne(o.value,l),mute_conversation:null,snooze_conversation:null,resolve_conversation:null,remove_assigned_team:null,send_webhook_event:l[0],send_message:l[0],send_email_transcript:l[0],add_private_note:l[0]})[r]||"",i=C(()=>t.macro.actions.map(r=>({actionName:Tne(r.action_name),actionValue:a(r.action_name,r.action_params)})));return(r,l)=>(p(),v("div",G$e,[h("h6",V$e,A(e.macro.name),1),(p(!0),v(pe,null,Ne(i.value,(c,u)=>(p(),v("div",{key:u,class:"relative pl-4 macro-block"},[u!==e.macro.actions.length-1?(p(),v("div",H$e)):w("",!0),l[0]||(l[0]=h("div",{class:"absolute -left-[0.21875rem] top-[0.2734375rem] w-2 h-2 rounded-full bg-n-solid-1 border-2 border-solid border-n-weak dark:border-slate-600"},null,-1)),h("p",W$e,A(r.$t(`MACROS.ACTIONS.${c.actionName}`)),1),h("p",z$e,A(c.actionValue),1)]))),128))]))}},K$e=Ae(j$e,[["__scopeId","data-v-a86e50e3"]]),Y$e={class:"relative flex items-center justify-between leading-4 rounded-md h-10 pl-3 pr-2"},X$e={class:"overflow-hidden whitespace-nowrap text-ellipsis font-medium text-n-slate-12"},q$e={class:"flex items-center gap-1 justify-end"},Z$e={__name:"MacroItem",props:{macro:{type:Object,required:!0},conversationId:{type:[Number,String],required:!0}},setup(e){const t=e,n=pt(),{t:s}=Me(),o=X(!1),a=X(!1),i=async c=>{try{o.value=!0,await n.dispatch("macros/execute",{macroId:c.id,conversationIds:[t.conversationId]}),Pt(ua.EXECUTED_A_MACRO),ce(s("MACROS.EXECUTE.EXECUTED_SUCCESSFULLY"))}catch{ce(s("MACROS.ERROR"))}finally{o.value=!1}},r=()=>{a.value=!a.value},l=()=>{a.value=!1};return(c,u)=>{const d=qe("tooltip"),m=qe("on-clickaway");return p(),v("div",Y$e,[h("span",X$e,A(e.macro.name),1),h("div",q$e,[re(y(oe,{icon:"i-lucide-info",slate:"",faded:"",xs:"",onClick:r},null,512),[[d,c.$t("MACROS.EXECUTE.PREVIEW"),void 0,{"left-start":!0}]]),re(y(oe,{icon:"i-lucide-play",slate:"",faded:"",xs:"","is-loading":o.value,onClick:u[0]||(u[0]=f=>i(e.macro))},null,8,["is-loading"]),[[d,c.$t("MACROS.EXECUTE.BUTTON_TOOLTIP"),void 0,{"left-start":!0}]])]),y(qs,{name:"menu-slide"},{default:K(()=>[a.value?re((p(),$(K$e,{key:0,macro:e.macro},null,8,["macro"])),[[m,l]]):w("",!0)]),_:1})])}}},Q$e={key:0,class:"p-3"},J$e={class:"flex flex-col items-center justify-center h-full"},eMe={key:1,class:"flex items-center gap-2 justify-center p-6 text-n-slate-12"},tMe={class:"text-sm"},KE="macros_display_order",nMe={__name:"List",props:{conversationId:{type:[Number,String],required:!0}},setup(e){const t=pt(),{accountScopedUrl:n}=zn(),{uiSettings:s,updateUISettings:o}=ln(),a=X(!1),i=Oe("macros/getMacros"),r=Oe("macros/getUIFlags"),l=C({get:()=>{var f;const u=((f=s.value)==null?void 0:f[KE])??[],d=i.value??[];if(!u.length||!d.length)return d;const m=new Map(u.map((g,T)=>[g,T]));return[...d].sort((g,T)=>{const S=m.get(g.id)??1/0,_=m.get(T.id)??1/0;return S-_})},set:u=>{o({[KE]:u.map(({id:d})=>d)})}}),c=()=>{a.value=!1};return dt(()=>{t.dispatch("macros/get")}),(u,d)=>{const m=M("router-link");return p(),v("div",null,[!N(r).isFetching&&!N(i).length?(p(),v("div",Q$e,[h("p",J$e,A(u.$t("MACROS.LIST.404")),1),y(m,{to:N(n)("settings/macros")},{default:K(()=>[y(oe,{faded:"",xs:"",icon:"i-lucide-plus",class:"mt-1",label:u.$t("MACROS.HEADER_BTN_TXT")},null,8,["label"])]),_:1},8,["to"])])):w("",!0),N(r).isFetching?(p(),v("div",eMe,[h("span",tMe,A(u.$t("MACROS.LOADING")),1),y(gs,{class:"size-5"})])):w("",!0),!N(r).isFetching&&N(i).length?(p(),$(N(Pc),{key:2,modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=f=>l.value=f),class:"p-1",animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"id",onStart:d[1]||(d[1]=f=>a.value=!0),onEnd:c},{item:K(({element:f})=>[(p(),$(Z$e,{key:f.id,macro:f,"conversation-id":e.conversationId,class:"drag-handle cursor-grab"},null,8,["macro","conversation-id"]))]),_:1},8,["modelValue"])):w("",!0)])}}},sMe=Ae(nMe,[["__scopeId","data-v-2a3163f2"]]);class aMe extends Io{constructor(){super("integrations/shopify",{accountScoped:!0})}getOrders(t){return axios.get(`${this.url}/orders`,{params:{contact_id:t}})}}const oMe=new aMe,iMe={class:"py-3 border-b border-n-weak last:border-b-0 flex flex-col gap-1.5"},rMe={class:"flex justify-between items-center"},lMe={class:"font-medium flex"},cMe=["href"],uMe=["title"],dMe={class:"text-sm text-n-slate-12"},pMe={class:"text-n-slate-11 border-r border-n-weak pr-2"},hMe={class:"text-n-slate-11 pl-2"},mMe={key:0},fMe=["title"],gMe={__name:"ShopifyOrderItem",props:{order:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Me(),s=u=>ms(new Date(u),"MMM d, yyyy"),o=(u,d)=>new Intl.NumberFormat("en",{style:"currency",currency:d||"USD"}).format(u),a=u=>({paid:"bg-n-teal-5 text-n-teal-12"})[u]||"bg-slate-50 text-slate-700",i=(u,d="")=>`CONVERSATION_SIDEBAR.SHOPIFY.${u.toUpperCase()}_STATUS.${d.toUpperCase()}`,r=C(()=>{const{fulfillment_status:u}=t.order;return u?n(i("FULFILLMENT",u)):""}),l=C(()=>{const{financial_status:u}=t.order;return u?n(i("FINANCIAL",u)):""}),c=u=>({fulfilled:"text-green-600",partial:"text-yellow-600",unfulfilled:"text-red-600"})[u]||"text-slate-600";return(u,d)=>(p(),v("div",iMe,[h("div",rMe,[h("div",lMe,[h("a",{href:e.order.admin_url,target:"_blank",rel:"noopener noreferrer",class:"hover:underline text-n-slate-12 cursor-pointer truncate"},[Re(A(u.$t("CONVERSATION_SIDEBAR.SHOPIFY.ORDER_ID",{id:e.order.id}))+" ",1),d[0]||(d[0]=h("i",{class:"i-lucide-external-link pl-5"},null,-1))],8,cMe)]),h("div",{class:se([a(e.order.financial_status),"text-xs px-2 py-1 rounded capitalize truncate"]),title:l.value},A(l.value),11,uMe)]),h("div",dMe,[h("span",pMe,A(s(e.order.created_at)),1),h("span",hMe,A(o(e.order.total_price,e.order.currency)),1)]),r.value?(p(),v("div",mMe,[h("span",{class:se([c(e.order.fulfillment_status),"capitalize font-medium"]),title:r.value},A(r.value),11,fMe)])):w("",!0)]))}},_Me={class:"px-4 py-2 text-n-slate-12"},vMe={key:0,class:"text-center text-n-slate-12"},bMe={key:1,class:"flex justify-center items-center p-4"},EMe={key:2,class:"text-center text-n-ruby-12"},TMe={key:3,class:"text-center text-n-slate-12"},yMe={key:4},SMe={__name:"ShopifyOrdersList",props:{contactId:{type:[Number,String],required:!0}},setup(e){const t=e,n=Xs("contacts/getContact",t.contactId),s=C(()=>{var l,c;return!!((l=n.value)!=null&&l.email)||!!((c=n.value)!=null&&c.phone_number)}),o=X([]),a=X(!0),i=X(""),r=async()=>{var l,c;try{a.value=!0;const u=await oMe.getOrders(t.contactId);o.value=u.data.orders}catch(u){i.value=((c=(l=u.response)==null?void 0:l.data)==null?void 0:c.error)||"CONVERSATION_SIDEBAR.SHOPIFY.ERROR"}finally{a.value=!1}};return ct(()=>t.contactId,()=>{s.value&&r()},{immediate:!0}),(l,c)=>(p(),v("div",_Me,[s.value?a.value?(p(),v("div",bMe,[y(gs,{size:"32",class:"text-n-brand"})])):i.value?(p(),v("div",EMe,A(i.value),1)):o.value.length?(p(),v("div",yMe,[(p(!0),v(pe,null,Ne(o.value,u=>(p(),$(gMe,{key:u.id,order:u},null,8,["order"]))),128))])):(p(),v("div",TMe,A(l.$t("CONVERSATION_SIDEBAR.SHOPIFY.NO_SHOPIFY_ORDERS")),1)):(p(),v("div",vMe,A(l.$t("CONVERSATION_SIDEBAR.SHOPIFY.NO_SHOPIFY_ORDERS")),1))]))}},AMe={class:"flex items-center justify-between px-4 py-2 border-b border-n-weak h-12"},IMe={class:"flex items-center justify-between gap-2 flex-1"},CMe={class:"font-medium text-sm text-n-slate-12"},OMe={class:"flex items-center"},lI={__name:"SidebarActionsHeader",props:{title:{type:String,required:!0},buttons:{type:Array,default:()=>[]}},emits:["click","close"],setup(e,{emit:t}){const n=t,s=o=>{n("click",o.key)};return(o,a)=>{const i=qe("tooltip");return p(),v("div",AMe,[h("div",IMe,[h("span",CMe,A(e.title),1),h("div",OMe,[(p(!0),v(pe,null,Ne(e.buttons,r=>re((p(),$(oe,{key:r.key,icon:r.icon,ghost:"",sm:"",onClick:l=>s(r)},null,8,["icon","onClick"])),[[i,r.tooltip]])),128)),re(y(oe,{icon:"i-lucide-x",ghost:"",sm:"",onClick:a[0]||(a[0]=r=>o.$emit("close"))},null,512),[[i,o.$t("GENERAL.CLOSE")]])])])])}}};class NMe extends Io{constructor(){super("integrations/linear",{accountScoped:!0})}getTeams(){return axios.get(`${this.url}/teams`)}getTeamEntities(t){return axios.get(`${this.url}/team_entities?team_id=${t}`)}createIssue(t){return axios.post(`${this.url}/create_issue`,t)}link_issue(t,n,s){return axios.post(`${this.url}/link_issue`,{issue_id:n,conversation_id:t,title:s})}getLinkedIssue(t){return axios.get(`${this.url}/linked_issues?conversation_id=${t}`)}unlinkIssue(t,n,s){return axios.post(`${this.url}/unlink_issue`,{link_id:t,issue_id:n,conversation_id:s})}searchIssues(t){return axios.get(`${this.url}/search_issue?q=${t}`)}}const mi=new NMe,wMe={class:"flex items-center justify-end w-full gap-2 mt-2"},RMe={__name:"LinkIssue",props:{conversationId:{type:[Number,String],required:!0},title:{type:String,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X([]),i=X(!1),r=X({id:null,name:""}),l=X(!1),c=X(!1),u=X(""),d=()=>{a.value=[],i.value=!i.value},m=C(()=>r.value.id?r.value.name:o("INTEGRATION_SETTINGS.LINEAR.LINK.SELECT")),f=C(()=>!r.value.id||c.value),g=E=>{r.value=E,d()},T=()=>{s("close")},S=async E=>{if(a.value=[],!!E){u.value=E;try{l.value=!0;const b=await mi.searchIssues(E);a.value=b.data.map(I=>({id:I.identifier,name:`${I.identifier} ${I.title}`,icon:"status",iconColor:I.state.color}))}catch(b){const I=Ur(b,o("INTEGRATION_SETTINGS.LINEAR.LINK.ERROR"));ce(I)}finally{l.value=!1}}},_=async()=>{const{id:E}=r.value;try{c.value=!0,await mi.link_issue(n.conversationId,E,n.title),ce(o("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_SUCCESS")),u.value="",a.value=[],T(),Pt(Uf.LINK_ISSUE)}catch(b){const I=Ur(b,o("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_ERROR"));ce(I)}finally{c.value=!1}};return(E,b)=>{const I=qe("on-clickaway");return p(),v("div",{class:se(["flex flex-col justify-between",i.value?"h-[256px]":"gap-2"])},[y(Uc,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":m.value,class:"justify-between w-full h-[2.5rem] py-1.5 px-3 rounded-xl bg-n-alpha-black2 outline outline-1 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6",onClick:d},vo({_:2},[i.value?{name:"dropdown",fn:K(()=>[a.value?re((p(),$(Ec,{key:0,"show-clear-filter":!1,"list-items":a.value,"active-filter-id":r.value.id,"is-loading":l.value,"input-placeholder":E.$t("INTEGRATION_SETTINGS.LINEAR.LINK.SEARCH"),"loading-placeholder":E.$t("INTEGRATION_SETTINGS.LINEAR.LINK.LOADING"),"enable-search":"",class:"left-0 flex flex-col w-full overflow-y-auto h-fit !max-h-[160px] md:left-auto md:right-0 top-10",onOnSearch:S,onSelect:g},null,8,["list-items","active-filter-id","is-loading","input-placeholder","loading-placeholder"])),[[I,d]]):w("",!0)]),key:"0"}:void 0]),1032,["button-text"]),h("div",wMe,[y(oe,{faded:"",slate:"",type:"reset",label:E.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CANCEL"),onClick:Fe(T,["prevent"])},null,8,["label"]),y(oe,{type:"submit",label:E.$t("INTEGRATION_SETTINGS.LINEAR.LINK.TITLE"),disabled:f.value,"is-loading":c.value,onClick:Fe(_,["prevent"])},null,8,["label","disabled","is-loading"])])],2)}}},xMe={title:{required:Ye},teamId:{required:Ye}},$Me={key:0,class:"mt-1 message"},MMe=Object.assign({name:"SearchableDropdown"},{__name:"SearchableDropdown",props:{type:{type:String,required:!0},label:{type:String,default:null},items:{type:Array,required:!0},value:{type:[Number,String],default:null},placeholder:{type:String,default:null},error:{type:String,default:null}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,o=X(!1),a=()=>{o.value=!o.value},i=d=>{s("change",d,n.type),a()},r=C(()=>!!n.error),l=C(()=>n.value?n.items.find(d=>d.id===n.value):null),c=C(()=>{var d;return((d=l.value)==null?void 0:d.name)||n.placeholder}),u=C(()=>{var d;return((d=l.value)==null?void 0:d.id)||null});return(d,m)=>{const f=qe("on-clickaway");return p(),v("div",{class:se(["flex w-full",e.type==="stateId"&&o.value?"h-[150px]":"gap-2"])},[h("label",{class:se(["w-full",{error:r.value}])},[Re(A(e.label)+" ",1),y(Uc,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":c.value,class:"justify-between w-full h-[2.5rem] py-1.5 px-3 rounded-xl bg-n-alpha-black2 outline outline-1 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6",onClick:a},vo({_:2},[o.value?{name:"dropdown",fn:K(()=>[re(y(Ec,{"show-clear-filter":!1,"list-items":e.items,"active-filter-id":u.value,"input-placeholder":e.placeholder,"enable-search":"",class:"left-0 flex flex-col w-full overflow-y-auto h-fit !max-h-[160px] md:left-auto md:right-0 top-10",onSelect:i},null,8,["list-items","active-filter-id","input-placeholder"]),[[f,a]])]),key:"0"}:void 0]),1032,["button-text"]),r.value?(p(),v("span",$Me,A(e.error),1)):w("",!0)],2)],2)}}}),LMe=["placeholder"],kMe={class:"flex flex-col gap-4"},DMe={class:"flex items-center justify-end w-full gap-2 mt-8"},PMe={__name:"CreateIssue",props:{conversationId:{type:[Number,String],required:!0},title:{type:String,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X([]),i=X([]),r=X([]),l=X([]),c=X([]),u=[{id:0,name:"No priority"},{id:1,name:"Urgent"},{id:2,name:"High"},{id:3,name:"Normal"},{id:4,name:"Low"}],d=["Backlog","Todo","In Progress","Done","Canceled"],m=X(!1),f={borderRadius:"0.75rem",fontSize:"0.875rem"},g=ls({title:"",description:"",teamId:"",assigneeId:"",labelId:"",stateId:"",priority:"",projectId:""}),T=bt(xMe,g),S=C(()=>T.value.title.$invalid||m.value),_=C(()=>T.value.title.$error?o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.REQUIRED_ERROR"):""),E=C(()=>T.value.teamId.$error?o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.REQUIRED_ERROR"):""),b=C(()=>[{type:"teamId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.LABEL",items:a.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.SEARCH",error:E.value},{type:"assigneeId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.ASSIGNEE.LABEL",items:i.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.ASSIGNEE.SEARCH",error:""},{type:"labelId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.LABEL.LABEL",items:l.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.LABEL.SEARCH",error:""},{type:"priority",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PRIORITY.LABEL",items:u,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PRIORITY.SEARCH",error:""},{type:"projectId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PROJECT.LABEL",items:r.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PROJECT.SEARCH",error:""},{type:"stateId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.STATUS.LABEL",items:c.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.STATUS.SEARCH",error:""}]),I=()=>s("close"),R=async()=>{try{const F=await mi.getTeams();a.value=F.data}catch(F){const D=Ur(F,o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.LOADING_TEAM_ERROR"));ce(D)}},O=async()=>{try{const F=await mi.getTeamEntities(g.teamId);i.value=F.data.users,l.value=F.data.labels,r.value=F.data.projects,c.value=d.map(D=>F.data.states.find(V=>V.name===D)).filter(Boolean)}catch(F){const D=Ur(F,o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.LOADING_TEAM_ENTITIES_ERROR"));ce(D)}},x=(F,D)=>{g[D]=F.id,D==="teamId"&&(g.assigneeId="",g.stateId="",g.labelId="",g.projectId="",O())},L=async()=>{if(T.value.$touch(),T.value.$invalid)return;const F={team_id:g.teamId,title:g.title,description:g.description||void 0,assignee_id:g.assigneeId||void 0,project_id:g.projectId||void 0,state_id:g.stateId||void 0,priority:g.priority||void 0,label_ids:g.labelId?[g.labelId]:void 0,conversation_id:n.conversationId};try{m.value=!0;const D=await mi.createIssue(F),{identifier:V}=D.data;await mi.link_issue(n.conversationId,V,n.title),ce(o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE_SUCCESS")),Pt(Uf.CREATE_ISSUE),I()}catch(D){const V=Ur(D,o("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE_ERROR"));ce(V)}finally{m.value=!1}};return dt(R),(F,D)=>{const V=M("woot-input");return p(),v("div",null,[y(V,{modelValue:g.title,"onUpdate:modelValue":D[0]||(D[0]=B=>g.title=B),class:se([{error:N(T).title.$error},"w-full"]),styles:{...f,padding:"0.375rem 0.75rem"},label:F.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.LABEL"),placeholder:F.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.PLACEHOLDER"),error:_.value,onInput:N(T).title.$touch},null,8,["modelValue","class","styles","label","placeholder","error","onInput"]),h("label",null,[Re(A(F.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.DESCRIPTION.LABEL"))+" ",1),re(h("textarea",{"onUpdate:modelValue":D[1]||(D[1]=B=>g.description=B),style:Ht({...f,padding:"0.5rem 0.75rem"}),rows:"3",class:"text-sm",placeholder:F.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.DESCRIPTION.PLACEHOLDER")},null,12,LMe),[[mt,g.description]])]),h("div",kMe,[(p(!0),v(pe,null,Ne(b.value,B=>(p(),$(MMe,{key:B.type,type:B.type,value:g[B.type],label:F.$t(B.label),items:B.items,placeholder:F.$t(B.placeholder),error:B.error,onChange:x},null,8,["type","value","label","items","placeholder","error"]))),128))]),h("div",DMe,[y(oe,{faded:"",slate:"",type:"reset",label:F.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CANCEL"),onClick:Fe(I,["prevent"])},null,8,["label"]),y(oe,{type:"submit",label:F.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE"),disabled:S.value,"is-loading":m.value,onClick:Fe(L,["prevent"])},null,8,["label","disabled","is-loading"])])])}}},BMe={class:"flex flex-col h-auto overflow-auto"},FMe={class:"flex flex-col h-auto overflow-auto"},UMe={class:"flex flex-col px-8 pb-4"},GMe={key:0,class:"flex flex-col px-8 pb-4"},VMe={key:1,class:"flex flex-col px-8 pb-4"},HMe={__name:"CreateOrLinkIssue",props:{accountId:{type:[Number,String],required:!0},conversation:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(0),i=C(()=>{const{meta:{sender:{name:u=null}={}}={}}=n.conversation;return o("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_TITLE",{conversationId:n.conversation.id,name:u})}),r=X([{key:0,name:o("INTEGRATION_SETTINGS.LINEAR.CREATE")},{key:1,name:o("INTEGRATION_SETTINGS.LINEAR.LINK.TITLE")}]),l=()=>{s("close")},c=u=>{a.value=u};return(u,d)=>{const m=M("woot-modal-header"),f=M("woot-tabs-item"),g=M("woot-tabs");return p(),v("div",BMe,[y(m,{"header-title":u.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.TITLE"),"header-content":u.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.DESCRIPTION")},null,8,["header-title","header-content"]),h("div",FMe,[h("div",UMe,[y(g,{class:"ltr:[&>ul]:pl-0 rtl:[&>ul]:pr-0",index:a.value,onChange:c},{default:K(()=>[(p(!0),v(pe,null,Ne(r.value,(T,S)=>(p(),$(f,{key:T.key,index:S,name:T.name,"show-badge":!1},null,8,["index","name"]))),128))]),_:1},8,["index"])]),a.value===0?(p(),v("div",GMe,[y(PMe,{"account-id":e.accountId,"conversation-id":e.conversation.id,title:i.value,onClose:l},null,8,["account-id","conversation-id","title"])])):(p(),v("div",VMe,[y(RMe,{"conversation-id":e.conversation.id,title:i.value,onClose:l},null,8,["conversation-id","title"])]))])])}}},WMe={class:"inline-flex items-center justify-center rounded-md"},zMe={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},jMe={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KMe={key:2,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},YMe={key:3,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b_={__name:"CardPriorityIcon",props:{priority:{type:String,default:""}},setup(e){return(t,n)=>(p(),v("div",WMe,[e.priority===N(Ks).LOW?(p(),v("svg",zMe,n[0]||(n[0]=[Mr('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-slate-6"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-slate-6"></rect></g>',2)]))):w("",!0),e.priority===N(Ks).MEDIUM?(p(),v("svg",jMe,n[1]||(n[1]=[Mr('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-amber-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-slate-6"></rect></g>',2)]))):w("",!0),e.priority===N(Ks).HIGH?(p(),v("svg",KMe,n[2]||(n[2]=[Mr('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-amber-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-amber-9"></rect></g>',2)]))):w("",!0),e.priority===N(Ks).URGENT?(p(),v("svg",YMe,n[3]||(n[3]=[Mr('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-ruby-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-ruby-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-ruby-9"></rect></g>',2)]))):w("",!0)]))}},XMe={class:"flex items-center justify-between"},qMe={class:"flex items-center gap-2 px-2 py-1.5 border rounded-lg border-n-strong"},ZMe={class:"flex items-center gap-1"},QMe={class:"text-xs font-medium text-n-slate-12"},JMe={__name:"IssueHeader",props:{identifier:{type:String,required:!0},issueUrl:{type:String,required:!0}},emits:["unlinkIssue"],setup(e,{emit:t}){const n=e,s=t,o=()=>{s("unlinkIssue")},a=()=>{window.open(n.issueUrl,"_blank")};return(i,r)=>{const l=M("fluent-icon");return p(),v("div",XMe,[h("div",qMe,[h("div",ZMe,[y(l,{icon:"linear",size:"16",class:"text-[#5E6AD2]","view-box":"0 0 19 19"}),h("span",QMe,A(e.identifier),1)]),r[0]||(r[0]=h("span",{class:"w-px h-3 text-n-weak bg-n-weak"},null,-1)),y(oe,{link:"",xs:"",slate:"",icon:"i-lucide-arrow-up-right",class:"!size-4",onClick:a})]),y(oe,{ghost:"",xs:"",slate:"",icon:"i-lucide-unlink",onClick:o})])}}},e3e={class:"flex flex-col gap-4"},t3e={class:"flex flex-col w-full"},n3e={class:"mt-2 text-sm font-medium text-n-slate-12"},s3e={key:0,class:"mt-1 text-sm text-n-slate-11 line-clamp-3"},a3e={class:"flex flex-col gap-2"},o3e={class:"flex items-center gap-2"},i3e={key:0,class:"flex items-center gap-1.5"},r3e={class:"text-xs capitalize truncate text-n-slate-12"},l3e={key:1,class:"w-px h-3 bg-n-slate-4"},c3e={class:"flex items-center gap-1"},u3e={class:"text-xs text-n-slate-12"},d3e={key:2,class:"w-px h-3 bg-n-slate-4"},p3e={key:3,class:"flex items-center gap-1.5"},h3e={class:"text-xs text-n-slate-12"},m3e={key:0,class:"flex flex-wrap"},f3e={__name:"LinearIssueItem",props:{linkedIssue:{type:Object,required:!0}},emits:["unlinkIssue"],setup(e,{emit:t}){const n=e,s=t,{linkedIssue:o}=n,a={1:"Urgent",2:"High",3:"Medium",4:"Low"},i=C(()=>o.issue),r=C(()=>{const d=i.value.assignee;return d?{name:d.name,thumbnail:d.avatarUrl}:null}),l=C(()=>{var d;return((d=i.value.labels)==null?void 0:d.nodes)||[]}),c=C(()=>a[i.value.priority]),u=()=>{s("unlinkIssue",o.id,o.issue.identifier)};return(d,m)=>{var g,T;const f=M("woot-label");return p(),v("div",e3e,[h("div",t3e,[y(JMe,{identifier:i.value.identifier,"link-id":N(o).id,"issue-url":i.value.url,onUnlinkIssue:u},null,8,["identifier","link-id","issue-url"]),h("h3",n3e,A(i.value.title),1),i.value.description?(p(),v("p",s3e,A(i.value.description),1)):w("",!0)]),h("div",a3e,[h("div",o3e,[r.value?(p(),v("div",i3e,[y(ts,{src:r.value.thumbnail,name:r.value.name,size:16},null,8,["src","name"]),h("span",r3e,A(r.value.name),1)])):w("",!0),r.value?(p(),v("div",l3e)):w("",!0),h("div",c3e,[y(Rt,{icon:"i-lucide-activity",class:"size-4",style:Ht({color:(g=i.value.state)==null?void 0:g.color})},null,8,["style"]),h("span",u3e,A((T=i.value.state)==null?void 0:T.name),1)]),c.value?(p(),v("div",d3e)):w("",!0),c.value?(p(),v("div",p3e,[y(b_,{priority:c.value.toLowerCase()},null,8,["priority"]),h("span",h3e,A(c.value),1)])):w("",!0)]),l.value.length?(p(),v("div",m3e,[(p(!0),v(pe,null,Ne(l.value,S=>(p(),$(f,{key:S.id,title:S.name,description:S.description,color:S.color,variant:"smooth",small:""},null,8,["title","description","color"]))),128))])):w("",!0)])])}}},g3e={class:"px-4 pt-3 pb-2"},_3e={key:0,class:"flex justify-center p-8"},v3e={key:1,class:"flex justify-center p-4"},b3e={class:"text-sm text-n-slate-11"},E3e={key:2,class:"max-h-[300px] overflow-y-auto"},T3e={__name:"IssuesList",props:{conversationId:{type:[Number,String],required:!0}},setup(e){const t=e,{t:n}=Me(),s=nn(),o=X([]),a=X(!1),i=X(!1),r=s.getCurrentAccountId,l=C(()=>s.getConversationById.value(t.conversationId)||{}),c=C(()=>o.value.length>0),u=async()=>{a.value=!0,o.value=[];try{const g=await mi.getLinkedIssue(t.conversationId);o.value=g.data||[]}catch{}finally{a.value=!1}},d=async(g,T)=>{try{await mi.unlinkIssue(g,T,t.conversationId),Pt(Uf.UNLINK_ISSUE),o.value=o.value.filter(S=>S.id!==g),ce(n("INTEGRATION_SETTINGS.LINEAR.UNLINK.SUCCESS"))}catch(S){const _=Ur(S,n("INTEGRATION_SETTINGS.LINEAR.UNLINK.ERROR"));ce(_)}},m=()=>{i.value=!0},f=()=>{i.value=!1,u()};return ct(()=>t.conversationId,()=>{u()}),dt(()=>{u()}),(g,T)=>{const S=M("woot-modal");return p(),v("div",null,[h("div",g3e,[y(oe,{ghost:"",xs:"",icon:"i-lucide-plus",label:g.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK_BUTTON"),onClick:m},null,8,["label"])]),a.value?(p(),v("div",_3e,[y(gs)])):c.value?(p(),v("div",E3e,[(p(!0),v(pe,null,Ne(o.value,_=>(p(),$(f3e,{key:_.id,class:"px-4 pt-3 pb-4 border-b border-n-weak last:border-b-0","linked-issue":_,onUnlinkIssue:d},null,8,["linked-issue"]))),128))])):(p(),v("div",v3e,[h("p",b3e,A(g.$t("INTEGRATION_SETTINGS.LINEAR.NO_LINKED_ISSUES")),1)])),y(S,{show:i.value,"onUpdate:show":T[0]||(T[0]=_=>i.value=_),"on-close":f,"close-on-backdrop-click":!1,class:"!items-start [&>div]:!top-12 [&>div]:sticky"},{default:K(()=>[y(HMe,{conversation:l.value,"account-id":N(r),onClose:f},null,8,["conversation","account-id"])]),_:1},8,["show"])])}}},y3e={class:"flex flex-col p-3"},S3e={class:"w-12 h-12 mb-3"},A3e=["src"],I3e=["src"],C3e={class:"flex-1 mb-4"},O3e={class:"mb-1.5 text-sm font-medium text-n-slate-12"},N3e={key:0,class:"text-sm text-n-slate-11"},w3e={key:1,class:"text-sm text-n-slate-11"},Nm="linear",R3e={__name:"LinearSetupCTA",setup(e){const{isAdmin:t}=ka(),s=nn().getCurrentAccountId,o=C(()=>At(`accounts/${s.value}/settings/integrations/${Nm}`)),a=()=>{window.open(o.value,"_blank")};return(i,r)=>(p(),v("div",y3e,[h("div",S3e,[h("img",{src:`/dashboard/images/integrations/${Nm}.png`,class:"object-contain w-full h-full border rounded-md shadow-sm border-n-weak dark:hidden dark:bg-n-alpha-2"},null,8,A3e),h("img",{src:`/dashboard/images/integrations/${Nm}-dark.png`,class:"hidden object-contain w-full h-full border rounded-md shadow-sm border-n-weak dark:block"},null,8,I3e)]),h("div",C3e,[h("h3",O3e,A(i.$t("INTEGRATION_SETTINGS.LINEAR.CTA.TITLE")),1),N(t)?(p(),v("p",N3e,A(i.$t("INTEGRATION_SETTINGS.LINEAR.CTA.DESCRIPTION")),1)):(p(),v("p",w3e,A(i.$t("INTEGRATION_SETTINGS.LINEAR.CTA.AGENT_DESCRIPTION")),1))]),N(t)?(p(),$(oe,{key:0,faded:"",slate:"",onClick:a},{default:K(()=>[Re(A(i.$t("INTEGRATION_SETTINGS.LINEAR.CTA.BUTTON_TEXT")),1)]),_:1})):w("",!0)]))}},x3e={class:"w-full"},$3e={class:"pb-8 list-group px-2"},M3e={key:0,class:"conversation--actions"},L3e={key:1,class:"conversation--actions"},k3e={key:2},D3e={key:3},P3e={key:4},B3e={key:6},F3e={key:7},U3e={key:8},G3e={__name:"ContactPanel",props:{conversationId:{type:[Number,String],required:!0},inboxId:{type:Number,default:void 0}},setup(e){const t=e,{updateUISettings:n,isContactSidebarItemOpen:s,conversationSidebarItemsOrder:o,toggleSidebarUIState:a}=ln(),i=X(!1),r=X([]),l=Oe("getCurrentAccountId"),c=Oe("accounts/isFeatureEnabledonAccount"),u=Xs("integrations/getIntegration","shopify"),d=C(()=>u.value.enabled),m=Xs("integrations/getIntegration","linear"),f=C(()=>{var P;return((P=m.value)==null?void 0:P.enabled)||!1}),g=c.value(l.value,_t.LINEAR),T=pt(),S=Oe("getSelectedChat"),_=C(()=>t.conversationId),E=Oe("conversationMetadata/getConversationMetadata"),b=C(()=>E.value(_.value)),I=C(()=>b.value.additional_attributes||{}),R=C(()=>{var P;return(P=S.value.meta)==null?void 0:P.channel}),O=Oe("contacts/getContact"),x=C(()=>{var P,k;return(k=(P=S.value.meta)==null?void 0:P.sender)==null?void 0:k.id}),L=C(()=>O.value(x.value)),F=C(()=>L.value.additional_attributes||{}),D=()=>{x.value&&T.dispatch("contacts/show",{id:x.value})};ct(x,(P,k)=>{P&&P!==k&&D()});const V=()=>{i.value=!1,n({conversation_sidebar_items_order:r.value})},B=()=>{n({is_contact_sidebar_open:!1,is_copilot_panel_open:!1})};return dt(()=>{r.value=o.value,D(),T.dispatch("attributes/get",0),T.dispatch("integrations/get","linear")}),(P,k)=>{const U=M("woot-feature-toggle");return p(),v("div",x3e,[y(lI,{title:P.$t("CONVERSATION.SIDEBAR.CONTACT"),onClose:B},null,8,["title"]),y(Qxe,{contact:L.value,"channel-type":R.value},null,8,["contact","channel-type"]),h("div",$3e,[y(N(Pc),{list:r.value,animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"name",class:"flex flex-col gap-3",onStart:k[9]||(k[9]=j=>i.value=!0),onEnd:V},{item:K(({element:j})=>[j.name==="conversation_actions"?(p(),v("div",M3e,[y(xo,{title:P.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_ACTIONS"),"is-open":N(s)("is_conv_actions_open"),onToggle:k[0]||(k[0]=z=>N(a)("is_conv_actions_open",z))},{default:K(()=>[y($Ne,{"conversation-id":_.value,"inbox-id":e.inboxId},null,8,["conversation-id","inbox-id"])]),_:1},8,["title","is-open"])])):j.name==="conversation_participants"?(p(),v("div",L3e,[y(xo,{title:P.$t("CONVERSATION_PARTICIPANTS.SIDEBAR_TITLE"),"is-open":N(s)("is_conv_participants_open"),onToggle:k[1]||(k[1]=z=>N(a)("is_conv_participants_open",z))},{default:K(()=>[y(XNe,{"conversation-id":_.value,"inbox-id":e.inboxId},null,8,["conversation-id","inbox-id"])]),_:1},8,["title","is-open"])])):j.name==="conversation_info"?(p(),v("div",k3e,[y(xo,{title:P.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_INFO"),"is-open":N(s)("is_conv_details_open"),compact:"",onToggle:k[2]||(k[2]=z=>N(a)("is_conv_details_open",z))},{default:K(()=>[y(U$e,{"conversation-attributes":I.value,"contact-attributes":F.value},null,8,["conversation-attributes","contact-attributes"])]),_:1},8,["title","is-open"])])):j.name==="contact_attributes"?(p(),v("div",D3e,[y(xo,{title:P.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_ATTRIBUTES"),"is-open":N(s)("is_contact_attributes_open"),compact:"",onToggle:k[3]||(k[3]=z=>N(a)("is_contact_attributes_open",z))},{default:K(()=>[y(rI,{"attribute-type":"contact_attribute","attribute-from":"conversation_contact_panel","contact-id":L.value.id,"empty-state-message":P.$t("CONVERSATION_CUSTOM_ATTRIBUTES.NO_RECORDS_FOUND")},null,8,["contact-id","empty-state-message"])]),_:1},8,["title","is-open"])])):j.name==="previous_conversation"?(p(),v("div",P3e,[L.value.id?(p(),$(xo,{key:0,title:P.$t("CONVERSATION_SIDEBAR.ACCORDION.PREVIOUS_CONVERSATION"),"is-open":N(s)("is_previous_conv_open"),compact:"",onToggle:k[4]||(k[4]=z=>N(a)("is_previous_conv_open",z))},{default:K(()=>[y(ROe,{"contact-id":L.value.id,"conversation-id":_.value},null,8,["contact-id","conversation-id"])]),_:1},8,["title","is-open"])):w("",!0)])):j.name==="macros"?(p(),$(U,{key:5,"feature-key":"macros"},{default:K(()=>[y(xo,{title:P.$t("CONVERSATION_SIDEBAR.ACCORDION.MACROS"),"is-open":N(s)("is_macro_open"),compact:"",onToggle:k[5]||(k[5]=z=>N(a)("is_macro_open",z))},{default:K(()=>[y(sMe,{"conversation-id":_.value},null,8,["conversation-id"])]),_:1},8,["title","is-open"])]),_:1})):j.name==="linear_issues"&&N(g)?(p(),v("div",B3e,[y(xo,{title:P.$t("CONVERSATION_SIDEBAR.ACCORDION.LINEAR_ISSUES"),"is-open":N(s)("is_linear_issues_open"),compact:"",onToggle:k[6]||(k[6]=z=>N(a)("is_linear_issues_open",z))},{default:K(()=>[f.value?(p(),$(T3e,{key:1,"conversation-id":_.value},null,8,["conversation-id"])):(p(),$(R3e,{key:0}))]),_:1},8,["title","is-open"])])):j.name==="shopify_orders"&&d.value?(p(),v("div",F3e,[y(xo,{title:P.$t("CONVERSATION_SIDEBAR.ACCORDION.SHOPIFY_ORDERS"),"is-open":N(s)("is_shopify_orders_open"),compact:"",onToggle:k[7]||(k[7]=z=>N(a)("is_shopify_orders_open",z))},{default:K(()=>[y(SMe,{"contact-id":x.value},null,8,["contact-id"])]),_:1},8,["title","is-open"])])):j.name==="contact_notes"?(p(),v("div",U3e,[y(xo,{title:P.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_NOTES"),"is-open":N(s)("is_contact_notes_open"),compact:"",onToggle:k[8]||(k[8]=z=>N(a)("is_contact_notes_open",z))},{default:K(()=>[y(d$e,{"contact-id":x.value},null,8,["contact-id"])]),_:1},8,["title","is-open"])])):w("",!0)]),_:1},8,["list"])])])}}},V3e=Ae(G3e,[["__scopeId","data-v-69cdef8f"]]),H3e={class:"ltr:border-l rtl:border-r border-n-weak h-full overflow-hidden z-10 w-[320px] min-w-[320px] 2xl:min-w-[360px] 2xl:w-[360px] flex flex-col bg-n-background"},W3e={class:"flex flex-1 overflow-auto"},z3e={__name:"ConversationSidebar",props:{currentChat:{required:!0,type:Object}},setup(e){const{uiSettings:t}=ln(),n=C(()=>{const{is_contact_sidebar_open:s}=t.value;return s?0:null});return(s,o)=>(p(),v("div",H3e,[h("div",W3e,[re(y(V3e,{"conversation-id":e.currentChat.id,"inbox-id":e.currentChat.inbox_id},null,8,["conversation-id","inbox-id"]),[[Jt,n.value===0]])])]))}},j3e={components:{ChatList:vbe,ConversationBox:XA,PopOverSearch:mOe,CmdBarConversationSnooze:qA,SidepanelSwitch:gOe,ConversationSidebar:z3e},beforeRouteLeave(e,t,n){this.conversationId&&this.$store.dispatch("clearSelectedState"),n()},props:{inboxId:{type:[String,Number],default:0},conversationId:{type:[String,Number],default:0},label:{type:String,default:""},teamId:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0}},setup(){const{uiSettings:e,updateUISettings:t}=ln(),{accountId:n}=zn();return{uiSettings:e,updateUISettings:t,accountId:n}},data(){return{showSearchModal:!1}},computed:{...lt({chatList:"getAllConversations",currentChat:"getSelectedChat",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),showConversationList(){return this.isOnExpandedLayout?!this.conversationId:!0},showMessageView(){return this.conversationId?!0:!this.isOnExpandedLayout},isOnExpandedLayout(){const{LAYOUT_TYPES:{CONDENSED:e}}=It,{conversation_display_type:t=e}=this.uiSettings;return t!==e},shouldShowSidebar(){if(!this.currentChat.id)return!1;const{is_contact_sidebar_open:e}=this.uiSettings;return e},showPopOverSearch(){return!this.isFeatureEnabledonAccount(this.accountId,_t.CHATWOOT_V4)}},watch:{conversationId(){this.fetchConversationIfUnavailable()}},created(){this.conversationId||this.$store.dispatch("clearSelectedState")},mounted(){this.$store.dispatch("agents/get"),this.$store.dispatch("portals/index"),this.initialize(),this.$watch("$store.state.route",()=>this.initialize()),this.$watch("chatList.length",()=>{this.setActiveChat()})},methods:{onConversationLoad(){this.fetchConversationIfUnavailable()},initialize(){this.$store.dispatch("setActiveInbox",this.inboxId),this.setActiveChat()},toggleConversationLayout(){const{LAYOUT_TYPES:e}=It,{conversation_display_type:t=e.CONDENSED}=this.uiSettings,n=t===e.CONDENSED?e.EXPANDED:e.CONDENSED;this.updateUISettings({conversation_display_type:n,previously_used_conversation_display_type:n})},fetchConversationIfUnavailable(){if(!this.conversationId)return;this.findConversation()||this.$store.dispatch("getConversation",this.conversationId)},findConversation(){const e=parseInt(this.conversationId,10),[t]=this.chatList.filter(n=>n.id===e);return t},setActiveChat(){if(this.conversationId){const e=this.findConversation();if(!e||e.id===this.currentChat.id)return;const{messageId:t}=this.$route.query;this.$store.dispatch("setActiveChat",{data:e,after:t}).then(()=>{wt.emit(jt.SCROLL_TO_MESSAGE,{messageId:t})})}else this.$store.dispatch("clearSelectedState")},onSearch(){this.showSearchModal=!0},closeSearch(){this.showSearchModal=!1}}},K3e={class:"flex w-full h-full min-w-0"};function Y3e(e,t,n,s,o,a){const i=M("PopOverSearch"),r=M("ChatList"),l=M("SidepanelSwitch"),c=M("ConversationBox"),u=M("ConversationSidebar"),d=M("CmdBarConversationSnooze");return p(),v("section",K3e,[y(r,{"show-conversation-list":a.showConversationList,"conversation-inbox":n.inboxId,label:n.label,"team-id":n.teamId,"conversation-type":n.conversationType,"folders-id":n.foldersId,"is-on-expanded-layout":a.isOnExpandedLayout,onConversationLoad:a.onConversationLoad},{default:K(()=>[a.showPopOverSearch?(p(),$(i,{key:0,"is-on-expanded-layout":a.isOnExpandedLayout,onToggleConversationLayout:a.toggleConversationLayout},null,8,["is-on-expanded-layout","onToggleConversationLayout"])):w("",!0)]),_:1},8,["show-conversation-list","conversation-inbox","label","team-id","conversation-type","folders-id","is-on-expanded-layout","onConversationLoad"]),a.showMessageView?(p(),$(c,{key:0,"inbox-id":n.inboxId,"is-on-expanded-layout":a.isOnExpandedLayout},{default:K(()=>[e.currentChat.id?(p(),$(l,{key:0})):w("",!0)]),_:1},8,["inbox-id","is-on-expanded-layout"])):w("",!0),a.shouldShowSidebar?(p(),$(u,{key:1,"current-chat":e.currentChat},null,8,["current-chat"])):w("",!0),y(d)])}const Bs=Ae(j3e,[["render",Y3e]]),Fs=["administrator","agent","conversation_manage","conversation_unassigned_manage","conversation_participating_manage"],X3e={routes:[{path:At("accounts/:accountId/dashboard"),name:"home",meta:{permissions:Fs},component:Bs,props:()=>({inboxId:0})},{path:At("accounts/:accountId/conversations/:conversation_id"),name:"inbox_conversation",meta:{permissions:Fs},component:Bs,props:e=>({inboxId:0,conversationId:e.params.conversation_id})},{path:At("accounts/:accountId/inbox/:inbox_id"),name:"inbox_dashboard",meta:{permissions:Fs},component:Bs,props:e=>({inboxId:e.params.inbox_id})},{path:At("accounts/:accountId/inbox/:inbox_id/conversations/:conversation_id"),name:"conversation_through_inbox",meta:{permissions:Fs},component:Bs,props:e=>({conversationId:e.params.conversation_id,inboxId:e.params.inbox_id})},{path:At("accounts/:accountId/label/:label"),name:"label_conversations",meta:{permissions:Fs},component:Bs,props:e=>({label:e.params.label})},{path:At("accounts/:accountId/label/:label/conversations/:conversation_id"),name:"conversations_through_label",meta:{permissions:Fs},component:Bs,props:e=>({conversationId:e.params.conversation_id,label:e.params.label})},{path:At("accounts/:accountId/team/:teamId"),name:"team_conversations",meta:{permissions:Fs},component:Bs,props:e=>({teamId:e.params.teamId})},{path:At("accounts/:accountId/team/:teamId/conversations/:conversationId"),name:"conversations_through_team",meta:{permissions:Fs},component:Bs,props:e=>({conversationId:e.params.conversationId,teamId:e.params.teamId})},{path:At("accounts/:accountId/custom_view/:id"),name:"folder_conversations",meta:{permissions:Fs},component:Bs,props:e=>({foldersId:e.params.id})},{path:At("accounts/:accountId/custom_view/:id/conversations/:conversation_id"),name:"conversations_through_folders",meta:{permissions:Fs},component:Bs,props:e=>({conversationId:e.params.conversation_id,foldersId:e.params.id})},{path:At("accounts/:accountId/mentions/conversations"),name:"conversation_mentions",meta:{permissions:Fs},component:Bs,props:()=>({conversationType:"mention"})},{path:At("accounts/:accountId/mentions/conversations/:conversationId"),name:"conversation_through_mentions",meta:{permissions:Fs},component:Bs,props:e=>({conversationId:e.params.conversationId,conversationType:"mention"})},{path:At("accounts/:accountId/unattended/conversations"),name:"conversation_unattended",meta:{permissions:Fs},component:Bs,props:()=>({conversationType:"unattended"})},{path:At("accounts/:accountId/unattended/conversations/:conversationId"),name:"conversation_through_unattended",meta:{permissions:Fs},component:Bs,props:e=>({conversationId:e.params.conversationId,conversationType:"unattended"})},{path:At("accounts/:accountId/participating/conversations"),name:"conversation_participating",meta:{permissions:Fs},component:Bs,props:()=>({conversationType:"participating"})},{path:At("accounts/:accountId/participating/conversations/:conversationId"),name:"conversation_through_participating",meta:{permissions:Fs},component:Bs,props:e=>({conversationId:e.params.conversationId,conversationType:"participating"})}]},q3e={class:"flex items-center"},Z3e=["placeholder","value"],Q3e={__name:"SearchHeader",emits:["search"],setup(e,{emit:t}){const n=t,s=X(""),o=X(!1),a=Is("searchInput"),i=d=>{d.key==="/"&&document.activeElement.tagName!=="INPUT"?(d.preventDefault(),a.value.focus()):d.key==="Escape"&&document.activeElement.tagName==="INPUT"&&(d.preventDefault(),a.value.blur())},r=Uo(d=>n("search",d.length>1||d.match(/^[0-9]+$/)?d:""),500),l=d=>{s.value=d.target.value,r(s.value)},c=()=>{o.value=!0},u=()=>{o.value=!1};return dt(()=>{a.value.focus(),document.addEventListener("keydown",i)}),zo(()=>{document.removeEventListener("keydown",i)}),(d,m)=>{const f=M("fluent-icon"),g=M("woot-label");return p(),v("div",{class:se(["input-container rounded-xl transition-[border-bottom] duration-[0.2s] ease-[ease-in-out] relative flex items-center py-2 px-4 h-14 gap-2 border border-solid bg-n-alpha-black2",{"border-n-brand":o.value,"border-n-weak":!o.value}])},[h("div",q3e,[y(f,{icon:"search",class:se(["icon",{"text-n-blue-text":o.value,"text-n-slate-10":!o.value}]),"aria-hidden":"true"},null,8,["class"])]),h("input",{ref_key:"searchInput",ref:a,type:"search",class:"reset-base outline-none w-full m-0 bg-transparent border-transparent shadow-none text-n-slate-12 dark:text-n-slate-12 active:border-transparent active:shadow-none hover:border-transparent hover:shadow-none focus:border-transparent focus:shadow-none",placeholder:d.$t("SEARCH.INPUT_PLACEHOLDER"),value:s.value,onFocus:c,onBlur:u,onInput:l},null,40,Z3e),y(g,{title:d.$t("SEARCH.PLACEHOLDER_KEYBINDING"),"show-close":!1,small:"",class:"!m-0 whitespace-nowrap !bg-n-slate-3 dark:!bg-n-solid-3 !border-n-weak dark:!border-n-strong"},null,8,["title"])],2)}}},J3e={class:"mt-1 border-b border-n-weak"},eLe={__name:"SearchTabs",props:{tabs:{type:Array,default:()=>[]},selectedTab:{type:Number,default:0}},emits:["tabChange"],setup(e,{emit:t}){const n=e,s=t,o=X(n.selectedTab);ct(()=>n.selectedTab,(i,r)=>{i!==r&&(o.value=n.selectedTab)});const a=i=>{o.value=i,s("tabChange",n.tabs[i].key)};return(i,r)=>{const l=M("woot-tabs-item"),c=M("woot-tabs");return p(),v("div",J3e,[y(c,{index:o.value,border:!1,onChange:a},{default:K(()=>[(p(!0),v(pe,null,Ne(e.tabs,(u,d)=>(p(),$(l,{key:u.key,index:d,name:u.name,count:u.count,"show-badge":u.showBadge},null,8,["index","name","count","show-badge"]))),128))]),_:1},8,["index"])])}}},tLe={class:"mx-0 my-2"},nLe={key:0,class:"sticky top-0 p-2 z-50 mb-0.5 bg-n-background"},sLe={class:"text-sm text-n-slate-12"},aLe={key:2,class:"flex items-center justify-center px-4 py-6 m-2 rounded-xl bg-n-slate-2 dark:bg-n-solid-1"},oLe={class:"mx-2 my-0 text-center text-n-slate-11"},Sp={__name:"SearchResultSection",props:{title:{type:String,default:""},empty:{type:Boolean,default:!1},query:{type:String,default:""},showTitle:{type:Boolean,default:!0},isFetching:{type:Boolean,default:!0}},setup(e){const t=e,n=C(()=>t.title.toLowerCase());return(s,o)=>{const a=M("woot-loading-state"),i=M("fluent-icon");return p(),v("section",tLe,[e.showTitle?(p(),v("div",nLe,[h("h3",sLe,A(e.title),1)])):w("",!0),We(s.$slots,"default"),e.isFetching?(p(),$(a,{key:1,message:e.empty?s.$t("SEARCH.SEARCHING_DATA"):s.$t("SEARCH.LOADING_DATA")},null,8,["message"])):w("",!0),e.empty&&!e.isFetching?(p(),v("div",aLe,[y(i,{icon:"info",size:"16px",class:"text-n-slate-11"}),h("p",oLe,A(s.$t("SEARCH.EMPTY_STATE",{item:n.value,query:e.query})),1)])):w("",!0)])}}},iLe={class:"flex-grow min-w-0 ml-2"},rLe={class:"flex items-center min-w-0 justify-between gap-1 mb-1"},lLe={class:"flex"},cLe={class:"flex items-center justify-center h-5 ml-1 rounded bg-n-slate-3 dark:bg-n-solid-3 w-fit rtl:ml-0 rtl:mr-1"},uLe={class:"text-xs font-normal min-w-0 truncate text-n-slate-11 dark:text-n-slate-11"},dLe={class:"flex flex-wrap gap-x-2 gap-y-1.5"},pLe={class:"text-xs font-normal text-n-slate-11 dark:text-n-slate-11"},cI={__name:"SearchResultConversationItem",props:{id:{type:Number,default:0},inbox:{type:Object,default:()=>({})},name:{type:String,default:""},email:{type:String,default:""},accountId:{type:[String,Number],default:""},createdAt:{type:[String,Date,Number],default:""},messageId:{type:Number,default:0},emailSubject:{type:String,default:""}},setup(e){const t=e,n=C(()=>{const i={};return t.messageId&&(i.messageId=t.messageId),At(`accounts/${t.accountId}/conversations/${t.id}`,i)}),s=rs(t.createdAt),o=C(()=>[{label:"SEARCH.FROM",value:t.name,show:!!t.name},{label:"SEARCH.EMAIL",value:t.email,show:!!t.email},{label:"SEARCH.EMAIL_SUBJECT",value:t.emailSubject,show:!!t.emailSubject}]),a=C(()=>o.value.filter(i=>i.show));return(i,r)=>{const l=M("woot-label"),c=M("router-link");return p(),$(c,{to:n.value,class:"flex p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:K(()=>[y(ts,{name:"chats",size:24,"icon-name":"i-lucide-messages-square",class:"[&>span]:rounded"}),h("div",iLe,[h("div",rLe,[h("div",lLe,[y(l,{class:"!bg-n-slate-3 dark:!bg-n-solid-3 !border-n-weak dark:!border-n-strong m-0",title:`#${e.id}`,"show-close":!1,small:""},null,8,["title"]),h("div",cLe,[y(o_,{inbox:e.inbox,class:"mr-2 rtl:mr-0 rtl:ml-2 bg-n-slate-3 dark:bg-n-solid-3 text-n-slate-11 dark:text-n-slate-11"},null,8,["inbox"])])]),h("span",uLe,A(N(s)),1)]),h("div",dLe,[(p(!0),v(pe,null,Ne(a.value,u=>(p(),v("h5",{key:u.label,class:"m-0 text-sm min-w-0 text-n-slate-12 dark:text-n-slate-12 truncate"},[h("span",pLe,A(i.$t(u.label))+": ",1),Re(" "+A(u.value),1)]))),128))]),We(i.$slots,"default")])]),_:3},8,["to"])}}},hLe={key:0,class:"space-y-1.5 list-none"},mLe={__name:"SearchResultConversationsList",props:{conversations:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=e,n=Oe("getCurrentAccountId"),s=C(()=>t.conversations.map(o=>{var a;return{...o,mail_subject:((a=o.additional_attributes)==null?void 0:a.mail_subject)||""}}));return(o,a)=>(p(),$(Sp,{title:o.$t("SEARCH.SECTION.CONVERSATIONS"),empty:!e.conversations.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:K(()=>[e.conversations.length?(p(),v("ul",hLe,[(p(!0),v(pe,null,Ne(s.value,i=>(p(),v("li",{key:i.id},[y(cI,{id:i.id,name:i.contact.name,email:i.contact.email,"account-id":N(n),inbox:i.inbox,"created-at":i.created_at,"email-subject":i.mail_subject},null,8,["id","name","email","account-id","inbox","created-at","email-subject"])]))),128))])):w("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},fLe={key:0,class:"absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t to-transparent from-n-background flex items-end justify-center pb-2"},gLe={__name:"ReadMore",props:{shrink:{type:Boolean,default:!1}},emits:["expand"],setup(e){return(t,n)=>(p(),v("div",null,[h("div",{class:se({"max-h-[100px] overflow-hidden relative":e.shrink})},[We(t.$slots,"default"),e.shrink?(p(),v("div",fLe,[y(oe,{label:t.$t("SEARCH.READ_MORE"),icon:"i-lucide-chevrons-down",blue:"",xs:"",faded:"",class:"backdrop-filter backdrop-blur-[2px]",onClick:n[0]||(n[0]=Fe(s=>t.$emit("expand"),["prevent"]))},null,8,["label"])])):w("",!0)],2)]))}},_Le={class:"header"},vLe={class:"text-n-slate-11"},bLe={class:"message-content"},ELe={__name:"MessageContent",props:{author:{type:String,default:""},content:{type:String,default:""},searchTerm:{type:String,default:""}},setup(e){const t=e,{highlightContent:n}=ya(),s=Is("messageContainer"),o=X(!1),a=()=>{const l=s.value;if(l){const c=l.querySelector(".message-content");o.value=c.offsetHeight>150}},i=l=>{var c=document.createTextNode(l),u=document.createElement("p");return u.appendChild(c),u.innerText},r=(l="")=>{const c=i(l);return n(c,t.searchTerm,"searchkey--highlight")};return dt(()=>{ct(()=>s.value,a),tn(a)}),(l,c)=>{const u=qe("dompurify-html");return p(),v("blockquote",{ref_key:"messageContainer",ref:s,class:"message border-l-2 border-n-weak"},[h("p",_Le,[h("strong",vLe,A(e.author),1),Re(" "+A(l.$t("SEARCH.WROTE")),1)]),y(gLe,{shrink:o.value,onExpand:c[0]||(c[0]=d=>o.value=!1)},{default:K(()=>[re(h("div",bLe,null,512),[[u,r(e.content)]])]),_:1},8,["shrink"])],512)}}},TLe=Ae(ELe,[["__scopeId","data-v-86c53b44"]]),yLe={key:0,class:"space-y-1.5 list-none"},SLe={__name:"SearchResultMessagesList",props:{messages:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const{t}=Me(),n=Oe("getCurrentAccountId"),s=o=>o&&o.sender&&o.sender.name?o.sender.name:t("SEARCH.BOT_LABEL");return(o,a)=>(p(),$(Sp,{title:o.$t("SEARCH.SECTION.MESSAGES"),empty:!e.messages.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:K(()=>[e.messages.length?(p(),v("ul",yLe,[(p(!0),v(pe,null,Ne(e.messages,i=>(p(),v("li",{key:i.id},[y(cI,{id:i.conversation_id,"account-id":N(n),inbox:i.inbox,"created-at":i.created_at,"message-id":i.id},{default:K(()=>[y(TLe,{author:s(i),content:i.content,"search-term":e.query},null,8,["author","content","search-term"])]),_:2},1032,["id","account-id","inbox","created-at","message-id"])]))),128))])):w("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},ALe={class:"ml-2 rtl:mr-2 min-w-0 rtl:ml-0"},ILe={class:"text-sm name truncate min-w-0 text-n-slate-12"},CLe={class:"grid items-center m-0 gap-1 text-sm grid-cols-[minmax(0,1fr)_auto_auto]"},OLe=["title"],NLe={key:1,class:"text-n-slate-10"},wLe={key:2,class:"text-n-slate-12"},RLe={__name:"SearchResultContactItem",props:{id:{type:[String,Number],default:0},email:{type:String,default:""},phone:{type:String,default:""},name:{type:String,default:""},thumbnail:{type:String,default:""},accountId:{type:[String,Number],default:0}},setup(e){const t=e,n=C(()=>At(`accounts/${t.accountId}/contacts/${t.id}`));return(s,o)=>{const a=M("router-link");return p(),$(a,{to:n.value,class:"flex items-start p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:K(()=>[y(ts,{name:e.name,src:e.thumbnail,size:24,"rounded-full":"",class:"mt-0.5"},null,8,["name","src"]),h("div",ALe,[h("h5",ILe,A(e.name),1),h("p",CLe,[e.email?(p(),v("span",{key:0,class:"truncate text-n-slate-12",title:e.email},A(e.email),9,OLe)):w("",!0),e.phone?(p(),v("span",NLe,"•")):w("",!0),e.phone?(p(),v("span",wLe,A(e.phone),1)):w("",!0)])])]),_:1},8,["to"])}}},xLe={key:0,class:"space-y-1.5 list-none"},$Le={__name:"SearchResultContactsList",props:{contacts:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=Oe("getCurrentAccountId");return(n,s)=>(p(),$(Sp,{title:n.$t("SEARCH.SECTION.CONTACTS"),empty:!e.contacts.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:K(()=>[e.contacts.length?(p(),v("ul",xLe,[(p(!0),v(pe,null,Ne(e.contacts,o=>(p(),v("li",{key:o.id},[y(RLe,{id:o.id,name:o.name,email:o.email,phone:o.phone_number,"account-id":N(t),thumbnail:o.thumbnail},null,8,["id","name","email","phone","account-id","thumbnail"])]))),128))])):w("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},MLe={class:"flex items-center justify-center w-6 h-6 mt-0.5 rounded bg-n-slate-3"},LLe={class:"ltr:ml-2 rtl:mr-2 min-w-0 flex-1"},kLe={class:"flex items-center gap-2"},DLe={class:"text-sm font-medium truncate min-w-0 text-n-slate-12"},PLe={key:0,class:"text-xs font-medium whitespace-nowrap capitalize bg-n-slate-3 px-1 py-0.5 rounded text-n-slate-10"},BLe={key:0,class:"mt-1 text-sm text-n-slate-11 line-clamp-2"},YE=300,FLe={__name:"SearchResultArticleItem",props:{id:{type:[String,Number],default:0},title:{type:String,default:""},description:{type:String,default:""},category:{type:String,default:""},locale:{type:String,default:""},content:{type:String,default:""},portalSlug:{type:String,required:!0},accountId:{type:[String,Number],default:0}},setup(e){const t=e,n=C(()=>At(`accounts/${t.accountId}/portals/${t.portalSlug}/${t.locale}/articles/edit/${t.id}`)),s=C(()=>{if(!t.content)return t.description||"";const a=new wd(t.content).plainText.trim();return a.length>YE?`${a.substring(0,YE)}...`:a});return(o,a)=>{const i=M("router-link");return p(),$(i,{to:n.value,class:"flex items-start p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:K(()=>[h("div",MLe,[y(Rt,{icon:"i-lucide-library-big",class:"text-n-slate-10"})]),h("div",LLe,[h("div",kLe,[h("h5",DLe,A(e.title),1),e.category?(p(),v("span",PLe,A(e.category),1)):w("",!0)]),s.value?(p(),v("p",BLe,A(s.value),1)):w("",!0)])]),_:1},8,["to"])}}},ULe={key:0,class:"space-y-1.5 list-none"},GLe={__name:"SearchResultArticlesList",props:{articles:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=Oe("getCurrentAccountId");return(n,s)=>(p(),$(Sp,{title:n.$t("SEARCH.SECTION.ARTICLES"),empty:!e.articles.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:K(()=>[e.articles.length?(p(),v("ul",ULe,[(p(!0),v(pe,null,Ne(e.articles,o=>(p(),v("li",{key:o.id},[y(FLe,{id:o.id,title:o.title,description:o.description,content:o.content,"portal-slug":o.portal_slug,locale:o.locale,"account-id":N(t),category:o.category_name,status:o.status},null,8,["id","title","description","content","portal-slug","locale","account-id","category","status"])]))),128))])):w("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},VLe={class:"flex flex-col w-full h-full bg-n-background"},HLe={class:"flex w-full p-4"},WLe={class:"flex flex-col flex-grow w-full h-full overflow-hidden"},zLe={class:"w-full max-w-4xl mx-auto"},jLe={class:"flex flex-col w-full px-4"},KLe={class:"flex-grow w-full h-full overflow-y-auto"},YLe={class:"w-full max-w-4xl mx-auto px-4 pb-6"},XLe={key:0},qLe={key:1,class:"flex justify-center mt-4 mb-6"},ZLe={key:1,class:"flex flex-col items-center justify-center px-4 py-6 mt-8 rounded-md"},QLe={class:"m-2 text-center text-n-slate-11"},JLe={key:2,class:"flex flex-col items-center justify-center px-4 py-6 mt-8 text-center rounded-md"},eke={class:"text-center margin-bottom-0"},tke={class:"m-2 text-center text-n-slate-11"},nke=15,ske={__name:"SearchView",setup(e){const t=xn(),n=pt(),{t:s}=Me(),o=X("all"),a=X(""),i=X({contacts:1,conversations:1,messages:1,articles:1}),r=Oe("conversationSearch/getContactRecords"),l=Oe("conversationSearch/getConversationRecords"),c=Oe("conversationSearch/getMessageRecords"),u=Oe("conversationSearch/getArticleRecords"),d=Oe("conversationSearch/getUIFlags"),m=(Ee,le)=>Ee.value.map(_e=>({..._e,type:le})),f=C(()=>m(r,"contact")),g=C(()=>m(l,"conversation")),T=C(()=>m(c,"message")),S=C(()=>m(u,"article")),_=C(()=>o.value==="all"),E=Ee=>_.value?Ee.value.slice(0,5):Ee.value,b=C(()=>E(f)),I=C(()=>E(g)),R=C(()=>E(T)),O=C(()=>E(S)),x=Ee=>C(()=>o.value===Ee||_.value),L=x("contacts"),F=x("conversations"),D=x("messages"),V=x("articles"),{shouldShow:B,isFeatureFlagEnabled:P}=cl(),k={all:{permissions:[Lr,...Gn,...Rs,kr],count:()=>null},contacts:{permissions:[...Gn,Lr],count:()=>f.value.length},conversations:{permissions:[...Gn,...Rs],count:()=>g.value.length},messages:{permissions:[...Gn,...Rs],count:()=>T.value.length},articles:{permissions:[...Gn,kr],featureFlag:_t.HELP_CENTER,count:()=>S.value.length}},U=C(()=>Object.entries(k).map(([Ee,le])=>({key:Ee,name:s(`SEARCH.TABS.${Ee.toUpperCase()}`),count:le.count(),showBadge:Ee!=="all",permissions:le.permissions,featureFlag:le.featureFlag})).filter(Ee=>B(Ee.featureFlag,Ee.permissions,null)&&P(Ee.featureFlag))),j=C(()=>[{permissions:[...Gn,Lr],count:()=>b.value.length},{permissions:[...Gn,...Rs],count:()=>I.value.length+R.value.length},{permissions:[...Gn,kr],featureFlag:_t.HELP_CENTER,count:()=>O.value.length}].filter(le=>B(le.featureFlag,le.permissions,null)&&P(le.featureFlag)).map(le=>le.count()).reduce((le,_e)=>le+_e,0)),z=C(()=>{const Ee=U.value.findIndex(le=>le.key===o.value);return Ee>=0?Ee:0}),Y=C(()=>{const{contact:Ee,message:le,conversation:_e,article:$e,isFetching:He}=d.value;return He||Ee.isFetching||le.isFetching||_e.isFetching||$e.isFetching}),te=C(()=>j.value===0&&d.value.isSearchCompleted&&_.value&&!Y.value&&a.value),Z=C(()=>d.value.isSearchCompleted&&j.value!==0||Y.value||!_.value&&a.value&&!Y.value),G=C(()=>{if(!a.value||Y.value||o.value==="all")return!1;const Ee={contacts:f.value,conversations:g.value,messages:T.value,articles:S.value}[o.value];return(Ee==null?void 0:Ee.length)>0&&Ee.length===i.value[o.value]*nke}),H=C(()=>{var Ee,le,_e,$e;return{contacts:((Ee=f.value)==null?void 0:Ee.length)>5&&_.value,conversations:((le=g.value)==null?void 0:le.length)>5&&_.value,messages:((_e=T.value)==null?void 0:_e.length)>5&&_.value,articles:(($e=S.value)==null?void 0:$e.length)>5&&_.value}}),W=()=>{i.value={contacts:1,conversations:1,messages:1,articles:1},n.dispatch("conversationSearch/clearSearchResults")},J=Ee=>{a.value=Ee,W(),Ee&&(Pt(ua.SEARCH_CONVERSATION),n.dispatch("conversationSearch/fullSearch",{q:Ee,page:1}))},ee=()=>{window.history.length>2?t.go(-1):t.push({name:"home"}),W()},ge=()=>{const Ee={contacts:"conversationSearch/contactSearch",conversations:"conversationSearch/conversationSearch",messages:"conversationSearch/messageSearch",articles:"conversationSearch/articleSearch"};if(d.value.isFetching||o.value==="all")return;const le=o.value;i.value[le]+=1,n.dispatch(Ee[le],{q:a.value,page:i.value[le]})};return dt(()=>{n.dispatch("conversationSearch/clearSearchResults")}),zo(()=>{a.value="",n.dispatch("conversationSearch/clearSearchResults")}),(Ee,le)=>{const _e=M("fluent-icon");return p(),v("div",VLe,[h("div",HLe,[y(oe,{label:N(s)("GENERAL_SETTINGS.BACK"),icon:"i-lucide-chevron-left",faded:"",primary:"",sm:"",onClick:ee},null,8,["label"])]),h("section",WLe,[h("div",zLe,[h("div",jLe,[y(Q3e,{onSearch:J}),a.value?(p(),$(eLe,{key:0,tabs:U.value,"selected-tab":z.value,onTabChange:le[0]||(le[0]=$e=>o.value=$e)},null,8,["tabs","selected-tab"])):w("",!0)])]),h("div",KLe,[h("div",YLe,[Z.value?(p(),v("div",XLe,[y(ja,{permissions:[...N(Gn),N(Lr)],class:"flex flex-col justify-center"},{default:K(()=>[N(L)?(p(),$($Le,{key:0,"is-fetching":N(d).contact.isFetching,contacts:b.value,query:a.value,"show-title":_.value},null,8,["is-fetching","contacts","query","show-title"])):w("",!0),H.value.contacts?(p(),$(oe,{key:1,label:N(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:le[1]||(le[1]=$e=>o.value="contacts")},null,8,["label"])):w("",!0)]),_:1},8,["permissions"]),y(ja,{permissions:[...N(Gn),...N(Rs)],class:"flex flex-col justify-center"},{default:K(()=>[N(D)?(p(),$(SLe,{key:0,"is-fetching":N(d).message.isFetching,messages:R.value,query:a.value,"show-title":_.value},null,8,["is-fetching","messages","query","show-title"])):w("",!0),H.value.messages?(p(),$(oe,{key:1,label:N(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:le[2]||(le[2]=$e=>o.value="messages")},null,8,["label"])):w("",!0)]),_:1},8,["permissions"]),y(ja,{permissions:[...N(Gn),...N(Rs)],class:"flex flex-col justify-center"},{default:K(()=>[N(F)?(p(),$(mLe,{key:0,"is-fetching":N(d).conversation.isFetching,conversations:I.value,query:a.value,"show-title":_.value},null,8,["is-fetching","conversations","query","show-title"])):w("",!0),H.value.conversations?(p(),$(oe,{key:1,label:N(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:le[3]||(le[3]=$e=>o.value="conversations")},null,8,["label"])):w("",!0)]),_:1},8,["permissions"]),N(P)(N(_t).HELP_CENTER)?(p(),$(ja,{key:0,permissions:[...N(Gn),N(kr)],"feature-flag":N(_t).HELP_CENTER,class:"flex flex-col justify-center"},{default:K(()=>[N(V)?(p(),$(GLe,{key:0,"is-fetching":N(d).article.isFetching,articles:O.value,query:a.value,"show-title":_.value},null,8,["is-fetching","articles","query","show-title"])):w("",!0),H.value.articles?(p(),$(oe,{key:1,label:N(s)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:le[4]||(le[4]=$e=>o.value="articles")},null,8,["label"])):w("",!0)]),_:1},8,["permissions","feature-flag"])):w("",!0),G.value?(p(),v("div",qLe,[_.value?w("",!0):(p(),$(oe,{key:0,label:N(s)("SEARCH.LOAD_MORE"),icon:"i-lucide-cloud-download",slate:"",sm:"",faded:"",onClick:ge},null,8,["label"]))])):w("",!0)])):te.value?(p(),v("div",ZLe,[y(_e,{icon:"info",size:"16px",class:"text-n-slate-11"}),h("p",QLe,A(N(s)("SEARCH.EMPTY_STATE_FULL",{query:a.value})),1)])):a.value?w("",!0):(p(),v("div",JLe,[h("p",eke,[y(_e,{icon:"search",size:"24px",class:"text-n-slate-11"})]),h("p",tke,A(N(s)("SEARCH.EMPTY_STATE_DEFAULT")),1)]))])])])])}}},ake=[{path:At("accounts/:accountId/search"),name:"search",meta:{permissions:[...Gn,...Rs,Lr,kr]},component:ske}],oke={class:"relative"},ike={key:0,class:"absolute top-full mt-1 ltr:right-0 rtl:left-0 flex flex-col gap-4 bg-n-alpha-3 backdrop-blur-[100px] border border-n-weak w-72 rounded-xl p-4"},rke={class:"flex items-center justify-between gap-2"},lke={class:"text-sm text-n-slate-12"},cke={class:"flex items-center justify-between gap-2"},uke={class:"text-sm text-n-slate-12"},dke={__name:"ContactSortMenu",props:{activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""}},emits:["update:sort"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(!1),i=[{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.NAME"),value:"name"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.EMAIL"),value:"email"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.COMPANY"),value:"company_name"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.COUNTRY"),value:"country"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.CITY"),value:"city"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.LAST_ACTIVITY"),value:"last_activity_at"},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.CREATED_AT"),value:"created_at"}],r=[{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.OPTIONS.ASCENDING"),value:""},{label:o("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.OPTIONS.DESCENDING"),value:"-"}],l=ju(n,"activeSort"),c=ju(n,"activeOrdering"),u=C(()=>{const g=i.find(T=>T.value===l.value);return(g==null?void 0:g.label)||o("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.LABEL")}),d=C(()=>{const g=r.find(T=>T.value===c.value);return(g==null?void 0:g.label)||o("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.LABEL")}),m=g=>{s("update:sort",{sort:g,order:n.activeOrdering})},f=g=>{s("update:sort",{sort:n.activeSort,order:g})};return(g,T)=>{const S=qe("on-clickaway");return p(),v("div",oke,[y(oe,{icon:"i-lucide-arrow-down-up",color:"slate",size:"sm",variant:"ghost",class:se(a.value?"bg-n-alpha-2":""),onClick:T[0]||(T[0]=_=>a.value=!a.value)},null,8,["class"]),a.value?re((p(),v("div",ike,[h("div",rke,[h("span",lke,A(N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.LABEL")),1),y(yd,{"model-value":l.value,options:i,label:u.value,"onUpdate:modelValue":m},null,8,["model-value","label"])]),h("div",cke,[h("span",uke,A(N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.LABEL")),1),y(yd,{"model-value":c.value,options:r,label:d.value,"onUpdate:modelValue":f},null,8,["model-value","label"])])])),[[S,()=>a.value=!1]]):w("",!0)])}}},pke={class:"relative"},hke={__name:"ContactMoreActions",emits:["add","import","export"],setup(e,{emit:t}){const n=t,{t:s}=Me(),o=[{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.ADD_CONTACT"),action:"add",value:"add",icon:"i-lucide-plus"},{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.EXPORT_CONTACT"),action:"export",value:"export",icon:"i-lucide-upload"},{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.IMPORT_CONTACT"),action:"import",value:"import",icon:"i-lucide-download"}],a=X(!1),i=({action:r})=>{r==="add"?n("add"):r==="import"?n("import"):r==="export"&&n("export")};return(r,l)=>{const c=qe("on-clickaway");return re((p(),v("div",pke,[y(oe,{icon:"i-lucide-ellipsis-vertical",color:"slate",variant:"ghost",size:"sm",class:se(a.value?"bg-n-alpha-2":""),onClick:l[0]||(l[0]=u=>a.value=!a.value)},null,8,["class"]),a.value?(p(),$(Hs,{key:0,"menu-items":o,class:"ltr:right-0 rtl:left-0 mt-1 w-52 top-full",onAction:l[1]||(l[1]=u=>i(u))})):w("",!0)])),[[c,()=>a.value=!1]])}}},mke={class:"sticky top-0 z-10"},fke={class:"flex items-center justify-between w-full h-20 px-6 gap-2 mx-auto max-w-[60rem]"},gke={class:"text-xl font-medium truncate text-n-slate-12"},_ke={class:"flex items-center flex-shrink-0 gap-4"},vke={key:0,class:"flex items-center gap-2"},bke={class:"flex items-center gap-2"},Eke={key:0,class:"relative"},Tke={key:0,class:"absolute top-0 right-0 w-2 h-2 rounded-full bg-n-brand"},yke={__name:"ContactHeader",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},headerTitle:{type:String,required:!0},buttonLabel:{type:String,default:""},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""},isSegmentsView:{type:Boolean,default:!1},hasActiveFilters:{type:Boolean,default:!1},isLabelView:{type:Boolean,default:!1},isActiveView:{type:Boolean,default:!1}},emits:["search","filter","update:sort","add","import","export","createSegment","deleteSegment"],setup(e,{emit:t}){const n=t;return(s,o)=>(p(),v("header",mke,[h("div",fke,[h("span",gke,A(e.headerTitle),1),h("div",_ke,[e.showSearch?(p(),v("div",vke,[y(_n,{"model-value":e.searchValue,type:"search",placeholder:s.$t("CONTACTS_LAYOUT.HEADER.SEARCH_PLACEHOLDER"),"custom-input-class":["h-8 [&:not(.focus)]:!border-transparent bg-n-alpha-2 dark:bg-n-solid-1 ltr:!pl-8 !py-1 rtl:!pr-8"],onInput:o[0]||(o[0]=a=>n("search",a.target.value))},{prefix:K(()=>[y(Rt,{icon:"i-lucide-search",class:"absolute -translate-y-1/2 text-n-slate-11 size-4 top-1/2 ltr:left-2 rtl:right-2"})]),_:1},8,["model-value","placeholder"])])):w("",!0),h("div",bke,[!e.isLabelView&&!e.isActiveView?(p(),v("div",Eke,[y(oe,{id:"toggleContactsFilterButton",icon:e.isSegmentsView?"i-lucide-pen-line":"i-lucide-list-filter",color:"slate",size:"sm",class:"relative w-8",variant:"ghost",onClick:o[1]||(o[1]=a=>n("filter"))},{default:K(()=>[e.hasActiveFilters&&!e.isSegmentsView?(p(),v("div",Tke)):w("",!0)]),_:1},8,["icon"]),We(s.$slots,"filter")])):w("",!0),e.hasActiveFilters&&!e.isSegmentsView&&!e.isLabelView&&!e.isActiveView?(p(),$(oe,{key:1,icon:"i-lucide-save",color:"slate",size:"sm",variant:"ghost",onClick:o[2]||(o[2]=a=>n("createSegment"))})):w("",!0),e.isSegmentsView&&!e.isLabelView&&!e.isActiveView?(p(),$(oe,{key:2,icon:"i-lucide-trash",color:"slate",size:"sm",variant:"ghost",onClick:o[3]||(o[3]=a=>n("deleteSegment"))})):w("",!0),y(dke,{"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"onUpdate:sort":o[4]||(o[4]=a=>n("update:sort",a))},null,8,["active-sort","active-ordering"]),y(hke,{onAdd:o[5]||(o[5]=a=>n("add")),onImport:o[6]||(o[6]=a=>n("import")),onExport:o[7]||(o[7]=a=>n("export"))})]),o[8]||(o[8]=h("div",{class:"w-px h-4 bg-n-strong"},null,-1)),y(yp,null,{trigger:K(({toggle:a})=>[y(oe,{label:e.buttonLabel,size:"sm",onClick:a},null,8,["label","onClick"])]),_:1})])])]))}},Ske={class:"absolute z-50 w-full mt-1 transition-opacity duration-200 border rounded-md shadow-lg bg-n-solid-1 border-n-strong"},Ake={class:"relative border-b border-n-strong"},Ike=["value","placeholder"],Cke=["aria-multiselectable"],Oke=["aria-selected","onClick"],Nke={key:0,class:"flex-shrink-0 i-lucide-check size-4 text-n-slate-11"},wke={key:0,class:"px-3 py-2 text-sm text-slate-600 dark:text-slate-300"},uI={__name:"ComboBoxDropdown",props:hn({open:{type:Boolean,required:!0},options:{type:Array,required:!0},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},multiple:{type:Boolean,default:!1},selectedValues:{type:[String,Number,Array],default:()=>[]}},{searchValue:{type:String,default:""},searchValueModifiers:{}}),emits:hn(["select","search"],["update:searchValue"]),setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=wn(e,"searchValue"),r=X(null),l=u=>Array.isArray(s.selectedValues)?s.selectedValues.includes(u.value):u.value===s.selectedValues,c=u=>{i.value=u.target.value,o("search",u.target.value)};return t({focus:()=>{var u;return(u=r.value)==null?void 0:u.focus()}}),(u,d)=>re((p(),v("div",Ske,[h("div",Ake,[d[0]||(d[0]=h("span",{class:"absolute i-lucide-search top-2.5 size-4 left-3"},null,-1)),h("input",{ref_key:"searchInput",ref:r,value:i.value,type:"search",placeholder:e.searchPlaceholder||N(a)("COMBOBOX.SEARCH_PLACEHOLDER"),class:"reset-base w-full py-2 pl-10 pr-2 text-sm focus:outline-none border-none rounded-t-md bg-n-solid-1 text-slate-900 dark:text-slate-50",onInput:c},null,40,Ike)]),h("ul",{class:"py-1 mb-0 overflow-auto max-h-60",role:"listbox","aria-multiselectable":e.multiple},[(p(!0),v(pe,null,Ne(e.options,m=>(p(),v("li",{key:m.value,class:se(["flex items-center justify-between w-full gap-2 px-3 py-2 text-sm transition-colors duration-150 cursor-pointer hover:bg-n-alpha-2",{"bg-n-alpha-2":l(m)}]),role:"option","aria-selected":l(m),onClick:f=>o("select",m)},[h("span",{class:se([{"font-medium":l(m)},"text-n-slate-12"])},A(m.label),3),l(m)?(p(),v("span",Nke)):w("",!0)],10,Oke))),128)),e.options.length===0?(p(),v("li",wke,A(e.emptyState||N(a)("COMBOBOX.EMPTY_STATE")),1)):w("",!0)],8,Cke)],512)),[[Jt,e.open]])}},Ai={__name:"ComboBox",props:{options:{type:Array,required:!0,validator:e=>e.every(t=>"value"in t&&"label"in t)},placeholder:{type:String,default:""},modelValue:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},message:{type:String,default:""},hasError:{type:Boolean,default:!1},useApiResults:{type:Boolean,default:!1}},emits:["update:modelValue","search"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(n.modelValue),i=X(!1),r=X(""),l=X(null),c=X(null),u=C(()=>{if(n.useApiResults&&r.value)return n.options;const T=r.value.toLowerCase();return n.options.filter(S=>S.label.toLowerCase().includes(T))}),d=C(()=>n.placeholder||o("COMBOBOX.PLACEHOLDER")),m=C(()=>{const T=n.options.find(S=>S.value===a.value);return(T==null?void 0:T.label)??d.value}),f=T=>{a.value=T.value,s("update:modelValue",T.value),i.value=!1,r.value=""},g=()=>{n.disabled||(i.value=!i.value,i.value&&(r.value="",tn(()=>{var T;return(T=l.value)==null?void 0:T.focus()})))};return ct(()=>n.modelValue,T=>{a.value=T}),(T,S)=>(p(),v("div",{ref_key:"comboboxRef",ref:c,class:se(["relative w-full min-w-0",{"cursor-not-allowed":e.disabled,"group/combobox":!e.disabled}]),onClick:S[3]||(S[3]=Fe(()=>{},["prevent"]))},[y(N(il),{onTrigger:S[2]||(S[2]=_=>i.value=!1)},{default:K(()=>[y(oe,{variant:"outline",color:e.hasError&&!i.value?"ruby":i.value?"blue":"slate",label:m.value,"trailing-icon":"",disabled:e.disabled,class:se(["justify-between w-full !px-3 !py-2.5 text-n-slate-12 font-normal group-hover/combobox:border-n-slate-6 [&:not(.focused)]:hover:enabled:outline-n-slate-6 [&:not(.focused)]:dark:hover:enabled:outline-n-slate-6 [&:not(.focused)]:dark:outline-n-weak focus:outline-n-brand",{focused:i.value}]),icon:i.value?"i-lucide-chevron-up":"i-lucide-chevron-down",onClick:g},null,8,["color","label","disabled","class","icon"]),y(uI,{ref_key:"dropdownRef",ref:l,"search-value":r.value,"onUpdate:searchValue":S[0]||(S[0]=_=>r.value=_),open:i.value,options:u.value,"search-placeholder":e.searchPlaceholder,"empty-state":e.emptyState,"selected-values":a.value,onSearch:S[1]||(S[1]=_=>s("search",_)),onSelect:f},null,8,["search-value","open","options","search-placeholder","empty-state","selected-values"]),e.message?(p(),v("p",{key:0,class:se(["mt-2 mb-0 text-xs truncate transition-all duration-500 ease-in-out",{"text-n-ruby-9":e.hasError,"text-n-slate-11":!e.hasError}])},A(e.message),3)):w("",!0)]),_:1})],2))}},Rke={class:"flex items-center flex-shrink-0"},xke={key:0,class:"inline-flex justify-center text-sm whitespace-nowrap"},$ke={key:0,class:"text-sm left-[38px] top-2.5 text-n-slate-11 ltr:!pl-1 rtl:!pr-1"},Mke={key:0,class:"min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out text-n-ruby-9 dark:text-n-ruby-9"},Lke={__name:"PhoneNumberInput",props:hn({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},showBorder:{type:Boolean,default:!0}},{modelValue:{type:[String,Number],default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=wn(e,"modelValue"),{t:s}=Me(),o=X(!1),a=X(""),i=X(b0()),r=X(v0()),l=X(""),c={phoneNumber:{minLength:Qt(2),numeric:VC},activeDialCode:{required:Ye,validDialCode:R=>xa.some(O=>O.dial_code===R)}},u=bt(c,{phoneNumber:l,activeDialCode:r}),d=C(()=>u.value.$invalid),m=C(()=>xa.map(R=>({value:R.id,label:R.name,dialCode:R.dial_code,emoji:R.emoji,isSelected:String(i.value)===String(R.id),action:"phoneNumberInput"}))),f=C(()=>{const R=a.value.toLowerCase();return m.value.filter(({label:O,dialCode:x,value:L})=>[O,x,L].some(F=>F.toLowerCase().includes(R)))}),g=C(()=>i.value?m.value.find(R=>R.value===i.value):""),T=C(()=>{const R="outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 disabled:outline-n-ruby-8 dark:disabled:outline-n-ruby-8",O="has-[:focus]:outline-n-brand dark:has-[:focus]:outline-n-brand";return t.showBorder?d.value?R:`${O} outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 disabled:outline-n-weak dark:disabled:outline-n-weak`:d.value?R:`outline-transparent ${O}`}),S=C(()=>u.value.$dirty?u.value.activeDialCode.$invalid?s("PHONE_INPUT.DIAL_CODE_ERROR"):u.value.phoneNumber.$invalid&&s("PHONE_INPUT.ERROR"):""),_=R=>{const O=R?`${r.value}${R}`:"";n.value=O},E=async({value:R,dialCode:O})=>{!R||!o.value||(i.value=R,r.value=O,a.value="",o.value=!1,!u.value.$invalid&&l.value&&_(l.value))},b=()=>{o.value=!o.value},I=()=>{o.value=!1};return ct(l,async R=>{await u.value.$touch(),u.value.$invalid||_(R)}),ct(n,R=>{const O=rd(R);O&&(O!=null&&O.country&&(i.value=O.country),O!=null&&O.countryCallingCode&&(r.value=`+${O.countryCallingCode}`),l.value=R.replace(`+${O.countryCallingCode}`,""))},{immediate:!0}),(R,O)=>{const x=qe("on-clickaway");return p(),v("div",null,[re((p(),v("div",{class:se(["relative flex items-center h-8 transition-all duration-500 ease-in-out outline outline-1 outline-offset-[-1px] rounded-lg bg-n-alpha-black2",[T.value,{"cursor-not-allowed opacity-50":e.disabled}]])},[y(_n,{modelValue:l.value,"onUpdate:modelValue":O[0]||(O[0]=L=>l.value=L),type:"tel",placeholder:e.placeholder,disabled:e.disabled,"custom-input-class":"!border-0 !outline-none h-8 !py-0.5 !bg-transparent ltr:!pl-1 rtl:!pr-1",class:"w-full !flex-row"},{prefix:K(()=>{var L;return[h("div",Rke,[y(oe,{label:((L=g.value)==null?void 0:L.emoji)||"",color:"slate",size:"sm",icon:g.value?"i-lucide-chevron-down":"i-lucide-globe","trailing-icon":"",disabled:e.disabled,type:"button",class:"!h-[1.875rem] top-1 ltr:ml-px rtl:mr-px !px-2 outline-0 !outline-none !rounded-lg border-0 ltr:!rounded-r-none rtl:!rounded-l-none",onClick:b},{default:K(()=>{var F;return[g.value?(p(),v("span",xke,A((F=g.value)==null?void 0:F.emoji),1)):w("",!0)]}),_:1},8,["label","icon","disabled"]),g.value?(p(),v("span",$ke,A(r.value),1)):w("",!0)])]}),_:1},8,["modelValue","placeholder","disabled"]),o.value?(p(),$(Hs,{key:0,"menu-items":f.value,"show-search":"",class:"z-[100] w-48 mt-2 overflow-y-auto ltr:left-0 rtl:right-0 top-full max-h-52",onAction:E},null,8,["menu-items"])):w("",!0)],2)),[[x,()=>I()]]),S.value?(p(),v(pe,{key:0},[S.value?(p(),v("p",Mke,A(S.value),1)):w("",!0)],64)):w("",!0)])}}},kke={class:"flex flex-col gap-6"},Dke={class:"flex flex-col items-start gap-2"},Pke={class:"py-1 text-sm font-medium text-n-slate-12"},Bke={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},Fke={class:"flex flex-col items-start gap-2"},Uke={class:"py-1 text-sm font-medium text-n-slate-12"},Gke={class:"flex flex-wrap gap-2"},Vke=["onUpdate:modelValue","placeholder","size"],E_={__name:"ContactsForm",props:{contactData:{type:Object,default:null},isDetailsView:{type:Boolean,default:!1},isNewContact:{type:Boolean,default:!1}},emits:["update"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i={FIRST_NAME:{field:"firstName"},LAST_NAME:{field:"lastName"},EMAIL_ADDRESS:{field:"email"},PHONE_NUMBER:{field:"phoneNumber"},CITY:{field:"additionalAttributes.city"},COUNTRY:{field:"additionalAttributes.countryCode"},BIO:{field:"additionalAttributes.description"},COMPANY_NAME:{field:"additionalAttributes.companyName"}},r={LINKEDIN:"i-ri-linkedin-box-fill",FACEBOOK:"i-ri-facebook-circle-fill",INSTAGRAM:"i-ri-instagram-line",TWITTER:"i-ri-twitter-x-fill",GITHUB:"i-ri-github-fill"},l={id:0,name:"",email:"",firstName:"",lastName:"",phoneNumber:"",additionalAttributes:{description:"",companyName:"",countryCode:"",country:"",city:"",socialProfiles:{facebook:"",github:"",instagram:"",linkedin:"",twitter:""}}},c=ls({...l}),d=bt({firstName:{required:Ye},email:{email:Ii}},c),m=C(()=>d.value.$invalid),f=()=>{if(s.isNewContact)return;const{id:L,name:F="",email:D,phoneNumber:V,additionalAttributes:B={}}=s.contactData||{},{firstName:P,lastName:k}=pO(F||""),{description:U="",companyName:j="",countryCode:z="",country:Y="",city:te="",socialProfiles:Z={}}=B||{};Object.assign(c,{id:L,name:F,firstName:P,lastName:k,email:D,phoneNumber:V,additionalAttributes:{description:U,companyName:j,countryCode:z,country:Y,city:te,socialProfiles:Z}})},g=C(()=>xa.map(({name:L,id:F})=>({label:L,value:F}))),T=C(()=>Object.keys(i).map(L=>({key:L,placeholder:a(`CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.FORM.${L}.PLACEHOLDER`)}))),S=C(()=>Object.entries(r).map(([L,F])=>({key:L,placeholder:a(`CONTACTS_LAYOUT.CARD.SOCIAL_MEDIA.FORM.${L}.PLACEHOLDER`),icon:F}))),_=L=>{var D;const F=(D=i[L])==null?void 0:D.field;return["firstName","email"].includes(F)},E=L=>{var F;return(F=i[L])==null?void 0:F.field},b=L=>{var D;const F=(D=i[L])==null?void 0:D.field;return F?C({get:()=>{var P,k;if(F==="firstName"||F==="lastName")return((P=c[F])==null?void 0:P.toString())||"";const[V,B]=F.split(".");return((k=B?c[V][B]:c[V])==null?void 0:k.toString())||""},set:async V=>{if(F==="firstName"||F==="lastName")c[F]=V,c.name=`${c.firstName} ${c.lastName}`.trim();else{const[P,k]=F.split(".");k?c[P][k]=V:c[P]=V}if(await d.value.$validate()){const{firstName:P,lastName:k,...U}=c;o("update",U)}}}):null},I=L=>{var F;return _(L)&&((F=d.value[E(L)])!=null&&F.$error)?"error":"info"},R=L=>{const F=xa.find(D=>D.id===L);c.additionalAttributes.country=(F==null?void 0:F.name)||"",o("update",c)},O=()=>{d.value.$reset()},x=()=>{Object.assign(c,l)};return ct(()=>s.contactData,f,{immediate:!0,deep:!0}),t({state:c,resetValidation:O,isFormInvalid:m,resetForm:x}),(L,F)=>(p(),v("div",kke,[h("div",Dke,[h("span",Pke,A(N(a)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.TITLE")),1),h("div",Bke,[(p(!0),v(pe,null,Ne(T.value,D=>(p(),v(pe,{key:D.key},[D.key==="COUNTRY"?(p(),$(Ai,{key:0,modelValue:c.additionalAttributes.countryCode,"onUpdate:modelValue":[F[0]||(F[0]=V=>c.additionalAttributes.countryCode=V),R],options:g.value,placeholder:D.placeholder,class:se(["[&>div>button]:h-8",{"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:!outline-transparent":!e.isDetailsView,"[&>div>button]:!bg-n-alpha-black2":e.isDetailsView}])},null,8,["modelValue","options","placeholder","class"])):D.key==="PHONE_NUMBER"?(p(),$(Lke,{key:1,modelValue:b(D.key).value,"onUpdate:modelValue":V=>b(D.key).value=V,placeholder:D.placeholder,"show-border":e.isDetailsView},null,8,["modelValue","onUpdate:modelValue","placeholder","show-border"])):(p(),$(_n,{key:2,modelValue:b(D.key).value,"onUpdate:modelValue":V=>b(D.key).value=V,placeholder:D.placeholder,"message-type":I(D.key),"custom-input-class":`h-8 !pt-1 !pb-1 ${e.isDetailsView?"":"[&:not(.error,.focus)]:!outline-transparent"}`,class:"w-full",onInput:V=>_(D.key)&&N(d)[E(D.key)].$touch(),onBlur:V=>_(D.key)&&N(d)[E(D.key)].$touch()},null,8,["modelValue","onUpdate:modelValue","placeholder","message-type","custom-input-class","onInput","onBlur"]))],64))),128))])]),h("div",Fke,[h("span",Uke,A(N(a)("CONTACTS_LAYOUT.CARD.SOCIAL_MEDIA.TITLE")),1),h("div",Gke,[(p(!0),v(pe,null,Ne(S.value,D=>(p(),v("div",{key:D.key,class:se(["flex items-center h-8 gap-2 px-2 rounded-lg",{"bg-n-alpha-2 dark:bg-n-solid-2":e.isDetailsView,"bg-n-alpha-2 dark:bg-n-solid-3":!e.isDetailsView}])},[y(Rt,{icon:D.icon,class:"flex-shrink-0 text-n-slate-11 size-4"},null,8,["icon"]),re(h("input",{"onUpdate:modelValue":V=>c.additionalAttributes.socialProfiles[D.key.toLowerCase()]=V,class:"w-auto min-w-[100px] text-sm bg-transparent outline-none reset-base text-n-slate-12 dark:text-n-slate-12 placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10",placeholder:D.placeholder,size:D.placeholder.length,onInput:F[1]||(F[1]=V=>o("update",c))},null,40,Vke),[[mt,c.additionalAttributes.socialProfiles[D.key.toLowerCase()]]])],2))),128))])])]))}},Hke={class:"flex items-center justify-between w-full gap-3"},dI={__name:"CreateNewContactDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=Me(),a=X(null),i=X(null),r=X(null),l=Oe("contacts/getUIFlags"),c=C(()=>l.value.isCreating),u=g=>{r.value=g},d=async()=>{r.value&&s("create",r.value)},m=()=>{var g;(g=i.value)==null||g.resetForm(),a.value.close()},f=()=>{a.value.close()};return t({dialogRef:a,contactsFormRef:i,onSuccess:m}),(g,T)=>(p(),$(cs,{ref_key:"dialogRef",ref:a,width:"3xl",onConfirm:d},{footer:K(()=>{var S;return[h("div",Hke,[y(oe,{label:N(o)("DIALOG.BUTTONS.CANCEL"),variant:"link",type:"reset",class:"h-10 hover:!no-underline hover:text-n-brand",onClick:f},null,8,["label"]),y(oe,{type:"submit",label:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.SAVE_CONTACT"),color:"blue",disabled:(S=i.value)==null?void 0:S.isFormInvalid,"is-loading":c.value},null,8,["label","disabled","is-loading"])])]}),default:K(()=>[y(E_,{ref_key:"contactsFormRef",ref:i,"is-new-contact":"",onUpdate:u},null,512)]),_:1},512))}},Wke={__name:"ContactExportDialog",emits:["export"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=Me(),a=sn(),i=X(null),r=Oe("customViews/getContactCustomViews"),l=Oe("contacts/getAppliedContactFilters"),c=Oe("contacts/getUIFlags"),u=C(()=>c.value.isExporting),d=C(()=>a.params.segmentId),m=C(()=>d.value?r.value.find(T=>T.id===Number(d.value)):void 0),f=async()=>{let T={payload:[]};d.value&&m.value?T=m.value.query:Object.keys(l.value).length>0&&(T=po(l.value)),s("export",{...T,label:a.params.label||""})},g=async()=>{var T;await f(),(T=i.value)==null||T.close()};return t({dialogRef:i}),(T,S)=>(p(),$(cs,{ref_key:"dialogRef",ref:i,title:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.TITLE"),description:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.DESCRIPTION"),"confirm-button-label":N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.CONFIRM"),"is-loading":u.value,"disable-confirm-button":u.value,onConfirm:g},null,8,["title","description","confirm-button-label","is-loading","disable-confirm-button"]))}},zke={class:"mb-0 text-sm text-n-slate-11"},jke={class:"flex flex-col gap-2"},Kke={class:"flex items-center gap-2"},Yke={class:"text-sm text-n-slate-12 whitespace-nowrap"},Xke={class:"flex items-center justify-between w-full gap-2"},qke={key:0,class:"text-sm text-n-slate-12"},Zke={key:2,class:"flex items-center gap-1"},Qke="/downloads/import-contacts-sample.csv",Jke={__name:"ContactImportDialog",emits:["import"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=Me(),a=Oe("contacts/getUIFlags"),i=C(()=>a.value.isImporting),r=X(null),l=X(null),c=X(null),u=X(""),d=()=>{var S;return(S=l.value)==null?void 0:S.click()},m=S=>{const _=S.lastIndexOf("."),E=S.slice(_),b=S.slice(0,_);return b.length>20?`${b.slice(0,20)}...${E}`:S},f=()=>{var _;const S=(_=l.value)==null?void 0:_.files[0];c.value=S,u.value=S?m(S.name):""},g=()=>{c.value=null,l.value&&(l.value.value=null),u.value=""},T=async()=>{c.value&&s("import",c.value)};return t({dialogRef:r}),(S,_)=>(p(),$(cs,{ref_key:"dialogRef",ref:r,title:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.TITLE"),"confirm-button-label":N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.IMPORT"),"is-loading":i.value,"disable-confirm-button":i.value,onConfirm:T},{description:K(()=>[h("p",zke,[Re(A(N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.DESCRIPTION"))+" ",1),h("a",{href:Qke,target:"_blank",rel:"noopener noreferrer",download:"import-contacts-sample.csv",class:"text-n-blue-text"},A(N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.DOWNLOAD_LABEL")),1)])]),default:K(()=>[h("div",jke,[h("div",Kke,[h("label",Yke,A(N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.LABEL")),1),h("div",Xke,[c.value?(p(),v("span",qke,A(u.value),1)):w("",!0),c.value?(p(),v("div",Zke,[y(oe,{label:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.CHANGE"),color:"slate",variant:"ghost",size:"sm",onClick:d},null,8,["label"]),_[0]||(_[0]=h("div",{class:"w-px h-3 bg-n-strong"},null,-1)),y(oe,{icon:"i-lucide-trash",color:"slate",variant:"ghost",size:"sm",onClick:g})])):(p(),$(oe,{key:1,label:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.CHOOSE_FILE"),icon:"i-lucide-upload",color:"slate",variant:"ghost",size:"sm",class:"!w-fit",onClick:d},null,8,["label"]))])])]),h("input",{ref_key:"fileInput",ref:l,type:"file",accept:"text/csv",class:"hidden",onChange:f},null,544)]),_:1},8,["title","confirm-button-label","is-loading","disable-confirm-button"]))}},eDe=1,tDe={__name:"CreateSegmentDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=Me(),a=Oe("customViews/getUIFlags"),i=C(()=>a.value.isCreating),r=X(null),l=ls({name:""}),u=bt({name:{required:Ye}},l),d=async()=>{await u.value.$validate()&&(s("create",{name:l.name,filter_type:eDe}),l.name="",u.value.$reset())};return t({dialogRef:r}),(m,f)=>(p(),$(cs,{ref_key:"dialogRef",ref:r,title:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.TITLE"),"confirm-button-label":N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.CONFIRM"),"is-loading":i.value,"disable-confirm-button":i.value,onConfirm:d},{default:K(()=>[y(_n,{modelValue:l.name,"onUpdate:modelValue":f[0]||(f[0]=g=>l.name=g),label:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.LABEL"),placeholder:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.PLACEHOLDER"),message:N(u).name.$error?N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.ERROR"):"","message-type":N(u).name.$error?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])]),_:1},8,["title","confirm-button-label","is-loading","disable-confirm-button"]))}},nDe="contact",sDe={__name:"DeleteSegmentDialog",emits:["delete"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=Me(),a=Oe("customViews/getUIFlags"),i=C(()=>a.value.isDeleting),r=X(null),l=async()=>{s("delete",{filterType:nDe})};return t({dialogRef:r}),(c,u)=>(p(),$(cs,{ref_key:"dialogRef",ref:r,type:"alert",title:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.TITLE"),description:N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.DESCRIPTION"),"confirm-button-label":N(o)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.CONFIRM"),"is-loading":i.value,"disable-confirm-button":i.value,onConfirm:l},null,8,["title","description","confirm-button-label","is-loading","disable-confirm-button"]))}};function aDe(){const{t:e}=Me(),t=Oe("attributes/getContactAttributes"),{equalityOperators:n,containmentOperators:s,dateOperators:o,getOperatorTypes:a}=sA(),i=C(()=>aA(t.value,a,"contact"));return{filterTypes:C(()=>[{attributeKey:as.NAME,value:as.NAME,attributeName:e("CONTACTS_LAYOUT.FILTER.NAME"),label:e("CONTACTS_LAYOUT.FILTER.NAME"),inputType:"plainText",dataType:"text",filterOperators:n.value,attributeModel:"standard"},{attributeKey:as.EMAIL,value:as.EMAIL,attributeName:e("CONTACTS_LAYOUT.FILTER.EMAIL"),label:e("CONTACTS_LAYOUT.FILTER.EMAIL"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:as.PHONE_NUMBER,value:as.PHONE_NUMBER,attributeName:e("CONTACTS_LAYOUT.FILTER.PHONE_NUMBER"),label:e("CONTACTS_LAYOUT.FILTER.PHONE_NUMBER"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:as.IDENTIFIER,value:as.IDENTIFIER,attributeName:e("CONTACTS_LAYOUT.FILTER.IDENTIFIER"),label:e("CONTACTS_LAYOUT.FILTER.IDENTIFIER"),inputType:"plainText",dataType:"number",filterOperators:n.value,attributeModel:"standard"},{attributeKey:as.COUNTRY_CODE,value:as.COUNTRY_CODE,attributeName:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),label:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),inputType:"searchSelect",options:xa,dataType:"number",filterOperators:n.value,attributeModel:"additional"},{attributeKey:as.CITY,value:as.CITY,attributeName:e("CONTACTS_LAYOUT.FILTER.CITY"),label:e("CONTACTS_LAYOUT.FILTER.CITY"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:as.CREATED_AT,value:as.CREATED_AT,attributeName:e("CONTACTS_LAYOUT.FILTER.CREATED_AT"),label:e("CONTACTS_LAYOUT.FILTER.CREATED_AT"),inputType:"date",dataType:"text",filterOperators:o.value,attributeModel:"standard"},{attributeKey:as.LAST_ACTIVITY_AT,value:as.LAST_ACTIVITY_AT,attributeName:e("CONTACTS_LAYOUT.FILTER.LAST_ACTIVITY"),label:e("CONTACTS_LAYOUT.FILTER.LAST_ACTIVITY"),inputType:"date",dataType:"text",filterOperators:o.value,attributeModel:"standard"},{attributeKey:as.REFERER,value:as.REFERER,attributeName:e("CONTACTS_LAYOUT.FILTER.REFERER_LINK"),label:e("CONTACTS_LAYOUT.FILTER.REFERER_LINK"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:as.BLOCKED,value:as.BLOCKED,attributeName:e("CONTACTS_LAYOUT.FILTER.BLOCKED"),label:e("CONTACTS_LAYOUT.FILTER.BLOCKED"),inputType:"searchSelect",options:[{id:"true",name:e("CONTACTS_LAYOUT.FILTER.BLOCKED_TRUE")},{id:"false",name:e("CONTACTS_LAYOUT.FILTER.BLOCKED_FALSE")}],dataType:"text",filterOperators:n.value,attributeModel:"standard"},...i.value])}}const oDe={class:"z-40 max-w-3xl lg:w-[750px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},iDe={class:"text-base font-medium leading-6 text-n-slate-12"},rDe={key:0},lDe={class:"pb-6 border-b border-n-weak"},cDe={class:"mb-2 text-sm text-n-slate-11"},uDe=["placeholder"],dDe={class:"grid gap-4 list-none"},pDe={class:"flex justify-between gap-2"},hDe={class:"flex gap-2"},mDe={__name:"ContactsFilter",props:hn({isSegmentView:{type:Boolean,default:!1},segmentName:{type:String,default:""}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:hn(["applyFilter","updateSegment","close","clearFilters"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,{filterTypes:o}=aDe(),a=wn(e,"modelValue"),i=X(n.segmentName),r={attributeKey:"name",filterOperator:"equal_to",values:"",queryOperator:"and",attributeModel:"standard"},{t:l}=Me(),c=pt(),u=()=>{s("clearFilters"),a.value=[{...r}]},d=b=>{a.value.length===1?u():a.value.splice(b,1)},m=()=>{a.value.push({...r})},f=Is("conditionsRef"),g=()=>f.value.every(b=>b.validate()),T=()=>{g()&&s("updateSegment",a.value,i.value)};function S(){g()&&(c.dispatch("contacts/setContactFilters",As(JSON.parse(JSON.stringify(a.value)))),s("applyFilter",a.value),Pt(sr.APPLY_FILTER,{appliedFilters:a.value.map(b=>({key:b.attributeKey,operator:b.filterOperator,queryOperator:b.queryOperator}))}))}const _=C(()=>n.isSegmentView?l("CONTACTS_LAYOUT.FILTER.EDIT_SEGMENT"):l("CONTACTS_LAYOUT.FILTER.TITLE"));Sc(()=>s("close"));const E=[()=>s("close"),{ignore:["#toggleContactsFilterButton"]}];return(b,I)=>re((p(),v("div",oDe,[h("h3",iDe,A(_.value),1),n.isSegmentView?(p(),v("div",rDe,[h("label",lDe,[h("div",cDe,A(b.$t("CONTACTS_LAYOUT.FILTER.SEGMENT.LABEL")),1),re(h("input",{"onUpdate:modelValue":I[0]||(I[0]=R=>i.value=R),class:"py-1.5 px-3 text-n-slate-12 bg-n-alpha-1 text-sm rounded-lg reset-base w-full",placeholder:N(l)("CONTACTS_LAYOUT.FILTER.SEGMENT.INPUT_PLACEHOLDER")},null,8,uDe),[[mt,i.value]])])])):w("",!0),h("ul",dDe,[(p(!0),v(pe,null,Ne(a.value,(R,O)=>(p(),v(pe,{key:R.id},[O===0?(p(),$(Sd,{ref_for:!0,ref_key:"conditionsRef",ref:f,key:`filter-${R.attributeKey}-0`,"attribute-key":R.attributeKey,"onUpdate:attributeKey":x=>R.attributeKey=x,"filter-operator":R.filterOperator,"onUpdate:filterOperator":x=>R.filterOperator=x,values:R.values,"onUpdate:values":x=>R.values=x,"filter-types":N(o),"show-query-operator":!1,onRemove:x=>d(O)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","values","onUpdate:values","filter-types","onRemove"])):(p(),$(Sd,{key:`filter-${R.attributeKey}-${O}`,ref_for:!0,ref_key:"conditionsRef",ref:f,"attribute-key":R.attributeKey,"onUpdate:attributeKey":x=>R.attributeKey=x,"filter-operator":R.filterOperator,"onUpdate:filterOperator":x=>R.filterOperator=x,"query-operator":a.value[O-1].queryOperator,"onUpdate:queryOperator":x=>a.value[O-1].queryOperator=x,values:R.values,"onUpdate:values":x=>R.values=x,"show-query-operator":"","filter-types":N(o),onRemove:x=>d(O)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","query-operator","onUpdate:queryOperator","values","onUpdate:values","filter-types","onRemove"]))],64))),128))]),h("div",pDe,[y(oe,{sm:"",ghost:"",blue:"",onClick:m},{default:K(()=>[Re(A(b.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.ADD_FILTER")),1)]),_:1}),h("div",hDe,[y(oe,{sm:"",faded:"",slate:"",onClick:u},{default:K(()=>[Re(A(b.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.CLEAR_FILTERS")),1)]),_:1}),e.isSegmentView?(p(),$(oe,{key:0,sm:"",solid:"",blue:"",disabled:!i.value,onClick:T},{default:K(()=>[Re(A(b.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.UPDATE_SEGMENT")),1)]),_:1},8,["disabled"])):(p(),$(oe,{key:1,sm:"",solid:"",blue:"",onClick:S},{default:K(()=>[Re(A(b.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.APPLY_FILTERS")),1)]),_:1}))])])])),[[N(Co),E]])}},fDe={__name:"ContactListHeaderWrapper",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""},headerTitle:{type:String,default:""},segmentsId:{type:[String,Number],default:0},activeSegment:{type:Object,default:null},hasAppliedFilters:{type:Boolean,default:!1},isLabelView:{type:Boolean,default:!1},isActiveView:{type:Boolean,default:!1}},emits:["update:sort","search","applyFilter","clearFilters"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=pt(),r=xn(),l=X(null),c=X(null),u=X(null),d=X(null),m=X(null),f=X(!1),g=X([]),T=X({}),S=Oe("contacts/getAppliedContactFiltersV4"),_=Oe("attributes/getContactAttributes"),E=C(()=>s.activeSegment&&s.segmentsId!==0),b=C(()=>{var G;return(G=s.activeSegment)==null?void 0:G.name}),I=async()=>{var G,H;await((G=l.value)==null?void 0:G.contactsFormRef.resetValidation()),(H=l.value)==null||H.dialogRef.open()},R=()=>{var G;return(G=u.value)==null?void 0:G.dialogRef.open()},O=()=>{var G;return(G=c.value)==null?void 0:G.dialogRef.open()},x=()=>{var G;return(G=d.value)==null?void 0:G.dialogRef.open()},L=()=>{var G;return(G=m.value)==null?void 0:G.dialogRef.open()},F=async G=>{var H;try{await i.dispatch("contacts/create",G),(H=l.value)==null||H.onSuccess(),ce(a("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.SUCCESS_MESSAGE"))}catch(W){const J="CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION";W instanceof Oc?W.data.includes("email")?ce(a(`${J}.EMAIL_ADDRESS_DUPLICATE`)):W.data.includes("phone_number")&&ce(a(`${J}.PHONE_NUMBER_DUPLICATE`)):W instanceof nl?ce(W.data):ce(a(`${J}.ERROR_MESSAGE`))}},D=async G=>{var H;try{await i.dispatch("contacts/import",G),(H=u.value)==null||H.dialogRef.close(),ce(a("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.SUCCESS_MESSAGE")),Pt(sr.IMPORT_SUCCESS)}catch(W){ce(W.message??a("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.ERROR_MESSAGE")),Pt(sr.IMPORT_FAILURE)}},V=async G=>{try{await i.dispatch("contacts/export",G),ce(a("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.SUCCESS_MESSAGE"))}catch(H){ce(H.message||a("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.ERROR_MESSAGE"))}},B=async G=>{var H,W;try{const J={...G,query:T.value},ee=await i.dispatch("customViews/create",J);(H=d.value)==null||H.dialogRef.close(),ce(a("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.SUCCESS_MESSAGE"));const ge=(W=ee==null?void 0:ee.data)==null?void 0:W.id;if(!ge)return;r.push({name:"contacts_dashboard_segments_index",params:{segmentId:ge},query:{page:1}})}catch{ce(a("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.ERROR_MESSAGE"))}},P=async G=>{var H;try{await i.dispatch("customViews/delete",{id:Number(s.segmentsId),...G}),r.push({name:"contacts_dashboard_index",query:{page:1}}),(H=m.value)==null||H.dialogRef.close(),ce(a("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.SUCCESS_MESSAGE"))}catch{ce(a("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.ERROR_MESSAGE"))}},k=()=>{f.value=!1,g.value=[]},U=async()=>{o("clearFilters")},j=async G=>{G=As(G),T.value=po(G),o("applyFilter",po(G)),f.value=!1},z=async(G,H)=>{G=As(G);const W={...s.activeSegment,name:H,query:po(G)};await i.dispatch("customViews/update",W),k()},Y=()=>({countries:xa,filterTypes:nbe,allCustomAttributes:As(_.value)}),te=G=>{var J,ee;const H=(ee=(J=N(G))==null?void 0:J.query)==null?void 0:ee.payload;if(!Array.isArray(H))return;const W=H.map(ge=>{const Ee=fo(ge),le=Array.isArray(Ee.values)?pA(As(ge),Y()):[];return{attributeKey:Ee.attributeKey,attributeModel:Ee.attributeModel,customAttributeType:Ee.customAttributeType,filterOperator:Ee.filterOperator,queryOperator:Ee.queryOperator??"and",values:le}});g.value=[...g.value,...W]},Z=()=>{g.value=[],E.value?te(s.activeSegment):g.value=s.hasAppliedFilters?[...S.value]:[{attributeKey:"name",filterOperator:"equal_to",values:"",queryOperator:"and",attributeModel:"standard"}],f.value=!0};return t({onToggleFilters:Z}),(G,H)=>(p(),v(pe,null,[y(yke,{"show-search":e.showSearch,"search-value":e.searchValue,"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"header-title":e.headerTitle,"is-segments-view":E.value,"is-label-view":e.isLabelView,"is-active-view":e.isActiveView,"has-active-filters":e.hasAppliedFilters,"button-label":N(a)("CONTACTS_LAYOUT.HEADER.MESSAGE_BUTTON"),onSearch:H[1]||(H[1]=W=>o("search",W)),"onUpdate:sort":H[2]||(H[2]=W=>o("update:sort",W)),onAdd:I,onImport:R,onExport:O,onFilter:Z,onCreateSegment:x,onDeleteSegment:L},{filter:K(()=>[f.value?(p(),$(mDe,{key:0,modelValue:g.value,"onUpdate:modelValue":H[0]||(H[0]=W=>g.value=W),"segment-name":b.value,"is-segment-view":E.value,class:"absolute mt-1 ltr:right-0 rtl:left-0 top-full",onApplyFilter:j,onUpdateSegment:z,onClose:k,onClearFilters:U},null,8,["modelValue","segment-name","is-segment-view"])):w("",!0)]),_:1},8,["show-search","search-value","active-sort","active-ordering","header-title","is-segments-view","is-label-view","is-active-view","has-active-filters","button-label"]),y(dI,{ref_key:"createNewContactDialogRef",ref:l,onCreate:F},null,512),y(Wke,{ref_key:"contactExportDialogRef",ref:c,onExport:V},null,512),y(Jke,{ref_key:"contactImportDialogRef",ref:u,onImport:D},null,512),y(tDe,{ref_key:"createSegmentDialogRef",ref:d,onCreate:B},null,512),y(sDe,{ref_key:"deleteSegmentDialogRef",ref:m,onDelete:P},null,512)],64))}},gDe={class:"flex flex-wrap items-center w-full gap-2 mx-auto"},_De={key:0,class:"inline-flex items-center gap-2 h-7"},vDe={class:"lowercase whitespace-nowrap first-letter:capitalize text-n-slate-12"},bDe={class:"px-1 text-xs text-n-slate-10 whitespace-nowrap"},EDe={key:0,class:"content-center h-full px-1 text-xs font-medium uppercase rounded-lg text-n-slate-10"},TDe={key:1,class:"w-px h-3 rounded-lg bg-n-strong"},yDe={__name:"ActiveFilterPreview",props:{appliedFilters:{type:Array,default:()=>[]},maxVisibleFilters:{type:Number,default:2},clearButtonLabel:{type:String,default:""},moreFiltersLabel:{type:String,default:""},showClearButton:{type:Boolean,default:!0}},emits:["clearFilters","openFilter"],setup(e,{emit:t}){const n=t,s=i=>!["email"].includes(i),o=i=>({equal_to:"is",not_equal_to:"is not",contains:"contains",does_not_contain:"does not contain",is_present:"is present",is_not_present:"is not present",is_greater_than:"is greater than",is_less_than:"is less than",days_before:"days before"})[i]||Z1(i),a=i=>i?Array.isArray(i)?i.join(", "):typeof i=="object"&&i.name?i.name:i:"";return(i,r)=>(p(),v("div",gDe,[(p(!0),v(pe,null,Ne(e.appliedFilters,(l,c)=>(p(),v(pe,{key:c},[c<e.maxVisibleFilters?(p(),v("div",_De,[h("div",{class:"flex items-center h-full min-w-0 gap-1 px-2 py-1 text-xs border rounded-lg hover:bg-n-solid-2 max-w-72 border-n-weak hover:cursor-pointer",onClick:r[0]||(r[0]=u=>n("openFilter"))},[h("span",vDe,A(N(Z1)(l.attributeKey)),1),h("span",bDe,A(o(l.filterOperator)),1),l.values?(p(),v("span",{key:0,class:se(["lowercase truncate text-n-slate-12",{"first-letter:capitalize":s(l.attributeKey)}])},A(a(l.values)),3)):w("",!0)]),c<e.maxVisibleFilters-1&&c<e.appliedFilters.length-1?(p(),v("span",EDe,A(l.queryOperator),1)):w("",!0)])):w("",!0)],64))),128)),e.appliedFilters.length>e.maxVisibleFilters?(p(),v("div",{key:0,class:"inline-flex items-center content-center px-1 text-xs rounded-lg text-n-slate-10 hover:text-n-slate-11 h-7 hover:cursor-pointer",onClick:r[1]||(r[1]=l=>n("openFilter"))},A(e.moreFiltersLabel),1)):w("",!0),e.showClearButton?(p(),v("div",TDe)):w("",!0),e.showClearButton?(p(),$(oe,{key:2,label:e.clearButtonLabel,size:"xs",class:"!px-1",variant:"ghost",onClick:r[2]||(r[2]=l=>n("clearFilters"))},null,8,["label"])):w("",!0)]))}},SDe={__name:"ContactsActiveFiltersPreview",props:{activeSegment:{type:Object,default:null}},emits:["clearFilters","openFilter"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=sn(),i=Oe("contacts/getAppliedContactFiltersV4"),r=C(()=>a.params.segmentId),l=C(()=>{var f,g;const d=(g=(f=n.activeSegment)==null?void 0:f.query)==null?void 0:g.payload;return Array.isArray(d)?d.map(T=>{const S=fo(T);return{attributeKey:S.attributeKey,attributeModel:S.attributeModel,customAttributeType:S.customAttributeType,filterOperator:S.filterOperator,queryOperator:S.queryOperator??"and",values:S.values}}):[]}),c=C(()=>n.activeSegment&&r.value!==0),u=C(()=>c.value?l.value:i.value);return(d,m)=>(p(),$(yDe,{"applied-filters":u.value,"max-visible-filters":2,"more-filters-label":N(o)("CONTACTS_LAYOUT.FILTER.ACTIVE_FILTERS.MORE_FILTERS",{count:u.value.length-2}),"clear-button-label":N(o)("CONTACTS_LAYOUT.FILTER.ACTIVE_FILTERS.CLEAR_FILTERS"),"show-clear-button":!c.value,class:"max-w-[60rem] px-6",onOpenFilter:m[0]||(m[0]=f=>s("openFilter")),onClearFilters:m[1]||(m[1]=f=>s("clearFilters"))},null,8,["applied-filters","more-filters-label","clear-button-label","show-clear-button"]))}},ADe={class:"flex justify-between h-12 w-full max-w-[calc(60rem-3px)] outline outline-n-container outline-1 -outline-offset-1 mx-auto bg-n-solid-2 rounded-xl py-2 ltr:pl-4 rtl:pr-4 ltr:pr-3 rtl:pl-3 items-center before:absolute before:inset-x-0 before:-top-4 before:bg-gradient-to-t before:from-n-background before:from-10% before:dark:from-0% before:to-transparent before:h-4 before:pointer-events-none"},IDe={class:"flex items-center gap-3"},CDe={class:"min-w-0 text-sm font-normal line-clamp-1 text-n-slate-11"},ODe={class:"flex items-center gap-2"},NDe={class:"inline-flex items-center gap-2 text-sm text-n-slate-11"},wDe={class:"px-3 tabular-nums py-0.5 bg-n-alpha-black2 rounded-md"},RDe={class:"truncate"},pI={__name:"PaginationFooter",props:{currentPage:{type:Number,required:!0},totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:16},currentPageInfo:{type:String,default:""}},emits:["update:currentPage"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=C(()=>Math.ceil(n.totalItems/n.itemsPerPage)),i=C(()=>(n.currentPage-1)*n.itemsPerPage+1),r=C(()=>Math.min(i.value+n.itemsPerPage-1,n.totalItems)),l=C(()=>n.currentPage===1),c=C(()=>n.currentPage===a.value),u=f=>{f>=1&&f<=a.value&&s("update:currentPage",f)},d=C(()=>o(n.currentPageInfo?n.currentPageInfo:"PAGINATION_FOOTER.SHOWING",{startItem:i.value,endItem:r.value,totalItems:n.totalItems})),m=C(()=>o("PAGINATION_FOOTER.CURRENT_PAGE_INFO",{currentPage:"",totalPages:a.value}));return(f,g)=>(p(),v("div",ADe,[h("div",IDe,[h("span",CDe,A(d.value),1)]),h("div",ODe,[y(oe,{icon:"i-lucide-chevrons-left",variant:"ghost",size:"sm",color:"slate",class:"!w-8 !h-6",disabled:l.value,onClick:g[0]||(g[0]=T=>u(1))},null,8,["disabled"]),y(oe,{icon:"i-lucide-chevron-left",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:l.value,onClick:g[1]||(g[1]=T=>u(e.currentPage-1))},null,8,["disabled"]),h("div",NDe,[h("span",wDe,A(e.currentPage),1),h("span",RDe,A(m.value),1)]),y(oe,{icon:"i-lucide-chevron-right",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:c.value,onClick:g[2]||(g[2]=T=>u(e.currentPage+1))},null,8,["disabled"]),y(oe,{icon:"i-lucide-chevrons-right",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:c.value,onClick:g[3]||(g[3]=T=>u(a.value))},null,8,["disabled"])])]))}},xDe={class:"flex w-full h-full gap-4 overflow-hidden justify-evenly bg-n-background"},$De={class:"flex flex-col w-full h-full transition-all duration-300"},MDe={class:"flex-1 overflow-y-auto"},LDe={class:"w-full mx-auto max-w-[60rem]"},kDe={key:0,class:"sticky bottom-0 z-10 px-4 pb-4"},DDe={__name:"ContactsListLayout",props:{searchValue:{type:String,default:""},headerTitle:{type:String,default:""},showPaginationFooter:{type:Boolean,default:!0},currentPage:{type:Number,default:1},totalItems:{type:Number,default:100},itemsPerPage:{type:Number,default:15},activeSort:{type:String,default:""},activeOrdering:{type:String,default:""},activeSegment:{type:Object,default:null},segmentsId:{type:[String,Number],default:0},hasAppliedFilters:{type:Boolean,default:!1},isFetchingList:{type:Boolean,default:!1}},emits:["update:currentPage","update:sort","search","applyFilter","clearFilters"],setup(e,{emit:t}){const n=e,s=t,o=sn(),a=X(null),i=C(()=>o.name!=="contacts_dashboard_segments_index"),r=C(()=>o.name==="contacts_dashboard_active"),l=C(()=>o.name==="contacts_dashboard_labels_index"),c=C(()=>(n.hasAppliedFilters||!i.value)&&!n.isFetchingList&&!l.value&&!r.value),u=m=>{s("update:currentPage",m)},d=()=>{var m;(m=a.value)==null||m.onToggleFilters()};return(m,f)=>(p(),v("section",xDe,[h("div",$De,[y(fDe,{ref_key:"contactListHeaderWrapper",ref:a,"show-search":i.value&&!r.value,"search-value":e.searchValue,"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"header-title":e.headerTitle,"active-segment":e.activeSegment,"segments-id":e.segmentsId,"has-applied-filters":e.hasAppliedFilters,"is-label-view":l.value,"is-active-view":r.value,"onUpdate:sort":f[0]||(f[0]=g=>s("update:sort",g)),onSearch:f[1]||(f[1]=g=>s("search",g)),onApplyFilter:f[2]||(f[2]=g=>s("applyFilter",g)),onClearFilters:f[3]||(f[3]=g=>s("clearFilters"))},null,8,["show-search","search-value","active-sort","active-ordering","header-title","active-segment","segments-id","has-applied-filters","is-label-view","is-active-view"]),h("main",MDe,[h("div",LDe,[c.value?(p(),$(SDe,{key:0,"active-segment":e.activeSegment,onClearFilters:f[4]||(f[4]=g=>s("clearFilters")),onOpenFilter:d},null,8,["active-segment"])):w("",!0),We(m.$slots,"default")])]),e.showPaginationFooter?(p(),v("footer",kDe,[y(pI,{"current-page-info":"CONTACTS_LAYOUT.PAGINATION_FOOTER.SHOWING","current-page":e.currentPage,"total-items":e.totalItems,"items-per-page":e.itemsPerPage,"onUpdate:currentPage":u},null,8,["current-page","total-items","items-per-page"])])):w("",!0)])]))}},PDe={class:"flex flex-col w-full shadow outline-1 outline outline-n-container group/cardLayout rounded-2xl bg-n-solid-2"},hr={__name:"CardLayout",props:{layout:{type:String,default:"col"},selectable:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>(p(),v("div",PDe,[h("div",{class:se(["flex w-full gap-3 py-5",[e.layout==="col"?"flex-col":"flex-row justify-between items-center",e.selectable?"px-10 py-6":"px-6"]]),onClick:s},[We(o.$slots,"default")],2),We(o.$slots,"after")]))}},BDe={__name:"Flag",props:{country:{type:String,required:!0},squared:{type:Boolean,default:!1}},setup(e){const t=e,n=()=>{const s=["fi",`fi-${t.country.toLowerCase()}`,"flex-shrink-0"];return t.squared&&s.push("fis"),yn("span",{class:s})};return(s,o)=>(p(),$(vs(n)))}},hI={__name:"ConfirmContactDeleteDialog",props:{selectedContact:{type:Object,default:null}},emits:["goToContactsList"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=pt(),r=sn(),l=X(null),c=async d=>{if(d)try{await i.dispatch("contacts/delete",d),ce(a("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.API.SUCCESS_MESSAGE"))}catch{ce(a("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.API.ERROR_MESSAGE"))}},u=async()=>{var d;o("goToContactsList"),await c(r.params.contactId||s.selectedContact.id),(d=l.value)==null||d.close()};return t({dialogRef:l}),(d,m)=>(p(),$(cs,{ref_key:"dialogRef",ref:l,type:"alert",title:N(a)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.TITLE"),description:N(a)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.DESCRIPTION"),"confirm-button-label":N(a)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.CONFIRM"),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},FDe={class:"flex flex-col items-start border-t border-n-strong px-6 py-5"},UDe={class:"overflow-hidden min-h-0"},GDe={class:"inline-flex text-n-slate-11 text-sm items-center gap-1"},VDe={__name:"ContactDeleteSection",props:{selectedContact:{type:Object,required:!0}},setup(e){const{t}=Me(),[n,s]=es(),o=X(null),a=()=>{var i;(i=o.value)==null||i.dialogRef.open()};return(i,r)=>(p(),v(pe,null,[h("div",FDe,[y(oe,{label:N(t)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT"),sm:"",link:"",slate:"",class:"hover:!no-underline text-n-slate-12",icon:"i-lucide-chevron-down","trailing-icon":"",onClick:r[0]||(r[0]=l=>N(s)())},null,8,["label"]),h("div",{class:se(["transition-all duration-300 ease-in-out grid w-full overflow-hidden",N(n)?"grid-rows-[1fr] opacity-100 mt-2":"grid-rows-[0fr] opacity-0 mt-0"])},[h("div",UDe,[h("span",GDe,[Re(A(N(t)("CONTACTS_LAYOUT.CARD.DELETE_CONTACT.MESSAGE"))+" ",1),y(oe,{label:N(t)("CONTACTS_LAYOUT.CARD.DELETE_CONTACT.BUTTON"),sm:"",ruby:"",link:"",onClick:r[1]||(r[1]=l=>a())},null,8,["label"])])])],2)]),y(hI,{ref_key:"confirmDeleteContactDialogRef",ref:o,"selected-contact":e.selectedContact},null,8,["selected-contact"])],64))}},HDe={class:"flex items-center justify-start flex-1 gap-4"},WDe={class:"flex flex-col gap-0.5 flex-1"},zDe={class:"flex flex-wrap items-center gap-x-4 gap-y-1"},jDe={class:"text-base font-medium truncate text-n-slate-12"},KDe={class:"inline-flex items-center gap-1"},YDe={key:0,class:"i-ph-building-light size-4 text-n-slate-10 mb-0.5"},XDe={key:1,class:"text-sm truncate text-n-slate-11"},qDe={class:"flex flex-wrap items-center justify-start gap-x-3 gap-y-1"},ZDe=["title"],QDe={class:"text-sm text-n-slate-11"},JDe={key:1,class:"w-px h-3 truncate bg-n-slate-6"},e8e={key:2,class:"text-sm truncate text-n-slate-11"},t8e={key:3,class:"w-px h-3 truncate bg-n-slate-6"},n8e={key:4,class:"inline-flex items-center gap-2 text-sm truncate text-n-slate-11"},s8e={key:5,class:"w-px h-3 truncate bg-n-slate-6"},a8e={class:"overflow-hidden"},o8e={class:"flex flex-col gap-6 p-6 border-t border-n-strong"},mI={__name:"ContactsCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},email:{type:String,default:""},additionalAttributes:{type:Object,default:()=>({})},phoneNumber:{type:String,default:""},thumbnail:{type:String,default:""},availabilityStatus:{type:String,default:null},isExpanded:{type:Boolean,default:!1},isUpdating:{type:Boolean,default:!1}},emits:["toggle","updateContact","showContact"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(null),i=()=>({id:n.id,name:n.name,email:n.email,phoneNumber:n.phoneNumber,additionalAttributes:n.additionalAttributes}),r=X(i()),l=C(()=>{var S;return(S=a.value)==null?void 0:S.isFormInvalid}),c=C(()=>xa.reduce((S,_)=>(S[_.code]=_,S[_.id]=_,S),{})),u=C(()=>{const S=n.additionalAttributes||{},{country:_,countryCode:E,city:b}=S;if(!_&&!E)return null;const I=c.value[_]||c.value[E];return I?{countryCode:I.id,city:b?`${b},`:null,name:I.name}:null}),d=C(()=>u.value?[u.value.city,u.value.name].filter(Boolean).join(" "):""),m=S=>{Object.assign(r.value,S)},f=()=>{s("updateContact",r.value)},g=()=>{s("toggle"),r.value=i()},T=()=>s("showContact",n.id);return(S,_)=>(p(),$(hr,{key:e.id,layout:"row"},{after:K(()=>[h("div",{class:se(["transition-all duration-500 ease-in-out grid overflow-hidden",e.isExpanded?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"])},[h("div",a8e,[h("div",o8e,[y(E_,{ref_key:"contactsFormRef",ref:a,"contact-data":r.value,onUpdate:m},null,8,["contact-data"]),h("div",null,[y(oe,{label:N(o)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.UPDATE_BUTTON"),size:"sm","is-loading":e.isUpdating,disabled:e.isUpdating||l.value,onClick:f},null,8,["label","is-loading","disabled"])])]),y(VDe,{"selected-contact":{id:n.id,name:n.name}},null,8,["selected-contact"])])],2)]),default:K(()=>{var E,b;return[h("div",HDe,[y(ts,{name:e.name,src:e.thumbnail,size:48,status:e.availabilityStatus,"rounded-full":""},null,8,["name","src","status"]),h("div",WDe,[h("div",zDe,[h("span",jDe,A(e.name),1),h("span",KDe,[(E=e.additionalAttributes)!=null&&E.companyName?(p(),v("span",YDe)):w("",!0),(b=e.additionalAttributes)!=null&&b.companyName?(p(),v("span",XDe,A(e.additionalAttributes.companyName),1)):w("",!0)])]),h("div",qDe,[e.email?(p(),v("div",{key:0,class:"truncate max-w-72",title:e.email},[h("span",QDe,A(e.email),1)],8,ZDe)):w("",!0),e.email?(p(),v("div",JDe)):w("",!0),e.phoneNumber?(p(),v("span",e8e,A(e.phoneNumber),1)):w("",!0),e.phoneNumber?(p(),v("div",t8e)):w("",!0),u.value?(p(),v("span",n8e,[y(BDe,{country:u.value.countryCode,class:"size-3.5"},null,8,["country"]),Re(" "+A(d.value),1)])):w("",!0),u.value?(p(),v("div",s8e)):w("",!0),y(oe,{label:N(o)("CONTACTS_LAYOUT.CARD.VIEW_DETAILS"),variant:"link",size:"xs",onClick:T},null,8,["label"])])])]),y(oe,{icon:"i-lucide-chevron-down",variant:"ghost",color:"slate",size:"xs",class:se({"rotate-180":e.isExpanded}),onClick:g},null,8,["class"])]}),_:1}))}},i8e={class:"flex flex-col gap-4 px-6 pt-4 pb-6"},r8e={__name:"ContactsList",props:{contacts:{type:Array,required:!0}},setup(e){const{t}=Me(),n=pt(),s=xn(),o=sn(),a=Oe("contacts/getUIFlags"),i=C(()=>a.value.isUpdating),r=X(null),l=async d=>{try{await n.dispatch("contacts/update",d),ce(t("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.SUCCESS_MESSAGE"))}catch(m){const f="CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.FORM";m instanceof Oc?m.data.includes("email")?ce(t(`${f}.EMAIL_ADDRESS.DUPLICATE`)):m.data.includes("phone_number")&&ce(t(`${f}.PHONE_NUMBER.DUPLICATE`)):m instanceof nl?ce(m.data):ce(t(`${f}.ERROR_MESSAGE`))}},c=async d=>{const m={contacts_dashboard_segments_index:["contacts_edit_segment","segmentId"],contacts_dashboard_labels_index:["contacts_edit_label","label"]},[f,g]=m[o.name]||["contacts_edit"],T={contactId:d,...g&&{[g]:o.params[g]}};await s.push({name:f,params:T,query:o.query})},u=d=>{r.value=r.value===d?null:d};return(d,m)=>(p(),v("div",i8e,[(p(!0),v(pe,null,Ne(e.contacts,f=>(p(),$(mI,{id:f.id,key:f.id,name:f.name,email:f.email,thumbnail:f.thumbnail,"phone-number":f.phoneNumber,"additional-attributes":f.additionalAttributes,"availability-status":f.availabilityStatus,"is-expanded":r.value===f.id,"is-updating":i.value,onToggle:g=>u(f.id),onUpdateContact:l,onShowContact:c},null,8,["id","name","email","thumbnail","phone-number","additional-attributes","availability-status","is-expanded","is-updating","onToggle"]))),128))]))}},l8e={class:"relative flex flex-col items-center justify-center w-full h-full overflow-hidden"},c8e={class:"relative w-full max-w-[60rem] mx-auto overflow-hidden h-full max-h-[28rem]"},u8e={class:"w-full h-full space-y-4 overflow-y-hidden opacity-50 pointer-events-none"},d8e={class:"absolute inset-x-0 bottom-0 flex flex-col items-center justify-end w-full h-full pb-20 bg-gradient-to-t from-n-background from-25% dark:from-n-background to-transparent"},p8e={class:"flex flex-col items-center justify-center gap-6"},h8e={class:"flex flex-col items-center justify-center gap-3"},m8e={class:"text-3xl font-medium text-center text-slate-900 dark:text-white font-interDisplay"},f8e={class:"max-w-xl text-base text-center text-slate-600 dark:text-slate-300 font-interDisplay tracking-[0.3px]"},Ri={__name:"EmptyStateLayout",props:{title:{type:String,required:!0},subtitle:{type:String,required:!0},actionPerms:{type:Array,default:()=>[]}},setup(e){return(t,n)=>(p(),v("section",l8e,[h("div",c8e,[h("div",u8e,[We(t.$slots,"empty-state-item")]),h("div",d8e,[h("div",p8e,[h("div",h8e,[h("h2",m8e,A(e.title),1),h("p",f8e,A(e.subtitle),1)]),y(ja,{permissions:e.actionPerms},{default:K(()=>[We(t.$slots,"actions")]),_:3},8,["permissions"])])])])]))}},g8e=[{additionalAttributes:{city:"Los Angeles",country:"United States",description:"I'm Candice, a developer focusing on building web solutions. Currently, I’m working as a Product Developer at Chatwoot.",companyName:"Chatwoot",countryCode:"US",socialProfiles:{github:"candice-dev",twitter:"candice_w_dev",facebook:"candice.dev",linkedin:"candice-matherson",instagram:"candice.codes"}},availabilityStatus:"offline",email:"candice.matherson@chatwoot.com",id:22,name:"Candice Matherson",phoneNumber:"+14155552671",identifier:null,thumbnail:"",customAttributes:{dateContact:"2024-11-11T11:53:09.299Z",linkContact:"https://example.com",listContact:"Follow-Up",textContact:"Hi there!",numberContact:"42",checkboxContact:!1},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"San Francisco",country:"United States",description:"Passionate about design and user experience.",companyName:"Designify",countryCode:"US",socialProfiles:{github:"ophelia-folkard",twitter:"oph_designs",facebook:"ophelia.folkard",linkedin:"ophelia-folkard",instagram:"ophelia.design"}},availabilityStatus:"offline",email:"ophelia.folkard@designify.com",id:21,name:"Ophelia Folkard",phoneNumber:"+14155552672",identifier:null,thumbnail:"",customAttributes:{dateContact:"2024-10-05T10:12:34.567Z",linkContact:"https://designify.com",listContact:"Prospects",textContact:"Looking forward to connecting!"},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"Austin",country:"United States",description:"Avid coder and tech enthusiast.",companyName:"CodeHub",countryCode:"US",socialProfiles:{github:"willy_castelot",twitter:"willy_code",facebook:"willy.castelot",linkedin:"willy-castelot",instagram:"willy.coder"}},availabilityStatus:"offline",email:"willy.castelot@codehub.io",id:20,name:"Willy Castelot",phoneNumber:"+14155552673",identifier:null,thumbnail:"",customAttributes:{textContact:"Let’s collaborate!",checkboxContact:!0},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"Seattle",country:"United States",description:"Product manager with a love for innovation.",companyName:"InnovaTech",countryCode:"US",socialProfiles:{github:"elisabeth-d",twitter:"elisabeth_innova",facebook:"elisabeth.derington",linkedin:"elisabeth-derington",instagram:"elisabeth.innovates"}},availabilityStatus:"offline",email:"elisabeth.derington@innova.com",id:19,name:"Elisabeth Derington",phoneNumber:"+14155552674",identifier:null,thumbnail:"",customAttributes:{textContact:"Let’s schedule a call."},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Chicago",country:"United States",description:"Marketing specialist and content creator.",companyName:"Contently",countryCode:"US",socialProfiles:{github:"olia-olenchenko",twitter:"olia_content",facebook:"olia.olenchenko",linkedin:"olia-olenchenko",instagram:"olia.creates"}},availabilityStatus:"offline",email:"olia.olenchenko@contently.com",id:18,name:"Olia Olenchenko",phoneNumber:"+14155552675",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Boston",country:"United States",description:"SEO expert and analytics enthusiast.",companyName:"OptiSearch",countryCode:"US",socialProfiles:{github:"nate-vannuchi",twitter:"nate_seo",facebook:"nathaniel.vannuchi",linkedin:"nathaniel-vannuchi",instagram:"nate.optimizes"}},availabilityStatus:"offline",email:"nathaniel.vannuchi@optisearch.com",id:17,name:"Nathaniel Vannuchi",phoneNumber:"+14155552676",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Denver",country:"United States",description:"UI/UX designer with a flair for minimalist designs.",companyName:"Minimal Designs",countryCode:"US",socialProfiles:{github:"merrile-petruk",twitter:"merrile_ux",facebook:"merrile.petruk",linkedin:"merrile-petruk",instagram:"merrile.designs"}},availabilityStatus:"offline",email:"merrile.petruk@minimal.com",id:16,name:"Merrile Petruk",phoneNumber:"+14155552677",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Miami",country:"United States",description:"Entrepreneur with a background in e-commerce.",companyName:"Ecom Solutions",countryCode:"US",socialProfiles:{github:"cordell-d",twitter:"cordell_entrepreneur",facebook:"cordell.dalinder",linkedin:"cordell-dalinder",instagram:"cordell.ecom"}},availabilityStatus:"offline",email:"cordell.dalinder@ecomsolutions.com",id:15,name:"Cordell Dalinder",phoneNumber:"+14155552678",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232}],_8e={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},v8e={key:0},b8e={__name:"ContactEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""},showButton:{type:Boolean,default:!0},buttonLabel:{type:String,default:""}},emits:["create"],setup(e,{emit:t}){const n=t,s=X(null),o=()=>{var a;(a=s.value)==null||a.dialogRef.open()};return(a,i)=>(p(),$(Ri,{title:e.title,subtitle:e.subtitle},{"empty-state-item":K(()=>[h("div",_8e,[(p(!0),v(pe,null,Ne(N(g8e).slice(0,5),r=>(p(),$(mI,{id:r.id,key:r.id,name:r.name,email:r.email,thumbnail:r.thumbnail,"phone-number":r.phoneNumber,"additional-attributes":r.additionalAttributes,"is-expanded":r.id===0,onToggle:l=>a.toggleExpanded(r.id)},null,8,["id","name","email","thumbnail","phone-number","additional-attributes","is-expanded","onToggle"]))),128))])]),actions:K(()=>[e.showButton?(p(),v("div",v8e,[y(oe,{label:e.buttonLabel,icon:"i-lucide-plus",onClick:o},null,8,["label"]),y(dI,{ref_key:"createNewContactDialogRef",ref:s,onCreate:i[0]||(i[0]=r=>n("create",r))},null,512)])):w("",!0)]),_:1},8,["title","subtitle"]))}},E8e={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},T8e={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},y8e={key:1,class:"flex items-center justify-center py-10"},S8e={class:"text-base text-n-slate-11"},A8e="last_activity_at",I8e=300,xl={__name:"ContactsIndex",setup(e){const t=pt(),n=sn(),s=xn(),{t:o}=Me(),{updateUISettings:a,uiSettings:i}=ln(),r=Oe("contacts/getContactsList"),l=Oe("contacts/getUIFlags"),c=Oe("customViews/getUIFlags"),u=Oe("customViews/getContactCustomViews"),d=Oe("contacts/getAppliedContactFilters"),m=Oe("contacts/getMeta"),f=C(()=>{var _e;return(_e=n.query)==null?void 0:_e.search}),g=X(f.value||""),T=C(()=>{var _e;return Number((_e=n.query)==null?void 0:_e.page)||1}),S=(_e="")=>{const $e=_e.startsWith("-");return{sort:($e?_e.slice(1):_e)||A8e,order:$e?"-":""}},{contacts_sort_by:_=""}=i.value??{},{sort:E,order:b}=S(_),I=ls({activeSort:E,activeOrdering:b}),R=C(()=>n.params.label),O=C(()=>n.params.segmentId),x=C(()=>l.value.isFetching||c.value.isFetching),L=C(()=>{var _e;return Number((_e=m.value)==null?void 0:_e.currentPage)}),F=C(()=>{var _e;return(_e=m.value)==null?void 0:_e.count}),D=C(()=>{if(O.value)return u.value.find(_e=>_e.id===Number(O.value))}),V=C(()=>r.value.length>0),B=C(()=>n.name==="contacts_dashboard_index"&&T.value===1),P=C(()=>n.name==="contacts_dashboard_active"),k=C(()=>d.value.length>0),U=C(()=>!f.value&&!V.value&&B.value&&!k.value),j=C(()=>(f.value||k.value||!B.value)&&!V.value),z=C(()=>{var _e;return f.value?o("CONTACTS_LAYOUT.HEADER.SEARCH_TITLE"):P.value?o("CONTACTS_LAYOUT.HEADER.ACTIVE_TITLE"):O.value?(_e=D.value)==null?void 0:_e.name:R.value?`#${R.value}`:o("CONTACTS_LAYOUT.HEADER.TITLE")}),Y=C(()=>P.value?o("CONTACTS_LAYOUT.EMPTY_STATE.ACTIVE_EMPTY_STATE_TITLE"):!f.value||k.value?o("CONTACTS_LAYOUT.EMPTY_STATE.LIST_EMPTY_STATE_TITLE"):o("CONTACTS_LAYOUT.EMPTY_STATE.SEARCH_EMPTY_STATE_TITLE")),te=(_e,$e="")=>{const He={...n.query,page:_e.toString(),...$e?{search:$e}:{}};$e||delete He.search,s.replace({query:He})},Z=()=>`${I.activeOrdering}${I.activeSort}`,G=(_e=1)=>({page:_e,sortAttr:Z(),label:R.value}),H=async(_e=1)=>{await t.dispatch("contacts/clearContactFilters"),await t.dispatch("contacts/get",G(_e)),te(_e)},W=async(_e,$e=1)=>{!O.value&&!k.value||(await t.dispatch("contacts/filter",{...G($e),queryPayload:_e}),te($e))},J=async(_e=1)=>{await t.dispatch("contacts/clearContactFilters"),await t.dispatch("contacts/active",{page:_e,sortAttr:Z()}),te(_e)},ee=Uo(async(_e,$e=1)=>{if(await t.dispatch("contacts/clearContactFilters"),g.value=_e,!_e){te($e),await H($e);return}te($e,_e),await t.dispatch("contacts/search",{...G($e),search:encodeURIComponent(_e)})},I8e),ge=async _e=>{var $e,He;if(te(_e,g.value),!x.value){if(f.value){await ee(f.value,_e);return}if(g.value="",P.value){await J(_e);return}if((k.value||($e=D.value)!=null&&$e.query)&&!R.value){const Je=((He=D.value)==null?void 0:He.query)||po(d.value);await W(Je,_e);return}await H(_e)}},Ee=async({sort:_e,order:$e})=>{var He;if(Object.assign(I,{activeSort:_e,activeOrdering:$e}),await a({contacts_sort_by:Z()}),f.value){await ee(g.value);return}if(P.value){await J();return}await(O.value||k.value?W(O.value?(He=D.value)==null?void 0:He.query:po(d.value)):H())},le=async _e=>{await t.dispatch("contacts/create",_e)};return ct(()=>{var _e;return(_e=i.value)==null?void 0:_e.contacts_sort_by},_e=>{if(_e){const{sort:$e,order:He}=S(_e);I.activeSort=$e,I.activeOrdering=He}},{immediate:!0}),ct([R,D,P],()=>{ge(T.value)},{deep:!0}),ct(f,_e=>{if(!x.value&&(g.value=_e||"",_e===void 0)){if(P.value||R.value||D.value||k.value)return;H()}}),dt(async()=>{if(O.value)D.value&&O.value&&await W(D.value.query,T.value);else{if(f.value){await ee(f.value,T.value);return}if(P.value){await J(T.value);return}await H(T.value)}}),(_e,$e)=>(p(),v("div",E8e,[y(DDe,{"search-value":g.value,"header-title":z.value,"current-page":L.value,"total-items":F.value,"show-pagination-footer":!x.value&&V.value,"active-sort":I.activeSort,"active-ordering":I.activeOrdering,"active-segment":D.value,"segments-id":O.value,"is-fetching-list":x.value,"has-applied-filters":k.value,"onUpdate:currentPage":ge,onSearch:N(ee),"onUpdate:sort":Ee,onApplyFilter:W,onClearFilters:H},{default:K(()=>[x.value?(p(),v("div",T8e,[y(gs)])):(p(),v(pe,{key:1},[U.value?(p(),$(b8e,{key:0,class:"pt-14",title:N(o)("CONTACTS_LAYOUT.EMPTY_STATE.TITLE"),subtitle:N(o)("CONTACTS_LAYOUT.EMPTY_STATE.SUBTITLE"),"button-label":N(o)("CONTACTS_LAYOUT.EMPTY_STATE.BUTTON_LABEL"),onCreate:le},null,8,["title","subtitle","button-label"])):j.value?(p(),v("div",y8e,[h("span",S8e,A(Y.value),1)])):(p(),$(r8e,{key:2,contacts:N(r)},null,8,["contacts"]))],64))]),_:1},8,["search-value","header-title","current-page","total-items","show-pagination-footer","active-sort","active-ordering","active-segment","segments-id","is-fetching-list","has-applied-filters","onSearch"])]))}},C8e=["aria-label"],O8e={class:"flex items-center mb-0"},N8e={class:"min-w-0 truncate"},w8e={class:"text-sm truncate text-slate-900 dark:text-slate-50 max-w-56"},R8e={__name:"Breadcrumb",props:{items:{type:Array,required:!0}},emits:["click"],setup(e,{emit:t}){const n=t,{t:s}=Me(),o=a=>{n("click",a)};return(a,i)=>(p(),v("nav",{"aria-label":N(s)("BREADCRUMB.ARIA_LABEL"),class:"flex items-center h-8"},[h("ol",O8e,[(p(!0),v(pe,null,Ne(e.items,(r,l)=>(p(),v("li",{key:l,class:"flex items-center"},[l===0?(p(),v("button",{key:0,class:"inline-flex items-center justify-center min-w-0 gap-2 p-0 text-sm font-medium transition-all duration-200 ease-in-out border-0 rounded-lg text-n-slate-11 hover:text-n-slate-12 outline-transparent max-w-56",onClick:o},[h("span",N8e,A(r.label),1)])):(p(),v(pe,{key:1},[y(Rt,{icon:"i-lucide-chevron-right",class:"flex-shrink-0 mx-2 size-4 text-n-slate-11 dark:text-n-slate-11"}),h("span",w8e,A(r.emoji?r.emoji:"")+" "+A(r.label),1)],64))]))),128))])],8,C8e))}},x8e={class:"flex w-full h-full overflow-hidden justify-evenly bg-n-background"},$8e={class:"flex flex-col w-full h-full transition-all duration-300 ltr:2xl:ml-56 rtl:2xl:mr-56"},M8e={class:"sticky top-0 z-10 px-6 3xl:px-0"},L8e={class:"w-full mx-auto max-w-[40.625rem]"},k8e={class:"flex items-center justify-between w-full h-20 gap-2"},D8e={class:"flex items-center gap-2"},P8e={class:"flex-1 px-6 overflow-y-auto 3xl:px-px"},B8e={class:"w-full py-4 mx-auto max-w-[40.625rem]"},F8e={key:0,class:"overflow-y-auto justify-end min-w-52 w-full py-6 max-w-md border-l border-n-weak bg-n-solid-2"},U8e={__name:"ContactsDetailsLayout",props:{selectedContact:{type:Object,default:()=>({})},isUpdating:{type:Boolean,default:!1}},emits:["goToContactsList","toggleBlock"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=Sf(),i=sn(),r=C(()=>i.params.contactId),l=C(()=>{var f;return(f=n.selectedContact)==null?void 0:f.name}),c=C(()=>{const f=[{label:o("CONTACTS_LAYOUT.HEADER.BREADCRUMB.CONTACTS"),link:"#"}];return n.selectedContact&&f.push({label:l.value}),f}),u=C(()=>{var f;return(f=n.selectedContact)==null?void 0:f.blocked}),d=()=>{s("goToContactsList")},m=()=>{s("toggleBlock",u.value)};return(f,g)=>(p(),v("section",x8e,[h("div",$8e,[h("header",M8e,[h("div",L8e,[h("div",k8e,[y(R8e,{items:c.value,onClick:d},null,8,["items"]),h("div",D8e,[y(oe,{label:u.value?f.$t("CONTACTS_LAYOUT.HEADER.UNBLOCK_CONTACT"):f.$t("CONTACTS_LAYOUT.HEADER.BLOCK_CONTACT"),size:"sm",slate:"","is-loading":e.isUpdating,disabled:e.isUpdating,onClick:m},null,8,["label","is-loading","disabled"]),y(yp,{"contact-id":r.value},{trigger:K(({toggle:T})=>[y(oe,{label:f.$t("CONTACTS_LAYOUT.HEADER.SEND_MESSAGE"),size:"sm",onClick:T},null,8,["label","onClick"])]),_:1},8,["contact-id"])])])])]),h("main",P8e,[h("div",B8e,[We(f.$slots,"default")])])]),N(a).sidebar?(p(),v("div",F8e,[We(f.$slots,"sidebar")])):w("",!0)]))}},G8e={class:"text-sm text-n-slate-12 ltr:mr-px rtl:ml-px"},V8e={__name:"LabelItem",props:{label:{type:Object,default:null},isHovered:{type:Boolean,default:!1}},emits:["remove","hover"],setup(e,{emit:t}){const n=e,s=t,o=()=>{var i;s("remove",(i=n.label)==null?void 0:i.id)},a=()=>{var i;s("hover",(i=n.label)==null?void 0:i.id)};return(i,r)=>(p(),v("div",{class:"flex items-center px-1 py-1 overflow-hidden transition-all duration-300 ease-out rounded-md bg-n-alpha-2 h-7",onMouseenter:a},[h("div",{class:"w-2 h-2 m-1 rounded-sm",style:Ht({backgroundColor:e.label.color})},null,4),h("span",G8e,A(e.label.title),1),h("div",{class:se(["w-0 flex relative ltr:left-1 rtl:right-1 flex-shrink-0 overflow-hidden transition-[width] duration-300 ease-out",{"w-6":e.isHovered}])},[y(oe,{class:se(["transition-opacity duration-200 !h-7 ltr:rounded-r-md rtl:rounded-l-md ltr:rounded-l-none rtl:rounded-r-none w-6 bg-transparent",{"opacity-0":!e.isHovered,"opacity-100":e.isHovered}]),slate:"",xs:"",faded:"",icon:"i-lucide-x",onClick:o},null,8,["class"])],2)],32))}},H8e={class:"relative"},W8e={class:"text-sm text-n-slate-11"},z8e={__name:"AddLabel",props:{labelMenuItems:{type:Array,default:()=>[]}},emits:["updateLabel"],setup(e,{emit:t}){const n=t,{t:s}=Me(),o=X(!1);return(a,i)=>{const r=qe("on-clickaway");return p(),v("div",H8e,[h("button",{class:se(["flex items-center gap-1 px-2 py-1 rounded-md outline-dashed h-6 outline-1 outline-n-slate-6 hover:bg-n-alpha-2",{"bg-n-alpha-2":o.value}]),onClick:i[0]||(i[0]=l=>o.value=!o.value)},[i[2]||(i[2]=h("span",{class:"i-lucide-plus"},null,-1)),h("span",W8e,A(N(s)("LABEL.TAG_BUTTON")),1)],2),o.value?re((p(),$(Hs,{key:0,"menu-items":e.labelMenuItems,"show-search":"",class:"z-[100] w-48 mt-2 overflow-y-auto ltr:left-0 rtl:right-0 top-full max-h-52",onAction:i[1]||(i[1]=l=>n("updateLabel",l))},{thumbnail:K(({item:l})=>[h("div",{class:"rounded-sm size-2",style:Ht({backgroundColor:l.thumbnail.color})},null,4)]),_:1},8,["menu-items"])),[[r,()=>o.value=!1]]):w("",!0)])}}},j8e={__name:"ContactLabels",props:{contactId:{type:[String,Number],default:null}},setup(e){const t=e,n=pt(),s=sn(),o=X(!1),a=X(null),i=Oe("labels/getLabels"),r=Oe("contactLabels/getContactLabels"),l=C(()=>{const T=r.value(t.contactId);return i.value.filter(({title:S})=>T.includes(S))}),c=C(()=>{var T;return(T=i.value)==null?void 0:T.map(S=>({label:S.title,value:S.id,thumbnail:{name:S.title,color:S.color},isSelected:l.value.some(_=>_.id===S.id),action:"contactLabel"})).toSorted((S,_)=>Number(S.isSelected)-Number(_.isSelected))}),u=async T=>{T&&n.dispatch("contactLabels/get",T)},d=async({value:T})=>{try{const S=l.value.map(b=>b.title),_=i.value.find(b=>b.id===T);if(!_)return;let E;S.includes(_.title)?E=S.filter(b=>b!==_.title):E=[...S,_.title],await n.dispatch("contactLabels/update",{contactId:t.contactId,labels:E}),o.value=!1}catch{}},m=T=>d({value:T});ct(()=>t.contactId,(T,S)=>{T!==S&&u(T)}),dt(()=>{s.params.contactId&&u(s.params.contactId)});const f=()=>{a.value=null},g=T=>{a.value=T};return(T,S)=>(p(),v("div",{class:"flex flex-wrap items-center gap-2",onMouseleave:f},[(p(!0),v(pe,null,Ne(l.value,_=>(p(),$(V8e,{key:_.id,label:_,"is-hovered":a.value===_.id,onRemove:m,onHover:E=>g(_.id)},null,8,["label","is-hovered","onHover"]))),128)),y(z8e,{"label-menu-items":c.value,onUpdateLabel:d},null,8,["label-menu-items"])],32))}},K8e={class:"flex flex-col items-start gap-8 pb-6"},Y8e={class:"flex flex-col items-start gap-3"},X8e={class:"flex flex-col gap-1"},q8e={class:"text-base font-medium text-n-slate-12"},Z8e={class:"flex flex-col gap-1.5"},Q8e={key:0,class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},J8e={class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},e4e={key:0,class:"i-ph-activity text-n-slate-10 size-4"},t4e={class:"flex flex-col items-start gap-6"},n4e={class:"flex flex-col items-start w-full gap-4 pt-6 border-t border-n-strong"},s4e={class:"flex flex-col gap-2"},a4e={class:"text-base font-medium text-n-slate-12"},o4e={class:"text-sm text-n-slate-11"},i4e={__name:"ContactDetails",props:{selectedContact:{type:Object,required:!0}},emits:["goToContactsList"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=pt(),i=X(null),r=X(null),l=X(""),c=X(null),u=Oe("contacts/getUIFlags"),d=C(()=>u.value.isUpdating),m=C(()=>{var x;return(x=c.value)==null?void 0:x.isFormInvalid}),f=X({}),g=()=>n.selectedContact?{...n.selectedContact}:{};dt(()=>{Object.assign(f.value,g())});const T=C(()=>{var x;return(x=f.value)!=null&&x.createdAt?rs(f.value.createdAt):""}),S=C(()=>{var x;return(x=f.value)!=null&&x.lastActivityAt?rs(f.value.lastActivityAt):""}),_=C(()=>{var x;return l.value?l.value:(x=f.value)==null?void 0:x.thumbnail}),E=x=>{Object.assign(f.value,x)},b=async()=>{try{const{customAttributes:x,...L}=f.value;await a.dispatch("contacts/update",L),await a.dispatch("contacts/fetchContactableInbox",n.selectedContact.id),ce(o("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.SUCCESS_MESSAGE"))}catch{ce(o("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.ERROR_MESSAGE"))}},I=()=>{var x;(x=i.value)==null||x.dialogRef.open()},R=async({file:x,url:L})=>{var F;r.value=x,l.value=L;try{await a.dispatch("contacts/update",{...(F=c.value)==null?void 0:F.state,avatar:x,isFormData:!0}),ce(o("CONTACTS_LAYOUT.DETAILS.AVATAR.UPLOAD.SUCCESS_MESSAGE"))}catch{ce(o("CONTACTS_LAYOUT.DETAILS.AVATAR.UPLOAD.ERROR_MESSAGE"))}},O=async()=>{try{n.selectedContact&&n.selectedContact.id&&(await a.dispatch("contacts/deleteAvatar",n.selectedContact.id),ce(o("CONTACTS_LAYOUT.DETAILS.AVATAR.DELETE.SUCCESS_MESSAGE"))),r.value=null,l.value="",f.value.thumbnail=null}catch(x){ce(x.message?x.message:o("CONTACTS_LAYOUT.DETAILS.AVATAR.DELETE.ERROR_MESSAGE"))}};return(x,L)=>{var F,D,V,B,P,k;return p(),v("div",K8e,[h("div",Y8e,[y(ts,{src:_.value||"",name:((F=e.selectedContact)==null?void 0:F.name)||"",size:72,"allow-upload":"",onUpload:R,onDelete:O},null,8,["src","name"]),h("div",X8e,[h("h3",q8e,A((D=e.selectedContact)==null?void 0:D.name),1),h("div",Z8e,[(V=e.selectedContact)!=null&&V.identifier?(p(),v("span",Q8e,[L[1]||(L[1]=h("span",{class:"i-ph-user-gear text-n-slate-10 size-4"},null,-1)),Re(" "+A((B=e.selectedContact)==null?void 0:B.identifier),1)])):w("",!0),h("span",J8e,[(P=e.selectedContact)!=null&&P.identifier?(p(),v("span",e4e)):w("",!0),Re(" "+A(x.$t("CONTACTS_LAYOUT.DETAILS.CREATED_AT",{date:T.value}))+" • "+A(x.$t("CONTACTS_LAYOUT.DETAILS.LAST_ACTIVITY",{date:S.value})),1)])])]),y(j8e,{"contact-id":(k=e.selectedContact)==null?void 0:k.id},null,8,["contact-id"])]),h("div",t4e,[y(E_,{ref_key:"contactsFormRef",ref:c,"contact-data":f.value,"is-details-view":"",onUpdate:E},null,8,["contact-data"]),y(oe,{label:N(o)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.UPDATE_BUTTON"),size:"sm","is-loading":d.value,disabled:d.value||m.value,onClick:b},null,8,["label","is-loading","disabled"])]),h("div",n4e,[h("div",s4e,[h("h6",a4e,A(N(o)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT")),1),h("span",o4e,A(N(o)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT_DESCRIPTION")),1)]),y(oe,{label:N(o)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT"),color:"ruby",onClick:I},null,8,["label"])]),y(hI,{ref_key:"confirmDeleteContactDialogRef",ref:i,"selected-contact":e.selectedContact,onGoToContactsList:L[0]||(L[0]=U=>s("goToContactsList"))},null,8,["selected-contact"])])}}},r4e={class:"flex items-center h-8 rounded-lg bg-n-alpha-1 w-fit"},l4e=["onClick"],c4e={__name:"TabBar",props:{initialActiveTab:{type:Number,default:0},tabs:{type:Array,required:!0,validator:e=>e.every(t=>typeof t.label=="string"&&(t.count?typeof t.count=="number":!0))}},emits:["tabChanged"],setup(e,{emit:t}){const n=e,s=t,o=C(()=>n.initialActiveTab),a=r=>{s("tabChanged",n.tabs[r])},i=r=>r>o.value&&r<n.tabs.length-1||r<o.value-1&&r>-1;return(r,l)=>(p(),v("div",r4e,[(p(!0),v(pe,null,Ne(e.tabs,(c,u)=>(p(),v(pe,{key:u},[h("button",{class:se(["relative px-4 truncate py-1.5 text-sm border-0 outline-1 outline rounded-lg transition-colors duration-300 ease-in-out hover:text-n-brand",[o.value===u?"text-n-blue-text bg-n-solid-active outline-n-container dark:outline-transparent":"text-n-slate-10 outline-transparent h-8"]]),onClick:d=>a(u)},A(c.label)+" "+A(c.count?`(${c.count})`:""),11,l4e),h("div",{class:se(["w-px h-3.5 rounded my-auto transition-colors duration-300 ease-in-out",i(u)?"bg-n-strong":"bg-transparent dark:bg-transparent"])},null,2)],64))),128))]))}},u4e={class:"flex flex-col gap-6 py-6"},d4e={class:"flex items-center gap-3"},p4e={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},h4e={key:1},m4e={key:2,class:"px-6 py-6 text-sm leading-6 text-center text-n-slate-11"},f4e={__name:"ContactNotes",setup(e){const{t}=Me(),n=pt(),s=sn(),o=ls({message:""}),a=Oe("getCurrentUser"),i=Oe("contactNotes/getAllNotesByContactId"),r=Oe("contactNotes/getUIFlags"),l=C(()=>r.value.isFetching),c=C(()=>r.value.isCreating),u=C(()=>i.value(s.params.contactId)),d=T=>{var _,E;return((_=T==null?void 0:T.user)==null?void 0:_.id)===a.value.id?t("CONTACTS_LAYOUT.SIDEBAR.NOTES.YOU"):((E=T==null?void 0:T.user)==null?void 0:E.name)||"Bot"},m=T=>{if(!T)return;const{contactId:S}=s.params;n.dispatch("contactNotes/create",{content:T,contactId:S}),o.message=""},f=T=>{if(!T)return;const{contactId:S}=s.params;n.dispatch("contactNotes/delete",{noteId:T,contactId:S})};return $s({"$mod+Enter":{action:()=>m(o.message),allowOnFocusedInput:!0}}),(T,S)=>(p(),v("div",u4e,[y(_a,{modelValue:o.message,"onUpdate:modelValue":S[1]||(S[1]=_=>o.message=_),placeholder:N(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.PLACEHOLDER"),"focus-on-mount":"",class:"[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4 px-6"},{actions:K(()=>[h("div",d4e,[y(oe,{variant:"link",color:"blue",size:"sm",label:N(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.SAVE"),class:"hover:no-underline","is-loading":c.value,disabled:!o.message||c.value,onClick:S[0]||(S[0]=_=>m(o.message))},null,8,["label","is-loading","disabled"])])]),_:1},8,["modelValue","placeholder"]),l.value?(p(),v("div",p4e,[y(gs)])):u.value.length>0?(p(),v("div",h4e,[(p(!0),v(pe,null,Ne(u.value,_=>(p(),$(iI,{key:_.id,class:"mx-6 py-4",note:_,"written-by":d(_),"allow-delete":"",onDelete:f},null,8,["note","written-by"]))),128))])):(p(),v("p",m4e,A(N(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.EMPTY_STATE")),1))]))}},g4e={class:"flex items-end w-full gap-2 pb-1"},_4e={class:"w-full mb-0 text-sm leading-7 text-n-slate-12 line-clamp-2"},v4e={class:"flex items-center flex-shrink-0 gap-2 pb-2"},b4e={key:0,class:"inline-flex items-center justify-center rounded-full size-5 bg-n-brand"},E4e={class:"text-xs font-semibold text-white"},T4e={__name:"CardMessagePreview",props:{conversation:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Me(),{getPlainText:s}=ya(),o=C(()=>{const{lastNonActivityMessage:r={},customAttributes:l={}}=t.conversation,{email:{subject:c}={}}=l;return s(c||(r==null?void 0:r.content)||n("CHAT_LIST.NO_CONTENT"))}),a=C(()=>{const{meta:{assignee:r={}}={}}=t.conversation;return{name:r.name??r.availableName,thumbnail:r.thumbnail,status:r.availabilityStatus}}),i=C(()=>{const{unreadCount:r}=t.conversation;return r});return(r,l)=>(p(),v("div",g4e,[h("p",_4e,A(o.value),1),h("div",v4e,[y(ts,{name:a.value.name,src:a.value.thumbnail,size:20,status:a.value.status,"rounded-full":""},null,8,["name","src","status"]),i.value>0?(p(),v("div",b4e,[h("span",E4e,A(i.value),1)])):w("",!0)])]))}},y4e={__name:"CardLabels",props:{conversationLabels:{type:Array,required:!0},accountLabels:{type:Array,required:!0}},setup(e){const t=e,n=Object.freeze({DEFAULT_WIDTH:80,CHAR_WIDTH:{SHORT:8,LONG:6},BASE_WIDTH:12,THRESHOLD:5}),s=X(null),o=X(1),a=C(()=>{var d;const u=new Set(t.conversationLabels);return(d=t.accountLabels)==null?void 0:d.filter(({title:m})=>u.has(m))}),i=({title:u=""})=>{const d=u.length>n.THRESHOLD?n.CHAR_WIDTH.LONG:n.CHAR_WIDTH.SHORT;return u.length*d+n.BASE_WIDTH},r=u=>u.length?u.reduce((m,f)=>m+i(f),0)/u.length:n.DEFAULT_WIDTH,l=C(()=>{var u;return(u=a.value)==null?void 0:u.slice(0,o.value)}),c=()=>{if(!s.value)return;const u=s.value.offsetWidth,d=r(a.value);o.value=Math.max(1,Math.floor(u/d))};return(u,d)=>{const m=qe("resize");return re((p(),v("div",{ref_key:"containerRef",ref:s,class:"flex items-center gap-2.5 w-full min-w-0 h-6 overflow-hidden"},[(p(!0),v(pe,null,Ne(l.value,(f,g)=>(p(),v("div",{key:f.id,class:se(["flex items-center gap-1.5 min-w-0",[g!==l.value.length-1?"flex-shrink-0 text-ellipsis":"flex-shrink"]])},[h("div",{style:Ht({backgroundColor:f.color}),class:"size-1.5 rounded-full flex-shrink-0"},null,4),h("span",{class:se(["text-sm text-n-slate-10 whitespace-nowrap",{truncate:g===l.value.length-1}])},A(f.title),3)],2))),128))])),[[m,c]])}}},S4e={class:"flex items-center min-w-fit gap-0.5 h-6"},A4e={class:"flex items-center justify-center size-4"},I4e=6e4,fI={__name:"SLACardLabel",props:{conversation:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,s=X(null),o=X({threshold:null,isSlaMissed:!1,type:null,icon:null}),a=m=>Object.keys(m).reduce((f,g)=>(f[g.replace(/([A-Z])/g,"_$1").toLowerCase()]=m[g],f),{}),i=C(()=>{var m;return(m=n.conversation)==null?void 0:m.appliedSla}),r=C(()=>{var m;return(m=o.value)==null?void 0:m.isSlaMissed}),l=C(()=>{var m,f;return((m=o.value)==null?void 0:m.threshold)&&((f=i.value)==null?void 0:f.id)}),c=C(()=>{var m,f;return(f=(m=o.value)==null?void 0:m.type)==null?void 0:f.toUpperCase()}),u=()=>{o.value=T0({appliedSla:a(i.value||{}),chat:n.conversation})},d=()=>{s.value=setTimeout(()=>{u(),d()},I4e)};return dt(()=>{u(),d()}),zo(()=>{s.value&&clearTimeout(s.value)}),ct(()=>n.conversation,u),t({hasSlaThreshold:l}),(m,f)=>(p(),v("div",S4e,[h("div",A4e,[(p(),v("svg",{width:"10",height:"13",viewBox:"0 0 10 13",fill:"none",class:se(r.value?"fill-n-ruby-10":"fill-n-slate-9"),xmlns:"http://www.w3.org/2000/svg"},f[0]||(f[0]=[h("path",{d:"M4.55091 12.412C7.44524 12.412 9.37939 10.4571 9.37939 7.51446C9.37939 2.63072 5.21405 0.599854 2.36808 0.599854C1.81546 0.599854 1.45626 0.800176 1.45626 1.1801C1.45626 1.32516 1.52534 1.48404 1.64277 1.62219C2.27828 2.38204 2.92069 3.27314 2.93451 4.36455C2.93451 4.5925 2.9276 4.78592 2.76181 5.08295L3.05194 5.03459C2.81017 4.21949 2.18848 3.63234 1.5806 3.63234C1.32501 3.63234 1.15232 3.81884 1.15232 4.09514C1.15232 4.23331 1.19377 4.56488 1.19377 4.79974C1.19377 5.95332 0.26123 6.69935 0.26123 8.67495C0.26123 10.92 1.97434 12.412 4.55091 12.412ZM4.68906 10.8923C3.65982 10.8923 2.96905 10.2637 2.96905 9.33119C2.96905 8.3572 3.66672 8.01181 3.75652 7.38322C3.76344 7.32796 3.79107 7.31414 3.83251 7.34867C4.08809 7.57663 4.24697 7.85293 4.37822 8.1776C4.67525 7.77696 4.81341 6.9204 4.73051 6.0293C4.72361 5.97404 4.75814 5.94642 4.80649 5.96713C6.02916 6.53357 6.65085 7.74241 6.65085 8.82693C6.65085 9.92527 6.00844 10.8923 4.68906 10.8923Z"},null,-1)]),2))]),h("span",{class:se(["text-sm truncate",r.value?"text-n-ruby-11":"text-n-slate-11"])},A(`${c.value}: ${o.value.threshold}`),3)]))}},C4e={class:"flex flex-col w-full gap-1"},O4e={class:"flex items-center justify-between w-full gap-2 py-1 h-7"},N4e={class:"mb-0 text-sm leading-7 text-n-slate-12 line-clamp-1"},w4e={key:0,class:"inline-flex items-center justify-center flex-shrink-0 rounded-full size-5 bg-n-brand"},R4e={class:"text-xs font-semibold text-white"},x4e={key:0,class:"w-px h-3 bg-n-slate-4"},$4e={class:"overflow-hidden"},M4e={__name:"CardMessagePreviewWithMeta",props:{conversation:{type:Object,required:!0},accountLabels:{type:Array,required:!0}},setup(e,{expose:t}){const n=e,{t:s}=Me(),o=X(null),{getPlainText:a}=ya(),i=C(()=>{const{lastNonActivityMessage:u={},customAttributes:d={}}=n.conversation,{email:{subject:m}={}}=d;return a(m||(u==null?void 0:u.content)||s("CHAT_LIST.NO_CONTENT"))}),r=C(()=>{const{meta:{assignee:u={}}={}}=n.conversation;return{name:u.name??u.availableName,thumbnail:u.thumbnail,status:u.availabilityStatus}}),l=C(()=>{const{unreadCount:u}=n.conversation;return u}),c=C(()=>{var u,d;return((u=o.value)==null?void 0:u.hasSlaThreshold)&&((d=n.conversation)==null?void 0:d.slaPolicyId)});return t({hasSlaThreshold:c}),(u,d)=>(p(),v("div",C4e,[h("div",O4e,[h("p",N4e,A(i.value),1),l.value>0?(p(),v("div",w4e,[h("span",R4e,A(l.value),1)])):w("",!0)]),h("div",{class:se(["grid items-center gap-2.5 h-7",c.value?"grid-cols-[auto_auto_1fr_20px]":"grid-cols-[1fr_20px]"])},[re(y(fI,{ref_key:"slaCardLabelRef",ref:o,conversation:e.conversation},null,8,["conversation"]),[[Jt,c.value]]),c.value?(p(),v("div",x4e)):w("",!0),h("div",$4e,[y(y4e,{"conversation-labels":e.conversation.labels,"account-labels":e.accountLabels},null,8,["conversation-labels","account-labels"])]),y(ts,{name:r.value.name,src:r.value.thumbnail,size:20,status:r.value.status,"rounded-full":""},null,8,["name","src","status"])],2)]))}},L4e={class:"flex flex-col w-full gap-1 min-w-0"},k4e={class:"flex items-center justify-between h-6 gap-2"},D4e={class:"text-base font-medium truncate text-n-slate-12"},P4e={class:"flex items-center gap-2"},B4e={class:"flex items-center justify-center flex-shrink-0 rounded-full bg-n-alpha-2 size-5"},F4e={class:"text-sm text-n-slate-10"},U4e={__name:"ConversationCard",props:{conversation:{type:Object,required:!0},contact:{type:Object,required:!0},stateInbox:{type:Object,required:!0},accountLabels:{type:Array,required:!0}},setup(e){const t=e,n=xn(),s=sn(),o=X(null),a=C(()=>t.contact),i=C(()=>{var T;return(T=a.value)==null?void 0:T.name}),r=C(()=>{var T;return(T=a.value)==null?void 0:T.thumbnail}),l=C(()=>{var T;return(T=a.value)==null?void 0:T.availabilityStatus}),c=C(()=>t.stateInbox),u=C(()=>{var T;return(T=c.value)==null?void 0:T.name}),d=C(()=>{const{phoneNumber:T,channelType:S}=c.value;return wc(S,T)}),m=C(()=>{var S;const T=(S=t.conversation)==null?void 0:S.timestamp;return T?sc(rs(T)):""}),f=C(()=>{var S;const{labels:T=[]}=t.conversation;return!((S=o.value)!=null&&S.hasSlaThreshold)&&T.length===0}),g=T=>{const S=At(Ff({accountId:s.params.accountId,id:t.conversation.id}));if(T.metaKey||T.ctrlKey){window.open(window.chatwootConfig.hostURL+S,"_blank","noopener noreferrer nofollow");return}n.push({path:S})};return(T,S)=>{const _=qe("tooltip");return p(),v("div",{role:"button",class:"flex w-full gap-3 px-3 py-4 transition-all duration-300 ease-in-out cursor-pointer",onClick:g},[y(ts,{name:i.value,src:r.value,size:24,status:l.value,"rounded-full":""},null,8,["name","src","status"]),h("div",L4e,[h("div",k4e,[h("h4",D4e,A(i.value),1),h("div",P4e,[y(b_,{priority:e.conversation.priority||null},null,8,["priority"]),re((p(),v("div",B4e,[y(Rt,{icon:d.value,class:"flex-shrink-0 text-n-slate-11 size-3"},null,8,["icon"])])),[[_,u.value,void 0,{left:!0}]]),h("span",F4e,A(m.value),1)])]),re(y(T4e,{conversation:e.conversation},null,8,["conversation"]),[[Jt,f.value]]),re(y(M4e,{ref_key:"cardMessagePreviewWithMetaRef",ref:o,conversation:e.conversation,"account-labels":e.accountLabels},null,8,["conversation","account-labels"]),[[Jt,!f.value]])])])}}},G4e={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},V4e={key:1,class:"px-6 py-4 divide-y divide-n-strong [&>*:hover]:!border-y-transparent [&>*:hover+*]:!border-t-transparent"},H4e={key:2,class:"px-6 py-10 text-sm leading-6 text-center text-n-slate-11"},W4e={__name:"ContactHistory",setup(e){const{t}=Me(),n=sn(),s=Oe("contactConversations/getAllConversationsByContactId"),o=Oe("contacts/getContactById"),a=Oe("inboxes/getInboxById"),i=Oe("labels/getLabels"),r=C(()=>i.value),l=Oe("contactConversations/getUIFlags"),c=C(()=>l.value.isFetching),u=C(()=>s.value(n.params.contactId));return(d,m)=>c.value?(p(),v("div",G4e,[y(gs)])):u.value.length>0?(p(),v("div",V4e,[(p(!0),v(pe,null,Ne(u.value,f=>(p(),$(U4e,{key:f.id,conversation:f,contact:N(o)(f.meta.sender.id),"state-inbox":N(a)(f.inboxId),"account-labels":r.value,class:"rounded-none hover:rounded-xl hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3"},null,8,["conversation","contact","state-inbox","account-labels"]))),128))])):(p(),v("p",H4e,A(N(t)("CONTACTS_LAYOUT.SIDEBAR.HISTORY.EMPTY_STATE")),1))}},z4e={class:"flex flex-col"},j4e={class:"flex flex-col gap-2"},K4e={class:"flex items-center justify-between h-5 gap-2"},Y4e={class:"text-sm text-n-slate-12"},X4e={class:"flex items-center justify-center w-24 h-5 text-xs rounded-md text-n-teal-11 bg-n-alpha-2"},q4e={class:"relative flex justify-center gap-2 top-4"},Z4e={class:"flex flex-col gap-2"},Q4e={class:"flex items-center justify-between h-5 gap-2"},J4e={class:"text-sm text-n-slate-12"},ePe={class:"flex items-center justify-center w-24 h-5 text-xs rounded-md text-n-ruby-11 bg-n-alpha-2"},tPe={class:"border border-n-strong h-[60px] gap-2 flex items-center rounded-xl p-3"},nPe={class:"flex flex-col w-full min-w-0 gap-1"},sPe={class:"text-sm leading-4 truncate text-n-slate-11"},aPe={class:"text-sm leading-4 truncate text-n-slate-11"},oPe={__name:"ContactMergeForm",props:{selectedContact:{type:Object,required:!0},primaryContactId:{type:[Number,null],default:null},primaryContactList:{type:Array,default:()=>[]},isSearching:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:primaryContactId","search"],setup(e,{emit:t}){const n=t,{t:s}=Me();return(o,a)=>(p(),v("div",z4e,[h("div",j4e,[h("div",K4e,[h("label",Y4e,A(N(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY")),1),h("span",X4e,A(N(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY_HELP_LABEL")),1)]),y(Ai,{id:"inbox","use-api-results":"","model-value":e.primaryContactId,options:e.primaryContactList,"empty-state":e.isSearching?N(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.IS_SEARCHING"):N(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.EMPTY_STATE"),"search-placeholder":N(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.SEARCH_PLACEHOLDER"),placeholder:N(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PLACEHOLDER"),"has-error":e.hasError,message:e.errorMessage,class:"[&>div>button]:bg-n-alpha-black2","onUpdate:modelValue":a[0]||(a[0]=i=>n("update:primaryContactId",i)),onSearch:a[1]||(a[1]=i=>n("search",i))},null,8,["model-value","options","empty-state","search-placeholder","placeholder","has-error","message"])]),h("div",q4e,[(p(),v(pe,null,Ne(3,i=>h("div",{key:i,class:"relative w-4 h-8"},a[2]||(a[2]=[h("div",{class:"absolute w-0 h-0 border-l-[4px] border-r-[4px] border-b-[6px] border-l-transparent border-r-transparent border-n-strong ltr:translate-x-[4px] rtl:-translate-x-[4px] -translate-y-[4px]"},null,-1),h("div",{class:"absolute w-[1px] h-full bg-n-strong left-1/2 transform -translate-x-1/2"},null,-1)]))),64))]),h("div",Z4e,[h("div",Q4e,[h("label",J4e,A(N(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PARENT")),1),h("span",ePe,A(N(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PARENT_HELP_LABEL")),1)]),h("div",tPe,[y(ts,{name:e.selectedContact.name||"",src:e.selectedContact.thumbnail||"",size:32,"rounded-full":""},null,8,["name","src"]),h("div",nPe,[h("span",sPe,A(e.selectedContact.name),1),h("span",aPe,A(e.selectedContact.email),1)])])])]))}},iPe={class:"flex flex-col gap-8 px-6 py-6"},rPe={class:"flex flex-col gap-2"},lPe={class:"text-base text-n-slate-12"},cPe={class:"text-sm text-n-slate-11"},uPe={class:"flex items-center justify-between gap-3"},dPe={__name:"ContactMerge",props:{selectedContact:{type:Object,required:!0}},emits:["goToContactsList","resetTab"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=pt(),i=sn(),r=ls({primaryContactId:null}),l=Oe("contacts/getUIFlags"),c=X([]),u=X(!1),m=bt({primaryContactId:{required:Ye}},r),f=C(()=>l.value.isMerging),g=C(()=>{var E;return((E=c.value)==null?void 0:E.map(b=>({value:b.id,label:`(ID: ${b.id}) ${b.name}`})))??[]}),T=Uo(async E=>{u.value=!0,c.value=[];try{const{data:{payload:b}}=await Nc.search(E);c.value=b.filter(I=>I.id!==n.selectedContact.id),u.value=!1}catch{ce(o("CONTACTS_LAYOUT.SIDEBAR.MERGE.SEARCH_ERROR_MESSAGE"))}finally{u.value=!1}},300,!1),S=()=>{r.primaryContactId===null&&s("resetTab"),r.primaryContactId=null,c.value=[],u.value=!1},_=async()=>{if(await m.value.$validate()){Pt(sr.MERGED_CONTACTS);try{await a.dispatch("contacts/merge",{childId:n.selectedContact.id||i.params.contactId,parentId:r.primaryContactId}),s("goToContactsList"),ce(o("CONTACTS_LAYOUT.SIDEBAR.MERGE.SUCCESS_MESSAGE")),S()}catch{ce(o("CONTACTS_LAYOUT.SIDEBAR.MERGE.ERROR_MESSAGE"))}}};return(E,b)=>(p(),v("div",iPe,[h("div",rPe,[h("h4",lPe,A(N(o)("CONTACTS_LAYOUT.SIDEBAR.MERGE.TITLE")),1),h("p",cPe,A(N(o)("CONTACTS_LAYOUT.SIDEBAR.MERGE.DESCRIPTION")),1)]),y(oPe,{"primary-contact-id":r.primaryContactId,"onUpdate:primaryContactId":b[0]||(b[0]=I=>r.primaryContactId=I),"selected-contact":e.selectedContact,"primary-contact-list":g.value,"is-searching":u.value,"has-error":!!N(m).primaryContactId.$error,"error-message":N(m).primaryContactId.$error?N(o)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY_REQUIRED_ERROR"):"",onSearch:N(T)},null,8,["primary-contact-id","selected-contact","primary-contact-list","is-searching","has-error","error-message","onSearch"]),h("div",uPe,[y(oe,{variant:"faded",color:"slate",label:N(o)("CONTACTS_LAYOUT.SIDEBAR.MERGE.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:S},null,8,["label"]),y(oe,{label:N(o)("CONTACTS_LAYOUT.SIDEBAR.MERGE.BUTTONS.CONFIRM"),class:"w-full","is-loading":f.value,disabled:f.value,onClick:_},null,8,["label","is-loading","disabled"])])]))}},pPe={class:"relative flex items-center"},hPe={key:0,class:"flex items-center gap-1"},mPe={__name:"ListAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),[a,i]=es(),r=C(()=>{var c;return((c=n.attribute.attributeValues)==null?void 0:c.map(u=>({label:u,value:u,action:"select",isSelected:u===n.attribute.value})))||[]}),l=async c=>{s("update",c.value),i(!1)};return(c,u)=>{const d=qe("on-clickaway");return p(),v("div",{class:se(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[re((p(),v("div",pPe,[h("span",{class:se(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate flex-1":e.isEditingView}]),onClick:u[0]||(u[0]=m=>N(i)(!n.isEditingView))},A(e.attribute.value||N(o)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.SELECT")),3),N(a)?(p(),$(Hs,{key:0,"menu-items":r.value,"show-search":"",class:se(["w-48 mt-2 top-full",{"ltr:right-0 rtl:left-0":!e.isEditingView,"ltr:left-0 rtl:right-0":e.isEditingView}]),onAction:u[1]||(u[1]=m=>l(m))},null,8,["menu-items","class"])):w("",!0)])),[[d,()=>N(i)(!1)]]),e.isEditingView?(p(),v("div",hPe,[y(oe,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:u[2]||(u[2]=m=>N(i)())}),y(oe,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:u[3]||(u[3]=m=>s("delete"))})])):w("",!0)],2)}}},fPe={__name:"CheckboxAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,o=X(!!n.attribute.value),a=i=>{s("update",i)};return(i,r)=>(p(),v("div",{class:se(["flex items-center w-full gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[y(fc,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=l=>o.value=l),onChange:a},null,8,["modelValue"]),e.isEditingView?(p(),$(oe,{key:0,variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:r[1]||(r[1]=l=>s("delete"))})):w("",!0)],2))}},gPe={key:1,class:"flex items-center gap-1"},_Pe={key:2,class:"flex items-center w-full"},vPe={__name:"DateAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(!1),i=X(n.attribute.value||""),l=bt({editedValue:{required:Ye,isDate:g=>new Date(g).toISOString()}},{editedValue:i}),c=C(()=>n.attribute.value?new Date(n.attribute.value).toLocaleDateString():o("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT")),u=C(()=>l.value.$errors.length>0),d=C({get(){const g=i.value??n.attribute.value;return g?new Date(g).toISOString().slice(0,10):a.value&&!u.value?new Date().toISOString().slice(0,10):""},set(g){i.value=g&&new Date(g).toISOString()}}),m=g=>{a.value=typeof g=="boolean"?g:!a.value,a.value&&!i.value&&(l.value.$reset(),i.value=new Date().toISOString())},f=async()=>{await l.value.$validate()&&(s("update",DT(i.value)),a.value=!1)};return(g,T)=>{const S=qe("on-clickaway");return p(),v("div",{class:se(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[a.value?w("",!0):(p(),v("span",{key:0,class:se(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate":e.isEditingView}]),onClick:T[0]||(T[0]=_=>m(!e.isEditingView))},A(c.value),3)),e.isEditingView&&!a.value?(p(),v("div",gPe,[y(oe,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:T[1]||(T[1]=_=>m(!0))}),y(oe,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:T[2]||(T[2]=_=>s("delete"))})])):w("",!0),a.value?re((p(),v("div",_Pe,[y(_n,{modelValue:d.value,"onUpdate:modelValue":T[3]||(T[3]=_=>d.value=_),type:"date",class:"w-full [&>p]:absolute [&>p]:mt-0.5 [&>p]:top-8 ltr:[&>p]:left-0 rtl:[&>p]:right-0",message:u.value?N(o)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_DATE"):"","message-type":u.value?"error":"info",autofocus:"","custom-input-class":"h-8 ltr:rounded-r-none rtl:rounded-l-none",onKeyup:kn(f,["enter"])},null,8,["modelValue","message","message-type"]),y(oe,{icon:"i-lucide-check",color:u.value?"ruby":"blue",size:"sm",class:"flex-shrink-0 ltr:rounded-l-none rtl:rounded-r-none",onClick:f},null,8,["color"])])),[[S,()=>m(!1)]]):w("",!0)],2)}}},bPe=["href"],EPe={key:1,class:"flex items-center gap-1"},TPe={key:2,class:"flex items-center w-full"},yPe={__name:"OtherAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(!1),i=X(n.attribute.value||""),r=C(()=>n.attribute.attributeDisplayType==="link"),l=C(()=>n.attribute.attributeDisplayType==="text"),c=C(()=>n.attribute.attributeDisplayType==="number"),u=C(()=>({editedValue:{required:Ye,...r.value&&{url:_=>!_||Lm(_)},...l.value&&n.attribute.regexPattern&&{regexValidation:_=>_?Lf(n.attribute.regexPattern).test(_):!0}}})),d=bt(u,{editedValue:i}),m=C(()=>d.value.$error),f=C(()=>{var _,E,b;return m.value?r.value&&((_=d.value.editedValue.url)!=null&&_.$invalid)?o("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_URL"):l.value&&n.attribute.regexPattern&&((E=d.value.editedValue.regexValidation)!=null&&E.$invalid)?n.attribute.regexCue||o("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_INPUT"):c.value&&((b=d.value.editedValue.required)!=null&&b.$invalid)?o("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_NUMBER"):o("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.REQUIRED"):""}),g=C(()=>{switch(n.attribute.attributeDisplayType){case"link":return"url";case"number":return"number";default:return"text"}}),T=_=>{a.value=typeof _=="boolean"?_:!a.value,a.value&&(d.value.$reset(),i.value=n.attribute.value||"")},S=async()=>{await d.value.$validate()&&(s("update",i.value),T(!1))};return(_,E)=>{const b=qe("on-clickaway");return p(),v("div",{class:se(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[a.value?w("",!0):(p(),v("span",{key:0,class:se(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate":e.isEditingView&&!r.value,"truncate hover:text-n-brand text-n-blue-text":e.isEditingView&&r.value}]),onClick:E[1]||(E[1]=I=>T(!e.isEditingView))},[r.value&&e.attribute.value&&e.isEditingView?(p(),v("a",{key:0,href:e.attribute.value,target:"_blank",rel:"noopener noreferrer",class:"hover:underline",onClick:E[0]||(E[0]=Fe(()=>{},["stop"]))},A(e.attribute.value),9,bPe)):(p(),v(pe,{key:1},[Re(A(e.attribute.value||N(o)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT")),1)],64))],2)),e.isEditingView&&!a.value?(p(),v("div",EPe,[y(oe,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:E[2]||(E[2]=I=>T(!0))}),y(oe,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:E[3]||(E[3]=I=>s("delete"))})])):w("",!0),a.value?re((p(),v("div",TPe,[y(_n,{modelValue:i.value,"onUpdate:modelValue":E[4]||(E[4]=I=>i.value=I),placeholder:N(o)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT"),type:g.value,class:"w-full [&>p]:absolute [&>p]:mt-0.5 [&>p]:top-8 ltr:[&>p]:left-0 rtl:[&>p]:right-0",autofocus:"",message:f.value,"message-type":m.value?"error":"info","custom-input-class":"h-8 ltr:rounded-r-none rtl:rounded-l-none",onKeyup:kn(S,["enter"])},null,8,["modelValue","placeholder","type","message","message-type"]),y(oe,{icon:"i-lucide-check",color:m.value?"ruby":"blue",size:"sm",class:"flex-shrink-0 ltr:rounded-l-none rtl:rounded-r-none",onClick:S},null,8,["color"])])),[[b,()=>T(!1)]]):w("",!0)],2)}}},SPe={class:"flex items-center justify-between truncate"},APe={class:"text-sm font-medium truncate text-n-slate-12"},XE={__name:"ContactCustomAttributeItem",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},setup(e){const t=e,n=pt(),{t:s}=Me(),o=sn(),a=async()=>{var c;try{await n.dispatch("contacts/deleteCustomAttributes",{id:o.params.contactId,customAttributes:[t.attribute.attributeKey]}),ce(s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.DELETE_SUCCESS_MESSAGE"))}catch(u){ce(((c=u==null?void 0:u.response)==null?void 0:c.message)||s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.DELETE_ERROR"))}},i=async c=>{var u;try{await n.dispatch("contacts/update",{id:o.params.contactId,customAttributes:{[t.attribute.attributeKey]:c}}),ce(s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.SUCCESS_MESSAGE"))}catch(d){ce(((u=d==null?void 0:d.response)==null?void 0:u.message)||s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.UPDATE_ERROR"))}},r={list:mPe,checkbox:fPe,date:vPe,default:yPe},l=C(()=>r[t.attribute.attributeDisplayType]||r.default);return(c,u)=>(p(),v("div",{class:se(["grid grid-cols-[140px,1fr] group/attribute items-center w-full gap-2",e.isEditingView?"min-h-10":"min-h-11"])},[h("div",SPe,[h("span",APe,A(e.attribute.attributeDisplayName),1)]),(p(),$(vs(l.value),{attribute:e.attribute,"is-editing-view":e.isEditingView,onUpdate:i,onDelete:a},null,40,["attribute","is-editing-view"]))],2))}},IPe={key:0,class:"flex flex-col gap-6 px-6 py-6"},CPe={key:0,class:"flex flex-col gap-2"},OPe={key:1,class:"flex items-center gap-3"},NPe={class:"text-sm font-medium text-n-slate-10"},wPe={class:"flex flex-col gap-3"},RPe={key:0,class:"relative"},xPe=["placeholder"],$Pe={key:1,class:"flex items-center justify-start h-11"},MPe={class:"text-sm text-n-slate-11"},LPe={key:2,class:"flex flex-col gap-2"},kPe={key:1,class:"px-6 py-10 text-sm leading-6 text-center text-n-slate-11"},DPe={__name:"ContactCustomAttributes",props:{selectedContact:{type:Object,default:null}},setup(e){const t=e,{t:n}=Me(),{uiSettings:s}=ln(),o=X(""),a=Oe("attributes/getContactAttributes")||[],i=C(()=>{var S;return((S=a.value)==null?void 0:S.length)>0}),r=(S,_,E)=>!S.length||!_?[]:S.reduce((b,I)=>{const{attributeKey:R}=I;return E(R,_)&&b.push({...I,value:_[R]??""}),b},[]),l=C(()=>s.value.conversation_elements_order_conversation_contact_panel??[]),c=S=>{const _=l.value;if(!(_!=null&&_.length))return S;const E=new Map(_.map((b,I)=>[b,I]));return[...S].sort((b,I)=>{const R=E.get(b.attributeKey)??1/0,O=E.get(I.attributeKey)??1/0;return R-O})},u=C(()=>{var _;const S=r(a.value,(_=t.selectedContact)==null?void 0:_.customAttributes,(E,b)=>E in b);return c(S)}),d=C(()=>{var _;const S=r(a.value,(_=t.selectedContact)==null?void 0:_.customAttributes,(E,b)=>!(E in b));return c(S)}),m=C(()=>{var S;return(S=d.value)==null?void 0:S.filter(_=>_.attributeDisplayName.toLowerCase().includes(o.value.toLowerCase()))}),f=C(()=>{var S;return(S=d.value)==null?void 0:S.length}),g=C(()=>f.value===0),T=C(()=>u.value.length===0);return(S,_)=>i.value?(p(),v("div",IPe,[T.value?w("",!0):(p(),v("div",CPe,[(p(!0),v(pe,null,Ne(u.value,E=>(p(),$(XE,{key:E.id,"is-editing-view":"",attribute:E},null,8,["attribute"]))),128))])),g.value?w("",!0):(p(),v("div",OPe,[_[1]||(_[1]=h("div",{class:"flex-1 h-[1px] bg-n-slate-5"},null,-1)),h("span",NPe,A(N(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.UNUSED_ATTRIBUTES",{count:f.value})),1),_[2]||(_[2]=h("div",{class:"flex-1 h-[1px] bg-n-slate-5"},null,-1))])),h("div",wPe,[g.value?w("",!0):(p(),v("div",RPe,[_[3]||(_[3]=h("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),re(h("input",{"onUpdate:modelValue":_[0]||(_[0]=E=>o.value=E),type:"search",placeholder:N(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.SEARCH_PLACEHOLDER"),class:"w-full h-8 py-2 pl-10 pr-2 text-sm reset-base outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,xPe),[[mt,o.value]])])),m.value.length===0&&!g.value?(p(),v("div",$Pe,[h("p",MPe,A(N(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.NO_ATTRIBUTES")),1)])):w("",!0),g.value?w("",!0):(p(),v("div",LPe,[(p(!0),v(pe,null,Ne(m.value,E=>(p(),$(XE,{key:E.id,attribute:E},null,8,["attribute"]))),128))]))])])):(p(),v("p",kPe,A(N(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.EMPTY_STATE")),1))}},PPe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},BPe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},FPe={class:"px-6"},UPe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},xu={__name:"ContactManageView",setup(e){const t=pt(),n=sn(),s=xn(),o=Oe("contacts/getContactById"),a=Oe("contacts/getUIFlags"),i=X("attributes"),r=X(null),l=C(()=>a.value.isFetchingItem),c=C(()=>a.value.isMerging),u=C(()=>a.value.isUpdating),d=C(()=>o.value(n.params.contactId)),m=C(()=>l.value||c.value),{t:f}=Me(),g=[{key:"ATTRIBUTES",value:"attributes"},{key:"HISTORY",value:"history"},{key:"NOTES",value:"notes"},{key:"MERGE",value:"merge"}],T=C(()=>g.map(L=>({label:f(`CONTACTS_LAYOUT.SIDEBAR.TABS.${L.key}`),value:L.value}))),S=C(()=>g.findIndex(L=>L.value===i.value)),_=()=>{var L;(L=window.history.state)!=null&&L.back||window.history.length>1?s.back():s.push(`/app/accounts/${n.params.accountId}/contacts?page=1`)},E=async()=>{n.params.contactId&&(await t.dispatch("contacts/show",{id:n.params.contactId}),await t.dispatch("contacts/fetchContactableInbox",n.params.contactId))},b=L=>{i.value=L.value},I=()=>{const{contactId:L}=n.params;L&&t.dispatch("contactNotes/get",{contactId:L})},R=()=>{const{contactId:L}=n.params;L&&t.dispatch("contactConversations/get",L)},O=()=>{t.dispatch("attributes/get")},x=async L=>{const F={success:{block:f("CONTACTS_LAYOUT.HEADER.ACTIONS.BLOCK_SUCCESS_MESSAGE"),unblock:f("CONTACTS_LAYOUT.HEADER.ACTIONS.UNBLOCK_SUCCESS_MESSAGE")},error:{block:f("CONTACTS_LAYOUT.HEADER.ACTIONS.BLOCK_ERROR_MESSAGE"),unblock:f("CONTACTS_LAYOUT.HEADER.ACTIONS.UNBLOCK_ERROR_MESSAGE")}};try{await t.dispatch("contacts/update",{...d.value,blocked:!L}),ce(L?F.success.unblock:F.success.block)}catch{ce(L?F.error.unblock:F.error.block)}};return dt(()=>{E(),I(),R(),O()}),(L,F)=>(p(),v("div",PPe,[y(U8e,{"button-label":L.$t("CONTACTS_LAYOUT.HEADER.SEND_MESSAGE"),"selected-contact":d.value,"is-detail-view":"","show-pagination-footer":!1,"is-updating":u.value,onGoToContactsList:_,onToggleBlock:x},{sidebar:K(()=>[h("div",FPe,[y(c4e,{tabs:T.value,"initial-active-tab":S.value,class:"w-full [&>button]:w-full bg-n-alpha-black2",onTabChanged:b},null,8,["tabs","initial-active-tab"])]),l.value?(p(),v("div",UPe,[y(gs)])):(p(),v(pe,{key:1},[i.value==="attributes"?(p(),$(DPe,{key:0,"selected-contact":d.value},null,8,["selected-contact"])):w("",!0),i.value==="notes"?(p(),$(f4e,{key:1})):w("",!0),i.value==="history"?(p(),$(W4e,{key:2})):w("",!0),i.value==="merge"?(p(),$(dPe,{key:3,ref_key:"contactMergeRef",ref:r,"selected-contact":d.value,onGoToContactsList:_,onResetTab:F[0]||(F[0]=D=>b(g[0]))},null,8,["selected-contact"])):w("",!0)],64))]),default:K(()=>[m.value?(p(),v("div",BPe,[y(gs)])):d.value?(p(),$(i4e,{key:1,"selected-contact":d.value,onGoToContactsList:_},null,8,["selected-contact"])):w("",!0)]),_:1},8,["button-label","selected-contact","is-updating"])]))}},$o={featureFlag:_t.CRM,permissions:["administrator","agent","contact_manage"]},GPe=[{path:At("accounts/:accountId/contacts"),component:xl,meta:$o,children:[{path:"",name:"contacts_dashboard_index",component:xl,meta:$o},{path:"segments/:segmentId",name:"contacts_dashboard_segments_index",component:xl,meta:$o},{path:"labels/:label",name:"contacts_dashboard_labels_index",component:xl,meta:$o},{path:"active",name:"contacts_dashboard_active",component:xl,meta:$o}]},{path:At("accounts/:accountId/contacts/:contactId"),component:xu,meta:$o,children:[{path:"",name:"contacts_edit",component:xu,meta:$o},{path:"segments/:segmentId",name:"contacts_edit_segment",component:xu,meta:$o},{path:"labels/:label",name:"contacts_edit_label",component:xu,meta:$o}]}],VPe={components:{Thumbnail:Hn,Spinner:bs,EmptyState:pr,NextButton:oe},props:{notifications:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},isUpdating:{type:Boolean,default:!1},onClickNotification:{type:Function,default:()=>{}},onMarkAllDoneClick:{type:Function,default:()=>{}}},computed:{...lt({notificationMetadata:"notifications/getMeta"}),showEmptyResult(){return!this.isLoading&&this.notifications.length===0}},methods:{dynamicTime:rs}},HPe={class:"flex-grow flex-shrink h-full px-4 py-8 overflow-hidden bg-n-background"},WPe={class:"flex w-full items-center justify-between gap-2 mb-4"},zPe={class:"text-xl font-medium text-n-slate-12"},jPe={class:"woot-table notifications-table overflow-auto"},KPe=["onClick"],YPe={class:"overflow-hidden flex-view notification-contant--wrap whitespace-nowrap text-ellipsis"},XPe={class:"notification--title"},qPe={class:"overflow-hidden notification--message-title whitespace-nowrap text-ellipsis"},ZPe={class:"text-right"},QPe={class:"notification--type"},JPe={class:"thumbnail--column"},e5e={class:"text-right timestamp--column"},t5e={class:"notification--created-at"},n5e={key:0,class:"notification--unread-indicator"},s5e={key:1,class:"notifications--loader"};function a5e(e,t,n,s,o,a){const i=M("NextButton"),r=M("Thumbnail"),l=M("EmptyState"),c=M("Spinner");return p(),v("section",HPe,[h("div",WPe,[h("h6",zPe,A(e.$t("NOTIFICATIONS_PAGE.HEADER")),1),e.notificationMetadata.unreadCount?(p(),$(i,{key:0,type:"submit",sm:"",label:e.$t("NOTIFICATIONS_PAGE.MARK_ALL_DONE"),"is-loading":n.isUpdating,onClick:n.onMarkAllDoneClick},null,8,["label","is-loading","onClick"])):w("",!0)]),h("table",jPe,[re(h("tbody",null,[(p(!0),v(pe,null,Ne(n.notifications,u=>(p(),v("tr",{key:u.id,class:se({"is-unread":u.read_at===null}),onClick:()=>n.onClickNotification(u)},[h("td",null,[h("div",YPe,[h("h5",XPe,A(`#${u.primary_actor?u.primary_actor.id:e.$t("NOTIFICATIONS_PAGE.DELETE_TITLE")}`),1),h("span",qPe,A(u.push_message_title),1)])]),h("td",ZPe,[h("span",QPe,A(e.$t(`NOTIFICATIONS_PAGE.TYPE_LABEL.${u.notification_type}`)),1)]),h("td",JPe,[u.primary_actor.meta.assignee?(p(),$(r,{key:0,src:u.primary_actor.meta.assignee.thumbnail,size:"36px",username:u.primary_actor.meta.assignee.name},null,8,["src","username"])):w("",!0)]),h("td",null,[h("div",e5e,[h("span",t5e,A(a.dynamicTime(u.last_activity_at)),1)])]),h("td",null,[u.read_at?w("",!0):(p(),v("div",n5e))])],10,KPe))),128))],512),[[Jt,!n.isLoading]])]),a.showEmptyResult?(p(),$(l,{key:0,title:e.$t("NOTIFICATIONS_PAGE.LIST.404")},null,8,["title"])):w("",!0),n.isLoading?(p(),v("div",s5e,[y(c),h("span",null,A(e.$t("NOTIFICATIONS_PAGE.LIST.LOADING_MESSAGE")),1)])):w("",!0)])}const o5e=Ae(VPe,[["render",a5e],["__scopeId","data-v-e59df173"]]),i5e={components:{NotificationTable:o5e,TableFooter:Ig},computed:{...lt({accountId:"getCurrentAccountId",meta:"notifications/getMeta",records:"notifications/getNotifications",uiFlags:"notifications/getUIFlags"})},mounted(){this.$store.dispatch("notifications/get",{page:1})},methods:{onPageChange(e){window.history.pushState({},null,`${this.$route.path}?page=${e}`),this.$store.dispatch("notifications/get",{page:e})},openConversation(e){const{primary_actor_id:t,primary_actor_type:n,primary_actor:{id:s},notification_type:o}=e;Pt(ar.OPEN_CONVERSATION_VIA_NOTIFICATION,{notificationType:o}),this.$store.dispatch("notifications/read",{id:e.id,primaryActorId:t,primaryActorType:n,unreadCount:this.meta.unreadCount}),this.$router.push(`/app/accounts/${this.accountId}/conversations/${s}`)},onMarkAllDoneClick(){Pt(ar.MARK_AS_READ_NOTIFICATIONS),this.$store.dispatch("notifications/readAll")}}},r5e={class:"h-full overflow-y-auto"},l5e={class:"flex flex-col h-full"};function c5e(e,t,n,s,o,a){const i=M("NotificationTable"),r=M("TableFooter");return p(),v("div",r5e,[h("div",l5e,[y(i,{notifications:e.records,"is-loading":e.uiFlags.isFetching,"is-updating":e.uiFlags.isUpdating,"on-click-notification":a.openConversation,"on-mark-all-done-click":a.onMarkAllDoneClick},null,8,["notifications","is-loading","is-updating","on-click-notification","on-mark-all-done-click"]),y(r,{class:"border-t border-slate-75 dark:border-slate-700/50","current-page":Number(e.meta.currentPage),"total-count":e.meta.count,"page-size":15,onPageChange:a.onPageChange},null,8,["current-page","total-count","onPageChange"])])])}const u5e=Ae(i5e,[["render",c5e],["__scopeId","data-v-181b5808"]]),d5e=[{path:At("accounts/:accountId/notifications"),component:Lc,props:{headerTitle:"",icon:"",showNewButton:!1,showSidemenuIcon:!1},children:[{path:"",name:"notifications_index",component:u5e,meta:{permissions:["administrator","agent","custom_role"]}}]}],p5e={CONVERSATION_MENTION:["i-lucide-at-sign","text-n-blue-text"],CONVERSATION_ASSIGNMENT:["i-lucide-chevrons-right","text-n-blue-text"],CONVERSATION_CREATION:["i-lucide-mail-plus","text-n-blue-text"],PARTICIPATING_CONVERSATION_NEW_MESSAGE:["i-lucide-message-square-plus","text-n-blue-text"],ASSIGNED_CONVERSATION_NEW_MESSAGE:["i-lucide-message-square-plus","text-n-blue-text"],SLA_MISSED_FIRST_RESPONSE:["i-lucide-heart-crack","text-n-ruby-11"],SLA_MISSED_NEXT_RESPONSE:["i-lucide-heart-crack","text-n-ruby-11"],SLA_MISSED_RESOLUTION:["i-lucide-heart-crack","text-n-ruby-11"]},h5e={role:"button",class:"flex items-center w-full h-8 px-2 py-1 rounded-md cursor-pointer hover:text-n-blue-text min-w-0"},m5e={class:"text-xs font-medium truncate text-n-slate-12"},gI={__name:"MenuItem",props:{label:{type:String,default:""}},setup(e){return(t,n)=>(p(),v("div",h5e,[h("span",m5e,A(e.label),1)]))}},f5e={components:{MenuItem:gI,ContextMenu:i_},props:{contextMenuPosition:{type:Object,default:()=>({})},menuItems:{type:Array,default:()=>[]}},emits:["close","selectAction"],methods:{handleClose(){this.$emit("close")},onMenuItemClick(e){this.$emit("selectAction",e),this.handleClose()}}},g5e={class:"bg-n-alpha-3 backdrop-blur-[100px] w-40 py-2 px-2 outline outline-1 outline-n-container shadow-lg rounded-xl"};function _5e(e,t,n,s,o,a){const i=M("MenuItem"),r=M("ContextMenu");return p(),$(r,{x:n.contextMenuPosition.x,y:n.contextMenuPosition.y,onClose:a.handleClose},{default:K(()=>[h("div",g5e,[(p(!0),v(pe,null,Ne(n.menuItems,l=>(p(),$(i,{key:l.key,label:l.label,onClick:Fe(c=>a.onMenuItemClick(l.key),["stop"])},null,8,["label","onClick"]))),128))])]),_:1},8,["x","y","onClose"])}const v5e=Ae(f5e,[["render",_5e]]),b5e={class:"flex items-start gap-2"},E5e={class:"mb-0 line-clamp-2"},T5e={class:"flex items-center justify-between h-6 gap-2"},y5e={class:"flex items-center flex-1 min-w-0 gap-1"},S5e={key:0,class:"flex items-center w-full min-w-0 gap-2 ltr:pl-1 rtl:pr-1"},A5e={key:1,class:"flex items-center w-full min-w-0 gap-2 ltr:pl-1 rtl:pr-1"},I5e={class:"flex items-center flex-shrink-0 gap-2"},C5e={key:0,class:"w-px h-3 rounded-sm bg-n-slate-4"},O5e={key:2,class:"flex items-center justify-center flex-shrink-0 rounded-full bg-n-alpha-2 size-4"},N5e={class:"text-sm text-n-slate-10"},w5e={__name:"InboxCard",props:{inboxItem:{type:Object,default:()=>({})},stateInbox:{type:Object,default:()=>({})}},emits:["click","contextMenuOpen","contextMenuClose","markNotificationAsRead","markNotificationAsUnRead","deleteNotification"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(!1),i=X({x:null,y:null}),r=X(null),l={emphasis:"text-sm font-medium text-n-slate-11",emphasisUnread:"text-sm font-medium text-n-slate-12",normal:"text-sm font-normal text-n-slate-11",normalUnread:"text-sm text-n-slate-12"},c=C(()=>{var D;return(D=n.inboxItem)==null?void 0:D.primaryActor}),u=C(()=>{var D;return(D=c.value)==null?void 0:D.meta}),d=C(()=>{var D;return(D=u.value)==null?void 0:D.sender}),m=C(()=>{var D;return!((D=n.inboxItem)!=null&&D.readAt)}),f=C(()=>n.stateInbox),g=C(()=>{const{phoneNumber:D,channelType:V}=f.value;return wc(V,D)}),T=C(()=>{var D,V;return((D=r.value)==null?void 0:D.hasSlaThreshold)&&((V=c.value)==null?void 0:V.slaPolicyId)}),S=C(()=>{var V;const D=(V=n.inboxItem)==null?void 0:V.lastActivityAt;return D?sc(rs(D)):""}),_=C(()=>[{key:"delete",label:o("INBOX.MENU_ITEM.DELETE")},{key:m.value?"mark_as_read":"mark_as_unread",label:o(`INBOX.MENU_ITEM.MARK_AS_${m.value?"READ":"UNREAD"}`)}]),E=C(()=>({emphasis:m.value?l.emphasisUnread:l.emphasis,normal:m.value?l.normalUnread:l.normal})),b=D=>D.startsWith(": ")?D.slice(2):D.replace(/^([^:]+):/g,(V,B)=>`<span class="${E.value.emphasis}">${B}:</span>`),I=C(()=>{var V;const D=`<span class="${E.value.normal}">${b(((V=n.inboxItem)==null?void 0:V.pushMessageBody)||"")}</span>`;return m.value?`<span class="inline-flex flex-shrink-0 w-2 h-2 mb-px rounded-full bg-n-iris-10 ltr:mr-1 rtl:ml-1"></span> ${D}`:D}),R=C(()=>{var P,k;const D=((k=(P=n.inboxItem)==null?void 0:P.notificationType)==null?void 0:k.toUpperCase())||"",[V="",B="text-n-blue-text"]=p5e[D]||[];return{text:D?o(`INBOX.TYPES_NEXT.${D}`):"",icon:V,color:B}}),O=C(()=>{const{snoozedUntil:D}=n.inboxItem;return D?D_e(rs(k_e(D))):null}),x=C(()=>{var D,V;return(V=(D=n.inboxItem)==null?void 0:D.meta)==null?void 0:V.lastSnoozedAt}),L=C(()=>x.value?o("INBOX.TYPES_NEXT.SNOOZED_ENDS"):o("INBOX.TYPES_NEXT.SNOOZED_UNTIL",{time:sc(O.value)})),F={close:()=>{a.value=!1,i.value={x:null,y:null},s("contextMenuClose")},open:D=>{D.preventDefault(),i.value={x:D.pageX||D.clientX,y:D.pageY||D.clientY},a.value=!0,s("contextMenuOpen")},handle:D=>{var B;const V={mark_as_read:()=>s("markNotificationAsRead",n.inboxItem),mark_as_unread:()=>s("markNotificationAsUnRead",n.inboxItem),delete:()=>s("deleteNotification",n.inboxItem)};(B=V[D])==null||B.call(V)}};return Af(F.close),(D,V)=>{var k,U,j;const B=qe("dompurify-html"),P=qe("tooltip");return p(),v("div",{role:"button",class:"flex flex-col w-full gap-2 p-3 transition-all duration-300 ease-in-out cursor-pointer",onContextmenu:V[0]||(V[0]=z=>F.open(z)),onClick:V[1]||(V[1]=z=>s("click"))},[h("div",b5e,[y(ts,{name:d.value.name,src:d.value.thumbnail,size:20,"rounded-full":"",class:"mt-1"},null,8,["name","src"]),re(h("p",E5e,null,512),[[B,I.value]])]),h("div",T5e,[h("div",y5e,[O.value||x.value?(p(),v("div",S5e,[y(Rt,{icon:x.value?"i-lucide-alarm-clock-off":"i-lucide-alarm-clock-plus",class:se(["flex-shrink-0 size-4",m.value?"text-n-blue-text":"text-n-slate-11"])},null,8,["icon","class"]),h("span",{class:se(["text-xs font-medium truncate",m.value?"text-n-blue-text":"text-n-slate-11"])},A(L.value),3)])):R.value.text?(p(),v("div",A5e,[y(Rt,{icon:R.value.icon,class:se([m.value?R.value.color:"text-n-slate-11","flex-shrink-0 size-4"])},null,8,["icon","class"]),h("span",{class:se(["text-xs font-medium truncate",m.value?R.value.color:"text-n-slate-11"])},A(R.value.text),3)])):w("",!0)]),h("div",I5e,[re(y(fI,{ref_key:"slaCardLabel",ref:r,conversation:c.value,class:se(["[&>span]:text-xs",!m.value&&"[&>span]:text-n-slate-11 [&>div>svg]:fill-n-slate-11"])},null,8,["conversation","class"]),[[Jt,T.value]]),T.value?(p(),v("div",C5e)):w("",!0),(k=c.value)!=null&&k.priority?(p(),$(b_,{key:1,priority:(U=c.value)==null?void 0:U.priority,class:"[&>svg]:size-4"},null,8,["priority"])):w("",!0),g.value?re((p(),v("div",O5e,[y(Rt,{icon:g.value,class:"flex-shrink-0 text-n-slate-11 size-2.5"},null,8,["icon"])])),[[P,(j=f.value)==null?void 0:j.name,void 0,{left:!0}]]):w("",!0),h("span",N5e,A(S.value),1)])]),a.value?(p(),$(v5e,{key:0,"context-menu-position":i.value,"menu-items":_.value,onClose:F.close,onSelectAction:F.handle},null,8,["context-menu-position","menu-items","onClose","onSelectAction"])):w("",!0)],32)}}},R5e={components:{MenuItem:gI},emits:["optionClick"],data(){return{menuItems:[{key:"mark_all_read",label:this.$t("INBOX.MENU_ITEM.MARK_ALL_READ")},{key:"delete_all",label:this.$t("INBOX.MENU_ITEM.DELETE_ALL")},{key:"delete_all_read",label:this.$t("INBOX.MENU_ITEM.DELETE_ALL_READ")}]}},methods:{onClick(e){this.$emit("optionClick",e)}}},x5e={class:"z-50 flex flex-col max-w-64 min-w-40 gap-1 bg-n-alpha-3 backdrop-blur-[100px] divide-y py-2 px-2 outline outline-1 outline-n-container shadow-lg rounded-xl divide-n-weak dark:divide-n-strong"},$5e={class:"flex flex-col"};function M5e(e,t,n,s,o,a){const i=M("MenuItem");return p(),v("div",x5e,[h("div",$5e,[(p(!0),v(pe,null,Ne(o.menuItems,r=>(p(),$(i,{key:r.key,label:r.label,onClick:Fe(l=>a.onClick(r.key),["stop"])},null,8,["label","onClick"]))),128))])])}const L5e=Ae(R5e,[["render",M5e]]),k5e={components:{NextButton:oe},emits:["filter"],setup(){const{uiSettings:e,updateUISettings:t}=ln();return{uiSettings:e,updateUISettings:t}},data(){return{showSortMenu:!1,displayOptions:[{name:this.$t("INBOX.DISPLAY_MENU.DISPLAY_OPTIONS.SNOOZED"),key:It.INBOX_DISPLAY_BY.SNOOZED,selected:!1,type:It.INBOX_FILTER_TYPE.STATUS},{name:this.$t("INBOX.DISPLAY_MENU.DISPLAY_OPTIONS.READ"),key:It.INBOX_DISPLAY_BY.READ,selected:!1,type:It.INBOX_FILTER_TYPE.TYPE}],sortOptions:[{name:this.$t("INBOX.DISPLAY_MENU.SORT_OPTIONS.NEWEST"),key:It.INBOX_SORT_BY.NEWEST,type:It.INBOX_FILTER_TYPE.SORT_ORDER},{name:this.$t("INBOX.DISPLAY_MENU.SORT_OPTIONS.OLDEST"),key:It.INBOX_SORT_BY.OLDEST,type:It.INBOX_FILTER_TYPE.SORT_ORDER}],activeSort:It.INBOX_SORT_BY.NEWEST,activeDisplayFilter:{status:"",type:""}}},computed:{activeSortOption(){var e;return((e=this.sortOptions.find(t=>t.key===this.activeSort))==null?void 0:e.name)||""}},mounted(){this.setSavedFilter()},methods:{updateDisplayOption(e){this.displayOptions.forEach(t=>{t.key===e.key&&(t.selected=!e.selected,this.activeDisplayFilter[t.type]=t.selected?t.key:"",this.saveSelectedDisplayFilter(),this.$emit("filter",e))})},openSortMenu(){this.showSortMenu=!this.showSortMenu},onSortOptionClick(e){this.activeSort=e.key,this.showSortMenu=!1,this.saveSelectedDisplayFilter(),this.$emit("filter",e)},saveSelectedDisplayFilter(){this.updateUISettings({inbox_filter_by:{...this.activeDisplayFilter,sort_by:this.activeSort||It.INBOX_SORT_BY.NEWEST}})},setSavedFilter(){const{inbox_filter_by:e={}}=this.uiSettings,{status:t,type:n,sort_by:s}=e;this.activeSort=s||It.INBOX_SORT_BY.NEWEST,this.displayOptions.forEach(o=>{o.selected=o.type===It.INBOX_FILTER_TYPE.STATUS?o.key===t:o.key===n,this.activeDisplayFilter[o.type]=o.selected?o.key:""})}}},D5e={class:"flex flex-col bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container shadow-lg z-50 max-w-64 min-w-[170px] w-fit rounded-xl divide-y divide-n-weak dark:divide-n-strong"},P5e={class:"flex items-center gap-2 justify-between p-3 rounded-t-lg h-11"},B5e={class:"flex gap-1.5 min-w-0"},F5e={class:"text-xs font-medium text-n-slate-12 truncate min-w-0"},U5e={class:"relative"},G5e={key:0,class:"absolute flex flex-col gap-0.5 bg-n-alpha-3 backdrop-blur-[100px] z-60 rounded-lg p-0.5 w-fit min-w-20 max-w-32 top-px outline outline-1 outline-n-container dark:outline-n-strong"},V5e=["onClick"],H5e={key:0,class:"i-lucide-check size-2.5 flex-shrink-0 text-n-blue-text"},W5e={class:"px-3 py-4 text-xs font-medium text-n-slate-11"},z5e={class:"flex flex-col divide-y divide-n-weak dark:divide-n-strong"},j5e=["id","name","checked","onChange"],K5e=["for"];function Y5e(e,t,n,s,o,a){const i=M("NextButton"),r=qe("on-clickaway");return p(),v("div",D5e,[h("div",P5e,[h("div",B5e,[t[0]||(t[0]=h("span",{class:"i-lucide-arrow-down-up size-3.5 text-n-slate-12"},null,-1)),h("span",F5e,A(e.$t("INBOX.DISPLAY_MENU.SORT")),1)]),re((p(),v("div",U5e,[y(i,{label:a.activeSortOption,icon:"i-lucide-chevron-down",slate:"","trailing-icon":"",xs:"",outline:"",class:"w-fit min-w-20 max-w-32",onClick:a.openSortMenu},null,8,["label","onClick"]),o.showSortMenu?(p(),v("div",G5e,[(p(!0),v(pe,null,Ne(o.sortOptions,l=>(p(),v("div",{key:l.key,role:"button",class:se(["flex rounded-md h-5 w-full items-center justify-between px-1.5 py-0.5 gap-2 whitespace-nowrap",{"bg-n-brand/10 dark:bg-n-brand/10":o.activeSort===l.key}]),onClick:Fe(c=>a.onSortOptionClick(l),["stop"])},[h("span",{class:se(["text-xs font-medium hover:text-n-brand truncate min-w-0 dark:hover:text-n-brand",{"text-n-blue-text dark:text-n-blue-text":o.activeSort===l.key,"text-n-slate-11":o.activeSort!==l.key}])},A(l.name),3),o.activeSort===l.key?(p(),v("span",H5e)):w("",!0)],10,V5e))),128))])):w("",!0)])),[[r,()=>o.showSortMenu=!1]])]),h("div",null,[h("span",W5e,A(e.$t("INBOX.DISPLAY_MENU.DISPLAY")),1),h("div",z5e,[(p(!0),v(pe,null,Ne(o.displayOptions,l=>(p(),v("div",{key:l.key,class:"flex items-center px-3 py-2 gap-1.5 h-9"},[h("input",{id:l.key,type:"checkbox",name:l.key,checked:l.selected,class:"m-0 border-[1.5px] shadow border-slate-200 dark:border-slate-600 appearance-none rounded-[4px] w-4 h-4 dark:bg-slate-800 focus:ring-1 focus:ring-slate-100 dark:focus:ring-slate-700 checked:bg-n-brand dark:checked:bg-n-brand after:content-[''] after:text-white checked:after:content-['✓'] after:flex after:items-center after:justify-center checked:border-t checked:border-woot-700 dark:checked:border-woot-300 checked:border-b-0 checked:border-r-0 checked:border-l-0 after:text-center after:text-xs after:font-bold after:relative after:-top-[1.5px]",onChange:c=>a.updateDisplayOption(l)},null,40,j5e),h("label",{for:l.key,class:"text-xs font-medium text-slate-800 !ml-0 !mr-0 dark:text-slate-100"},A(l.name),9,K5e)]))),128))])])])}const X5e=Ae(k5e,[["render",Y5e]]),q5e={components:{NextButton:oe,InboxOptionMenu:L5e,InboxDisplayMenu:X5e},props:{isContextMenuOpen:{type:Boolean,default:!1}},emits:["redirect","filter"],data(){return{showInboxDisplayMenu:!1,showInboxOptionMenu:!1}},watch:{isContextMenuOpen:{handler(e){e&&(this.showInboxDisplayMenu=!1,this.showInboxOptionMenu=!1)},immediate:!0}},methods:{markAllRead(){Pt(ji.MARK_ALL_NOTIFICATIONS_AS_READ),this.$store.dispatch("notifications/readAll").then(()=>{ce(this.$t("INBOX.ALERTS.MARK_ALL_READ"))})},deleteAll(){this.$store.dispatch("notifications/deleteAll").then(()=>{ce(this.$t("INBOX.ALERTS.DELETE_ALL"))})},deleteAllRead(){this.$store.dispatch("notifications/deleteAllRead").then(()=>{ce(this.$t("INBOX.ALERTS.DELETE_ALL_READ"))})},openInboxDisplayMenu(){this.showInboxDisplayMenu=!this.showInboxDisplayMenu},openInboxOptionsMenu(){this.showInboxOptionMenu=!this.showInboxOptionMenu},onInboxOptionMenuClick(e){const n={mark_all_read:()=>this.markAllRead(),delete_all:()=>this.deleteAll(),delete_all_read:()=>this.deleteAllRead()}[e];n&&n(),this.$emit("redirect")},onFilterChange(e){this.$emit("filter",e),this.showInboxDisplayMenu=!1,this.$emit("redirect")}}},Z5e={class:"flex items-center justify-between w-full gap-1 h-14 px-4 mb-2"},Q5e={class:"flex items-center gap-2 min-w-0 flex-1"},J5e={class:"min-w-0 text-lg font-medium truncate text-n-slate-12"},e6e={class:"relative"},t6e={class:"relative flex items-center gap-1"};function n6e(e,t,n,s,o,a){const i=M("NextButton"),r=M("InboxDisplayMenu"),l=M("InboxOptionMenu"),c=qe("on-clickaway");return p(),v("div",Z5e,[h("div",Q5e,[h("h1",J5e,A(e.$t("INBOX.LIST.TITLE")),1),h("div",e6e,[y(i,{label:e.$t("INBOX.LIST.DISPLAY_DROPDOWN"),icon:"i-lucide-chevron-down","trailing-icon":"",slate:"",xs:"",faded:"",onClick:a.openInboxDisplayMenu},null,8,["label","onClick"]),o.showInboxDisplayMenu?re((p(),$(r,{key:0,class:"absolute mt-1 top-full ltr:left-0 rtl:right-0",onFilter:a.onFilterChange},null,8,["onFilter"])),[[c,a.openInboxDisplayMenu]]):w("",!0)])]),h("div",t6e,[y(i,{icon:"i-lucide-sliders-vertical",slate:"",xs:"",faded:"",onClick:a.openInboxOptionsMenu},null,8,["onClick"]),o.showInboxOptionMenu?re((p(),$(l,{key:0,class:"absolute top-full mt-1 ltr:right-0 ltr:lg:right-[unset] rtl:left-0 rtl:lg:left-[unset]",onOptionClick:a.onInboxOptionMenuClick},null,8,["onOptionClick"])),[[c,a.openInboxOptionsMenu]]):w("",!0)])])}const s6e=Ae(q5e,[["render",n6e]]),a6e={components:{InboxCard:w5e,InboxListHeader:s6e,IntersectionObserver:dA,CmdBarConversationSnooze:qA},setup(){const{uiSettings:e}=ln();return{uiSettings:e}},data(){return{infiniteLoaderOptions:{root:this.$refs.notificationList,rootMargin:"100px 0px 100px 0px"},page:1,status:"",type:"",sortOrder:It.INBOX_SORT_BY.NEWEST,isInboxContextMenuOpen:!1,notificationIdToSnooze:null}},computed:{...lt({meta:"notifications/getMeta",uiFlags:"notifications/getUIFlags",notification:"notifications/getFilteredNotifications",notificationV4:"notifications/getFilteredNotificationsV4",inboxById:"inboxes/getInboxById"}),currentNotificationId(){return Number(this.$route.params.notification_id)},inboxFilters(){return{page:this.page,status:this.status,type:this.type,sortOrder:this.sortOrder}},notifications(){return this.notification(this.inboxFilters)},notificationsV4(){return this.notificationV4(this.inboxFilters)},showEndOfList(){return this.uiFlags.isAllNotificationsLoaded&&!this.uiFlags.isFetching},showEmptyState(){return!this.uiFlags.isFetching&&!this.notifications.length}},watch:{inboxFilters(e,t){e!==t&&this.$store.dispatch("notifications/updateNotificationFilters",e)}},mounted(){this.setSavedFilter(),this.fetchNotifications()},methods:{stateInbox(e){return this.inboxById(e)},fetchNotifications(){this.page=1,this.$store.dispatch("notifications/clear");const e=this.inboxFilters;this.$store.dispatch("notifications/index",e)},redirectToInbox(){this.$route.name!=="inbox_view"&&this.$router.replace({name:"inbox_view"})},loadMoreNotifications(){this.uiFlags.isAllNotificationsLoaded||(this.$store.dispatch("notifications/index",{page:this.page+1,status:this.status,type:this.type,sortOrder:this.sortOrder}),this.page+=1)},markNotificationAsRead(e){Pt(ji.MARK_NOTIFICATION_AS_READ);const{id:t,primary_actor_id:n,primary_actor_type:s}=e;this.$store.dispatch("notifications/read",{id:t,primaryActorId:n,primaryActorType:s,unreadCount:this.meta.unreadCount}).then(()=>{ce(this.$t("INBOX.ALERTS.MARK_AS_READ")),this.$store.dispatch("notifications/unReadCount")})},markNotificationAsUnRead(e){Pt(ji.MARK_NOTIFICATION_AS_UNREAD),this.redirectToInbox();const{id:t}=e;this.$store.dispatch("notifications/unread",{id:t}).then(()=>{ce(this.$t("INBOX.ALERTS.MARK_AS_UNREAD")),this.$store.dispatch("notifications/unReadCount")})},deleteNotification(e){Pt(ji.DELETE_NOTIFICATION),this.redirectToInbox(),this.$store.dispatch("notifications/delete",{notification:e,unread_count:this.meta.unreadCount,count:this.meta.count}).then(()=>{ce(this.$t("INBOX.ALERTS.DELETE"))})},onFilterChange(e){const{STATUS:t,TYPE:n,SORT_ORDER:s}=It.INBOX_FILTER_TYPE;e.type===t&&(this.status=e.selected?e.key:""),e.type===n&&(this.type=e.selected?e.key:""),e.type===s&&(this.sortOrder=e.key),this.fetchNotifications()},setSavedFilter(){const{inbox_filter_by:e={}}=this.uiSettings,{status:t,type:n,sort_by:s}=e;this.status=t,this.type=n,this.sortOrder=s||It.INBOX_SORT_BY.NEWEST,this.$store.dispatch("notifications/setNotificationFilters",this.inboxFilters)},openConversation(e){const{id:t,primaryActorId:n,primaryActorType:s,primaryActor:{inboxId:o},notificationType:a}=e;this.$route.params.notification_id!==t&&(Pt(ji.OPEN_CONVERSATION_VIA_INBOX,{notificationType:a}),this.$store.dispatch("notifications/read",{id:t,primaryActorId:n,primaryActorType:s,unreadCount:this.meta.unreadCount}).then(()=>{this.$store.dispatch("notifications/unReadCount")}),this.$router.push({name:"inbox_view_conversation",params:{inboxId:o,notification_id:t}}))}}},o6e={class:"flex w-full h-full bg-n-solid-1"},i6e={ref:"notificationList",class:"flex flex-col gap-px w-full h-[calc(100%-56px)] pb-3 overflow-x-hidden px-3 overflow-y-auto divide-y divide-n-weak [&>*:hover]:!border-y-transparent [&>*.active]:!border-y-transparent [&>*:hover+*]:!border-t-transparent [&>*.active+*]:!border-t-transparent"},r6e={key:0,class:"text-center"},l6e={key:1,class:"p-4 text-sm font-medium text-center text-slate-400 dark:text-slate-400"};function c6e(e,t,n,s,o,a){const i=M("InboxListHeader"),r=M("InboxCard"),l=M("IntersectionObserver"),c=M("router-view"),u=M("CmdBarConversationSnooze");return p(),v("section",o6e,[h("div",{class:se(["flex flex-col h-full w-full lg:min-w-[400px] lg:max-w-[400px] ltr:border-r rtl:border-l border-n-weak",a.currentNotificationId?"hidden xl:flex":"flex"])},[y(i,{"is-context-menu-open":o.isInboxContextMenuOpen,onFilter:a.onFilterChange,onRedirect:a.redirectToInbox},null,8,["is-context-menu-open","onFilter","onRedirect"]),h("div",i6e,[(p(!0),v(pe,null,Ne(a.notificationsV4,d=>{var m;return p(),$(r,{key:d.id,"inbox-item":d,"state-inbox":a.stateInbox((m=d.primaryActor)==null?void 0:m.inboxId),class:se(["rounded-none hover:rounded-xl hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3",a.currentNotificationId===d.id?"bg-n-alpha-1 dark:bg-n-alpha-3 click-animation rounded-xl active":""]),onMarkNotificationAsRead:a.markNotificationAsRead,onMarkNotificationAsUnRead:a.markNotificationAsUnRead,onDeleteNotification:a.deleteNotification,onContextMenuOpen:t[0]||(t[0]=f=>o.isInboxContextMenuOpen=!0),onContextMenuClose:t[1]||(t[1]=f=>o.isInboxContextMenuOpen=!1),onClick:f=>a.openConversation(d)},null,8,["inbox-item","state-inbox","class","onMarkNotificationAsRead","onMarkNotificationAsUnRead","onDeleteNotification","onClick"])}),128)),e.uiFlags.isFetching?(p(),v("div",r6e,t[2]||(t[2]=[h("span",{class:"mt-4 mb-4 spinner"},null,-1)]))):w("",!0),a.showEmptyState?(p(),v("p",l6e,A(e.$t("INBOX.LIST.NO_NOTIFICATIONS")),1)):w("",!0),!a.showEndOfList&&!e.uiFlags.isFetching?(p(),$(l,{key:2,options:o.infiniteLoaderOptions,onObserved:a.loadMoreNotifications},null,8,["options","onObserved"])):w("",!0)],512)],2),y(c),y(u)])}const u6e=Ae(a6e,[["render",c6e],["__scopeId","data-v-fa027776"]]),d6e={components:{NextButton:oe},props:{totalLength:{type:Number,default:0},currentIndex:{type:Number,default:0}},emits:["prev","next"],computed:{isUpDisabled(){return this.currentIndex===1},isDownDisabled(){return this.currentIndex===this.totalLength||this.totalLength<=1}},methods:{handleUpClick(){this.currentIndex>1&&this.$emit("prev")},handleDownClick(){this.currentIndex<this.totalLength&&this.$emit("next")}}},p6e={class:"flex gap-2 items-center"},h6e={class:"flex gap-1 items-center"},m6e={class:"flex items-center gap-1 whitespace-nowrap"},f6e={class:"text-sm font-medium text-n-slate-12 tabular-nums"},g6e={key:0,class:"text-sm text-n-slate-9 relative -top-px"},_6e={key:1,class:"text-sm text-n-slate-9 tabular-nums"};function v6e(e,t,n,s,o,a){const i=M("NextButton");return p(),v("div",p6e,[h("div",h6e,[y(i,{icon:"i-lucide-chevron-up",xs:"",slate:"",faded:"",disabled:a.isUpDisabled,onClick:a.handleUpClick},null,8,["disabled","onClick"]),y(i,{icon:"i-lucide-chevron-down",xs:"",slate:"",faded:"",disabled:a.isDownDisabled,onClick:a.handleDownClick},null,8,["disabled","onClick"])]),h("div",m6e,[h("span",f6e,A(n.totalLength<=1?"1":n.currentIndex),1),n.totalLength>1?(p(),v("span",g6e," / ")):w("",!0),n.totalLength>1?(p(),v("span",_6e,A(n.totalLength),1)):w("",!0)])])}const b6e=Ae(d6e,[["render",v6e]]),E6e={components:{PaginationButton:b6e,NextButton:oe,BackButton:lr,CustomSnoozeModal:l_},props:{totalLength:{type:Number,default:0},currentIndex:{type:Number,default:0},activeNotification:{type:Object,default:null}},emits:["next","prev"],data(){return{showCustomSnoozeModal:!1}},computed:{...lt({meta:"notifications/getMeta"})},mounted(){wt.on(aE,this.onCmdSnoozeNotification)},unmounted(){wt.off(aE,this.onCmdSnoozeNotification)},methods:{openSnoozeNotificationModal(){document.querySelector("ninja-keys").open({parent:"snooze_notification"})},hideCustomSnoozeModal(){this.showCustomSnoozeModal=!1},async snoozeNotification(e){var t;try{await this.$store.dispatch("notifications/snooze",{id:(t=this.activeNotification)==null?void 0:t.id,snoozedUntil:e}),ce(this.$t("INBOX.ALERTS.SNOOZE"))}catch{}},onCmdSnoozeNotification(e){if(e===It.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME)this.showCustomSnoozeModal=!0;else{const t=r_(e)||null;this.snoozeNotification(t)}},scheduleCustomSnooze(e){if(this.showCustomSnoozeModal=!1,e){const t=co(e)||null;this.snoozeNotification(t)}},deleteNotification(){Pt(ji.DELETE_NOTIFICATION),this.$store.dispatch("notifications/delete",{notification:this.activeNotification,unread_count:this.meta.unreadCount,count:this.meta.count}).then(()=>{ce(this.$t("INBOX.ALERTS.DELETE"))}),this.$router.replace({name:"inbox_view"})},onClickNext(){this.$emit("next")},onClickPrev(){this.$emit("prev")},onClickGoToInboxList(){this.$router.replace({name:"inbox_view"})}}},T6e={class:"flex items-center justify-between w-full gap-2 border-b ltr:pl-4 rtl:pl-2 h-12 ltr:pr-2 rtl:pr-4 rtl:border-r border-n-weak"},y6e={class:"flex items-center gap-4"},S6e={class:"flex items-center gap-2"};function A6e(e,t,n,s,o,a){const i=M("BackButton"),r=M("PaginationButton"),l=M("NextButton"),c=M("CustomSnoozeModal"),u=M("woot-modal");return p(),v("div",T6e,[h("div",y6e,[y(i,{compact:"","button-label":e.$t("INBOX.ACTION_HEADER.BACK"),class:"xl:hidden flex"},null,8,["button-label"]),n.totalLength>1?(p(),$(r,{key:0,"total-length":n.totalLength,"current-index":n.currentIndex+1,onNext:a.onClickNext,onPrev:a.onClickPrev},null,8,["total-length","current-index","onNext","onPrev"])):w("",!0)]),h("div",S6e,[y(l,{label:e.$t("INBOX.ACTION_HEADER.SNOOZE"),icon:"i-lucide-bell-minus",slate:"",xs:"",faded:"",class:"[&>.truncate]:hidden md:[&>.truncate]:block",onClick:a.openSnoozeNotificationModal},null,8,["label","onClick"]),y(l,{label:e.$t("INBOX.ACTION_HEADER.DELETE"),icon:"i-lucide-trash-2",slate:"",xs:"",faded:"",class:"[&>.truncate]:hidden md:[&>.truncate]:block",onClick:a.deleteNotification},null,8,["label","onClick"])]),y(u,{show:o.showCustomSnoozeModal,"onUpdate:show":t[0]||(t[0]=d=>o.showCustomSnoozeModal=d),"on-close":a.hideCustomSnoozeModal},{default:K(()=>[y(c,{onClose:a.hideCustomSnoozeModal,onChooseTime:a.scheduleCustomSnooze},null,8,["onClose","onChooseTime"])]),_:1},8,["show","on-close"])])}const I6e=Ae(E6e,[["render",A6e]]),C6e={props:{emptyStateMessage:{type:String,default:""}},computed:{...lt({uiFlags:"notifications/getUIFlags"}),emptyMessage(){return this.emptyStateMessage?this.emptyStateMessage:this.$t("INBOX.LIST.NOTE")}}},O6e={class:"items-center justify-center hidden w-full h-full text-center bg-n-background lg:flex"},N6e={key:0,class:"my-4 spinner"},w6e={key:1,class:"flex flex-col items-center gap-2"},R6e={class:"text-sm font-medium text-slate-500 dark:text-slate-300"};function x6e(e,t,n,s,o,a){const i=M("fluent-icon");return p(),v("div",O6e,[e.uiFlags.isFetching?(p(),v("span",N6e)):(p(),v("div",w6e,[y(i,{icon:"mail-inbox",size:"40",class:"text-slate-600 dark:text-slate-400"}),h("span",R6e,A(a.emptyMessage),1)]))])}const _I=Ae(C6e,[["render",x6e]]),$6e={components:{InboxItemHeader:I6e,InboxEmptyState:_I,ConversationBox:XA},setup(){const{uiSettings:e,updateUISettings:t}=ln();return{uiSettings:e,updateUISettings:t}},data(){return{isConversationLoading:!1}},computed:{...lt({notification:"notifications/getFilteredNotifications",currentChat:"getSelectedChat",activeNotificationById:"notifications/getNotificationById",conversationById:"getConversationById",uiFlags:"notifications/getUIFlags",meta:"notifications/getMeta"}),notifications(){return this.notification({sortOrder:this.activeSortOrder})},inboxId(){return Number(this.$route.params.inboxId)},notificationId(){return Number(this.$route.params.notification_id)},activeNotification(){return this.activeNotificationById(this.notificationId)},conversationId(){var e,t;return(t=(e=this.activeNotification)==null?void 0:e.primary_actor)==null?void 0:t.id},totalNotificationCount(){return this.meta.count},showEmptyState(){var e;return!this.conversationId||!((e=this.notifications)!=null&&e.length)&&this.uiFlags.isFetching},activeNotificationIndex(){var e;return(e=this.notifications)==null?void 0:e.findIndex(t=>t.id===this.notificationId)},activeSortOrder(){const{inbox_filter_by:e={}}=this.uiSettings,{sort_by:t}=e;return t||"desc"},isContactPanelOpen(){if(this.currentChat.id){const{is_contact_sidebar_open:e}=this.uiSettings;return e}return!1}},watch:{conversationId:{immediate:!0,handler(e,t){e!==t&&this.fetchConversationById()}}},mounted(){this.$store.dispatch("agents/get")},methods:{async fetchConversationById(){if(!this.notificationId||!this.conversationId)return;this.$store.dispatch("clearSelectedState");const e=this.findConversation();if(e){this.setActiveChat(e);return}this.isConversationLoading=!0,await this.$store.dispatch("getConversation",this.conversationId),this.setActiveChat(),this.isConversationLoading=!1},setActiveChat(){const e=this.findConversation();e&&this.$store.dispatch("setActiveChat",{data:e}).then(()=>{wt.emit(jt.SCROLL_TO_MESSAGE)})},findConversation(){return this.conversationById(this.conversationId)},navigateToConversation(e,t){let n;t==="prev"&&e?n=e-1:t==="next"&&e<this.totalNotificationCount&&(n=e+1);const s=this.notifications[n];s&&this.openNotification(s)},openNotification(e){const{id:t,primary_actor_id:n,primary_actor_type:s,primary_actor:{meta:{unreadCount:o}={}},notification_type:a}=e;Pt(ji.OPEN_CONVERSATION_VIA_INBOX,{notificationType:a}),this.$store.dispatch("notifications/read",{id:t,primaryActorId:n,primaryActorType:s,unreadCount:o}),this.$router.push({name:"inbox_view_conversation",params:{notification_id:t}})},onClickNext(){this.navigateToConversation(this.activeNotificationIndex,"next")},onClickPrev(){this.navigateToConversation(this.activeNotificationIndex,"prev")},onToggleContactPanel(){this.updateUISettings({is_contact_sidebar_open:!this.isContactPanelOpen})}}},M6e={class:"h-full w-full xl:w-[calc(100%-400px)]"},L6e={key:0,class:"flex w-full h-full"},k6e={key:1,class:"flex flex-col w-full h-full"},D6e={key:0,class:"flex items-center h-[calc(100%-56px)] justify-center bg-slate-25 dark:bg-slate-800"};function P6e(e,t,n,s,o,a){const i=M("InboxEmptyState"),r=M("InboxItemHeader"),l=M("ConversationBox");return p(),v("div",M6e,[a.showEmptyState?(p(),v("div",L6e,[y(i,{"empty-state-message":e.$t("INBOX.LIST.NO_MESSAGES_AVAILABLE")},null,8,["empty-state-message"])])):(p(),v("div",k6e,[y(r,{"total-length":a.totalNotificationCount,"current-index":a.activeNotificationIndex,"active-notification":a.activeNotification,onNext:a.onClickNext,onPrev:a.onClickPrev},null,8,["total-length","current-index","active-notification","onNext","onPrev"]),o.isConversationLoading?(p(),v("div",D6e,t[0]||(t[0]=[h("span",{class:"my-4 spinner"},null,-1)]))):(p(),$(l,{key:1,class:"h-[calc(100%-56px)] [&.conversation-details-wrap]:!border-0","is-inbox-view":"","inbox-id":a.inboxId,"is-contact-panel-open":a.isContactPanelOpen,"is-on-expanded-layout":!1,onContactPanelToggle:a.onToggleContactPanel},null,8,["inbox-id","is-contact-panel-open","onContactPanelToggle"]))]))])}const B6e=Ae($6e,[["render",P6e]]),F6e=[{path:At("accounts/:accountId/inbox-view"),component:u6e,children:[{path:"",name:"inbox_view",component:_I,meta:{permissions:[...Gn,...Rs],featureFlag:_t.CHATWOOT_V4}},{path:":notification_id",name:"inbox_view_conversation",component:B6e,meta:{permissions:[...Gn,...Rs],featureFlag:_t.CHATWOOT_V4}}]}],Va=(e="")=>{const t=e?`/${e}`:"";return At(`accounts/:accountId/portals${t}`)},U6e={components:{NextButton:oe},data(){return{helpCenterDocsURL:It.HELP_CENTER_DOCS_URL,upgradeFeature:[{key:1,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.PORTALS.TITLE"),icon:"book-copy",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.PORTALS.DESCRIPTION")},{key:2,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.LOCALES.TITLE"),icon:"globe-line",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.LOCALES.DESCRIPTION")},{key:3,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.SEO.TITLE"),icon:"heart-handshake",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.SEO.DESCRIPTION")},{key:4,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.API.TITLE"),icon:"search-check",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.API.DESCRIPTION")}]}},computed:{...lt({accountId:"getCurrentAccountId",isOnChatwootCloud:"globalConfig/isOnChatwootCloud"})},methods:{openBillingPage(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})},openHelpCenterDocs(){window.open(this.helpCenterDocsURL,"_blank")}}},G6e={class:"flex flex-col gap-12 sm:gap-16 items-center justify-center py-0 px-4 md:px-0 w-full min-h-screen max-w-full overflow-auto bg-white dark:bg-slate-900"},V6e={class:"flex flex-col justify-start sm:justify-center gap-6"},H6e={class:"flex flex-col gap-1.5 items-start sm:items-center"},W6e={class:"text-slate-900 dark:text-white text-left sm:text-center text-4xl sm:text-5xl mb-6 font-semibold"},z6e={class:"max-w-2xl text-base font-normal leading-6 text-left sm:text-center text-slate-700 dark:text-slate-200"},j6e={key:0,class:"flex flex-row gap-3 justify-start items-center sm:justify-center"},K6e={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-16 w-full max-w-2xl overflow-auto"},Y6e={class:"flex gap-2 flex-row"},X6e={class:"font-semibold text-lg text-slate-800 dark:text-slate-25"},q6e={class:"text-sm leading-6 text-slate-700 dark:text-slate-100"};function Z6e(e,t,n,s,o,a){const i=M("NextButton"),r=M("fluent-icon");return p(),v("div",G6e,[h("div",V6e,[h("div",H6e,[h("h1",W6e,A(e.$t("HELP_CENTER.UPGRADE_PAGE.TITLE")),1),h("p",z6e,A(e.isOnChatwootCloud?e.$t("HELP_CENTER.UPGRADE_PAGE.DESCRIPTION"):e.$t("HELP_CENTER.UPGRADE_PAGE.SELF_HOSTED_DESCRIPTION")),1)]),e.isOnChatwootCloud?(p(),v("div",j6e,[y(i,{outline:"",label:e.$t("HELP_CENTER.UPGRADE_PAGE.BUTTON.LEARN_MORE"),onClick:a.openHelpCenterDocs},null,8,["label","onClick"]),y(i,{label:e.$t("HELP_CENTER.UPGRADE_PAGE.BUTTON.UPGRADE"),onClick:a.openBillingPage},null,8,["label","onClick"])])):w("",!0)]),h("div",K6e,[(p(!0),v(pe,null,Ne(o.upgradeFeature,l=>(p(),v("div",{key:l.key,class:"w-64 min-w-full"},[h("div",Y6e,[h("div",null,[y(r,{icon:l.icon,"icon-lib":"lucide",size:26,class:"mt-px text-slate-800 dark:text-slate-25"},null,8,["icon"])]),h("div",null,[h("h5",X6e,A(l.title),1),h("p",q6e,A(l.description),1)])])]))),128))])])}const Q6e=Ae(U6e,[["render",Z6e]]),J6e={class:"flex flex-grow-0 w-full h-full min-h-0 app-wrapper"},eBe={key:0,class:"flex flex-1 h-full px-0 overflow-hidden bg-white dark:bg-slate-900"},tBe={__name:"HelpCenterPageRouteView",setup(e){const t=sn(),n=So(),{uiSettings:s,updateUISettings:o}=ln(),a=C(()=>n.getters.getCurrentAccountId),i=C(()=>n.getters["portals/allPortals"]),r=(g,T)=>n.getters["accounts/isFeatureEnabledonAccount"](g,T),l=C(()=>r(a.value,_t.HELP_CENTER)),c=C(()=>{const g=t.params.portalSlug||s.value.last_active_portal_slug;return g?n.getters["portals/portalBySlug"](g):i.value[0]}),u=C(()=>{var g;return c.value?(g=c.value.meta)==null?void 0:g.default_locale:""}),d=C(()=>t.params.locale||u.value),m=C(()=>c.value?c.value.slug:""),f=async()=>{await n.dispatch("portals/index");const g={portalSlug:m.value,locale:d.value};n.dispatch("portals/show",g),n.dispatch("categories/index",g),n.dispatch("agents/get")};return dt(()=>f()),ct(()=>t.params.portalSlug,g=>{g&&g!==s.value.last_active_portal_slug&&o({last_active_portal_slug:g,last_active_locale_code:d.value})}),(g,T)=>{const S=M("router-view");return p(),v("div",J6e,[l.value?(p(),v("section",eBe,[y(S)])):(p(),$(Q6e,{key:1}))])}}},nBe={class:"flex items-center justify-center w-full bg-n-background text-slate-600 dark:text-slate-200"},sBe={__name:"PortalsIndexPage",setup(e){const t=So(),n=xn(),{uiSettings:s}=ln(),o=sn(),a=C(()=>t.getters["portals/allPortals"]),i=d=>!!a.value.find(m=>m.slug===d),r=(d,m)=>{n.replace({name:d,params:m,replace:!0})},l=()=>{const{last_active_portal_slug:d,last_active_locale_code:m}=s.value||{};if(i(d))return{portalSlug:d,locale:m};if(a.value.length>0){const{slug:f,meta:{default_locale:g}={}}=a.value[0];return{portalSlug:f,locale:g}}return null},c=()=>{const d=l(),{navigationPath:m}=o.params,g=["portals_articles_index","portals_categories_index","portals_locales_index","portals_settings_index"].includes(m)?m:"portals_articles_index";return d?r(g,d):r("portals_new",{})},u=async()=>{await t.dispatch("portals/index"),tn(()=>c())};return dt(()=>u()),(d,m)=>(p(),v("div",nBe,[y(gs)]))}},aBe={class:"flex justify-between w-full gap-1"},oBe={class:"flex items-center gap-2"},iBe={class:"relative flex items-center group"},rBe={class:"flex items-center justify-between w-full gap-4"},lBe={class:"flex items-center gap-4"},cBe={class:"flex items-center gap-1"},uBe={class:"text-sm truncate text-n-slate-11"},dBe={class:"block text-sm whitespace-nowrap text-n-slate-11"},pBe={class:"inline-flex items-center gap-1 text-n-slate-11 whitespace-nowrap"},hBe={class:"text-sm"},mBe={class:"text-sm text-n-slate-11 line-clamp-1"},qE={__name:"ArticleCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},status:{type:String,required:!0},author:{type:Object,default:null},category:{type:Object,required:!0},views:{type:Number,required:!0},updatedAt:{type:Number,required:!0}},emits:["openArticle","articleAction"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),[a,i]=es(),r=C(()=>{const S=Object.entries(R0e).reduce((E,[b,I])=>(E[b]={...I,label:o(I.label)},E),{});return[...(rE[n.status]||rE[tr.PUBLISHED]).map(E=>S[E]),S.delete]}),l=C(()=>{switch(n.status){case"archived":return"text-n-slate-12";case"draft":return"text-n-amber-11";default:return"text-n-teal-11"}}),c=C(()=>{switch(n.status){case"archived":return o("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.ARCHIVED");case"draft":return o("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.DRAFT");default:return o("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.PUBLISHED")}}),u=C(()=>{var S;return(S=n.category)!=null&&S.slug?`${n.category.icon} ${n.category.name}`:o("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.CATEGORY.UNCATEGORISED")}),d=C(()=>{var S,_;return((S=n.author)==null?void 0:S.name)||((_=n.author)==null?void 0:_.availableName)||""}),m=C(()=>{var S;return(S=n.author)==null?void 0:S.thumbnail}),f=C(()=>rs(n.updatedAt)),g=({action:S,value:_})=>{i(!1),s("articleAction",{action:S,value:_,id:n.id})},T=S=>{s("openArticle",S)};return(S,_)=>{const E=qe("on-clickaway");return p(),$(hr,null,{default:K(()=>[h("div",aBe,[h("span",{class:"text-base cursor-pointer hover:underline underline-offset-2 hover:text-n-blue-text text-n-slate-12 line-clamp-1",onClick:_[0]||(_[0]=b=>T(e.id))},A(e.title),1),h("div",oBe,[h("span",{class:se(["text-xs font-medium inline-flex items-center h-6 px-2 py-0.5 rounded-md bg-n-alpha-2",l.value])},A(c.value),3),re((p(),v("div",iBe,[y(oe,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:_[1]||(_[1]=b=>N(i)())}),N(a)?(p(),$(Hs,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:left-0 xl:rtl:right-0 top-full",onAction:_[2]||(_[2]=b=>g(b))},null,8,["menu-items"])):w("",!0)])),[[E,()=>N(i)(!1)]])])]),h("div",rBe,[h("div",lBe,[h("div",cBe,[y(ts,{name:d.value,src:m.value,size:16,"rounded-full":""},null,8,["name","src"]),h("span",uBe,A(d.value||"-"),1)]),h("span",dBe,A(u.value),1),h("div",pBe,[y(Rt,{icon:"i-lucide-eye",class:"size-4"}),h("span",hBe,A(N(o)("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.VIEWS",{count:e.views})),1)])]),h("span",mBe,A(f.value),1)])]),_:1})}}},ZE=[{id:1,title:"How to get an SSL certificate for your Help Center's custom domain",status:"draft",updatedAt:1729205669,author:{availableName:"Michael"},category:{slug:"configuration",icon:"📦",name:"Setup & Configuration"},views:3400},{id:2,title:"Setting up your first Help Center portal",status:"published",updatedAt:1729205669,author:{availableName:"John"},category:{slug:"onboarding",icon:"🧑‍🍳",name:"Onboarding"},views:400},{id:3,title:"Best practices for organizing your Help Center content",status:"archived",updatedAt:1729205669,author:{availableName:"Fernando"},category:{slug:"best-practices",icon:"⛺️",name:"Best Practices"},views:400},{id:4,title:"Customizing the appearance of your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Jane"},category:{slug:"design",icon:"🎨",name:"Design"},views:400},{id:5,title:"Integrating your Help Center with third-party tools",status:"published",updatedAt:1729205669,author:{availableName:"Sarah"},category:{slug:"integrations",icon:"🔗",name:"Integrations"},views:2800},{id:6,title:"Managing user permissions in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Alex"},category:{slug:"administration",icon:"🔐",name:"Administration"},views:1200},{id:7,title:"Creating and managing FAQ sections",status:"published",updatedAt:1729205669,author:{availableName:"Emily"},category:{slug:"content-management",icon:"📝",name:"Content Management"},views:5600},{id:8,title:"Implementing search functionality in your Help Center",status:"archived",updatedAt:1729205669,author:{availableName:"David"},category:{slug:"features",icon:"🔍",name:"Features"},views:1800},{id:9,title:"Analyzing Help Center usage metrics",status:"published",updatedAt:1729205669,author:{availableName:"Rachel"},category:{slug:"analytics",icon:"📊",name:"Analytics"},views:3200},{id:10,title:"Setting up multilingual support in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Carlos"},category:{slug:"localization",icon:"🌍",name:"Localization"},views:900},{id:11,title:"Creating interactive tutorials for your products",status:"published",updatedAt:1729205669,author:{availableName:"Olivia"},category:{slug:"education",icon:"🎓",name:"Education"},views:4100},{id:12,title:"Implementing a feedback system in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Nathan"},category:{slug:"user-engagement",icon:"💬",name:"User Engagement"},views:750},{id:13,title:"Optimizing Help Center content for SEO",status:"published",updatedAt:1729205669,author:{availableName:"Sophia"},category:{slug:"seo",icon:"🚀",name:"SEO"},views:2900},{id:14,title:"Creating a knowledge base for internal teams",status:"archived",updatedAt:1729205669,author:{availableName:"Daniel"},category:{slug:"internal-resources",icon:"🏢",name:"Internal Resources"},views:1500}],fBe={class:"flex flex-col gap-6"},gBe={__name:"CreatePortalDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=Me(),a=pt(),i=X(null),r=Oe("portals/isCreatingPortal"),l=ls({name:"",slug:"",domain:"",logoUrl:"",avatarBlobId:""}),c={name:{required:Ye,minLength:Qt(2)},slug:{required:Hl.withMessage(()=>o("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.ERROR"),Ye),isValidSlug:Hl.withMessage(()=>o("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.FORMAT_ERROR"),gO)}},u=bt(c,l),d=C(()=>u.value.name.$error?o("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.ERROR"):""),m=C(()=>{var E;return((E=u.value.slug.$errors[0])==null?void 0:E.$message)||""}),f=C(()=>u.value.$invalid);ct(()=>l.name,()=>{l.slug=JO(l.name)});const g=E=>{s("create",{slug:E.slug,locale:"en"})},T=()=>{Object.keys(l).forEach(E=>{l[E]=""}),u.value.$reset()},S=async E=>{try{await a.dispatch("portals/create",E),i.value.close();const b={has_custom_domain:!!E.custom_domain};Pt(V_.ONBOARD_BASIC_INFORMATION,b),Pt(V_.CREATE_PORTAL,b),ce(o("HELP_CENTER.PORTAL_SETTINGS.API.CREATE_PORTAL.SUCCESS_MESSAGE")),T(),g(E)}catch(b){i.value.close(),ce((b==null?void 0:b.message)||o("HELP_CENTER.PORTAL_SETTINGS.API.CREATE_PORTAL.ERROR_MESSAGE"))}},_=async()=>{if(!await u.value.$validate())return;const b={name:l.name,slug:l.slug,custom_domain:l.domain,blob_id:l.avatarBlobId||null,color:"#2781F6"};await S(b)};return t({dialogRef:i}),(E,b)=>(p(),$(cs,{ref_key:"dialogRef",ref:i,type:"edit",title:N(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.TITLE"),"confirm-button-label":N(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.CONFIRM_BUTTON_LABEL"),description:N(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.DESCRIPTION"),"disable-confirm-button":f.value||N(r),"is-loading":N(r),onConfirm:_},{default:K(()=>[h("div",fBe,[y(_n,{id:"portal-name",modelValue:l.name,"onUpdate:modelValue":b[0]||(b[0]=I=>l.name=I),type:"text",placeholder:N(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.PLACEHOLDER"),label:N(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.LABEL"),"message-type":d.value?"error":"info",message:d.value||N(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.MESSAGE"),onBlur:b[1]||(b[1]=I=>N(u).name.$touch())},null,8,["modelValue","placeholder","label","message-type","message"]),y(_n,{id:"portal-slug",modelValue:l.slug,"onUpdate:modelValue":b[2]||(b[2]=I=>l.slug=I),type:"text",placeholder:N(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.PLACEHOLDER"),label:N(o)("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.LABEL"),"message-type":m.value?"error":"info",message:m.value||N(hA)(l.slug),onInput:b[3]||(b[3]=I=>N(u).slug.$touch()),onBlur:b[4]||(b[4]=I=>N(u).slug.$touch())},null,8,["modelValue","placeholder","label","message-type","message"])])]),_:1},8,["title","confirm-button-label","description","disable-confirm-button","is-loading"]))}},_Be={class:"grid grid-cols-2 gap-4 p-px"},vBe={class:"space-y-4"},bBe={class:"space-y-4"},EBe={__name:"PortalEmptyState",setup(e){const t=X(null),n=()=>{t.value.dialogRef.open()},s=xn(),o=({slug:a,locale:i})=>{s.push({name:"portals_articles_index",params:{portalSlug:a,locale:i}})};return(a,i)=>(p(),$(Ri,{title:a.$t("HELP_CENTER.TITLE"),subtitle:a.$t("HELP_CENTER.NEW_PAGE.DESCRIPTION")},{"empty-state-item":K(()=>[h("div",_Be,[h("div",vBe,[(p(!0),v(pe,null,Ne(N(ZE),(r,l)=>(p(),$(qE,{id:r.id,key:`article-${l}`,title:r.title,status:r.status,"updated-at":r.updatedAt,author:r.author,category:r.category,views:r.views},null,8,["id","title","status","updated-at","author","category","views"]))),128))]),h("div",bBe,[(p(!0),v(pe,null,Ne(N(ZE).reverse(),(r,l)=>(p(),$(qE,{id:r.id,key:`article-${l}`,title:r.title,status:r.status,"updated-at":r.updatedAt,author:r.author,category:r.category,views:r.views},null,8,["id","title","status","updated-at","author","category","views"]))),128))])])]),actions:K(()=>[y(oe,{label:a.$t("HELP_CENTER.NEW_PAGE.CREATE_PORTAL_BUTTON"),icon:"i-lucide-plus",onClick:n},null,8,["label"]),y(gBe,{ref_key:"createPortalDialogRef",ref:t,onCreate:o},null,512)]),_:1},8,["title","subtitle"]))}},TBe={class:"w-full h-full bg-n-background"},yBe={__name:"PortalsNewPage",setup(e){return(t,n)=>(p(),v("div",TBe,[y(EBe)]))}},QE=()=>Ao(()=>import("./PortalsArticlesIndexPage-DjoV6-w5.js"),__vite__mapDeps([13,2,3,4,5,6,14,15,16,1,7,8,9,17,18,19,11,20,21,22,23,24,25,26,10,27,28,29,30])),SBe=()=>Ao(()=>import("./PortalsArticlesNewPage-1g9Na3Nu.js"),__vite__mapDeps([31,2,3,4,14,15,17,6,5,18,9,19,11,8,32,16,1,7,33,22,23,24,25,26,10,27,28,29])),JE=()=>Ao(()=>import("./PortalsArticlesEditPage-BLJglxRV.js"),__vite__mapDeps([34,2,3,4,14,15,17,6,18,9,19,11,8,5,32,16,1,7,33,22,23,24,25,26,10,27,28,29])),ABe=()=>Ao(()=>import("./PortalsCategoriesIndexPage-Bt__mTkm.js"),__vite__mapDeps([35,2,3,4,5,6,14,15,17,18,9,19,11,8,16,1,7,20,21,22,23,24,25,26,10,27,28,29])),IBe=()=>Ao(()=>import("./PortalsLocalesIndexPage-CkbMu3AV.js"),__vite__mapDeps([36,2,3,4,5,6,16,1,7,8,9,14,15,17,18,19,11,22,23,24,25,26,10,27,28,29])),CBe=()=>Ao(()=>import("./PortalsSettingsIndexPage-BXVZGaDJ.js"),__vite__mapDeps([37,2,14,15,3,4,17,6,5,16,1,7,8,9,18,19,11,22,23,24,25,26,10,27,28,29,38])),ni={featureFlag:_t.HELP_CENTER,permissions:["administrator","agent","knowledge_base_manage"]},OBe=[{path:Va(":portalSlug/:locale/:categorySlug?/articles/:tab?"),name:"portals_articles_index",meta:ni,component:QE},{path:Va(":portalSlug/:locale/:categorySlug?/articles/new"),name:"portals_articles_new",meta:ni,component:SBe},{path:Va(":portalSlug/:locale/:categorySlug?/articles/:tab?/edit/:articleSlug"),name:"portals_articles_edit",meta:ni,component:JE},{path:Va(":portalSlug/:locale/categories"),name:"portals_categories_index",meta:ni,component:ABe},{path:Va(":portalSlug/:locale/categories/:categorySlug/articles"),name:"portals_categories_articles_index",meta:ni,component:QE},{path:Va(":portalSlug/:locale/categories/:categorySlug/articles/:articleSlug"),name:"portals_categories_articles_edit",meta:ni,component:JE},{path:Va(":portalSlug/locales"),name:"portals_locales_index",meta:ni,component:IBe},{path:Va(":portalSlug/settings"),name:"portals_settings_index",meta:ni,component:CBe},{path:Va("new"),name:"portals_new",meta:{featureFlag:_t.HELP_CENTER,permissions:["administrator","knowledge_base_manage"]},component:yBe},{path:Va(":navigationPath"),name:"portals_index",meta:{featureFlag:_t.HELP_CENTER,permissions:["administrator","knowledge_base_manage"]},component:sBe}],NBe={routes:[{path:Va(),component:tBe,redirect:e=>({name:"portals_index",params:{navigationPath:"portals_articles_index",...e.params}}),children:[...OBe]}]},wBe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background px-6"},RBe={__name:"CampaignsPageRouteView",props:{keepAlive:{type:Boolean,default:!0}},setup(e){const t=pt();return dt(()=>{t.dispatch("campaigns/get"),t.dispatch("labels/get")}),(n,s)=>{const o=M("router-view");return p(),v("div",wBe,[y(o,null,{default:K(({Component:a})=>[e.keepAlive?(p(),$(Od,{key:0},[(p(),$(vs(a)))],1024)):(p(),$(vs(a),{key:1}))]),_:1})])}}},Ap={ONGOING:"ongoing",ONE_OFF:"one_off"},xBe={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},$Be={class:"sticky top-0 z-10 px-6 lg:px-0"},MBe={class:"w-full max-w-[60rem] mx-auto"},LBe={class:"flex items-center justify-between w-full h-20 gap-2"},kBe={class:"text-xl font-medium text-n-slate-12"},DBe={class:"relative group/campaign-button"},PBe={class:"flex-1 px-6 overflow-y-auto lg:px-0"},BBe={class:"w-full max-w-[60rem] mx-auto py-4"},vI={__name:"CampaignLayout",props:{headerTitle:{type:String,default:""},buttonLabel:{type:String,default:""}},emits:["click","close"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>{const i=qe("on-clickaway");return p(),v("section",xBe,[h("header",$Be,[h("div",MBe,[h("div",LBe,[h("span",kBe,A(e.headerTitle),1),re((p(),v("div",DBe,[y(oe,{label:e.buttonLabel,icon:"i-lucide-plus",size:"sm",class:"group-hover/campaign-button:brightness-110",onClick:s},null,8,["label"]),We(o.$slots,"action")])),[[i,()=>n("close")]])])])]),h("main",PBe,[h("div",BBe,[We(o.$slots,"default")])])])}}},FBe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},UBe={class:"flex items-center gap-1.5 flex-shrink-0"},GBe={class:"text-sm font-medium text-n-slate-12"},VBe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},HBe={class:"flex items-center gap-1.5 flex-shrink-0"},WBe={class:"text-sm font-medium text-n-slate-12"},zBe={__name:"LiveChatCampaignDetails",props:{sender:{type:Object,default:null},inboxName:{type:String,default:""},inboxIcon:{type:String,default:""}},setup(e){const t=e,{t:n}=Me(),s=C(()=>{var a;return((a=t.sender)==null?void 0:a.name)||n("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.BOT")}),o=C(()=>{var a;return(a=t.sender)==null?void 0:a.thumbnail});return(a,i)=>(p(),v(pe,null,[h("span",FBe,A(N(n)("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.SENT_BY")),1),h("div",UBe,[y(ts,{name:s.value,src:o.value,size:16,"rounded-full":""},null,8,["name","src"]),h("span",GBe,A(s.value),1)]),h("span",VBe,A(N(n)("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.FROM")),1),h("div",HBe,[y(Rt,{icon:e.inboxIcon,class:"flex-shrink-0 text-n-slate-12 size-3"},null,8,["icon"]),h("span",WBe,A(e.inboxName),1)])],64))}},jBe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},KBe={class:"flex items-center gap-1.5 flex-shrink-0"},YBe={class:"text-sm font-medium text-n-slate-12"},XBe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},qBe={class:"flex-1 text-sm font-medium truncate text-n-slate-12"},ZBe={__name:"SMSCampaignDetails",props:{inboxName:{type:String,default:""},inboxIcon:{type:String,default:""},scheduledAt:{type:Number,default:0}},setup(e){const{t}=Me();return(n,s)=>(p(),v(pe,null,[h("span",jBe,A(N(t)("CAMPAIGN.SMS.CARD.CAMPAIGN_DETAILS.SENT_FROM")),1),h("div",KBe,[y(Rt,{icon:e.inboxIcon,class:"flex-shrink-0 text-n-slate-12 size-3"},null,8,["icon"]),h("span",YBe,A(e.inboxName),1)]),h("span",XBe,A(N(t)("CAMPAIGN.SMS.CARD.CAMPAIGN_DETAILS.ON")),1),h("span",qBe,A(N(Xu)(new Date(e.scheduledAt),"LLL d, h:mm a")),1)],64))}},QBe={class:"flex flex-col items-start justify-between flex-1 min-w-0 gap-2"},JBe={class:"flex justify-between gap-3 w-fit"},e9e={class:"text-base font-medium capitalize text-n-slate-12 line-clamp-1"},t9e={class:"text-sm text-n-slate-11 line-clamp-1 [&>p]:mb-0 h-6"},n9e={class:"flex items-center w-full h-6 gap-2 overflow-hidden"},s9e={class:"flex items-center justify-end w-20 gap-2"},e0="completed",T_={__name:"CampaignCard",props:{title:{type:String,default:""},message:{type:String,default:""},isLiveChatType:{type:Boolean,default:!1},isEnabled:{type:Boolean,default:!1},status:{type:String,default:""},sender:{type:Object,default:null},inbox:{type:Object,default:null},scheduledAt:{type:Number,default:0}},emits:["edit","delete"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),{formatMessage:a}=ya(),i=C(()=>n.isLiveChatType?n.isEnabled:n.status!==e0),r=C(()=>({"text-n-teal-11":i.value,"text-n-slate-12":!i.value})),l=C(()=>n.isLiveChatType?n.isEnabled?o("CAMPAIGN.LIVE_CHAT.CARD.STATUS.ENABLED"):o("CAMPAIGN.LIVE_CHAT.CARD.STATUS.DISABLED"):n.status===e0?o("CAMPAIGN.SMS.CARD.STATUS.COMPLETED"):o("CAMPAIGN.SMS.CARD.STATUS.SCHEDULED")),c=C(()=>{var d;return((d=n.inbox)==null?void 0:d.name)||""}),u=C(()=>{const{phone_number:d,channel_type:m}=n.inbox;return wc(m,d)});return(d,m)=>{const f=qe("dompurify-html");return p(),$(hr,{layout:"row"},{default:K(()=>[h("div",QBe,[h("div",JBe,[h("span",e9e,A(e.title),1),h("span",{class:se(["text-xs font-medium inline-flex items-center h-6 px-2 py-0.5 rounded-md bg-n-alpha-2",r.value])},A(l.value),3)]),re(h("div",t9e,null,512),[[f,N(a)(e.message,!1,!1,!1)]]),h("div",n9e,[e.isLiveChatType?(p(),$(zBe,{key:0,sender:e.sender,"inbox-name":c.value,"inbox-icon":u.value},null,8,["sender","inbox-name","inbox-icon"])):(p(),$(ZBe,{key:1,"inbox-name":c.value,"inbox-icon":u.value,"scheduled-at":e.scheduledAt},null,8,["inbox-name","inbox-icon","scheduled-at"]))])]),h("div",s9e,[e.isLiveChatType?(p(),$(oe,{key:0,variant:"faded",size:"sm",color:"slate",icon:"i-lucide-sliders-vertical",onClick:m[0]||(m[0]=g=>s("edit"))})):w("",!0),y(oe,{variant:"faded",color:"ruby",size:"sm",icon:"i-lucide-trash",onClick:m[1]||(m[1]=g=>s("delete"))})])]),_:1})}}},a9e={class:"flex flex-col gap-4"},bI={__name:"CampaignList",props:{campaigns:{type:Array,required:!0},isLiveChatType:{type:Boolean,default:!1}},emits:["edit","delete"],setup(e,{emit:t}){const n=t,s=a=>n("edit",a),o=a=>n("delete",a);return(a,i)=>(p(),v("div",a9e,[(p(!0),v(pe,null,Ne(e.campaigns,r=>(p(),$(T_,{key:r.id,title:r.title,message:r.message,"is-enabled":r.enabled,status:r.campaign_status,sender:r.sender,inbox:r.inbox,"scheduled-at":r.scheduled_at,"is-live-chat-type":e.isLiveChatType,onEdit:l=>s(r),onDelete:l=>o(r)},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at","is-live-chat-type","onEdit","onDelete"]))),128))]))}},o9e={class:"flex flex-col gap-1"},i9e={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},r9e={class:"flex flex-col gap-1"},l9e={for:"sentBy",class:"mb-0.5 text-sm font-medium text-n-slate-12"},c9e={class:"flex flex-col gap-2.5"},u9e={class:"mb-2.5 text-sm font-medium text-n-slate-12"},d9e={class:"flex items-center gap-2"},p9e={class:"text-sm font-medium text-n-slate-12"},h9e={class:"flex items-center gap-2"},m9e={class:"text-sm font-medium text-n-slate-12"},f9e={key:0,class:"flex items-center justify-between w-full gap-3"},EI={__name:"LiveChatCampaignForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},selectedCampaign:{type:Object,default:()=>({})},showActionButtons:{type:Boolean,default:!0}},emits:["submit","cancel"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=pt(),r={uiFlags:Oe("campaigns/getUIFlags"),inboxes:Oe("inboxes/getWebsiteInboxes")},l=X([]),c={title:"",message:"",inboxId:null,senderId:0,enabled:!0,triggerOnlyDuringBusinessHours:!1,endPoint:"",timeOnPage:10},u=ls({...c}),d={shouldBeAValidURLPattern:V=>{try{return new _C(V),!0}catch{return!1}},shouldStartWithHTTP:V=>V?V.startsWith("https://")||V.startsWith("http://"):!1},m={title:{required:Ye,minLength:Qt(1)},message:{required:Ye,minLength:Qt(1)},inboxId:{required:Ye},senderId:{required:Ye},endPoint:{required:Ye,...d},timeOnPage:{required:Ye}},f=bt(m,u),g=C(()=>r.uiFlags.value.isCreating),T=C(()=>f.value.$invalid),S=(V,B,P)=>(V==null?void 0:V.map(k=>({value:k[B],label:k[P]})))??[],_=C(()=>S(r.inboxes.value,"id","name")),E=C(()=>[{value:0,label:"Bot"},...S(l.value,"id","name")]),b=(V,B)=>f.value[V].$error?a(`CAMPAIGN.LIVE_CHAT.CREATE.FORM.${B}.ERROR`):"",I=C(()=>({title:b("title","TITLE"),message:b("message","MESSAGE"),inbox:b("inboxId","INBOX"),endPoint:b("endPoint","END_POINT"),timeOnPage:b("timeOnPage","TIME_ON_PAGE"),sender:b("senderId","SENT_BY")})),R=()=>Object.assign(u,c),O=()=>o("cancel"),x=async V=>{var B,P;if(!V){l.value=[];return}try{const k=await i.dispatch("inboxMembers/get",{inboxId:V});l.value=((B=k==null?void 0:k.data)==null?void 0:B.payload)??[]}catch(k){l.value=[],ce(((P=k==null?void 0:k.response)==null?void 0:P.message)??a("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.ERROR_MESSAGE"))}},L=()=>({title:u.title,message:u.message,inbox_id:u.inboxId,sender_id:u.senderId||null,enabled:u.enabled,trigger_only_during_business_hours:u.triggerOnlyDuringBusinessHours,trigger_rules:{url:u.endPoint,time_on_page:u.timeOnPage}}),F=async()=>{await f.value.$validate()&&(o("submit",L()),s.mode==="create"&&(R(),O()))},D=V=>{if(!V)return;const{title:B,message:P,inbox:{id:k},sender:U,enabled:j,trigger_only_during_business_hours:z,trigger_rules:{url:Y,time_on_page:te}}=V;Object.assign(u,{title:B,message:P,inboxId:k,senderId:(U==null?void 0:U.id)??0,enabled:j,triggerOnlyDuringBusinessHours:z,endPoint:Y,timeOnPage:te})};return ct(()=>u.inboxId,V=>{V&&x(V)},{immediate:!0}),ct(()=>s.selectedCampaign,V=>{s.mode==="edit"&&V&&D(V)},{immediate:!0}),t({prepareCampaignDetails:L,isSubmitDisabled:T}),(V,B)=>(p(),v("form",{class:"flex flex-col gap-4",onSubmit:Fe(F,["prevent"])},[y(_n,{modelValue:u.title,"onUpdate:modelValue":B[0]||(B[0]=P=>u.title=P),label:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TITLE.LABEL"),placeholder:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TITLE.PLACEHOLDER"),message:I.value.title,"message-type":I.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),y(_a,{modelValue:u.message,"onUpdate:modelValue":B[1]||(B[1]=P=>u.message=P),label:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.MESSAGE.LABEL"),placeholder:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.MESSAGE.PLACEHOLDER"),message:I.value.message,"message-type":I.value.message?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),h("div",o9e,[h("label",i9e,A(N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.INBOX.LABEL")),1),y(Ai,{id:"inbox",modelValue:u.inboxId,"onUpdate:modelValue":B[2]||(B[2]=P=>u.inboxId=P),options:_.value,"has-error":!!I.value.inbox,placeholder:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.INBOX.PLACEHOLDER"),message:I.value.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),h("div",r9e,[h("label",l9e,A(N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.SENT_BY.LABEL")),1),y(Ai,{id:"sentBy",modelValue:u.senderId,"onUpdate:modelValue":B[3]||(B[3]=P=>u.senderId=P),options:E.value,"has-error":!!I.value.sender,disabled:!u.inboxId,placeholder:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.SENT_BY.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:I.value.sender},null,8,["modelValue","options","has-error","disabled","placeholder","message"])]),y(_n,{modelValue:u.endPoint,"onUpdate:modelValue":B[4]||(B[4]=P=>u.endPoint=P),type:"url",label:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.END_POINT.LABEL"),placeholder:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.END_POINT.PLACEHOLDER"),message:I.value.endPoint,"message-type":I.value.endPoint?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),y(_n,{modelValue:u.timeOnPage,"onUpdate:modelValue":B[5]||(B[5]=P=>u.timeOnPage=P),type:"number",label:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TIME_ON_PAGE.LABEL"),placeholder:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TIME_ON_PAGE.PLACEHOLDER"),message:I.value.timeOnPage,"message-type":I.value.timeOnPage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),h("fieldset",c9e,[h("legend",u9e,A(N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.TITLE")),1),h("label",d9e,[re(h("input",{"onUpdate:modelValue":B[6]||(B[6]=P=>u.enabled=P),type:"checkbox"},null,512),[[pn,u.enabled]]),h("span",p9e,A(N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.ENABLED")),1)]),h("label",h9e,[re(h("input",{"onUpdate:modelValue":B[7]||(B[7]=P=>u.triggerOnlyDuringBusinessHours=P),type:"checkbox"},null,512),[[pn,u.triggerOnlyDuringBusinessHours]]),h("span",m9e,A(N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.TRIGGER_ONLY_BUSINESS_HOURS")),1)])]),e.showActionButtons?(p(),v("div",f9e,[y(oe,{type:"button",variant:"faded",color:"slate",label:N(a)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:O},null,8,["label"]),y(oe,{type:"submit",label:N(a)(`CAMPAIGN.LIVE_CHAT.CREATE.FORM.BUTTONS.${e.mode.toUpperCase()}`),class:"w-full","is-loading":g.value,disabled:g.value||T.value},null,8,["label","is-loading","disabled"])])):w("",!0)],32))}},g9e={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-slate-50 dark:border-slate-900 shadow-md flex flex-col gap-6 max-h-[85vh] overflow-y-auto"},_9e={class:"text-base font-medium text-slate-900 dark:text-slate-50"},v9e={__name:"LiveChatCampaignDialog",emits:["close"],setup(e,{emit:t}){const n=t,s=pt(),{t:o}=Me(),a=async l=>{var c;try{await s.dispatch("campaigns/create",l),Pt(I0.CREATE_CAMPAIGN,{type:Ap.ONGOING}),ce(o("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(u){const d=((c=u==null?void 0:u.response)==null?void 0:c.message)||o("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.ERROR_MESSAGE");ce(d)}},i=()=>n("close"),r=l=>{a(l),i()};return(l,c)=>(p(),v("div",g9e,[h("h3",_9e,A(N(o)("CAMPAIGN.LIVE_CHAT.CREATE.TITLE")),1),y(EI,{mode:"create",onSubmit:r,onCancel:i})]))}},b9e={__name:"EditLiveChatCampaignDialog",props:{selectedCampaign:{type:Object,default:null}},setup(e,{expose:t}){const n=e,{t:s}=Me(),o=pt(),a=X(null),i=X(null),r=Oe("campaigns/getUIFlags"),l=C(()=>r.value.isUpdating),c=C(()=>{var f;return(f=i.value)==null?void 0:f.isSubmitDisabled}),u=C(()=>n.selectedCampaign.id),d=async f=>{var g;try{await o.dispatch("campaigns/update",{id:u.value,...f}),ce(s("CAMPAIGN.LIVE_CHAT.EDIT.FORM.API.SUCCESS_MESSAGE")),a.value.close()}catch(T){const S=((g=T==null?void 0:T.response)==null?void 0:g.message)||s("CAMPAIGN.LIVE_CHAT.EDIT.FORM.API.ERROR_MESSAGE");ce(S)}},m=()=>{d(i.value.prepareCampaignDetails())};return t({dialogRef:a}),(f,g)=>(p(),$(cs,{ref_key:"dialogRef",ref:a,type:"edit",title:N(s)("CAMPAIGN.LIVE_CHAT.EDIT.TITLE"),"is-loading":l.value,"disable-confirm-button":l.value||c.value,"overflow-y-auto":"",onConfirm:m},{default:K(()=>[y(EI,{ref_key:"liveChatCampaignFormRef",ref:i,mode:"edit","selected-campaign":e.selectedCampaign,"show-action-buttons":!1,onSubmit:m},null,8,["selected-campaign"])]),_:1},8,["title","is-loading","disable-confirm-button"]))}},TI={__name:"ConfirmDeleteCampaignDialog",props:{selectedCampaign:{type:Object,default:null}},setup(e,{expose:t}){const n=e,{t:s}=Me(),o=pt(),a=X(null),i=async l=>{if(l)try{await o.dispatch("campaigns/delete",l),ce(s("CAMPAIGN.CONFIRM_DELETE.API.SUCCESS_MESSAGE"))}catch{ce(s("CAMPAIGN.CONFIRM_DELETE.API.ERROR_MESSAGE"))}},r=async()=>{var l;await i(n.selectedCampaign.id),(l=a.value)==null||l.close()};return t({dialogRef:a}),(l,c)=>(p(),$(cs,{ref_key:"dialogRef",ref:a,type:"alert",title:N(s)("CAMPAIGN.CONFIRM_DELETE.TITLE"),description:N(s)("CAMPAIGN.CONFIRM_DELETE.DESCRIPTION"),"confirm-button-label":N(s)("CAMPAIGN.CONFIRM_DELETE.CONFIRM"),onConfirm:r},null,8,["title","description","confirm-button-label"]))}},E9e=[{id:1,title:"Chatbot Assistance",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Alexa Rivera"},message:"Hello! 👋 Need help with our chatbot features? Feel free to ask!",campaign_status:"active",enabled:!0,campaign_type:"ongoing",trigger_rules:{url:"https://www.chatwoot.com/features/chatbot/",time_on_page:10},trigger_only_during_business_hours:!0,created_at:"2024-10-24T13:10:26.636Z",updated_at:"2024-10-24T13:10:26.636Z"},{id:2,title:"Pricing Information Support",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Jamie Lee"},message:"Hello! 👋 Any questions on pricing? I’m here to help!",campaign_status:"active",enabled:!1,campaign_type:"ongoing",trigger_rules:{url:"https://www.chatwoot.com/pricings",time_on_page:10},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:11:08.763Z",updated_at:"2024-10-24T13:11:08.763Z"},{id:3,title:"Product Setup Assistance",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Chatwoot"},message:"Hi! Chatwoot here. Need help setting up? Let me know!",campaign_status:"active",enabled:!1,campaign_type:"ongoing",trigger_rules:{url:"https://{*.}?chatwoot.com/apps/account/*/settings/inboxes/new/",time_on_page:10},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:11:44.285Z",updated_at:"2024-10-24T13:11:44.285Z"},{id:4,title:"General Assistance Campaign",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Chris Barlow"},message:"Hi there! 👋 I’m here for any questions you may have. Let’s chat!",campaign_status:"active",enabled:!0,campaign_type:"ongoing",trigger_rules:{url:"https://siv.com",time_on_page:200},trigger_only_during_business_hours:!1,created_at:"2024-10-29T19:54:33.741Z",updated_at:"2024-10-29T19:56:26.296Z"}],T9e=[{id:1,title:"Customer Feedback Request",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Hello! Enjoying our product? Share your feedback on G2 and earn a $25 Amazon coupon: https://chwt.app/g2-review",campaign_status:"active",enabled:!0,campaign_type:"one_off",scheduled_at:1729775588,audience:[{id:4,type:"Label"},{id:5,type:"Label"},{id:6,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:13:08.496Z",updated_at:"2024-10-24T13:15:38.698Z"},{id:2,title:"Welcome New Customer",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Welcome aboard! 🎉 Let us know if you have any questions.",campaign_status:"completed",enabled:!0,campaign_type:"one_off",scheduled_at:1729732500,audience:[{id:1,type:"Label"},{id:6,type:"Label"},{id:5,type:"Label"},{id:2,type:"Label"},{id:4,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:14:00.168Z",updated_at:"2024-10-24T13:15:38.707Z"},{id:3,title:"New Business Welcome",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Hello! We’re excited to have your business with us!",campaign_status:"active",enabled:!0,campaign_type:"one_off",scheduled_at:1730368440,audience:[{id:1,type:"Label"},{id:3,type:"Label"},{id:6,type:"Label"},{id:4,type:"Label"},{id:2,type:"Label"},{id:5,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-30T07:54:49.915Z",updated_at:"2024-10-30T07:54:49.915Z"},{id:4,title:"New Member Onboarding",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Welcome to the team! Reach out if you have questions.",campaign_status:"completed",enabled:!0,campaign_type:"one_off",scheduled_at:1730304840,audience:[{id:1,type:"Label"},{id:3,type:"Label"},{id:6,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-29T16:14:10.374Z",updated_at:"2024-10-30T16:15:03.157Z"}],y9e={class:"flex flex-col gap-4 p-px"},S9e={__name:"LiveChatCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(e){return(t,n)=>(p(),$(Ri,{title:e.title,subtitle:e.subtitle},{"empty-state-item":K(()=>[h("div",y9e,[(p(!0),v(pe,null,Ne(N(E9e),s=>(p(),$(T_,{key:s.id,title:s.title,message:s.message,"is-enabled":s.enabled,status:s.campaign_status,sender:s.sender,inbox:s.inbox,"scheduled-at":s.scheduled_at,"is-live-chat-type":""},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"]))}},A9e={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},I9e={__name:"LiveChatCampaignsPage",setup(e){const{t}=Me(),n=nn(),s=X(null),o=X(null),a=X(null),i=Oe("campaigns/getUIFlags"),r=C(()=>i.value.isFetching),[l,c]=es(),u=C(()=>n["campaigns/getCampaigns"].value(Ap.ONGOING)),d=C(()=>{var g;return((g=u.value)==null?void 0:g.length)===0&&!r.value}),m=g=>{a.value=g,s.value.dialogRef.open()},f=g=>{a.value=g,o.value.dialogRef.open()};return(g,T)=>(p(),$(vI,{"header-title":N(t)("CAMPAIGN.LIVE_CHAT.HEADER_TITLE"),"button-label":N(t)("CAMPAIGN.LIVE_CHAT.NEW_CAMPAIGN"),onClick:T[1]||(T[1]=S=>N(c)()),onClose:T[2]||(T[2]=S=>N(c)(!1))},{action:K(()=>[N(l)?(p(),$(v9e,{key:0,onClose:T[0]||(T[0]=S=>N(c)(!1))})):w("",!0)]),default:K(()=>[r.value?(p(),v("div",A9e,[y(gs)])):d.value?(p(),$(S9e,{key:2,title:N(t)("CAMPAIGN.LIVE_CHAT.EMPTY_STATE.TITLE"),subtitle:N(t)("CAMPAIGN.LIVE_CHAT.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),$(bI,{key:1,campaigns:u.value,"is-live-chat-type":"",onEdit:m,onDelete:f},null,8,["campaigns"])),y(b9e,{ref_key:"editLiveChatCampaignDialogRef",ref:s,"selected-campaign":a.value},null,8,["selected-campaign"]),y(TI,{ref_key:"confirmDeleteCampaignDialogRef",ref:o,"selected-campaign":a.value},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"]))}},C9e={class:"flex-grow min-w-0 text-sm truncate text-n-slate-12"},O9e=["onClick"],N9e={key:0,class:"flex items-center text-sm text-n-slate-11"},w9e={__name:"TagMultiSelectComboBox",props:{options:{type:Array,required:!0,validator:e=>e.every(t=>"value"in t&&"label"in t)},placeholder:{type:String,default:""},modelValue:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},message:{type:String,default:""},hasError:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=X(s.modelValue),r=X(!1),l=X(""),c=X(null),u=X(null),d=C(()=>{const _=l.value.toLowerCase();return s.options.filter(E=>{var b;return(b=E.label)==null?void 0:b.toLowerCase().includes(_)})}),m=C(()=>s.placeholder||a("COMBOBOX.PLACEHOLDER")),f=C(()=>i.value.map(_=>s.options.find(b=>b.value===_)||{value:_,label:_})),g=_=>{const E=i.value.indexOf(_.value);E===-1?i.value.push(_.value):i.value.splice(E,1),o("update:modelValue",i.value)},T=_=>{const E=i.value.indexOf(_);E!==-1&&(i.value.splice(E,1),o("update:modelValue",i.value))},S=()=>{s.disabled||(r.value=!r.value,r.value&&(l.value="",tn(()=>{var _;return(_=c.value)==null?void 0:_.focus()})))};return ct(()=>s.modelValue,_=>{i.value=_}),t({toggleDropdown:S,open:r,disabled:s.disabled}),(_,E)=>(p(),v("div",{ref_key:"comboboxRef",ref:u,class:se(["relative w-full min-w-0",{"cursor-not-allowed":e.disabled,"group/combobox":!e.disabled}]),onClick:E[3]||(E[3]=Fe(()=>{},["prevent"]))},[y(N(il),{onTrigger:E[2]||(E[2]=b=>r.value=!1)},{default:K(()=>[h("div",{class:se(["flex flex-wrap w-full gap-2 px-3 py-2.5 border rounded-lg cursor-pointer bg-n-alpha-black2 min-h-[42px] transition-all duration-500 ease-in-out",{"border-n-ruby-8":e.hasError,"border-n-weak dark:border-n-weak hover:border-n-slate-6 dark:hover:border-n-slate-6":!e.hasError&&!r.value,"border-n-brand":r.value,"cursor-not-allowed pointer-events-none opacity-50":e.disabled}]),onClick:S},[(p(!0),v(pe,null,Ne(f.value,b=>(p(),v("div",{key:b.value,class:"flex items-center justify-center max-w-full gap-1 px-2 py-0.5 rounded-lg bg-n-alpha-black1",onClick:E[0]||(E[0]=Fe(()=>{},["stop"]))},[h("span",C9e,A(b.label),1),h("span",{class:"flex-shrink-0 cursor-pointer i-lucide-x size-3 text-n-slate-11",onClick:I=>T(b.value)},null,8,O9e)]))),128)),f.value.length===0?(p(),v("span",N9e,A(m.value),1)):w("",!0)],2),y(uI,{ref_key:"dropdownRef",ref:c,open:r.value,options:d.value,"search-value":l.value,"search-placeholder":e.searchPlaceholder,"empty-state":e.emptyState,multiple:"","selected-values":i.value,"onUpdate:searchValue":E[1]||(E[1]=b=>l.value=b),onSelect:g},null,8,["open","options","search-value","search-placeholder","empty-state","selected-values"]),e.message?(p(),v("p",{key:0,class:se(["mt-2 mb-0 text-xs truncate transition-all duration-500 ease-in-out",{"text-n-ruby-9":e.hasError,"text-n-slate-11":!e.hasError}])},A(e.message),3)):w("",!0)]),_:1})],2))}},R9e={class:"flex flex-col gap-1"},x9e={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},$9e={class:"flex flex-col gap-1"},M9e={for:"audience",class:"mb-0.5 text-sm font-medium text-n-slate-12"},L9e={class:"flex items-center justify-between w-full gap-3"},k9e={__name:"SMSCampaignForm",emits:["submit","cancel"],setup(e,{emit:t}){const n=t,{t:s}=Me(),o={uiFlags:Oe("campaigns/getUIFlags"),labels:Oe("labels/getLabels"),inboxes:Oe("inboxes/getSMSInboxes")},a={title:"",message:"",inboxId:null,scheduledAt:null,selectedAudience:[]},i=ls({...a}),r={title:{required:Ye,minLength:Qt(1)},message:{required:Ye,minLength:Qt(1)},inboxId:{required:Ye},scheduledAt:{required:Ye},selectedAudience:{required:Ye}},l=bt(r,i),c=C(()=>o.uiFlags.value.isCreating),u=C(()=>{const O=new Date;return new Date(O.getTime()-O.getTimezoneOffset()*6e4).toISOString().slice(0,16)}),d=(O,x,L)=>(O==null?void 0:O.map(F=>({value:F[x],label:F[L]})))??[],m=C(()=>d(o.labels.value,"id","title")),f=C(()=>d(o.inboxes.value,"id","name")),g=(O,x)=>l.value[O].$error?s(`CAMPAIGN.SMS.CREATE.FORM.${x}.ERROR`):"",T=C(()=>({title:g("title","TITLE"),message:g("message","MESSAGE"),inbox:g("inboxId","INBOX"),scheduledAt:g("scheduledAt","SCHEDULED_AT"),audience:g("selectedAudience","AUDIENCE")})),S=C(()=>l.value.$invalid),_=O=>O?new Date(O).toISOString():null,E=()=>{Object.assign(i,a)},b=()=>n("cancel"),I=()=>{var O;return{title:i.title,message:i.message,inbox_id:i.inboxId,scheduled_at:_(i.scheduledAt),audience:(O=i.selectedAudience)==null?void 0:O.map(x=>({id:x,type:"Label"}))}},R=async()=>{await l.value.$validate()&&(n("submit",I()),E(),b())};return(O,x)=>(p(),v("form",{class:"flex flex-col gap-4",onSubmit:Fe(R,["prevent"])},[y(_n,{modelValue:i.title,"onUpdate:modelValue":x[0]||(x[0]=L=>i.title=L),label:N(s)("CAMPAIGN.SMS.CREATE.FORM.TITLE.LABEL"),placeholder:N(s)("CAMPAIGN.SMS.CREATE.FORM.TITLE.PLACEHOLDER"),message:T.value.title,"message-type":T.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),y(Xd,{modelValue:i.message,"onUpdate:modelValue":x[1]||(x[1]=L=>i.message=L),label:N(s)("CAMPAIGN.SMS.CREATE.FORM.MESSAGE.LABEL"),placeholder:N(s)("CAMPAIGN.SMS.CREATE.FORM.MESSAGE.PLACEHOLDER"),"show-character-count":"",message:T.value.message,"message-type":T.value.message?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),h("div",R9e,[h("label",x9e,A(N(s)("CAMPAIGN.SMS.CREATE.FORM.INBOX.LABEL")),1),y(Ai,{id:"inbox",modelValue:i.inboxId,"onUpdate:modelValue":x[2]||(x[2]=L=>i.inboxId=L),options:f.value,"has-error":!!T.value.inbox,placeholder:N(s)("CAMPAIGN.SMS.CREATE.FORM.INBOX.PLACEHOLDER"),message:T.value.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),h("div",$9e,[h("label",M9e,A(N(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.LABEL")),1),y(w9e,{modelValue:i.selectedAudience,"onUpdate:modelValue":x[3]||(x[3]=L=>i.selectedAudience=L),options:m.value,label:N(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.LABEL"),placeholder:N(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.PLACEHOLDER"),"has-error":!!T.value.audience,message:T.value.audience,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options","label","placeholder","has-error","message"])]),y(_n,{modelValue:i.scheduledAt,"onUpdate:modelValue":x[4]||(x[4]=L=>i.scheduledAt=L),label:N(s)("CAMPAIGN.SMS.CREATE.FORM.SCHEDULED_AT.LABEL"),type:"datetime-local",min:u.value,placeholder:N(s)("CAMPAIGN.SMS.CREATE.FORM.SCHEDULED_AT.PLACEHOLDER"),message:T.value.scheduledAt,"message-type":T.value.scheduledAt?"error":"info"},null,8,["modelValue","label","min","placeholder","message","message-type"]),h("div",L9e,[y(oe,{variant:"faded",color:"slate",type:"button",label:N(s)("CAMPAIGN.SMS.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:b},null,8,["label"]),y(oe,{label:N(s)("CAMPAIGN.SMS.CREATE.FORM.BUTTONS.CREATE"),class:"w-full",type:"submit","is-loading":c.value,disabled:c.value||S.value},null,8,["label","is-loading","disabled"])])],32))}},D9e={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-slate-50 dark:border-slate-900 shadow-md flex flex-col gap-6"},P9e={class:"text-base font-medium text-slate-900 dark:text-slate-50"},B9e={__name:"SMSCampaignDialog",emits:["close"],setup(e,{emit:t}){const n=t,s=pt(),{t:o}=Me(),a=async l=>{var c;try{await s.dispatch("campaigns/create",l),Pt(I0.CREATE_CAMPAIGN,{type:Ap.ONE_OFF}),ce(o("CAMPAIGN.SMS.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(u){const d=((c=u==null?void 0:u.response)==null?void 0:c.message)||o("CAMPAIGN.SMS.CREATE.FORM.API.ERROR_MESSAGE");ce(d)}},i=l=>{a(l)},r=()=>n("close");return(l,c)=>(p(),v("div",D9e,[h("h3",P9e,A(N(o)("CAMPAIGN.SMS.CREATE.TITLE")),1),y(k9e,{onSubmit:i,onCancel:r})]))}},F9e={class:"flex flex-col gap-4 p-px"},U9e={__name:"SMSCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(e){return(t,n)=>(p(),$(Ri,{title:e.title,subtitle:e.subtitle},{"empty-state-item":K(()=>[h("div",F9e,[(p(!0),v(pe,null,Ne(N(T9e),s=>(p(),$(T_,{key:s.id,title:s.title,message:s.message,"is-enabled":s.enabled,status:s.campaign_status,sender:s.sender,inbox:s.inbox,"scheduled-at":s.scheduled_at},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"]))}},G9e={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},V9e={__name:"SMSCampaignsPage",setup(e){const{t}=Me(),n=nn(),s=X(null),[o,a]=es(),i=Oe("campaigns/getUIFlags"),r=C(()=>i.value.isFetching),l=X(null),c=C(()=>n["campaigns/getCampaigns"].value(Ap.ONE_OFF)),u=C(()=>{var m;return((m=c.value)==null?void 0:m.length)===0&&!r.value}),d=m=>{s.value=m,l.value.dialogRef.open()};return(m,f)=>(p(),$(vI,{"header-title":N(t)("CAMPAIGN.SMS.HEADER_TITLE"),"button-label":N(t)("CAMPAIGN.SMS.NEW_CAMPAIGN"),onClick:f[1]||(f[1]=g=>N(a)()),onClose:f[2]||(f[2]=g=>N(a)(!1))},{action:K(()=>[N(o)?(p(),$(B9e,{key:0,onClose:f[0]||(f[0]=g=>N(a)(!1))})):w("",!0)]),default:K(()=>[r.value?(p(),v("div",G9e,[y(gs)])):u.value?(p(),$(U9e,{key:2,title:N(t)("CAMPAIGN.SMS.EMPTY_STATE.TITLE"),subtitle:N(t)("CAMPAIGN.SMS.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),$(bI,{key:1,campaigns:c.value,onDelete:d},null,8,["campaigns"])),y(TI,{ref_key:"confirmDeleteCampaignDialogRef",ref:l,"selected-campaign":s.value},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"]))}},$u={featureFlag:_t.CAMPAIGNS,permissions:["administrator"]},H9e={routes:[{path:At("accounts/:accountId/campaigns"),component:RBe,children:[{path:"",redirect:e=>({name:"campaigns_ongoing_index",params:e.params})},{path:"ongoing",name:"campaigns_ongoing_index",meta:$u,redirect:e=>({name:"campaigns_livechat_index",params:e.params})},{path:"one_off",name:"campaigns_one_off_index",meta:$u,redirect:e=>({name:"campaigns_sms_index",params:e.params})},{path:"live_chat",name:"campaigns_livechat_index",meta:$u,component:I9e},{path:"sms",name:"campaigns_sms_index",meta:$u,component:V9e}]}]},W9e={class:"flex justify-between w-full gap-1"},z9e={class:"flex items-center gap-2"},j9e={class:"relative flex items-center group"},K9e={class:"flex items-center justify-between w-full gap-4"},Y9e={class:"text-sm truncate text-n-slate-11"},X9e={class:"text-sm text-n-slate-11 line-clamp-1 shrink-0"},yI={__name:"AssistantCard",props:{id:{type:Number,required:!0},name:{type:String,required:!0},description:{type:String,required:!0},updatedAt:{type:Number,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{checkPermissions:o}=cl(),{t:a}=Me(),[i,r]=es(),l=C(()=>{const d=[{label:a("CAPTAIN.ASSISTANTS.OPTIONS.VIEW_CONNECTED_INBOXES"),value:"viewConnectedInboxes",action:"viewConnectedInboxes",icon:"i-lucide-link"}];return o(["administrator"])&&d.push({label:a("CAPTAIN.ASSISTANTS.OPTIONS.EDIT_ASSISTANT"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:a("CAPTAIN.ASSISTANTS.OPTIONS.DELETE_ASSISTANT"),value:"delete",action:"delete",icon:"i-lucide-trash"}),d}),c=C(()=>rs(n.updatedAt)),u=({action:d,value:m})=>{r(!1),s("action",{action:d,value:m,id:n.id})};return(d,m)=>{const f=M("router-link"),g=qe("on-clickaway");return p(),$(hr,null,{default:K(()=>[h("div",W9e,[y(f,{to:{name:"captain_assistants_edit",params:{assistantId:e.id}},class:"text-base text-n-slate-12 line-clamp-1 hover:underline transition-colors"},{default:K(()=>[Re(A(e.name),1)]),_:1},8,["to"]),h("div",z9e,[re((p(),v("div",j9e,[y(oe,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:m[0]||(m[0]=T=>N(r)())}),N(i)?(p(),$(Hs,{key:0,"menu-items":l.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:m[1]||(m[1]=T=>u(T))},null,8,["menu-items"])):w("",!0)])),[[g,()=>N(r)(!1)]])])]),h("div",K9e,[h("span",Y9e,A(e.description||"Description not available"),1),h("span",X9e,A(c.value),1)])]),_:1})}}},Ip={__name:"DeleteDialog",props:{type:{type:String,required:!0},entity:{type:Object,required:!0},deletePayload:{type:Object,default:null}},emits:["deleteSuccess"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=pt(),r=X(null),l=C(()=>s.type.toUpperCase()),c=async d=>{if(d)try{await i.dispatch(`captain${s.type}/delete`,d),o("deleteSuccess"),ce(a(`CAPTAIN.${l.value}.DELETE.SUCCESS_MESSAGE`))}catch{ce(a(`CAPTAIN.${l.value}.DELETE.ERROR_MESSAGE`))}},u=async()=>{var d;await c(s.deletePayload||s.entity.id),(d=r.value)==null||d.close()};return t({dialogRef:r}),(d,m)=>(p(),$(cs,{ref_key:"deleteDialogRef",ref:r,type:"alert",title:N(a)(`CAPTAIN.${l.value}.DELETE.TITLE`),description:N(a)(`CAPTAIN.${l.value}.DELETE.DESCRIPTION`),"confirm-button-label":N(a)(`CAPTAIN.${l.value}.DELETE.CONFIRM`),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},q9e={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},Z9e={class:"sticky top-0 z-10 px-6"},Q9e={class:"w-full max-w-[60rem] mx-auto"},J9e={class:"flex items-start lg:items-center justify-between w-full py-6 lg:py-0 lg:h-20 gap-4 lg:gap-2 flex-col lg:flex-row"},e7e={class:"flex gap-4 items-center"},t7e={class:"text-xl font-medium text-n-slate-12"},n7e={key:1,class:"flex items-center gap-2"},s7e={key:0,class:"relative group/campaign-button"},a7e={class:"flex-1 px-6 overflow-y-auto"},o7e={class:"w-full max-w-[60rem] h-full mx-auto py-4"},i7e={key:1,class:"flex items-center justify-center py-10 text-n-slate-11"},r7e={key:2},l7e={key:3},c7e={key:0,class:"sticky bottom-0 z-10 px-4 pb-4"},zc={__name:"PageLayout",props:{currentPage:{type:Number,default:1},totalCount:{type:Number,default:100},itemsPerPage:{type:Number,default:25},headerTitle:{type:String,default:""},backUrl:{type:[String,Object],default:""},buttonPolicy:{type:Array,default:()=>[]},buttonLabel:{type:String,default:""},featureFlag:{type:String,default:""},isFetching:{type:Boolean,default:!1},showKnowMore:{type:Boolean,default:!0},isEmpty:{type:Boolean,default:!1},showPaginationFooter:{type:Boolean,default:!0}},emits:["click","close","update:currentPage"],setup(e,{emit:t}){const n=e,s=t,{shouldShowPaywall:o}=cl(),a=C(()=>o(n.featureFlag)),i=()=>{s("click")},r=l=>{s("update:currentPage",l)};return(l,c)=>{const u=qe("on-clickaway");return p(),v("section",q9e,[h("header",Z9e,[h("div",Q9e,[h("div",J9e,[h("div",e7e,[e.backUrl?(p(),$(lr,{key:0,to:e.backUrl},null,8,["to"])):w("",!0),We(l.$slots,"headerTitle",{},()=>[h("span",t7e,A(e.headerTitle),1)]),!e.isEmpty&&e.showKnowMore?(p(),v("div",n7e,[c[0]||(c[0]=h("div",{class:"w-0.5 h-4 rounded-2xl bg-n-weak"},null,-1)),We(l.$slots,"knowMore")])):w("",!0)]),!a.value&&e.buttonLabel?re((p(),v("div",s7e,[y(ja,{permissions:e.buttonPolicy},{default:K(()=>[y(oe,{label:e.buttonLabel,icon:"i-lucide-plus",size:"sm",class:"group-hover/campaign-button:brightness-110",onClick:i},null,8,["label"])]),_:1},8,["permissions"]),We(l.$slots,"action")])),[[u,()=>s("close")]]):w("",!0)])])]),h("main",a7e,[h("div",o7e,[a.value?w("",!0):We(l.$slots,"controls",{key:0}),e.isFetching?(p(),v("div",i7e,[y(gs)])):a.value?(p(),v("div",r7e,[We(l.$slots,"paywall")])):e.isEmpty?(p(),v("div",l7e,[We(l.$slots,"emptyState")])):We(l.$slots,"body",{key:4}),We(l.$slots,"default")])]),e.showPaginationFooter?(p(),v("footer",c7e,[y(pI,{"current-page":e.currentPage,"total-items":e.totalCount,"items-per-page":e.itemsPerPage,"onUpdate:currentPage":r},null,8,["current-page","total-items","items-per-page"])])):w("",!0)])}}},u7e={class:"w-full max-w-[60rem] mx-auto h-full max-h-[448px] grid place-content-center"},y_={__name:"Paywall",setup(e){const t=xn(),n=Oe("getCurrentUser"),s=C(()=>n.value.type==="SuperAdmin"),{accountId:o,isOnChatwootCloud:a}=zn(),i=C(()=>a.value?"PAYWALL":"ENTERPRISE_PAYWALL"),r=()=>{t.push({name:"billing_settings_index",params:{accountId:o.value}})};return(l,c)=>(p(),v("div",u7e,[y(Jg,{class:"mx-auto","feature-prefix":"CAPTAIN","i18n-key":i.value,"is-super-admin":s.value,"is-on-chatwoot-cloud":N(a),onUpgrade:r},null,8,["i18n-key","is-super-admin","is-on-chatwoot-cloud"])]))}},d7e={class:"flex flex-col gap-2.5"},p7e={class:"mb-3 text-sm font-medium text-n-slate-12"},h7e={class:"flex items-center gap-2"},m7e={class:"text-sm font-medium text-n-slate-12"},f7e={class:"flex items-center gap-2"},g7e={class:"text-sm font-medium text-n-slate-12"},_7e={class:"flex items-center justify-between w-full gap-3"},v7e={__name:"AssistantForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},assistant:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a={uiFlags:Oe("captainAssistants/getUIFlags")},r=ls({...{name:"",description:"",productName:"",featureFaq:!1,featureMemory:!1}}),l={name:{required:Ye,minLength:Qt(1)},description:{required:Ye,minLength:Qt(1)},productName:{required:Ye,minLength:Qt(1)}},c=bt(l,r),u=C(()=>a.uiFlags.value.creatingItem),d=(_,E)=>c.value[_].$error?o(`CAPTAIN.ASSISTANTS.FORM.${E}.ERROR`):"",m=C(()=>({name:d("name","NAME"),description:d("description","DESCRIPTION"),productName:d("productName","PRODUCT_NAME")})),f=()=>s("cancel"),g=()=>({name:r.name,description:r.description,config:{product_name:r.productName,feature_faq:r.featureFaq,feature_memory:r.featureMemory}}),T=async()=>{await c.value.$validate()&&s("submit",g())},S=_=>{if(!_)return;const{name:E,description:b,config:I}=_;Object.assign(r,{name:E,description:b,productName:I.product_name,featureFaq:I.feature_faq||!1,featureMemory:I.feature_memory||!1})};return ct(()=>n.assistant,_=>{n.mode==="edit"&&_&&S(_)},{immediate:!0}),(_,E)=>(p(),v("form",{class:"flex flex-col gap-4",onSubmit:Fe(T,["prevent"])},[y(_n,{modelValue:r.name,"onUpdate:modelValue":E[0]||(E[0]=b=>r.name=b),label:N(o)("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:N(o)("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:m.value.name,"message-type":m.value.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),y(_a,{modelValue:r.description,"onUpdate:modelValue":E[1]||(E[1]=b=>r.description=b),label:N(o)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:N(o)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:m.value.description,"message-type":m.value.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),y(_n,{modelValue:r.productName,"onUpdate:modelValue":E[2]||(E[2]=b=>r.productName=b),label:N(o)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:N(o)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:m.value.productName,"message-type":m.value.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),h("fieldset",d7e,[h("legend",p7e,A(N(o)("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),h("label",h7e,[re(h("input",{"onUpdate:modelValue":E[3]||(E[3]=b=>r.featureFaq=b),type:"checkbox"},null,512),[[pn,r.featureFaq]]),h("span",m7e,A(N(o)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),h("label",f7e,[re(h("input",{"onUpdate:modelValue":E[4]||(E[4]=b=>r.featureMemory=b),type:"checkbox"},null,512),[[pn,r.featureMemory]]),h("span",g7e,A(N(o)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)])]),h("div",_7e,[y(oe,{type:"button",variant:"faded",color:"slate",label:N(o)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:f},null,8,["label"]),y(oe,{type:"submit",label:N(o)(`CAPTAIN.FORM.${e.mode.toUpperCase()}`),class:"w-full","is-loading":u.value,disabled:u.value},null,8,["label","is-loading","disabled"])])],32))}},b7e={__name:"CreateAssistantDialog",props:{selectedAssistant:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=pt(),r=X(null),l=X(null),c=T=>i.dispatch("captainAssistants/update",{id:s.selectedAssistant.id,...T}),u=C(()=>`CAPTAIN.ASSISTANTS.${s.type.toUpperCase()}`),d=T=>i.dispatch("captainAssistants/create",T),m=async T=>{try{s.type==="edit"?await c(T):await d(T),ce(a(`${u.value}.SUCCESS_MESSAGE`)),r.value.close()}catch(S){const _=(S==null?void 0:S.message)||a(`${u.value}.ERROR_MESSAGE`);ce(_)}},f=()=>{o("close")},g=()=>{r.value.close()};return t({dialogRef:r}),(T,S)=>(p(),$(cs,{ref_key:"dialogRef",ref:r,type:"edit",title:N(a)(`${u.value}.TITLE`),description:N(a)("CAPTAIN.ASSISTANTS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,"overflow-y-auto":"",onClose:f},{footer:K(()=>S[0]||(S[0]=[])),default:K(()=>[y(v7e,{ref_key:"assistantForm",ref:l,mode:e.type,assistant:e.selectedAssistant,onSubmit:m,onCancel:g},null,8,["mode","assistant"])]),_:1},8,["title","description"]))}},E7e={class:"custom-dashed-border rounded-2xl py-5 px-6"},T7e={class:"flex flex-col md:flex-row items-start md:items-center gap-6"},y7e={class:"flex-shrink-0 bg-gray-800 w-[7.5rem] h-[6.5rem] rounded-lg flex items-center justify-center overflow-hidden"},S7e=["src","alt"],A7e=["src","alt"],I7e=["src","alt"],C7e={class:"flex flex-col flex-1 gap-3 ltr:pr-8 rtl:pl-8"},O7e={key:0,class:"text-n-slate-12 text-sm mb-0"},N7e={class:"flex gap-3"},S_={__name:"FeatureSpotlight",props:{title:{type:String,default:""},note:{type:String,default:""},videoUrl:{type:String,default:""},thumbnail:{type:String,default:""},fallbackThumbnail:{type:String,default:""},fallbackThumbnailDark:{type:String,default:""},learnMoreUrl:{type:String,default:""}},setup(e){const t=X(!1),n=()=>{t.value=!0},s=o=>{o&&window.open(o,"_blank")};return(o,a)=>(p(),v("section",E7e,[h("div",T7e,[h("div",y7e,[!t.value&&e.thumbnail?(p(),v("img",{key:0,src:e.thumbnail,alt:e.title,draggable:"false",class:"w-full h-full object-cover rounded-lg",loading:"lazy",onError:n},null,40,S7e)):(p(),v(pe,{key:1},[e.fallbackThumbnailDark?(p(),v("img",{key:0,src:e.fallbackThumbnailDark,alt:e.title,draggable:"false",class:"w-full h-full object-cover hidden dark:block rounded-lg",loading:"lazy"},null,8,A7e)):w("",!0),e.fallbackThumbnail?(p(),v("img",{key:1,src:e.fallbackThumbnail,alt:e.title,draggable:"false",class:"w-full h-full object-cover block dark:hidden rounded-lg",loading:"lazy"},null,8,I7e)):w("",!0)],64))]),h("div",C7e,[e.note?(p(),v("p",O7e,A(e.note),1)):w("",!0),h("div",N7e,[We(o.$slots,"actions",{},()=>[e.videoUrl?(p(),$(oe,{key:0,label:o.$t("FEATURE_SPOTLIGHT.WATCH_VIDEO"),sm:"",faded:"",slate:"",icon:"i-lucide-circle-play",onClick:a[0]||(a[0]=i=>s(e.videoUrl))},null,8,["label"])):w("",!0),e.learnMoreUrl?(p(),$(oe,{key:1,label:o.$t("FEATURE_SPOTLIGHT.LEARN_MORE"),sm:"",faded:"",slate:"","trailing-icon":"",icon:"i-lucide-arrow-up-right",onClick:a[1]||(a[1]=i=>s(e.learnMoreUrl))},null,8,["label"])):w("",!0)])])])])]))}},w7e=[{account_id:2,config:{product_name:"HelpDesk Pro"},created_at:1736033561,description:"An advanced AI assistant designed to enhance customer support solutions by automating workflows and providing instant responses.",id:4,name:"Support Genie"},{account_id:3,config:{product_name:"CRM Tools"},created_at:1736033562,description:"Helps streamline customer relationship management by organizing contacts, automating follow-ups, and providing insights.",id:5,name:"CRM Assistant"},{account_id:4,config:{product_name:"SalesFlow"},created_at:1736033563,description:"Optimizes your sales pipeline by tracking prospects, forecasting sales, and automating administrative tasks.",id:6,name:"SalesBot"},{account_id:5,config:{product_name:"TicketMaster AI"},created_at:1736033564,description:"Automates ticket assignment, categorization, and customer query responses to enhance support efficiency.",id:7,name:"TicketBot"},{account_id:6,config:{product_name:"FinanceAssist"},created_at:1736033565,description:"Provides financial analytics, reporting, and insights, helping teams make data-driven financial decisions.",id:8,name:"Finance Wizard"},{account_id:8,config:{product_name:"HR Assistant"},created_at:1736033567,description:"Streamlines HR operations including employee management, payroll, and recruitment processes.",id:10,name:"HR Helper"}],R7e=[{account_id:1,assistant:{id:1,name:"Helper Pro"},content:"Comprehensive guide on using conversation filters to manage chats effectively.",created_at:1736143272,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688192-how-to-use-conversation-filters",id:3059,name:"How to use Conversation Filters? | User Guide | Chatwoot",status:"available"},{account_id:2,assistant:{id:2,name:"Support Genie"},content:"Step-by-step guide for automating ticket assignments and improving support workflow in Chatwoot.",created_at:1736143273,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688200-automating-ticket-assignments",id:3060,name:"Automating Ticket Assignments | User Guide | Chatwoot",status:"available"},{account_id:3,assistant:{id:3,name:"CRM Assistant"},content:"A detailed guide on managing and organizing customer profiles for better relationship management.",created_at:1736143274,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688210-managing-customer-profiles",id:3061,name:"Managing Customer Profiles | User Guide | Chatwoot",status:"available"},{account_id:4,assistant:{id:4,name:"SalesBot"},content:"Learn how to optimize sales tracking and improve your sales forecasting using advanced features.",created_at:1736143275,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688220-sales-tracking-guide",id:3062,name:"Sales Tracking Guide | User Guide | Chatwoot",status:"available"},{account_id:5,assistant:{id:5,name:"TicketBot"},content:"How to efficiently create, manage, and resolve tickets in Chatwoot.",created_at:1736143276,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688230-managing-tickets",id:3063,name:"Managing Tickets | User Guide | Chatwoot",status:"available"},{account_id:6,assistant:{id:6,name:"Finance Wizard"},content:"Detailed guide on how to use financial reporting tools and generate insightful analytics.",created_at:1736143277,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688240-financial-reporting",id:3064,name:"Financial Reporting | User Guide | Chatwoot",status:"available"}],x7e=[{account_id:1,answer:"Messenger may be deactivated because you are on a free plan or the limit for inboxes might have been reached.",created_at:1736283330,id:87,question:"Why is my Messenger in Chatwoot deactivated?",status:"pending",assistant:{account_id:1,config:{product_name:"Chatwoot"},created_at:1736033280,description:"Assists with general queries and system-wide issues.",id:1,name:"Assistant 2"}},{account_id:2,answer:"You can integrate your WhatsApp account by navigating to the Integrations section and selecting the WhatsApp integration option.",created_at:1736283340,id:88,question:"How do I integrate WhatsApp with Chatwoot?",assistant:{account_id:2,config:{product_name:"Chatwoot"},created_at:1736033281,description:"Helps with integration and setup-related inquiries.",id:2,name:"Assistant 3"}},{account_id:3,answer:"To reset your password, go to the login page and click on 'Forgot Password', then follow the instructions sent to your email.",created_at:1736283350,id:89,question:"How can I reset my password in Chatwoot?",assistant:{account_id:3,config:{product_name:"Chatwoot"},created_at:1736033282,description:"Handles account management and recovery support.",id:3,name:"Assistant 4"}},{account_id:4,answer:"You can enable the dark mode in settings by navigating to 'Appearance' and selecting 'Dark Mode'.",created_at:1736283360,id:90,question:"How do I enable dark mode in Chatwoot?",assistant:{account_id:4,config:{product_name:"Chatwoot"},created_at:1736033283,description:"Helps with UI and theme-related inquiries.",id:4,name:"Assistant 5"}},{account_id:5,answer:"To add a new team member, navigate to 'Settings', then 'Team', and click on 'Add Team Member'.",created_at:1736283370,id:91,question:"How do I add a new team member in Chatwoot?",assistant:{account_id:5,config:{product_name:"Chatwoot"},created_at:1736033284,description:"Supports team management and user access-related queries.",id:5,name:"Assistant 6"}},{account_id:6,answer:"Campaigns in Chatwoot allow you to send targeted messages to specific user segments. You can create them in the 'Campaigns' section.",created_at:1736283380,id:92,question:"What are campaigns in Chatwoot?",assistant:{account_id:6,config:{product_name:"Chatwoot"},created_at:1736033285,description:"Specialized in marketing, campaign management, and messaging strategies.",id:6,name:"Assistant 7"}}],$7e=[{id:7,name:"Email Support",channel_type:yt.EMAIL,email:"support@company.com"},{id:1,name:"Website Chat",channel_type:yt.WEB},{id:2,name:"Facebook Support",channel_type:yt.FB},{id:5,name:"SMS Service",channel_type:yt.TWILIO,messaging_service_sid:"MGxxxxxx"},{id:6,name:"WhatsApp Support",channel_type:yt.WHATSAPP,phone_number:"+1987654321"},{id:8,name:"Telegram Support",channel_type:yt.TELEGRAM},{id:9,name:"LINE Support",channel_type:yt.LINE},{id:10,name:"API Channel",channel_type:yt.API},{id:11,name:"SMS Basic",channel_type:yt.SMS,phone_number:"+1555555555"}],M7e={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},L7e={__name:"AssistantPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>(p(),v(pe,null,[y(S_,{title:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/assistant-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/assistant-dark.svg","learn-more-url":"https://chwt.app/captain-assistant",class:"mb-8"},null,8,["title","note"]),y(Ri,{title:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.TITLE"),subtitle:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":K(()=>[h("div",M7e,[(p(!0),v(pe,null,Ne(N(w7e).slice(0,5),(i,r)=>(p(),$(yI,{id:i.id,key:`assistant-${r}`,name:i.name,description:i.description,"updated-at":i.created_at},null,8,["id","name","description","updated-at"]))),128))])]),actions:K(()=>[y(oe,{label:o.$t("CAPTAIN.ASSISTANTS.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},k7e={class:"relative"},D7e={key:0},P7e={class:"absolute top-full mt-6 ltr:left-0 rtl:right-0 outline outline-1 outline-n-weak bg-n-alpha-3 backdrop-blur-[100px] rounded-xl p-4 w-80"},B7e={class:"relative flex flex-col items-start gap-4 z-20"},F7e={class:"flex-shrink-0 bg-gray-800 w-full h-[7.5rem] rounded-lg"},U7e=["src","alt"],G7e=["src","alt"],V7e=["src","alt"],H7e={key:0,class:"text-n-slate-12 text-start text-sm mb-0"},W7e={class:"flex gap-3 justify-between w-full"},A_={__name:"FeatureSpotlightPopover",props:{buttonLabel:{type:String,default:""},title:{type:String,default:""},note:{type:String,default:""},videoUrl:{type:String,default:""},thumbnail:{type:String,default:""},fallbackThumbnail:{type:String,default:""},fallbackThumbnailDark:{type:String,default:""},learnMoreUrl:{type:String,default:""}},setup(e){const t=X(!1),[n,s]=es(),o=()=>{t.value=!0},a=i=>{i&&window.open(i,"_blank")};return(i,r)=>(p(),v("div",k7e,[y(oe,{id:"togglePopup",label:e.buttonLabel,slate:"",ghost:"",sm:"",class:se({"bg-n-alpha-2":N(n)}),onClick:r[0]||(r[0]=l=>N(s)(!N(n)))},null,8,["label","class"]),N(n)?re((p(),v("div",D7e,[h("section",P7e,[r[3]||(r[3]=h("div",{class:"absolute -top-[0.77rem] ltr:left-12 rtl:right-12 w-6 h-6 ltr:rotate-45 rtl:-rotate-45 rtl:rounded-tr ltr:rounded-tl rtl:border-r ltr:border-l border-t border-n-weak bg-n-alpha-3 z-10"},null,-1)),h("div",B7e,[h("div",F7e,[!t.value&&e.thumbnail?(p(),v("img",{key:0,src:e.thumbnail,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover rounded-lg",onError:o},null,40,U7e)):(p(),v(pe,{key:1},[e.fallbackThumbnailDark?(p(),v("img",{key:0,src:e.fallbackThumbnailDark,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover hidden dark:block"},null,8,G7e)):w("",!0),e.fallbackThumbnail?(p(),v("img",{key:1,src:e.fallbackThumbnail,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover block dark:hidden"},null,8,V7e)):w("",!0)],64))]),e.note?(p(),v("p",H7e,A(e.note),1)):w("",!0),h("div",W7e,[We(i.$slots,"actions",{},()=>[e.videoUrl?(p(),$(oe,{key:0,label:i.$t("FEATURE_SPOTLIGHT.WATCH_VIDEO"),sm:"",faded:"",slate:"",icon:"i-lucide-circle-play",class:"w-full",onClick:r[1]||(r[1]=l=>a(e.videoUrl))},null,8,["label"])):w("",!0),e.learnMoreUrl?(p(),$(oe,{key:1,label:i.$t("FEATURE_SPOTLIGHT.LEARN_MORE"),sm:"",faded:"",slate:"","trailing-icon":"",class:"w-full",icon:"i-lucide-arrow-up-right",onClick:r[2]||(r[2]=l=>a(e.learnMoreUrl))},null,8,["label"])):w("",!0)])])])])])),[[N(Co),[()=>N(n)&&(n.value=!1),{ignore:["#togglePopup"]}]]]):w("",!0)]))}},SI={__name:"LimitBanner",setup(e){const t=xn(),{accountId:n}=zn(),{responseLimits:s,fetchLimits:o}=Cg(),a=()=>{t.push({name:"billing_settings_index",params:{accountId:n.value}})},i=C(()=>{if(!s.value)return!1;const{consumed:r,totalCount:l}=s.value;return!r||!l?!1:r/l>.8});return dt(o),(r,l)=>re((p(),$(Zd,{color:"amber","action-label":r.$t("CAPTAIN.PAYWALL.UPGRADE_NOW"),onAction:a},{default:K(()=>[Re(A(r.$t("CAPTAIN.BANNER.RESPONSES")),1)]),_:1},8,["action-label"])),[[Jt,i.value]])}},z7e={class:"flex flex-col gap-4"},j7e={__name:"Index",setup(e){const t=xn(),n=pt(),s=X(""),o=Oe("captainAssistants/getUIFlags"),a=Oe("captainAssistants/getRecords"),i=C(()=>o.value.fetchingList),r=X(null),l=X(null),c=()=>{l.value.dialogRef.open()},u=X(null),d=()=>{s.value="create",tn(()=>u.value.dialogRef.open())},m=()=>{t.push({name:"captain_assistants_edit",params:{assistantId:r.value.id}})},f=()=>{t.push({name:"captain_assistants_inboxes_index",params:{assistantId:r.value.id}})},g=({action:S,id:_})=>{r.value=a.value.find(E=>_===E.id),tn(()=>{S==="delete"&&c(),S==="edit"&&m(),S==="viewConnectedInboxes"&&f()})},T=()=>{s.value="",r.value=null};return dt(()=>n.dispatch("captainAssistants/get")),(S,_)=>(p(),$(zc,{"header-title":S.$t("CAPTAIN.ASSISTANTS.HEADER"),"button-label":S.$t("CAPTAIN.ASSISTANTS.ADD_NEW"),"button-policy":["administrator"],"show-pagination-footer":!1,"is-fetching":i.value,"is-empty":!N(a).length,"feature-flag":N(_t).CAPTAIN,onClick:d},{knowMore:K(()=>[y(A_,{"button-label":S.$t("CAPTAIN.HEADER_KNOW_MORE"),title:S.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:S.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/assistant-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/assistant-popover-dark.svg","learn-more-url":"https://chwt.app/captain-assistant"},null,8,["button-label","title","note"])]),emptyState:K(()=>[y(L7e,{onClick:d})]),paywall:K(()=>[y(y_)]),body:K(()=>[y(SI,{class:"mb-5"}),h("div",z7e,[(p(!0),v(pe,null,Ne(N(a),E=>(p(),$(yI,{id:E.id,key:E.id,name:E.name,description:E.description,"updated-at":E.updated_at||E.created_at,"created-at":E.created_at,onAction:g},null,8,["id","name","description","updated-at","created-at"]))),128))])]),default:K(()=>[r.value?(p(),$(Ip,{key:0,ref_key:"deleteAssistantDialog",ref:l,entity:r.value,type:"Assistants"},null,8,["entity"])):w("",!0),s.value?(p(),$(b7e,{key:1,ref_key:"createAssistantDialog",ref:u,type:s.value,"selected-assistant":r.value,onClose:T},null,8,["type","selected-assistant"])):w("",!0)]),_:1},8,["header-title","button-label","is-fetching","is-empty","feature-flag"]))}},K7e={class:"border rounded-lg border-n-slate-4"},Y7e={class:"text-sm font-medium text-n-slate-12"},X7e={key:0,class:"p-4 pt-0"},Mu={__name:"Accordion",props:{title:{type:String,required:!0},isOpen:{type:Boolean,default:!1}},setup(e){const t=e,n=X(t.isOpen),s=()=>{n.value=!n.value};return ct(()=>t.isOpen,o=>{n.value=o}),(o,a)=>(p(),v("div",K7e,[h("button",{class:"flex items-center justify-between w-full p-4 text-left",onClick:s},[h("span",Y7e,A(e.title),1),h("span",{class:se(["w-5 h-5 transition-transform duration-200 i-lucide-chevron-down",{"rotate-180":n.value}])},null,2)]),n.value?(p(),v("div",X7e,[We(o.$slots,"default")])):w("",!0)]))}},q7e={class:"flex flex-col gap-4 pt-4"},Z7e={class:"flex justify-end"},Q7e={class:"flex flex-col gap-4"},J7e={class:"flex flex-col gap-2 mt-4"},eFe={class:"text-sm font-medium text-n-slate-12"},tFe={class:"flex items-center gap-4"},nFe={class:"text-sm text-n-slate-12"},sFe={class:"text-sm text-n-slate-11 italic"},aFe={class:"flex justify-end"},oFe={class:"flex flex-col gap-4 pt-4"},iFe={class:"flex justify-end"},rFe={class:"flex flex-col gap-4 pt-4"},lFe={class:"flex flex-col gap-2"},cFe={class:"text-sm font-medium text-n-slate-12"},uFe={class:"flex flex-col gap-2"},dFe={class:"flex items-center gap-2"},pFe={class:"flex items-center gap-2"},hFe={class:"flex justify-end"},mFe={__name:"EditAssistantForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},assistant:{type:Object,default:()=>({})}},emits:["submit"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a={uiFlags:Oe("captainAssistants/getUIFlags")},r=ls({...{name:"",description:"",productName:"",welcomeMessage:"",handoffMessage:"",resolutionMessage:"",instructions:"",features:{conversationFaqs:!1,memories:!1},temperature:1}}),l={name:{required:Ye,minLength:Qt(1)},description:{required:Ye,minLength:Qt(1)},productName:{required:Ye,minLength:Qt(1)},welcomeMessage:{minLength:Qt(1)},handoffMessage:{minLength:Qt(1)},resolutionMessage:{minLength:Qt(1)},instructions:{minLength:Qt(1)}},c=bt(l,r),u=C(()=>a.uiFlags.value.creatingItem),d=E=>c.value[E].$error?c.value[E].$errors[0].$message:"",m=C(()=>({name:d("name"),description:d("description"),productName:d("productName"),welcomeMessage:d("welcomeMessage"),handoffMessage:d("handoffMessage"),resolutionMessage:d("resolutionMessage"),instructions:d("instructions")})),f=E=>{const{config:b={}}=E;r.name=E.name,r.description=E.description,r.productName=b.product_name,r.welcomeMessage=b.welcome_message,r.handoffMessage=b.handoff_message,r.resolutionMessage=b.resolution_message,r.instructions=b.instructions,r.features={conversationFaqs:b.feature_faq||!1,memories:b.feature_memory||!1},r.temperature=b.temperature||1},g=async()=>{if(!await Promise.all([c.value.name.$validate(),c.value.description.$validate(),c.value.productName.$validate()]).then(I=>I.every(Boolean)))return;const b={name:r.name,description:r.description,config:{...n.assistant.config,product_name:r.productName}};s("submit",b)},T=async()=>{if(!await Promise.all([c.value.welcomeMessage.$validate(),c.value.handoffMessage.$validate(),c.value.resolutionMessage.$validate()]).then(I=>I.every(Boolean)))return;const b={config:{...n.assistant.config,welcome_message:r.welcomeMessage,handoff_message:r.handoffMessage,resolution_message:r.resolutionMessage}};s("submit",b)},S=async()=>{if(!await c.value.instructions.$validate())return;const b={config:{...n.assistant.config,temperature:r.temperature||1,instructions:r.instructions}};s("submit",b)},_=()=>{const E={config:{...n.assistant.config,feature_faq:r.features.conversationFaqs,feature_memory:r.features.memories}};s("submit",E)};return ct(()=>n.assistant,E=>{n.mode==="edit"&&E&&f(E)},{immediate:!0}),(E,b)=>(p(),v("form",{class:"flex flex-col gap-4",onSubmit:b[9]||(b[9]=Fe((...I)=>E.handleSubmit&&E.handleSubmit(...I),["prevent"]))},[y(Mu,{title:N(o)("CAPTAIN.ASSISTANTS.FORM.SECTIONS.BASIC_INFO"),"is-open":""},{default:K(()=>[h("div",q7e,[y(_n,{modelValue:r.name,"onUpdate:modelValue":b[0]||(b[0]=I=>r.name=I),label:N(o)("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:N(o)("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:m.value.name,"message-type":m.value.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),y(_a,{modelValue:r.description,"onUpdate:modelValue":b[1]||(b[1]=I=>r.description=I),label:N(o)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:N(o)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:m.value.description,"message-type":m.value.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),y(_n,{modelValue:r.productName,"onUpdate:modelValue":b[2]||(b[2]=I=>r.productName=I),label:N(o)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:N(o)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:m.value.productName,"message-type":m.value.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),h("div",Z7e,[y(oe,{size:"small",loading:u.value,onClick:g},{default:K(()=>[Re(A(N(o)("CAPTAIN.ASSISTANTS.FORM.UPDATE")),1)]),_:1},8,["loading"])])])]),_:1},8,["title"]),y(Mu,{title:N(o)("CAPTAIN.ASSISTANTS.FORM.SECTIONS.INSTRUCTIONS")},{default:K(()=>[h("div",Q7e,[y(_a,{modelValue:r.instructions,"onUpdate:modelValue":b[3]||(b[3]=I=>r.instructions=I),placeholder:N(o)("CAPTAIN.ASSISTANTS.FORM.INSTRUCTIONS.PLACEHOLDER"),message:m.value.instructions,"max-length":2e4,"message-type":m.value.instructions?"error":"info"},null,8,["modelValue","placeholder","message","message-type"]),h("div",J7e,[h("label",eFe,A(N(o)("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.LABEL")),1),h("div",tFe,[re(h("input",{"onUpdate:modelValue":b[4]||(b[4]=I=>r.temperature=I),type:"range",min:"0",max:"1",step:"0.1",class:"w-full"},null,512),[[mt,r.temperature]]),h("span",nFe,A(r.temperature),1)]),h("p",sFe,A(N(o)("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.DESCRIPTION")),1)]),h("div",aFe,[y(oe,{size:"small",loading:u.value,label:N(o)("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:S},null,8,["loading","label"])])])]),_:1},8,["title"]),y(Mu,{title:N(o)("CAPTAIN.ASSISTANTS.FORM.SECTIONS.SYSTEM_MESSAGES")},{default:K(()=>[h("div",oFe,[y(_a,{modelValue:r.handoffMessage,"onUpdate:modelValue":b[5]||(b[5]=I=>r.handoffMessage=I),label:N(o)("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.LABEL"),placeholder:N(o)("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.PLACEHOLDER"),message:m.value.handoffMessage,"message-type":m.value.handoffMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),y(_a,{modelValue:r.resolutionMessage,"onUpdate:modelValue":b[6]||(b[6]=I=>r.resolutionMessage=I),label:N(o)("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.LABEL"),placeholder:N(o)("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.PLACEHOLDER"),message:m.value.resolutionMessage,"message-type":m.value.resolutionMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),h("div",iFe,[y(oe,{size:"small",loading:u.value,label:N(o)("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:T},null,8,["loading","label"])])])]),_:1},8,["title"]),y(Mu,{title:N(o)("CAPTAIN.ASSISTANTS.FORM.SECTIONS.FEATURES")},{default:K(()=>[h("div",rFe,[h("div",lFe,[h("label",cFe,A(N(o)("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),h("div",uFe,[h("label",dFe,[re(h("input",{"onUpdate:modelValue":b[7]||(b[7]=I=>r.features.conversationFaqs=I),type:"checkbox",class:"form-checkbox"},null,512),[[pn,r.features.conversationFaqs]]),Re(" "+A(N(o)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),h("label",pFe,[re(h("input",{"onUpdate:modelValue":b[8]||(b[8]=I=>r.features.memories=I),type:"checkbox",class:"form-checkbox"},null,512),[[pn,r.features.memories]]),Re(" "+A(N(o)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)])])]),h("div",hFe,[y(oe,{size:"small",loading:u.value,label:N(o)("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:_},null,8,["loading","label"])])])]),_:1},8,["title"])],32))}},fFe=["innerHTML"],gFe={key:0,class:"flex justify-start"},_Fe={class:"flex items-start gap-1.5"},vFe={__name:"MessageList",props:{messages:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},setup(e){const t=e,n=X(null),{t:s}=Me(),{formatMessage:o}=ya(),a=d=>d==="user",i=d=>a(d)?"justify-end":"justify-start",r=d=>a(d)?"flex-row-reverse":"flex-row",l=d=>a(d)?s("CAPTAIN.PLAYGROUND.USER"):s("CAPTAIN.PLAYGROUND.ASSISTANT"),c=d=>a(d)?"bg-n-strong text-n-white":"bg-n-solid-iris text-n-slate-12";return ct(()=>t.messages.length,async()=>{await tn(),n.value&&(n.value.scrollTop=n.value.scrollHeight)}),(d,m)=>(p(),v("div",{ref_key:"messageContainer",ref:n,class:"flex-1 overflow-y-auto mb-4 space-y-2"},[(p(!0),v(pe,null,Ne(e.messages,(f,g)=>(p(),v("div",{key:g,class:se(["flex",i(f.sender)])},[h("div",{class:se(["flex items-start gap-1.5",r(f.sender)])},[y(ts,{name:l(f.sender),"rounded-full":"",size:24},null,8,["name"]),h("div",{class:se(["max-w-[80%] rounded-lg p-3 text-sm",c(f.sender)])},[h("div",{class:"break-words",innerHTML:N(o)(f.content)},null,8,fFe)],2)],2)],2))),128)),e.isLoading?(p(),v("div",gFe,[h("div",_Fe,[y(ts,{name:l("assistant"),"rounded-full":"",size:24},null,8,["name"]),m[0]||(m[0]=Mr('<div class="max-w-sm rounded-lg p-3 text-sm bg-n-solid-iris text-n-slate-12"><div class="flex gap-1"><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce"></div><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce [animation-delay:0.2s]"></div><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce [animation-delay:0.4s]"></div></div></div>',1))])])):w("",!0)],512))}},bFe={class:"flex flex-col h-full rounded-lg p-4 border border-n-slate-4 text-n-slate-11"},EFe={class:"mb-4"},TFe={class:"flex justify-between items-center mb-1"},yFe={class:"text-lg font-medium"},SFe={class:"text-sm text-n-slate-11"},AFe={class:"flex items-center bg-n-solid-1 outline outline-n-container rounded-lg p-3"},IFe=["placeholder"],CFe={class:"text-xs text-n-slate-11 pt-2 text-center"},OFe={__name:"AssistantPlayground",props:{assistantId:{type:Number,required:!0}},setup(e){const{t}=Me(),n=X([]),s=X(""),o=X(!1),a=()=>n.value.map(l=>({role:l.sender,content:l.content})),i=()=>{n.value=[],s.value=""},r=async()=>{if(!s.value.trim()||o.value)return;const l={content:s.value,sender:"user",timestamp:new Date().toISOString()};n.value.push(l);const c=s.value;s.value="";try{o.value=!0;const{data:u}=await eN.playground({assistantId:e.assistantId,messageContent:c,messageHistory:a()});n.value.push({content:u.response,sender:"assistant",timestamp:new Date().toISOString()})}catch(u){console.error("Error getting assistant response:",u)}finally{o.value=!1}};return(l,c)=>(p(),v("div",bFe,[h("div",EFe,[h("div",TFe,[h("h3",yFe,A(N(t)("CAPTAIN.PLAYGROUND.HEADER")),1),y(oe,{ghost:"",size:"small",icon:"i-lucide-rotate-ccw",onClick:i})]),h("p",SFe,A(N(t)("CAPTAIN.PLAYGROUND.DESCRIPTION")),1)]),y(vFe,{messages:n.value,"is-loading":o.value},null,8,["messages","is-loading"]),h("div",AFe,[re(h("input",{"onUpdate:modelValue":c[0]||(c[0]=u=>s.value=u),class:"flex-1 bg-transparent border-none focus:outline-none text-sm mb-0",placeholder:N(t)("CAPTAIN.PLAYGROUND.MESSAGE_PLACEHOLDER"),onKeyup:kn(r,["enter"])},null,40,IFe),[[mt,s.value]]),y(oe,{ghost:"",size:"small",disabled:!s.value.trim(),icon:"i-lucide-send",onClick:r},null,8,["disabled"])]),h("p",CFe,A(N(t)("CAPTAIN.PLAYGROUND.CREDIT_NOTE")),1)]))}},NFe={key:0},wFe={key:1,class:"flex gap-4 h-full"},RFe={class:"flex-1 lg:overflow-auto pr-4 h-full md:h-auto"},xFe={class:"w-[400px] hidden lg:block h-full"},$Fe={__name:"Edit",setup(e){const t=sn(),n=pt(),{t:s}=Me(),o=t.params.assistantId,a=Oe("captainAssistants/getUIFlags"),i=C(()=>a.value.fetchingItem),r=C(()=>n.getters["captainAssistants/getRecord"](Number(o))),l=C(()=>{var u;return!!((u=r.value)!=null&&u.id)}),c=async u=>{try{await n.dispatch("captainAssistants/update",{id:o,...u}),ce(s("CAPTAIN.ASSISTANTS.EDIT.SUCCESS_MESSAGE"))}catch(d){const m=(d==null?void 0:d.message)||s("CAPTAIN.ASSISTANTS.EDIT.ERROR_MESSAGE");ce(m)}};return dt(()=>{l.value||n.dispatch("captainAssistants/show",o)}),(u,d)=>{var m;return p(),$(zc,{"header-title":(m=r.value)==null?void 0:m.name,"show-pagination-footer":!1,"is-fetching":i.value,"show-know-more":!1,"back-url":{name:"captain_assistants_index"}},{body:K(()=>[l.value?(p(),v("div",wFe,[h("div",RFe,[y(mFe,{assistant:r.value,mode:"edit",onSubmit:c},null,8,["assistant"])]),h("div",xFe,[y(OFe,{"assistant-id":Number(N(o))},null,8,["assistant-id"])])])):(p(),v("div",NFe,A(N(s)("CAPTAIN.ASSISTANTS.EDIT.NOT_FOUND")),1))]),_:1},8,["header-title","is-fetching"])}}},MFe={class:"flex flex-col gap-1"},LFe={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},kFe={class:"flex items-center justify-between w-full gap-3"},DFe={__name:"ConnectInboxForm",props:{assistantId:{type:Number,required:!0}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a={uiFlags:Oe("captainInboxes/getUIFlags"),inboxes:Oe("inboxes/getInboxes"),captainInboxes:Oe("captainInboxes/getRecords")},r=ls({...{inboxId:null}}),l={inboxId:{required:Ye}},c=C(()=>{const _=a.captainInboxes.value.map(E=>E.id);return a.inboxes.value.filter(E=>!_.includes(E.id)).map(E=>({value:E.id,label:E.name}))}),u=bt(l,r),d=C(()=>a.uiFlags.value.creatingItem),m=(_,E)=>u.value[_].$error?o(`CAPTAIN.INBOXES.FORM.${E}.ERROR`):"",f=C(()=>({inboxId:m("inboxId","INBOX")})),g=()=>s("cancel"),T=()=>({inboxId:r.inboxId,assistantId:n.assistantId}),S=async()=>{await u.value.$validate()&&s("submit",T())};return(_,E)=>(p(),v("form",{class:"flex flex-col gap-4",onSubmit:Fe(S,["prevent"])},[h("div",MFe,[h("label",LFe,A(N(o)("CAPTAIN.INBOXES.FORM.INBOX.LABEL")),1),y(Ai,{id:"inbox",modelValue:r.inboxId,"onUpdate:modelValue":E[0]||(E[0]=b=>r.inboxId=b),options:c.value,"has-error":!!f.value.inboxId,placeholder:N(o)("CAPTAIN.INBOXES.FORM.INBOX.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:f.value.inboxId},null,8,["modelValue","options","has-error","placeholder","message"])]),h("div",kFe,[y(oe,{type:"button",variant:"faded",color:"slate",label:N(o)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:g},null,8,["label"]),y(oe,{type:"submit",label:N(o)("CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":d.value,disabled:d.value},null,8,["label","is-loading","disabled"])])],32))}},wm="CAPTAIN.INBOXES.CREATE",PFe={__name:"ConnectInboxDialog",props:{assistantId:{type:Number,required:!0}},emits:["close"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=Me(),a=pt(),i=X(null),r=X(null),l=async d=>{try{await a.dispatch("captainInboxes/create",d),ce(o(`${wm}.SUCCESS_MESSAGE`)),i.value.close()}catch(m){const f=(m==null?void 0:m.message)||o(`${wm}.ERROR_MESSAGE`);ce(f)}},c=()=>{s("close")},u=()=>{i.value.close()};return t({dialogRef:i}),(d,m)=>(p(),$(cs,{ref_key:"dialogRef",ref:i,type:"create",title:d.$t(`${wm}.TITLE`),description:d.$t("CAPTAIN.INBOXES.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:c},{footer:K(()=>m[0]||(m[0]=[])),default:K(()=>[y(DFe,{ref_key:"connectForm",ref:r,"assistant-id":e.assistantId,onSubmit:l,onCancel:u},null,8,["assistant-id"])]),_:1},8,["title","description"]))}},BFe={class:"flex justify-between w-full gap-1"},FFe={class:"text-base text-n-slate-12 line-clamp-1 flex items-center gap-2"},UFe={class:"flex items-center gap-2"},AI={__name:"InboxCard",props:{id:{type:Number,required:!0},inbox:{type:Object,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),[a,i]=es(),r=C(()=>{const d=n.inbox;if(!(d!=null&&d.name))return"";const m=d.channel_type===yt.TWILIO,f=d.channel_type===yt.WHATSAPP,g=d.channel_type===yt.EMAIL;if(m||f){const T=d.messaging_service_sid||d.phone_number;return T?`${d.name} (${T})`:d.name}return g&&d.email?`${d.name} (${d.email})`:d.name}),l=C(()=>[{label:o("CAPTAIN.INBOXES.OPTIONS.DISCONNECT"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),c=C(()=>wc(n.inbox.channel_type,"","outline")),u=({action:d,value:m})=>{i(!1),s("action",{action:d,value:m,id:n.id})};return(d,m)=>{const f=qe("on-clickaway");return p(),$(hr,null,{default:K(()=>[h("div",BFe,[h("span",FFe,[h("span",{class:se(c.value)},null,2),Re(" "+A(r.value),1)]),h("div",UFe,[re((p(),$(ja,{permissions:["administrator"],class:"relative flex items-center group"},{default:K(()=>[y(oe,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:m[0]||(m[0]=g=>N(i)())}),N(a)?(p(),$(Hs,{key:0,"menu-items":l.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:m[1]||(m[1]=g=>u(g))},null,8,["menu-items"])):w("",!0)]),_:1})),[[f,()=>N(i)(!1)]])])])]),_:1})}}},GFe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},VFe={__name:"InboxPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>(p(),$(Ri,{title:o.$t("CAPTAIN.INBOXES.EMPTY_STATE.TITLE"),subtitle:o.$t("CAPTAIN.INBOXES.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":K(()=>[h("div",GFe,[(p(!0),v(pe,null,Ne(N($7e).slice(0,5),(i,r)=>(p(),$(AI,{id:i.id,key:`inbox-${r}`,inbox:i},null,8,["id","inbox"]))),128))])]),actions:K(()=>[y(oe,{label:o.$t("CAPTAIN.INBOXES.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"]))}},HFe={class:"flex flex-row items-center gap-4"},WFe={class:"flex items-center gap-1 text-lg font-medium text-n-slate-12"},zFe={class:"flex flex-col gap-4"},jFe={__name:"Index",setup(e){const t=pt(),n=X(""),s=sn(),o=Oe("captainAssistants/getUIFlags"),a=Oe("captainInboxes/getUIFlags"),i=C(()=>o.value.fetchingItem),r=C(()=>a.value.fetchingList),l=Oe("captainInboxes/getRecords"),c=X(null),u=X(null),d=()=>{u.value.dialogRef.open()},m=X(null),f=()=>{n.value="create",tn(()=>m.value.dialogRef.open())},g=({action:b,id:I})=>{c.value=l.value.find(R=>I===R.id),tn(()=>{b==="delete"&&d()})},T=()=>{n.value="",c.value=null},S=nn(),_=Number(s.params.assistantId),E=C(()=>S["captainAssistants/getRecord"].value(_));return Af(()=>t.dispatch("captainAssistants/show",_)),dt(()=>t.dispatch("captainInboxes/get",{assistantId:_})),(b,I)=>(p(),$(zc,{"button-label":b.$t("CAPTAIN.INBOXES.ADD_NEW"),"button-policy":["administrator"],"is-fetching":i.value||r.value,"is-empty":!N(l).length,"show-pagination-footer":!1,"feature-flag":N(_t).CAPTAIN,onClick:f},vo({emptyState:K(()=>[y(VFe,{onClick:f})]),body:K(()=>[h("div",zFe,[(p(!0),v(pe,null,Ne(N(l),R=>(p(),$(AI,{id:R.id,key:R.id,inbox:R,onAction:g},null,8,["id","inbox"]))),128))])]),default:K(()=>[c.value?(p(),$(Ip,{key:0,ref_key:"disconnectInboxDialog",ref:u,entity:c.value,"delete-payload":{assistantId:N(_),inboxId:c.value.id},type:"Inboxes"},null,8,["entity","delete-payload"])):w("",!0),n.value?(p(),$(PFe,{key:1,ref_key:"connectInboxDialog",ref:m,"assistant-id":N(_),type:n.value,onClose:T},null,8,["assistant-id","type"])):w("",!0)]),_:2},[i.value?void 0:{name:"headerTitle",fn:K(()=>[h("div",HFe,[y(lr,{compact:""}),h("span",WFe,[Re(A(E.value.name)+" ",1),I[0]||(I[0]=h("span",{class:"i-lucide-chevron-right text-xl text-n-slate-10"},null,-1)),Re(" "+A(b.$t("CAPTAIN.INBOXES.HEADER")),1)])])]),key:"0"}]),1032,["button-label","is-fetching","is-empty","feature-flag"]))}},KFe={class:"flex justify-between w-full gap-1"},YFe={class:"text-base text-n-slate-12 line-clamp-1"},XFe={class:"flex items-center gap-2"},qFe={class:"relative flex items-center group"},ZFe={class:"flex items-center justify-between w-full gap-4"},QFe={class:"text-sm shrink-0 truncate text-n-slate-11 flex items-center gap-1"},JFe={class:"text-n-slate-11 text-sm truncate flex justify-start flex-1 items-center gap-1"},eUe={class:"truncate"},tUe={class:"shrink-0 text-sm text-n-slate-11 line-clamp-1"},II={__name:"DocumentCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},assistant:{type:Object,default:()=>({})},externalLink:{type:String,required:!0},createdAt:{type:Number,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{checkPermissions:o}=cl(),{t:a}=Me(),[i,r]=es(),l=C(()=>{const d=[{label:a("CAPTAIN.DOCUMENTS.OPTIONS.VIEW_RELATED_RESPONSES"),value:"viewRelatedQuestions",action:"viewRelatedQuestions",icon:"i-ph-tree-view-duotone"}];return o(["administrator"])&&d.push({label:a("CAPTAIN.DOCUMENTS.OPTIONS.DELETE_DOCUMENT"),value:"delete",action:"delete",icon:"i-lucide-trash"}),d}),c=C(()=>rs(n.createdAt)),u=({action:d,value:m})=>{r(!1),s("action",{action:d,value:m,id:n.id})};return(d,m)=>{const f=qe("on-clickaway");return p(),$(hr,null,{default:K(()=>{var g;return[h("div",KFe,[h("span",YFe,A(e.name),1),h("div",XFe,[re((p(),v("div",qFe,[y(oe,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:m[0]||(m[0]=T=>N(r)())}),N(i)?(p(),$(Hs,{key:0,"menu-items":l.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full",onAction:m[1]||(m[1]=T=>u(T))},null,8,["menu-items"])):w("",!0)])),[[f,()=>N(r)(!1)]])])]),h("div",ZFe,[h("span",QFe,[m[2]||(m[2]=h("i",{class:"i-woot-captain"},null,-1)),Re(" "+A(((g=e.assistant)==null?void 0:g.name)||""),1)]),h("span",JFe,[m[3]||(m[3]=h("i",{class:"i-ph-link-simple shrink-0"},null,-1)),h("span",eUe,A(e.externalLink),1)]),h("div",tUe,A(c.value),1)])]}),_:1})}}},nUe={class:"relative w-4 h-4"},sUe=["checked","indeterminate","disabled"],CI={__name:"Checkbox",props:hn({indeterminate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:hn(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=wn(e,"modelValue"),o=a=>{s.value=a.target.checked,n("change",a)};return(a,i)=>(p(),v("div",nUe,[h("input",{checked:s.value,indeterminate:e.indeterminate,type:"checkbox",disabled:e.disabled,class:"peer absolute inset-0 z-10 h-4 w-4 disabled:opacity-50 appearance-none rounded border border-n-slate-6 ring-transparent transition-all duration-200 checked:border-n-brand checked:bg-n-brand dark:border-gray-600 dark:checked:border-n-brand indeterminate:border-n-brand indeterminate:bg-n-brand hover:enabled:bg-n-blue-border cursor-pointer",onChange:o},null,40,sUe),i[0]||(i[0]=h("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none absolute w-3.5 h-3.5 z-20 stroke-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[h("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),i[1]||(i[1]=h("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none absolute w-3.5 h-3.5 z-20 stroke-white opacity-0 peer-indeterminate:opacity-100 transition-opacity duration-200 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[h("path",{d:"M3 7L11 7","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]))}},aUe={class:"absolute top-7 ltr:left-3 rtl:right-3"},oUe={class:"flex relative justify-between w-full gap-1"},iUe={class:"text-base text-n-slate-12 line-clamp-1"},rUe={key:0,class:"flex items-center gap-2"},lUe={class:"text-n-slate-11 text-sm line-clamp-5"},cUe={key:0,class:"items-center justify-between hidden lg:flex"},uUe={class:"inline-flex items-center"},dUe={class:"text-sm shrink-0 truncate text-n-slate-11 inline-flex items-center gap-1"},pUe={key:0,class:"shrink-0 text-sm text-n-slate-11 inline-flex line-clamp-1 gap-1 ml-3"},hUe={key:0,class:"inline-flex items-center gap-1 truncate over"},mUe=["title"],fUe={key:1,class:"inline-flex items-center gap-1"},gUe=["title"],_Ue={class:"group-hover:underline"},vUe={key:3},bUe={key:1,class:"shrink-0 text-sm text-n-slate-11 line-clamp-1 inline-flex items-center gap-1 ml-3"},EUe=["title"],TUe={class:"shrink-0 text-sm text-n-slate-11 line-clamp-1 inline-flex items-center gap-1 ml-3"},I_={__name:"ResponseCard",props:{id:{type:Number,required:!0},question:{type:String,required:!0},answer:{type:String,required:!0},compact:{type:Boolean,default:!1},status:{type:String,default:"approved"},documentable:{type:Object,default:null},assistant:{type:Object,default:()=>({})},updatedAt:{type:Number,required:!0},createdAt:{type:Number,required:!0},isSelected:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1}},emits:["action","navigate","select","hover"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),[a,i]=es(),r=C({get:()=>n.isSelected,set:()=>s("select",n.id)}),l=C(()=>n.status==="pending"?[{label:o("CAPTAIN.RESPONSES.OPTIONS.APPROVE"),value:"approve",action:"approve",icon:"i-lucide-circle-check-big"}]:[]),c=C(()=>[...l.value,{label:o("CAPTAIN.RESPONSES.OPTIONS.EDIT_RESPONSE"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:o("CAPTAIN.RESPONSES.OPTIONS.DELETE_RESPONSE"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),u=C(()=>rs(n.updatedAt||n.createdAt)),d=({action:f,value:g})=>{i(!1),s("action",{action:f,value:g,id:n.id})},m=()=>{s("navigate",{id:n.documentable.id,type:n.documentable.type})};return(f,g)=>{const T=qe("on-clickaway");return p(),$(hr,{selectable:"",class:se(["relative",{"rounded-md":e.compact}]),onMouseenter:g[3]||(g[3]=S=>s("hover",!0)),onMouseleave:g[4]||(g[4]=S=>s("hover",!1))},{default:K(()=>{var S;return[re(h("div",aUe,[y(CI,{modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=_=>r.value=_)},null,8,["modelValue"])],512),[[Jt,e.selectable]]),h("div",oUe,[h("span",iUe,A(e.question),1),e.compact?w("",!0):(p(),v("div",rUe,[re((p(),$(ja,{permissions:["administrator"],class:"relative flex items-center group"},{default:K(()=>[y(oe,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:g[1]||(g[1]=_=>N(i)())}),N(a)?(p(),$(Hs,{key:0,"menu-items":c.value,class:"mt-1 ltr:right-0 rtl:right-0 top-full",onAction:g[2]||(g[2]=_=>d(_))},null,8,["menu-items"])):w("",!0)]),_:1})),[[T,()=>N(i)(!1)]])]))]),h("span",lUe,A(e.answer),1),e.compact?w("",!0):(p(),v("div",cUe,[h("div",uUe,[h("span",dUe,[g[5]||(g[5]=h("i",{class:"i-woot-captain"},null,-1)),Re(" "+A(((S=e.assistant)==null?void 0:S.name)||""),1)]),e.documentable?(p(),v("div",pUe,[e.documentable.type==="Captain::Document"?(p(),v("span",hUe,[g[6]||(g[6]=h("i",{class:"i-ph-files-light text-base"},null,-1)),h("span",{class:"max-w-96 truncate",title:e.documentable.name},A(e.documentable.name),9,mUe)])):w("",!0),e.documentable.type==="User"?(p(),v("span",fUe,[g[7]||(g[7]=h("i",{class:"i-ph-user-circle-plus text-base"},null,-1)),h("span",{class:"max-w-96 truncate",title:e.documentable.available_name},A(e.documentable.available_name),9,gUe)])):e.documentable.type==="Conversation"?(p(),v("span",{key:2,class:"inline-flex items-center gap-1 group cursor-pointer",role:"button",onClick:m},[g[8]||(g[8]=h("i",{class:"i-ph-chat-circle-dots text-base"},null,-1)),h("span",_Ue,A(N(o)("CAPTAIN.RESPONSES.DOCUMENTABLE.CONVERSATION",{id:e.documentable.display_id})),1)])):(p(),v("span",vUe))])):w("",!0),e.status!=="approved"?(p(),v("div",bUe,[h("i",{class:"i-ph-stack text-base",title:N(o)("CAPTAIN.RESPONSES.STATUS.TITLE")},null,8,EUe),Re(" "+A(N(o)(`CAPTAIN.RESPONSES.STATUS.${e.status.toUpperCase()}`)),1)])):w("",!0)]),h("div",TUe,[g[9]||(g[9]=h("i",{class:"i-ph-calendar-dot"},null,-1)),Re(" "+A(u.value),1)])]))]}),_:1},8,["class"])}}},yUe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},SUe={key:1,class:"flex flex-col gap-3 min-h-48"},AUe={__name:"RelatedResponses",props:{captainDocument:{type:Object,required:!0}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=pt(),r=X(null),l=Oe("captainResponses/getUIFlags"),c=Oe("captainResponses/getRecords"),u=C(()=>l.value.fetchingList),d=()=>{o("close")};return dt(()=>{i.dispatch("captainResponses/get",{assistantId:s.captainDocument.assistant.id,documentId:s.captainDocument.id})}),t({dialogRef:r}),(m,f)=>(p(),$(cs,{ref_key:"dialogRef",ref:r,type:"edit",title:N(a)("CAPTAIN.DOCUMENTS.RELATED_RESPONSES.TITLE"),description:N(a)("CAPTAIN.DOCUMENTS.RELATED_RESPONSES.DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,"overflow-y-auto":"",width:"3xl",onClose:d},{default:K(()=>[u.value?(p(),v("div",yUe,[y(gs)])):(p(),v("div",SUe,[(p(!0),v(pe,null,Ne(N(c),g=>(p(),$(I_,{id:g.id,key:g.id,question:g.question,status:g.status,answer:g.answer,assistant:g.assistant,"created-at":g.created_at,"updated-at":g.updated_at,compact:""},null,8,["id","question","status","answer","assistant","created-at","updated-at"]))),128))]))]),_:1},8,["title","description"]))}},IUe={class:"flex flex-col gap-1"},CUe={for:"assistant",class:"mb-0.5 text-sm font-medium text-n-slate-12"},OUe={class:"flex items-center justify-between w-full gap-3"},NUe={__name:"DocumentForm",emits:["submit","cancel"],setup(e,{emit:t}){const n=t,{t:s}=Me(),o={uiFlags:Oe("captainDocuments/getUIFlags"),assistants:Oe("captainAssistants/getRecords")},i=ls({...{name:"",assistantId:null}}),r={url:{required:Ye,url:Ic,minLength:Qt(1)},assistantId:{required:Ye}},l=C(()=>o.assistants.value.map(S=>({value:S.id,label:S.name}))),c=bt(r,i),u=C(()=>o.uiFlags.value.creatingItem),d=(S,_)=>c.value[S].$error?s(`CAPTAIN.DOCUMENTS.FORM.${_}.ERROR`):"",m=C(()=>({url:d("url","URL"),assistantId:d("assistantId","ASSISTANT")})),f=()=>n("cancel"),g=()=>({external_link:i.url,assistant_id:i.assistantId}),T=async()=>{await c.value.$validate()&&n("submit",g())};return(S,_)=>(p(),v("form",{class:"flex flex-col gap-4",onSubmit:Fe(T,["prevent"])},[y(_n,{modelValue:i.url,"onUpdate:modelValue":_[0]||(_[0]=E=>i.url=E),label:N(s)("CAPTAIN.DOCUMENTS.FORM.URL.LABEL"),placeholder:N(s)("CAPTAIN.DOCUMENTS.FORM.URL.PLACEHOLDER"),message:m.value.url,"message-type":m.value.url?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),h("div",IUe,[h("label",CUe,A(N(s)("CAPTAIN.DOCUMENTS.FORM.ASSISTANT.LABEL")),1),y(Ai,{id:"assistant",modelValue:i.assistantId,"onUpdate:modelValue":_[1]||(_[1]=E=>i.assistantId=E),options:l.value,"has-error":!!m.value.assistantId,placeholder:N(s)("CAPTAIN.DOCUMENTS.FORM.ASSISTANT.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:m.value.assistantId},null,8,["modelValue","options","has-error","placeholder","message"])]),h("div",OUe,[y(oe,{type:"button",variant:"faded",color:"slate",label:N(s)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:f},null,8,["label"]),y(oe,{type:"submit",label:N(s)("CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":u.value,disabled:u.value},null,8,["label","is-loading","disabled"])])],32))}},Rm="CAPTAIN.DOCUMENTS.CREATE",wUe={__name:"CreateDocumentDialog",emits:["close"],setup(e,{expose:t,emit:n}){const s=n,{t:o}=Me(),a=pt(),i=X(null),r=X(null),l=async d=>{var m;try{await a.dispatch("captainDocuments/create",d),ce(o(`${Rm}.SUCCESS_MESSAGE`)),i.value.close()}catch(f){const g=((m=f==null?void 0:f.response)==null?void 0:m.message)||o(`${Rm}.ERROR_MESSAGE`);ce(g)}},c=()=>{s("close")},u=()=>{i.value.close()};return t({dialogRef:i}),(d,m)=>(p(),$(cs,{ref_key:"dialogRef",ref:i,title:d.$t(`${Rm}.TITLE`),description:d.$t("CAPTAIN.DOCUMENTS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:c},{footer:K(()=>m[0]||(m[0]=[])),default:K(()=>[y(NUe,{ref_key:"documentForm",ref:r,onSubmit:l,onCancel:u},null,512)]),_:1},8,["title","description"]))}},OI={__name:"AssistantSelector",props:{assistantId:{type:[String,Number],required:!0}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=X(!1),i=Oe("captainAssistants/getRecords"),r=C(()=>[{label:o("CAPTAIN.RESPONSES.FILTER.ALL_ASSISTANTS"),value:"all",action:"filter"},...i.value.map(u=>({value:u.id,label:u.name,action:"filter"}))]),l=C(()=>{const u=r.value.find(d=>d.value===n.assistantId);return o("CAPTAIN.RESPONSES.FILTER.ASSISTANT",{selected:u?u.label:""})}),c=({value:u})=>{a.value=!1,s("update",u)};return(u,d)=>(p(),$(N(il),{onTrigger:d[1]||(d[1]=m=>a.value=!1)},{default:K(()=>[y(oe,{label:l.value,icon:"i-lucide-chevron-down",size:"sm",color:"slate","trailing-icon":"",class:"max-w-48",onClick:d[0]||(d[0]=m=>a.value=!a.value)},null,8,["label"]),a.value?(p(),$(Hs,{key:0,"menu-items":r.value,class:"mt-2",onAction:c},null,8,["menu-items"])):w("",!0)]),_:1}))}},RUe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},xUe={__name:"DocumentPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>(p(),v(pe,null,[y(S_,{title:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/document-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/document-dark.svg","learn-more-url":"https://chwt.app/captain-document",class:"mb-8"},null,8,["title","note"]),y(Ri,{title:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.TITLE"),subtitle:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":K(()=>[h("div",RUe,[(p(!0),v(pe,null,Ne(N(R7e).slice(0,5),(i,r)=>(p(),$(II,{id:i.id,key:`document-${r}`,name:i.name,assistant:i.assistant,"external-link":i.external_link,"created-at":i.created_at},null,8,["id","name","assistant","external-link","created-at"]))),128))])]),actions:K(()=>[y(oe,{label:o.$t("CAPTAIN.DOCUMENTS.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},$Ue={__name:"LimitBanner",setup(e){const t=xn(),{accountId:n}=zn(),{documentLimits:s,fetchLimits:o}=Cg(),a=()=>{t.push({name:"billing_settings_index",params:{accountId:n.value}})},i=C(()=>{if(!s.value)return!1;const{currentAvailable:r}=s.value;return r===0});return dt(o),(r,l)=>re((p(),$(Zd,{color:"amber","action-label":r.$t("CAPTAIN.PAYWALL.UPGRADE_NOW"),onAction:a},{default:K(()=>[Re(A(r.$t("CAPTAIN.BANNER.DOCUMENTS")),1)]),_:1},8,["action-label"])),[[Jt,i.value]])}},MUe={key:0,class:"mb-4 -mt-3 flex gap-3"},LUe={class:"flex flex-col gap-4"},kUe={__name:"Index",setup(e){const t=pt(),n=Oe("captainDocuments/getUIFlags"),s=Oe("captainDocuments/getRecords"),o=Oe("captainAssistants/getRecords"),a=C(()=>n.value.fetchingList),i=Oe("captainDocuments/getMeta"),r=X("all"),l=X(null),c=X(null),u=()=>{c.value.dialogRef.open()},d=X(!1),m=X(!1),f=X(null),g=X(null),T=C(()=>o.value.length===0?!1:!a.value),S=()=>{d.value=!0,tn(()=>g.value.dialogRef.open())},_=()=>{m.value=!0,tn(()=>f.value.dialogRef.open())},E=()=>{d.value=!1},b=()=>{m.value=!1},I=({action:F,id:D})=>{l.value=s.value.find(V=>D===V.id),tn(()=>{F==="delete"?u():F==="viewRelatedQuestions"&&S()})},R=(F=1)=>{const D={page:F};r.value!=="all"&&(D.assistantId=r.value),t.dispatch("captainDocuments/get",D)},O=F=>{r.value=F,R()},x=F=>R(F),L=()=>{var F,D;((F=s.value)==null?void 0:F.length)===0&&((D=i.value)==null?void 0:D.page)>1&&x(i.value.page-1)};return dt(()=>{o.value.length||t.dispatch("captainAssistants/get"),R()}),(F,D)=>(p(),$(zc,{"header-title":F.$t("CAPTAIN.DOCUMENTS.HEADER"),"button-label":F.$t("CAPTAIN.DOCUMENTS.ADD_NEW"),"button-policy":["administrator"],"total-count":N(i).totalCount,"current-page":N(i).page,"show-pagination-footer":!a.value&&!!N(s).length,"is-fetching":a.value,"is-empty":!N(s).length,"feature-flag":N(_t).CAPTAIN,"onUpdate:currentPage":x,onClick:_},{knowMore:K(()=>[y(A_,{"button-label":F.$t("CAPTAIN.HEADER_KNOW_MORE"),title:F.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:F.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/document-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/document-popover-dark.svg","learn-more-url":"https://chwt.app/captain-document"},null,8,["button-label","title","note"])]),emptyState:K(()=>[y(xUe,{onClick:_})]),paywall:K(()=>[y(y_)]),controls:K(()=>[T.value?(p(),v("div",MUe,[y(OI,{"assistant-id":r.value,onUpdate:O},null,8,["assistant-id"])])):w("",!0)]),body:K(()=>[y($Ue,{class:"mb-5"}),h("div",LUe,[(p(!0),v(pe,null,Ne(N(s),V=>(p(),$(II,{id:V.id,key:V.id,name:V.name||V.external_link,"external-link":V.external_link,assistant:V.assistant,"created-at":V.created_at,onAction:I},null,8,["id","name","external-link","assistant","created-at"]))),128))])]),default:K(()=>[d.value?(p(),$(AUe,{key:0,ref_key:"relationQuestionDialog",ref:g,"captain-document":l.value,onClose:E},null,8,["captain-document"])):w("",!0),m.value?(p(),$(wUe,{key:1,ref_key:"createDocumentDialog",ref:f,onClose:b},null,512)):w("",!0),l.value?(p(),$(Ip,{key:2,ref_key:"deleteDocumentDialog",ref:c,entity:l.value,type:"Documents",onDeleteSuccess:L},null,8,["entity"])):w("",!0)]),_:1},8,["header-title","button-label","total-count","current-page","show-pagination-footer","is-fetching","is-empty","feature-flag"]))}},DUe={__name:"BulkDeleteDialog",props:{type:{type:String,required:!0},bulkIds:{type:Object,required:!0}},emits:["deleteSuccess"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=pt(),r=X(null),l=C(()=>s.type.toUpperCase()),c=async d=>{if(d)try{await i.dispatch("captainBulkActions/handleBulkDelete",Array.from(s.bulkIds)),o("deleteSuccess"),ce(a(`CAPTAIN.${l.value}.BULK_DELETE.SUCCESS_MESSAGE`))}catch{ce(a(`CAPTAIN.${l.value}.BULK_DELETE.ERROR_MESSAGE`))}},u=async()=>{var d;await c(Array.from(s.bulkIds)),(d=r.value)==null||d.close()};return t({dialogRef:r}),(d,m)=>(p(),$(cs,{ref_key:"bulkDeleteDialogRef",ref:r,type:"alert",title:N(a)(`CAPTAIN.${l.value}.BULK_DELETE.TITLE`),description:N(a)(`CAPTAIN.${l.value}.BULK_DELETE.DESCRIPTION`),"confirm-button-label":N(a)(`CAPTAIN.${l.value}.BULK_DELETE.CONFIRM`),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},PUe={class:"flex flex-col gap-1"},BUe={for:"assistant",class:"mb-0.5 text-sm font-medium text-n-slate-12"},FUe={class:"flex items-center justify-between w-full gap-3"},UUe={__name:"ResponseForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},response:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a={uiFlags:Oe("captainResponses/getUIFlags"),assistants:Oe("captainAssistants/getRecords")},r=ls({...{question:"",answer:"",assistantId:null}}),l={question:{required:Ye,minLength:Qt(1)},answer:{required:Ye,minLength:Qt(1)},assistantId:{required:Ye}},c=C(()=>a.assistants.value.map(E=>({value:E.id,label:E.name}))),u=bt(l,r),d=C(()=>a.uiFlags.value.creatingItem),m=(E,b)=>u.value[E].$error?o(`CAPTAIN.RESPONSES.FORM.${b}.ERROR`):"",f=C(()=>({question:m("question","QUESTION"),answer:m("answer","ANSWER"),assistantId:m("assistantId","ASSISTANT")})),g=()=>s("cancel"),T=()=>({question:r.question,answer:r.answer,assistant_id:r.assistantId}),S=async()=>{await u.value.$validate()&&s("submit",T())},_=E=>{if(!E)return;const{question:b,answer:I,assistant:R}=E;Object.assign(r,{question:b,answer:I,assistantId:R.id})};return ct(()=>n.response,E=>{n.mode==="edit"&&E&&_(E)},{immediate:!0}),(E,b)=>(p(),v("form",{class:"flex flex-col gap-4",onSubmit:Fe(S,["prevent"])},[y(_n,{modelValue:r.question,"onUpdate:modelValue":b[0]||(b[0]=I=>r.question=I),label:N(o)("CAPTAIN.RESPONSES.FORM.QUESTION.LABEL"),placeholder:N(o)("CAPTAIN.RESPONSES.FORM.QUESTION.PLACEHOLDER"),message:f.value.question,"message-type":f.value.question?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),y(_a,{modelValue:r.answer,"onUpdate:modelValue":b[1]||(b[1]=I=>r.answer=I),label:N(o)("CAPTAIN.RESPONSES.FORM.ANSWER.LABEL"),placeholder:N(o)("CAPTAIN.RESPONSES.FORM.ANSWER.PLACEHOLDER"),message:f.value.answer,"max-length":1e4,"message-type":f.value.answer?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),h("div",PUe,[h("label",BUe,A(N(o)("CAPTAIN.RESPONSES.FORM.ASSISTANT.LABEL")),1),y(Ai,{id:"assistant",modelValue:r.assistantId,"onUpdate:modelValue":b[2]||(b[2]=I=>r.assistantId=I),options:c.value,"has-error":!!f.value.assistantId,placeholder:N(o)("CAPTAIN.RESPONSES.FORM.ASSISTANT.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:f.value.assistantId},null,8,["modelValue","options","has-error","placeholder","message"])]),h("div",FUe,[y(oe,{type:"button",variant:"faded",color:"slate",label:N(o)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 n-blue-text hover:bg-n-alpha-3",onClick:g},null,8,["label"]),y(oe,{type:"submit",label:N(o)(`CAPTAIN.FORM.${e.mode.toUpperCase()}`),class:"w-full","is-loading":d.value,disabled:d.value},null,8,["label","is-loading","disabled"])])],32))}},GUe={__name:"CreateResponseDialog",props:{selectedResponse:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,o=n,{t:a}=Me(),i=pt(),r=X(null),l=X(null),c=T=>i.dispatch("captainResponses/update",{id:s.selectedResponse.id,...T}),u=C(()=>`CAPTAIN.RESPONSES.${s.type.toUpperCase()}`),d=T=>i.dispatch("captainResponses/create",T),m=async T=>{var S;try{s.type==="edit"?await c(T):await d(T),ce(a(`${u.value}.SUCCESS_MESSAGE`)),r.value.close()}catch(_){const E=((S=_==null?void 0:_.response)==null?void 0:S.message)||a(`${u.value}.ERROR_MESSAGE`);ce(E)}},f=()=>{o("close")},g=()=>{r.value.close()};return t({dialogRef:r}),(T,S)=>(p(),$(cs,{ref_key:"dialogRef",ref:r,title:T.$t(`${u.value}.TITLE`),description:T.$t("CAPTAIN.RESPONSES.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:f},{footer:K(()=>S[0]||(S[0]=[])),default:K(()=>[y(UUe,{ref_key:"responseForm",ref:l,mode:e.type,response:e.selectedResponse,onSubmit:m,onCancel:g},null,8,["mode","response"])]),_:1},8,["title","description"]))}},VUe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},HUe={__name:"ResponsePageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(o,a)=>(p(),v(pe,null,[y(S_,{title:o.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:o.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-dark.svg","learn-more-url":"https://chwt.app/captain-faq",class:"mb-8"},null,8,["title","note"]),y(Ri,{title:o.$t("CAPTAIN.RESPONSES.EMPTY_STATE.TITLE"),subtitle:o.$t("CAPTAIN.RESPONSES.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":K(()=>[h("div",VUe,[(p(!0),v(pe,null,Ne(N(x7e).slice(0,5),(i,r)=>(p(),$(I_,{id:i.id,key:`response-${r}`,question:i.question,answer:i.answer,status:i.status,assistant:i.assistant,"created-at":i.created_at,"updated-at":i.created_at},null,8,["id","question","answer","status","assistant","created-at","updated-at"]))),128))])]),actions:K(()=>[y(oe,{label:o.$t("CAPTAIN.RESPONSES.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},WUe={key:0,class:"flex gap-3"},zUe={key:0,class:"flex items-center gap-3"},jUe={class:"flex items-center gap-3"},KUe={class:"flex items-center gap-1.5"},YUe={class:"text-sm text-n-slate-12 font-medium tabular-nums"},XUe={class:"text-sm text-n-slate-10 tabular-nums"},qUe={class:"flex gap-3 items-center"},ZUe={class:"flex flex-col gap-4"},QUe={__name:"Index",setup(e){const t=xn(),n=pt(),s=Oe("captainResponses/getUIFlags"),o=Oe("captainAssistants/getRecords"),a=Oe("captainResponses/getMeta"),i=Oe("captainResponses/getRecords"),r=C(()=>s.value.fetchingList),l=X(null),c=X(null),u=X(null),d=X("all"),m=X("all"),f=X(""),{t:g}=Me(),T=X(null),S=X(!1),_=C(()=>o.value.length===0?!1:!r.value),E=C(()=>["all","pending","approved"].map(ee=>({label:g(`CAPTAIN.RESPONSES.STATUS.${ee.toUpperCase()}`),value:ee,action:"filter"}))),b=C(()=>{const ee=E.value.find(ge=>ge.value===d.value);return g("CAPTAIN.RESPONSES.FILTER.STATUS",{selected:ee?ee.label:""})}),I=()=>{c.value.dialogRef.open()},R=async()=>{try{await n.dispatch("captainResponses/update",{id:l.value.id,status:"approved"}),ce(g("CAPTAIN.RESPONSES.EDIT.APPROVE_SUCCESS_MESSAGE"))}catch(ee){const ge=(ee==null?void 0:ee.message)||g("CAPTAIN.RESPONSES.EDIT.ERROR_MESSAGE");ce(ge)}finally{l.value=null}},O=()=>{f.value="create",tn(()=>T.value.dialogRef.open())},x=()=>{f.value="edit",tn(()=>T.value.dialogRef.open())},L=({action:ee,id:ge})=>{l.value=i.value.find(Ee=>ge===Ee.id),tn(()=>{ee==="delete"&&I(),ee==="edit"&&x(),ee==="approve"&&R()})},F=({id:ee,type:ge})=>{ge==="Conversation"&&t.push({name:"inbox_conversation",params:{conversation_id:ee}})},D=()=>{f.value="",l.value=null},V=(ee=1)=>{const ge={page:ee};d.value!=="all"&&(ge.status=d.value),m.value!=="all"&&(ge.assistantId=m.value),n.dispatch("captainResponses/get",ge)},B=X(new Set),P=X(null),k=C(()=>{var Ee;const ee=B.value.size,ge=((Ee=i.value)==null?void 0:Ee.length)||0;return{hasSelected:ee>0,isIndeterminate:ee>0&&ee<ge,allSelected:ge>0&&ee===ge}}),U=C({get:()=>k.value.allSelected,set:ee=>{B.value=ee?new Set(i.value.map(ge=>ge.id)):new Set}}),j=C(()=>{var ge;const ee=((ge=i.value)==null?void 0:ge.length)||0;return k.value.allSelected?g("CAPTAIN.RESPONSES.UNSELECT_ALL",{count:ee}):g("CAPTAIN.RESPONSES.SELECT_ALL",{count:ee})}),z=(ee,ge)=>{P.value=ee?ge:null},Y=ee=>{const ge=new Set(B.value);ge[ge.has(ee)?"delete":"add"](ee),B.value=ge},te=async()=>{try{await n.dispatch("captainBulkActions/handleBulkApprove",Array.from(B.value)),B.value=new Set,ce(g("CAPTAIN.RESPONSES.BULK_APPROVE.SUCCESS_MESSAGE"))}catch(ee){ce((ee==null?void 0:ee.message)||g("CAPTAIN.RESPONSES.BULK_APPROVE.ERROR_MESSAGE"))}},Z=ee=>{const ge=k.value.allSelected,Ee=B.value.size>0;V(ee),(ge||Ee)&&(B.value=new Set)},G=()=>{var ee,ge;((ee=i.value)==null?void 0:ee.length)===0&&((ge=a.value)==null?void 0:ge.page)>1&&Z(a.value.page-1)},H=()=>{var ee,ge;if(((ee=i.value)==null?void 0:ee.length)===0){const Ee=((ge=a.value)==null?void 0:ge.page)>1?a.value.page-1:a.value.page;V(Ee)}B.value=new Set},W=({value:ee})=>{d.value=ee,S.value=!1,V()},J=ee=>{m.value=ee,V()};return dt(()=>{n.dispatch("captainAssistants/get"),V()}),(ee,ge)=>(p(),$(zc,{"total-count":N(a).totalCount,"current-page":N(a).page,"button-policy":["administrator"],"header-title":ee.$t("CAPTAIN.RESPONSES.HEADER"),"button-label":ee.$t("CAPTAIN.RESPONSES.ADD_NEW"),"is-fetching":r.value,"is-empty":!N(i).length,"show-pagination-footer":!r.value&&!!N(i).length,"feature-flag":N(_t).CAPTAIN,"onUpdate:currentPage":Z,onClick:O},{knowMore:K(()=>[y(A_,{"button-label":ee.$t("CAPTAIN.HEADER_KNOW_MORE"),title:ee.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:ee.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-popover-dark.svg","learn-more-url":"https://chwt.app/captain-faq"},null,8,["button-label","title","note"])]),emptyState:K(()=>[y(HUe,{onClick:O})]),paywall:K(()=>[y(y_)]),controls:K(()=>[_.value?(p(),v("div",{key:0,class:se(["mb-4 -mt-3 flex justify-between items-center w-fit py-1",{"ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1 rounded-lg outline outline-1 outline-n-weak bg-n-solid-3":k.value.hasSelected}])},[k.value.hasSelected?w("",!0):(p(),v("div",WUe,[y(N(il),{onTrigger:ge[1]||(ge[1]=Ee=>S.value=!1)},{default:K(()=>[y(oe,{label:b.value,icon:"i-lucide-chevron-down",size:"sm",color:"slate","trailing-icon":"",class:"max-w-48",onClick:ge[0]||(ge[0]=Ee=>S.value=!S.value)},null,8,["label"]),S.value?(p(),$(Hs,{key:0,"menu-items":E.value,class:"mt-2",onAction:W},null,8,["menu-items"])):w("",!0)]),_:1}),y(OI,{"assistant-id":m.value,onUpdate:J},null,8,["assistant-id"])])),y(qs,{name:"slide-fade","enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform ltr:-translate-x-4 rtl:translate-x-4","enter-to-class":"opacity-100 transform translate-x-0","leave-active-class":"hidden opacity-0"},{default:K(()=>[k.value.hasSelected?(p(),v("div",zUe,[h("div",jUe,[h("div",KUe,[y(CI,{modelValue:U.value,"onUpdate:modelValue":ge[2]||(ge[2]=Ee=>U.value=Ee),indeterminate:k.value.isIndeterminate},null,8,["modelValue","indeterminate"]),h("span",YUe,A(j.value),1)]),h("span",XUe,A(ee.$t("CAPTAIN.RESPONSES.SELECTED",{count:B.value.size})),1)]),ge[5]||(ge[5]=h("div",{class:"h-4 w-px bg-n-strong"},null,-1)),h("div",qUe,[y(oe,{label:ee.$t("CAPTAIN.RESPONSES.BULK_APPROVE_BUTTON"),sm:"",ghost:"",icon:"i-lucide-check",class:"!px-1.5",onClick:te},null,8,["label"]),ge[4]||(ge[4]=h("div",{class:"h-4 w-px bg-n-strong"},null,-1)),y(oe,{label:ee.$t("CAPTAIN.RESPONSES.BULK_DELETE_BUTTON"),sm:"",ruby:"",ghost:"",class:"!px-1.5",icon:"i-lucide-trash",onClick:ge[3]||(ge[3]=Ee=>u.value.dialogRef.open())},null,8,["label"])])])):w("",!0)]),_:1})],2)):w("",!0)]),body:K(()=>[y(SI,{class:"mb-5"}),h("div",ZUe,[(p(!0),v(pe,null,Ne(N(i),Ee=>(p(),$(I_,{id:Ee.id,key:Ee.id,question:Ee.question,answer:Ee.answer,assistant:Ee.assistant,documentable:Ee.documentable,status:Ee.status,"created-at":Ee.created_at,"updated-at":Ee.updated_at,"is-selected":B.value.has(Ee.id),selectable:P.value===Ee.id||B.value.size>0,onAction:L,onNavigate:F,onSelect:Y,onHover:le=>z(le,Ee.id)},null,8,["id","question","answer","assistant","documentable","status","created-at","updated-at","is-selected","selectable","onHover"]))),128))])]),default:K(()=>[l.value?(p(),$(Ip,{key:0,ref_key:"deleteDialog",ref:c,entity:l.value,type:"Responses",onDeleteSuccess:G},null,8,["entity"])):w("",!0),B.value?(p(),$(DUe,{key:1,ref_key:"bulkDeleteDialog",ref:u,"bulk-ids":B.value,type:"Responses",onDeleteSuccess:H},null,8,["bulk-ids"])):w("",!0),f.value?(p(),$(GUe,{key:2,ref_key:"createDialog",ref:T,type:f.value,"selected-response":l.value,onClose:D},null,8,["type","selected-response"])):w("",!0)]),_:1},8,["total-count","current-page","header-title","button-label","is-fetching","is-empty","show-pagination-footer","feature-flag"]))}},JUe=[{path:At("accounts/:accountId/captain/assistants"),component:j7e,name:"captain_assistants_index",meta:{permissions:["administrator","agent"],featureFlag:_t.CAPTAIN,installationTypes:[is.CLOUD,is.ENTERPRISE]}},{path:At("accounts/:accountId/captain/assistants/:assistantId"),component:$Fe,name:"captain_assistants_edit",meta:{permissions:["administrator","agent"],featureFlag:_t.CAPTAIN,installationTypes:[is.CLOUD,is.ENTERPRISE]}},{path:At("accounts/:accountId/captain/assistants/:assistantId/inboxes"),component:jFe,name:"captain_assistants_inboxes_index",meta:{permissions:["administrator","agent"],featureFlag:_t.CAPTAIN,installationTypes:[is.CLOUD,is.ENTERPRISE]}},{path:At("accounts/:accountId/captain/documents"),component:kUe,name:"captain_documents_index",meta:{permissions:["administrator","agent"],featureFlag:_t.CAPTAIN,installationTypes:[is.CLOUD,is.ENTERPRISE]}},{path:At("accounts/:accountId/captain/responses"),component:QUe,name:"captain_responses_index",meta:{permissions:["administrator","agent"],featureFlag:_t.CAPTAIN,installationTypes:[is.CLOUD,is.ENTERPRISE]}}],NI=Symbol("SidebarControl");function C_(){const e=_o(NI,null);if(e===null)throw new Error("Component is missing a parent <Sidebar /> component.");const t=xn(),{shouldShow:n}=cl(),s=l=>{var c;return l&&((c=t.resolve(l))==null?void 0:c.path)||"/"},o=l=>{var c,u;return l?((u=(c=t.resolve(l))==null?void 0:c.meta)==null?void 0:u.permissions)??[]:[]},a=l=>{var c,u;return l&&((u=(c=t.resolve(l))==null?void 0:c.meta)==null?void 0:u.featureFlag)||""},i=l=>{var c,u;return l?((u=(c=t.resolve(l))==null?void 0:c.meta)==null?void 0:u.installationTypes)||[]:[]};return{...e,resolvePath:s,resolvePermissions:o,resolveFeatureFlag:a,isAllowed:l=>{const c=o(l),u=a(l),d=i(l);return n(u,c,d)}}}function eGe(e){Pn(NI,e)}function tGe(e){const t={$mod:navigator.platform.includes("Mac")?"⌘":"Ctrl",shift:"⇧",alt:"⌥",ctrl:"Ctrl",cmd:"⌘",option:"⌥",enter:"↩",tab:"⇥",esc:"⎋"};return C(()=>e.map(n=>t[n.toLowerCase()]||n).join("").toUpperCase())}function nGe(e){const t=sn(),n=xn(),s=i=>t.name===i,o=i=>{s(i)||n.push({name:i})};return $s({"$mod+Slash":{action:()=>e(!0)},"$mod+Escape":{action:()=>e(!1)},"Alt+KeyC":{action:()=>o("home")},"Alt+KeyV":{action:()=>o("contacts_dashboard")},"Alt+KeyR":{action:()=>o("account_overview_reports")},"Alt+KeyS":{action:()=>o("agent_list")}})}const sGe={key:0,class:"relative flex items-center gap-2"},aGe={key:1,class:"size-2 -top-px ltr:-right-px rtl:-left-px bg-n-brand absolute rounded-full border border-n-solid-2"},oGe={class:"text-sm font-medium leading-5 flex-grow"},iGe={__name:"SidebarGroupHeader",props:{to:{type:[Object,String],default:""},label:{type:String,default:""},icon:{type:[String,Object],default:""},expandable:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},hasActiveChild:{type:Boolean,default:!1},getterKeys:{type:Object,default:()=>({})}},emits:["toggle"],setup(e,{emit:t}){const n=e,s=t,o=Oe(n.getterKeys.badge);return(a,i)=>(p(),$(vs(e.to?"router-link":"div"),{class:se(["flex items-center gap-2 px-2 py-1.5 rounded-lg h-8",{"n-blue-text bg-n-alpha-2 font-medium":e.isActive&&!e.hasActiveChild,"text-n-slate-12 font-medium":e.hasActiveChild,"text-n-slate-11 hover:bg-n-alpha-2":!e.isActive&&!e.hasActiveChild}]),role:"button",to:e.to,title:e.label,onClick:i[1]||(i[1]=Fe(r=>s("toggle"),["stop"]))},{default:K(()=>[e.icon?(p(),v("div",sGe,[e.icon?(p(),$(Rt,{key:0,icon:e.icon,class:"size-4"},null,8,["icon"])):w("",!0),N(o)?(p(),v("span",aGe)):w("",!0)])):w("",!0),h("span",oGe,A(e.label),1),e.expandable?re((p(),v("span",{key:1,class:"i-lucide-chevron-up size-3",onClick:i[0]||(i[0]=Fe(r=>s("toggle"),["stop"]))},null,512)),[[Jt,e.isExpanded]]):w("",!0)]),_:1},8,["to","title","class"]))}},rGe={class:"flex-1 truncate min-w-0"},wI={__name:"SidebarGroupLeaf",props:{label:{type:String,required:!0},to:{type:[String,Object],required:!0},icon:{type:[String,Object],default:null},active:{type:Boolean,default:!1},component:{type:Function,default:null}},setup(e){const t=e,{resolvePermissions:n,resolveFeatureFlag:s}=C_(),o=C(()=>typeof t.component=="function"||c0(t.component));return(a,i)=>(p(),$(ja,{permissions:N(n)(e.to),"feature-flag":N(s)(e.to),as:"li",class:"py-0.5 ltr:pl-3 rtl:pr-3 rtl:mr-3 ltr:ml-3 relative text-n-slate-11 child-item before:bg-n-slate-4 after:bg-transparent after:border-n-slate-4 before:left-0 rtl:before:right-0"},{default:K(()=>[(p(),$(vs(e.to?"router-link":"div"),{to:e.to,title:e.label,class:se(["flex h-8 items-center gap-2 px-2 py-1 rounded-lg max-w-[9.438rem] hover:bg-gradient-to-r from-transparent via-n-slate-3/70 to-n-slate-3/70 group",{"n-blue-text bg-n-alpha-2 active":e.active}])},{default:K(()=>[o.value?(p(),$(vs(e.component),{key:0,label:e.label,icon:e.icon,active:e.active},null,8,["label","icon","active"])):(p(),v(pe,{key:1},[e.icon?(p(),$(Rt,{key:0,icon:e.icon,class:"size-4 inline-block"},null,8,["icon"])):w("",!0),h("div",rGe,A(e.label),1)],64))]),_:1},8,["to","title","class"]))]),_:1},8,["permissions","feature-flag"]))}},lGe={class:"flex items-center gap-2 px-2 py-1.5 rounded-lg h-8 text-n-slate-10 select-none pointer-events-none"},cGe={class:"text-sm font-medium leading-5 flex-grow"},uGe={__name:"SidebarGroupSeparator",props:{label:{type:String,default:""},icon:{type:String,default:""}},setup(e){return(t,n)=>(p(),v("div",lGe,[e.icon?(p(),$(Rt,{key:0,icon:e.icon,class:"size-4"},null,8,["icon"])):w("",!0),h("span",cGe,A(e.label),1)]))}},dGe={key:1,class:"m-0 list-none reset-base relative group"},pGe={key:0,class:"absolute bg-gradient-to-t from-n-solid-2 w-full h-12 to-transparent -bottom-1 pointer-events-none flex items-end justify-end px-2 animate-fade-in-up"},hGe={__name:"SidebarSubGroup",props:{isExpanded:{type:Boolean,default:!1},label:{type:String,required:!0},icon:{type:[Object,String],required:!0},children:{type:Array,default:void 0},activeChild:{type:Object,default:void 0}},setup(e){const t=e,{isAllowed:n}=C_(),s=X(null),o=C(()=>t.children.filter(l=>l.to&&n(l.to))),a=C(()=>o.value.length>0),i=C(()=>o.value.length>7),r=X(!1);return Zs(s,"scroll",()=>{const{scrollHeight:l,scrollTop:c,clientHeight:u}=s.value;r.value=l-c===u}),(l,c)=>(p(),v(pe,null,[a.value?re((p(),$(uGe,{key:0,label:e.label,icon:e.icon,class:"my-1"},null,8,["label","icon"])),[[Jt,e.isExpanded]]):w("",!0),e.children.length?(p(),v("ul",dGe,[h("div",{ref_key:"scrollableContainer",ref:s,class:se({"max-h-[calc(14rem+16px)] overflow-y-scroll no-scrollbar":i.value})},[(p(!0),v(pe,null,Ne(e.children,u=>{var d,m;return re((p(),$(wI,fs({ref_for:!0},u,{key:u.name,active:((d=e.activeChild)==null?void 0:d.name)===u.name}),null,16,["active"])),[[Jt,e.isExpanded||((m=e.activeChild)==null?void 0:m.name)===u.name]])}),128))],2),i.value&&e.isExpanded?re((p(),v("div",pGe,c[0]||(c[0]=[h("svg",{width:"16",height:"24",viewBox:"0 0 16 24",fill:"none",class:"text-n-slate-9 opacity-50 group-hover:opacity-100",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M4 4L8 8L12 4",stroke:"currentColor",opacity:"0.5","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),h("path",{d:"M4 10L8 14L12 10",stroke:"currentColor",opacity:"0.75","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),h("path",{d:"M4 16L8 20L12 16",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),512)),[[Jt,!r.value]]):w("",!0)])):w("",!0)],64))}},mGe={class:"py-1 pl-3 text-n-slate-10 border rounded-lg border-dashed text-center border-n-alpha-2 text-xs h-8 grid place-content-center select-none pointer-events-none"},fGe={__name:"SidebarGroupEmptyLeaf",setup(e){const{t}=Me();return(n,s)=>(p(),v("li",mGe,[We(n.$slots,"default",{},()=>[Re(A(N(t)("SIDEBAR.NO_ITEMS")),1)])]))}},gGe={key:0,class:"grid m-0 list-none sidebar-group-children"},_Ge={key:1},vGe={__name:"SidebarGroup",props:{name:{type:String,required:!0},label:{type:String,required:!0},icon:{type:[String,Object,Function],default:null},to:{type:Object,default:null},activeOn:{type:Array,default:()=>[]},children:{type:Array,default:void 0},getterKeys:{type:Object,default:()=>({})}},setup(e){const t=e,{expandedItem:n,setExpandedItem:s,resolvePath:o,resolvePermissions:a,resolveFeatureFlag:i,isAllowed:r}=C_(),l=C(()=>{var I;return((I=t.children)==null?void 0:I.flatMap(R=>R.children||R))||[]}),c=sn(),u=xn(),d=C(()=>n.value===t.name),m=C(()=>t.children),f=C(()=>Array.isArray(t.children)&&t.children.length>0),g=C(()=>f.value?t.children.filter(I=>I.to&&r(I.to)):[]),T=C(()=>g.value.length>0),S=C(()=>t.to?c.path===o(t.to)?!0:t.activeOn.includes(c.name):!1),_=C(()=>{const I=l.value.find(O=>O.to&&c.path===o(O.to));if(I)return I;const R=l.value.filter(O=>{var x;return(x=O.activeOn)==null?void 0:x.includes(c.name)});return R.length>0?R.find(x=>Object.keys(x.to.params).map(L=>String(x.to.params[L])===String(c.params[L])).every(L=>L))??R[0]:l.value.find(O=>O.to&&c.path.startsWith(o(O.to)))}),E=C(()=>_.value!==void 0),b=()=>{if(T.value&&!d.value&&!E.value){const I=g.value[0];u.push(I.to)}s(t.name)};return dt(async()=>{await tn(),E.value&&s(t.name)}),(I,R)=>!f.value||T.value?(p(),$(ja,{key:0,permissions:N(a)(e.to),"feature-flag":N(i)(e.to),as:"li",class:"grid gap-1 text-sm cursor-pointer select-none"},{default:K(()=>[y(iGe,{icon:e.icon,name:e.name,label:e.label,to:e.to,"getter-keys":e.getterKeys,"is-active":S.value,"has-active-child":E.value,expandable:f.value,"is-expanded":d.value,onToggle:b},null,8,["icon","name","label","to","getter-keys","is-active","has-active-child","expandable","is-expanded"]),f.value?re((p(),v("ul",gGe,[(p(!0),v(pe,null,Ne(e.children,O=>{var x,L;return p(),v(pe,{key:O.name},[O.children?(p(),$(hGe,{key:0,label:O.label,icon:O.icon,children:O.children,"is-expanded":d.value,"active-child":_.value},null,8,["label","icon","children","is-expanded","active-child"])):N(r)(O.to)?re((p(),$(wI,fs({key:1,ref_for:!0},O,{active:((x=_.value)==null?void 0:x.name)===O.name}),null,16,["active"])),[[Jt,d.value||((L=_.value)==null?void 0:L.name)===O.name]]):w("",!0)],64)}),128))],512)),[[Jt,d.value||E.value]]):m.value&&d.value?(p(),v("ul",_Ge,[y(fGe)])):w("",!0)]),_:1},8,["permissions","feature-flag"])):w("",!0)}},bGe={},EGe={class:"h-0 border-b border-n-strong -mx-2"};function TGe(e,t){return p(),v("div",EGe)}const yGe=Ae(bGe,[["render",TGe]]),SGe={class:"grid gap-0"},AGe={class:"flex-grow flex items-center gap-1"},IGe={class:"flex gap-1 items-center flex-grow text-sm"},CGe={class:"p-1 flex-shrink-0"},OGe={class:"flex-grow flex items-center gap-1"},NGe={__name:"SidebarProfileMenuStatus",setup(e){const{t}=Me(),n=pt(),s=Oe("getCurrentUserAvailability"),o=Oe("getCurrentAccountId"),a=Oe("getCurrentUserAutoOffline"),{isImpersonating:i}=QT(),{AVAILABILITY_STATUS_KEYS:r}=It,l=C(()=>[t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]),c=["bg-n-teal-9","bg-n-amber-9","bg-n-slate-9"],u=C(()=>l.value.map((g,T)=>({label:g,value:r[T],color:c[T],icon:yn("span",{class:[c[T],"size-[12px] rounded"]}),active:s.value===r[T]}))),d=C(()=>u.value.find(g=>g.active));function m(g){if(i.value){ce(t("PROFILE_SETTINGS.FORM.AVAILABILITY.IMPERSONATING_ERROR"));return}try{n.dispatch("updateAvailability",{availability:g,account_id:o.value})}catch{ce(t("PROFILE_SETTINGS.FORM.AVAILABILITY.SET_AVAILABILITY_ERROR"))}}function f(g){n.dispatch("updateAutoOffline",{accountId:o.value,autoOffline:g})}return(g,T)=>{const S=M("woot-switch"),_=qe("tooltip");return p(),$(N(rl),null,{default:K(()=>[h("div",SGe,[y(N(Ra),{"preserve-open":""},{default:K(()=>[h("div",AGe,A(g.$t("SIDEBAR.SET_YOUR_AVAILABILITY")),1),y(N(cr),null,{trigger:K(({toggle:E})=>[y(oe,{size:"sm",color:"slate",variant:"faded",class:"min-w-[96px]",icon:"i-lucide-chevron-down","trailing-icon":"",onClick:E},{default:K(()=>[h("div",IGe,[h("div",CGe,[h("div",{class:se(["size-2 rounded-sm",d.value.color])},null,2)]),h("span",null,A(d.value.label),1)])]),_:2},1032,["onClick"])]),default:K(()=>[y(N(ur),{class:"min-w-32 z-20"},{default:K(()=>[(p(!0),v(pe,null,Ne(u.value,E=>(p(),$(N(Ra),{key:E.value,label:E.label,icon:E.icon,class:"cursor-pointer",onClick:b=>m(E.value)},null,8,["label","icon","onClick"]))),128))]),_:1})]),_:1})]),_:1}),y(N(Ra),null,{default:K(()=>[h("div",OGe,[Re(A(g.$t("SIDEBAR.SET_AUTO_OFFLINE.TEXT"))+" ",1),re(y(Rt,{icon:"i-lucide-info",class:"size-4 text-n-slate-10"},null,512),[[_,g.$t("SIDEBAR.SET_AUTO_OFFLINE.INFO_SHORT"),void 0,{top:!0}]])]),y(S,{class:"flex-shrink-0","model-value":N(a),onInput:f},null,8,["model-value"])]),_:1})])]),_:1})}}},wGe=["onClick"],RGe={class:"min-w-0"},xGe={class:"text-n-slate-12 text-sm leading-4 font-medium truncate"},$Ge={class:"text-n-slate-11 text-xs truncate"},MGe=Object.assign({inheritAttrs:!1},{__name:"SidebarProfileMenu",emits:["close","openKeyShortcutModal"],setup(e,{emit:t}){const n=t,{t:s}=Me(),o=Oe("getCurrentUser"),a=Oe("getCurrentUserAvailability"),i=Oe("getCurrentAccountId"),r=Oe("globalConfig/get"),l=Oe("accounts/isFeatureEnabledonAccount"),c=C(()=>l.value(i.value,_t.CONTACT_CHATWOOT_SUPPORT_TEAM)&&r.value.chatwootInboxToken),u=C(()=>[{show:c.value,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.CONTACT_SUPPORT"),icon:"i-lucide-life-buoy",click:()=>{window.$chatwoot.toggle()}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS"),icon:"i-lucide-keyboard",click:()=>{n("openKeyShortcutModal")}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.PROFILE_SETTINGS"),icon:"i-lucide-user-pen",link:{name:"profile_settings_index"}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.APPEARANCE"),icon:"i-lucide-palette",click:()=>{document.querySelector("ninja-keys").open({parent:"appearance_settings"})}},{show:!0,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.DOCS"),icon:"i-lucide-book",link:"https://www.chatwoot.com/hc/user-guide/en",nativeLink:!0,target:"_blank"},{show:o.value.type==="SuperAdmin",showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.SUPER_ADMIN_CONSOLE"),icon:"i-lucide-castle",link:"/super_admin",nativeLink:!0,target:"_blank"},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.LOGOUT"),icon:"i-lucide-power",click:Kr.logout}]),d=C(()=>u.value.filter(m=>m.show));return(m,f)=>(p(),$(N(cr),{class:se(["relative w-full min-w-0",{"z-20":m.isOpen}]),onClose:f[0]||(f[0]=g=>n("close"))},{trigger:K(({toggle:g,isOpen:T})=>[h("button",{class:se(["flex gap-2 items-center rounded-lg cursor-pointer text-left w-full hover:bg-n-alpha-1 p-1",{"bg-n-alpha-1":T}]),onClick:g},[y(ts,{size:32,name:N(o).available_name,src:N(o).avatar_url,status:N(a),class:"flex-shrink-0","rounded-full":""},null,8,["name","src","status"]),h("div",RGe,[h("div",xGe,A(N(o).available_name),1),h("div",$Ge,A(N(o).email),1)])],10,wGe)]),default:K(()=>[y(N(ur),{class:"ltr:left-0 rtl:right-0 bottom-12 z-50 w-80 mb-2"},{default:K(()=>[y(NGe),y(N(yGe)),(p(!0),v(pe,null,Ne(d.value,g=>(p(),$(Zm,{key:g.label,"show-on-custom-branded-instance":g.showOnCustomBrandedInstance},{default:K(()=>[g.show?(p(),$(N(Ra),fs({key:0,ref_for:!0},g),null,16)):w("",!0)]),_:2},1032,["show-on-custom-branded-instance"]))),128))]),_:1})]),_:1},8,["class"]))}}),LGe={class:"flex-1 truncate min-w-0"},kGe={key:0,class:"grid place-content-center size-5 bg-n-ruby-5/60 rounded-full"},DGe={__name:"ChannelLeaf",props:{label:{type:String,required:!0},active:{type:Boolean,default:!1},inbox:{type:Object,required:!0}},setup(e){const t=e,n=C(()=>t.inbox.reauthorization_required);return(s,o)=>{const a=qe("tooltip");return p(),v(pe,null,[h("span",{class:se(["size-4 grid place-content-center rounded-full bg-n-alpha-2",{"bg-n-solid-blue":e.active}])},[y(My,{inbox:e.inbox,class:"size-3"},null,8,["inbox"])],2),h("div",LGe,A(e.label),1),n.value?re((p(),v("div",kGe,[y(Rt,{icon:"i-woot-alert",class:"size-3 text-n-ruby-9"})])),[[a,s.$t("SIDEBAR.REAUTHORIZE"),void 0,{"top-end":!0}]]):w("",!0)],64)}}},PGe=["data-account-id","onClick"],BGe={class:"text-sm font-medium leading-5 text-n-slate-12 truncate","aria-live":"polite"},FGe={key:0,"aria-hidden":"true",class:"i-lucide-chevron-down size-4 text-n-slate-10 flex-shrink-0"},UGe=["for"],GGe=["title"],VGe=["title"],HGe={__name:"SidebarAccountSwitcher",emits:["showCreateAccountModal"],setup(e,{emit:t}){const n=t,{t:s}=Me(),{accountId:o,currentAccount:a}=zn(),i=Oe("getCurrentUser"),r=Oe("globalConfig/get"),l=Oe("getUserAccounts"),c=C(()=>l.value.length>1&&a.value.name),u=C(()=>[...i.value.accounts||[]].sort((f,g)=>f.name.localeCompare(g.name))),d=f=>{const g=`/app/accounts/${f}/dashboard`;window.location.href=g},m=()=>{n("showCreateAccountModal")};return(f,g)=>(p(),$(N(cr),null,{trigger:K(({toggle:T,isOpen:S})=>[h("button",{id:"sidebar-account-switcher","data-account-id":N(o),"aria-haspopup":"listbox","aria-controls":"account-options",class:se(["flex items-center gap-2 justify-between w-full rounded-lg px-2",[S&&"bg-n-alpha-1",c.value?"hover:bg-n-alpha-1 cursor-pointer":"cursor-default"]]),onClick:()=>c.value&&T()},[h("span",BGe,A(N(a).name),1),c.value?(p(),v("span",FGe)):w("",!0)],10,PGe)]),default:K(()=>[c.value?(p(),$(N(ur),{key:0,class:"min-w-80 z-50"},{default:K(()=>[y(N(rl),{title:N(s)("SIDEBAR_ITEMS.SWITCH_ACCOUNT")},{default:K(()=>[(p(!0),v(pe,null,Ne(u.value,T=>(p(),$(N(Ra),{id:`account-${T.id}`,key:T.id,class:"cursor-pointer",onClick:S=>d(T.id)},{label:K(()=>[h("div",{for:T.name,class:"text-left rtl:text-right flex gap-2 items-center"},[h("span",{class:"text-n-slate-12 max-w-36 truncate min-w-0",title:T.name},A(T.name),9,GGe),g[0]||(g[0]=h("div",{class:"flex-shrink-0 w-px h-3 bg-n-strong"},null,-1)),h("span",{class:"text-n-slate-11 max-w-24 truncate capitalize",title:T.name},A(T.custom_role_id?T.custom_role.name:T.role),9,VGe)],8,UGe),re(y(Rt,{icon:"i-lucide-check",class:"text-n-teal-11 size-5"},null,512),[[Jt,T.id===N(o)]])]),_:2},1032,["id","onClick"]))),128))]),_:1},8,["title"]),N(r).createNewAccountFromDashboard?(p(),$(N(Ra),{key:0},{default:K(()=>[y(oe,{color:"slate",variant:"faded",class:"w-full",size:"sm",onClick:m},{default:K(()=>[Re(A(N(s)("CREATE_ACCOUNT.NEW_ACCOUNT")),1)]),_:1})]),_:1})):w("",!0)]),_:1})):w("",!0)]),_:1}))}},WGe=["src"],zGe={__name:"Logo",setup(e){const t=If(),n=Oe("globalConfig/get");return(s,o)=>N(n).logoThumbnail?(p(),v("img",fs({key:0},N(t),{src:N(n).logoThumbnail}),null,16,WGe)):(p(),v("svg",fs({key:1},N(t),{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),o[0]||(o[0]=[Mr('<g clip-path="url(#woot-logo-clip-2342424e23u32098)"><path d="M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z" fill="#2781F6"></path><path d="M11.4172 11.4172H7.70831C5.66383 11.4172 4 9.75328 4 7.70828C4 5.66394 5.66383 4 7.70835 4C9.75339 4 11.4172 5.66394 11.4172 7.70828V11.4172Z" fill="white" stroke="white" stroke-width="0.1875"></path></g><defs><clipPath id="woot-logo-clip-2342424e23u32098"><rect width="16" height="16" fill="white"></rect></clipPath></defs>',2)]),16))}},jGe={class:"w-[200px] bg-n-solid-2 rtl:border-l ltr:border-r border-n-weak h-screen flex flex-col text-sm pb-1"},KGe={class:"grid gap-2 mt-2 mb-4"},YGe={class:"flex items-center min-w-0 gap-2 px-2"},XGe={class:"grid flex-shrink-0 size-6 place-content-center"},qGe={class:"flex gap-2 px-2"},ZGe={class:"flex-grow text-left"},QGe={class:"hidden tracking-wide pointer-events-none select-none text-n-slate-10"},JGe={class:"grid flex-grow gap-2 px-2 pb-5 overflow-y-scroll no-scrollbar"},eVe={class:"flex flex-col gap-1.5 m-0 list-none"},tVe={class:"p-1 border-t border-n-weak shadow-[0px_-2px_4px_0px_rgba(27,28,29,0.02)] flex-shrink-0 flex justify-between gap-2 items-center"},nVe={__name:"Sidebar",emits:["closeKeyShortcutModal","openKeyShortcutModal","showCreateAccountModal"],setup(e,{emit:t}){const n=t,{accountScopedRoute:s}=zn(),o=So(),a=tGe(["$mod","k"]),{t:i}=Me();nGe(b=>{n(b?"openKeyShortcutModal":"closeKeyShortcutModal")});const l=Jx("next-sidebar-expanded-item",null,sessionStorage);eGe({expandedItem:l,setExpandedItem:b=>{l.value=l.value===b?null:b}});const u=Oe("inboxes/getInboxes"),d=Oe("labels/getLabelsOnSidebar"),m=Oe("teams/getMyTeams"),f=Oe("customViews/getContactCustomViews"),g=Oe("customViews/getConversationCustomViews");dt(()=>{o.dispatch("labels/get"),o.dispatch("inboxes/get"),o.dispatch("notifications/unReadCount"),o.dispatch("teams/get"),o.dispatch("attributes/get"),o.dispatch("customViews/get","conversation"),o.dispatch("customViews/get","contact")});const T=C(()=>u.value.slice().sort((b,I)=>b.name.localeCompare(I.name))),S=()=>[{name:"Reports Agent",label:i("SIDEBAR.REPORTS_AGENT"),to:s("agent_reports_index"),activeOn:["agent_reports_show"]},{name:"Reports Label",label:i("SIDEBAR.REPORTS_LABEL"),to:s("label_reports_index")},{name:"Reports Inbox",label:i("SIDEBAR.REPORTS_INBOX"),to:s("inbox_reports_index"),activeOn:["inbox_reports_show"]},{name:"Reports Team",label:i("SIDEBAR.REPORTS_TEAM"),to:s("team_reports_index"),activeOn:["team_reports_show"]}],_=C(()=>S()),E=C(()=>[{name:"Inbox",label:i("SIDEBAR.INBOX"),icon:"i-lucide-inbox",to:s("inbox_view"),activeOn:["inbox_view","inbox_view_conversation"],getterKeys:{badge:"notifications/getHasUnreadNotifications"}},{name:"Conversation",label:i("SIDEBAR.CONVERSATIONS"),icon:"i-lucide-message-circle",children:[{name:"All",label:i("SIDEBAR.ALL_CONVERSATIONS"),activeOn:["inbox_conversation"],to:s("home")},{name:"Mentions",label:i("SIDEBAR.MENTIONED_CONVERSATIONS"),activeOn:["conversation_through_mentions"],to:s("conversation_mentions")},{name:"Unattended",activeOn:["conversation_through_unattended"],label:i("SIDEBAR.UNATTENDED_CONVERSATIONS"),to:s("conversation_unattended")},{name:"Folders",label:i("SIDEBAR.CUSTOM_VIEWS_FOLDER"),icon:"i-lucide-folder",activeOn:["conversations_through_folders"],children:g.value.map(b=>({name:`${b.name}-${b.id}`,label:b.name,to:s("folder_conversations",{id:b.id})}))},{name:"Teams",label:i("SIDEBAR.TEAMS"),icon:"i-lucide-users",activeOn:["conversations_through_team"],children:m.value.map(b=>({name:`${b.name}-${b.id}`,label:b.name,to:s("team_conversations",{teamId:b.id})}))},{name:"Channels",label:i("SIDEBAR.CHANNELS"),icon:"i-lucide-mailbox",activeOn:["conversation_through_inbox"],children:T.value.map(b=>({name:`${b.name}-${b.id}`,label:b.name,to:s("inbox_dashboard",{inbox_id:b.id}),component:I=>yn(DGe,{label:I.label,active:I.active,inbox:b})}))},{name:"Labels",label:i("SIDEBAR.LABELS"),icon:"i-lucide-tag",activeOn:["conversations_through_label"],children:d.value.map(b=>({name:`${b.title}-${b.id}`,label:b.title,icon:yn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:b.color}}),to:s("label_conversations",{label:b.title})}))}]},{name:"Captain",icon:"i-woot-captain",label:i("SIDEBAR.CAPTAIN"),children:[{name:"Assistants",label:i("SIDEBAR.CAPTAIN_ASSISTANTS"),to:s("captain_assistants_index")},{name:"Documents",label:i("SIDEBAR.CAPTAIN_DOCUMENTS"),to:s("captain_documents_index")},{name:"Responses",label:i("SIDEBAR.CAPTAIN_RESPONSES"),to:s("captain_responses_index")}]},{name:"Contacts",label:i("SIDEBAR.CONTACTS"),icon:"i-lucide-contact",children:[{name:"All Contacts",label:i("SIDEBAR.ALL_CONTACTS"),to:s("contacts_dashboard_index",{},{page:1,search:void 0}),activeOn:["contacts_dashboard_index","contacts_edit"]},{name:"Active",label:i("SIDEBAR.ACTIVE"),to:s("contacts_dashboard_active"),activeOn:["contacts_dashboard_active"]},{name:"Segments",icon:"i-lucide-group",label:i("SIDEBAR.CUSTOM_VIEWS_SEGMENTS"),children:f.value.map(b=>({name:`${b.name}-${b.id}`,label:b.name,to:s("contacts_dashboard_segments_index",{segmentId:b.id},{page:1}),activeOn:["contacts_dashboard_segments_index","contacts_edit_segment"]}))},{name:"Tagged With",icon:"i-lucide-tag",label:i("SIDEBAR.TAGGED_WITH"),children:d.value.map(b=>({name:`${b.title}-${b.id}`,label:b.title,icon:yn("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:b.color}}),to:s("contacts_dashboard_labels_index",{label:b.title},{page:1,search:void 0}),activeOn:["contacts_dashboard_labels_index","contacts_edit_label"]}))}]},{name:"Reports",label:i("SIDEBAR.REPORTS"),icon:"i-lucide-chart-spline",children:[{name:"Report Overview",label:i("SIDEBAR.REPORTS_OVERVIEW"),to:s("account_overview_reports")},{name:"Report Conversation",label:i("SIDEBAR.REPORTS_CONVERSATION"),to:s("conversation_reports")},..._.value,{name:"Reports CSAT",label:i("SIDEBAR.CSAT"),to:s("csat_reports")},{name:"Reports SLA",label:i("SIDEBAR.REPORTS_SLA"),to:s("sla_reports")},{name:"Reports Bot",label:i("SIDEBAR.REPORTS_BOT"),to:s("bot_reports")}]},{name:"Campaigns",label:i("SIDEBAR.CAMPAIGNS"),icon:"i-lucide-megaphone",children:[{name:"Live chat",label:i("SIDEBAR.LIVE_CHAT"),to:s("campaigns_livechat_index")},{name:"SMS",label:i("SIDEBAR.SMS"),to:s("campaigns_sms_index")}]},{name:"Portals",label:i("SIDEBAR.HELP_CENTER.TITLE"),icon:"i-lucide-library-big",children:[{name:"Articles",label:i("SIDEBAR.HELP_CENTER.ARTICLES"),activeOn:["portals_articles_index","portals_articles_new","portals_articles_edit"],to:s("portals_index",{navigationPath:"portals_articles_index"})},{name:"Categories",label:i("SIDEBAR.HELP_CENTER.CATEGORIES"),activeOn:["portals_categories_index","portals_categories_articles_index","portals_categories_articles_edit"],to:s("portals_index",{navigationPath:"portals_categories_index"})},{name:"Locales",label:i("SIDEBAR.HELP_CENTER.LOCALES"),activeOn:["portals_locales_index"],to:s("portals_index",{navigationPath:"portals_locales_index"})},{name:"Settings",label:i("SIDEBAR.HELP_CENTER.SETTINGS"),activeOn:["portals_settings_index"],to:s("portals_index",{navigationPath:"portals_settings_index"})}]},{name:"Settings",label:i("SIDEBAR.SETTINGS"),icon:"i-lucide-bolt",children:[{name:"Settings Account Settings",label:i("SIDEBAR.ACCOUNT_SETTINGS"),icon:"i-lucide-briefcase",to:s("general_settings_index")},{name:"Settings Agents",label:i("SIDEBAR.AGENTS"),icon:"i-lucide-square-user",to:s("agent_list")},{name:"Settings Teams",label:i("SIDEBAR.TEAMS"),icon:"i-lucide-users",to:s("settings_teams_list")},{name:"Settings Inboxes",label:i("SIDEBAR.INBOXES"),icon:"i-lucide-inbox",to:s("settings_inbox_list")},{name:"Settings Labels",label:i("SIDEBAR.LABELS"),icon:"i-lucide-tags",to:s("labels_list")},{name:"Settings Custom Attributes",label:i("SIDEBAR.CUSTOM_ATTRIBUTES"),icon:"i-lucide-code",to:s("attributes_list")},{name:"Settings Automation",label:i("SIDEBAR.AUTOMATION"),icon:"i-lucide-workflow",to:s("automation_list")},{name:"Settings Agent Bots",label:i("SIDEBAR.AGENT_BOTS"),icon:"i-lucide-bot",to:s("agent_bots")},{name:"Settings Macros",label:i("SIDEBAR.MACROS"),icon:"i-lucide-toy-brick",to:s("macros_wrapper")},{name:"Settings Canned Responses",label:i("SIDEBAR.CANNED_RESPONSES"),icon:"i-lucide-message-square-quote",to:s("canned_list")},{name:"Settings Integrations",label:i("SIDEBAR.INTEGRATIONS"),icon:"i-lucide-blocks",to:s("settings_applications")},{name:"Settings Audit Logs",label:i("SIDEBAR.AUDIT_LOGS"),icon:"i-lucide-briefcase",to:s("auditlogs_list")},{name:"Settings Custom Roles",label:i("SIDEBAR.CUSTOM_ROLES"),icon:"i-lucide-shield-plus",to:s("custom_roles_list")},{name:"Settings Sla",label:i("SIDEBAR.SLA"),icon:"i-lucide-clock-alert",to:s("sla_list")},{name:"Settings Billing",label:i("SIDEBAR.BILLING"),icon:"i-lucide-credit-card",to:s("billing_settings_index")}]}]);return(b,I)=>{const R=M("RouterLink");return p(),v("aside",jGe,[h("section",KGe,[h("div",YGe,[h("div",XGe,[y(zGe,{class:"size-4"})]),I[2]||(I[2]=h("div",{class:"flex-shrink-0 w-px h-3 bg-n-strong"},null,-1)),y(HGe,{class:"flex-grow min-w-0 -mx-1",onShowCreateAccountModal:I[0]||(I[0]=O=>n("showCreateAccountModal"))})]),h("div",qGe,[y(R,{to:{name:"search"},class:"flex items-center w-full gap-2 px-2 py-1 rounded-lg h-7 outline outline-1 outline-n-weak bg-n-solid-3 dark:bg-n-black/30"},{default:K(()=>[I[3]||(I[3]=h("span",{class:"flex-shrink-0 i-lucide-search size-4 text-n-slate-11"},null,-1)),h("span",ZGe,A(N(i)("COMBOBOX.SEARCH_PLACEHOLDER")),1),h("span",QGe,A(N(a)),1)]),_:1}),y(yp,{"align-position":"right"},{trigger:K(({toggle:O})=>[y(oe,{icon:"i-lucide-pen-line",color:"slate",size:"sm",class:"!h-7 !bg-n-solid-3 dark:!bg-n-black/30 !outline-n-weak !text-n-slate-11",onClick:O},null,8,["onClick"])]),_:1})])]),h("nav",JGe,[h("ul",eVe,[(p(!0),v(pe,null,Ne(E.value,O=>(p(),$(vGe,fs({key:O.name,ref_for:!0},O),null,16))),128))])]),h("section",tVe,[y(MGe,{onOpenKeyShortcutModal:I[1]||(I[1]=O=>n("openKeyShortcutModal"))})])])}}},Un={ALT:"Alt / ⌥",WIN:"Win / ⌘",SHIFT:"Shift",SLASH:"/",UP:"Up",DOWN:"Down"},sVe=[{id:1,label:"OPEN_CONVERSATION",displayKeys:[Un.ALT,"J",Un.SLASH,Un.ALT,"K"],keySet:["Alt+KeyJ","Alt+KeyK"]},{id:2,label:"RESOLVE_AND_NEXT",displayKeys:[Un.WIN,Un.ALT,"E"],keySet:["$mod+Alt+KeyE"]},{id:3,label:"NAVIGATE_DROPDOWN",displayKeys:[Un.UP,Un.DOWN],keySet:["ArrowUp","ArrowDown"]},{id:4,label:"RESOLVE_CONVERSATION",displayKeys:[Un.ALT,"E"],keySet:["Alt+KeyE"]},{id:5,label:"GO_TO_CONVERSATION_DASHBOARD",displayKeys:[Un.ALT,"C"],keySet:["Alt+KeyC"]},{id:6,label:"ADD_ATTACHMENT",displayKeys:[Un.WIN,Un.ALT,"A"],keySet:["$mod+Alt+KeyA"]},{id:7,label:"GO_TO_CONTACTS_DASHBOARD",displayKeys:[Un.ALT,"V"],keySet:["Alt+KeyV"]},{id:8,label:"TOGGLE_SIDEBAR",displayKeys:[Un.ALT,"O"],keySet:["Alt+KeyO"]},{id:9,label:"GO_TO_REPORTS_SIDEBAR",displayKeys:[Un.ALT,"R"],keySet:["Alt+KeyR"]},{id:10,label:"MOVE_TO_NEXT_TAB",displayKeys:[Un.ALT,"N"],keySet:["Alt+KeyN"]},{id:11,label:"GO_TO_SETTINGS",displayKeys:[Un.ALT,"S"],keySet:["Alt+KeyS"]},{id:12,label:"SWITCH_TO_PRIVATE_NOTE",displayKeys:[Un.ALT,"P"],keySet:["Alt+KeyP"]},{id:13,label:"SWITCH_TO_REPLY",displayKeys:[Un.ALT,"L"],keySet:["Alt+KeyL"]},{id:14,label:"TOGGLE_SNOOZE_DROPDOWN",displayKeys:[Un.ALT,"M"],keySet:["Alt+KeyM"]}],aVe={class:"flex flex-col h-auto overflow-auto"},oVe={class:"grid grid-cols-2 px-8 pt-0 pb-4 mt-6 gap-x-5 gap-y-3"},iVe={class:"flex justify-between items-center min-w-[25rem]"},rVe={class:"text-sm text-slate-800 dark:text-slate-100"},lVe={class:"flex items-center gap-2 mb-1 ml-2"},cVe={class:"grid grid-cols-2 px-8 pt-0 pb-8 gap-x-5 gap-y-3"},uVe={class:"text-sm text-slate-800 min-w-[36px] dark:text-slate-100"},dVe={class:"flex items-center gap-2 mb-1 ml-2"},pVe={key:1,class:"flex items-center text-sm font-semibold text-slate-800 dark:text-slate-100"},hVe={__name:"WootKeyShortcutModal",props:{show:Boolean},emits:["close"],setup(e){const{t}=Me(),n=X(null),s=C(()=>a=>t(`KEYBOARD_SHORTCUTS.TITLE.${a.label}`)),o=C(()=>a=>n.value===XC&&a.some(i=>qC.has(i)));return dt(async()=>{n.value=await ZC()}),(a,i)=>{const r=M("woot-modal-header"),l=M("woot-modal");return p(),$(l,{show:e.show,size:"medium","on-close":()=>a.$emit("close")},{default:K(()=>[h("div",aVe,[y(r,{"header-title":a.$t("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS")},null,8,["header-title"]),h("div",oVe,[h("div",iVe,[h("h5",rVe,A(a.$t("KEYBOARD_SHORTCUTS.TOGGLE_MODAL")),1),h("div",lVe,[y(Br,{"custom-class":"min-h-[28px] min-w-[60px] normal-case key"},{default:K(()=>[Re(A(N(Un).WIN),1)]),_:1}),y(Br,{"custom-class":"min-h-[28px] min-w-[36px] key"},{default:K(()=>[Re(A(N(Un).SLASH),1)]),_:1})])])]),h("div",cVe,[(p(!0),v(pe,null,Ne(N(sVe),c=>(p(),v("div",{key:c.id,class:"flex justify-between items-center min-w-[25rem]"},[h("h5",uVe,A(s.value(c)),1),h("div",dVe,[o.value(c.keySet)?(p(),$(Br,{key:0,"custom-class":"min-h-[28px] min-w-[36px] key"},{default:K(()=>[Re(A(N(Un).SHIFT),1)]),_:1})):w("",!0),(p(!0),v(pe,null,Ne(c.displayKeys,(u,d)=>(p(),v(pe,{key:d},[u!==N(Un).SLASH?(p(),$(Br,{key:0,"custom-class":"min-h-[28px] min-w-[36px] key normal-case"},{default:K(()=>[Re(A(u),1)]),_:2},1024)):(p(),v("span",pVe,A(u),1))],64))),128))])]))),128))])])]),_:1},8,["show","on-close"])}}},mVe=Ae(hVe,[["__scopeId","data-v-940a1293"]]),fVe={props:{showAccountModal:{type:Boolean,default:!0}},emits:["closeAccountModal","showCreateAccountModal"],computed:{...lt({accountId:"getCurrentAccountId",currentUser:"getCurrentUser",globalConfig:"globalConfig/get"})},methods:{onChangeAccount(e){const t=`/app/accounts/${e}/dashboard`;window.location.href=t}}},gVe={class:"px-8 py-4"},_Ve=["id"],vVe=["onClick"],bVe={class:"w-full"},EVe=["for"],TVe={class:"text-lg font-medium leading-5 text-slate-700 dark:text-slate-100 hover:underline-offset-4"},yVe={class:"text-xs font-medium lowercase text-slate-500 dark:text-slate-500 hover:underline-offset-4"},SVe={key:0,class:"flex items-center justify-end gap-2 px-8 pt-4 pb-8"};function AVe(e,t,n,s,o,a){const i=M("woot-modal-header"),r=M("fluent-icon"),l=M("woot-modal");return p(),$(l,{show:n.showAccountModal,"on-close":()=>e.$emit("closeAccountModal")},{default:K(()=>[y(i,{"header-title":e.$t("SIDEBAR_ITEMS.CHANGE_ACCOUNTS"),"header-content":e.$t("SIDEBAR_ITEMS.SELECTOR_SUBTITLE")},null,8,["header-title","header-content"]),h("div",gVe,[(p(!0),v(pe,null,Ne(e.currentUser.accounts,c=>(p(),v("div",{id:`account-${c.id}`,key:c.id,class:"pt-0 pb-0"},[h("button",{class:"flex items-center justify-between w-full px-4 py-3 rounded-lg cursor-pointer expanded clear link hover:underline hover:bg-slate-25 dark:hover:bg-slate-900",onClick:u=>a.onChangeAccount(c.id)},[h("span",bVe,[h("label",{for:c.name,class:"text-left rtl:text-right"},[h("div",TVe,A(c.name),1),h("div",yVe,A(c.custom_role_id?c.custom_role.name:c.role),1)],8,EVe)]),re(y(r,{class:"text-slate-800 dark:text-slate-100",icon:"checkmark-circle",type:"solid",size:"24"},null,512),[[Jt,c.id===e.accountId]])],8,vVe)],8,_Ve))),128))]),e.globalConfig.createNewAccountFromDashboard?(p(),v("div",SVe,[h("button",{class:"w-full button success large expanded nice",onClick:t[0]||(t[0]=c=>e.$emit("showCreateAccountModal"))},A(e.$t("CREATE_ACCOUNT.NEW_ACCOUNT")),1)])):w("",!0)]),_:1},8,["show","on-close"])}const IVe=Ae(fVe,[["render",AVe]]),CVe={components:{Thumbnail:Hn,NextButton:oe},props:{notificationItem:{type:Object,default:()=>{}}},emits:["openNotification"],computed:{notificationAssignee(){var t;const{primary_actor:e}=this.notificationItem;return(t=e==null?void 0:e.meta)==null?void 0:t.assignee},hasNotificationAssignee(){return!!this.notificationAssignee},notificationAssigneeName(){var e;return((e=this.notificationAssignee)==null?void 0:e.name)||""},notificationAssigneeThumbnail(){var e;return((e=this.notificationAssignee)==null?void 0:e.thumbnail)||""}},methods:{dynamicTime:rs,onClickOpenNotification(){this.$emit("openNotification",this.notificationItem)}}},OVe={class:"w-full"},NVe={class:"flex-row items-center p-2.5 leading-[1.4] border-b border-solid border-slate-50 dark:border-slate-700 flex w-full hover:bg-slate-75 dark:hover:bg-slate-900 hover:rounded-md"},wVe={key:0,class:"w-2 h-2 rounded-full bg-woot-500"},RVe={key:1,class:"flex w-2"},xVe={class:"flex-col ml-2.5 overflow-hidden w-full flex justify-between"},$Ve={class:"flex justify-between"},MVe={class:"flex items-center"},LVe={class:"font-bold text-slate-800 dark:text-slate-100"},kVe={class:"text-xxs p-0.5 px-1 my-0 mx-2 bg-slate-50 dark:bg-slate-700 rounded-md"},DVe={key:0},PVe={class:"flex w-full"},BVe={class:"overflow-hidden font-normal text-slate-700 dark:text-slate-200 whitespace-nowrap text-ellipsis"},FVe={class:"flex mt-1 font-semibold text-slate-500 dark:text-slate-400 text-xxs"};function UVe(e,t,n,s,o,a){const i=M("Thumbnail"),r=M("NextButton");return p(),v("div",OVe,[y(r,{link:"",slate:"",class:"!w-full !h-auto",onClick:t[0]||(t[0]=l=>a.onClickOpenNotification())},{default:K(()=>[h("div",NVe,[n.notificationItem.read_at?(p(),v("div",RVe)):(p(),v("div",wVe)),h("div",xVe,[h("div",$Ve,[h("div",MVe,[h("span",LVe,A(`#${n.notificationItem.primary_actor?n.notificationItem.primary_actor.id:e.$t("NOTIFICATIONS_PAGE.DELETE_TITLE")}`),1),h("span",kVe,A(e.$t(`NOTIFICATIONS_PAGE.TYPE_LABEL.${n.notificationItem.notification_type}`)),1)]),a.hasNotificationAssignee?(p(),v("div",DVe,[y(i,{src:a.notificationAssigneeThumbnail,size:"16px",username:a.notificationAssigneeName},null,8,["src","username"])])):w("",!0)]),h("div",PVe,[h("span",BVe,A(n.notificationItem.push_message_title),1)]),h("span",FVe,A(a.dynamicTime(n.notificationItem.last_activity_at)),1)])])]),_:1})])}const GVe=Ae(CVe,[["render",UVe]]),VVe={components:{NotificationPanelItem:GVe,Spinner:bs,EmptyState:pr,NextButton:oe},props:{notifications:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!0},onClickNotification:{type:Function,default:()=>{}},inLastPage:{type:Boolean,default:!1}},emits:["close"],computed:{showEmptyResult(){return!this.isLoading&&this.notifications.length===0}},methods:{openNotificationPage(){this.$route.name!=="notifications_index"&&this.$router.push({name:"notifications_index"}),this.$emit("close")}}},HVe={class:"flex-col py-2 px-2.5 overflow-auto h-full flex"},WVe={key:2,class:"flex items-center justify-center mx-2 my-12 text-sm font-medium"};function zVe(e,t,n,s,o,a){const i=M("NotificationPanelItem"),r=M("EmptyState"),l=M("NextButton"),c=M("Spinner");return p(),v("div",HVe,[(p(!0),v(pe,null,Ne(n.notifications,u=>re((p(),$(i,{key:u.id,"notification-item":u,onOpenNotification:n.onClickNotification},null,8,["notification-item","onOpenNotification"])),[[Jt,!n.isLoading]])),128)),a.showEmptyResult?(p(),$(r,{key:0,title:e.$t("NOTIFICATIONS_PAGE.UNREAD_NOTIFICATION.EMPTY_MESSAGE")},null,8,["title"])):w("",!0),!n.isLoading&&n.inLastPage?(p(),$(l,{key:1,ghost:"",class:"!w-full mt-3",label:e.$t("NOTIFICATIONS_PAGE.UNREAD_NOTIFICATION.ALL_NOTIFICATIONS"),onClick:a.openNotificationPage},null,8,["label","onClick"])):w("",!0),n.isLoading?(p(),v("div",WVe,[y(c),h("span",null,A(e.$t("NOTIFICATIONS_PAGE.UNREAD_NOTIFICATION.LOADING_UNREAD_MESSAGE")),1)])):w("",!0)])}const jVe=Ae(VVe,[["render",zVe]]),KVe={components:{NotificationPanelList:jVe,NextButton:oe},emits:["close"],data(){return{pageSize:15}},computed:{...lt({meta:"notifications/getMeta",records:"notifications/getNotifications",uiFlags:"notifications/getUIFlags"}),totalUnreadNotifications(){return this.meta.unreadCount},noUnreadNotificationAvailable(){return this.meta.unreadCount===0},getUnreadNotifications(){return this.records.filter(e=>e.read_at===null)},currentPage(){return Number(this.meta.currentPage)},lastPage(){return this.totalUnreadNotifications>15?Math.ceil(this.totalUnreadNotifications/this.pageSize):1},inFirstPage(){return Number(this.meta.currentPage)===1},inLastPage(){return this.currentPage===this.lastPage}},mounted(){this.$store.dispatch("notifications/get",{page:1})},methods:{onPageChange(e){this.$store.dispatch("notifications/get",{page:e})},openConversation(e){const{primary_actor_id:t,primary_actor_type:n,primary_actor:{id:s},notification_type:o}=e;Pt(ar.OPEN_CONVERSATION_VIA_NOTIFICATION,{notificationType:o}),this.$store.dispatch("notifications/read",{id:e.id,primaryActorId:t,primaryActorType:n,unreadCount:this.meta.unreadCount}),this.$router.push({name:"inbox_conversation",params:{conversation_id:s}}),this.$emit("close")},onClickNextPage(){if(!this.inLastPage){const e=this.currentPage+1;this.onPageChange(e)}},onClickPreviousPage(){if(!this.inFirstPage){const e=this.currentPage-1;this.onPageChange(e)}},onClickFirstPage(){this.inFirstPage||this.onPageChange(1)},onClickLastPage(){if(!this.inLastPage){const e=this.lastPage;this.onPageChange(e)}},onMarkAllDoneClick(){Pt(ar.MARK_AS_READ_NOTIFICATIONS),this.$store.dispatch("notifications/readAll")},openAudioNotificationSettings(){this.$router.push({name:"profile_settings_index"}),this.closeNotificationPanel(),this.$nextTick(()=>{const e=document.getElementById("profile-settings-notifications");e&&e.scrollIntoView({behavior:"smooth",block:"start"},150)})},closeNotificationPanel(){this.$emit("close")}}},YVe={class:"modal-mask"},XVe={class:"flex-col h-[90vh] w-[32.5rem] flex justify-between z-10 rounded-md shadow-md absolute bg-white dark:bg-slate-800 left-14 rtl:left-auto rtl:right-14 m-4"},qVe={class:"flex flex-row items-center justify-between w-full px-6 pt-5 pb-3 border-b border-solid border-slate-50 dark:border-slate-700"},ZVe={class:"flex items-center"},QVe={class:"text-xl font-bold text-slate-800 dark:text-slate-100"},JVe={key:0,class:"px-2 py-1 ml-2 mr-2 font-semibold rounded-md text-slate-700 dark:text-slate-200 text-xxs bg-slate-50 dark:bg-slate-700"},eHe={class:"flex gap-2"},tHe={key:0,class:"flex items-center justify-between px-5 py-1"},nHe={class:"flex"},sHe={class:"font-semibold text-xxs text-slate-500 dark:text-slate-400"},aHe={class:"flex"},oHe={key:1};function iHe(e,t,n,s,o,a){const i=M("NextButton"),r=M("NotificationPanelList"),l=qe("on-clickaway");return p(),v("div",YVe,[re((p(),v("div",XVe,[h("div",qVe,[h("div",ZVe,[h("span",QVe,A(e.$t("NOTIFICATIONS_PAGE.UNREAD_NOTIFICATION.TITLE")),1),a.totalUnreadNotifications?(p(),v("span",JVe,A(a.totalUnreadNotifications),1)):w("",!0)]),h("div",eHe,[a.noUnreadNotificationAvailable?w("",!0):(p(),$(i,{key:0,faded:"",xs:"",icon:"i-lucide-list-check","is-loading":e.uiFlags.isUpdating,label:e.$t("NOTIFICATIONS_PAGE.MARK_ALL_DONE"),onClick:a.onMarkAllDoneClick},null,8,["is-loading","label","onClick"])),y(i,{faded:"",xs:"",slate:"",icon:"i-lucide-settings",onClick:a.openAudioNotificationSettings},null,8,["onClick"]),y(i,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:a.closeNotificationPanel},null,8,["onClick"])])]),y(r,{notifications:a.getUnreadNotifications,"is-loading":e.uiFlags.isFetching,"on-click-notification":a.openConversation,"in-last-page":a.inLastPage,onClose:a.closeNotificationPanel},null,8,["notifications","is-loading","on-click-notification","in-last-page","onClose"]),e.records.length!==0?(p(),v("div",tHe,[h("div",nHe,[y(i,{ghost:"",slate:"",icon:"i-lucide-chevrons-left",disabled:a.inFirstPage,onClick:a.onClickFirstPage},null,8,["disabled","onClick"]),y(i,{ghost:"",slate:"",icon:"i-lucide-chevron-left",class:"ltr:-ml-3 rtl:-mr-3",disabled:a.inFirstPage,onClick:a.onClickPreviousPage},null,8,["disabled","onClick"])]),h("span",sHe,A(a.currentPage)+" - "+A(a.lastPage),1),h("div",aHe,[y(i,{ghost:"",slate:"",icon:"i-lucide-chevron-right",class:"ltr:-mr-3 rtl:-ml-3",disabled:a.inLastPage,onClick:a.onClickNextPage},null,8,["disabled","onClick"]),y(i,{ghost:"",slate:"",icon:"i-lucide-chevrons-right",disabled:a.inLastPage,onClick:a.onClickLastPage},null,8,["disabled","onClick"])])])):(p(),v("div",oHe))])),[[l,a.closeNotificationPanel]])])}const rHe=Ae(KVe,[["render",iHe]]),lHe={key:0,class:"mx-auto h-full pt-[clamp(3rem,15vh,12rem)]"},cHe={class:"flex flex-col gap-4 max-w-md px-8 py-6 shadow-lg bg-n-solid-1 rounded-xl outline outline-1 outline-n-container"},uHe={class:"flex flex-col gap-4"},dHe={class:"flex items-center w-full gap-2"},pHe={class:"flex items-center justify-center w-6 h-6 rounded-full bg-n-solid-blue"},hHe={class:"text-base font-medium text-n-slate-12"},mHe={class:"text-sm font-normal text-n-slate-11 mb-3"},fHe={key:0},gHe={__name:"UpgradePage",props:{bypassUpgradePage:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,s=xn(),o=pt(),{t:a}=Me(),{accountId:i,currentAccount:r}=zn(),{isAdmin:l}=ka(),c=Oe("globalConfig/isOnChatwootCloud"),u=({allowed:_,consumed:E})=>E>_,d=C(()=>{const _=r.value;if(!_)return!1;const E=new Date(_.created_at);return y0(new Date,E)<=15}),m=C(()=>{const _=r.value;if(!(_!=null&&_.limits))return"";const{conversation:E,non_web_inboxes:b,agents:I}=_.limits;let R="";return u(E)?R=a("GENERAL_SETTINGS.LIMIT_MESSAGES.CONVERSATION"):u(b)?R=a("GENERAL_SETTINGS.LIMIT_MESSAGES.INBOXES"):u(I)&&(R=a("GENERAL_SETTINGS.LIMIT_MESSAGES.AGENTS")),R}),f=C(()=>{const _=r.value;if(!(_!=null&&_.limits))return!1;const{conversation:E,non_web_inboxes:b,agents:I}=_.limits;return u(E)||u(b)||u(I)}),g=C(()=>n.bypassUpgradePage||!c.value||d.value?!1:f.value),T=()=>{o.dispatch("accounts/limits")},S=()=>{s.push({name:"billing_settings_index",params:{accountId:i.value}})};return dt(()=>T()),t({shouldShowUpgradePage:g}),(_,E)=>g.value?(p(),v("div",lHe,[h("div",cHe,[h("div",uHe,[h("div",dHe,[h("span",pHe,[y(Rt,{class:"flex-shrink-0 text-n-brand size-[14px]",icon:"i-lucide-lock-keyhole"})]),h("span",hHe,A(_.$t("GENERAL_SETTINGS.UPGRADE")),1)]),h("div",null,[h("p",mHe,A(m.value),1),N(l)?w("",!0):(p(),v("p",fHe,A(N(a)("GENERAL_SETTINGS.LIMIT_MESSAGES.NON_ADMIN")),1))])]),N(l)?(p(),$(oe,{key:0,label:_.$t("GENERAL_SETTINGS.OPEN_BILLING"),icon:"i-lucide-credit-card",onClick:E[0]||(E[0]=b=>S())},null,8,["label"])):w("",!0)])])):(p(),v(pe,{key:1},[],64))}},_He={key:0,class:"fixed bottom-4 right-4 z-50"},vHe={class:"rounded-full bg-n-alpha-2 p-1"},bHe={__name:"CopilotLauncher",setup(e){const t=sn(),{uiSettings:n,updateUISettings:s}=ln(),o=C(()=>["inbox_conversation","conversation_through_inbox","conversations_through_label","team_conversations_through_label","conversations_through_folders","conversation_through_mentions","conversation_through_unattended","conversation_through_participating","inbox_view_conversation"].includes(t.name)),a=Oe("getCurrentAccountId"),i=Oe("accounts/isFeatureEnabledonAccount"),r=C(()=>i.value(a.value,_t.CAPTAIN)&&!n.value.is_copilot_panel_open&&!o.value),l=()=>{s({is_copilot_panel_open:!n.value.is_copilot_panel_open,is_contact_sidebar_open:!1})};return(c,u)=>r.value?(p(),v("div",_He,[h("div",vHe,[y(oe,{icon:"i-woot-captain",class:"!rounded-full !bg-n-solid-3 dark:!bg-n-alpha-2 !text-n-slate-12 text-xl",lg:"",onClick:l})])])):(p(),v(pe,{key:1},[],64))}},EHe=["placeholder"],THe={__name:"CopilotInput",emits:["send"],setup(e,{emit:t}){const n=t,s=X(""),o=()=>{s.value.trim()&&(n("send",s.value),s.value="")};return(a,i)=>(p(),v("form",{class:"relative",onSubmit:Fe(o,["prevent"])},[re(h("input",{"onUpdate:modelValue":i[0]||(i[0]=r=>s.value=r),type:"text",placeholder:a.$t("CAPTAIN.COPILOT.SEND_MESSAGE"),class:"w-full reset-base bg-n-alpha-3 ltr:pl-4 ltr:pr-12 rtl:pl-12 rtl:pr-4 py-3 text-n-slate-11 text-sm border border-n-weak rounded-lg focus:outline-none focus:ring-1 focus:ring-n-blue-11 focus:border-n-blue-11",onKeyup:kn(o,["enter"])},null,40,EHe),[[mt,s.value]]),i[1]||(i[1]=h("button",{class:"absolute ltr:right-1 rtl:left-1 top-1/2 -translate-y-1/2 h-9 w-10 flex items-center justify-center text-n-slate-11 hover:text-n-blue-11",type:"submit"},[h("i",{class:"i-ph-arrow-up"})],-1))],32))}},yHe={},SHe={class:"flex justify-start"},AHe={class:"flex items-center space-x-2"},IHe={class:"text-n-iris-11 font-medium"};function CHe(e,t,n,s,o,a){return p(),v("div",SHe,[h("div",AHe,[h("span",IHe,A(e.$t("CAPTAIN.COPILOT.LOADER")),1),t[0]||(t[0]=h("div",{class:"flex space-x-1"},[h("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce [animation-delay:-0.3s]"}),h("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce [animation-delay:-0.15s]"}),h("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce"})],-1))])])}const OHe=Ae(yHe,[["render",CHe]]),NHe={class:"space-y-1 text-n-slate-12"},wHe={class:"font-medium"},RHe={class:"break-words"},xHe={__name:"CopilotAgentMessage",props:{message:{type:Object,required:!0}},setup(e){return(t,n)=>(p(),v("div",NHe,[h("div",wHe,A(t.$t("CAPTAIN.COPILOT.YOU")),1),h("div",RHe,A(e.message.content),1)]))}},$He={class:"flex flex-col gap-1 text-n-slate-12"},MHe={class:"font-medium"},LHe={key:0,class:"text-n-ruby-11"},kHe={key:1,class:"prose-sm break-words"},DHe={class:"flex flex-row mt-1"},PHe={__name:"CopilotAssistantMessage",props:{isLastMessage:{type:Boolean,default:!1},message:{type:Object,required:!0},conversationInboxType:{type:String,required:!0}},setup(e){const t=e,n=C(()=>{var r;return!((r=t.message)!=null&&r.content)}),s=C(()=>!n.value&&t.message.reply_suggestion&&t.isLastMessage),o=C(()=>new wd(t.message.content).formattedMessage),a=C(()=>[yt.WEB,yt.EMAIL].includes(t.conversationInboxType)),i=()=>{var r,l;a.value?wt.emit(jt.INSERT_INTO_RICH_EDITOR,(r=t.message)==null?void 0:r.content):wt.emit(jt.INSERT_INTO_NORMAL_EDITOR,(l=t.message)==null?void 0:l.content),Pt(C0.USE_CAPTAIN_RESPONSE)};return(r,l)=>{const c=qe("dompurify-html");return p(),v("div",$He,[h("div",MHe,A(r.$t("CAPTAIN.NAME")),1),n.value?(p(),v("span",LHe,A(r.$t("CAPTAIN.COPILOT.EMPTY_MESSAGE")),1)):re((p(),v("div",kHe,null,512)),[[c,o.value]]),h("div",DHe,[s.value?(p(),$(oe,{key:0,label:r.$t("CAPTAIN.COPILOT.USE"),faded:"",sm:"",slate:"",onClick:i},null,8,["label"])):w("",!0)])])}}},BHe={class:"flex flex-col gap-2 p-3 rounded-lg bg-n-background/50 border border-n-weak hover:bg-n-background/80 transition-colors duration-200"},FHe={class:"flex items-start gap-2"},UHe={class:"text-sm text-n-slate-12"},GHe={__name:"CopilotThinkingBlock",props:{content:{type:String,required:!0}},setup(e){return(t,n)=>(p(),v("div",BHe,[h("div",FHe,[y(Rt,{icon:"i-lucide-sparkles",class:"w-4 h-4 mt-0.5 flex-shrink-0 text-n-slate-9"}),h("div",UHe,A(e.content),1)])]))}},VHe={class:"flex flex-col gap-2"},HHe={class:"flex items-center gap-2"},WHe={class:"inline-flex items-center justify-center h-4 min-w-4 px-1 text-xs font-medium rounded-full bg-n-solid-3 text-n-slate-11"},zHe={__name:"CopilotThinkingGroup",props:{messages:{type:Array,required:!0},defaultCollapsed:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=Me(),s=X(!t.defaultCollapsed),o=C(()=>t.messages.length);return ct(()=>t.defaultCollapsed,a=>{a&&(s.value=!1)}),(a,i)=>(p(),v("div",VHe,[h("button",{class:"group flex items-center gap-2 text-xs text-n-slate-10 hover:text-n-slate-11 transition-colors duration-200 -ml-3",onClick:i[0]||(i[0]=r=>s.value=!s.value)},[y(Rt,{icon:s.value?"i-lucide-chevron-down":"i-lucide-chevron-right",class:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"},null,8,["icon"]),h("span",HHe,[Re(A(N(n)("CAPTAIN.COPILOT.SHOW_STEPS"))+" ",1),h("span",WHe,A(o.value),1)])]),re(h("div",{class:se(["space-y-3 transition-all duration-200",{"opacity-100":s.value,"opacity-0 max-h-0 overflow-hidden":!s.value}])},[(p(!0),v(pe,null,Ne(e.messages,r=>(p(),$(GHe,{key:r.id,content:r.message.content,reasoning:r.message.reasoning},null,8,["content","reasoning"]))),128))],2),[[Jt,s.value]])]))}},jHe={class:"flex gap-1 justify-between w-full"},KHe={class:"items-start flex gap-1 flex-col"},YHe={class:"text-n-slate-12 text-sm"},XHe={class:"line-clamp-2 text-n-slate-11 text-xs"},qHe={key:0,class:"flex items-center justify-center flex-shrink-0 w-4 h-4 rounded-full bg-n-slate-12 dark:bg-n-slate-11"},ZHe={__name:"ToggleCopilotAssistant",props:{assistants:{type:Array,required:!0},activeAssistant:{type:Object,required:!0}},emits:["setAssistant"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=C(()=>n.activeAssistant?n.activeAssistant.name:o("CAPTAIN.COPILOT.SELECT_ASSISTANT"));return(i,r)=>(p(),v("div",null,[y(cr,null,{trigger:K(({toggle:l,isOpen:c})=>[y(oe,{label:a.value,icon:"i-woot-captain",ghost:"",slate:"",xs:"",class:se({"bg-n-alpha-2":c}),onClick:l},null,8,["label","class","onClick"])]),default:K(()=>[y(ur,{class:"bottom-9 min-w-64 z-50",strong:""},{default:K(()=>[y(rl,{class:"max-h-80 overflow-scroll"},{default:K(()=>[(p(!0),v(pe,null,Ne(e.assistants,l=>(p(),$(Ra,{key:l.id,class:"!items-start !gap-1 flex-col cursor-pointer",onClick:()=>s("setAssistant",l)},{label:K(()=>{var c;return[h("div",jHe,[h("div",KHe,[h("span",YHe,A(l.name),1),h("span",XHe,A(l.description),1)]),l.id===((c=e.activeAssistant)==null?void 0:c.id)?(p(),v("div",qHe,r[0]||(r[0]=[h("i",{class:"i-lucide-check text-white dark:text-n-slate-1 size-3"},null,-1)]))):w("",!0)])]}),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]))}},QHe={class:"flex-1 flex flex-col gap-6 px-2"},JHe={class:"flex flex-col space-y-4 py-4"},eWe={class:"space-y-1"},tWe={class:"text-base font-medium text-n-slate-12 leading-8"},nWe={class:"text-sm text-n-slate-11 leading-6"},sWe={key:0,class:"w-full space-y-2"},aWe={class:"text-sm text-n-slate-11 leading-6"},oWe={key:1,class:"w-full space-y-2"},iWe={class:"text-xs text-n-slate-10 block"},rWe={class:"space-y-1"},lWe=["onClick"],cWe={__name:"CopilotEmptyState",props:{hasAssistants:{type:Boolean,default:!1}},emits:["useSuggestion"],setup(e,{emit:t}){const n=t,{t:s}=Me(),o=sn(),a={conversations:[{label:"CAPTAIN.COPILOT.PROMPTS.SUMMARIZE.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.SUMMARIZE.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.SUGGEST.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.SUGGEST.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.RATE.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.RATE.CONTENT"}],dashboard:[{label:"CAPTAIN.COPILOT.PROMPTS.HIGH_PRIORITY.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.HIGH_PRIORITY.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.LIST_CONTACTS.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.LIST_CONTACTS.CONTENT"}]},i=()=>{const c=o.path;return c.includes("/conversations")?"conversations":(c.includes("/dashboard"),"dashboard")},r=C(()=>{const c=i();return a[c]||a.conversations}),l=c=>{n("useSuggestion",s(c.prompt))};return(c,u)=>{const d=M("router-link");return p(),v("div",QHe,[h("div",JHe,[y(Rt,{icon:"i-woot-captain",class:"text-n-slate-9 text-4xl"}),h("div",eWe,[h("h3",tWe,A(c.$t("CAPTAIN.COPILOT.PANEL_TITLE")),1),h("p",nWe,A(c.$t("CAPTAIN.COPILOT.KICK_OFF_MESSAGE")),1)])]),e.hasAssistants?(p(),v("div",oWe,[h("span",iWe,A(c.$t("CAPTAIN.COPILOT.TRY_THESE_PROMPTS")),1),h("div",rWe,[(p(!0),v(pe,null,Ne(r.value,m=>(p(),v("button",{key:m.label,class:"w-full px-3 py-2 rounded-md border border-n-weak bg-n-slate-2 text-n-slate-11 flex items-center justify-between hover:bg-n-slate-3 transition-colors",onClick:f=>l(m)},[h("span",null,A(N(s)(m.label)),1),y(Rt,{icon:"i-lucide-chevron-right"})],8,lWe))),128))])])):(p(),v("div",sWe,[h("p",aWe,A(c.$t("CAPTAIN.ASSISTANTS.NO_ASSISTANTS_AVAILABLE")),1),y(d,{to:{name:"captain_assistants_index",params:{accountId:N(o).params.accountId}},class:"text-n-slate-11 underline hover:text-n-slate-12"},{default:K(()=>[Re(A(c.$t("CAPTAIN.ASSISTANTS.ADD_NEW")),1)]),_:1},8,["to"])]))])}}},uWe={class:"flex flex-col h-full text-sm leading-6 tracking-tight w-full"},dWe={key:0,class:"space-y-6 flex-1 flex flex-col w-full"},pWe={class:"mx-3 mt-px mb-2"},hWe={class:"flex items-center gap-2 justify-between w-full mb-1"},mWe={key:1},fWe={__name:"Copilot",props:{messages:{type:Array,default:()=>[]},conversationInboxType:{type:String,required:!0},assistants:{type:Array,default:()=>[]},activeAssistant:{type:Object,default:()=>({})}},emits:["sendMessage","reset","setAssistant"],setup(e,{emit:t}){const n=e,s=t,{t:o}=Me(),a=S=>{s("sendMessage",S),Pt(C0.SEND_MESSAGE)},i=X(null),r=async()=>{await tn(),i.value&&(i.value.scrollTop=i.value.scrollHeight)},l=C(()=>{const S=[];let _=[];return n.messages.forEach(E=>{E.message_type==="assistant_thinking"?_.push(E):(_.length>0&&(S.push({id:_[0].id,message_type:"thinking_group",messages:_}),_=[]),S.push(E))}),_.length>0&&S.push({id:_[0].id,message_type:"thinking_group",messages:_}),S}),c=C(()=>l.value[l.value.length-1].message_type==="assistant"),{updateUISettings:u}=ln(),d=()=>{u({is_copilot_panel_open:!1,is_contact_sidebar_open:!1})},m=S=>{S==="reset"&&s("reset")},f=C(()=>n.assistants.length>0),g=C(()=>n.messages.length>0),T=C(()=>g.value?[{key:"reset",icon:"i-lucide-refresh-ccw",tooltip:o("CAPTAIN.COPILOT.RESET")}]:[]);return ct([()=>n.messages],()=>{r()},{deep:!0}),(S,_)=>(p(),v("div",uWe,[y(lI,{title:S.$t("CAPTAIN.COPILOT.TITLE"),buttons:T.value,onClick:m,onClose:d},null,8,["title","buttons"]),h("div",{ref_key:"chatContainer",ref:i,class:"flex-1 flex px-4 py-4 overflow-y-auto items-start"},[g.value?(p(),v("div",dWe,[(p(!0),v(pe,null,Ne(l.value,(E,b)=>(p(),v(pe,{key:E.id},[E.message_type==="user"?(p(),$(xHe,{key:0,message:E.message},null,8,["message"])):E.message_type==="assistant"?(p(),$(PHe,{key:1,message:E.message,"is-last-message":b===l.value.length-1,"conversation-inbox-type":e.conversationInboxType},null,8,["message","is-last-message","conversation-inbox-type"])):(p(),$(zHe,{key:2,messages:E.messages,"default-collapsed":c.value},null,8,["messages","default-collapsed"]))],64))),128)),c.value?w("",!0):(p(),$(OHe,{key:0}))])):(p(),$(cWe,{key:1,"has-assistants":f.value,onUseSuggestion:a},null,8,["has-assistants"]))],512),h("div",pWe,[h("div",hWe,[e.assistants.length>1?(p(),$(ZHe,{key:0,assistants:e.assistants,"active-assistant":e.activeAssistant,onSetAssistant:_[0]||(_[0]=E=>s("setAssistant",E))},null,8,["assistants","active-assistant"])):(p(),v("div",mWe))]),f.value?(p(),$(THe,{key:0,class:"mb-1 w-full",onSend:a})):w("",!0)])]))}},gWe={key:0,class:"ltr:border-l rtl:border-r border-n-weak h-full overflow-hidden z-10 w-[320px] min-w-[320px] 2xl:min-w-[360px] 2xl:w-[360px] flex flex-col bg-n-background"},_We={__name:"CopilotContainer",props:{conversationInboxType:{type:String,required:!0}},setup(e){const t=pt(),n=Oe("getCurrentUser"),s=Oe("captainAssistants/getRecords"),o=Oe("captainAssistants/getUIFlags"),a=Oe("getCopilotAssistant"),i=Oe("getSelectedChat"),r=X(null),l=C(()=>t.getters["copilotMessages/getMessagesByThreadId"](r.value)),c=Oe("getCurrentAccountId"),u=Oe("accounts/isFeatureEnabledonAccount"),d=X(null),{uiSettings:m,updateUISettings:f}=ln(),g=C(()=>{const b=m.value.preferred_captain_assistant_id;if(b){const I=s.value.find(R=>R.id===b);if(I)return I}if(a.value){const I=s.value.find(R=>R.id===a.value.id);if(I)return I}return s.value[0]}),T=async b=>{d.value=b.id,await f({preferred_captain_assistant_id:b.id})},S=C(()=>{const b=u.value(c.value,_t.CAPTAIN),{is_copilot_panel_open:I}=m.value;return b&&I&&!o.value.fetchingList}),_=()=>{r.value=null},E=async b=>{var I,R;if(r.value)await t.dispatch("copilotMessages/create",{assistant_id:g.value.id,conversation_id:(I=i.value)==null?void 0:I.id,threadId:r.value,message:b});else{const O=await t.dispatch("copilotThreads/create",{assistant_id:g.value.id,conversation_id:(R=i.value)==null?void 0:R.id,message:b});r.value=O.id}};return dt(()=>{t.dispatch("captainAssistants/get")}),(b,I)=>S.value?(p(),v("div",gWe,[y(fWe,{messages:l.value,"support-agent":N(n),"conversation-inbox-type":e.conversationInboxType,assistants:N(s),"active-assistant":g.value,onSetAssistant:T,onSendMessage:E,onReset:_},null,8,["messages","support-agent","conversation-inbox-type","assistants","active-assistant"])])):(p(),v(pe,{key:1},[],64))}},vWe=Nd(()=>Ao(()=>import("./commandbar-DKjEa-ys.js"),__vite__mapDeps([39,2,17,14,15,6,5,3,4,18,9,19,11,8,22,1,7,23,24,25,26,10,27,28,29,40]))),bWe=Nd(()=>Ao(()=>import("./Sidebar-BHigZuPS.js"),__vite__mapDeps([41,14,2,15,18,9,19,17,6,3,4,11,8,23,1,5,7,25,26,22,24,10,27,28,29,42]))),EWe={components:{NextSidebar:nVe,Sidebar:bWe,CommandBar:vWe,WootKeyShortcutModal:mVe,AddAccountModal:HT,AccountSelector:IVe,AddLabelModal:Mg,NotificationPanel:rHe,UpgradePage:gHe,CopilotLauncher:bHe,CopilotContainer:_We},setup(){const e=X(null),{uiSettings:t,updateUISettings:n}=ln(),{accountId:s}=zn();return{uiSettings:t,updateUISettings:n,accountId:s,upgradePageRef:e}},data(){return{showAccountModal:!1,showCreateAccountModal:!1,showAddLabelModal:!1,showShortcutModal:!1,isNotificationPanel:!1,displayLayoutType:"",hasBanner:""}},computed:{...lt({isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),currentRoute(){return" "},showUpgradePage(){var e;return(e=this.upgradePageRef)==null?void 0:e.shouldShowUpgradePage},bypassUpgradePage(){return["billing_settings_index","settings_inbox_list","agent_list"].includes(this.$route.name)},isSidebarOpen(){const{show_secondary_sidebar:e}=this.uiSettings;return e},previouslyUsedDisplayType(){const{previously_used_conversation_display_type:e}=this.uiSettings;return e},previouslyUsedSidebarView(){const{previously_used_sidebar_view:e}=this.uiSettings;return e},showNextSidebar(){return this.isFeatureEnabledonAccount(this.accountId,_t.CHATWOOT_V4)}},watch:{displayLayoutType(){const{LAYOUT_TYPES:e}=It;this.updateUISettings({conversation_display_type:this.displayLayoutType===e.EXPANDED?e.EXPANDED:this.previouslyUsedDisplayType,show_secondary_sidebar:this.displayLayoutType===e.EXPANDED?!1:this.previouslyUsedSidebarView})}},mounted(){this.handleResize(),this.$nextTick(this.checkBanner),window.addEventListener("resize",this.handleResize),window.addEventListener("resize",this.checkBanner),wt.on(jt.TOGGLE_SIDEMENU,this.toggleSidebar)},unmounted(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("resize",this.checkBanner),wt.off(jt.TOGGLE_SIDEMENU,this.toggleSidebar)},methods:{checkBanner(){this.hasBanner=document.getElementsByClassName("woot-banner").length>0},handleResize(){const{SMALL_SCREEN_BREAKPOINT:e,LAYOUT_TYPES:t}=It;let n=!1;const s=150;n||(n=!0,setTimeout(()=>{n=!1,window.innerWidth<=e?this.displayLayoutType=t.EXPANDED:this.displayLayoutType=t.CONDENSED},s))},toggleSidebar(){this.updateUISettings({show_secondary_sidebar:!this.isSidebarOpen,previously_used_sidebar_view:!this.isSidebarOpen})},openCreateAccountModal(){this.showAccountModal=!1,this.showCreateAccountModal=!0},closeCreateAccountModal(){this.showCreateAccountModal=!1},toggleAccountModal(){this.showAccountModal=!this.showAccountModal},toggleKeyShortcutModal(){this.showShortcutModal=!0},closeKeyShortcutModal(){this.showShortcutModal=!1},showAddLabelPopup(){this.showAddLabelModal=!0},hideAddLabelPopup(){this.showAddLabelModal=!1},openNotificationPanel(){this.isNotificationPanel=!0},closeNotificationPanel(){this.isNotificationPanel=!1}}},TWe={class:"flex flex-wrap app-wrapper dark:text-slate-300"},yWe={class:"flex flex-1 h-full min-h-0 px-0 overflow-hidden"};function SWe(e,t,n,s,o,a){const i=M("NextSidebar"),r=M("Sidebar"),l=M("UpgradePage"),c=M("router-view"),u=M("CommandBar"),d=M("CopilotLauncher"),m=M("CopilotContainer"),f=M("NotificationPanel"),g=M("AddLabelModal"),T=M("woot-modal"),S=M("AccountSelector"),_=M("AddAccountModal"),E=M("WootKeyShortcutModal");return p(),v("div",TWe,[a.showNextSidebar?(p(),$(i,{key:0,onToggleAccountModal:a.toggleAccountModal,onOpenKeyShortcutModal:a.toggleKeyShortcutModal,onCloseKeyShortcutModal:a.closeKeyShortcutModal,onShowCreateAccountModal:a.openCreateAccountModal},null,8,["onToggleAccountModal","onOpenKeyShortcutModal","onCloseKeyShortcutModal","onShowCreateAccountModal"])):(p(),$(r,{key:1,route:a.currentRoute,"has-banner":o.hasBanner,"show-secondary-sidebar":a.isSidebarOpen,onOpenNotificationPanel:a.openNotificationPanel,onToggleAccountModal:a.toggleAccountModal,onOpenKeyShortcutModal:a.toggleKeyShortcutModal,onCloseKeyShortcutModal:a.closeKeyShortcutModal,onShowAddLabelPopup:a.showAddLabelPopup},null,8,["route","has-banner","show-secondary-sidebar","onOpenNotificationPanel","onToggleAccountModal","onOpenKeyShortcutModal","onCloseKeyShortcutModal","onShowAddLabelPopup"])),h("main",yWe,[re(y(l,{ref:"upgradePageRef","bypass-upgrade-page":a.bypassUpgradePage},null,8,["bypass-upgrade-page"]),[[Jt,a.showUpgradePage]]),a.showUpgradePage?w("",!0):(p(),v(pe,{key:0},[y(c),y(u),y(d),y(m),o.isNotificationPanel?(p(),$(f,{key:0,onClose:a.closeNotificationPanel},null,8,["onClose"])):w("",!0),y(T,{show:o.showAddLabelModal,"onUpdate:show":t[0]||(t[0]=b=>o.showAddLabelModal=b),"on-close":a.hideAddLabelPopup},{default:K(()=>[y(g,{onClose:a.hideAddLabelPopup},null,8,["onClose"])]),_:1},8,["show","on-close"])],64)),y(S,{"show-account-modal":o.showAccountModal,onCloseAccountModal:a.toggleAccountModal,onShowCreateAccountModal:a.openCreateAccountModal},null,8,["show-account-modal","onCloseAccountModal","onShowCreateAccountModal"]),y(_,{show:o.showCreateAccountModal,onCloseAccountCreateModal:a.closeCreateAccountModal},null,8,["show","onCloseAccountCreateModal"]),y(E,{show:o.showShortcutModal,"onUpdate:show":t[1]||(t[1]=b=>o.showShortcutModal=b),onClose:a.closeKeyShortcutModal,onClickaway:a.closeKeyShortcutModal},null,8,["show","onClose","onClickaway"])])])}const AWe=Ae(EWe,[["render",SWe]]),IWe={class:"items-center bg-slate-50 flex justify-center h-full w-full"},CWe={__name:"Index",setup(e){const t=()=>{window.$chatwoot&&window.$chatwoot.toggleBubbleVisibility("show")},n=()=>{window.addEventListener("chatwoot:on-message",()=>{t()})};return dt(()=>{t(),n()}),(s,o)=>(p(),v("div",IWe,[y(pr,{title:s.$t("APP_GLOBAL.ACCOUNT_SUSPENDED.TITLE"),message:s.$t("APP_GLOBAL.ACCOUNT_SUSPENDED.MESSAGE")},null,8,["title","message"])]))}},OWe={routes:[{path:At("accounts/:accountId"),component:AWe,children:[...JUe,...F6e,...X3e.routes,...sfe.routes,...GPe,...ake,...d5e,...NBe.routes,...H9e.routes]},{path:At("accounts/:accountId/suspended"),name:"account_suspended",meta:{permissions:["administrator","agent","custom_role"]},component:CWe}]},RI=[...OWe.routes],Wn=_O({history:vO(),routes:RI}),vze=tN(RI),NWe=(e,t)=>{const{isLoggedIn:n,getCurrentUser:s}=nr.getters;if(!n)return window.location.assign("/app/login"),"";if(!e.name)return t(At(`accounts/${s.account_id}/dashboard`));const o=aD(e,nr.getters.getCurrentUser);return o?t(At(o)):t()},wWe=()=>{const e=nr.dispatch("setUser");Wn.beforeEach((t,n,s)=>{UC.page(t.name||"",{path:t.path,name:t.name}),e.then(()=>NWe(t,s))})},RWe=aC({legacy:!1,locale:"en",messages:cN});e5(nr,Wn);const zs=n0(ZP);zs.use(RWe);zs.use(nr);zs.use(Wn);window.errorLoggingConfig&&nN({app:zs,dsn:window.errorLoggingConfig,denyUrls:[/^chrome:\/\//i,/chrome-extension:/i,/extensions\//i,/file:\/\//i,/safari-web-extension:/i,/safari-extension:/i],integrations:[sN({router:Wn})],ignoreErrors:["ResizeObserver loop completed with undelivered notifications"]});zs.use(pN,hN);zs.use(VT);zs.use(vC,bC({rules:{JSON:({value:e})=>aN(e)}}));zs.use(PR,{instantMove:!0,arrowOverflow:!1,disposeTimeout:5e6});zs.use(lw);zs.component("multiselect",V0);zs.component("woot-switch",Nw);zs.component("woot-wizard",Dw);zs.component("fluent-icon",oN);zs.directive("resize",Q5);zs.directive("on-clickaway",mN);iN();window.WootConstants=It;window.axios=JP(oC);rN();lN();wWe();window.onload=()=>{zs.mount("#app")};export{dze as $,mze as A,gBe as B,hze as C,Pc as D,pI as E,Qb as F,rg as G,aE as H,ka as I,_t as J,J1 as K,fze as L,Q1 as M,eE as N,il as O,B_e as P,F_e as Q,P_e as R,sE as S,tE as T,nE as U,QOe as V,Gc as W,QA as X,U_e as Y,ig as Z,qE as _,pze as a,dc as a0,Bd as a1,QT as a2,ja as a3,Yd as a4,vze as a5,zn as a6,c4e as b,Hs as c,ZE as d,Ri as e,w0e as f,uze as g,gze as h,R0e as i,tr as j,M1e as k,e0e as l,Xd as m,oI as n,Tf as o,ts as p,lze as q,es as r,hr as s,cs as t,ln as u,_n as v,R8e as w,Ai as x,Rx as y,hA as z};
//# sourceMappingURL=dashboard-DwRju8os.js.map
