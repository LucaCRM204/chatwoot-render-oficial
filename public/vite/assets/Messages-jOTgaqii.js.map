{"version":3,"file":"Messages-jOTgaqii.js","sources":["../../../app/javascript/widget/components/FooterReplyTo.vue","../../../app/javascript/widget/components/ChatAttachment.vue","../../../app/javascript/widget/components/ChatSendButton.vue","../../../app/javascript/widget/components/ChatInputWrap.vue","../../../app/javascript/widget/components/ChatFooter.vue","../../../app/javascript/widget/components/UserMessageBubble.vue","../../../app/javascript/widget/components/MessageReplyButton.vue","../../../app/javascript/widget/components/ImageBubble.vue","../../../app/javascript/widget/components/VideoBubble.vue","../../../app/javascript/widget/components/FileBubble.vue","../../../app/javascript/widget/mixins/messageMixin.js","../../../app/javascript/widget/components/ReplyToChip.vue","../../../app/javascript/widget/components/DragWrapper.vue","../../../app/javascript/widget/components/UserMessage.vue","../../../app/javascript/shared/components/CardButton.vue","../../../app/javascript/shared/components/ChatCard.vue","../../../app/javascript/shared/components/ChatForm.vue","../../../app/javascript/shared/components/ChatOption.vue","../../../app/javascript/shared/components/ChatOptions.vue","../../../app/javascript/widget/components/template/Article.vue","../../../app/javascript/widget/components/template/EmailInput.vue","../../../app/javascript/shared/components/CustomerSatisfaction.vue","../../../app/javascript/widget/api/integration.js","../../../app/javascript/widget/components/template/IntegrationCard.vue","../../../app/javascript/widget/components/AgentMessageBubble.vue","../../../app/javascript/widget/components/AgentMessage.vue","../../../app/javascript/widget/components/ChatMessage.vue","../../../app/javascript/widget/components/AgentTypingBubble.vue","../../../app/javascript/shared/components/DateSeparator.vue","../../../app/javascript/widget/components/ConversationWrap.vue","../../../app/javascript/widget/views/Messages.vue"],"sourcesContent":["<script>\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\n\r\nexport default {\r\n  name: 'FooterReplyTo',\r\n  components: { FluentIcon },\r\n  props: {\r\n    inReplyTo: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  emits: ['dismiss'],\r\n  computed: {\r\n    replyToAttachment() {\r\n      if (!this.inReplyTo?.attachments?.length) {\r\n        return '';\r\n      }\r\n\r\n      const [{ file_type: fileType } = {}] = this.inReplyTo.attachments;\r\n      return this.$t(`ATTACHMENTS.${fileType}.CONTENT`);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"mb-2.5 rounded-[7px] dark:bg-slate-900 dark:text-slate-100 bg-slate-100 px-2 py-1.5 text-sm text-slate-700 flex items-center gap-2\"\r\n  >\r\n    <div class=\"items-center flex-grow truncate\">\r\n      <strong>{{ $t('FOOTER_REPLY_TO.REPLY_TO') }}</strong>\r\n      {{ inReplyTo.content || replyToAttachment }}\r\n    </div>\r\n    <button\r\n      class=\"items-end flex-shrink-0 p-1 rounded-md hover:bg-slate-200 dark:hover:bg-slate-800\"\r\n      @click=\"$emit('dismiss')\"\r\n    >\r\n      <FluentIcon icon=\"dismiss\" size=\"12\" />\r\n    </button>\r\n  </div>\r\n</template>\r\n","<script>\r\nimport FileUpload from 'vue-upload-component';\r\nimport Spinner from 'shared/components/Spinner.vue';\r\nimport { checkFileSizeLimit } from 'shared/helpers/FileHelper';\r\nimport {\r\n  MAXIMUM_FILE_UPLOAD_SIZE,\r\n  ALLOWED_FILE_TYPES,\r\n} from 'shared/constants/messages';\r\nimport { BUS_EVENTS } from 'shared/constants/busEvents';\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\nimport { DirectUpload } from 'activestorage';\r\nimport { mapGetters } from 'vuex';\r\nimport { emitter } from 'shared/helpers/mitt';\r\n\r\nexport default {\r\n  components: { FluentIcon, FileUpload, Spinner },\r\n  props: {\r\n    onAttach: {\r\n      type: Function,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return { isUploading: false };\r\n  },\r\n  computed: {\r\n    ...mapGetters({ globalConfig: 'globalConfig/get' }),\r\n    fileUploadSizeLimit() {\r\n      return MAXIMUM_FILE_UPLOAD_SIZE;\r\n    },\r\n    allowedFileTypes() {\r\n      return ALLOWED_FILE_TYPES;\r\n    },\r\n  },\r\n  mounted() {\r\n    document.addEventListener('paste', this.handleClipboardPaste);\r\n  },\r\n  unmounted() {\r\n    document.removeEventListener('paste', this.handleClipboardPaste);\r\n  },\r\n  methods: {\r\n    handleClipboardPaste(e) {\r\n      const items = (e.clipboardData || e.originalEvent.clipboardData).items;\r\n      // items is a DataTransferItemList object which does not have forEach method\r\n      const itemsArray = Array.from(items);\r\n      itemsArray.forEach(item => {\r\n        if (item.kind === 'file') {\r\n          e.preventDefault();\r\n          const file = item.getAsFile();\r\n          this.$refs.upload.add(file);\r\n        }\r\n      });\r\n    },\r\n    getFileType(fileType) {\r\n      return fileType.includes('image') ? 'image' : 'file';\r\n    },\r\n    async onFileUpload(file) {\r\n      if (this.globalConfig.directUploadsEnabled) {\r\n        await this.onDirectFileUpload(file);\r\n      } else {\r\n        await this.onIndirectFileUpload(file);\r\n      }\r\n    },\r\n    async onDirectFileUpload(file) {\r\n      if (!file) {\r\n        return;\r\n      }\r\n      this.isUploading = true;\r\n      try {\r\n        if (checkFileSizeLimit(file, MAXIMUM_FILE_UPLOAD_SIZE)) {\r\n          const { websiteToken } = window.chatwootWebChannel;\r\n          const upload = new DirectUpload(\r\n            file.file,\r\n            `/api/v1/widget/direct_uploads?website_token=${websiteToken}`,\r\n            {\r\n              directUploadWillCreateBlobWithXHR: xhr => {\r\n                xhr.setRequestHeader('X-Auth-Token', window.authToken);\r\n              },\r\n            }\r\n          );\r\n\r\n          upload.create((error, blob) => {\r\n            if (error) {\r\n              emitter.emit(BUS_EVENTS.SHOW_ALERT, {\r\n                message: error,\r\n              });\r\n            } else {\r\n              this.onAttach({\r\n                file: blob.signed_id,\r\n                ...this.getLocalFileAttributes(file),\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          emitter.emit(BUS_EVENTS.SHOW_ALERT, {\r\n            message: this.$t('FILE_SIZE_LIMIT', {\r\n              MAXIMUM_FILE_UPLOAD_SIZE: this.fileUploadSizeLimit,\r\n            }),\r\n          });\r\n        }\r\n      } catch (error) {\r\n        // Error\r\n      }\r\n      this.isUploading = false;\r\n    },\r\n    async onIndirectFileUpload(file) {\r\n      if (!file) {\r\n        return;\r\n      }\r\n      this.isUploading = true;\r\n      try {\r\n        if (checkFileSizeLimit(file, MAXIMUM_FILE_UPLOAD_SIZE)) {\r\n          await this.onAttach({\r\n            file: file.file,\r\n            ...this.getLocalFileAttributes(file),\r\n          });\r\n        } else {\r\n          emitter.emit(BUS_EVENTS.SHOW_ALERT, {\r\n            message: this.$t('FILE_SIZE_LIMIT', {\r\n              MAXIMUM_FILE_UPLOAD_SIZE: this.fileUploadSizeLimit,\r\n            }),\r\n          });\r\n        }\r\n      } catch (error) {\r\n        // Error\r\n      }\r\n      this.isUploading = false;\r\n    },\r\n    getLocalFileAttributes(file) {\r\n      return {\r\n        thumbUrl: window.URL.createObjectURL(file.file),\r\n        fileType: this.getFileType(file.type),\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <FileUpload\r\n    ref=\"upload\"\r\n    :size=\"4096 * 2048\"\r\n    :accept=\"allowedFileTypes\"\r\n    :data=\"{\r\n      direct_upload_url: '/api/v1/widget/direct_uploads',\r\n      direct_upload: true,\r\n    }\"\r\n    @input-file=\"onFileUpload\"\r\n  >\r\n    <button class=\"min-h-8 min-w-8 flex items-center justify-center\">\r\n      <FluentIcon v-if=\"!isUploading.image\" icon=\"attach\" />\r\n      <Spinner v-if=\"isUploading\" size=\"small\" />\r\n    </button>\r\n  </FileUpload>\r\n</template>\r\n","<script>\r\nimport Spinner from 'shared/components/Spinner.vue';\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\n\r\nexport default {\r\n  components: {\r\n    FluentIcon,\r\n    Spinner,\r\n  },\r\n  props: {\r\n    loading: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    color: {\r\n      type: String,\r\n      default: '#6e6f73',\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <button\r\n    type=\"submit\"\r\n    :disabled=\"disabled\"\r\n    class=\"min-h-8 min-w-8 flex items-center justify-center ml-1\"\r\n  >\r\n    <FluentIcon v-if=\"!loading\" icon=\"send\" :style=\"`color: ${color}`\" />\r\n    <Spinner v-else size=\"small\" />\r\n  </button>\r\n</template>\r\n","<script>\r\nimport { mapGetters } from 'vuex';\r\n\r\nimport ChatAttachmentButton from 'widget/components/ChatAttachment.vue';\r\nimport ChatSendButton from 'widget/components/ChatSendButton.vue';\r\nimport configMixin from '../mixins/configMixin';\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\nimport ResizableTextArea from 'shared/components/ResizableTextArea.vue';\r\n\r\nimport EmojiInput from 'shared/components/emoji/EmojiInput.vue';\r\n\r\nexport default {\r\n  name: 'ChatInputWrap',\r\n  components: {\r\n    ChatAttachmentButton,\r\n    ChatSendButton,\r\n    EmojiInput,\r\n    FluentIcon,\r\n    ResizableTextArea,\r\n  },\r\n  mixins: [configMixin],\r\n  props: {\r\n    onSendMessage: {\r\n      type: Function,\r\n      default: () => {},\r\n    },\r\n    onSendAttachment: {\r\n      type: Function,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      userInput: '',\r\n      showEmojiPicker: false,\r\n      isFocused: false,\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters({\r\n      widgetColor: 'appConfig/getWidgetColor',\r\n      isWidgetOpen: 'appConfig/getIsWidgetOpen',\r\n    }),\r\n    showAttachment() {\r\n      return this.hasAttachmentsEnabled && this.userInput.length === 0;\r\n    },\r\n    showSendButton() {\r\n      return this.userInput.length > 0;\r\n    },\r\n  },\r\n  watch: {\r\n    isWidgetOpen(isWidgetOpen) {\r\n      if (isWidgetOpen) {\r\n        this.focusInput();\r\n      }\r\n    },\r\n  },\r\n  unmounted() {\r\n    document.removeEventListener('keypress', this.handleEnterKeyPress);\r\n  },\r\n  mounted() {\r\n    document.addEventListener('keypress', this.handleEnterKeyPress);\r\n    if (this.isWidgetOpen) {\r\n      this.focusInput();\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    onBlur() {\r\n      this.isFocused = false;\r\n    },\r\n    onFocus() {\r\n      this.isFocused = true;\r\n    },\r\n    handleButtonClick() {\r\n      if (this.userInput && this.userInput.trim()) {\r\n        this.onSendMessage(this.userInput);\r\n      }\r\n      this.userInput = '';\r\n      this.focusInput();\r\n    },\r\n    handleEnterKeyPress(e) {\r\n      if (e.keyCode === 13 && !e.shiftKey) {\r\n        e.preventDefault();\r\n        this.handleButtonClick();\r\n      }\r\n    },\r\n    toggleEmojiPicker() {\r\n      this.showEmojiPicker = !this.showEmojiPicker;\r\n    },\r\n    hideEmojiPicker(e) {\r\n      if (this.showEmojiPicker) {\r\n        e.stopPropagation();\r\n        this.toggleEmojiPicker();\r\n      }\r\n    },\r\n    emojiOnClick(emoji) {\r\n      this.userInput = `${this.userInput}${emoji} `;\r\n    },\r\n    onTypingOff() {\r\n      this.toggleTyping('off');\r\n    },\r\n    onTypingOn() {\r\n      this.toggleTyping('on');\r\n    },\r\n    toggleTyping(typingStatus) {\r\n      this.$store.dispatch('conversation/toggleUserTyping', { typingStatus });\r\n    },\r\n    focusInput() {\r\n      this.$refs.chatInput.focus();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"items-center flex ltr:pl-3 rtl:pr-3 ltr:pr-2 rtl:pl-2 rounded-[7px] transition-all duration-200 bg-n-background !shadow-[0_0_0_1px,0_0_2px_3px]\"\r\n    :class=\"{\r\n      '!shadow-n-brand dark:!shadow-n-brand': isFocused,\r\n      '!shadow-n-strong dark:!shadow-n-strong': !isFocused,\r\n    }\"\r\n    @keydown.esc=\"hideEmojiPicker\"\r\n  >\r\n    <ResizableTextArea\r\n      id=\"chat-input\"\r\n      ref=\"chatInput\"\r\n      v-model=\"userInput\"\r\n      :rows=\"1\"\r\n      :aria-label=\"$t('CHAT_PLACEHOLDER')\"\r\n      :placeholder=\"$t('CHAT_PLACEHOLDER')\"\r\n      class=\"user-message-input reset-base\"\r\n      @typing-off=\"onTypingOff\"\r\n      @typing-on=\"onTypingOn\"\r\n      @focus=\"onFocus\"\r\n      @blur=\"onBlur\"\r\n    />\r\n    <div class=\"flex items-center ltr:pl-2 rtl:pr-2\">\r\n      <ChatAttachmentButton\r\n        v-if=\"showAttachment\"\r\n        class=\"text-n-slate-12\"\r\n        :on-attach=\"onSendAttachment\"\r\n      />\r\n      <button\r\n        v-if=\"hasEmojiPickerEnabled\"\r\n        class=\"flex items-center justify-center min-h-8 min-w-8\"\r\n        :aria-label=\"$t('EMOJI.ARIA_LABEL')\"\r\n        @click=\"toggleEmojiPicker\"\r\n      >\r\n        <FluentIcon\r\n          icon=\"emoji\"\r\n          class=\"transition-all duration-150\"\r\n          :class=\"{\r\n            'text-n-slate-12': !showEmojiPicker,\r\n            'text-n-brand': showEmojiPicker,\r\n          }\"\r\n        />\r\n      </button>\r\n      <EmojiInput\r\n        v-if=\"showEmojiPicker\"\r\n        v-on-clickaway=\"hideEmojiPicker\"\r\n        :on-click=\"emojiOnClick\"\r\n        @keydown.esc=\"hideEmojiPicker\"\r\n      />\r\n      <ChatSendButton\r\n        v-if=\"showSendButton\"\r\n        :color=\"widgetColor\"\r\n        @click=\"handleButtonClick\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.emoji-dialog {\r\n  @apply max-w-full ltr:right-5 rtl:right-[unset] rtl:left-5 -top-[302px] before:ltr:right-2.5 before:rtl:right-[unset] before:rtl:left-2.5;\r\n}\r\n\r\n.user-message-input {\r\n  @apply border-none outline-none w-full placeholder:text-n-slate-10 resize-none h-8 min-h-8 max-h-60 py-1 px-0 my-2 bg-n-background text-n-slate-12 transition-all duration-200;\r\n}\r\n</style>\r\n","<script>\r\nimport { mapActions, mapGetters } from 'vuex';\r\nimport { getContrastingTextColor } from '@chatwoot/utils';\r\nimport CustomButton from 'shared/components/Button.vue';\r\nimport FooterReplyTo from 'widget/components/FooterReplyTo.vue';\r\nimport ChatInputWrap from 'widget/components/ChatInputWrap.vue';\r\nimport { BUS_EVENTS } from 'shared/constants/busEvents';\r\nimport { sendEmailTranscript } from 'widget/api/conversation';\r\nimport routerMixin from 'widget/mixins/routerMixin';\r\nimport { IFrameHelper } from '../helpers/utils';\r\nimport { CHATWOOT_ON_START_CONVERSATION } from '../constants/sdkEvents';\r\nimport { emitter } from 'shared/helpers/mitt';\r\n\r\nexport default {\r\n  components: {\r\n    ChatInputWrap,\r\n    CustomButton,\r\n    FooterReplyTo,\r\n  },\r\n  mixins: [routerMixin],\r\n  data() {\r\n    return {\r\n      inReplyTo: null,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      conversationAttributes: 'conversationAttributes/getConversationParams',\r\n      widgetColor: 'appConfig/getWidgetColor',\r\n      conversationSize: 'conversation/getConversationSize',\r\n      currentUser: 'contacts/getCurrentUser',\r\n      isWidgetStyleFlat: 'appConfig/isWidgetStyleFlat',\r\n    }),\r\n    textColor() {\r\n      return getContrastingTextColor(this.widgetColor);\r\n    },\r\n    hideReplyBox() {\r\n      const { allowMessagesAfterResolved } = window.chatwootWebChannel;\r\n      const { status } = this.conversationAttributes;\r\n      return !allowMessagesAfterResolved && status === 'resolved';\r\n    },\r\n    showEmailTranscriptButton() {\r\n      return this.hasEmail;\r\n    },\r\n    hasEmail() {\r\n      return this.currentUser && this.currentUser.has_email;\r\n    },\r\n    hasReplyTo() {\r\n      return (\r\n        this.inReplyTo && (this.inReplyTo.content || this.inReplyTo.attachments)\r\n      );\r\n    },\r\n  },\r\n  mounted() {\r\n    emitter.on(BUS_EVENTS.TOGGLE_REPLY_TO_MESSAGE, this.toggleReplyTo);\r\n  },\r\n  methods: {\r\n    ...mapActions('conversation', [\r\n      'sendMessage',\r\n      'sendAttachment',\r\n      'clearConversations',\r\n    ]),\r\n    ...mapActions('conversationAttributes', [\r\n      'getAttributes',\r\n      'clearConversationAttributes',\r\n    ]),\r\n    async handleSendMessage(content) {\r\n      await this.sendMessage({\r\n        content,\r\n        replyTo: this.inReplyTo ? this.inReplyTo.id : null,\r\n      });\r\n      // reset replyTo message after sending\r\n      this.inReplyTo = null;\r\n      // Update conversation attributes on new conversation\r\n      if (this.conversationSize === 0) {\r\n        this.getAttributes();\r\n      }\r\n    },\r\n    async handleSendAttachment(attachment) {\r\n      await this.sendAttachment({\r\n        attachment,\r\n        replyTo: this.inReplyTo ? this.inReplyTo.id : null,\r\n      });\r\n      this.inReplyTo = null;\r\n    },\r\n    startNewConversation() {\r\n      this.clearConversations();\r\n      this.clearConversationAttributes();\r\n      this.replaceRoute('prechat-form');\r\n      IFrameHelper.sendMessage({\r\n        event: 'onEvent',\r\n        eventIdentifier: CHATWOOT_ON_START_CONVERSATION,\r\n        data: { hasConversation: true },\r\n      });\r\n    },\r\n    toggleReplyTo(message) {\r\n      this.inReplyTo = message;\r\n    },\r\n    async sendTranscript() {\r\n      if (this.hasEmail) {\r\n        try {\r\n          await sendEmailTranscript();\r\n          emitter.emit(BUS_EVENTS.SHOW_ALERT, {\r\n            message: this.$t('EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS'),\r\n            type: 'success',\r\n          });\r\n        } catch (error) {\r\n          emitter.$emit(BUS_EVENTS.SHOW_ALERT, {\r\n            message: this.$t('EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR'),\r\n          });\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <footer\r\n    v-if=\"!hideReplyBox\"\r\n    class=\"relative z-50 mb-1\"\r\n    :class=\"{\r\n      'rounded-lg': !isWidgetStyleFlat,\r\n      'pt-2.5 shadow-[0px_-20px_20px_1px_rgba(0,_0,_0,_0.05)] dark:shadow-[0px_-20px_20px_1px_rgba(0,_0,_0,_0.15)] rounded-t-none':\r\n        hasReplyTo,\r\n    }\"\r\n  >\r\n    <FooterReplyTo\r\n      v-if=\"hasReplyTo\"\r\n      :in-reply-to=\"inReplyTo\"\r\n      @dismiss=\"inReplyTo = null\"\r\n    />\r\n    <ChatInputWrap\r\n      class=\"shadow-sm\"\r\n      :on-send-message=\"handleSendMessage\"\r\n      :on-send-attachment=\"handleSendAttachment\"\r\n    />\r\n  </footer>\r\n  <div v-else>\r\n    <CustomButton\r\n      class=\"font-medium\"\r\n      block\r\n      :bg-color=\"widgetColor\"\r\n      :text-color=\"textColor\"\r\n      @click=\"startNewConversation\"\r\n    >\r\n      {{ $t('START_NEW_CONVERSATION') }}\r\n    </CustomButton>\r\n    <CustomButton\r\n      v-if=\"showEmailTranscriptButton\"\r\n      type=\"clear\"\r\n      class=\"font-normal\"\r\n      @click=\"sendTranscript\"\r\n    >\r\n      {{ $t('EMAIL_TRANSCRIPT.BUTTON_TEXT') }}\r\n    </CustomButton>\r\n  </div>\r\n</template>\r\n","<script>\r\nimport { useMessageFormatter } from 'shared/composables/useMessageFormatter';\r\nimport { getContrastingTextColor } from '@chatwoot/utils';\r\n\r\nexport default {\r\n  name: 'UserMessageBubble',\r\n  props: {\r\n    message: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    widgetColor: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n  },\r\n  setup() {\r\n    const { formatMessage } = useMessageFormatter();\r\n    return {\r\n      formatMessage,\r\n    };\r\n  },\r\n  computed: {\r\n    textColor() {\r\n      return getContrastingTextColor(this.widgetColor);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    v-dompurify-html=\"formatMessage(message, false)\"\r\n    class=\"chat-bubble user\"\r\n    :style=\"{ background: widgetColor, color: textColor }\"\r\n  />\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.chat-bubble.user::v-deep {\r\n  p code {\r\n    @apply bg-n-alpha-2 dark:bg-n-alpha-1 text-white;\r\n  }\r\n\r\n  pre {\r\n    @apply text-white bg-n-alpha-2 dark:bg-n-alpha-1;\r\n\r\n    code {\r\n      @apply bg-transparent text-white;\r\n    }\r\n  }\r\n\r\n  blockquote {\r\n    @apply bg-transparent border-n-slate-7 ltr:border-l-2 rtl:border-r-2 border-solid;\r\n\r\n    p {\r\n      @apply text-n-slate-5 dark:text-n-slate-12/90;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<script>\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\n\r\nexport default {\r\n  name: 'MessageReplyButton',\r\n  components: { FluentIcon },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <button\r\n    class=\"p-1 mb-1 rounded-full dark:text-slate-500 dark:bg-slate-900 text-slate-600 bg-slate-100 hover:text-slate-800\"\r\n  >\r\n    <FluentIcon icon=\"arrow-reply\" size=\"11\" class=\"flex-shrink-0\" />\r\n  </button>\r\n</template>\r\n","<script>\r\nexport default {\r\n  props: {\r\n    url: { type: String, default: '' },\r\n    thumb: { type: String, default: '' },\r\n    readableTime: { type: String, default: '' },\r\n  },\r\n  emits: ['error'],\r\n  methods: {\r\n    onImgError() {\r\n      this.$emit('error');\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <a\r\n    :href=\"url\"\r\n    target=\"_blank\"\r\n    rel=\"noreferrer noopener nofollow\"\r\n    class=\"image\"\r\n  >\r\n    <div class=\"wrap\">\r\n      <img :src=\"thumb\" alt=\"Picture message\" @error=\"onImgError\" />\r\n      <span class=\"time\">{{ readableTime }}</span>\r\n    </div>\r\n  </a>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.image {\r\n  display: block;\r\n\r\n  .wrap {\r\n    position: relative;\r\n    display: flex;\r\n    max-width: 100%;\r\n\r\n    &::before {\r\n      background-image: linear-gradient(-180deg, transparent 3%, #1f2d3d 130%);\r\n      bottom: 0;\r\n      content: '';\r\n      height: 20%;\r\n      left: 0;\r\n      opacity: 0.8;\r\n      position: absolute;\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  img {\r\n    width: 100%;\r\n    max-width: 250px;\r\n  }\r\n\r\n  .time {\r\n    @apply text-xs bottom-1 text-white ltr:right-3 rtl:left-3 whitespace-nowrap absolute;\r\n  }\r\n}\r\n</style>\r\n","<script setup>\r\ndefineProps({\r\n  url: { type: String, default: '' },\r\n  readableTime: { type: String, default: '' },\r\n});\r\n\r\nconst emit = defineEmits(['error']);\r\n\r\nconst onVideoError = () => {\r\n  emit('error');\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"relative block max-w-full\">\r\n    <video\r\n      class=\"w-full max-w-[250px] h-auto\"\r\n      :src=\"url\"\r\n      controls\r\n      @error=\"onVideoError\"\r\n    />\r\n    <span\r\n      class=\"absolute text-xs text-white dark:text-white right-3 bottom-1 whitespace-nowrap\"\r\n    >\r\n      {{ readableTime }}\r\n    </span>\r\n  </div>\r\n</template>\r\n","<script>\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\nimport { getContrastingTextColor } from '@chatwoot/utils';\r\n\r\nexport default {\r\n  components: {\r\n    FluentIcon,\r\n  },\r\n  props: {\r\n    url: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    isInProgress: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    widgetColor: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    isUserBubble: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  computed: {\r\n    title() {\r\n      return this.isInProgress\r\n        ? this.$t('COMPONENTS.FILE_BUBBLE.UPLOADING')\r\n        : decodeURI(this.fileName);\r\n    },\r\n    fileName() {\r\n      return this.url.substring(this.url.lastIndexOf('/') + 1);\r\n    },\r\n    contrastingTextColor() {\r\n      return getContrastingTextColor(this.widgetColor);\r\n    },\r\n    textColor() {\r\n      return this.isUserBubble && this.widgetColor\r\n        ? this.contrastingTextColor\r\n        : '';\r\n    },\r\n  },\r\n  methods: {\r\n    openLink() {\r\n      const win = window.open(this.url, '_blank');\r\n      win.focus();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"file flex flex-row items-center p-3 cursor-pointer\">\r\n    <div class=\"icon-wrap\" :style=\"{ color: textColor }\">\r\n      <FluentIcon icon=\"document\" size=\"28\" />\r\n    </div>\r\n    <div class=\"ltr:pr-1 rtl:pl-1\">\r\n      <div\r\n        class=\"m-0 font-medium text-sm\"\r\n        :class=\"{ 'text-n-slate-12': !isUserBubble }\"\r\n        :style=\"{ color: textColor }\"\r\n      >\r\n        {{ title }}\r\n      </div>\r\n      <div class=\"leading-none mb-1\">\r\n        <a\r\n          class=\"download\"\r\n          rel=\"noreferrer noopener nofollow\"\r\n          target=\"_blank\"\r\n          :style=\"{ color: textColor }\"\r\n          :href=\"url\"\r\n        >\r\n          {{ $t('COMPONENTS.FILE_BUBBLE.DOWNLOAD') }}\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.file {\r\n  .icon-wrap {\r\n    @apply text-[2.5rem] text-n-brand leading-none ltr:ml-1 rtl:mr-1 ltr:mr-2 rtl:ml-2;\r\n  }\r\n\r\n  .download {\r\n    @apply text-n-brand font-medium p-0 m-0 text-xs no-underline;\r\n  }\r\n}\r\n</style>\r\n","export default {\r\n  computed: {\r\n    messageContentAttributes() {\r\n      const { content_attributes: attribute = {} } = this.message;\r\n      return attribute;\r\n    },\r\n    hasAttachments() {\r\n      return !!(\r\n        this.message.attachments && this.message.attachments.length > 0\r\n      );\r\n    },\r\n  },\r\n};\r\n","<script>\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\n\r\nexport default {\r\n  name: 'AgentMessage',\r\n  components: {\r\n    FluentIcon,\r\n  },\r\n  props: {\r\n    replyTo: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      timeOutID: null,\r\n    };\r\n  },\r\n  computed: {\r\n    replyToAttachment() {\r\n      if (!this.replyTo?.attachments?.length) {\r\n        return '';\r\n      }\r\n\r\n      const [{ file_type: fileType } = {}] = this.replyTo.attachments;\r\n      return this.$t(`ATTACHMENTS.${fileType}.CONTENT`);\r\n    },\r\n  },\r\n\r\n  unmounted() {\r\n    clearTimeout(this.timeOutID);\r\n  },\r\n  methods: {\r\n    navigateTo(id) {\r\n      const elementId = `cwmsg-${id}`;\r\n      this.$nextTick(() => {\r\n        const el = document.getElementById(elementId);\r\n        el.scrollIntoView();\r\n        el.classList.add('bg-slate-100', 'dark:bg-slate-900');\r\n        this.timeOutID = setTimeout(() => {\r\n          el.classList.remove('bg-slate-100', 'dark:bg-slate-900');\r\n        }, 500);\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <button\r\n    class=\"px-1.5 py-0.5 rounded-md text-slate-500 bg-slate-50 dark:bg-slate-900 opacity-60 hover:opacity-100 cursor-pointer flex items-center gap-1.5\"\r\n    @click=\"navigateTo(replyTo.id)\"\r\n  >\r\n    <FluentIcon icon=\"arrow-reply\" size=\"12\" class=\"flex-shrink-0\" />\r\n    <div class=\"truncate max-w-[8rem]\">\r\n      {{ replyTo.content || replyToAttachment }}\r\n    </div>\r\n  </button>\r\n</template>\r\n","<script>\r\nexport default {\r\n  name: 'DragWrapper',\r\n  props: {\r\n    direction: {\r\n      type: String,\r\n      required: true,\r\n      validator: value => ['left', 'right'].includes(value),\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: ['dragged'],\r\n  data() {\r\n    return {\r\n      startX: null,\r\n      dragDistance: 0,\r\n      threshold: 50, // Threshold value in pixels\r\n    };\r\n  },\r\n  methods: {\r\n    handleTouchStart(event) {\r\n      if (this.disabled) return;\r\n      this.startX = event.touches[0].clientX;\r\n    },\r\n    handleTouchMove(event) {\r\n      if (this.disabled) return;\r\n      const touchX = event.touches[0].clientX;\r\n      let deltaX = touchX - this.startX;\r\n\r\n      if (this.direction === 'right') {\r\n        this.dragDistance = Math.min(this.threshold, deltaX);\r\n      } else if (this.direction === 'left') {\r\n        this.dragDistance = Math.max(-this.threshold, deltaX);\r\n      }\r\n    },\r\n    resetPosition() {\r\n      if (\r\n        (this.dragDistance >= this.threshold && this.direction === 'right') ||\r\n        (this.dragDistance <= -this.threshold && this.direction === 'left')\r\n      ) {\r\n        this.$emit('dragged', this.direction);\r\n      }\r\n      this.dragDistance = 0; // Reset the position after releasing the touch\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    :style=\"{ transform: `translateX(${dragDistance}px)` }\"\r\n    class=\"will-change-transform\"\r\n    @touchstart=\"handleTouchStart\"\r\n    @touchmove=\"handleTouchMove\"\r\n    @touchend=\"resetPosition\"\r\n  >\r\n    <slot />\r\n  </div>\r\n</template>\r\n","<script>\r\nimport UserMessageBubble from 'widget/components/UserMessageBubble.vue';\r\nimport MessageReplyButton from 'widget/components/MessageReplyButton.vue';\r\nimport ImageBubble from 'widget/components/ImageBubble.vue';\r\nimport VideoBubble from 'widget/components/VideoBubble.vue';\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\nimport FileBubble from 'widget/components/FileBubble.vue';\r\nimport { messageStamp } from 'shared/helpers/timeHelper';\r\nimport messageMixin from '../mixins/messageMixin';\r\nimport ReplyToChip from 'widget/components/ReplyToChip.vue';\r\nimport DragWrapper from 'widget/components/DragWrapper.vue';\r\nimport { BUS_EVENTS } from 'shared/constants/busEvents';\r\nimport { emitter } from 'shared/helpers/mitt';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n  name: 'UserMessage',\r\n  components: {\r\n    UserMessageBubble,\r\n    MessageReplyButton,\r\n    ImageBubble,\r\n    VideoBubble,\r\n    FileBubble,\r\n    FluentIcon,\r\n    ReplyToChip,\r\n    DragWrapper,\r\n  },\r\n  mixins: [messageMixin],\r\n  props: {\r\n    message: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    replyTo: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      hasImageError: false,\r\n      hasVideoError: false,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      widgetColor: 'appConfig/getWidgetColor',\r\n    }),\r\n\r\n    isInProgress() {\r\n      const { status = '' } = this.message;\r\n      return status === 'in_progress';\r\n    },\r\n    showTextBubble() {\r\n      const { message } = this;\r\n      return !!message.content;\r\n    },\r\n    readableTime() {\r\n      const { created_at: createdAt = '' } = this.message;\r\n      return messageStamp(createdAt);\r\n    },\r\n    isFailed() {\r\n      const { status = '' } = this.message;\r\n      return status === 'failed';\r\n    },\r\n    errorMessage() {\r\n      const { meta } = this.message;\r\n      return meta\r\n        ? meta.error\r\n        : this.$t('COMPONENTS.MESSAGE_BUBBLE.ERROR_MESSAGE');\r\n    },\r\n    hasReplyTo() {\r\n      return this.replyTo && (this.replyTo.content || this.replyTo.attachments);\r\n    },\r\n  },\r\n  watch: {\r\n    message() {\r\n      this.hasImageError = false;\r\n      this.hasVideoError = false;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.hasImageError = false;\r\n    this.hasVideoError = false;\r\n  },\r\n  methods: {\r\n    async retrySendMessage() {\r\n      await this.$store.dispatch(\r\n        'conversation/sendMessageWithData',\r\n        this.message\r\n      );\r\n    },\r\n    onImageLoadError() {\r\n      this.hasImageError = true;\r\n    },\r\n    onVideoLoadError() {\r\n      this.hasVideoError = true;\r\n    },\r\n    toggleReply() {\r\n      emitter.emit(BUS_EVENTS.TOGGLE_REPLY_TO_MESSAGE, this.message);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"user-message-wrap group\">\r\n    <div class=\"flex gap-1 user-message\">\r\n      <div\r\n        class=\"message-wrap\"\r\n        :class=\"{ 'in-progress': isInProgress, 'is-failed': isFailed }\"\r\n      >\r\n        <div v-if=\"hasReplyTo\" class=\"flex justify-end mt-2 mb-1 text-xs\">\r\n          <ReplyToChip :reply-to=\"replyTo\" />\r\n        </div>\r\n        <div class=\"flex justify-end gap-1\">\r\n          <div class=\"flex flex-col justify-end\">\r\n            <MessageReplyButton\r\n              v-if=\"!isInProgress && !isFailed\"\r\n              class=\"transition-opacity delay-75 opacity-0 group-hover:opacity-100 sm:opacity-0\"\r\n              @click=\"toggleReply\"\r\n            />\r\n          </div>\r\n          <DragWrapper direction=\"left\" @dragged=\"toggleReply\">\r\n            <UserMessageBubble\r\n              v-if=\"showTextBubble\"\r\n              :message=\"message.content\"\r\n              :status=\"message.status\"\r\n              :widget-color=\"widgetColor\"\r\n            />\r\n            <div\r\n              v-if=\"hasAttachments\"\r\n              class=\"chat-bubble has-attachment user\"\r\n              :style=\"{ backgroundColor: widgetColor }\"\r\n            >\r\n              <div\r\n                v-for=\"attachment in message.attachments\"\r\n                :key=\"attachment.id\"\r\n              >\r\n                <ImageBubble\r\n                  v-if=\"attachment.file_type === 'image' && !hasImageError\"\r\n                  :url=\"attachment.data_url\"\r\n                  :thumb=\"attachment.data_url\"\r\n                  :readable-time=\"readableTime\"\r\n                  @error=\"onImageLoadError\"\r\n                />\r\n\r\n                <VideoBubble\r\n                  v-if=\"attachment.file_type === 'video' && !hasVideoError\"\r\n                  :url=\"attachment.data_url\"\r\n                  :readable-time=\"readableTime\"\r\n                  @error=\"onVideoLoadError\"\r\n                />\r\n\r\n                <FileBubble\r\n                  v-else\r\n                  :url=\"attachment.data_url\"\r\n                  :is-in-progress=\"isInProgress\"\r\n                  :widget-color=\"widgetColor\"\r\n                  is-user-bubble\r\n                />\r\n              </div>\r\n            </div>\r\n          </DragWrapper>\r\n        </div>\r\n        <div\r\n          v-if=\"isFailed\"\r\n          class=\"flex justify-end px-4 py-2 text-n-ruby-9 align-middle\"\r\n        >\r\n          <button\r\n            v-if=\"!hasAttachments\"\r\n            :title=\"$t('COMPONENTS.MESSAGE_BUBBLE.RETRY')\"\r\n            class=\"inline-flex items-center justify-center ltr:ml-2 rtl:mr-2\"\r\n            @click=\"retrySendMessage\"\r\n          >\r\n            <FluentIcon icon=\"arrow-clockwise\" size=\"14\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n","<script>\r\nimport { mapGetters } from 'vuex';\r\nimport { getContrastingTextColor } from '@chatwoot/utils';\r\nimport { IFrameHelper } from 'widget/helpers/utils';\r\n\r\nexport default {\r\n  components: {},\r\n  props: {\r\n    action: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      widgetColor: 'appConfig/getWidgetColor',\r\n    }),\r\n    textColor() {\r\n      return getContrastingTextColor(this.widgetColor);\r\n    },\r\n    isLink() {\r\n      return this.action.type === 'link';\r\n    },\r\n  },\r\n  methods: {\r\n    onClick() {\r\n      if (this.action.type === 'postback') {\r\n        // Send message to parent iframe\r\n        if (IFrameHelper.isIFrame()) {\r\n          IFrameHelper.sendMessage({\r\n            event: 'postback',\r\n            data: { payload: this.action.payload },\r\n          });\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <a\r\n    v-if=\"isLink\"\r\n    :key=\"action.uri\"\r\n    class=\"action-button button\"\r\n    :href=\"action.uri\"\r\n    :style=\"{\r\n      background: widgetColor,\r\n      borderColor: widgetColor,\r\n      color: textColor,\r\n    }\"\r\n    target=\"_blank\"\r\n    rel=\"noopener nofollow noreferrer\"\r\n  >\r\n    {{ action.text }}\r\n  </a>\r\n  <button\r\n    v-else\r\n    :key=\"action.payload\"\r\n    class=\"action-button button !bg-n-background dark:!bg-n-alpha-black1 text-n-brand\"\r\n    :style=\"{ borderColor: widgetColor, color: widgetColor }\"\r\n    @click=\"onClick\"\r\n  >\r\n    {{ action.text }}\r\n  </button>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.action-button {\r\n  @apply items-center rounded-lg flex font-medium justify-center mt-1 p-0 w-full;\r\n}\r\n</style>\r\n","<script>\r\nimport CardButton from 'shared/components/CardButton.vue';\r\n\r\nexport default {\r\n  components: {\r\n    CardButton,\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    description: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    mediaUrl: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    actions: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"card-message chat-bubble agent bg-n-background dark:bg-n-solid-3 max-w-56 rounded-lg overflow-hidden\"\r\n  >\r\n    <img\r\n      class=\"w-full object-contain max-h-[150px] rounded-[5px]\"\r\n      :src=\"mediaUrl\"\r\n    />\r\n    <div class=\"card-body\">\r\n      <h4\r\n        class=\"!text-base !font-medium !mt-1 !mb-1 !leading-[1.5] text-n-slate-12\"\r\n      >\r\n        {{ title }}\r\n      </h4>\r\n      <p class=\"!mb-1 text-n-slate-11\">\r\n        {{ description }}\r\n      </p>\r\n      <CardButton v-for=\"action in actions\" :key=\"action.id\" :action=\"action\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n","<script>\r\nimport { mapGetters } from 'vuex';\r\nimport { getContrastingTextColor } from '@chatwoot/utils';\r\n\r\nexport default {\r\n  props: {\r\n    buttonLabel: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    items: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    submittedValues: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  emits: ['submit'],\r\n  data() {\r\n    return {\r\n      formValues: {},\r\n      hasSubmitted: false,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      widgetColor: 'appConfig/getWidgetColor',\r\n    }),\r\n    textColor() {\r\n      return getContrastingTextColor(this.widgetColor);\r\n    },\r\n    isFormValid() {\r\n      return this.items.reduce((acc, { name }) => {\r\n        return !!this.formValues[name] && acc;\r\n      }, true);\r\n    },\r\n  },\r\n  mounted() {\r\n    if (this.submittedValues.length) {\r\n      this.updateFormValues();\r\n    } else {\r\n      this.setFormDefaults();\r\n    }\r\n  },\r\n  methods: {\r\n    onSubmitClick() {\r\n      this.hasSubmitted = true;\r\n    },\r\n    onSubmit() {\r\n      if (!this.isFormValid) {\r\n        return;\r\n      }\r\n      this.$emit('submit', this.formValues);\r\n    },\r\n    buildFormObject(formObjectArray) {\r\n      return formObjectArray.reduce((acc, obj) => {\r\n        return {\r\n          ...acc,\r\n          [obj.name]: obj.value || obj.default,\r\n        };\r\n      }, {});\r\n    },\r\n    updateFormValues() {\r\n      this.formValues = this.buildFormObject(this.submittedValues);\r\n    },\r\n    setFormDefaults() {\r\n      this.formValues = this.buildFormObject(this.items);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"form chat-bubble agent w-full p-4 bg-n-background dark:bg-n-solid-3\"\r\n  >\r\n    <form @submit.prevent=\"onSubmit\">\r\n      <div\r\n        v-for=\"item in items\"\r\n        :key=\"item.key\"\r\n        class=\"pb-2 w-full\"\r\n        :class=\"{\r\n          'has-submitted': hasSubmitted,\r\n        }\"\r\n      >\r\n        <label class=\"text-n-slate-12\">\r\n          {{ item.label }}\r\n        </label>\r\n        <input\r\n          v-if=\"item.type === 'email'\"\r\n          v-model=\"formValues[item.name]\"\r\n          :type=\"item.type\"\r\n          :pattern=\"item.regex\"\r\n          :title=\"item.title\"\r\n          :required=\"item.required && 'required'\"\r\n          :name=\"item.name\"\r\n          :placeholder=\"item.placeholder\"\r\n          :disabled=\"!!submittedValues.length\"\r\n        />\r\n        <input\r\n          v-else-if=\"item.type === 'text'\"\r\n          v-model=\"formValues[item.name]\"\r\n          :required=\"item.required && 'required'\"\r\n          :pattern=\"item.pattern\"\r\n          :title=\"item.title\"\r\n          :type=\"item.type\"\r\n          :name=\"item.name\"\r\n          :placeholder=\"item.placeholder\"\r\n          :disabled=\"!!submittedValues.length\"\r\n        />\r\n        <textarea\r\n          v-else-if=\"item.type === 'text_area'\"\r\n          v-model=\"formValues[item.name]\"\r\n          :required=\"item.required && 'required'\"\r\n          :title=\"item.title\"\r\n          :name=\"item.name\"\r\n          :placeholder=\"item.placeholder\"\r\n          :disabled=\"!!submittedValues.length\"\r\n        />\r\n        <select\r\n          v-else-if=\"item.type === 'select'\"\r\n          v-model=\"formValues[item.name]\"\r\n          :required=\"item.required && 'required'\"\r\n        >\r\n          <option\r\n            v-for=\"option in item.options\"\r\n            :key=\"option.key\"\r\n            :value=\"option.value\"\r\n          >\r\n            {{ option.label }}\r\n          </option>\r\n        </select>\r\n        <span class=\"error-message\">\r\n          {{ item.pattern_error || $t('CHAT_FORM.INVALID.FIELD') }}\r\n        </span>\r\n      </div>\r\n      <button\r\n        v-if=\"!submittedValues.length\"\r\n        class=\"button block\"\r\n        type=\"submit\"\r\n        :style=\"{\r\n          background: widgetColor,\r\n          borderColor: widgetColor,\r\n          color: textColor,\r\n        }\"\r\n        @click=\"onSubmitClick\"\r\n      >\r\n        {{ buttonLabel || $t('COMPONENTS.FORM_BUBBLE.SUBMIT') }}\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.form {\r\n  label {\r\n    @apply block font-medium py-1 px-0 capitalize;\r\n  }\r\n\r\n  .button {\r\n    @apply text-sm rounded-lg;\r\n  }\r\n\r\n  .error-message {\r\n    @apply text-n-ruby-9 mt-1 hidden;\r\n  }\r\n\r\n  input,\r\n  textarea,\r\n  select {\r\n    @apply dark:bg-n-alpha-black1;\r\n  }\r\n\r\n  .has-submitted {\r\n    input:invalid,\r\n    textarea:invalid {\r\n      @apply outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9;\r\n    }\r\n    input:invalid + .error-message,\r\n    textarea:invalid + .error-message {\r\n      display: block;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<script>\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n  components: {},\r\n  props: {\r\n    action: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    isSelected: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: ['optionSelect'],\r\n  computed: {\r\n    ...mapGetters({\r\n      widgetColor: 'appConfig/getWidgetColor',\r\n    }),\r\n  },\r\n  methods: {\r\n    onClick() {\r\n      this.$emit('optionSelect', this.action);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <li\r\n    class=\"option\"\r\n    :class=\"{ 'is-selected': isSelected }\"\r\n    :style=\"{ borderColor: widgetColor }\"\r\n  >\r\n    <button class=\"option-button button\" @click=\"onClick\">\r\n      <span :style=\"{ color: widgetColor }\">{{ action.title }}</span>\r\n    </button>\r\n  </li>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.option {\r\n  @apply rounded-[5rem] border border-solid border-n-brand ltr:float-left rtl:float-right m-1 max-w-full;\r\n\r\n  .option-button {\r\n    @apply bg-transparent border-0 cursor-pointer h-auto leading-normal ltr:text-left rtl:text-right whitespace-normal rounded-[2rem] min-h-[2.5rem];\r\n\r\n    span {\r\n      display: inline-block;\r\n      vertical-align: middle;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<script>\r\nimport ChatOption from 'shared/components/ChatOption.vue';\r\nimport { useMessageFormatter } from 'shared/composables/useMessageFormatter';\r\n\r\nexport default {\r\n  components: {\r\n    ChatOption,\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    options: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    selected: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    hideFields: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: ['optionSelect'],\r\n  setup() {\r\n    const { formatMessage } = useMessageFormatter();\r\n    return {\r\n      formatMessage,\r\n    };\r\n  },\r\n  methods: {\r\n    isSelected(option) {\r\n      return this.selected === option.id;\r\n    },\r\n    onClick(selectedOption) {\r\n      this.$emit('optionSelect', selectedOption);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"chat-bubble agent max-w-64 !py-2 !px-4 rounded-lg overflow-hidden mt-1 bg-n-background dark:bg-n-solid-3\"\r\n  >\r\n    <h4 class=\"text-n-slate-12 text-sm font-normal my-1 leading-[1.5]\">\r\n      <div\r\n        v-dompurify-html=\"formatMessage(title, false)\"\r\n        class=\"text-n-slate-12\"\r\n      />\r\n    </h4>\r\n    <ul v-if=\"!hideFields\" class=\"w-full\">\r\n      <ChatOption\r\n        v-for=\"option in options\"\r\n        :key=\"option.id\"\r\n        :action=\"option\"\r\n        :is-selected=\"isSelected(option)\"\r\n        class=\"list-none p-0\"\r\n        @option-select=\"onClick\"\r\n      />\r\n    </ul>\r\n  </div>\r\n</template>\r\n","<script>\r\nimport { useMessageFormatter } from 'shared/composables/useMessageFormatter';\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\n\r\nexport default {\r\n  components: {\r\n    FluentIcon,\r\n  },\r\n  props: {\r\n    items: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  setup() {\r\n    const { truncateMessage } = useMessageFormatter();\r\n    return { truncateMessage };\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- eslint-disable-next-line vue/no-root-v-if -->\r\n<template>\r\n  <div\r\n    v-if=\"!!items.length\"\r\n    class=\"chat-bubble agent bg-n-background dark:bg-n-solid-3\"\r\n  >\r\n    <div\r\n      v-for=\"item in items\"\r\n      :key=\"item.link\"\r\n      class=\"border-b border-solid border-n-weak text-sm py-2 px-0 last:border-b-0\"\r\n    >\r\n      <a\r\n        :href=\"item.link\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer nofollow\"\r\n        class=\"text-n-slate-12 no-underline\"\r\n      >\r\n        <span class=\"flex items-center text-black-900 font-medium\">\r\n          <FluentIcon icon=\"link\" class=\"ltr:mr-1 rtl:ml-1 text-n-slate-12\" />\r\n          <span class=\"text-n-slate-12\">\r\n            {{ item.title }}\r\n          </span>\r\n        </span>\r\n        <span class=\"block mt-1 text-n-slate-12\">\r\n          {{ truncateMessage(item.description) }}\r\n        </span>\r\n      </a>\r\n    </div>\r\n  </div>\r\n</template>\r\n","<script>\r\nimport { mapGetters } from 'vuex';\r\nimport { useVuelidate } from '@vuelidate/core';\r\nimport { required, email } from '@vuelidate/validators';\r\nimport { getContrastingTextColor } from '@chatwoot/utils';\r\n\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\nimport Spinner from 'shared/components/Spinner.vue';\r\n\r\nexport default {\r\n  components: {\r\n    FluentIcon,\r\n    Spinner,\r\n  },\r\n  props: {\r\n    messageId: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    messageContentAttributes: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  data() {\r\n    return {\r\n      email: '',\r\n      isUpdating: false,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      widgetColor: 'appConfig/getWidgetColor',\r\n    }),\r\n    textColor() {\r\n      return getContrastingTextColor(this.widgetColor);\r\n    },\r\n    hasSubmitted() {\r\n      return (\r\n        this.messageContentAttributes &&\r\n        this.messageContentAttributes.submitted_email\r\n      );\r\n    },\r\n  },\r\n  validations: {\r\n    email: {\r\n      required,\r\n      email,\r\n    },\r\n  },\r\n  methods: {\r\n    async onSubmit() {\r\n      if (this.v$.$invalid) {\r\n        return;\r\n      }\r\n      this.isUpdating = true;\r\n      try {\r\n        await this.$store.dispatch('message/update', {\r\n          email: this.email,\r\n          messageId: this.messageId,\r\n        });\r\n      } catch (error) {\r\n        // Ignore error\r\n      } finally {\r\n        this.isUpdating = false;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <form\r\n      v-if=\"!hasSubmitted\"\r\n      class=\"email-input-group h-10 flex my-2 mx-0 min-w-[200px]\"\r\n      @submit.prevent=\"onSubmit\"\r\n    >\r\n      <input\r\n        v-model=\"email\"\r\n        type=\"email\"\r\n        :placeholder=\"$t('EMAIL_PLACEHOLDER')\"\r\n        :class=\"{ error: v$.email.$error }\"\r\n        @input=\"v$.email.$touch\"\r\n        @keydown.enter=\"onSubmit\"\r\n      />\r\n      <button\r\n        class=\"button small\"\r\n        :disabled=\"v$.email.$invalid\"\r\n        :style=\"{\r\n          background: widgetColor,\r\n          borderColor: widgetColor,\r\n          color: textColor,\r\n        }\"\r\n      >\r\n        <FluentIcon v-if=\"!isUpdating\" icon=\"chevron-right\" />\r\n        <Spinner v-else class=\"mx-2\" />\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.email-input-group {\r\n  input {\r\n    @apply dark:bg-n-alpha-black1 rtl:rounded-tl-[0] ltr:rounded-tr-[0] rtl:rounded-bl-[0] ltr:rounded-br-[0] p-2.5 w-full focus:ring-0 focus:outline-n-brand;\r\n\r\n    &::placeholder {\r\n      @apply text-n-slate-10;\r\n    }\r\n\r\n    &.error {\r\n      @apply outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9;\r\n    }\r\n  }\r\n\r\n  .button {\r\n    @apply rtl:rounded-tr-[0] ltr:rounded-tl-[0] rtl:rounded-br-[0] ltr:rounded-bl-[0] rounded-lg h-auto ltr:-ml-px rtl:-mr-px text-xl;\r\n\r\n    .spinner {\r\n      display: block;\r\n      padding: 0;\r\n      height: auto;\r\n      width: auto;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<script>\r\nimport { mapGetters } from 'vuex';\r\nimport Spinner from 'shared/components/Spinner.vue';\r\nimport { CSAT_RATINGS, CSAT_DISPLAY_TYPES } from 'shared/constants/messages';\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\nimport StarRating from 'shared/components/StarRating.vue';\r\nimport { getContrastingTextColor } from '@chatwoot/utils';\r\n\r\nexport default {\r\n  components: {\r\n    Spinner,\r\n    FluentIcon,\r\n    StarRating,\r\n  },\r\n  props: {\r\n    messageContentAttributes: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    messageId: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    displayType: {\r\n      type: String,\r\n      default: CSAT_DISPLAY_TYPES.EMOJI,\r\n    },\r\n    message: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      email: '',\r\n      ratings: CSAT_RATINGS,\r\n      selectedRating: null,\r\n      isUpdating: false,\r\n      feedback: '',\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({ widgetColor: 'appConfig/getWidgetColor' }),\r\n    isRatingSubmitted() {\r\n      return this.messageContentAttributes?.csat_survey_response?.rating;\r\n    },\r\n    isFeedbackSubmitted() {\r\n      return this.messageContentAttributes?.csat_survey_response\r\n        ?.feedback_message;\r\n    },\r\n    isButtonDisabled() {\r\n      return !(this.selectedRating && this.feedback);\r\n    },\r\n    textColor() {\r\n      return getContrastingTextColor(this.widgetColor);\r\n    },\r\n    title() {\r\n      return this.isRatingSubmitted\r\n        ? this.$t('CSAT.SUBMITTED_TITLE')\r\n        : this.message || this.$t('CSAT.TITLE');\r\n    },\r\n    isEmojiType() {\r\n      return this.displayType === CSAT_DISPLAY_TYPES.EMOJI;\r\n    },\r\n    isStarType() {\r\n      return this.displayType === CSAT_DISPLAY_TYPES.STAR;\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    if (this.isRatingSubmitted) {\r\n      const {\r\n        csat_survey_response: { rating, feedback_message },\r\n      } = this.messageContentAttributes;\r\n      this.selectedRating = rating;\r\n      this.feedback = feedback_message;\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    buttonClass(rating) {\r\n      return [\r\n        { selected: rating.value === this.selectedRating },\r\n        { disabled: this.isRatingSubmitted },\r\n        { hover: this.isRatingSubmitted },\r\n        'emoji-button',\r\n      ];\r\n    },\r\n    async onSubmit() {\r\n      this.isUpdating = true;\r\n      try {\r\n        await this.$store.dispatch('message/update', {\r\n          submittedValues: {\r\n            csat_survey_response: {\r\n              rating: this.selectedRating,\r\n              feedback_message: this.feedback,\r\n            },\r\n          },\r\n          messageId: this.messageId,\r\n        });\r\n      } catch (error) {\r\n        // Ignore error\r\n      } finally {\r\n        this.isUpdating = false;\r\n      }\r\n    },\r\n\r\n    selectRating(rating) {\r\n      this.selectedRating = rating.value;\r\n      this.onSubmit();\r\n    },\r\n    selectStarRating(value) {\r\n      this.selectedRating = value;\r\n      this.onSubmit();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"customer-satisfaction w-full bg-n-background dark:bg-n-solid-3 shadow-[0_0.25rem_6px_rgba(50,50,93,0.08),0_1px_3px_rgba(0,0,0,0.05)] ltr:rounded-bl-[0.25rem] rtl:rounded-br-[0.25rem] rounded-lg inline-block leading-[1.5] mt-1 border-t-2 border-t-n-brand border-solid\"\r\n    :style=\"{ borderColor: widgetColor }\"\r\n  >\r\n    <h6 class=\"text-n-slate-12 text-sm font-medium pt-5 px-2.5 text-center\">\r\n      {{ title }}\r\n    </h6>\r\n    <div v-if=\"isEmojiType\" class=\"ratings flex justify-around py-5 px-4\">\r\n      <button\r\n        v-for=\"rating in ratings\"\r\n        :key=\"rating.key\"\r\n        :class=\"buttonClass(rating)\"\r\n        @click=\"selectRating(rating)\"\r\n      >\r\n        {{ rating.emoji }}\r\n      </button>\r\n    </div>\r\n    <StarRating\r\n      v-else-if=\"isStarType\"\r\n      :selected-rating=\"selectedRating\"\r\n      :is-disabled=\"isRatingSubmitted\"\r\n      @select-rating=\"selectStarRating\"\r\n    />\r\n    <form\r\n      v-if=\"!isFeedbackSubmitted\"\r\n      class=\"feedback-form flex\"\r\n      @submit.prevent=\"onSubmit()\"\r\n    >\r\n      <input\r\n        v-model=\"feedback\"\r\n        :placeholder=\"$t('CSAT.PLACEHOLDER')\"\r\n        @keydown.enter=\"onSubmit\"\r\n      />\r\n      <button\r\n        class=\"button small\"\r\n        :disabled=\"isButtonDisabled\"\r\n        :style=\"{\r\n          background: widgetColor,\r\n          borderColor: widgetColor,\r\n          color: textColor,\r\n        }\"\r\n      >\r\n        <Spinner v-if=\"isUpdating && feedback\" />\r\n        <FluentIcon v-else icon=\"chevron-right\" />\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.customer-satisfaction {\r\n  .ratings {\r\n    .emoji-button {\r\n      @apply shadow-none grayscale text-2xl outline-none transition-all duration-200;\r\n\r\n      &.selected,\r\n      &:hover,\r\n      &:focus,\r\n      &:active {\r\n        @apply grayscale-0 scale-[1.32];\r\n      }\r\n\r\n      &.disabled {\r\n        @apply cursor-not-allowed opacity-50 pointer-events-none;\r\n      }\r\n    }\r\n  }\r\n\r\n  .feedback-form {\r\n    input {\r\n      @apply h-10 dark:bg-n-alpha-black1 rtl:rounded-tl-[0] rtl:rounded-tr-[0] ltr:rounded-tr-[0] ltr:rounded-tl-[0] rtl:rounded-bl-[0] ltr:rounded-br-[0] ltr:rounded-bl-[0.25rem] rtl:rounded-br-[0.25rem] rounded-lg p-2.5 w-full focus:ring-0 focus:outline-n-brand;\r\n\r\n      &::placeholder {\r\n        @apply text-n-slate-10;\r\n      }\r\n    }\r\n\r\n    .button {\r\n      @apply rtl:rounded-tr-[0] rtl:rounded-tl-[0] appearance-none ltr:rounded-tl-[0] ltr:rounded-tr-[0] rtl:rounded-br-[0] ltr:rounded-bl-[0] rounded-lg h-auto ltr:-ml-px rtl:-mr-px text-xl;\r\n\r\n      .spinner {\r\n        display: block;\r\n        padding: 0;\r\n        height: auto;\r\n        width: auto;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { API } from 'widget/helpers/axios';\r\nimport { buildSearchParamsWithLocale } from '../helpers/urlParamsHelper';\r\n\r\nexport default {\r\n  addParticipantToDyteMeeting: messageId => {\r\n    const search = buildSearchParamsWithLocale(window.location.search);\r\n    const urlData = {\r\n      url: `/api/v1/widget/integrations/dyte/add_participant_to_meeting${search}`,\r\n    };\r\n    return API.post(urlData.url, { message_id: messageId });\r\n  },\r\n};\r\n","<script>\r\nimport IntegrationAPIClient from 'widget/api/integration';\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\nimport { buildDyteURL } from 'shared/helpers/IntegrationHelper';\r\nimport { getContrastingTextColor } from '@chatwoot/utils';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n  components: {\r\n    FluentIcon,\r\n  },\r\n  props: {\r\n    messageId: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return { isLoading: false, dyteAuthToken: '', isSDKMounted: false };\r\n  },\r\n  computed: {\r\n    ...mapGetters({ widgetColor: 'appConfig/getWidgetColor' }),\r\n    textColor() {\r\n      return getContrastingTextColor(this.widgetColor);\r\n    },\r\n    meetingLink() {\r\n      return buildDyteURL(this.dyteAuthToken);\r\n    },\r\n  },\r\n  methods: {\r\n    async joinTheCall() {\r\n      this.isLoading = true;\r\n      try {\r\n        const response = await IntegrationAPIClient.addParticipantToDyteMeeting(\r\n          this.messageId\r\n        );\r\n        const { data: { token } = {} } = response;\r\n        this.dyteAuthToken = token;\r\n      } catch (error) {\r\n        // Ignore Error for now\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    leaveTheRoom() {\r\n      this.dyteAuthToken = '';\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <button\r\n      class=\"button join-call-button\"\r\n      color-scheme=\"secondary\"\r\n      :is-loading=\"isLoading\"\r\n      :style=\"{\r\n        background: widgetColor,\r\n        borderColor: widgetColor,\r\n        color: textColor,\r\n      }\"\r\n      @click=\"joinTheCall\"\r\n    >\r\n      <FluentIcon icon=\"video-add\" class=\"rtl:ml-2 ltr:mr-2\" />\r\n      {{ $t('INTEGRATIONS.DYTE.CLICK_HERE_TO_JOIN') }}\r\n    </button>\r\n    <div v-if=\"dyteAuthToken\" class=\"video-call--container\">\r\n      <iframe\r\n        :src=\"meetingLink\"\r\n        allow=\"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;\"\r\n      />\r\n      <button\r\n        class=\"button small join-call-button leave-room-button\"\r\n        @click=\"leaveTheRoom\"\r\n      >\r\n        {{ $t('INTEGRATIONS.DYTE.LEAVE_THE_ROOM') }}\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.video-call--container {\r\n  position: fixed;\r\n  top: 72px;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  z-index: 100;\r\n\r\n  iframe {\r\n    width: 100%;\r\n    height: calc(100% - 72px);\r\n\r\n    border: 0;\r\n  }\r\n}\r\n\r\n.join-call-button {\r\n  @apply flex items-center my-2 rounded-lg;\r\n}\r\n\r\n.leave-room-button {\r\n  @apply absolute top-0 ltr:right-2 rtl:left-2 px-1 rounded-md;\r\n}\r\n</style>\r\n","<script>\r\nimport { useMessageFormatter } from 'shared/composables/useMessageFormatter';\r\nimport ChatCard from 'shared/components/ChatCard.vue';\r\nimport ChatForm from 'shared/components/ChatForm.vue';\r\nimport ChatOptions from 'shared/components/ChatOptions.vue';\r\nimport ChatArticle from './template/Article.vue';\r\nimport EmailInput from './template/EmailInput.vue';\r\nimport CustomerSatisfaction from 'shared/components/CustomerSatisfaction.vue';\r\nimport IntegrationCard from './template/IntegrationCard.vue';\r\n\r\nexport default {\r\n  name: 'AgentMessageBubble',\r\n  components: {\r\n    ChatArticle,\r\n    ChatCard,\r\n    ChatForm,\r\n    ChatOptions,\r\n    EmailInput,\r\n    CustomerSatisfaction,\r\n    IntegrationCard,\r\n  },\r\n  props: {\r\n    message: { type: String, default: null },\r\n    contentType: { type: String, default: null },\r\n    messageType: { type: Number, default: null },\r\n    messageId: { type: Number, default: null },\r\n    messageContentAttributes: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  setup() {\r\n    const { formatMessage, getPlainText, truncateMessage, highlightContent } =\r\n      useMessageFormatter();\r\n    return {\r\n      formatMessage,\r\n      getPlainText,\r\n      truncateMessage,\r\n      highlightContent,\r\n    };\r\n  },\r\n  computed: {\r\n    isTemplate() {\r\n      return this.messageType === 3;\r\n    },\r\n    isTemplateEmail() {\r\n      return this.contentType === 'input_email';\r\n    },\r\n    isCards() {\r\n      return this.contentType === 'cards';\r\n    },\r\n    isOptions() {\r\n      return this.contentType === 'input_select';\r\n    },\r\n    isForm() {\r\n      return this.contentType === 'form';\r\n    },\r\n    isArticle() {\r\n      return this.contentType === 'article';\r\n    },\r\n    isCSAT() {\r\n      return this.contentType === 'input_csat';\r\n    },\r\n    isIntegrations() {\r\n      return this.contentType === 'integrations';\r\n    },\r\n  },\r\n  methods: {\r\n    onResponse(messageResponse) {\r\n      this.$store.dispatch('message/update', messageResponse);\r\n    },\r\n    onOptionSelect(selectedOption) {\r\n      this.onResponse({\r\n        submittedValues: [selectedOption],\r\n        messageId: this.messageId,\r\n      });\r\n    },\r\n    onFormSubmit(formValues) {\r\n      const formValuesAsArray = Object.keys(formValues).map(key => ({\r\n        name: key,\r\n        value: formValues[key],\r\n      }));\r\n      this.onResponse({\r\n        submittedValues: formValuesAsArray,\r\n        messageId: this.messageId,\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"chat-bubble-wrap\">\r\n    <div\r\n      v-if=\"\r\n        !isCards && !isOptions && !isForm && !isArticle && !isCards && !isCSAT\r\n      \"\r\n      class=\"chat-bubble agent bg-n-background dark:bg-n-solid-3 text-n-slate-12\"\r\n    >\r\n      <div\r\n        v-dompurify-html=\"formatMessage(message, false)\"\r\n        class=\"message-content text-n-slate-12\"\r\n      />\r\n      <EmailInput\r\n        v-if=\"isTemplateEmail\"\r\n        :message-id=\"messageId\"\r\n        :message-content-attributes=\"messageContentAttributes\"\r\n      />\r\n\r\n      <IntegrationCard\r\n        v-if=\"isIntegrations\"\r\n        :message-id=\"messageId\"\r\n        :meeting-data=\"messageContentAttributes.data\"\r\n      />\r\n    </div>\r\n    <div v-if=\"isOptions\">\r\n      <ChatOptions\r\n        :title=\"message\"\r\n        :options=\"messageContentAttributes.items\"\r\n        :hide-fields=\"!!messageContentAttributes.submitted_values\"\r\n        @option-select=\"onOptionSelect\"\r\n      />\r\n    </div>\r\n    <ChatForm\r\n      v-if=\"isForm && !messageContentAttributes.submitted_values\"\r\n      :items=\"messageContentAttributes.items\"\r\n      :button-label=\"messageContentAttributes.button_label\"\r\n      :submitted-values=\"messageContentAttributes.submitted_values\"\r\n      @submit=\"onFormSubmit\"\r\n    />\r\n    <div v-if=\"isCards\">\r\n      <ChatCard\r\n        v-for=\"item in messageContentAttributes.items\"\r\n        :key=\"item.title\"\r\n        :media-url=\"item.media_url\"\r\n        :title=\"item.title\"\r\n        :description=\"item.description\"\r\n        :actions=\"item.actions\"\r\n      />\r\n    </div>\r\n    <div v-if=\"isArticle\">\r\n      <ChatArticle :items=\"messageContentAttributes.items\" />\r\n    </div>\r\n    <CustomerSatisfaction\r\n      v-if=\"isCSAT\"\r\n      :message-content-attributes=\"messageContentAttributes.submitted_values\"\r\n      :display-type=\"messageContentAttributes.display_type\"\r\n      :message=\"message\"\r\n      :message-id=\"messageId\"\r\n    />\r\n  </div>\r\n</template>\r\n","<script>\r\nimport UserMessage from 'widget/components/UserMessage.vue';\r\nimport AgentMessageBubble from 'widget/components/AgentMessageBubble.vue';\r\nimport MessageReplyButton from 'widget/components/MessageReplyButton.vue';\r\nimport { messageStamp } from 'shared/helpers/timeHelper';\r\nimport ImageBubble from 'widget/components/ImageBubble.vue';\r\nimport VideoBubble from 'widget/components/VideoBubble.vue';\r\nimport FileBubble from 'widget/components/FileBubble.vue';\r\nimport Thumbnail from 'dashboard/components/widgets/Thumbnail.vue';\r\nimport { MESSAGE_TYPE } from 'widget/helpers/constants';\r\nimport configMixin from '../mixins/configMixin';\r\nimport messageMixin from '../mixins/messageMixin';\r\nimport { isASubmittedFormMessage } from 'shared/helpers/MessageTypeHelper';\r\nimport ReplyToChip from 'widget/components/ReplyToChip.vue';\r\nimport { BUS_EVENTS } from 'shared/constants/busEvents';\r\nimport { emitter } from 'shared/helpers/mitt';\r\n\r\nexport default {\r\n  name: 'AgentMessage',\r\n  components: {\r\n    AgentMessageBubble,\r\n    ImageBubble,\r\n    VideoBubble,\r\n    Thumbnail,\r\n    UserMessage,\r\n    FileBubble,\r\n    MessageReplyButton,\r\n    ReplyToChip,\r\n  },\r\n  mixins: [configMixin, messageMixin],\r\n  props: {\r\n    message: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    replyTo: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      hasImageError: false,\r\n      hasVideoError: false,\r\n    };\r\n  },\r\n  computed: {\r\n    shouldDisplayAgentMessage() {\r\n      if (\r\n        this.contentType === 'input_select' &&\r\n        this.messageContentAttributes.submitted_values &&\r\n        !this.message.content\r\n      ) {\r\n        return false;\r\n      }\r\n      return this.message.content;\r\n    },\r\n    readableTime() {\r\n      const { created_at: createdAt = '' } = this.message;\r\n      return messageStamp(createdAt, 'LLL d yyyy, h:mm a');\r\n    },\r\n    messageType() {\r\n      const { message_type: type = 1 } = this.message;\r\n      return type;\r\n    },\r\n    contentType() {\r\n      const { content_type: type = '' } = this.message;\r\n      return type;\r\n    },\r\n    agentName() {\r\n      if (this.message.sender) {\r\n        return this.message.sender.available_name || this.message.sender.name;\r\n      }\r\n\r\n      if (this.useInboxAvatarForBot) {\r\n        return this.channelConfig.websiteName;\r\n      }\r\n\r\n      return this.$t('UNREAD_VIEW.BOT');\r\n    },\r\n    avatarUrl() {\r\n      const displayImage = this.useInboxAvatarForBot\r\n        ? this.inboxAvatarUrl\r\n        : '/assets/images/chatwoot_bot.png';\r\n\r\n      if (this.message.message_type === MESSAGE_TYPE.TEMPLATE) {\r\n        return displayImage;\r\n      }\r\n\r\n      return this.message.sender\r\n        ? this.message.sender.avatar_url\r\n        : displayImage;\r\n    },\r\n    hasRecordedResponse() {\r\n      return (\r\n        this.messageContentAttributes.submitted_email ||\r\n        (this.messageContentAttributes.submitted_values &&\r\n          !['form', 'input_csat'].includes(this.contentType))\r\n      );\r\n    },\r\n    responseMessage() {\r\n      if (this.messageContentAttributes.submitted_email) {\r\n        return { content: this.messageContentAttributes.submitted_email };\r\n      }\r\n\r\n      if (this.messageContentAttributes.submitted_values) {\r\n        if (this.contentType === 'input_select') {\r\n          const [selectionOption = {}] =\r\n            this.messageContentAttributes.submitted_values;\r\n          return { content: selectionOption.title || selectionOption.value };\r\n        }\r\n      }\r\n      return '';\r\n    },\r\n    isASubmittedForm() {\r\n      return isASubmittedFormMessage(this.message);\r\n    },\r\n    submittedFormValues() {\r\n      return this.messageContentAttributes.submitted_values.map(\r\n        submittedValue => ({\r\n          id: submittedValue.name,\r\n          content: submittedValue.value,\r\n        })\r\n      );\r\n    },\r\n    wrapClass() {\r\n      return {\r\n        'has-text': this.shouldDisplayAgentMessage,\r\n      };\r\n    },\r\n    hasReplyTo() {\r\n      return this.replyTo && (this.replyTo.content || this.replyTo.attachments);\r\n    },\r\n  },\r\n  watch: {\r\n    message() {\r\n      this.hasImageError = false;\r\n      this.hasVideoError = false;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.hasImageError = false;\r\n    this.hasVideoError = false;\r\n  },\r\n  methods: {\r\n    onImageLoadError() {\r\n      this.hasImageError = true;\r\n    },\r\n    onVideoLoadError() {\r\n      this.hasVideoError = true;\r\n    },\r\n    toggleReply() {\r\n      emitter.emit(BUS_EVENTS.TOGGLE_REPLY_TO_MESSAGE, this.message);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"agent-message-wrap group\"\r\n    :class=\"{\r\n      'has-response': hasRecordedResponse || isASubmittedForm,\r\n    }\"\r\n  >\r\n    <div v-if=\"!isASubmittedForm\" class=\"agent-message\">\r\n      <div class=\"avatar-wrap\">\r\n        <Thumbnail\r\n          v-if=\"message.showAvatar || hasRecordedResponse\"\r\n          :src=\"avatarUrl\"\r\n          size=\"24px\"\r\n          :username=\"agentName\"\r\n        />\r\n      </div>\r\n      <div class=\"message-wrap\">\r\n        <div v-if=\"hasReplyTo\" class=\"flex mt-2 mb-1 text-xs\">\r\n          <ReplyToChip :reply-to=\"replyTo\" />\r\n        </div>\r\n        <div class=\"flex w-full gap-1\">\r\n          <div\r\n            class=\"space-y-2\"\r\n            :class=\"{\r\n              'w-full':\r\n                contentType === 'form' &&\r\n                !messageContentAttributes?.submitted_values,\r\n            }\"\r\n          >\r\n            <AgentMessageBubble\r\n              v-if=\"shouldDisplayAgentMessage\"\r\n              :content-type=\"contentType\"\r\n              :message-content-attributes=\"messageContentAttributes\"\r\n              :message-id=\"message.id\"\r\n              :message-type=\"messageType\"\r\n              :message=\"message.content\"\r\n            />\r\n            <div\r\n              v-if=\"hasAttachments\"\r\n              class=\"space-y-2 chat-bubble has-attachment agent bg-n-background dark:bg-n-solid-3\"\r\n              :class=\"wrapClass\"\r\n            >\r\n              <div\r\n                v-for=\"attachment in message.attachments\"\r\n                :key=\"attachment.id\"\r\n              >\r\n                <ImageBubble\r\n                  v-if=\"attachment.file_type === 'image' && !hasImageError\"\r\n                  :url=\"attachment.data_url\"\r\n                  :thumb=\"attachment.data_url\"\r\n                  :readable-time=\"readableTime\"\r\n                  @error=\"onImageLoadError\"\r\n                />\r\n\r\n                <VideoBubble\r\n                  v-if=\"attachment.file_type === 'video' && !hasVideoError\"\r\n                  :url=\"attachment.data_url\"\r\n                  :readable-time=\"readableTime\"\r\n                  @error=\"onVideoLoadError\"\r\n                />\r\n\r\n                <audio\r\n                  v-else-if=\"attachment.file_type === 'audio'\"\r\n                  controls\r\n                  class=\"h-10 dark:invert\"\r\n                >\r\n                  <source :src=\"attachment.data_url\" />\r\n                </audio>\r\n                <FileBubble v-else :url=\"attachment.data_url\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"flex flex-col justify-end\">\r\n            <MessageReplyButton\r\n              class=\"transition-opacity delay-75 opacity-0 group-hover:opacity-100 sm:opacity-0\"\r\n              @click=\"toggleReply\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <p\r\n          v-if=\"message.showAvatar || hasRecordedResponse\"\r\n          v-dompurify-html=\"agentName\"\r\n          class=\"agent-name text-n-slate-11\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <UserMessage v-if=\"hasRecordedResponse\" :message=\"responseMessage\" />\r\n    <div v-if=\"isASubmittedForm\">\r\n      <UserMessage\r\n        v-for=\"submittedValue in submittedFormValues\"\r\n        :key=\"submittedValue.id\"\r\n        :message=\"submittedValue\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n","<script>\r\nimport AgentMessage from 'widget/components/AgentMessage.vue';\r\nimport UserMessage from 'widget/components/UserMessage.vue';\r\nimport { mapGetters } from 'vuex';\r\nimport { MESSAGE_TYPE } from 'widget/helpers/constants';\r\n\r\nexport default {\r\n  components: {\r\n    AgentMessage,\r\n    UserMessage,\r\n  },\r\n  props: {\r\n    message: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      allMessages: 'conversation/getConversation',\r\n    }),\r\n    isUserMessage() {\r\n      return this.message.message_type === MESSAGE_TYPE.INCOMING;\r\n    },\r\n    replyTo() {\r\n      const replyTo = this.message?.content_attributes?.in_reply_to;\r\n      return replyTo ? this.allMessages[replyTo] : null;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <UserMessage\r\n    v-if=\"isUserMessage\"\r\n    :id=\"`cwmsg-${message.id}`\"\r\n    :message=\"message\"\r\n    :reply-to=\"replyTo\"\r\n  />\r\n  <AgentMessage\r\n    v-else\r\n    :id=\"`cwmsg-${message.id}`\"\r\n    :message=\"message\"\r\n    :reply-to=\"replyTo\"\r\n  />\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.message-wrap {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: flex-end;\r\n  max-width: 90%;\r\n}\r\n</style>\r\n","<script>\r\nexport default {\r\n  name: 'AgentTypingBubble',\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"agent-message-wrap sticky bottom-1\">\r\n    <div class=\"agent-message\">\r\n      <div class=\"avatar-wrap\" />\r\n      <div class=\"message-wrap mt-2\">\r\n        <div\r\n          class=\"chat-bubble agent typing-bubble bg-n-background dark:bg-n-solid-3\"\r\n        >\r\n          <img\r\n            src=\"assets/images/typing.gif\"\r\n            alt=\"Agent is typing a message\"\r\n            class=\"!w-full\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.typing-bubble {\r\n  @apply max-w-[2.4rem] p-2 ltr:rounded-bl-[1.25rem] rtl:rounded-br-[1.25rem] ltr:rounded-tl-lg rtl:rounded-tr-lg;\r\n}\r\n</style>\r\n","<script>\r\nimport { formatDate } from 'shared/helpers/DateHelper';\r\n\r\nexport default {\r\n  props: {\r\n    date: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  computed: {\r\n    formattedDate() {\r\n      return formatDate({\r\n        date: this.date,\r\n        todayText: this.$t('TODAY'),\r\n        yesterdayText: this.$t('YESTERDAY'),\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"text-sm text-n-slate-11 h-[50px] leading-[50px] relative text-center w-full before:content-[''] before:h-px before:absolute before:top-6 before:w-[calc((100%-120px)/2)] before:bg-n-slate-4 before:dark:bg-n-slate-6 before:left-0 after:content-[''] after:h-px after:absolute after:top-6 after:w-[calc((100%-120px)/2)] after:bg-n-slate-4 after:dark:bg-n-slate-6 after:right-0\"\r\n  >\r\n    {{ formattedDate }}\r\n  </div>\r\n</template>\r\n","<script>\r\nimport ChatMessage from 'widget/components/ChatMessage.vue';\r\nimport AgentTypingBubble from 'widget/components/AgentTypingBubble.vue';\r\nimport DateSeparator from 'shared/components/DateSeparator.vue';\r\nimport Spinner from 'shared/components/Spinner.vue';\r\nimport { useDarkMode } from 'widget/composables/useDarkMode';\r\nimport { MESSAGE_TYPE } from 'shared/constants/messages';\r\nimport { mapActions, mapGetters } from 'vuex';\r\n\r\nexport default {\r\n  name: 'ConversationWrap',\r\n  components: {\r\n    ChatMessage,\r\n    AgentTypingBubble,\r\n    DateSeparator,\r\n    Spinner,\r\n  },\r\n  props: {\r\n    groupedMessages: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  setup() {\r\n    const { darkMode } = useDarkMode();\r\n    return { darkMode };\r\n  },\r\n  data() {\r\n    return {\r\n      previousScrollHeight: 0,\r\n      previousConversationSize: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      earliestMessage: 'conversation/getEarliestMessage',\r\n      lastMessage: 'conversation/getLastMessage',\r\n      allMessagesLoaded: 'conversation/getAllMessagesLoaded',\r\n      isFetchingList: 'conversation/getIsFetchingList',\r\n      conversationSize: 'conversation/getConversationSize',\r\n      isAgentTyping: 'conversation/getIsAgentTyping',\r\n      conversationAttributes: 'conversationAttributes/getConversationParams',\r\n    }),\r\n    colorSchemeClass() {\r\n      return `${this.darkMode === 'dark' ? 'dark-scheme' : 'light-scheme'}`;\r\n    },\r\n    showStatusIndicator() {\r\n      const { status } = this.conversationAttributes;\r\n      const isConversationInPendingStatus = status === 'pending';\r\n      const isLastMessageIncoming =\r\n        this.lastMessage.message_type === MESSAGE_TYPE.INCOMING;\r\n      return (\r\n        this.isAgentTyping ||\r\n        (isConversationInPendingStatus && isLastMessageIncoming)\r\n      );\r\n    },\r\n  },\r\n  watch: {\r\n    allMessagesLoaded() {\r\n      this.previousScrollHeight = 0;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$el.addEventListener('scroll', this.handleScroll);\r\n    this.scrollToBottom();\r\n  },\r\n  updated() {\r\n    if (this.previousConversationSize !== this.conversationSize) {\r\n      this.previousConversationSize = this.conversationSize;\r\n      this.scrollToBottom();\r\n    }\r\n  },\r\n  unmounted() {\r\n    this.$el.removeEventListener('scroll', this.handleScroll);\r\n  },\r\n  methods: {\r\n    ...mapActions('conversation', ['fetchOldConversations']),\r\n    scrollToBottom() {\r\n      const container = this.$el;\r\n      container.scrollTop = container.scrollHeight - this.previousScrollHeight;\r\n      this.previousScrollHeight = 0;\r\n    },\r\n    handleScroll() {\r\n      if (\r\n        this.isFetchingList ||\r\n        this.allMessagesLoaded ||\r\n        !this.conversationSize\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      if (this.$el.scrollTop < 100) {\r\n        this.fetchOldConversations({ before: this.earliestMessage.id });\r\n        this.previousScrollHeight = this.$el.scrollHeight;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"conversation--container\" :class=\"colorSchemeClass\">\r\n    <div class=\"conversation-wrap\" :class=\"{ 'is-typing': isAgentTyping }\">\r\n      <div v-if=\"isFetchingList\" class=\"message--loader\">\r\n        <Spinner />\r\n      </div>\r\n      <div\r\n        v-for=\"groupedMessage in groupedMessages\"\r\n        :key=\"groupedMessage.date\"\r\n        class=\"messages-wrap\"\r\n      >\r\n        <DateSeparator :date=\"groupedMessage.date\" />\r\n        <ChatMessage\r\n          v-for=\"message in groupedMessage.messages\"\r\n          :key=\"message.id\"\r\n          :message=\"message\"\r\n        />\r\n      </div>\r\n      <AgentTypingBubble v-if=\"showStatusIndicator\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.conversation--container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  color-scheme: light dark;\r\n\r\n  &.light-scheme {\r\n    color-scheme: light;\r\n  }\r\n\r\n  &.dark-scheme {\r\n    color-scheme: dark;\r\n  }\r\n}\r\n\r\n.conversation-wrap {\r\n  flex: 1;\r\n  @apply px-2 pt-8 pb-2;\r\n}\r\n\r\n.message--loader {\r\n  text-align: center;\r\n}\r\n</style>\r\n","<script>\r\nimport { mapGetters } from 'vuex';\r\n\r\nimport ChatFooter from '../components/ChatFooter.vue';\r\nimport ConversationWrap from '../components/ConversationWrap.vue';\r\n\r\nexport default {\r\n  components: { ChatFooter, ConversationWrap },\r\n  computed: {\r\n    ...mapGetters({\r\n      groupedMessages: 'conversation/getGroupedConversation',\r\n    }),\r\n  },\r\n  mounted() {\r\n    this.$store.dispatch('conversation/setUserLastSeen');\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"flex flex-col flex-1 overflow-hidden rounded-b-lg bg-n-slate-2 dark:bg-n-solid-1\"\r\n  >\r\n    <div class=\"flex flex-1 overflow-auto\">\r\n      <ConversationWrap :grouped-messages=\"groupedMessages\" />\r\n    </div>\r\n    <ChatFooter class=\"px-5\" />\r\n  </div>\r\n</template>\r\n"],"names":["_sfc_main","FluentIcon","_b","_a","fileType","_hoisted_1","_hoisted_2","_openBlock","_createElementBlock","_createElementVNode","_ctx","_createTextVNode","_toDisplayString","$props","$options","_createVNode","_component_FluentIcon","FileUpload","Spinner","mapGetters","MAXIMUM_FILE_UPLOAD_SIZE","ALLOWED_FILE_TYPES","items","item","file","checkFileSizeLimit","websiteToken","DirectUpload","xhr","error","blob","emitter","BUS_EVENTS","_createBlock","_component_FileUpload","_withCtx","$data","_createCommentVNode","_component_Spinner","_normalizeStyle","ChatAttachmentButton","ChatSendButton","EmojiInput","ResizableTextArea","configMixin","isWidgetOpen","emoji","typingStatus","_normalizeClass","_cache","_withKeys","args","_component_ResizableTextArea","$event","_component_ChatAttachmentButton","_component_EmojiInput","_component_ChatSendButton","ChatInputWrap","CustomButton","FooterReplyTo","routerMixin","getContrastingTextColor","allowMessagesAfterResolved","status","mapActions","content","attachment","IFrameHelper","CHATWOOT_ON_START_CONVERSATION","message","sendEmailTranscript","_component_CustomButton","_component_FooterReplyTo","_component_ChatInputWrap","formatMessage","useMessageFormatter","_directive_dompurify_html","$setup","_hoisted_3","_hoisted_4","emit","__emit","onVideoError","messageMixin","attribute","id","elementId","el","value","event","deltaX","_renderSlot","UserMessageBubble","MessageReplyButton","ImageBubble","VideoBubble","FileBubble","ReplyToChip","DragWrapper","createdAt","messageStamp","meta","_hoisted_5","_hoisted_7","_component_ReplyToChip","_component_MessageReplyButton","_component_DragWrapper","_component_UserMessageBubble","_Fragment","_renderList","_component_ImageBubble","_component_VideoBubble","_component_FileBubble","_hoisted_6","CardButton","action","_component_CardButton","acc","name","formObjectArray","obj","_hoisted_8","_withModifiers","option","ChatOption","selectedOption","_withDirectives","_component_ChatOption","truncateMessage","useVuelidate","required","email","StarRating","CSAT_DISPLAY_TYPES","CSAT_RATINGS","rating","feedback_message","_component_StarRating","IntegrationAPIClient","messageId","urlData","buildSearchParamsWithLocale","API","buildDyteURL","response","token","ChatArticle","ChatCard","ChatForm","ChatOptions","EmailInput","CustomerSatisfaction","IntegrationCard","getPlainText","highlightContent","messageResponse","formValues","formValuesAsArray","key","_component_EmailInput","_component_IntegrationCard","_component_ChatOptions","_component_ChatForm","_component_ChatCard","_component_ChatArticle","_component_CustomerSatisfaction","AgentMessageBubble","Thumbnail","UserMessage","type","displayImage","MESSAGE_TYPE","selectionOption","isASubmittedFormMessage","submittedValue","_component_Thumbnail","_component_AgentMessageBubble","_hoisted_9","_component_UserMessage","_hoisted_10","AgentMessage","replyTo","_component_AgentMessage","_createStaticVNode","_imports_0","formatDate","ChatMessage","AgentTypingBubble","DateSeparator","darkMode","useDarkMode","isConversationInPendingStatus","isLastMessageIncoming","container","groupedMessage","_component_DateSeparator","_component_ChatMessage","_component_AgentTypingBubble","ChatFooter","ConversationWrap","_component_ConversationWrap","_component_ChatFooter"],"mappings":"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"}