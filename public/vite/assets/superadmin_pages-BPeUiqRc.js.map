{"version":3,"file":"superadmin_pages-BPeUiqRc.js","sources":["../../../app/javascript/superadmin_pages/components/playground/assets/typing.gif","../../../app/javascript/superadmin_pages/views/playground/Index.vue","../../../app/javascript/superadmin_pages/views/dashboard/Index.vue","../../../app/javascript/entrypoints/superadmin_pages.js"],"sourcesContent":["export default \"__VITE_ASSET__BCwCRxJN__\"","<script>\r\nimport { useMessageFormatter } from 'shared/composables/useMessageFormatter';\r\nimport PlaygroundHeader from '../../components/playground/Header.vue';\r\nimport UserMessage from '../../components/playground/UserMessage.vue';\r\nimport BotMessage from '../../components/playground/BotMessage.vue';\r\nimport TypingIndicator from '../../components/playground/TypingIndicator.vue';\r\n\r\nexport default {\r\n  components: {\r\n    PlaygroundHeader,\r\n    UserMessage,\r\n    BotMessage,\r\n    TypingIndicator,\r\n  },\r\n  props: {\r\n    componentData: {\r\n      type: Object,\r\n      default: () => ({}),\r\n    },\r\n  },\r\n  setup() {\r\n    const { formatMessage } = useMessageFormatter();\r\n    return {\r\n      formatMessage,\r\n    };\r\n  },\r\n  data() {\r\n    return { messages: [], messageContent: '', isWaiting: false };\r\n  },\r\n  computed: {\r\n    previousMessages() {\r\n      return this.messages.map(message => ({\r\n        type: message.type,\r\n        message: message.content,\r\n      }));\r\n    },\r\n  },\r\n  mounted() {\r\n    this.focusInput();\r\n  },\r\n  methods: {\r\n    focusInput() {\r\n      this.$refs.messageInput.focus();\r\n    },\r\n    onMessageSend() {\r\n      this.addMessageToData('User', this.messageContent);\r\n      this.sendMessageToServer(this.messageContent);\r\n    },\r\n    scrollToLastMessage() {\r\n      this.$nextTick(() => {\r\n        const messageId = this.messages[this.messages.length - 1].id;\r\n        const messageElement = document.getElementById(`message-${messageId}`);\r\n        messageElement.scrollIntoView({ behavior: 'smooth' });\r\n      });\r\n    },\r\n    addMessageToData(type, content) {\r\n      this.messages.push({ id: this.messages.length, type, content });\r\n      this.scrollToLastMessage();\r\n    },\r\n    async sendMessageToServer(messageContent) {\r\n      this.messageContent = '';\r\n      this.isWaiting = true;\r\n      const csrfToken = document\r\n        .querySelector('meta[name=\"csrf-token\"]')\r\n        .getAttribute('content');\r\n\r\n      try {\r\n        const response = await fetch(window.location.href, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'X-CSRF-Token': csrfToken,\r\n          },\r\n          body: JSON.stringify({\r\n            message: messageContent,\r\n            previous_messages: this.previousMessages,\r\n          }),\r\n          credentials: 'include',\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const { message } = await response.json();\r\n        this.addMessageToData('Bot', message);\r\n      } catch (error) {\r\n        this.addMessageToData(\r\n          'bot',\r\n          'Error: Could not retrieve response. Please check the console for more details.'\r\n        );\r\n      } finally {\r\n        this.isWaiting = false;\r\n        this.focusInput();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <section class=\"flex flex-col w-full h-full bg-slate-25\">\r\n    <PlaygroundHeader\r\n      :response-source-name=\"componentData.responseSourceName\"\r\n      :response-source-path=\"componentData.responseSourcePath\"\r\n    />\r\n    <div class=\"flex-1 px-8 py-4 overflow-auto\">\r\n      <div\r\n        v-for=\"message in messages\"\r\n        :id=\"`message-${message.id}`\"\r\n        :key=\"message.id\"\r\n      >\r\n        <UserMessage\r\n          v-if=\"message.type === 'User'\"\r\n          :message=\"formatMessage(message.content)\"\r\n        />\r\n        <BotMessage v-else :message=\"formatMessage(message.content)\" />\r\n      </div>\r\n      <TypingIndicator v-if=\"isWaiting\" />\r\n    </div>\r\n    <div class=\"w-full px-8 py-6\">\r\n      <textarea\r\n        ref=\"messageInput\"\r\n        v-model=\"messageContent\"\r\n        :rows=\"4\"\r\n        class=\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\"\r\n        placeholder=\"Type a message... [CMD/CTRL + Enter to send]\"\r\n        autofocus\r\n        autocomplete=\"off\"\r\n        @keydown.meta.enter=\"onMessageSend\"\r\n        @keydown.ctrl.enter=\"onMessageSend\"\r\n      />\r\n    </div>\r\n  </section>\r\n</template>\r\n","<script setup>\r\nimport { computed } from 'vue';\r\nimport BarChart from 'shared/components/charts/BarChart.vue';\r\nconst props = defineProps({\r\n  componentData: {\r\n    type: Object,\r\n    default: () => ({}),\r\n  },\r\n});\r\n\r\nconst prepareData = sourceData => {\r\n  var labels = [];\r\n  var data = [];\r\n  sourceData.forEach(item => {\r\n    labels.push(item[0]);\r\n    data.push(item[1]);\r\n  });\r\n  return {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        type: 'bar',\r\n        backgroundColor: 'rgb(31, 147, 255)',\r\n        yAxisID: 'y',\r\n        label: 'Conversations',\r\n        data: data,\r\n      },\r\n    ],\r\n  };\r\n};\r\n\r\nconst chartData = computed(() => {\r\n  return prepareData(props.componentData.chartData);\r\n});\r\n\r\nconst { accountsCount, usersCount, inboxesCount, conversationsCount } =\r\n  props.componentData;\r\n</script>\r\n\r\n<template>\r\n  <div class=\"w-full h-full\">\r\n    <header class=\"main-content__header\" role=\"banner\">\r\n      <h1 id=\"page-title\" class=\"main-content__page-title\">\r\n        {{ 'Admin Dashboard' }}\r\n      </h1>\r\n    </header>\r\n\r\n    <section class=\"main-content__body main-content__body--flush\">\r\n      <div class=\"report--list\">\r\n        <div class=\"report-card\">\r\n          <div class=\"metric\">{{ accountsCount }}</div>\r\n          <div>{{ 'Accounts' }}</div>\r\n        </div>\r\n        <div class=\"report-card\">\r\n          <div class=\"metric\">{{ usersCount }}</div>\r\n          <div>{{ 'Users' }}</div>\r\n        </div>\r\n        <div class=\"report-card\">\r\n          <div class=\"metric\">{{ inboxesCount }}</div>\r\n          <div>{{ 'Inboxes' }}</div>\r\n        </div>\r\n        <div class=\"report-card\">\r\n          <div class=\"metric\">{{ conversationsCount }}</div>\r\n          <div>{{ 'Conversations' }}</div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <!-- eslint-disable vue/no-static-inline-styles -->\r\n    <BarChart\r\n      class=\"p-8 w-full\"\r\n      :collection=\"chartData\"\r\n      style=\"max-height: 500px\"\r\n    />\r\n  </div>\r\n</template>\r\n","import 'chart.js';\r\nimport { createApp, h } from 'vue';\r\nimport VueDOMPurifyHTML from 'vue-dompurify-html';\r\n\r\nimport PlaygroundIndex from '../superadmin_pages/views/playground/Index.vue';\r\nimport DashboardIndex from '../superadmin_pages/views/dashboard/Index.vue';\r\n\r\nconst ComponentMapping = {\r\n  PlaygroundIndex: PlaygroundIndex,\r\n  DashboardIndex: DashboardIndex,\r\n};\r\n\r\nconst renderComponent = (componentName, props) => {\r\n  const app = createApp({\r\n    data() {\r\n      return { props: props };\r\n    },\r\n    render() {\r\n      return h(ComponentMapping[componentName], { componentData: this.props });\r\n    },\r\n  });\r\n\r\n  app.use(VueDOMPurifyHTML);\r\n  app.mount('#app');\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const element = document.getElementById('app');\r\n  if (element) {\r\n    const componentName = element.dataset.componentName;\r\n    const props = JSON.parse(element.dataset.props);\r\n    renderComponent(componentName, props);\r\n  }\r\n});\r\n"],"names":["TypingIndicator","_sfc_main","PlaygroundHeader","UserMessage","BotMessage","formatMessage","useMessageFormatter","message","messageId","type","content","messageContent","csrfToken","response","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_openBlock","_createElementBlock","_createVNode","_component_PlaygroundHeader","$props","_createElementVNode","_Fragment","_renderList","$data","_createBlock","_component_UserMessage","$setup","_component_BotMessage","_component_TypingIndicator","_createCommentVNode","_cache","$event","_withKeys","_withModifiers","$options","args","props","__props","prepareData","sourceData","labels","data","item","chartData","computed","accountsCount","usersCount","inboxesCount","conversationsCount","ComponentMapping","PlaygroundIndex","DashboardIndex","renderComponent","componentName","app","createApp","h","VueDOMPurifyHTML","element"],"mappings":"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"}