{"version":3,"file":"sdk-B-pid2Fz.js","sources":["../../../app/javascript/sdk/sdk.js","../../../app/javascript/sdk/DOMHelpers.js","../../../app/javascript/sdk/constants.js","../../../app/javascript/sdk/settingsHelper.js","../../../app/javascript/shared/helpers/CustomEventHelper.js","../../../app/javascript/sdk/bubbleHelpers.js","../../../node_modules/.pnpm/crypt@0.0.2/node_modules/crypt/crypt.js","../../../node_modules/.pnpm/charenc@0.0.2/node_modules/charenc/charenc.js","../../../node_modules/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js","../../../node_modules/.pnpm/md5@2.3.0/node_modules/md5/md5.js","../../../app/javascript/sdk/cookieHelpers.js","../../../app/javascript/shared/helpers/AudioNotificationHelper.js","../../../app/javascript/sdk/IFrameHelper.js","../../../app/javascript/entrypoints/sdk.js"],"sourcesContent":["export const SDK_CSS = `\r\n:root {\r\n  --b-100: #F2F3F7;\r\n  --s-700: #37546D;\r\n}\r\n\r\n.woot-widget-holder {\r\n  box-shadow: 0 5px 40px rgba(0, 0, 0, .16);\r\n  opacity: 1;\r\n  will-change: transform, opacity;\r\n  transform: translateY(0);\r\n  overflow: hidden !important;\r\n  position: fixed !important;\r\n  transition: opacity 0.2s linear, transform 0.25s linear;\r\n  z-index: 2147483000 !important;\r\n}\r\n\r\n.woot-widget-holder.woot-widget-holder--flat {\r\n  box-shadow: none;\r\n  border-radius: 0;\r\n  border: 1px solid var(--b-100);\r\n}\r\n\r\n.woot-widget-holder iframe {\r\n  border: 0;\r\n  color-scheme: normal;\r\n  height: 100% !important;\r\n  width: 100% !important;\r\n  max-height: 100vh !important;\r\n}\r\n\r\n.woot-widget-holder.has-unread-view {\r\n  border-radius: 0 !important;\r\n  min-height: 80px !important;\r\n  height: auto;\r\n  bottom: 94px;\r\n  box-shadow: none !important;\r\n  border: 0;\r\n}\r\n\r\n.woot-widget-bubble {\r\n  background: #1f93ff;\r\n  border-radius: 100px;\r\n  border-width: 0px;\r\n  bottom: 20px;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, .16) !important;\r\n  cursor: pointer;\r\n  height: 64px;\r\n  padding: 0px;\r\n  position: fixed;\r\n  user-select: none;\r\n  width: 64px;\r\n  z-index: 2147483000 !important;\r\n  overflow: hidden;\r\n}\r\n\r\n.woot-widget-bubble.woot-widget-bubble--flat {\r\n  border-radius: 0;\r\n}\r\n\r\n.woot-widget-holder.woot-widget-holder--flat {\r\n  bottom: 90px;\r\n}\r\n\r\n.woot-widget-bubble.woot-widget-bubble--flat {\r\n  height: 56px;\r\n  width: 56px;\r\n}\r\n\r\n.woot-widget-bubble.woot-widget-bubble--flat svg {\r\n  margin: 16px;\r\n}\r\n\r\n.woot-widget-bubble.woot-widget-bubble--flat.woot--close::before,\r\n.woot-widget-bubble.woot-widget-bubble--flat.woot--close::after {\r\n  left: 28px;\r\n  top: 16px;\r\n}\r\n\r\n.woot-widget-bubble.unread-notification::after {\r\n  content: '';\r\n  position: absolute;\r\n  width: 12px;\r\n  height: 12px;\r\n  background: #ff4040;\r\n  border-radius: 100%;\r\n  top: 0px;\r\n  right: 0px;\r\n  border: 2px solid #ffffff;\r\n  transition: background 0.2s ease;\r\n}\r\n\r\n.woot-widget-bubble.woot-widget--expanded {\r\n  bottom: 24px;\r\n  display: flex;\r\n  height: 48px !important;\r\n  width: auto !important;\r\n  align-items: center;\r\n}\r\n\r\n.woot-widget-bubble.woot-widget--expanded div {\r\n  align-items: center;\r\n  color: #fff;\r\n  display: flex;\r\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen-Sans, Ubuntu, Cantarell, Helvetica Neue, Arial, sans-serif;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  justify-content: center;\r\n  padding-right: 20px;\r\n  width: auto !important;\r\n}\r\n\r\n.woot-widget-bubble.woot-widget--expanded.woot-widget-bubble-color--lighter div{\r\n  color: var(--s-700);\r\n}\r\n\r\n.woot-widget-bubble.woot-widget--expanded svg {\r\n  height: 20px;\r\n  margin: 14px 8px 14px 16px;\r\n  width: 20px;\r\n}\r\n\r\n.woot-widget-bubble.woot-elements--left {\r\n  left: 20px;\r\n}\r\n\r\n.woot-widget-bubble.woot-elements--right {\r\n  right: 20px;\r\n}\r\n\r\n.woot-widget-bubble:hover {\r\n  background: #1f93ff;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, .4) !important;\r\n}\r\n\r\n.woot-widget-bubble svg {\r\n  all: revert;\r\n  height: 24px;\r\n  margin: 20px;\r\n  width: 24px;\r\n}\r\n\r\n.woot-widget-bubble.woot-widget-bubble-color--lighter path{\r\n  fill: var(--s-700);\r\n}\r\n\r\n@media only screen and (min-width: 667px) {\r\n  .woot-widget-holder.woot-elements--left {\r\n    left: 20px;\r\n }\r\n  .woot-widget-holder.woot-elements--right {\r\n    right: 20px;\r\n }\r\n}\r\n\r\n.woot--close:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.woot--close::before, .woot--close::after {\r\n  background-color: #fff;\r\n  content: ' ';\r\n  display: inline;\r\n  height: 24px;\r\n  left: 32px;\r\n  position: absolute;\r\n  top: 20px;\r\n  width: 2px;\r\n}\r\n\r\n.woot-widget-bubble-color--lighter.woot--close::before, .woot-widget-bubble-color--lighter.woot--close::after {\r\n  background-color: var(--s-700);\r\n}\r\n\r\n.woot--close::before {\r\n  transform: rotate(45deg);\r\n}\r\n\r\n.woot--close::after {\r\n  transform: rotate(-45deg);\r\n}\r\n\r\n.woot--hide {\r\n  bottom: -100vh !important;\r\n  top: unset !important;\r\n  opacity: 0;\r\n  visibility: hidden !important;\r\n  z-index: -1 !important;\r\n}\r\n\r\n.woot-widget--without-bubble {\r\n  bottom: 20px !important;\r\n}\r\n.woot-widget-holder.woot--hide{\r\n  transform: translateY(40px);\r\n}\r\n.woot-widget-bubble.woot--close {\r\n  transform: translateX(0px) scale(1) rotate(0deg);\r\n  transition: transform 300ms ease, opacity 100ms ease, visibility 0ms linear 0ms, bottom 0ms linear 0ms;\r\n}\r\n.woot-widget-bubble.woot--close.woot--hide {\r\n  transform: translateX(8px) scale(.75) rotate(45deg);\r\n  transition: transform 300ms ease, opacity 200ms ease, visibility 0ms linear 500ms, bottom 0ms ease 200ms;\r\n}\r\n\r\n.woot-widget-bubble {\r\n  transform-origin: center;\r\n  will-change: transform, opacity;\r\n  transform: translateX(0) scale(1) rotate(0deg);\r\n  transition: transform 300ms ease, opacity 100ms ease, visibility 0ms linear 0ms, bottom 0ms linear 0ms;\r\n}\r\n.woot-widget-bubble.woot--hide {\r\n  transform: translateX(8px) scale(.75) rotate(-30deg);\r\n  transition: transform 300ms ease, opacity 200ms ease, visibility 0ms linear 500ms, bottom 0ms ease 200ms;\r\n}\r\n\r\n.woot-widget-bubble.woot-widget--expanded {\r\n  transform: translateX(0px);\r\n  transition: transform 300ms ease, opacity 100ms ease, visibility 0ms linear 0ms, bottom 0ms linear 0ms;\r\n}\r\n.woot-widget-bubble.woot-widget--expanded.woot--hide {\r\n  transform: translateX(8px);\r\n  transition: transform 300ms ease, opacity 200ms ease, visibility 0ms linear 500ms, bottom 0ms ease 200ms;\r\n}\r\n.woot-widget-bubble.woot-widget-bubble--flat.woot--close {\r\n  transform: translateX(0px);\r\n  transition: transform 300ms ease, opacity 10ms ease, visibility 0ms linear 0ms, bottom 0ms linear 0ms;\r\n}\r\n.woot-widget-bubble.woot-widget-bubble--flat.woot--close.woot--hide {\r\n  transform: translateX(8px);\r\n  transition: transform 300ms ease, opacity 200ms ease, visibility 0ms linear 500ms, bottom 0ms ease 200ms;\r\n}\r\n.woot-widget-bubble.woot-widget--expanded.woot-widget-bubble--flat {\r\n  transform: translateX(0px);\r\n  transition: transform 300ms ease, opacity 200ms ease, visibility 0ms linear 0ms, bottom 0ms linear 0ms;\r\n}\r\n.woot-widget-bubble.woot-widget--expanded.woot-widget-bubble--flat.woot--hide {\r\n  transform: translateX(8px);\r\n  transition: transform 300ms ease, opacity 200ms ease, visibility 0ms linear 500ms, bottom 0ms ease 200ms;\r\n}\r\n\r\n@media only screen and (max-width: 667px) {\r\n  .woot-widget-holder {\r\n    height: 100%;\r\n    right: 0;\r\n    top: 0;\r\n    width: 100%;\r\n }\r\n\r\n .woot-widget-holder iframe {\r\n    min-height: 100% !important;\r\n  }\r\n\r\n\r\n .woot-widget-holder.has-unread-view {\r\n    height: auto;\r\n    right: 0;\r\n    width: auto;\r\n    bottom: 0;\r\n    top: auto;\r\n    max-height: 100vh;\r\n    padding: 0 8px;\r\n  }\r\n\r\n  .woot-widget-holder.has-unread-view iframe {\r\n    min-height: unset !important;\r\n  }\r\n\r\n .woot-widget-holder.has-unread-view.woot-elements--left {\r\n    left: 0;\r\n  }\r\n\r\n  .woot-widget-bubble.woot--close {\r\n    bottom: 60px;\r\n    opacity: 0;\r\n    visibility: hidden !important;\r\n    z-index: -1 !important;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 667px) {\r\n  .woot-widget-holder {\r\n    border-radius: 16px;\r\n    bottom: 104px;\r\n    height: calc(90% - 64px - 20px);\r\n    max-height: 640px !important;\r\n    min-height: 250px !important;\r\n    width: 400px !important;\r\n }\r\n}\r\n\r\n.woot-hidden {\r\n  display: none !important;\r\n}\r\n`;\r\n","import { SDK_CSS } from './sdk.js';\r\nimport { IFrameHelper } from './IFrameHelper';\r\n\r\nexport const loadCSS = () => {\r\n  const css = document.createElement('style');\r\n  css.innerHTML = `${SDK_CSS}`;\r\n  css.id = 'cw-widget-styles';\r\n  css.dataset.turboPermanent = true;\r\n  document.body.appendChild(css);\r\n};\r\n\r\n// This is a method specific to Turbo\r\n// The body replacing strategy removes Chatwoot styles\r\n// as well as the widget, this help us get it back\r\nexport const restoreElement = (id, newBody) => {\r\n  const element = document.getElementById(id);\r\n  const newElement = newBody.querySelector(`#${id}`);\r\n\r\n  if (element && !newElement) {\r\n    newBody.appendChild(element);\r\n  }\r\n};\r\n\r\nexport const restoreWidgetInDOM = newBody => {\r\n  restoreElement('cw-bubble-holder', newBody);\r\n  restoreElement('cw-widget-holder', newBody);\r\n  restoreElement('cw-widget-styles', newBody);\r\n};\r\n\r\nexport const addClasses = (elm, classes) => {\r\n  elm.classList.add(...classes.split(' '));\r\n};\r\n\r\nexport const toggleClass = (elm, classes) => {\r\n  elm.classList.toggle(classes);\r\n};\r\n\r\nexport const removeClasses = (elm, classes) => {\r\n  elm.classList.remove(...classes.split(' '));\r\n};\r\n\r\nexport const onLocationChange = ({ referrerURL, referrerHost }) => {\r\n  IFrameHelper.events.onLocationChange({\r\n    referrerURL,\r\n    referrerHost,\r\n  });\r\n};\r\n\r\nexport const onLocationChangeListener = () => {\r\n  let oldHref = document.location.href;\r\n  const referrerHost = document.location.host;\r\n  const config = {\r\n    childList: true,\r\n    subtree: true,\r\n  };\r\n  onLocationChange({\r\n    referrerURL: oldHref,\r\n    referrerHost,\r\n  });\r\n\r\n  const bodyList = document.querySelector('body');\r\n  const observer = new MutationObserver(mutations => {\r\n    mutations.forEach(() => {\r\n      if (oldHref !== document.location.href) {\r\n        oldHref = document.location.href;\r\n        onLocationChange({\r\n          referrerURL: oldHref,\r\n          referrerHost,\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n  observer.observe(bodyList, config);\r\n};\r\n","export const BUBBLE_DESIGN = ['standard', 'expanded_bubble'];\r\nexport const WIDGET_DESIGN = ['standard', 'flat'];\r\nexport const DARK_MODE = ['light', 'auto', 'dark'];\r\n","import { BUBBLE_DESIGN, DARK_MODE, WIDGET_DESIGN } from './constants';\r\n\r\nexport const getBubbleView = type =>\r\n  BUBBLE_DESIGN.includes(type) ? type : BUBBLE_DESIGN[0];\r\n\r\nexport const isExpandedView = type => getBubbleView(type) === BUBBLE_DESIGN[1];\r\n\r\nexport const getWidgetStyle = style =>\r\n  WIDGET_DESIGN.includes(style) ? style : WIDGET_DESIGN[0];\r\n\r\nexport const isFlatWidgetStyle = style => style === 'flat';\r\n\r\nexport const getDarkMode = darkMode =>\r\n  DARK_MODE.includes(darkMode) ? darkMode : DARK_MODE[0];\r\n","export const createEvent = ({ eventName, data = null }) => {\r\n  let event;\r\n  if (typeof window.CustomEvent === 'function') {\r\n    event = new CustomEvent(eventName, { detail: data });\r\n  } else {\r\n    event = document.createEvent('CustomEvent');\r\n    event.initCustomEvent(eventName, false, false, data);\r\n  }\r\n  return event;\r\n};\r\n\r\nexport const dispatchWindowEvent = ({ eventName, data }) => {\r\n  const event = createEvent({ eventName, data });\r\n  window.dispatchEvent(event);\r\n};\r\n","import { addClasses, removeClasses, toggleClass } from './DOMHelpers';\r\nimport { IFrameHelper } from './IFrameHelper';\r\nimport { isExpandedView } from './settingsHelper';\r\nimport {\r\n  CHATWOOT_CLOSED,\r\n  CHATWOOT_OPENED,\r\n} from '../widget/constants/sdkEvents';\r\nimport { dispatchWindowEvent } from 'shared/helpers/CustomEventHelper';\r\n\r\nexport const bubbleSVG =\r\n  'M240.808 240.808H122.123C56.6994 240.808 3.45695 187.562 3.45695 122.122C3.45695 56.7031 56.6994 3.45697 122.124 3.45697C187.566 3.45697 240.808 56.7031 240.808 122.122V240.808Z';\r\n\r\nexport const body = document.getElementsByTagName('body')[0];\r\nexport const widgetHolder = document.createElement('div');\r\n\r\nexport const bubbleHolder = document.createElement('div');\r\nexport const chatBubble = document.createElement('button');\r\nexport const closeBubble = document.createElement('button');\r\nexport const notificationBubble = document.createElement('span');\r\n\r\nexport const setBubbleText = bubbleText => {\r\n  if (isExpandedView(window.$chatwoot.type)) {\r\n    const textNode = document.getElementById('woot-widget--expanded__text');\r\n    textNode.innerText = bubbleText;\r\n  }\r\n};\r\n\r\nexport const createBubbleIcon = ({ className, path, target }) => {\r\n  let bubbleClassName = `${className} woot-elements--${window.$chatwoot.position}`;\r\n  const bubbleIcon = document.createElementNS(\r\n    'http://www.w3.org/2000/svg',\r\n    'svg'\r\n  );\r\n  bubbleIcon.setAttributeNS(null, 'id', 'woot-widget-bubble-icon');\r\n  bubbleIcon.setAttributeNS(null, 'width', '24');\r\n  bubbleIcon.setAttributeNS(null, 'height', '24');\r\n  bubbleIcon.setAttributeNS(null, 'viewBox', '0 0 240 240');\r\n  bubbleIcon.setAttributeNS(null, 'fill', 'none');\r\n  bubbleIcon.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n\r\n  const bubblePath = document.createElementNS(\r\n    'http://www.w3.org/2000/svg',\r\n    'path'\r\n  );\r\n  bubblePath.setAttributeNS(null, 'd', path);\r\n  bubblePath.setAttributeNS(null, 'fill', '#FFFFFF');\r\n\r\n  bubbleIcon.appendChild(bubblePath);\r\n  target.appendChild(bubbleIcon);\r\n\r\n  if (isExpandedView(window.$chatwoot.type)) {\r\n    const textNode = document.createElement('div');\r\n    textNode.id = 'woot-widget--expanded__text';\r\n    textNode.innerText = '';\r\n    target.appendChild(textNode);\r\n    bubbleClassName += ' woot-widget--expanded';\r\n  }\r\n\r\n  target.className = bubbleClassName;\r\n  target.title = 'Open chat window';\r\n  return target;\r\n};\r\n\r\nexport const createBubbleHolder = hideMessageBubble => {\r\n  if (hideMessageBubble) {\r\n    addClasses(bubbleHolder, 'woot-hidden');\r\n  }\r\n  addClasses(bubbleHolder, 'woot--bubble-holder');\r\n  bubbleHolder.id = 'cw-bubble-holder';\r\n  bubbleHolder.dataset.turboPermanent = true;\r\n  body.appendChild(bubbleHolder);\r\n};\r\n\r\nconst handleBubbleToggle = newIsOpen => {\r\n  IFrameHelper.events.onBubbleToggle(newIsOpen);\r\n\r\n  if (newIsOpen) {\r\n    dispatchWindowEvent({ eventName: CHATWOOT_OPENED });\r\n  } else {\r\n    dispatchWindowEvent({ eventName: CHATWOOT_CLOSED });\r\n    chatBubble.focus();\r\n  }\r\n};\r\n\r\nexport const onBubbleClick = (props = {}) => {\r\n  const { toggleValue } = props;\r\n  const { isOpen } = window.$chatwoot;\r\n  if (isOpen === toggleValue) return;\r\n\r\n  const newIsOpen = toggleValue === undefined ? !isOpen : toggleValue;\r\n  window.$chatwoot.isOpen = newIsOpen;\r\n\r\n  toggleClass(chatBubble, 'woot--hide');\r\n  toggleClass(closeBubble, 'woot--hide');\r\n  toggleClass(widgetHolder, 'woot--hide');\r\n\r\n  handleBubbleToggle(newIsOpen);\r\n};\r\n\r\nexport const onClickChatBubble = () => {\r\n  bubbleHolder.addEventListener('click', onBubbleClick);\r\n};\r\n\r\nexport const addUnreadClass = () => {\r\n  const holderEl = document.querySelector('.woot-widget-holder');\r\n  addClasses(holderEl, 'has-unread-view');\r\n};\r\n\r\nexport const removeUnreadClass = () => {\r\n  const holderEl = document.querySelector('.woot-widget-holder');\r\n  removeClasses(holderEl, 'has-unread-view');\r\n};\r\n","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","(function(){\r\n  var crypt = require('crypt'),\r\n      utf8 = require('charenc').utf8,\r\n      isBuffer = require('is-buffer'),\r\n      bin = require('charenc').bin,\r\n\r\n  // The core\r\n  md5 = function (message, options) {\r\n    // Convert to byte array\r\n    if (message.constructor == String)\r\n      if (options && options.encoding === 'binary')\r\n        message = bin.stringToBytes(message);\r\n      else\r\n        message = utf8.stringToBytes(message);\r\n    else if (isBuffer(message))\r\n      message = Array.prototype.slice.call(message, 0);\r\n    else if (!Array.isArray(message) && message.constructor !== Uint8Array)\r\n      message = message.toString();\r\n    // else, assume byte array already\r\n\r\n    var m = crypt.bytesToWords(message),\r\n        l = message.length * 8,\r\n        a =  1732584193,\r\n        b = -271733879,\r\n        c = -1732584194,\r\n        d =  271733878;\r\n\r\n    // Swap endian\r\n    for (var i = 0; i < m.length; i++) {\r\n      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |\r\n             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;\r\n    }\r\n\r\n    // Padding\r\n    m[l >>> 5] |= 0x80 << (l % 32);\r\n    m[(((l + 64) >>> 9) << 4) + 14] = l;\r\n\r\n    // Method shortcuts\r\n    var FF = md5._ff,\r\n        GG = md5._gg,\r\n        HH = md5._hh,\r\n        II = md5._ii;\r\n\r\n    for (var i = 0; i < m.length; i += 16) {\r\n\r\n      var aa = a,\r\n          bb = b,\r\n          cc = c,\r\n          dd = d;\r\n\r\n      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);\r\n      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);\r\n      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);\r\n      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);\r\n      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);\r\n      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);\r\n      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);\r\n      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);\r\n      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);\r\n      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);\r\n      c = FF(c, d, a, b, m[i+10], 17, -42063);\r\n      b = FF(b, c, d, a, m[i+11], 22, -1990404162);\r\n      a = FF(a, b, c, d, m[i+12],  7,  1804603682);\r\n      d = FF(d, a, b, c, m[i+13], 12, -40341101);\r\n      c = FF(c, d, a, b, m[i+14], 17, -1502002290);\r\n      b = FF(b, c, d, a, m[i+15], 22,  1236535329);\r\n\r\n      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);\r\n      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);\r\n      c = GG(c, d, a, b, m[i+11], 14,  643717713);\r\n      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);\r\n      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);\r\n      d = GG(d, a, b, c, m[i+10],  9,  38016083);\r\n      c = GG(c, d, a, b, m[i+15], 14, -660478335);\r\n      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);\r\n      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);\r\n      d = GG(d, a, b, c, m[i+14],  9, -1019803690);\r\n      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);\r\n      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);\r\n      a = GG(a, b, c, d, m[i+13],  5, -1444681467);\r\n      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);\r\n      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);\r\n      b = GG(b, c, d, a, m[i+12], 20, -1926607734);\r\n\r\n      a = HH(a, b, c, d, m[i+ 5],  4, -378558);\r\n      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);\r\n      c = HH(c, d, a, b, m[i+11], 16,  1839030562);\r\n      b = HH(b, c, d, a, m[i+14], 23, -35309556);\r\n      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);\r\n      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);\r\n      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);\r\n      b = HH(b, c, d, a, m[i+10], 23, -1094730640);\r\n      a = HH(a, b, c, d, m[i+13],  4,  681279174);\r\n      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);\r\n      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);\r\n      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);\r\n      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);\r\n      d = HH(d, a, b, c, m[i+12], 11, -421815835);\r\n      c = HH(c, d, a, b, m[i+15], 16,  530742520);\r\n      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);\r\n\r\n      a = II(a, b, c, d, m[i+ 0],  6, -198630844);\r\n      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);\r\n      c = II(c, d, a, b, m[i+14], 15, -1416354905);\r\n      b = II(b, c, d, a, m[i+ 5], 21, -57434055);\r\n      a = II(a, b, c, d, m[i+12],  6,  1700485571);\r\n      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);\r\n      c = II(c, d, a, b, m[i+10], 15, -1051523);\r\n      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);\r\n      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);\r\n      d = II(d, a, b, c, m[i+15], 10, -30611744);\r\n      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);\r\n      b = II(b, c, d, a, m[i+13], 21,  1309151649);\r\n      a = II(a, b, c, d, m[i+ 4],  6, -145523070);\r\n      d = II(d, a, b, c, m[i+11], 10, -1120210379);\r\n      c = II(c, d, a, b, m[i+ 2], 15,  718787259);\r\n      b = II(b, c, d, a, m[i+ 9], 21, -343485551);\r\n\r\n      a = (a + aa) >>> 0;\r\n      b = (b + bb) >>> 0;\r\n      c = (c + cc) >>> 0;\r\n      d = (d + dd) >>> 0;\r\n    }\r\n\r\n    return crypt.endian([a, b, c, d]);\r\n  };\r\n\r\n  // Auxiliary functions\r\n  md5._ff  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & c | ~b & d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._gg  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & d | c & ~d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._hh  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b ^ c ^ d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._ii  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n\r\n  // Package private blocksize\r\n  md5._blocksize = 16;\r\n  md5._digestsize = 16;\r\n\r\n  module.exports = function (message, options) {\r\n    if (message === undefined || message === null)\r\n      throw new Error('Illegal argument ' + message);\r\n\r\n    var digestbytes = crypt.wordsToBytes(md5(message, options));\r\n    return options && options.asBytes ? digestbytes :\r\n        options && options.asString ? bin.bytesToString(digestbytes) :\r\n        crypt.bytesToHex(digestbytes);\r\n  };\r\n\r\n})();\r\n","import md5 from 'md5';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst REQUIRED_USER_KEYS = ['avatar_url', 'email', 'name'];\r\nconst ALLOWED_USER_ATTRIBUTES = [...REQUIRED_USER_KEYS, 'identifier_hash'];\r\n\r\nexport const getUserCookieName = () => {\r\n  const SET_USER_COOKIE_PREFIX = 'cw_user_';\r\n  const { websiteToken: websiteIdentifier } = window.$chatwoot;\r\n  return `${SET_USER_COOKIE_PREFIX}${websiteIdentifier}`;\r\n};\r\n\r\nexport const getUserString = ({ identifier = '', user }) => {\r\n  const userStringWithSortedKeys = ALLOWED_USER_ATTRIBUTES.reduce(\r\n    (acc, key) => `${acc}${key}${user[key] || ''}`,\r\n    ''\r\n  );\r\n  return `${userStringWithSortedKeys}identifier${identifier}`;\r\n};\r\n\r\nexport const computeHashForUserData = (...args) => md5(getUserString(...args));\r\n\r\nexport const hasUserKeys = user =>\r\n  REQUIRED_USER_KEYS.reduce((acc, key) => acc || !!user[key], false);\r\n\r\nexport const setCookieWithDomain = (\r\n  name,\r\n  value,\r\n  { expires = 365, baseDomain = undefined } = {}\r\n) => {\r\n  const cookieOptions = {\r\n    expires,\r\n    sameSite: 'Lax',\r\n    domain: baseDomain,\r\n  };\r\n\r\n  // if type of value is object, stringify it\r\n  // this is because js-cookies 3.0 removed builtin json support\r\n  // ref: https://github.com/js-cookie/js-cookie/releases/tag/v3.0.0\r\n  if (typeof value === 'object') {\r\n    value = JSON.stringify(value);\r\n  }\r\n\r\n  Cookies.set(name, value, cookieOptions);\r\n};\r\n","export const initOnEvents = ['click', 'touchstart', 'keypress', 'keydown'];\r\n\r\nexport const getAudioContext = () => {\r\n  let audioCtx;\r\n  try {\r\n    audioCtx = new (window.AudioContext || window.webkitAudioContext)();\r\n  } catch {\r\n    // AudioContext is not available.\r\n  }\r\n  return audioCtx;\r\n};\r\n\r\n// eslint-disable-next-line default-param-last\r\nexport const getAlertAudio = async (baseUrl = '', requestContext) => {\r\n  const audioCtx = getAudioContext();\r\n  const playSound = audioBuffer => {\r\n    window.playAudioAlert = () => {\r\n      if (audioCtx) {\r\n        const source = audioCtx.createBufferSource();\r\n        source.buffer = audioBuffer;\r\n        source.connect(audioCtx.destination);\r\n        source.loop = false;\r\n        source.start();\r\n      }\r\n    };\r\n  };\r\n\r\n  if (audioCtx) {\r\n    const { type = 'dashboard', alertTone = 'ding' } = requestContext || {};\r\n    const resourceUrl = `${baseUrl}/audio/${type}/${alertTone}.mp3`;\r\n    const audioRequest = new Request(resourceUrl);\r\n\r\n    fetch(audioRequest)\r\n      .then(response => response.arrayBuffer())\r\n      .then(buffer => {\r\n        audioCtx.decodeAudioData(buffer).then(playSound);\r\n        // eslint-disable-next-line no-promise-executor-return\r\n        return new Promise(res => res());\r\n      })\r\n      .catch(() => {\r\n        // error\r\n      });\r\n  }\r\n};\r\n","import Cookies from 'js-cookie';\r\nimport {\r\n  addClasses,\r\n  loadCSS,\r\n  removeClasses,\r\n  onLocationChangeListener,\r\n} from './DOMHelpers';\r\nimport {\r\n  body,\r\n  widgetHolder,\r\n  createBubbleHolder,\r\n  createBubbleIcon,\r\n  bubbleSVG,\r\n  chatBubble,\r\n  closeBubble,\r\n  bubbleHolder,\r\n  onClickChatBubble,\r\n  onBubbleClick,\r\n  setBubbleText,\r\n  addUnreadClass,\r\n  removeUnreadClass,\r\n} from './bubbleHelpers';\r\nimport { isWidgetColorLighter } from 'shared/helpers/colorHelper';\r\nimport { dispatchWindowEvent } from 'shared/helpers/CustomEventHelper';\r\nimport {\r\n  CHATWOOT_ERROR,\r\n  CHATWOOT_POSTBACK,\r\n  CHATWOOT_READY,\r\n} from '../widget/constants/sdkEvents';\r\nimport { SET_USER_ERROR } from '../widget/constants/errorTypes';\r\nimport { getUserCookieName, setCookieWithDomain } from './cookieHelpers';\r\nimport {\r\n  getAlertAudio,\r\n  initOnEvents,\r\n} from 'shared/helpers/AudioNotificationHelper';\r\nimport { isFlatWidgetStyle } from './settingsHelper';\r\nimport { popoutChatWindow } from '../widget/helpers/popoutHelper';\r\nimport addHours from 'date-fns/addHours';\r\n\r\nconst updateAuthCookie = (cookieContent, baseDomain = '') =>\r\n  setCookieWithDomain('cw_conversation', cookieContent, {\r\n    baseDomain,\r\n  });\r\n\r\nconst updateCampaignReadStatus = baseDomain => {\r\n  const expireBy = addHours(new Date(), 1);\r\n  setCookieWithDomain('cw_snooze_campaigns_till', Number(expireBy), {\r\n    expires: expireBy,\r\n    baseDomain,\r\n  });\r\n};\r\n\r\nexport const IFrameHelper = {\r\n  getUrl({ baseUrl, websiteToken }) {\r\n    return `${baseUrl}/widget?website_token=${websiteToken}`;\r\n  },\r\n  createFrame: ({ baseUrl, websiteToken }) => {\r\n    if (IFrameHelper.getAppFrame()) {\r\n      return;\r\n    }\r\n\r\n    loadCSS();\r\n    const iframe = document.createElement('iframe');\r\n    const cwCookie = Cookies.get('cw_conversation');\r\n    let widgetUrl = IFrameHelper.getUrl({ baseUrl, websiteToken });\r\n    if (cwCookie) {\r\n      widgetUrl = `${widgetUrl}&cw_conversation=${cwCookie}`;\r\n    }\r\n    iframe.src = widgetUrl;\r\n    iframe.allow =\r\n      'camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;';\r\n    iframe.id = 'chatwoot_live_chat_widget';\r\n    iframe.style.visibility = 'hidden';\r\n\r\n    let holderClassName = `woot-widget-holder woot--hide woot-elements--${window.$chatwoot.position}`;\r\n    if (window.$chatwoot.hideMessageBubble) {\r\n      holderClassName += ` woot-widget--without-bubble`;\r\n    }\r\n    if (isFlatWidgetStyle(window.$chatwoot.widgetStyle)) {\r\n      holderClassName += ` woot-widget-holder--flat`;\r\n    }\r\n\r\n    addClasses(widgetHolder, holderClassName);\r\n    widgetHolder.id = 'cw-widget-holder';\r\n    widgetHolder.dataset.turboPermanent = true;\r\n    widgetHolder.appendChild(iframe);\r\n    body.appendChild(widgetHolder);\r\n    IFrameHelper.initPostMessageCommunication();\r\n    IFrameHelper.initWindowSizeListener();\r\n    IFrameHelper.preventDefaultScroll();\r\n  },\r\n  getAppFrame: () => document.getElementById('chatwoot_live_chat_widget'),\r\n  getBubbleHolder: () => document.getElementsByClassName('woot--bubble-holder'),\r\n  sendMessage: (key, value) => {\r\n    const element = IFrameHelper.getAppFrame();\r\n    element.contentWindow.postMessage(\r\n      `chatwoot-widget:${JSON.stringify({ event: key, ...value })}`,\r\n      '*'\r\n    );\r\n  },\r\n  initPostMessageCommunication: () => {\r\n    window.onmessage = e => {\r\n      if (\r\n        typeof e.data !== 'string' ||\r\n        e.data.indexOf('chatwoot-widget:') !== 0\r\n      ) {\r\n        return;\r\n      }\r\n      const message = JSON.parse(e.data.replace('chatwoot-widget:', ''));\r\n      if (typeof IFrameHelper.events[message.event] === 'function') {\r\n        IFrameHelper.events[message.event](message);\r\n      }\r\n    };\r\n  },\r\n  initWindowSizeListener: () => {\r\n    window.addEventListener('resize', () => IFrameHelper.toggleCloseButton());\r\n  },\r\n  preventDefaultScroll: () => {\r\n    widgetHolder.addEventListener('wheel', event => {\r\n      const deltaY = event.deltaY;\r\n      const contentHeight = widgetHolder.scrollHeight;\r\n      const visibleHeight = widgetHolder.offsetHeight;\r\n      const scrollTop = widgetHolder.scrollTop;\r\n\r\n      if (\r\n        (scrollTop === 0 && deltaY < 0) ||\r\n        (visibleHeight + scrollTop === contentHeight && deltaY > 0)\r\n      ) {\r\n        event.preventDefault();\r\n      }\r\n    });\r\n  },\r\n\r\n  setFrameHeightToFitContent: (extraHeight, isFixedHeight) => {\r\n    const iframe = IFrameHelper.getAppFrame();\r\n    const updatedIframeHeight = isFixedHeight ? `${extraHeight}px` : '100%';\r\n\r\n    if (iframe)\r\n      iframe.setAttribute('style', `height: ${updatedIframeHeight} !important`);\r\n  },\r\n\r\n  setupAudioListeners: () => {\r\n    const { baseUrl = '' } = window.$chatwoot;\r\n    getAlertAudio(baseUrl, { type: 'widget', alertTone: 'ding' }).then(() =>\r\n      initOnEvents.forEach(event => {\r\n        document.removeEventListener(\r\n          event,\r\n          IFrameHelper.setupAudioListeners,\r\n          false\r\n        );\r\n      })\r\n    );\r\n  },\r\n\r\n  events: {\r\n    loaded: message => {\r\n      updateAuthCookie(message.config.authToken, window.$chatwoot.baseDomain);\r\n      window.$chatwoot.hasLoaded = true;\r\n      const campaignsSnoozedTill = Cookies.get('cw_snooze_campaigns_till');\r\n      IFrameHelper.sendMessage('config-set', {\r\n        locale: window.$chatwoot.locale,\r\n        position: window.$chatwoot.position,\r\n        hideMessageBubble: window.$chatwoot.hideMessageBubble,\r\n        showPopoutButton: window.$chatwoot.showPopoutButton,\r\n        widgetStyle: window.$chatwoot.widgetStyle,\r\n        darkMode: window.$chatwoot.darkMode,\r\n        showUnreadMessagesDialog: window.$chatwoot.showUnreadMessagesDialog,\r\n        campaignsSnoozedTill,\r\n      });\r\n      IFrameHelper.onLoad({\r\n        widgetColor: message.config.channelConfig.widgetColor,\r\n      });\r\n      IFrameHelper.toggleCloseButton();\r\n\r\n      if (window.$chatwoot.user) {\r\n        IFrameHelper.sendMessage('set-user', window.$chatwoot.user);\r\n      }\r\n\r\n      window.playAudioAlert = () => {};\r\n\r\n      initOnEvents.forEach(e => {\r\n        document.addEventListener(e, IFrameHelper.setupAudioListeners, false);\r\n      });\r\n\r\n      if (!window.$chatwoot.resetTriggered) {\r\n        dispatchWindowEvent({ eventName: CHATWOOT_READY });\r\n      }\r\n    },\r\n    error: ({ errorType, data }) => {\r\n      dispatchWindowEvent({ eventName: CHATWOOT_ERROR, data: data });\r\n\r\n      if (errorType === SET_USER_ERROR) {\r\n        Cookies.remove(getUserCookieName());\r\n      }\r\n    },\r\n    onEvent({ eventIdentifier: eventName, data }) {\r\n      dispatchWindowEvent({ eventName, data });\r\n    },\r\n    setBubbleLabel(message) {\r\n      setBubbleText(window.$chatwoot.launcherTitle || message.label);\r\n    },\r\n\r\n    setAuthCookie({ data: { widgetAuthToken } }) {\r\n      updateAuthCookie(widgetAuthToken, window.$chatwoot.baseDomain);\r\n    },\r\n\r\n    setCampaignReadOn() {\r\n      updateCampaignReadStatus(window.$chatwoot.baseDomain);\r\n    },\r\n\r\n    postback(data) {\r\n      dispatchWindowEvent({\r\n        eventName: CHATWOOT_POSTBACK,\r\n        data,\r\n      });\r\n    },\r\n\r\n    toggleBubble: state => {\r\n      let bubbleState = {};\r\n      if (state === 'open') {\r\n        bubbleState.toggleValue = true;\r\n      } else if (state === 'close') {\r\n        bubbleState.toggleValue = false;\r\n      }\r\n\r\n      onBubbleClick(bubbleState);\r\n    },\r\n\r\n    popoutChatWindow: ({ baseUrl, websiteToken, locale }) => {\r\n      const cwCookie = Cookies.get('cw_conversation');\r\n      window.$chatwoot.toggle('close');\r\n      popoutChatWindow(baseUrl, websiteToken, locale, cwCookie);\r\n    },\r\n\r\n    closeWindow: () => {\r\n      onBubbleClick({ toggleValue: false });\r\n      removeUnreadClass();\r\n    },\r\n\r\n    onBubbleToggle: isOpen => {\r\n      IFrameHelper.sendMessage('toggle-open', { isOpen });\r\n      if (isOpen) {\r\n        IFrameHelper.pushEvent('webwidget.triggered');\r\n      }\r\n    },\r\n    onLocationChange: ({ referrerURL, referrerHost }) => {\r\n      IFrameHelper.sendMessage('change-url', {\r\n        referrerURL,\r\n        referrerHost,\r\n      });\r\n    },\r\n    updateIframeHeight: message => {\r\n      const { extraHeight = 0, isFixedHeight } = message;\r\n\r\n      IFrameHelper.setFrameHeightToFitContent(extraHeight, isFixedHeight);\r\n    },\r\n\r\n    setUnreadMode: () => {\r\n      addUnreadClass();\r\n      onBubbleClick({ toggleValue: true });\r\n    },\r\n\r\n    resetUnreadMode: () => removeUnreadClass(),\r\n    handleNotificationDot: event => {\r\n      if (window.$chatwoot.hideMessageBubble) {\r\n        return;\r\n      }\r\n\r\n      const bubbleElement = document.querySelector('.woot-widget-bubble');\r\n      if (\r\n        event.unreadMessageCount > 0 &&\r\n        !bubbleElement.classList.contains('unread-notification')\r\n      ) {\r\n        addClasses(bubbleElement, 'unread-notification');\r\n      } else if (event.unreadMessageCount === 0) {\r\n        removeClasses(bubbleElement, 'unread-notification');\r\n      }\r\n    },\r\n\r\n    closeChat: () => {\r\n      onBubbleClick({ toggleValue: false });\r\n    },\r\n\r\n    playAudio: () => {\r\n      window.playAudioAlert();\r\n    },\r\n  },\r\n  pushEvent: eventName => {\r\n    IFrameHelper.sendMessage('push-event', { eventName });\r\n  },\r\n\r\n  onLoad: ({ widgetColor }) => {\r\n    const iframe = IFrameHelper.getAppFrame();\r\n    iframe.style.visibility = '';\r\n    iframe.setAttribute('id', `chatwoot_live_chat_widget`);\r\n\r\n    if (IFrameHelper.getBubbleHolder().length) {\r\n      return;\r\n    }\r\n    createBubbleHolder(window.$chatwoot.hideMessageBubble);\r\n    onLocationChangeListener();\r\n\r\n    let className = 'woot-widget-bubble';\r\n    let closeBtnClassName = `woot-elements--${window.$chatwoot.position} woot-widget-bubble woot--close woot--hide`;\r\n\r\n    if (isFlatWidgetStyle(window.$chatwoot.widgetStyle)) {\r\n      className += ' woot-widget-bubble--flat';\r\n      closeBtnClassName += ' woot-widget-bubble--flat';\r\n    }\r\n\r\n    if (isWidgetColorLighter(widgetColor)) {\r\n      className += ' woot-widget-bubble-color--lighter';\r\n      closeBtnClassName += ' woot-widget-bubble-color--lighter';\r\n    }\r\n\r\n    const chatIcon = createBubbleIcon({\r\n      className,\r\n      path: bubbleSVG,\r\n      target: chatBubble,\r\n    });\r\n\r\n    addClasses(closeBubble, closeBtnClassName);\r\n\r\n    chatIcon.style.background = widgetColor;\r\n    closeBubble.style.background = widgetColor;\r\n\r\n    bubbleHolder.appendChild(chatIcon);\r\n    bubbleHolder.appendChild(closeBubble);\r\n    onClickChatBubble();\r\n  },\r\n  toggleCloseButton: () => {\r\n    let isMobile = false;\r\n    if (window.matchMedia('(max-width: 668px)').matches) {\r\n      isMobile = true;\r\n    }\r\n    IFrameHelper.sendMessage('toggle-close-button', { isMobile });\r\n  },\r\n};\r\n","import Cookies from 'js-cookie';\r\nimport { IFrameHelper } from '../sdk/IFrameHelper';\r\nimport {\r\n  getBubbleView,\r\n  getDarkMode,\r\n  getWidgetStyle,\r\n} from '../sdk/settingsHelper';\r\nimport {\r\n  computeHashForUserData,\r\n  getUserCookieName,\r\n  hasUserKeys,\r\n} from '../sdk/cookieHelpers';\r\nimport {\r\n  addClasses,\r\n  removeClasses,\r\n  restoreWidgetInDOM,\r\n} from '../sdk/DOMHelpers';\r\nimport { setCookieWithDomain } from '../sdk/cookieHelpers';\r\nimport { SDK_SET_BUBBLE_VISIBILITY } from 'shared/constants/sharedFrameEvents';\r\n\r\nconst runSDK = ({ baseUrl, websiteToken }) => {\r\n  if (window.$chatwoot) {\r\n    return;\r\n  }\r\n\r\n  // if this is a Rails Turbo app\r\n  document.addEventListener('turbo:before-render', event => {\r\n    // when morphing the page, this typically happens on reload like events\r\n    // say you update a \"Customer\" on a form and it reloads the page\r\n    // We have already added data-turbo-permananent to true. This\r\n    // will ensure that the widget it preserved\r\n    // Read more about morphing here: https://turbo.hotwired.dev/handbook/page_refreshes#morphing\r\n    // and peristing elements here: https://turbo.hotwired.dev/handbook/building#persisting-elements-across-page-loads\r\n    if (event.detail.renderMethod === 'morph') return;\r\n\r\n    restoreWidgetInDOM(event.detail.newBody);\r\n  });\r\n\r\n  if (window.Turbolinks) {\r\n    document.addEventListener('turbolinks:before-render', event => {\r\n      restoreWidgetInDOM(event.data.newBody);\r\n    });\r\n  }\r\n\r\n  // if this is an astro app\r\n  document.addEventListener('astro:before-swap', event =>\r\n    restoreWidgetInDOM(event.newDocument.body)\r\n  );\r\n\r\n  const chatwootSettings = window.chatwootSettings || {};\r\n  let locale = chatwootSettings.locale;\r\n  let baseDomain = chatwootSettings.baseDomain;\r\n\r\n  if (chatwootSettings.useBrowserLanguage) {\r\n    locale = window.navigator.language.replace('-', '_');\r\n  }\r\n\r\n  window.$chatwoot = {\r\n    baseUrl,\r\n    baseDomain,\r\n    hasLoaded: false,\r\n    hideMessageBubble: chatwootSettings.hideMessageBubble || false,\r\n    isOpen: false,\r\n    position: chatwootSettings.position === 'left' ? 'left' : 'right',\r\n    websiteToken,\r\n    locale,\r\n    useBrowserLanguage: chatwootSettings.useBrowserLanguage || false,\r\n    type: getBubbleView(chatwootSettings.type),\r\n    launcherTitle: chatwootSettings.launcherTitle || '',\r\n    showPopoutButton: chatwootSettings.showPopoutButton || false,\r\n    showUnreadMessagesDialog: chatwootSettings.showUnreadMessagesDialog ?? true,\r\n    widgetStyle: getWidgetStyle(chatwootSettings.widgetStyle) || 'standard',\r\n    resetTriggered: false,\r\n    darkMode: getDarkMode(chatwootSettings.darkMode),\r\n\r\n    toggle(state) {\r\n      IFrameHelper.events.toggleBubble(state);\r\n    },\r\n\r\n    toggleBubbleVisibility(visibility) {\r\n      let widgetElm = document.querySelector('.woot--bubble-holder');\r\n      let widgetHolder = document.querySelector('.woot-widget-holder');\r\n      if (visibility === 'hide') {\r\n        addClasses(widgetHolder, 'woot-widget--without-bubble');\r\n        addClasses(widgetElm, 'woot-hidden');\r\n        window.$chatwoot.hideMessageBubble = true;\r\n      } else if (visibility === 'show') {\r\n        removeClasses(widgetElm, 'woot-hidden');\r\n        removeClasses(widgetHolder, 'woot-widget--without-bubble');\r\n        window.$chatwoot.hideMessageBubble = false;\r\n      }\r\n      IFrameHelper.sendMessage(SDK_SET_BUBBLE_VISIBILITY, {\r\n        hideMessageBubble: window.$chatwoot.hideMessageBubble,\r\n      });\r\n    },\r\n\r\n    popoutChatWindow() {\r\n      IFrameHelper.events.popoutChatWindow({\r\n        baseUrl: window.$chatwoot.baseUrl,\r\n        websiteToken: window.$chatwoot.websiteToken,\r\n        locale,\r\n      });\r\n    },\r\n\r\n    setUser(identifier, user) {\r\n      if (typeof identifier !== 'string' && typeof identifier !== 'number') {\r\n        throw new Error('Identifier should be a string or a number');\r\n      }\r\n\r\n      if (!hasUserKeys(user)) {\r\n        throw new Error(\r\n          'User object should have one of the keys [avatar_url, email, name]'\r\n        );\r\n      }\r\n\r\n      const userCookieName = getUserCookieName();\r\n      const existingCookieValue = Cookies.get(userCookieName);\r\n      const hashToBeStored = computeHashForUserData({ identifier, user });\r\n      if (hashToBeStored === existingCookieValue) {\r\n        return;\r\n      }\r\n\r\n      window.$chatwoot.identifier = identifier;\r\n      window.$chatwoot.user = user;\r\n      IFrameHelper.sendMessage('set-user', { identifier, user });\r\n\r\n      setCookieWithDomain(userCookieName, hashToBeStored, {\r\n        baseDomain,\r\n      });\r\n    },\r\n\r\n    setCustomAttributes(customAttributes = {}) {\r\n      if (!customAttributes || !Object.keys(customAttributes).length) {\r\n        throw new Error('Custom attributes should have atleast one key');\r\n      } else {\r\n        IFrameHelper.sendMessage('set-custom-attributes', { customAttributes });\r\n      }\r\n    },\r\n\r\n    deleteCustomAttribute(customAttribute = '') {\r\n      if (!customAttribute) {\r\n        throw new Error('Custom attribute is required');\r\n      } else {\r\n        IFrameHelper.sendMessage('delete-custom-attribute', {\r\n          customAttribute,\r\n        });\r\n      }\r\n    },\r\n\r\n    setConversationCustomAttributes(customAttributes = {}) {\r\n      if (!customAttributes || !Object.keys(customAttributes).length) {\r\n        throw new Error('Custom attributes should have atleast one key');\r\n      } else {\r\n        IFrameHelper.sendMessage('set-conversation-custom-attributes', {\r\n          customAttributes,\r\n        });\r\n      }\r\n    },\r\n\r\n    deleteConversationCustomAttribute(customAttribute = '') {\r\n      if (!customAttribute) {\r\n        throw new Error('Custom attribute is required');\r\n      } else {\r\n        IFrameHelper.sendMessage('delete-conversation-custom-attribute', {\r\n          customAttribute,\r\n        });\r\n      }\r\n    },\r\n\r\n    setLabel(label = '') {\r\n      IFrameHelper.sendMessage('set-label', { label });\r\n    },\r\n\r\n    removeLabel(label = '') {\r\n      IFrameHelper.sendMessage('remove-label', { label });\r\n    },\r\n\r\n    setLocale(localeToBeUsed = 'en') {\r\n      IFrameHelper.sendMessage('set-locale', { locale: localeToBeUsed });\r\n    },\r\n\r\n    setColorScheme(darkMode = 'light') {\r\n      IFrameHelper.sendMessage('set-color-scheme', {\r\n        darkMode: getDarkMode(darkMode),\r\n      });\r\n    },\r\n\r\n    reset() {\r\n      if (window.$chatwoot.isOpen) {\r\n        IFrameHelper.events.toggleBubble();\r\n      }\r\n\r\n      Cookies.remove('cw_conversation');\r\n      Cookies.remove(getUserCookieName());\r\n\r\n      const iframe = IFrameHelper.getAppFrame();\r\n      iframe.src = IFrameHelper.getUrl({\r\n        baseUrl: window.$chatwoot.baseUrl,\r\n        websiteToken: window.$chatwoot.websiteToken,\r\n      });\r\n\r\n      window.$chatwoot.resetTriggered = true;\r\n    },\r\n  };\r\n\r\n  IFrameHelper.createFrame({\r\n    baseUrl,\r\n    websiteToken,\r\n  });\r\n};\r\n\r\nwindow.chatwootSDK = {\r\n  run: runSDK,\r\n};\r\n"],"names":["SDK_CSS","loadCSS","css","restoreElement","id","newBody","element","newElement","restoreWidgetInDOM","addClasses","elm","classes","toggleClass","removeClasses","onLocationChange","referrerURL","referrerHost","IFrameHelper","onLocationChangeListener","oldHref","config","bodyList","mutations","BUBBLE_DESIGN","WIDGET_DESIGN","DARK_MODE","getBubbleView","type","isExpandedView","getWidgetStyle","style","isFlatWidgetStyle","getDarkMode","darkMode","createEvent","eventName","data","event","dispatchWindowEvent","bubbleSVG","body","widgetHolder","bubbleHolder","chatBubble","closeBubble","setBubbleText","bubbleText","textNode","createBubbleIcon","className","path","target","bubbleClassName","bubbleIcon","bubblePath","createBubbleHolder","hideMessageBubble","handleBubbleToggle","newIsOpen","CHATWOOT_OPENED","CHATWOOT_CLOSED","onBubbleClick","props","toggleValue","isOpen","onClickChatBubble","addUnreadClass","holderEl","removeUnreadClass","base64map","crypt","n","b","i","bytes","words","hex","c","base64","triplet","j","imod4","cryptModule","charenc","str","charenc_1","isBuffer_1","obj","isBuffer","isSlowBuffer","require$$0","utf8","require$$1","require$$2","bin","md5","message","options","m","l","a","d","FF","GG","HH","II","aa","bb","cc","dd","x","s","t","md5Module","digestbytes","REQUIRED_USER_KEYS","ALLOWED_USER_ATTRIBUTES","getUserCookieName","SET_USER_COOKIE_PREFIX","websiteIdentifier","getUserString","identifier","user","acc","key","computeHashForUserData","args","hasUserKeys","setCookieWithDomain","name","value","expires","baseDomain","cookieOptions","Cookies","initOnEvents","getAudioContext","audioCtx","getAlertAudio","baseUrl","requestContext","playSound","audioBuffer","source","alertTone","resourceUrl","audioRequest","response","buffer","res","updateAuthCookie","cookieContent","updateCampaignReadStatus","expireBy","addHours","websiteToken","iframe","cwCookie","widgetUrl","holderClassName","deltaY","contentHeight","visibleHeight","scrollTop","extraHeight","isFixedHeight","updatedIframeHeight","campaignsSnoozedTill","e","CHATWOOT_READY","errorType","CHATWOOT_ERROR","SET_USER_ERROR","widgetAuthToken","CHATWOOT_POSTBACK","state","bubbleState","locale","popoutChatWindow","bubbleElement","widgetColor","closeBtnClassName","isWidgetColorLighter","chatIcon","isMobile","runSDK","chatwootSettings","visibility","widgetElm","SDK_SET_BUBBLE_VISIBILITY","userCookieName","existingCookieValue","hashToBeStored","customAttributes","customAttribute","label","localeToBeUsed"],"mappings":"gSAAO,MAAMA,GAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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","x_google_ignoreList":[6,7,8,9]}