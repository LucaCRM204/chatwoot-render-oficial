{"version":3,"file":"IframeLoader-CqC8ndkM.js","sources":["../../../app/javascript/shared/components/ArticleSkeletonLoader.vue","../../../app/javascript/shared/components/IframeLoader.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-4 space-y-6 bg-white dark:bg-slate-900\">\r\n    <div class=\"space-y-2 animate-loader-pulse\">\r\n      <div class=\"h-6 bg-slate-100 dark:bg-slate-700 rounded w-1/5\" />\r\n      <div class=\"h-10 bg-slate-100 dark:bg-slate-700 rounded w-3/5\" />\r\n    </div>\r\n    <div class=\"space-y-2 animate-loader-pulse\">\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded\" />\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded\" />\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded\" />\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded w-4/5\" />\r\n    </div>\r\n    <div class=\"space-y-2 animate-loader-pulse\">\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded\" />\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded\" />\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded w-3/5\" />\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded\" />\r\n    </div>\r\n    <div class=\"space-y-2 animate-loader-pulse\">\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded\" />\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded\" />\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded\" />\r\n      <div class=\"h-5 bg-slate-100 dark:bg-slate-700 rounded w-3/5\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n","<script setup>\r\nimport { ref, useTemplateRef, computed, watch } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\nimport ArticleSkeletonLoader from 'shared/components/ArticleSkeletonLoader.vue';\r\n\r\nconst props = defineProps({\r\n  url: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n  isRtl: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  isDirApplied: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\n\r\nconst { t } = useI18n();\r\n\r\nconst iframe = useTemplateRef('iframe');\r\nconst isLoading = ref(true);\r\nconst showEmptyState = ref(!props.url);\r\n\r\nconst direction = computed(() => (props.isRtl ? 'rtl' : 'ltr'));\r\n\r\nconst applyDirection = () => {\r\n  if (!iframe.value) return;\r\n  if (!props.isDirApplied) return; // If direction is already applied through props, do not apply again (iframe case)\r\n  try {\r\n    const doc =\r\n      iframe.value.contentDocument || iframe.value.contentWindow?.document;\r\n    if (doc?.documentElement) {\r\n      doc.documentElement.dir = direction.value;\r\n      doc.documentElement.setAttribute('data-dir-applied', 'true');\r\n    }\r\n  } catch (e) {\r\n    // error\r\n  }\r\n};\r\n\r\nwatch(() => props.isRtl, applyDirection);\r\n\r\nconst handleIframeLoad = () => {\r\n  isLoading.value = false;\r\n  applyDirection();\r\n};\r\n\r\nconst handleIframeError = () => {\r\n  isLoading.value = false;\r\n  showEmptyState.value = true;\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"relative overflow-hidden pb-1/2 h-full\">\r\n    <iframe\r\n      v-if=\"url\"\r\n      ref=\"iframe\"\r\n      :src=\"url\"\r\n      class=\"absolute w-full h-full top-0 left-0\"\r\n      @load=\"handleIframeLoad\"\r\n      @error=\"handleIframeError\"\r\n    />\r\n    <ArticleSkeletonLoader\r\n      v-if=\"isLoading\"\r\n      class=\"absolute w-full h-full top-0 left-0\"\r\n    />\r\n    <div\r\n      v-if=\"showEmptyState\"\r\n      class=\"absolute w-full h-full top-0 left-0 flex justify-center items-center\"\r\n    >\r\n      <p>{{ t('PORTAL.IFRAME_ERROR') }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"names":["_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_hoisted_1","props","__props","t","useI18n","iframe","useTemplateRef","isLoading","ref","showEmptyState","direction","computed","applyDirection","doc","_a","watch","handleIframeLoad","handleIframeError"],"mappings":"gQACE,SAAAA,EAAAC,EAAAC,EAAA,CADF,OAAAC,EAAA,EAAAC,EAAA,MAAAC,EAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,q5CCKA,MAAMI,EAAQC,EAeR,CAAE,EAAAC,CAAC,EAAKC,IAERC,EAASC,EAAe,QAAQ,EAChCC,EAAYC,EAAI,EAAI,EACpBC,EAAiBD,EAAI,CAACP,EAAM,GAAG,EAE/BS,EAAYC,EAAS,IAAOV,EAAM,MAAQ,MAAQ,KAAM,EAExDW,EAAiB,IAAM,OAC3B,GAAKP,EAAO,OACPJ,EAAM,aACX,GAAI,CACF,MAAMY,EACJR,EAAO,MAAM,mBAAmBS,EAAAT,EAAO,MAAM,gBAAb,YAAAS,EAA4B,UAC1DD,GAAA,MAAAA,EAAK,kBACPA,EAAI,gBAAgB,IAAMH,EAAU,MACpCG,EAAI,gBAAgB,aAAa,mBAAoB,MAAM,EAE9D,MAAW,CAEX,CACH,EAEAE,EAAM,IAAMd,EAAM,MAAOW,CAAc,EAEvC,MAAMI,EAAmB,IAAM,CAC7BT,EAAU,MAAQ,GAClBK,GACF,EAEMK,EAAoB,IAAM,CAC9BV,EAAU,MAAQ,GAClBE,EAAe,MAAQ,EACzB"}