{"version":3,"file":"EmojiInput-D8KWfRV_.js","sources":["../../../app/javascript/shared/components/emoji/EmojiInput.vue"],"sourcesContent":["<script>\r\nimport emojis from './emojisGroup.json';\r\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\r\nimport NextButton from 'dashboard/components-next/button/Button.vue';\r\nconst SEARCH_KEY = 'Search';\r\n\r\nexport default {\r\n  components: { FluentIcon, NextButton },\r\n  props: {\r\n    onClick: {\r\n      type: Function,\r\n      default: () => {},\r\n    },\r\n    showRemoveButton: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      selectedKey: 'Search',\r\n      emojis,\r\n      search: '',\r\n    };\r\n  },\r\n  computed: {\r\n    categories() {\r\n      return [...this.emojis];\r\n    },\r\n    filterEmojisByCategory() {\r\n      const selectedCategoryName = this.emojis.find(category =>\r\n        category.name === this.selectedKey ? category.name : null\r\n      );\r\n      return selectedCategoryName?.emojis;\r\n    },\r\n    filterAllEmojisBySearch() {\r\n      return this.emojis.map(category => {\r\n        const allEmojis = category.emojis.filter(emoji =>\r\n          emoji.slug.replaceAll('_', ' ').includes(this.search.toLowerCase())\r\n        );\r\n        return allEmojis.length > 0\r\n          ? { ...category, emojis: allEmojis }\r\n          : { ...category, emojis: [] };\r\n      });\r\n    },\r\n    hasNoSearch() {\r\n      return this.selectedKey !== SEARCH_KEY && this.search === '';\r\n    },\r\n    hasEmptySearchResult() {\r\n      return this.filterAllEmojisBySearch.every(\r\n        category => category.emojis.length === 0\r\n      );\r\n    },\r\n  },\r\n  watch: {\r\n    search() {\r\n      this.selectedKey = 'Search';\r\n    },\r\n    selectedKey() {\r\n      return this.selectedKey === 'Search' ? this.focusSearchInput() : null;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.focusSearchInput();\r\n  },\r\n  methods: {\r\n    changeCategory(category) {\r\n      this.search = '';\r\n      this.$refs.emojiItem.scrollTo({ top: 0 });\r\n      this.selectedKey = category;\r\n    },\r\n    getFirstEmojiByCategoryName(categoryName) {\r\n      const categoryItem = this.emojis.find(category =>\r\n        category.name === categoryName ? category : null\r\n      );\r\n      return categoryItem ? categoryItem.emojis[0].emoji : '';\r\n    },\r\n    focusSearchInput() {\r\n      this.$nextTick(() => {\r\n        this.$refs.searchbar.focus();\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    role=\"dialog\"\r\n    class=\"emoji-dialog bg-n-background shadow-lg rounded-md outline outline-1 outline-n-weak box-content h-[18.75rem] absolute right-0 -top-[95px] w-80 z-20\"\r\n  >\r\n    <div class=\"flex flex-col\">\r\n      <div class=\"flex gap-2 m-2 sticky top-2\">\r\n        <input\r\n          ref=\"searchbar\"\r\n          v-model=\"search\"\r\n          type=\"text\"\r\n          class=\"focus:box-shadow-blue dark:focus:box-shadow-dark !mb-0 !h-8 !text-sm\"\r\n          :placeholder=\"$t('EMOJI.PLACEHOLDER')\"\r\n        />\r\n        <NextButton\r\n          v-if=\"showRemoveButton\"\r\n          faded\r\n          sm\r\n          slate\r\n          class=\"flex-shrink-0\"\r\n          :label=\"$t('EMOJI.REMOVE')\"\r\n          @click=\"onClick('')\"\r\n        />\r\n      </div>\r\n      <div v-if=\"hasNoSearch\" ref=\"emojiItem\" class=\"emoji-item\">\r\n        <h5\r\n          class=\"text-sm text-n-slate-12 font-medium leading-normal m-0 py-1 px-2 capitalize\"\r\n        >\r\n          {{ selectedKey }}\r\n        </h5>\r\n        <div class=\"emoji--row\">\r\n          <button\r\n            v-for=\"item in filterEmojisByCategory\"\r\n            :key=\"item.slug\"\r\n            v-dompurify-html=\"item.emoji\"\r\n            class=\"emoji--item\"\r\n            track-by=\"$index\"\r\n            @click=\"onClick(item.emoji)\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div v-else ref=\"emojiItem\" class=\"emoji-item\">\r\n        <div v-for=\"category in filterAllEmojisBySearch\" :key=\"category.slug\">\r\n          <h5\r\n            v-if=\"category.emojis.length > 0\"\r\n            class=\"text-sm text-n-slate-12 font-medium leading-normal m-0 py-1 px-2 capitalize\"\r\n          >\r\n            {{ category.name }}\r\n          </h5>\r\n          <div v-if=\"category.emojis.length > 0\" class=\"emoji--row\">\r\n            <button\r\n              v-for=\"item in category.emojis\"\r\n              :key=\"item.slug\"\r\n              v-dompurify-html=\"item.emoji\"\r\n              class=\"emoji--item\"\r\n              track-by=\"$index\"\r\n              @click=\"onClick(item.emoji)\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div\r\n          v-if=\"hasEmptySearchResult\"\r\n          class=\"items-center flex flex-col h-[13.25rem] justify-center\"\r\n        >\r\n          <div class=\"text-n-slate-11 mb-2\">\r\n            <FluentIcon icon=\"emoji\" size=\"48\" />\r\n          </div>\r\n          <span class=\"text-n-slate-11 text-sm font-medium\">\r\n            {{ $t('EMOJI.NOT_FOUND') }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        class=\"emoji-dialog--footer relative w-full py-0 rounded-b-[0.34rem] px-1 bg-n-slate-3\"\r\n        role=\"menu\"\r\n      >\r\n        <ul\r\n          class=\"flex relative left-[2px] rtl:left-[unset] rtl:right-[2px] list-none m-0 overflow-auto py-1 px-0\"\r\n        >\r\n          <li>\r\n            <button\r\n              class=\"emoji--item\"\r\n              :class=\"{ active: selectedKey === 'Search' }\"\r\n              @click=\"changeCategory('Search')\"\r\n            >\r\n              <FluentIcon icon=\"search\" size=\"16\" class=\"text-n-slate-11\" />\r\n            </button>\r\n          </li>\r\n          <li\r\n            v-for=\"category in categories\"\r\n            :key=\"category.slug\"\r\n            @click=\"changeCategory(category.name)\"\r\n          >\r\n            <button\r\n              v-dompurify-html=\"getFirstEmojiByCategoryName(category.name)\"\r\n              class=\"emoji--item\"\r\n              :class=\"{ active: selectedKey === category.name }\"\r\n              @click=\"changeCategory(category.name)\"\r\n            />\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n@tailwind components;\r\n\r\n@layer components {\r\n  .box-shadow-blue {\r\n    box-shadow:\r\n      0 0 0 1px #1f93ff,\r\n      0 0 1px 2px #c7e3ff;\r\n  }\r\n\r\n  .box-shadow-dark {\r\n    box-shadow:\r\n      0 0 0 1px #212222,\r\n      0 0 1px 2px #4c5155;\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n@import 'dashboard/assets/scss/mixins';\r\n\r\n.emoji-dialog {\r\n  &::before {\r\n    $space-slab: 12px;\r\n\r\n    @media (prefers-color-scheme: dark) {\r\n      $color-bg-dark: #26292b;\r\n      @include arrow(bottom, $color-bg-dark, $space-slab);\r\n    }\r\n\r\n    @media (prefers-color-scheme: light) {\r\n      $color-bg: #ebf0f5;\r\n      @include arrow(bottom, $color-bg, $space-slab);\r\n    }\r\n\r\n    @apply -bottom-3 absolute right-5;\r\n  }\r\n}\r\n\r\n.emoji--item {\r\n  @apply bg-transparent border-0 rounded cursor-pointer text-lg h-6 m-0 py-0 px-1 hover:bg-n-slate-4;\r\n}\r\n\r\n.emoji--row {\r\n  @apply box-border p-1;\r\n\r\n  .emoji--item {\r\n    @apply h-[1.625rem] w-[1.625rem] leading-normal m-1;\r\n  }\r\n}\r\n\r\n.emoji-item {\r\n  @apply h-[13.25rem] overflow-y-auto;\r\n}\r\n\r\n.emoji-dialog--footer {\r\n  ul {\r\n    > li {\r\n      @apply items-center cursor-pointer flex justify-center p-1;\r\n    }\r\n\r\n    li .active {\r\n      @apply bg-n-background;\r\n    }\r\n\r\n    .emoji--item {\r\n      @apply items-center flex text-sm;\r\n\r\n      &:hover {\r\n        @apply bg-n-slate-2;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["SEARCH_KEY","_sfc_main","FluentIcon","NextButton","emojis","selectedCategoryName","category","allEmojis","emoji","categoryName","categoryItem","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_17","_hoisted_18","_hoisted_19","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_cache","$event","$data","_ctx","$props","_createBlock","_component_NextButton","_createCommentVNode","$options","_hoisted_5","_toDisplayString","_Fragment","_renderList","item","_directive_dompurify_html","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_13","_createVNode","_component_FluentIcon","_hoisted_16","_normalizeClass"],"mappings":"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"}