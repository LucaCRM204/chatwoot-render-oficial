{"version":3,"file":"PortalsSettingsIndexPage-BXVZGaDJ.js","sources":["../../../app/javascript/dashboard/components-next/colorpicker/ColorPicker.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/PortalBaseSettings.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/AddCustomDomainDialog.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/DNSConfigurationDialog.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/PortalConfigurationSettings.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/ConfirmDeletePortalDialog.vue","../../../app/javascript/dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/PortalSettings.vue","../../../app/javascript/dashboard/routes/dashboard/helpcenter/pages/PortalsSettingsIndexPage.vue"],"sourcesContent":["<script setup>\r\nimport { ref, defineProps, defineEmits } from 'vue';\r\nimport { Chrome } from '@lk77/vue3-color';\r\nimport { OnClickOutside } from '@vueuse/components';\r\n\r\nimport Button from 'dashboard/components-next/button/Button.vue';\r\n\r\ndefineProps({\r\n  modelValue: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n});\r\n\r\nconst emit = defineEmits(['update:modelValue']);\r\n\r\nconst isPickerOpen = ref(false);\r\n\r\nconst toggleColorPicker = () => {\r\n  isPickerOpen.value = !isPickerOpen.value;\r\n};\r\n\r\nconst closeTogglePicker = () => {\r\n  if (isPickerOpen.value) {\r\n    toggleColorPicker();\r\n  }\r\n};\r\n\r\nconst updateColor = e => {\r\n  emit('update:modelValue', e.hex);\r\n};\r\n\r\nconst pickerRef = ref(null);\r\n</script>\r\n\r\n<template>\r\n  <div ref=\"pickerRef\" class=\"relative w-fit\">\r\n    <OnClickOutside @trigger=\"closeTogglePicker\">\r\n      <Button\r\n        color=\"slate\"\r\n        icon=\"i-lucide-pipette\"\r\n        trailing-icon\r\n        class=\"!px-3 !py-3 [&>svg]:w-4 [&>svg]:h-4\"\r\n        @click=\"toggleColorPicker\"\r\n      >\r\n        <div class=\"flex items-center flex-grow gap-2\">\r\n          <span\r\n            class=\"rounded-md size-4\"\r\n            :style=\"{ backgroundColor: modelValue }\"\r\n          />\r\n          <span class=\"min-w-0 truncate\">{{ modelValue }}</span>\r\n        </div>\r\n      </Button>\r\n      <Chrome\r\n        v-if=\"isPickerOpen\"\r\n        disable-alpha\r\n        :model-value=\"modelValue\"\r\n        class=\"colorpicker--chrome\"\r\n        @update:model-value=\"updateColor\"\r\n      />\r\n    </OnClickOutside>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.colorpicker--chrome.vc-chrome {\r\n  @apply shadow-lg absolute bg-n-background z-[9999] border border-n-weak dark:border-n-weak rounded-[8px];\r\n\r\n  :deep() {\r\n    .vc-chrome-saturation-wrap {\r\n      @apply rounded-t-[7px];\r\n\r\n      .vc-saturation {\r\n        @apply rounded-t-[8px];\r\n      }\r\n    }\r\n\r\n    .vc-chrome-body {\r\n      @apply rounded-b-[7px] bg-n-alpha-3;\r\n\r\n      .vc-chrome-toggle-btn {\r\n        .vc-chrome-toggle-icon svg {\r\n          @apply [&>path]:fill-n-slate-10 dark:[&>path]:fill-n-slate-10 left-3 relative;\r\n        }\r\n        .vc-chrome-toggle-icon-highlight {\r\n          @apply bg-n-background;\r\n        }\r\n      }\r\n    }\r\n\r\n    input,\r\n    .vc-input__input {\r\n      @apply bg-n-background text-slate-900 dark:text-slate-50 rounded-md shadow-none;\r\n    }\r\n\r\n    .vc-input__label {\r\n      @apply text-n-slate-11 dark:text-n-slate-11;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<script setup>\r\nimport { reactive, watch, computed } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\nimport { buildPortalURL } from 'dashboard/helper/portalHelper';\r\nimport { useAlert } from 'dashboard/composables';\r\nimport { useStore, useStoreGetters } from 'dashboard/composables/store';\r\nimport { uploadFile } from 'dashboard/helper/uploadHelper';\r\nimport { checkFileSizeLimit } from 'shared/helpers/FileHelper';\r\nimport { useVuelidate } from '@vuelidate/core';\r\nimport { required, minLength, helpers } from '@vuelidate/validators';\r\nimport { shouldBeUrl, isValidSlug } from 'shared/helpers/Validators';\r\n\r\nimport Button from 'dashboard/components-next/button/Button.vue';\r\nimport Input from 'dashboard/components-next/input/Input.vue';\r\nimport Avatar from 'dashboard/components-next/avatar/Avatar.vue';\r\nimport ComboBox from 'dashboard/components-next/combobox/ComboBox.vue';\r\nimport ColorPicker from 'dashboard/components-next/colorpicker/ColorPicker.vue';\r\n\r\nconst props = defineProps({\r\n  activePortal: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n  isFetching: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\n\r\nconst emit = defineEmits(['updatePortal']);\r\n\r\nconst { t } = useI18n();\r\nconst store = useStore();\r\nconst getters = useStoreGetters();\r\n\r\nconst MAXIMUM_FILE_UPLOAD_SIZE = 4; // in MB\r\n\r\nconst state = reactive({\r\n  name: '',\r\n  headerText: '',\r\n  pageTitle: '',\r\n  slug: '',\r\n  widgetColor: '',\r\n  homePageLink: '',\r\n  liveChatWidgetInboxId: '',\r\n  logoUrl: '',\r\n  avatarBlobId: '',\r\n});\r\n\r\nconst originalState = reactive({ ...state });\r\n\r\nconst liveChatWidgets = computed(() => {\r\n  const inboxes = store.getters['inboxes/getInboxes'];\r\n  return inboxes\r\n    .filter(inbox => inbox.channel_type === 'Channel::WebWidget')\r\n    .map(inbox => ({\r\n      value: inbox.id,\r\n      label: inbox.name,\r\n    }));\r\n});\r\n\r\nconst rules = {\r\n  name: { required, minLength: minLength(2) },\r\n  slug: {\r\n    required: helpers.withMessage(\r\n      () => t('HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.ERROR'),\r\n      required\r\n    ),\r\n    isValidSlug: helpers.withMessage(\r\n      () => t('HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.FORMAT_ERROR'),\r\n      isValidSlug\r\n    ),\r\n  },\r\n  homePageLink: { shouldBeUrl },\r\n};\r\n\r\nconst v$ = useVuelidate(rules, state);\r\n\r\nconst nameError = computed(() =>\r\n  v$.value.name.$error ? t('HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.ERROR') : ''\r\n);\r\n\r\nconst slugError = computed(() => {\r\n  return v$.value.slug.$errors[0]?.$message || '';\r\n});\r\n\r\nconst homePageLinkError = computed(() =>\r\n  v$.value.homePageLink.$error\r\n    ? t('HELP_CENTER.PORTAL_SETTINGS.FORM.HOME_PAGE_LINK.ERROR')\r\n    : ''\r\n);\r\n\r\nconst isUpdatingPortal = computed(() => {\r\n  const slug = props.activePortal?.slug;\r\n  if (slug) return getters['portals/uiFlagsIn'].value(slug)?.isUpdating;\r\n\r\n  return false;\r\n});\r\n\r\nwatch(\r\n  () => props.activePortal,\r\n  newVal => {\r\n    if (newVal && !props.isFetching) {\r\n      Object.assign(state, {\r\n        name: newVal.name,\r\n        headerText: newVal.header_text,\r\n        pageTitle: newVal.page_title,\r\n        widgetColor: newVal.color,\r\n        homePageLink: newVal.homepage_link,\r\n        slug: newVal.slug,\r\n        liveChatWidgetInboxId: newVal.inbox?.id,\r\n      });\r\n      if (newVal.logo) {\r\n        const {\r\n          logo: { file_url: logoURL, blob_id: blobId },\r\n        } = newVal;\r\n        state.logoUrl = logoURL;\r\n        state.avatarBlobId = blobId;\r\n      } else {\r\n        state.logoUrl = '';\r\n        state.avatarBlobId = '';\r\n      }\r\n      Object.assign(originalState, state);\r\n    }\r\n  },\r\n  { immediate: true, deep: true }\r\n);\r\n\r\nconst hasChanges = computed(() => {\r\n  return JSON.stringify(state) !== JSON.stringify(originalState);\r\n});\r\n\r\nconst handleUpdatePortal = () => {\r\n  const portal = {\r\n    id: props.activePortal?.id,\r\n    slug: state.slug,\r\n    name: state.name,\r\n    color: state.widgetColor,\r\n    page_title: state.pageTitle,\r\n    header_text: state.headerText,\r\n    homepage_link: state.homePageLink,\r\n    blob_id: state.avatarBlobId,\r\n    inbox_id: state.liveChatWidgetInboxId,\r\n  };\r\n  emit('updatePortal', portal);\r\n};\r\n\r\nasync function uploadLogoToStorage({ file }) {\r\n  try {\r\n    const { fileUrl, blobId } = await uploadFile(file);\r\n    if (fileUrl) {\r\n      state.logoUrl = fileUrl;\r\n      state.avatarBlobId = blobId;\r\n    }\r\n    useAlert(t('HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_UPLOAD_SUCCESS'));\r\n  } catch (error) {\r\n    useAlert(t('HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_UPLOAD_ERROR'));\r\n  }\r\n}\r\n\r\nasync function deleteLogo() {\r\n  try {\r\n    const portalSlug = props.activePortal?.slug;\r\n    await store.dispatch('portals/deleteLogo', {\r\n      portalSlug,\r\n    });\r\n    useAlert(t('HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_DELETE_SUCCESS'));\r\n  } catch (error) {\r\n    useAlert(\r\n      error?.message ||\r\n        t('HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_DELETE_ERROR')\r\n    );\r\n  }\r\n}\r\n\r\nconst handleAvatarUpload = file => {\r\n  if (checkFileSizeLimit(file, MAXIMUM_FILE_UPLOAD_SIZE)) {\r\n    uploadLogoToStorage(file);\r\n  } else {\r\n    const errorKey =\r\n      'HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.IMAGE_UPLOAD_SIZE_ERROR';\r\n    useAlert(t(errorKey, { size: MAXIMUM_FILE_UPLOAD_SIZE }));\r\n  }\r\n};\r\n\r\nconst handleAvatarDelete = () => {\r\n  state.logoUrl = '';\r\n  state.avatarBlobId = '';\r\n  deleteLogo();\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex flex-col w-full gap-4\">\r\n    <div class=\"flex flex-col w-full gap-2\">\r\n      <label class=\"mb-0.5 text-sm font-medium text-gray-900 dark:text-gray-50\">\r\n        {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.AVATAR.LABEL') }}\r\n      </label>\r\n      <Avatar\r\n        :src=\"state.logoUrl\"\r\n        :name=\"state.name\"\r\n        :size=\"72\"\r\n        allow-upload\r\n        icon-name=\"i-lucide-building-2\"\r\n        @upload=\"handleAvatarUpload\"\r\n        @delete=\"handleAvatarDelete\"\r\n      />\r\n    </div>\r\n    <div class=\"flex flex-col w-full gap-4\">\r\n      <div\r\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\r\n      >\r\n        <label\r\n          class=\"text-sm font-medium whitespace-nowrap py-2.5 text-slate-900 dark:text-slate-50\"\r\n        >\r\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.NAME.LABEL') }}\r\n        </label>\r\n        <Input\r\n          v-model=\"state.name\"\r\n          :placeholder=\"t('HELP_CENTER.PORTAL_SETTINGS.FORM.NAME.PLACEHOLDER')\"\r\n          :message-type=\"nameError ? 'error' : 'info'\"\r\n          :message=\"nameError\"\r\n          custom-input-class=\"!bg-transparent dark:!bg-transparent\"\r\n          @input=\"v$.name.$touch()\"\r\n          @blur=\"v$.name.$touch()\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\r\n      >\r\n        <label\r\n          class=\"text-sm font-medium whitespace-nowrap py-2.5 text-slate-900 dark:text-slate-50\"\r\n        >\r\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.HEADER_TEXT.LABEL') }}\r\n        </label>\r\n        <Input\r\n          v-model=\"state.headerText\"\r\n          :placeholder=\"\r\n            t('HELP_CENTER.PORTAL_SETTINGS.FORM.HEADER_TEXT.PLACEHOLDER')\r\n          \"\r\n          custom-input-class=\"!bg-transparent dark:!bg-transparent\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\r\n      >\r\n        <label\r\n          class=\"text-sm font-medium whitespace-nowrap text-slate-900 py-2.5 dark:text-slate-50\"\r\n        >\r\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.PAGE_TITLE.LABEL') }}\r\n        </label>\r\n        <Input\r\n          v-model=\"state.pageTitle\"\r\n          :placeholder=\"\r\n            t('HELP_CENTER.PORTAL_SETTINGS.FORM.PAGE_TITLE.PLACEHOLDER')\r\n          \"\r\n          custom-input-class=\"!bg-transparent dark:!bg-transparent\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\r\n      >\r\n        <label\r\n          class=\"text-sm font-medium whitespace-nowrap text-slate-900 py-2.5 dark:text-slate-50\"\r\n        >\r\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.HOME_PAGE_LINK.LABEL') }}\r\n        </label>\r\n        <Input\r\n          v-model=\"state.homePageLink\"\r\n          :placeholder=\"\r\n            t('HELP_CENTER.PORTAL_SETTINGS.FORM.HOME_PAGE_LINK.PLACEHOLDER')\r\n          \"\r\n          :message-type=\"homePageLinkError ? 'error' : 'info'\"\r\n          :message=\"homePageLinkError\"\r\n          custom-input-class=\"!bg-transparent dark:!bg-transparent\"\r\n          @input=\"v$.homePageLink.$touch()\"\r\n          @blur=\"v$.homePageLink.$touch()\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\r\n      >\r\n        <label\r\n          class=\"text-sm font-medium whitespace-nowrap py-2.5 text-slate-900 dark:text-slate-50\"\r\n        >\r\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.SLUG.LABEL') }}\r\n        </label>\r\n        <Input\r\n          v-model=\"state.slug\"\r\n          :placeholder=\"t('HELP_CENTER.PORTAL_SETTINGS.FORM.SLUG.PLACEHOLDER')\"\r\n          :message-type=\"slugError ? 'error' : 'info'\"\r\n          :message=\"slugError || buildPortalURL(state.slug)\"\r\n          custom-input-class=\"!bg-transparent dark:!bg-transparent\"\r\n          @input=\"v$.slug.$touch()\"\r\n          @blur=\"v$.slug.$touch()\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"grid items-start justify-between w-full gap-2 grid-cols-[200px,1fr]\"\r\n      >\r\n        <label\r\n          class=\"text-sm font-medium whitespace-nowrap py-2.5 text-slate-900 dark:text-slate-50\"\r\n        >\r\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.LIVE_CHAT_WIDGET.LABEL') }}\r\n        </label>\r\n        <ComboBox\r\n          v-model=\"state.liveChatWidgetInboxId\"\r\n          :options=\"liveChatWidgets\"\r\n          :placeholder=\"\r\n            t('HELP_CENTER.PORTAL_SETTINGS.FORM.LIVE_CHAT_WIDGET.PLACEHOLDER')\r\n          \"\r\n          :message=\"\r\n            t('HELP_CENTER.PORTAL_SETTINGS.FORM.LIVE_CHAT_WIDGET.HELP_TEXT')\r\n          \"\r\n          class=\"[&>div>button:not(.focused)]:!outline-n-weak\"\r\n        />\r\n      </div>\r\n      <div class=\"flex items-start justify-between w-full gap-2\">\r\n        <label\r\n          class=\"text-sm font-medium whitespace-nowrap py-2.5 text-slate-900 dark:text-slate-50\"\r\n        >\r\n          {{ t('HELP_CENTER.PORTAL_SETTINGS.FORM.BRAND_COLOR.LABEL') }}\r\n        </label>\r\n        <div class=\"w-[432px] justify-start\">\r\n          <ColorPicker v-model=\"state.widgetColor\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"flex justify-end w-full gap-2\">\r\n        <Button\r\n          :label=\"t('HELP_CENTER.PORTAL_SETTINGS.FORM.SAVE_CHANGES')\"\r\n          :disabled=\"!hasChanges || isUpdatingPortal || v$.$invalid\"\r\n          :is-loading=\"isUpdatingPortal\"\r\n          @click=\"handleUpdatePortal\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n","<script setup>\r\nimport { ref, reactive, watch } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nimport Dialog from 'dashboard/components-next/dialog/Dialog.vue';\r\nimport Input from 'dashboard/components-next/input/Input.vue';\r\n\r\nconst props = defineProps({\r\n  mode: {\r\n    type: String,\r\n    default: 'add',\r\n  },\r\n  customDomain: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n});\r\n\r\nconst emit = defineEmits(['addCustomDomain']);\r\n\r\nconst { t } = useI18n();\r\n\r\nconst dialogRef = ref(null);\r\n\r\nconst formState = reactive({\r\n  customDomain: props.customDomain,\r\n});\r\n\r\nwatch(\r\n  () => props.customDomain,\r\n  newVal => {\r\n    formState.customDomain = newVal;\r\n  }\r\n);\r\n\r\nconst handleDialogConfirm = () => {\r\n  emit('addCustomDomain', formState.customDomain);\r\n};\r\n\r\ndefineExpose({ dialogRef });\r\n</script>\r\n\r\n<template>\r\n  <Dialog\r\n    ref=\"dialogRef\"\r\n    :title=\"\r\n      t(\r\n        `HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.${props.mode.toUpperCase()}_HEADER`\r\n      )\r\n    \"\r\n    :confirm-button-label=\"\r\n      t(\r\n        `HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.${props.mode.toUpperCase()}_CONFIRM_BUTTON_LABEL`\r\n      )\r\n    \"\r\n    @confirm=\"handleDialogConfirm\"\r\n  >\r\n    <Input\r\n      v-model=\"formState.customDomain\"\r\n      :label=\"\r\n        t(\r\n          'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.LABEL'\r\n        )\r\n      \"\r\n      :placeholder=\"\r\n        t(\r\n          'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DIALOG.PLACEHOLDER'\r\n        )\r\n      \"\r\n    />\r\n  </Dialog>\r\n</template>\r\n","<script setup>\r\nimport { ref, computed } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\nimport { getHostNameFromURL } from 'dashboard/helper/URLHelper';\r\n\r\nimport Dialog from 'dashboard/components-next/dialog/Dialog.vue';\r\n\r\nconst props = defineProps({\r\n  customDomain: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n});\r\n\r\nconst emit = defineEmits(['confirm']);\r\n\r\nconst { t } = useI18n();\r\n\r\nconst domain = computed(() => {\r\n  const { hostURL, helpCenterURL } = window?.chatwootConfig || {};\r\n  return getHostNameFromURL(helpCenterURL) || getHostNameFromURL(hostURL) || '';\r\n});\r\n\r\nconst subdomainCNAME = computed(\r\n  () => `${props.customDomain} CNAME ${domain.value}`\r\n);\r\n\r\nconst dialogRef = ref(null);\r\n\r\nconst handleDialogConfirm = () => {\r\n  emit('confirm');\r\n};\r\n\r\ndefineExpose({ dialogRef });\r\n</script>\r\n\r\n<template>\r\n  <Dialog\r\n    ref=\"dialogRef\"\r\n    :title=\"\r\n      t(\r\n        'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.HEADER'\r\n      )\r\n    \"\r\n    :confirm-button-label=\"\r\n      t(\r\n        'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.CONFIRM_BUTTON_LABEL'\r\n      )\r\n    \"\r\n    :show-cancel-button=\"false\"\r\n    @confirm=\"handleDialogConfirm\"\r\n  >\r\n    <template #description>\r\n      <p class=\"mb-0 text-sm text-n-slate-12\">\r\n        {{\r\n          t(\r\n            'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.DESCRIPTION'\r\n          )\r\n        }}\r\n      </p>\r\n    </template>\r\n\r\n    <div class=\"flex flex-col gap-6\">\r\n      <span\r\n        class=\"h-10 px-3 py-2.5 text-sm select-none bg-transparent border rounded-lg text-n-slate-11 border-n-strong\"\r\n      >\r\n        {{ subdomainCNAME }}\r\n      </span>\r\n      <p class=\"text-sm text-n-slate-12\">\r\n        {{\r\n          t(\r\n            'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DNS_CONFIGURATION_DIALOG.HELP_TEXT'\r\n          )\r\n        }}\r\n      </p>\r\n    </div>\r\n  </Dialog>\r\n</template>\r\n","<script setup>\r\nimport { computed, ref } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nimport AddCustomDomainDialog from 'dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/AddCustomDomainDialog.vue';\r\nimport DNSConfigurationDialog from 'dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/DNSConfigurationDialog.vue';\r\nimport Button from 'dashboard/components-next/button/Button.vue';\r\n\r\nconst props = defineProps({\r\n  activePortal: {\r\n    type: Object,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst emit = defineEmits(['updatePortalConfiguration']);\r\n\r\nconst { t } = useI18n();\r\n\r\nconst addCustomDomainDialogRef = ref(null);\r\nconst dnsConfigurationDialogRef = ref(null);\r\nconst updatedDomainAddress = ref('');\r\n\r\nconst customDomainAddress = computed(\r\n  () => props.activePortal?.custom_domain || ''\r\n);\r\n\r\nconst updatePortalConfiguration = customDomain => {\r\n  const portal = {\r\n    id: props.activePortal?.id,\r\n    custom_domain: customDomain,\r\n  };\r\n  emit('updatePortalConfiguration', portal);\r\n  addCustomDomainDialogRef.value.dialogRef.close();\r\n  if (customDomain) {\r\n    updatedDomainAddress.value = customDomain;\r\n    dnsConfigurationDialogRef.value.dialogRef.open();\r\n  }\r\n};\r\n\r\nconst closeDNSConfigurationDialog = () => {\r\n  updatedDomainAddress.value = '';\r\n  dnsConfigurationDialogRef.value.dialogRef.close();\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex flex-col w-full gap-6\">\r\n    <div class=\"flex flex-col gap-2\">\r\n      <h6 class=\"text-base font-medium text-n-slate-12\">\r\n        {{\r\n          t(\r\n            'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.HEADER'\r\n          )\r\n        }}\r\n      </h6>\r\n      <span class=\"text-sm text-n-slate-11\">\r\n        {{\r\n          t(\r\n            'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.DESCRIPTION'\r\n          )\r\n        }}\r\n      </span>\r\n    </div>\r\n    <div class=\"flex flex-col w-full gap-4\">\r\n      <div class=\"flex justify-between w-full gap-2\">\r\n        <div\r\n          v-if=\"customDomainAddress\"\r\n          class=\"flex items-center w-full h-8 gap-4\"\r\n        >\r\n          <label class=\"text-sm font-medium text-n-slate-12\">\r\n            {{\r\n              t(\r\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.LABEL'\r\n              )\r\n            }}\r\n          </label>\r\n          <span class=\"text-sm text-n-slate-12\">\r\n            {{ customDomainAddress }}\r\n          </span>\r\n        </div>\r\n        <div class=\"flex items-center justify-end w-full\">\r\n          <Button\r\n            v-if=\"customDomainAddress\"\r\n            color=\"slate\"\r\n            :label=\"\r\n              t(\r\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.EDIT_BUTTON'\r\n              )\r\n            \"\r\n            @click=\"addCustomDomainDialogRef.dialogRef.open()\"\r\n          />\r\n          <Button\r\n            v-else\r\n            :label=\"\r\n              t(\r\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.CUSTOM_DOMAIN.ADD_BUTTON'\r\n              )\r\n            \"\r\n            color=\"slate\"\r\n            @click=\"addCustomDomainDialogRef.dialogRef.open()\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <AddCustomDomainDialog\r\n      ref=\"addCustomDomainDialogRef\"\r\n      :mode=\"customDomainAddress ? 'edit' : 'add'\"\r\n      :custom-domain=\"customDomainAddress\"\r\n      @add-custom-domain=\"updatePortalConfiguration\"\r\n    />\r\n    <DNSConfigurationDialog\r\n      ref=\"dnsConfigurationDialogRef\"\r\n      :custom-domain=\"updatedDomainAddress || customDomainAddress\"\r\n      @confirm=\"closeDNSConfigurationDialog\"\r\n    />\r\n  </div>\r\n</template>\r\n","<script setup>\r\nimport { ref } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nimport Dialog from 'dashboard/components-next/dialog/Dialog.vue';\r\n\r\ndefineProps({\r\n  activePortalName: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst emit = defineEmits(['deletePortal']);\r\n\r\nconst { t } = useI18n();\r\n\r\nconst dialogRef = ref(null);\r\n\r\nconst handleDialogConfirm = () => {\r\n  emit('deletePortal');\r\n};\r\n\r\ndefineExpose({ dialogRef });\r\n</script>\r\n\r\n<template>\r\n  <Dialog\r\n    ref=\"dialogRef\"\r\n    type=\"alert\"\r\n    :title=\"\r\n      t(\r\n        'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DIALOG.HEADER',\r\n        {\r\n          portalName: activePortalName,\r\n        }\r\n      )\r\n    \"\r\n    :description=\"\r\n      t(\r\n        'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DIALOG.DESCRIPTION'\r\n      )\r\n    \"\r\n    :confirm-button-label=\"\r\n      t(\r\n        'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DIALOG.CONFIRM_BUTTON_LABEL'\r\n      )\r\n    \"\r\n    @confirm=\"handleDialogConfirm\"\r\n  />\r\n</template>\r\n","<script setup>\r\nimport { computed, ref } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport { useI18n } from 'vue-i18n';\r\nimport { useMapGetter } from 'dashboard/composables/store.js';\r\n\r\nimport HelpCenterLayout from 'dashboard/components-next/HelpCenter/HelpCenterLayout.vue';\r\nimport PortalBaseSettings from 'dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/PortalBaseSettings.vue';\r\nimport PortalConfigurationSettings from './PortalConfigurationSettings.vue';\r\nimport ConfirmDeletePortalDialog from 'dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/ConfirmDeletePortalDialog.vue';\r\nimport Spinner from 'dashboard/components-next/spinner/Spinner.vue';\r\nimport Button from 'dashboard/components-next/button/Button.vue';\r\n\r\nconst props = defineProps({\r\n  portals: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n  isFetching: {\r\n    type: Boolean,\r\n    required: true,\r\n  },\r\n});\r\n\r\nconst emit = defineEmits([\r\n  'updatePortal',\r\n  'updatePortalConfiguration',\r\n  'deletePortal',\r\n]);\r\n\r\nconst { t } = useI18n();\r\nconst route = useRoute();\r\n\r\nconst confirmDeletePortalDialogRef = ref(null);\r\n\r\nconst currentPortalSlug = computed(() => route.params.portalSlug);\r\n\r\nconst isSwitchingPortal = useMapGetter('portals/isSwitchingPortal');\r\n\r\nconst activePortal = computed(() => {\r\n  return props.portals?.find(portal => portal.slug === currentPortalSlug.value);\r\n});\r\n\r\nconst activePortalName = computed(() => activePortal.value?.name || '');\r\n\r\nconst isLoading = computed(() => props.isFetching || isSwitchingPortal.value);\r\n\r\nconst handleUpdatePortal = portal => {\r\n  emit('updatePortal', portal);\r\n};\r\n\r\nconst handleUpdatePortalConfiguration = portal => {\r\n  emit('updatePortalConfiguration', portal);\r\n};\r\n\r\nconst openConfirmDeletePortalDialog = () => {\r\n  confirmDeletePortalDialogRef.value.dialogRef.open();\r\n};\r\n\r\nconst handleDeletePortal = () => {\r\n  emit('deletePortal', activePortal.value);\r\n  confirmDeletePortalDialogRef.value.dialogRef.close();\r\n};\r\n</script>\r\n\r\n<template>\r\n  <HelpCenterLayout :show-pagination-footer=\"false\">\r\n    <template #content>\r\n      <div\r\n        v-if=\"isLoading\"\r\n        class=\"flex items-center justify-center py-10 pt-2 pb-8 text-n-slate-11\"\r\n      >\r\n        <Spinner />\r\n      </div>\r\n      <div\r\n        v-else-if=\"activePortal\"\r\n        class=\"flex flex-col w-full gap-4 max-w-[40rem] pb-8\"\r\n      >\r\n        <PortalBaseSettings\r\n          :active-portal=\"activePortal\"\r\n          :is-fetching=\"isFetching\"\r\n          @update-portal=\"handleUpdatePortal\"\r\n        />\r\n        <div class=\"w-full h-px bg-slate-50 dark:bg-slate-800/50\" />\r\n        <PortalConfigurationSettings\r\n          :active-portal=\"activePortal\"\r\n          :is-fetching=\"isFetching\"\r\n          @update-portal-configuration=\"handleUpdatePortalConfiguration\"\r\n        />\r\n        <div class=\"w-full h-px bg-slate-50 dark:bg-slate-800/50\" />\r\n        <div class=\"flex items-end justify-between w-full gap-4\">\r\n          <div class=\"flex flex-col gap-2\">\r\n            <h6 class=\"text-base font-medium text-n-slate-12\">\r\n              {{\r\n                t(\r\n                  'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.HEADER'\r\n                )\r\n              }}\r\n            </h6>\r\n            <span class=\"text-sm text-n-slate-11\">\r\n              {{\r\n                t(\r\n                  'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.DESCRIPTION'\r\n                )\r\n              }}\r\n            </span>\r\n          </div>\r\n          <Button\r\n            :label=\"\r\n              t(\r\n                'HELP_CENTER.PORTAL_SETTINGS.CONFIGURATION_FORM.DELETE_PORTAL.BUTTON',\r\n                {\r\n                  portalName: activePortalName,\r\n                }\r\n              )\r\n            \"\r\n            color=\"ruby\"\r\n            class=\"max-w-56 !w-fit\"\r\n            @click=\"openConfirmDeletePortalDialog\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <ConfirmDeletePortalDialog\r\n      ref=\"confirmDeletePortalDialogRef\"\r\n      :active-portal-name=\"activePortalName\"\r\n      @delete-portal=\"handleDeletePortal\"\r\n    />\r\n  </HelpCenterLayout>\r\n</template>\r\n","<script setup>\r\nimport { useI18n } from 'vue-i18n';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport { useUISettings } from 'dashboard/composables/useUISettings';\r\nimport { useAlert } from 'dashboard/composables';\r\nimport { useMapGetter, useStore } from 'dashboard/composables/store.js';\r\nimport PortalSettings from 'dashboard/components-next/HelpCenter/Pages/PortalSettingsPage/PortalSettings.vue';\r\n\r\nconst { t } = useI18n();\r\nconst store = useStore();\r\nconst route = useRoute();\r\nconst router = useRouter();\r\n\r\nconst { updateUISettings } = useUISettings();\r\n\r\nconst portals = useMapGetter('portals/allPortals');\r\nconst isFetching = useMapGetter('portals/isFetchingPortals');\r\nconst getPortalBySlug = useMapGetter('portals/portalBySlug');\r\n\r\nconst getNextAvailablePortal = deletedPortalSlug =>\r\n  portals.value?.find(portal => portal.slug !== deletedPortalSlug) ?? null;\r\n\r\nconst getDefaultLocale = slug => {\r\n  return getPortalBySlug.value(slug)?.meta?.default_locale;\r\n};\r\n\r\nconst fetchPortalAndItsCategories = async (slug, locale) => {\r\n  const selectedPortalParam = { portalSlug: slug, locale };\r\n  await Promise.all([\r\n    store.dispatch('portals/index'),\r\n    store.dispatch('portals/show', selectedPortalParam),\r\n    store.dispatch('categories/index', selectedPortalParam),\r\n    store.dispatch('agents/get'),\r\n    store.dispatch('inboxes/get'),\r\n  ]);\r\n};\r\n\r\nconst updateRouteAfterDeletion = async deletedPortalSlug => {\r\n  const nextPortal = getNextAvailablePortal(deletedPortalSlug);\r\n  if (nextPortal) {\r\n    const {\r\n      slug,\r\n      meta: { default_locale: defaultLocale },\r\n    } = nextPortal;\r\n    await fetchPortalAndItsCategories(slug, defaultLocale);\r\n    router.push({\r\n      name: 'portals_articles_index',\r\n      params: { portalSlug: slug, locale: defaultLocale },\r\n    });\r\n  } else {\r\n    router.push({ name: 'portals_new' });\r\n  }\r\n};\r\n\r\nconst refreshPortalRoute = async (newSlug, defaultLocale) => {\r\n  // This is to refresh the portal route and update the UI settings\r\n  // If there is slug change, this will be called to refresh the route and UI settings\r\n  await fetchPortalAndItsCategories(newSlug, defaultLocale);\r\n  updateUISettings({\r\n    last_active_portal_slug: newSlug,\r\n    last_active_locale_code: defaultLocale,\r\n  });\r\n  await router.replace({\r\n    name: 'portals_settings_index',\r\n    params: { portalSlug: newSlug },\r\n  });\r\n};\r\n\r\nconst updatePortalSettings = async portalObj => {\r\n  const { portalSlug } = route.params;\r\n  try {\r\n    const defaultLocale = getDefaultLocale(portalSlug);\r\n    await store.dispatch('portals/update', {\r\n      ...portalObj,\r\n      portalSlug: portalSlug || portalObj?.slug,\r\n    });\r\n\r\n    // If there is a slug change, this will refresh the route and update the UI settings\r\n    if (portalObj?.slug && portalSlug !== portalObj.slug) {\r\n      await refreshPortalRoute(portalObj.slug, defaultLocale);\r\n    }\r\n    useAlert(\r\n      t('HELP_CENTER.PORTAL_SETTINGS.API.UPDATE_PORTAL.SUCCESS_MESSAGE')\r\n    );\r\n  } catch (error) {\r\n    useAlert(\r\n      error?.message ||\r\n        t('HELP_CENTER.PORTAL_SETTINGS.API.UPDATE_PORTAL.ERROR_MESSAGE')\r\n    );\r\n  }\r\n};\r\n\r\nconst deletePortal = async selectedPortalForDelete => {\r\n  const { slug } = selectedPortalForDelete;\r\n  try {\r\n    await store.dispatch('portals/delete', { portalSlug: slug });\r\n    await updateRouteAfterDeletion(slug);\r\n    useAlert(\r\n      t('HELP_CENTER.PORTAL.PORTAL_SETTINGS.DELETE_PORTAL.API.DELETE_SUCCESS')\r\n    );\r\n  } catch (error) {\r\n    useAlert(\r\n      error?.message ||\r\n        t('HELP_CENTER.PORTAL.PORTAL_SETTINGS.DELETE_PORTAL.API.DELETE_ERROR')\r\n    );\r\n  }\r\n};\r\n\r\nconst handleUpdatePortal = updatePortalSettings;\r\nconst handleUpdatePortalConfiguration = updatePortalSettings;\r\nconst handleDeletePortal = deletePortal;\r\n</script>\r\n\r\n<template>\r\n  <PortalSettings\r\n    :portals=\"portals\"\r\n    :is-fetching=\"isFetching\"\r\n    @update-portal=\"handleUpdatePortal\"\r\n    @update-portal-configuration=\"handleUpdatePortalConfiguration\"\r\n    @delete-portal=\"handleDeletePortal\"\r\n  />\r\n</template>\r\n"],"names":["emit","__emit","isPickerOpen","ref","toggleColorPicker","closeTogglePicker","updateColor","e","pickerRef","MAXIMUM_FILE_UPLOAD_SIZE","props","__props","t","useI18n","store","useStore","getters","useStoreGetters","state","reactive","originalState","liveChatWidgets","computed","inbox","rules","required","minLength","helpers","isValidSlug","shouldBeUrl","v$","useVuelidate","nameError","slugError","_a","homePageLinkError","isUpdatingPortal","slug","_b","watch","newVal","logoURL","blobId","hasChanges","handleUpdatePortal","portal","uploadLogoToStorage","file","fileUrl","uploadFile","useAlert","deleteLogo","portalSlug","error","handleAvatarUpload","checkFileSizeLimit","handleAvatarDelete","dialogRef","formState","handleDialogConfirm","__expose","domain","hostURL","helpCenterURL","getHostNameFromURL","subdomainCNAME","addCustomDomainDialogRef","dnsConfigurationDialogRef","updatedDomainAddress","customDomainAddress","updatePortalConfiguration","customDomain","closeDNSConfigurationDialog","route","useRoute","confirmDeletePortalDialogRef","currentPortalSlug","isSwitchingPortal","useMapGetter","activePortal","activePortalName","isLoading","handleUpdatePortalConfiguration","openConfirmDeletePortalDialog","handleDeletePortal","router","useRouter","updateUISettings","useUISettings","portals","isFetching","getPortalBySlug","getNextAvailablePortal","deletedPortalSlug","getDefaultLocale","fetchPortalAndItsCategories","locale","selectedPortalParam","updateRouteAfterDeletion","nextPortal","defaultLocale","refreshPortalRoute","newSlug","updatePortalSettings","portalObj","deletePortal","selectedPortalForDelete"],"mappings":"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"}